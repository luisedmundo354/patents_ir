{
    "title": "Methods and systems for interferometric analysis of surfaces and related applications",
    "abstract": "A method for determining a spatial property of an object includes obtaining a scanning low coherence interference signal from a measurement object that includes two or more interfaces. The scanning low coherence interference signal includes two or more overlapping low coherence interference signals, each of which results from a respective interface. Based on the low coherence interference signal, a spatial property of at least one of the interfaces is determined. In some cases, the determination is based on a subset of the low coherence interference signal rather than on the entirety of the signal. Alternatively, or in addition, the determination can be based on a template, which may be indicative of an instrument response of the interferometer used to obtain the low coherence interference signal.",
    "inventors": [
        "De Groot"
    ],
    "document_number": "07298494",
    "publication_date": "20071120",
    "assignees": [
        "Zygo Corporation"
    ],
    "claims": [
        {
            "claim_number": "CLM-00001",
            "preamble": "1. A method, comprising:",
            "components": [
                {
                    "component": "obtaining a plurality of low coherence interference signals from a measurement object comprising first and second interfaces, each low coherence interference signal comprising first and second overlapping interference patterns, each first interference pattern resulting from a different point of the first interface, each second interference pattern resulting from a different point of the second interface, the obtaining a plurality of low coherence interference signals comprising imaging the object;",
                    "subcomponents": []
                },
                {
                    "component": "identifying a subset of each of the interference signals, each subset having a greater contribution from one of the first and second interference patterns of the corresponding interference signal than the other interference pattern;",
                    "subcomponents": []
                },
                {
                    "component": "determining a spatial property of each of at least some of the points of the first or second interfaces based on an asymmetric subset of the overlapping interference patterns of the corresponding interference signal; and",
                    "subcomponents": []
                },
                {
                    "component": "outputting information about the determined spatial properties.",
                    "subcomponents": []
                }
            ]
        },
        {
            "claim_number": "CLM-00002",
            "preamble": "2. The method of claim 1 , wherein, for each of the plurality of low coherence interference signals, the obtaining comprises using an interferometer, each of the plurality of low coherence signals resulting from light have a range of optical path length differences, each range of optical path length differences being at least 50% of a coherence length of the interferometer.",
            "components": []
        },
        {
            "claim_number": "CLM-00003",
            "preamble": "3. The method of claim 2 , wherein each range is at least as great as the coherence length of the interferometer.",
            "components": []
        },
        {
            "claim_number": "CLM-00004",
            "preamble": "4. The method of claim 1 , wherein the first interface is an outer surface of the object and the method comprises determining a relative height of each of a plurality of the points of the outer surface.",
            "components": []
        },
        {
            "claim_number": "CLM-00005",
            "preamble": "5. The method of claim 1 , wherein the first and second interfaces are separated by 1000 nm or less.",
            "components": []
        },
        {
            "claim_number": "CLM-00006",
            "preamble": "6. The method of claim 1 , wherein the first interface is an outer surface of the object and the second interface is beneath the outer surface.",
            "components": []
        },
        {
            "claim_number": "CLM-00007",
            "preamble": "7. The method of claim 6 , wherein the outer surface is an outer surface of a layer of photoresist overlying a substrate and the second interface is defined between the outer surface of the photoresist and the substrate.",
            "components": []
        },
        {
            "claim_number": "CLM-00008",
            "preamble": "8. The method of claim 1 , wherein the first interface is an outer surface of the object and the method comprises:",
            "components": [
                {
                    "component": "prior to the obtaining a low coherence interference signal, removing a material from the outer surface of the object;",
                    "subcomponents": []
                },
                {
                    "component": "determining a spatial property of the outer surface of the object based on the subset of the overlapping interference patterns; and",
                    "subcomponents": []
                },
                {
                    "component": "removing additional material from the outer surface of the object based on the spatial property.",
                    "subcomponents": []
                }
            ]
        },
        {
            "claim_number": "CLM-00009",
            "preamble": "9. The method of claim 1 , wherein the first and second interfaces are interfaces of a liquid crystal display cell.",
            "components": []
        },
        {
            "claim_number": "CLM-00010",
            "preamble": "10. The method of claim 1 , comprising:",
            "components": [
                {
                    "component": "prior to the obtaining a low coherence interference signal, irradiating the object with a laser to form a scribe line;",
                    "subcomponents": []
                },
                {
                    "component": "determining a spatial property of a portion of the object including the scribe line based on the subset of the overlapping interference patterns; and",
                    "subcomponents": []
                },
                {
                    "component": "performing additional scribing of the same object or a different object based on the spatial property.",
                    "subcomponents": []
                }
            ]
        },
        {
            "claim_number": "CLM-00011",
            "preamble": "11. The method of claims 1 , comprising:",
            "components": [
                {
                    "component": "prior to the obtaining a low coherence interference signal, forming the first and second interfaces during a solder bump process.",
                    "subcomponents": []
                }
            ]
        },
        {
            "claim_number": "CLM-00012",
            "preamble": "12. The method of claim 1 , wherein the determining a spatial property of each of at least some of the points comprises transforming the asymmetric subset.",
            "components": []
        },
        {
            "claim_number": "CLM-00013",
            "preamble": "13. The method of claim 1 , wherein the first interface is an outer surface of the object and the determining a spatial property of each of at least some of the points comprises determining a spatial property of a plurality of points of the outer surface.",
            "components": []
        },
        {
            "claim_number": "CLM-00014",
            "preamble": "14. The method of claim 13 , wherein each asymmetric subset is dominated by interference resulting from the outer surface of the object.",
            "components": []
        },
        {
            "claim_number": "CLM-00015",
            "preamble": "15. The method of claim 1 , wherein the identifying a subset comprises determining a boundary of the asymmetric subset based on a template indicative of an interferometer response.",
            "components": []
        },
        {
            "claim_number": "CLM-00016",
            "preamble": "16. The method of claim 15 , wherein the template is indicative of an object-height independent interferometer response.",
            "components": []
        },
        {
            "claim_number": "CLM-00017",
            "preamble": "17. The method of claim 15 , wherein the determining a boundary comprises comparing the template and the low coherence interference signal.",
            "components": []
        },
        {
            "claim_number": "CLM-00018",
            "preamble": "18. The method of claim 15 , wherein the identifying a subset comprises cross-correlating the template and the low coherence interference signal.",
            "components": []
        },
        {
            "claim_number": "CLM-00019",
            "preamble": "19. The method of claim 18 , wherein the cross-correlating comprises normalizing based on a shape of the low coherence interference signal.",
            "components": []
        },
        {
            "claim_number": "CLM-00020",
            "preamble": "20. The method of claim 1 , wherein the determining a spatial property of each of at least some of the points comprises determining the spatial property based on the corresponding low coherence interference signal and a template indicative of an interferometer response.",
            "components": []
        },
        {
            "claim_number": "CLM-00021",
            "preamble": "21. The method of claim 20 , wherein the determining a spatial property of each of at least some of the points comprises comparing the corresponding low coherence interference signal and the template.",
            "components": []
        },
        {
            "claim_number": "CLM-00022",
            "preamble": "22. The method of claim 21 , wherein the comparing comprises determining a location of best match between the corresponding low coherence interference signal and the template.",
            "components": []
        },
        {
            "claim_number": "CLM-00023",
            "preamble": "23. The method of claim 21 , wherein the comparing comprises cross-correlating the template and the overlapping interference patterns.",
            "components": []
        },
        {
            "claim_number": "CLM-00024",
            "preamble": "24. The method of claim 23 , wherein the cross-correlating comprises normalizing based on a shape of the corresponding low coherence interference signal.",
            "components": []
        },
        {
            "claim_number": "CLM-00025",
            "preamble": "25. The method of claim 20 , wherein the template is asymmetric.",
            "components": []
        },
        {
            "claim_number": "CLM-00026",
            "preamble": "26. The method of claim 25 , wherein the template has a shape of a truncated interference pattern.",
            "components": []
        },
        {
            "claim_number": "CLM-00027",
            "preamble": "27. The method of claim 20 , comprising generating the template by obtaining a reference low coherence interference signal from each of a plurality of points of a reference object, wherein the template comprises contributions derived from each of the reference low coherence interference signals.",
            "components": []
        },
        {
            "claim_number": "CLM-00028",
            "preamble": "28. The method of claim 27 , wherein each reference low coherence interference signal includes object-height dependent properties indicative of a height of the corresponding object point, and preparing the template, comprises removing object-height dependent properties from the reference low coherence interference signals.",
            "components": []
        },
        {
            "claim_number": "CLM-00029",
            "preamble": "29. The method of claim 27 , wherein the reference low coherence interference signals comprises a non-overlapping interference pattern.",
            "components": []
        },
        {
            "claim_number": "CLM-00030",
            "preamble": "30. A method, comprising:",
            "components": [
                {
                    "component": "obtaining a plurality of low coherence interference signals from a measurement object comprising first and second interfaces, wherein the first surface is an outer surface of a layer of photoresist overlying a substrate and the second interface is defined between the outer surface of the photoresist and the substrate, each low coherence interference signal comprising first and second overlapping interference patterns, each first interference pattern resulting from a different point of the first interface, each second interference pattern resulting from a different point of the second interface, the obtaining a plurality of low coherence interference signals comprising imaging the object;",
                    "subcomponents": []
                },
                {
                    "component": "identifying a subset of each of the interference signals, each subset having a greater contribution from one of the first and second interference patterns of the corresponding interference signal than the other interference pattern; and",
                    "subcomponents": []
                },
                {
                    "component": "determining a spatial property of the outer surface based on the subset of the overlapping interference patterns and modifying a relative position of the object and a photolithography system based on the spatial property.",
                    "subcomponents": []
                }
            ]
        },
        {
            "claim_number": "CLM-00031",
            "preamble": "31. A method, comprising",
            "components": [
                {
                    "component": "obtaining a plurality of low coherence interference signals from a measurement object comprising first and second interfaces, each low coherence interference signal comprising first and second overlapping interference patterns, each first interference pattern resulting from a different point of the first interface, each second interference pattern resulting from a different point of the second interface, the obtaining a plurality of low coherence interference signals comprising imaging the object;",
                    "subcomponents": []
                },
                {
                    "component": "identifying a subset of each of the interference signals, each subset having a greater contribution from one of the first and second interference patterns of the corresponding interference signal than the other interference pattern;",
                    "subcomponents": []
                },
                {
                    "component": "determining a spatial property of each of at least some of the points of the first or second interfaces based on the low coherence interference signals; and",
                    "subcomponents": []
                },
                {
                    "component": "outputting information about the determined spatial properties,",
                    "subcomponents": []
                },
                {
                    "component": "wherein each of the first and second overlapping interference patterns comprise a plurality of fringes and the determining a spatial property of each of at least some of the points comprises determining the spatial property of each of at least some of the points based on less than one-half of the fringes of one of the first or second overlapping interference patterns. Image Page 4",
                    "subcomponents": []
                }
            ]
        },
        {
            "claim_number": "CLM-00032",
            "preamble": "32. The method of claim 31 , wherein the determining a spatial property of each of at least some of the points comprises transforming the less than one-half of the fringes of one of the first or second overlapping interference patterns.",
            "components": []
        },
        {
            "claim_number": "CLM-00033",
            "preamble": "33. An apparatus, comprising:",
            "components": [
                {
                    "component": "an optical system configured to obtain a low coherence interference signal from an object, the object having a plurality of interfaces, wherein the low coherence interference signal comprises at least first and second overlapping interference patterns resulting from at least first and second interfaces of the object; and",
                    "subcomponents": []
                },
                {
                    "component": "a processor configured to:",
                    "subcomponents": [
                        "determine a spatial property of at least one of the first and second interfaces based on an asymmetric subset of the first and second overlapping interference patterns."
                    ]
                },
                {
                    "component": "determine a spatial property of at least one of the first and second interfaces based on an asymmetric subset of the first and second overlapping interference patterns.",
                    "subcomponents": []
                }
            ]
        },
        {
            "claim_number": "CLM-00034",
            "preamble": "34. The apparatus of claim 33 , the processor configured to:",
            "components": [
                {
                    "component": "determine a portion of the low coherence interference signal comprising greater contributions from one of the first and second interference patterns as opposed to the other of the interference patterns; and",
                    "subcomponents": []
                },
                {
                    "component": "select the subset of data from the portion of the low coherence interference signal.",
                    "subcomponents": []
                }
            ]
        },
        {
            "claim_number": "CLM-00035",
            "preamble": "35. The apparatus of claim 33 , wherein the first interface is an outer surface of the object and the first interference pattern results from the first interface, and the processor is configured to determine a spatial property of the first interface.",
            "components": []
        },
        {
            "claim_number": "CLM-00036",
            "preamble": "36. The apparatus of claim 35 , wherein the optical system is configured to obtain a plurality of low coherence interference signals from the object, each low coherence interference signal comprising respective first and second overlapping interference patterns resulting from different points of the first and second interfaces, and wherein the processor is configured to determine a spatial property of a plurality of points of the first interface based on respective asymmetric subsets of the plurality of low coherence interference signals.",
            "components": []
        },
        {
            "claim_number": "CLM-00037",
            "preamble": "37. The apparatus of claim 36 , wherein the spatial property of the plurality of points is a relative height of each of the points.",
            "components": []
        },
        {
            "claim_number": "CLM-00038",
            "preamble": "38. The apparatus of claim 36 , wherein the processor is configured to determine a spatial property of the outer surface of the object with respect to another object.",
            "components": []
        },
        {
            "claim_number": "CLM-00039",
            "preamble": "39. The apparatus of claim 36 , wherein the processor is configured to determine a position of the outer surface of the object relative to a photolithography apparatus.",
            "components": []
        },
        {
            "claim_number": "CLM-00040",
            "preamble": "40. The apparatus of claim 36 , wherein the processor is further configured to output information about the determined spatial properties.",
            "components": []
        },
        {
            "claim_number": "CLM-00041",
            "preamble": "41. The apparatus of claim 33 , wherein the processor is further configured to output information about the determined spatial property.",
            "components": []
        }
    ],
    "description": [
        "The present application claims the benefit of U.S. provisional application Nos. 60/502,932, filed Sep. 15, 2003, for High Speed Scanning Interferometer for Surface Profiling and for Focus and Tilt Sensing, 60/502,933, filed Sep. 15, 2003, for Grazing Incidence Interferometer for Profiling Surfaces Which May Have a Thin Film Coating, 60/502,907, filed Sep. 15, 2003, for Triangulation Sensor for Profiling Surfaces Through a Thin Film Coating, 60/502,930, filed Sep. 15, 2003, for Rapid Measurement of Surface Topographies in the Presence of Thin Films, and 60/539,437, filed Jan. 26, 2004, for Surface Profiling Using An Interference Pattern Matching Template, each of which applications in incorporated herein by reference.",
        "The invention relates to interferometric analysis of objects, such as to interferometric determination of an object topography.",
        "Interferometry, e.g., scanning white light interferometry (SWLI), may be used to determine a spatial property of an object. Typical spatial properties include a surface topography or location of the object with respect to some reference. For objects including a thick film overlying an opaque substrate, the SWLI data may include two spaced part interference patterns resulting, respectively, from the substrate-film interface and film-air interface. If the interference patterns are entirely separable, i.e., if there is a region of zero modulation between the two signals, then the data can provide independent information about the substrate surface and film-air interface using standard techniques. As the overlying film becomes thinner, the respective interference patterns begin to overlap and distort one another. Such overlapped interference patterns can provide erroneous spatial information regarding the substrate surface and film-air interface.",
        "One aspect of the invention relates to methods and systems for analyzing low coherence interference signals from objects producing interference patterns that overlap as a function of optical path length difference (OPD). Methods and systems of the invention may be used in, e.g., flat panel display measurements, semiconductor wafer metrology, solder bump processing, in situ thin film measurements, and dissimilar materials analysis.",
        "One exemplary method relates to the rapid determination of a spatial property of a photoresist film over a patterned wafer for in-situ focus and tilt adjustments with respect to a photolithography system. The spatial property can include a topography and/or a position of a top surface of the photoresist with respect to a reference of the photolithography system. In some embodiments, the spatial property is indicative of an absolute or relative position of the photoresist film, e.g., with respect to the photolithography system.",
        "In general, in one aspect, the invention features a method including: (i) obtaining a low coherence interference signal from a measurement object, the measurement object including first and second interfaces, the low coherence interference signal including first and second overlapping interference patterns respectively resulting from the first and second interfaces; and (ii) identifying a subset of the overlapping interference patterns, the subset having a greater contribution from one of the first and second interference patterns than the other interference pattern.",
        "Embodiments of the method may include any of the following features.",
        "The obtaining may include obtaining a plurality of low coherence interference signals, each low coherence interference signal including first and second overlapping interference patterns, each first interference pattern resulting from a different point of the first interface, each second interference pattern resulting from a different point of the second interface, the obtaining a plurality of low coherence interference signals including imaging the object, and the identifying a subset includes identifying a subset of each of the interference signals, each subset having a greater contribution from one of the first and second interference patterns of the corresponding interference signal than the other interference pattern.",
        "For each of the plurality of low coherence interference signals, the obtaining may include using an interferometer, each of the plurality of low coherence signals resulting from light have a range of optical path length differences, each range of optical path length differences being at least 50% of a coherence length of the interferometer. For example, each range may be at least as great as the coherence length of the interferometer.",
        "The first interface may be an outer surface of the object and the method may include determining a relative height of each of a plurality of the points of the outer surface.",
        "The first and second interfaces may be separated by 1000 nm or less.",
        "The first interface may be an outer surface of the object and the second interface is beneath the outer surface. For example, the outer surface may be an outer surface of a layer of photoresist overlying a substrate and the second interface is defined between the outer surface of the photoresist and the substrate.",
        "The first and second interfaces may be interfaces of a liquid crystal display cell.",
        "The method may further include determining a spatial property of each of at least some of the points of the first or second interfaces based on the low coherence interference signals.",
        "Each of the first and second overlapping interference patterns may include a plurality of fringes and the determining a spatial property of each of at least some of the points may include determining the spatial property of each of at least some of the points based on less than one-half of the fringes one of the first or second overlapping interference patterns.",
        "Each of the first and second overlapping interference patterns may include a plurality of fringes and the determining a spatial property of each of at least some of the points may include transforming the one-half of the fringes of each first or second overlapping interference pattern.",
        "The determining a spatial property of each of at least some of the points may include determining the spatial property of each of the at least some points based on an asymmetric subset of the overlapping interference patterns of the corresponding interference signal. For example, the determining a spatial property of each of at least some of the points may include transforming the asymmetric subset. Also, the first interface may be an outer surface of the object and the determining a spatial property of each of at least some of the points may include determining a spatial property of a plurality of points of the outer surface. In such cases, each asymmetric subset may be dominated by interference resulting from the outer surface of the object.",
        "The identifying a subset may include determining a boundary of the asymmetric subset based on a template indicative of an interferometer response. For example, the template may be indicative of an object-height independent interferometer response. The determining a boundary may includes comparing the template and the low coherence interference signal.",
        "The identifying a subset may include cross-correlating a template indicative of an interferometer response and the low coherence interference signal. The cross-correlating may include normalizing based on a shape of the low coherence interference signal.",
        "The determining a spatial property of each of at least some of the points may include determining the spatial property based on the corresponding low coherence interference signal and a template indicative of an interferometer response. The determining a spatial property of each of at least some of the points may further include comparing the corresponding low coherence interference signal and the template. The comparing may include determining a location of best match between the corresponding low coherence interference signal and the template. For example, the comparing may include cross-correlating the template and the overlapping interference patterns. The cross-correlating may include normalizing based on a shape of the corresponding low coherence interference signal.",
        "The template may be asymmetric. For example, template may have a shape of a truncated interference pattern. The method may further include generating the template by obtaining a reference low coherence interference signal from each of a plurality of points of a reference object, wherein the template includes contributions derived from each of the reference low coherence interference signals.",
        "For example, each reference low coherence interference signal may include object-height dependent properties indicative of a height of the corresponding object point, and preparing the template may include removing object-height dependent properties from the reference low coherence interference signals. The reference low coherence interference signals may include a non-overlapping interference pattern.",
        "In another aspect, the invention features an apparatus, including: (i) an optical system configured to obtain a low coherence interference signal from an object, the object having a plurality of interfaces, wherein the low coherence interference signal includes at least first and second overlapping interference patterns resulting from at least first and second interfaces of the object; and (ii) a processor configured to determine a spatial property of at least one of the first and second interfaces based on an asymmetric subset of the first and second overlapping interference patterns.",
        "Embodiments of the apparatus may include any of the following features.",
        "The processor may further configured to determine a portion of the low coherence interference signal including greater contributions from one of the first and second interference patterns as opposed to the other of the interference patterns, and select the subset of data from the portion of the low coherence interference signal.",
        "The first interface may be an outer surface of the object and the first interference pattern results from the first interface, and the processor may be further configured to determine a spatial property of the first interface.",
        "The optical system may be configured to obtain a plurality of low coherence interference signals from the object, each low coherence interference signal including respective first and second overlapping interference patterns resulting from different points of the first and second interfaces, and wherein the processor may be further configured to determine a spatial property of a plurality of points of the first interface based on respective asymmetric subsets of the plurality of low coherence interference signals.",
        "For example, the spatial property of the plurality of points may be a relative height of each of the points.",
        "The processor may be configured to determine a spatial property of the outer surface of the object with respect to another object.",
        "The processor may be configured to determine a position of the outer surface of the object relative to a photolithography apparatus.",
        "The processor may be further configured to carry out any of the steps described above with respect to the first-mentioned method aspect of the invention.",
        "In general, in another aspect, the invention features a processor configured to at least: receive a low coherence interference signal obtained from an object using an interferometer, the object having a plurality of interfaces, wherein the low coherence interference signal includes at least first and second overlapping interference patterns resulting from at least first and second interfaces of the object; and determine a spatial property of at least one of the first and second interfaces based on an asymmetric subset of the first and second overlapping interference patterns. Embodiments of the processor may further include features described above with respect to the first-mentioned method aspect of the invention.",
        "In general, in another aspect, the invention features a method for determining a spatial property of an object, the method including: (i) providing a low coherence interference signal obtained from a first object using an interferometer; and (ii) determining a spatial property of the first object based upon the low coherence interference signal and a template indicative of a response of the interferometer.",
        "Embodiments of the method may include any of the following features",
        "The first object may include an outer surface and the determining may include determining a relative height of a point of the outer surface.",
        "The providing may include providing a plurality of low coherence interference signals each obtained from a corresponding different point of the first object using the interferometer; and the determining may include determining a spatial property of each of the different points based upon the corresponding low coherence interference signal and the template.",
        "The plurality of low coherence interference signals may be each obtained by steps including imaging a portion of the object using the interferometer.",
        "The object may have an outer surface and the spatial property of each of the different points is a height of each point. For example, the object may include a wafer coated with photoresist and the outer surface of the object may be an outer surface of the photoresist.",
        "The template may be asymmetric. For example, the template may have a shape of a truncated interference pattern. The low coherence interference signal may include overlapping interference patterns resulting from first and second interfaces of the object and the determining a spatial property may include determining a spatial property of at least one of the first and second interfaces. The first interface may be an outer surface of the object and the determining may include determining a spatial property of the outer surface. Furthermore, a shape of the template may corresponds to a portion of the low coherence interference signal dominated by contributions from the first interface as opposed to the second interface.",
        "The template may include contributions derived from each of a plurality of second low coherence interference signals. For example, each of the plurality of second low coherence interference signals may result from a respective, different point of a reference object.",
        "Each of the plurality of second low coherence interference signals may include object-height dependent properties indicative of a height of the corresponding reference object point, and wherein the method includes generating the template, and the generating the template may include removing contributions from the object-height dependent properties. For example, each second low coherence interference signal may have a phase-related property indicative of the height of the corresponding reference object point and the removing contributions may include removing the phase-related property. Also, the first object and the reference object may be the same. Alternatively, the first object may include a substrate including an overlying thin film and the plurality of second low coherence interference signals may be obtained from a portion of the reference object having a single reflective interface.",
        "The method may further including comparing the template and the low coherence interference signal.",
        "The comparing may include cross-correlating the template and the low coherence interference signal. For example, the cross-correlation may include a partially complex cross-correlation. The cross-correlating may include normalizing based upon a shape of the low coherence interference signal.",
        "The comparing may include determining a location within the low coherence interference signal and the determining a spatial property may include processing a portion of the low coherence interference signal located to one side of the location. Furthermore, the method may also include transforming the low coherence interference signal. For example, the low coherence interference signal may include first and second overlapping interference patterns and the portion of the low coherence interference signal to the one side of the location may be dominated by contributions from the first interference pattern as opposed to the second interference pattern. For example, the first interference pattern may result from an outer surface of the first object.",
        "In general, in another aspect, the invention features a method for preparing an interferometer template, including: providing a plurality of low coherence interference signals, each low coherence interference signal having been obtained from a corresponding different point of an object using an interferometer; and generating a template indicative of a response of the interferometer, the generating including combining contributions from each of the low coherence interference signals.",
        "Embodiments of the method may include any of the following features.",
        "Each low coherence interference signal may have been obtained from the corresponding different point of the object by imaging a portion of the object using an interferometer.",
        "Each of the different points of the object may have a respective spatial property and each low coherence interference signal may include a spatial dependent property dependent on the spatial property of the corresponding object point and the generating the template may include removing the spatial dependent property of at least some of the low coherence interference signals.",
        "The spatial property may be a relative height.",
        "The removing the spatial dependent property may include: transforming the low coherence interference signals to an inverse dimension, the transformed low coherence interference signals exhibiting a phase change along the inverse dimension; and removing a linear portion of the phase change with respect to the inverse dimension.",
        "The different points of the object may be different points about an interface of the object.",
        "The interface may be an outer surface of the object.",
        "The method may further include: obtaining, with the interferometer, at least one second low coherence interference signal, the second low coherence interference signal resulting from a point of a second object; and determining a spatial property of the point of the second object based on the second low coherence interference signal and the template.",
        "For example, the second object may include a substrate and at least one overlying layer, the point of the second object defined by at least a portion of the overlying layer. The overlying layer may have a surface that defines an outer surface of the object, the point of the second object being located at the outer surface.",
        "The obtaining, with the interferometer, may include obtaining a plurality of second low coherence interference signals, each second low coherence interference signal resulting from a different point of the second object and the determining a spatial property of the point of the second object may include determining a spatial property of the different points of the second object based on the second low coherence interference signals and the template.",
        "The obtaining a plurality of second low coherence interference signals may include imaging a portion of the second object.",
        "The determining may include comparing the second low coherence interference signal and the template. For example, the comparing may include cross-correlating the at least one second low coherence interference signal and the template. Furthermore, the comparing may include normalizing the cross-correlation with respect to a shape of the first low coherence interference signals.",
        "The template may have the form of an asymmetric truncated low coherence interference signal.",
        "In general, in another aspect, the invention features a method for generating an interferometer template, including: providing at least one low coherence interference signal, the low coherence interference signal including an interference pattern resulting from at least one point of an object and having been obtained using an interferometer; and generating, from the at least one low coherence interference signal, an asymmetric template indicative of a response of the interferometer.",
        "Embodiments of the method may include any of the following features.",
        "The asymmetric template may have a shape of a truncated interference pattern.",
        "The at least one point of the object may have a spatial property and the at least one low coherence interference signal may have a spatial dependent property dependent on the spatial property of the at least one point, and wherein the generating may include removing the spatial dependent property from the low coherence interference signal.",
        "In general, in another aspect, the invention features a method, including: providing a low coherence interference signal obtained from an object; and determining a spatial property of the object based on a comparison of the low coherence interference signal and a template, the template having a shape of a truncated interference pattern.",
        "Embodiments of the method may include any of the following embodiments.",
        "The providing may include providing a plurality of low coherence interference signals, each obtained from a corresponding different point of the object; and the determining a spatial property may include determining a spatial property of each of the different points of the object based on a comparison of the corresponding low coherence interference signal and the template.",
        "The method may further include comparing the low coherence interference signal and the template by cross-correlating the low coherence interference signal and the template.",
        "The object may further include a substrate and at least one overlying layer and the spatial property of the object is a spatial property of at least a point of an outer surface of the overlying layer.",
        "The low coherence interference signal may have been obtained by a method including reflecting light from the outer surface of the overlying layer. For example, the overlying layer may be a photoresist.",
        "In general, in another aspect, the invention features an interferometer, including: an optical system configured to obtain a plurality of low coherence interference signals from different points of an object; and a processor including code. The processor configured to prepare a template indicative of a response of the interferometer, the template including contributions from the plurality of low coherence interference signals.",
        "Embodiments of the apparatus may include any of the following features.",
        "The plurality of low coherence interference signals may include properties related to spatial properties of the different points of the object; and the code configured to prepare a template, may include code configured to prepare a template lacking at least some of the properties related to spatial properties of the different points of the object.",
        "The processor including code is further configured to: obtain a second low coherence interference signal from a second object; and determine a spatial property of the second object based on the second low coherence interference signal and the template. For example, the code to determine a spatial property may include code configured to compare the second low coherence interference signal and the template.",
        "The processor may be further configured to carry out any of the corresponding steps described above in connection with the above-described method aspects.",
        "In general, in another aspect, the invention features a processor including computer readable medium, the medium including code configured to cause the processor to: receive a plurality of low coherence interference signals obtained from different points of an object using an interferometer; and generate a template indicative of a response of the interferometer, the template including contributions from the plurality of low coherence interference signals.",
        "In further embodiments, the code may further cause the processor to carry out nay of the corresponding steps described above in connection with the above-described method aspects.",
        "An embodiment of system for obtaining interferometry data includes a low-coherence (spectrally broadband and/or extended source) interferometer, e.g. a scanning white light interferometry (SWLI ) instrument, equipped to mechanically or electro-optically scan at least an element of the system so as to change an optical path difference (OPD) between a reference and measurement path, the measurement path being directed to an object surface. A processor records a plurality of interference signals during the OPD scan, such as by imaging a portion of the object onto a plurality of detector elements. By virtue of the low coherence source and/or geometry of the apparatus, the interference signal is localized about the zero OPD position for each imaged point of the object surface. The system is configured to analyze objects that may have multiple layers, in particular a transparent thin film on a substrate, for which the interference signals from the interfaces between layers are not entirely separated.",
        "A method of the invention includes selecting a portion of the interference signal of detected by each detector element. The selected portion corresponds to a selected interface or surface, e.g., an interface between a substrate and thin film layer. The selected portion of each interference signal is identified as being the relatively undistorted by unwanted interference phenomena resulting from reflections from the other interfaces or surfaces. The selected portion may include or be limited to interference information acquired for OPD positions different from the zero OPD for the interface of interest.",
        "An inventive method for selecting portions of interference signals includes extracting a portion of the interference signal starting at a particular optical path length difference identified e.g. by the signal centroid or some other characteristic of the signal that predictably defines the limits of the substantially uncorrupted portion of the signal of interest. The extracted portion is then sent for further processing as if it were the total signal.",
        "Another inventive method for selecting portions of low coherence interference signals includes comparing measurement interference signals acquired from a measurement object and template generated by prior measurement of a reference surface, by using the measurement interference signals themselves, by theoretical prediction or combination thereof. The template can correspond to a portion of each low coherence interference signal that is substantially undistorted. The method can include finding the location of each measurement low coherence interference signal that best matches the template. This technique can provide the interface height location directly, without further processing. As an improvement to the measurement resolution, the technique may include more than one stored signal, for example a set of templates with various offsets, so as to allow for improved interpolation.",
        "As a step in the data processing, once the location of the interface has been identified according to the location of the selected signal portion with respect to optical path length difference, compensating factors may be included so as to account for refractive and dispersive properties of thin films and how these material parameters relate e.g. to the NA of the objective and spectral bandwidth of the illumination, so as to provide corrected data corresponding to the true physical profile of the interface of interest.",
        "In some embodiments, a spatial property of an outer surface of photoresist is determined based on at least a portion of an interference signal including overlapping interference patterns. A relative position of the photoresist and a photolithography system can be modified based on the spatial property.",
        "In some embodiments, a spatial property of an outer surface of an object is determined from at least a portion of a low coherence interference, e.g., after removing some material from the outer surface. Based on the spatial property, additional material can be removed. For example, a rate of removal can be modified during the additional removal.",
        "In some embodiments, a spatial property of a portion of an object is determined, e.g., after irradiating the portion of the object with a laser beam to form a scribe line. Additional scribing of the object or another object is performed based on the spatial property.",
        "In some embodiments, a plurality of low coherence interference signals is obtained. Each interference signal includes detector intensity as a function of optical path length difference values and can be designated as Isys. The plurality of interference signals are averaged in the frequency domain to determine a single, partial spectrum",
        "q\n      ~\n    \n    sys\n  \n  _\n\n\n\n\ncorresponding to the field average over all the low coherence interference signals in the frequency domain.",
        "The partial spectrum is inverse transformed to provide a template",
        "I\n        ~\n      \n      sys\n    \n    _\n  \n  ,\n\n\n\n\nthe real part of which may represent interference signals similar to each interference signal, but with amplitude scaling and object height dependent differences removed. In some embodiments, the template is retained in a complex form",
        "I\n      ~\n    \n    sys\n  \n  _\n\n\n\n\nsuch that the envelope and phase at each scan position \u03b6 can be separated using the modulus and argument, respectively, of the complex function",
        "I\n        ~\n      \n      sys\n    \n    _\n  \n  .",
        "Unless otherwise defined, all technical and scientific terms used herein have the same meaning as commonly understood by one of ordinary skill in the art to which this invention belongs.",
        "Unless otherwise stated, spatial properties of objects determined by methods and systems discussed herein may be relative or absolute.",
        "Other features, objects, and advantages of the invention will be apparent from the following detailed description.",
        "FIG. 1 is a low-coherence interference signal from a solid silicon substrate without a thin film or other coating. The scan position is the \u03b6 coordinate.",
        "FIG. 2 is a template including contributions from interference signals obtained from each of a plurality of different locations of the silicon substrate referring to in the description of FIG. 1. The template of FIG. 2 has been multiplied by a window function, which is also shown.",
        "FIG. 3 illustrates overlapping interference patterns obtained from an object having a substrate and an overlying thin film.",
        "FIG. 4 is an asymmetric template.",
        "FIG. 5 is a low-coherence interference signal from a (silicon) substrate with a 2-\u03bcm coating of Si3N4.",
        "FIG. 6 is a low-coherence interference signal from a (silicon) substrate with a 1.1-\u03bcm coating of Si3N4.",
        "FIG. 7 is an expanded view of a direct comparison of the plot in FIG. 3 (diamonds) and the plot in FIG. 6 (solid line).",
        "FIG. 8 is a flowchart illustrating a method for preparing a template.",
        "FIG. 9 is an exemplary interferometry system for obtaining interference signals.",
        "FIG. 10a is a cross-section of a measurement object including a substrate and an overlying layer, e.g., a thin film.",
        "FIG. 10b is a top view of the object of FIG. 1a.",
        "FIGS. 11a and 11b are exemplary structures having copper interconnects. FIGS. 11a and 11b show the structure before and after planarization, respectively.",
        "FIGS. 12a and 12b are exemplary structures formed during solder bump processing. FIG. 12a shows the structure before addition of solder. FIG. 12b shows the structure after addition of solder but prior to flowing the solder.",
        "FIG. 13 is a portion of an exemplary liquid crystal display.",
        "FIG. 14a illustrates a positive-frequency portion of the magnitude spectrum of the Fourier transform of the interference signal of FIG. 2.",
        "FIG. 14b is a template in the transformed domain including a positive-frequency portion of a field-averaged spectrum",
        "q\n        ~\n      \n      sys\n    \n    _\n  \n  .\n\n\n\n\nThe template includes contributions from a plurality of interference signals from different points of an object.",
        "FIG. 15 illustrates a template determined from a plurality of interference signals and also illustrates the envelope under which fringes of the template decay. The template is identical to the template of FIG. 3 except for not having been subjected to a window function.",
        "FIG. 16 illustrates the product of the amplitude of the fringes and envelope of the interference signal of FIG. 2.",
        "FIG. 17 illustrates a merit function determined from the windowed template of FIG. 3 and the interference signal of FIG. 2.",
        "FIG. 18 illustrates height profiles of the object used to acquire the interference signal of FIG. 2.",
        "FIG. 19 illustrates one of a second set of 101 simulated reference interference signals Iex acquired from the silicon substrate used to acquire the signal of FIG. 2. The scan position is the \u03b6 coordinate.",
        "FIG. 20a illustrates a positive-frequency portion of the magnitude spectrum of the Fourier transform of the interference signal of FIG. 19.",
        "FIG. 20b illustrates template transformed interferometry data and is a positive-frequency portion of a field-averaged spectrum",
        "q\n      ~\n    \n    sys\n  \n  _\n\n\n\n\nincluding contributions from a plurality of interference signals according to FIG. 19.",
        "FIG. 21 is an asymmetric template determined from the product of a template derived from the data of FIG. 19 and an asymmetric windowing function. Only the right-hand portion of the template derived from the data of FIG. 19 has been retained.",
        "FIG. 22 illustrates one of 101 simulated interference signals Iex acquired from a silicon substrate having a thin film. Other than the presence of the thin film, the silicon substrate is the same as that used to acquire the data of FIG. 19. The scan position is the \u03b6 coordinate.",
        "FIG. 23 illustrates the product of the amplitudes of the fringes and envelopes of the interference signal of FIG. 22.",
        "FIG. 24 illustrates a merit function determined from the asymmetric template of FIG. 21 and the data of FIG. 22.",
        "FIG. 25 illustrates height profiles of the substrate-film interface of the silicon substrate used to acquire the data of FIG. 22 as determined using the template of FIG. 21 and the data of FIG. 22.",
        "Referring to FIG. 1, a simulated low coherence interference signal 150 includes a plurality of detector intensity values obtained from a single point of an object, e.g., a point of a silicon wafer having a single reflective interface. The intensity values are plotted as a function of an optical path length difference (OPD) between light reflected from the object point and light reflected from a reference object. Interference signal 150 is a low coherence scanning white light interferometry (SWLI) signal obtained by scanning the OPD, e.g., by moving an optic and/or the object to vary the optical path traveled by the light reflecting from the object or the reference light. A Mirau interferometer is an example of an interferometer that can be configured as a low coherence scanning white light interferometer. An interferometer may, alternatively or in combination, vary the OPD by detecting a spatial distribution of light reflected from the object and the reference light with the OPD varying as a function of spatial position on a detector.",
        "In FIG. 1, the intensity values are plotted as a function of OPD (here scan position) and map out an interference pattern 151 having a plurality of fringes 152, which decay on either side of a maximum according to a low coherence envelope 154. In the absence of a low coherence envelope, the fringes of an interference pattern typically have similar amplitudes over a wide range of optical path differences. The envelope 154 itself does not expressly appear in such interference signals but is shown for discussion. The location of the interference pattern along the OPD axis is generally related to a position of zero OPD, e.g., a scan position or spatial position corresponding to zero OPD between light reflected from the object point and from a reference object. The zero OPD scan position is a function of the object topography, which describes the relative height of each object point, and the orientation and position of the object itself, which influences the position of each object point with respect to the interferometer. The interference signal also includes instrumental contributions related to, e.g., the interferometer optics, e.g., the numerical aperture (NA) of the optics, the data acquisition rate, the scan speed, the wavelengths of light used to acquire the interference signal, the detector sensitivity as a function of wavelength, and other instrumental properties.",
        "The width of the coherence envelope 154 that modulates the amplitudes of fringes 152 corresponds generally to the coherence length of the detected light. Among the factors that determine the coherence length are temporal coherence phenomena related to, e.g., the spectral bandwidth of the source, and spatial coherence phenomena related to, e.g., the range of angles of incidence of light illuminating the object. Typically, the coherence length decreases as: (a) the spectral bandwidth of the source increases and/or (b) the range of angles of incidence increases. Depending upon the configuration of an interferometer used to acquire the data, one or the other of these coherence phenomena may dominate or they may both contribute substantially to the overall coherence length. The coherence length of an interferometer can be determined by obtaining an interference signal from an object having a single reflecting surface, e.g., not a thin film structure. The coherence length corresponds to the full width half maximum of the envelope modulating the observed interference pattern.",
        "As can be seen from FIG. 1, interference signal 150 results from detecting light having a range of optical path differences that varies by more than the width of the coherence envelope and, therefore, by more than the coherence length of the detected light. In general, a low coherence interference signal can result from obtaining interference fringes that are amplitude modulated by the coherence envelope of the detected light. For example, the interference pattern may be obtained over an OPD for which the amplitude of the observed interference fringes differs by at least 20%, at least 30% or at least 50% relative to one another. For example, fringe 98 has a peak amplitude that is about 50% less than a peak amplitude of a fringe 99.",
        "A low coherence interferometer can be configured to detect an interference signal is detected over a range of OPD's that is comparable to or greater than the coherence length of the interferometer. For example, the range of detected OPD's may be at least 2 times greater or at least 3 times greater than the coherence length. In some embodiments, the coherence length of the detected light is on the order of the height variations of features of the object, e.g., on the order of a couple of microns or less but more than a nominal wavelength of the detected light.",
        "In general, instrument related contributions to the interference signal, e.g., to the shape and phase of the interference patterns, tend to vary slowly with the topography and position of the object. On the other hand, interference patterns shift along the scan position axis for interference signals obtained from object points having different spatial properties, e.g., different relative heights or different relative positions with respect to the interferometer. Accordingly, interference patterns obtained from different object points may have similar shapes but are shifted along the scan position axis by an amount related to the spatial properties of each point.",
        "With reference to FIG. 2, a template 215 has reduced or eliminated contributions related to spatial properties of the object and object points, e.g., object topography (which describes the relative heights of different points), object position, and object orientation contributions. Template 215 is representative of the response of an interferometer to an object and can include instrumental contributions representative of those appearing in low coherence interference signals obtained using the interferometer. As discussed above, such instrument contributions are similar or the same for interference signals obtained from different objection points. Hence, template 215 can include contributions from interference signals obtained from different object points. The different points may be arranged about an entire surface to be analyzed or about one or more subsets of an area to be analyzed.",
        "Interference signals from different object points are processed to combine, e.g., average, information from a plurality of interference signals to prepare the template. The resulting template can have a significantly higher signal-to-noise level (S/N) than individual interference signals. In some embodiments, template 215 includes contributions from a plurality of interference signals and has a S/N that is at least 10, at least 33, or at least 100 times greater than the individual interference signals. Applicants have found that interference signals can be processed based on such a template to determine one or more spatial properties of an object.",
        "Referring to FIG. 3, an interference signal 190 is acquired from an object 191, which includes a substrate 192 and an overlying layer, e.g., a thin film 193. The substrate and film define an interface 194 therebetween. An outer surface of the film 195 defines an interface between the object and its surroundings, e.g., the air, other gas, or vacuum. Interfaces are generally defined by a change in refractive index between portions of an object.",
        "Interference signal 190 includes a first interference pattern 196 resulting from interface 194 and a second interference pattern 197 resulting from interface 195. First and second interference patterns 196,197 are overlapping. For example, maxima of the interference patterns 196,197 are separated by an OPD less than the coherence length of the interferometer and patterns 196,197 are not separated by a region of zero intensity. Existing methods for determining spatial properties of an object with interfaces that produce overlapping interference patterns can yield erroneous results because the overlapping interference patterns distort one another. Applicants have found that spatial properties of an object with such interfaces can be determined based upon a portion over the overlapping interference patterns. For example, a spatial property of interface 195, e.g., a topography of the outer surface of object 191, can be determined based upon a subset 200 of interference signal 190. Subset 200 is dominated by contributions from interference pattern 197 (from interface 195) as opposed to contributions from interference pattern 196 (from interface 194). A spatial property of interface 194 can be determined based upon a subset similar to subset 200 but located toward the left of the overlapping patterns.",
        "Referring to FIG. 4, a template 180 is asymmetric, having a shape of a truncated interference pattern, A spatial property of an object having one or more interfaces, e.g., a spatial property of interface 195 of object 190, can be determined based on an asymmetric template 180. In some embodiments, an interference signal can be processed with an asymmetric template to determine a boundary of a subset of the interference signal that can be processed to determine a spatial property of an interface. For example, interference signal 200 (FIG. 3) can be processed with template 180 (FIG. 4) to determine a boundary 201 of subset 200 with interference signal 190 (FIG. 3). The boundary is typically a position along the x-axis of the interference signal, e.g., a scan position. The subset can be selected based on the boundary. The subset can be subjected to further processing to determine a spatial property of a particular interface. In some embodiments, an interference signal can be processed with an asymmetric template to determine a spatial property of an interface of an object without further processing.",
        "Low coherence interference signals resulting from objects without thin films and from objects without thin films are now discussed in greater detail.",
        "Referring back to FIG. 1, low coherence interference signal 150 simulates data acquired using a light source having a Gaussian distribution in wave numbers with a 100 nm bandwidth in wavelength centered about an average of 640-nm, an objective numerical aperture (NA) of 0.3, and a measurement object made of solid silicon nitride (Si3N4, index=2.019), which material is partially transparent at 640 nm.",
        "Referring now to FIG. 5, a low coherence interference signal 156 simulates data acquired from a measurement object having a silicon (Si, index=3.725-0.029 i) substrate coated with 2 \u03bcM of Si3N4. For clarity, interference signal 156 is simulated without noise. Signal 156 includes a first interference pattern 157 and a second interference pattern 159. First and second interference patterns 157,159 respectively include peaks 165,167 and fringes 162,164, which decay in accordance with respective envelopes 158,160. The peaks of the interference patterns are spaced apart along the scan position axis. Interference patterns 157,159 respectively correspond to interference resulting from reflections from the substrate-film interface and the film-air interface of the measurement object. Interference patterns 157,159 do not overlap, e.g., the patterns are spaced apart by a region 169 of essentially zero modulation intensity. Accordingly, interference signals 157,159 can be processed independently of one another to determine spatial properties of the object interfaces.",
        "Referring to FIG. 6, a low coherence interference signal 170 simulates data acquired from an object having a silicon (Si, index=3.725-0.029i) substrate coated with a 1.1 \u03bcm thick Si3N4 thin film. The interference signal includes a first interference pattern 172 (resulting from the interface at the silicon substrate) and a second interference pattern 174 (resulting from the outer surface of the Si3N4 layer) each pattern including a plurality of fringes, which decay in accordance with respective envelopes 181,183. Because of the reduced film thickness (as compared to FIG. 5), the interference patterns 172,174 overlap creating a total interference pattern. Conventional data processing would be unable to distinguish between the combined interference effects and would provide an erroneous interface spatial property, e.g., an incorrect film height, topography, or position.",
        "Referring to FIG. 7, a portion of the interference signal 150 from FIG. 1 is plotted with a portion of interference signal 170 of FIG. 6 including interference patterns 172 and 174. (Here, for clarity, the interference pattern of interference signal 150 is shown as discrete points rather than as points connected to form a line as in FIG. 1. Each point represents a detector intensity observed at a particular scan position.) Although the presence of the 1.1 \u03bcm film alters interference signal 170 as compared to interference signal 150, portions of interference pattern 174 (film-air interface) and interference pattern 151 (resulting from a substrate-air interface) are nearly identical.",
        "In some embodiments discussed herein, a spatial property of a selected portion of an object including a substrate having one or more layers, e.g., thin films, is determined based on a subset of an interference signal. Although interference signals obtained from such objects may include overlapped interference patterns, the signals can include a subset that is relatively undistorted by the overlap. A relatively undistorted subset of an interference signal can be used to determine spatial properties of the measurement object. Typically, each subset includes at least a portion of an interference pattern dominated by interference resulting from the selected portion of the measurement object. For example, referring to FIG. 6, a subset 180\u2032 of interference signal 170 includes fringes dominated by contributions from interference resulting from the 1.1 \u03bcm thick Si3N4 thin film-air interface, as opposed to interference resulting from the underlying silicon-film interface, which appears at the left side of the interference signal. Subset 180\u2032 is asymmetric with respect to scan position. Properties of subset 180\u2032, including, e.g., the interference phase, correspond to the Si3N4 thin film-air interface with little or no influence from the underlying silicon-film interface.",
        "A spatial property of the 1.1 \u03bcm thick Si3N4 thin film, e.g., a relative height of one or more points at its surface, can be determined based on subset 180\u2032. In some embodiments, the determination gives little or no weight to portions of interference signal 170 outside subset 180\u2032. For example, other portions of the interference signal can be suppressed, e.g., set to zero. Subset 180\u2032 can be analyzed to determine a spatial property of a portion of the film-air interface of the measurement object.",
        "In some embodiments, subset 180\u2032 is asymmetric and contains 75% or less, 65% or less, or 50% or less of the area under the envelope that modulates the intensity of the interference pattern fringes. For example, subset 180\u2032 includes only about 50% of the area beneath envelope 183.",
        "In some embodiments, at least 30%, at least 40%, at least 50%, or at least 75% of the subset is located to one side of a centroid of an interference pattern that would be observed in the absence of a second closely spaced interface or surface. For example, essentially all of subset 180\u2032 is located to the right of the centroid of interference pattern 151, which is observed in the absence of the film that results in the overlapping interference pattern 172 in FIG. 6.",
        "In some embodiments, subset 180\u2032 includes fewer than all of the fringes of the interference signal. For example, referring to FIG. 6, interference signal 170 includes 16 fringes having an intensity at least as great as threshold intensity 189. Because the interference patterns of FIG. 4 are overlapped (unlike those of FIG. 3) the fringes of both interference patterns 172,174 contribute to the total. Subset 180\u2032 may include 50% or fewer of the fringes, 35% or fewer, 25% or fewer, 20% or fewer, or 15% or fewer of the fringes. The threshold intensity may be at least 2.5%, at least 5%, at least 10%, or at least 20% of a maximum fringe intensity. The threshold intensity may be 30% or less, e.g., 25% or less, 20% or less, or 15% or less of the maximum fringe intensity.",
        "In some embodiments, a width of subset 180\u2032 is determined from an interference pattern adjacent to an interference pattern corresponding to a surface or interface to be analyzed. For example, interference pattern 172 results from the substrate-film interface (silicon-Si3N4) and interference pattern 174 results from the adjacent, overlying Si3N4-air interface. A dimension, e.g., a width \u0394, of the adjacent interference pattern 172 can be determined from a peak 191 and a scan position, e.g., scan position 193, at which the amplitude of the adjacent interference pattern has decreased to a selected value, e.g., 25% of the peak, 15% or the peak, 10% of the peak, 5% of the peak, or 2% of the peak. The location of subset 180\u2032 is determined by excluding data of the interference signal that is located within \u0394 of peak 191, as by excluding data to the left of scan position 197.",
        "Alternatively or additionally, a different subset of interference signal 170 (e.g., a subset derived from a portion of interference signal 170 located to the left in FIG. 6) could be subjected to analysis to determine a spatial property of the substrate-film interface of the measurement object.",
        "In some embodiments, a subset of the interference pattern is subjected to FDA to determine a spatial property of the measurement object. In FDA embodiments, the subset can be transformed to an inverse dimension, e.g., by Fourier transformation. Typically, the analysis includes determining a rate of change of frequency domain phase with respect to frequency of the transformed signal. FDA techniques generally are discussed in U.S. Pat. No. 5,398,113 entitled \u201cMETHOD AND APPARATUS FOR SURFACE TOPOGRAPHY MEASUREMENTS BY SPATIAL-FREQUENCY ANALYSIS OF INTERFERENCE SIGNALS,\u201d the contents of which are incorporated herein by reference.)",
        "In some embodiments, a subset of the interference pattern is analyzed directly in the optical path length difference domain, e.g., in the scan domain without transformation of the signal. Spatial information can be determined based on, e.g., the position of a portion of the subset, the spacing of fringes within the subset, or the phase of fringes of the subset relative to the fringes of a second interference signal.",
        "In some embodiments, at least one template, as determined from theory, experiment, or combination thereof, is used to determine a position or boundary of subset 180\u2032 with respect to an interference signal and/or a spatial property of a portion of a selected portion of a measurement object, e.g., a topography or position of a substrate-film or film-air interface. The template may be symmetrical or may be asymmetric as is template 180. The template can provide a filter template for matching to a corresponding portion of a measurement interference signal that may include unwanted signals from more than one surface or interface. In the template approach, a matching or data correlation algorithm can be used to locate, with respect to scan position, a portion of the measurement interferometry data that corresponds to the interference resulting from the selected portion of the measurement object. The location with respect to scan position of the corresponding portion of the interferometry data is indicative of the spatial property of the selected portion of the measurement object. The template data may be derived from one or more reference objects, one or more measurement objects, or combination thereof.",
        "In some embodiments, an interference signal is processed based on a template to determine a region of interest within the interference signal. For example, a template and an interference signal can be cross-correlated to determine a scan position that corresponds to a region of interest of the interference signal. The portion of the interference signal to one side of the boundary can be subjected to further processing, e.g. by frequency domain analysis (FDA) or in the optical path length dimension as discussed above.",
        "In some embodiments, an interference signal is processed based on a template to determine a scan position that corresponds to a particular interface, such as the interface between a substrate-thin film or the interface between a thin film and the environment surrounding the object, e.g., a thin film-air interface. A photoresist-coated wafer is an example of an object with such interfaces. Once the region of interest has been identified, a portion of the interference signal can be subjected to further analysis, e.g., FDA or phase shifting to determine an object or object point spatial property, e.g., an object topography, position, or orientation. In some embodiments, the analyzed portion of the data is asymmetric and includes only a portion of the interference pattern resulting from a particular interface. The spatial property can be determined accurately even in the presence of nearby interfaces, e.g., interfaces separated by 1000 nm or less, 800 nm, or less, 600 nm or less, 500 nm, or less, e.g., 400 nm or less. In some embodiments, one or more spatial properties is determined accurately even in the presence of interfaces separated by 200 nm or more. For example, the height and position of one or more points of a thin film-air interface can be determined accurately even in the presence of the underlying substrate-film interface. In some embodiments, the distance between the two interfaces is on the order of the coherence length of the interferometer used to obtain the data, e.g., on the order of a few microns or less.",
        "In some embodiments, an interference pattern is processed using the template to determine an object spatial property. For example, cross-correlation between the template and an interference signal can be used to determine the height or position of the object and/or one or more points thereof.",
        "In some embodiments, the template is derived from a first object, e.g., a reference object without a thin film. One or more interference signals obtained from a second object, e.g., a measurement object with substrate-film and film-air interfaces, are processed based on the template. In some embodiments, a template derived from an object is used to process the interference signals derived from the same object.",
        "In some embodiments, the spatial property is related to a topography of the measurement object, e.g., a height, position, or thickness of a layer covering a substrate. The spatial property may be related to a position and/or orientation of a portion of the measurement object, such as a position of a portion of the measurement object relative to another object, e.g., a position of a surface of a layer covering a substrate with respect to a reference portion of a photolithography tool.",
        "Obtaining Interference signals From An Object",
        "Referring to FIG. 9, an exemplary measurement system 50 for obtaining interference signals includes an interferometer 51 and automated computer control system 52. The measurement system 50 is operable to determine one or more spatial properties of a measurement object 53. In some embodiments, the one or more spatial properties relate to a topography and/or a location of the object 53 with respect to another object, e.g., a portion of system 50. In some embodiments, the other object is a reference portion of a photolithography system. In any event, system 50 is operable to determine one or more spatial properties of objects including one or more at least partially covering layers, e.g., a substrate contacted with a layer of photoresist or solder.",
        "A source 54, which may be a spectrally-broadband source, such as a white-light lamp, or include a plurality of different wavelengths, e.g., resulting from a plurality of light emitting diodes, illuminates a diffusing screen 55. As an alternative or in combination with a broadband source, the source 54 can include a narrow band or quasi-monochromatic source, typically having a high numerical aperture. A low coherence interference signal can be obtained using a monochromatic source in combination with a high numerical aperture, e.g., the coherence length may be on the order of a few microns or less.",
        "Lens 56 transmits a collimated beam to a beam-splitting element 57 that transmits a first portion of the beam to a lens 62 and reference object 58. In some embodiments, reference object 58 is optically flat and includes only a single reflecting surface. For example, reference object 58 can be a reference mirror. In some embodiments, reference object 58 exhibits a three-dimensional surface topography and/or includes more than one spaced-apart layer that reflects light. In the following discussion, it is assumed without limitation that reference object 58 is a reference mirror including a single reflective surface.",
        "Beam-splitting element 57 directs a second portion of the beam to a lens 60, which focuses the beam onto measurement object 53. Beam-splitting element 57 combines light reflected from reference mirror 58 and from measurement object 53. The combined light is directed to a lens 61, which focuses the combined light to a detector 59. Light reflected from measurement object 53 and from mirror 58 interfere at detector 59, which produces detector signals indicative of the resultant beam intensity.",
        "Detector 59 typically includes a plurality of detector elements, e.g., pixels, arranged in at least one and more generally two dimensions. In the following discussion, it is assumed without limitation that detector 59 includes a two-dimensional array of detector elements, such as a CCD includes a plurality of pixels. In the embodiment shown, lens 60 and lens 61 focus light reflected from measurement object 53 onto detector 59 so that each detector element of detector 59 corresponds to a respective point, e.g., a small region or location of measurement object 53. Additionally, lens 62 cooperates with lens 61 to image the reference object 58 onto detector 59. Thus, an interference pattern can be observed at detector 59, even for extended (i.e. spatially incoherent) illumination.",
        "As discussed above, measurement object 53 can include more than one reflective surface such as a substrate including one or more at least partially optically transmissive layers. A first reflective surface is defined by the interface between the outermost optically transmissive layer and the surrounding atmosphere (or vacuum). Additional reflective surfaces are defined by each interface between layers or between layers and the substrate. In such embodiments, the light reflected from the measurement object 53 can include a contribution, e.g., a separate beam, reflected from each reflective surface or interface. Because each reflective surface or interface is generally spaced apart along the axis of beam propagation, each separate beam generates a different interference pattern when combined with light reflected from the measurement object 53. The interference pattern observed by detector 59 includes the sum of the interference patterns generated by each separate beam reflected from the measurement object.",
        "System 50 is typically configured to create an optical path length difference (OPD) between light directed to and reflected from reference object 58 and light directed to and reflected from measurement object 53. In some embodiments, measurement object 53 can be displaced or actuated by an electromechanical transducer 63, such as a piezoelectric transducer (PZT), and associated drive electronics 64 controlled by computer 52 so as to effect precise scans along a direction that varies the OPD of the interferometer 51. In some embodiments, system 50 is configured to modify the OPD by moving reference object 58. In some embodiments, system 50 is configured to modify the OPD by an amount at least as great as height variations in a topography of the object. In some embodiments, the optical path length is varied by a distance at least as great as a coherence length of the interferometer, e.g., on the order of a few microns.",
        "System 50 can acquire a plurality of detector signals as the OPD is modified, such by scanning a position of measurement object 53. The detector signals thus acquired can be stored in digital format as an array of interference signals, one interference signal acquired from each pixel of detector 59, each interference signal representing the variation in intensity as a function of OPD for a different location of the measurement object 53. For example, if the detector 59 includes a 128\u00d7128 array of pixels and if 64 images are stored during a scan, then there will be approximately 16,000 interference signals each 64 data points in length. In embodiments using a broadband source 54, the interference signals may be referred to as scanning white light interferometry (SWLI) interference signals, more generally as low coherence length scanning interference signals.",
        "After the data has been acquired, the computer 52 can process 67 the interference signal in accordance with, e.g., methods 100 and 110, and output data indicative of a surface topography of the measurement object Various aspects of methods 100,110 and data processing 67 are discussed next.",
        "Preparing An Interferometry Template",
        "Referring to FIG. 8, a method 110 for obtaining a template includes obtaining 112 a plurality of typically low coherence reference interference signals, e.g., by imaging a plurality of different points of an object. The reference interference signals can be generated theoretically, determined from reference interference signals obtained using a reference object in place of the measurement object, determined from measurement interference signals obtained using the measurement object itself, or by a combination of such techniques. In any event, the plurality of reference interference signals can be transformed 114 to a transformed dimension to prepare a plurality of transformed interference signals, e.g., by Fourier transformation. In step 116, one or more representative transformed interference signals including contributions from more than one of the transformed interferometry sets are prepared. In step 118, a transformed template is prepared. The transformed template can limit or exclude contributions from the topography and position of the object while retaining contributions from the interferometer. The transformed template can include contributions derived from a plurality of the reference interference signals. In some embodiments, the transformed template interferometry data is derived from an average of the transformed interference signals. In step 120, the transformed template is inverse transformed 120 to prepare a template, which can be asymmetrical.",
        "Method 110 for obtaining a template is described without limitation in the context of preparing a template from reference interference signals obtained 112 from a reference object in place of the measurement object. Method 110, however, may include preparing the template from measurement interference signals acquired from a measurement object itself. The reference object typically includes a single reflective surface, e.g., the object can be free of a transparent coating or film. In some embodiments, the reference object produces SWLI interference signals having weak non-linearities, e.g., a silicon carbide flat. The reference object may have a three-dimensional topography so that the reference object height hsys varies at different object points. The object is imaged using an interferometry system with a two-dimensional detector having a plurality of pixels x, e.g., detector 59 of system 50, so that light detected from different object points is detected by different detector pixels. Intensity values are obtained at different scan positions \u03b6, each position corresponding to a different OPD to obtain a plurality of interference signals, typically one for each detector pixel. The discussion begins with an exemplary description of SWLI data obtained using such a configuration. It should be understood however, that the discussion is applicable to any low coherence interference signals whether obtained by, e.g., scanning to vary the optical path length between measurement and reference light or by spatially detecting measurement and reference light over a plurality of optical path length differences. The variation in OPD is generally sufficient to modulate the amplitude of the observed fringes.",
        "Low coherence interference signals can, in some cases, be described via a pure sinusoidal carrier modulated by an envelope. The modulated sinusoidal carrier description can apply in cases including e.g. a symmetric source spectrum, non-dispersive optics and a solid surface object. In general, however, these conditions are not met for real interferometry systems. Accordingly, the following discussion is generalized to include an additional, nonlinear OPD-dependent phase term that absorbs the deviations from a pure sinusoidal carrier. Of course, method 110 can be implemented in terms of other descriptions of low coherence interference signals, e.g., the aforementioned sinusoidal carrier model.",
        "A low coherence interference signal, e.g., a reference interference signal Isys, (\u03b6, x), detected by a single detector pixel x, varies as a function of scan position \u03b6, according to:\n\nIsys(\u03b6,x)=DCsys(x)+. . .\n\n. . . ACsys(x)msys[\u03b6\u2212hsys(x)]cos{\u2212[\u03b6\u2212hsys(x)]K0+\u03a6sys[\u03b6\u2212hsys(x)]}\n\nwhere DCsys is a constant background, ACsys is the amplitude of an interference signal oscillating at a nominal angular frequency K0 and modulated by an envelope msys and phase \u03a6sys, and hsys(x) is the height of the object point imaged at pixel x. The signal envelope msys is related to properties of the light source, the range of wavelengths detected by the detector, and the numerical aperture of the optical system. As discussed above, both the envelope msys and the phase \u03a6sys generally vary slowly with scan position. Interference patterns obtained from object locations having different relative positions, e.g., heights, tend to have similarly shaped envelope functions and frequency contents but are shifted along the scan position axis by an amount related to the surface height. The following discussion illustrates the determination of a template, which includes limited or no contributions from the object spatial properties but retains instrumental contributions.",
        "In some embodiments, determining the template includes transforming 114 the reference interference signals to a different dimension, e.g., by the Fourier transformation of each reference interference signal to obtain a respective transformed interference signal qsys(K,x), where K is the unit of the transformed dimension, e.g., wavenumbers, inverse scan position, or data acquisition frequency.",
        "Fourier transformation of an interference signal can be performed according to:",
        "q\n              sys\n            \n            \u2061\n            \n              (\n              \n                K\n                ,\n                x\n              \n              )\n            \n          \n          =\n          \n            FT\n            \u2062\n            \n              {\n              \n                \n                  I\n                  sys\n                \n                \u2061\n                \n                  (\n                  \n                    \u03b6\n                    ,\n                    x\n                  \n                  )\n                \n              \n              }\n            \n          \n        \n        \u2062\n        \n          \n\n        \n        \u2062\n        where\n      \n    \n    \n      \n        (\n        1\n        )\n      \n    \n  \n  \n    \n      \n        \n          FT\n          \u2062\n          \n            {\n            \n              I\n              \u2061\n              \n                (\n                \u03b6\n                )\n              \n            \n            }\n          \n        \n        =\n        \n          \n            1\n            N\n          \n          \u2062\n          \n            \n              \u222b\n              \n                -\n                \u221e\n              \n              \u221e\n            \n            \u2062\n            \n              \n                I\n                \u2061\n                \n                  (\n                  \n                    \u03b6\n                    ^\n                  \n                  )\n                \n              \n              \u2062\n              \n                exp\n                \u2061\n                \n                  (\n                  \n                    \u2148\n                    \u2062\n                    \n                      \n                    \n                    \u2062\n                    K\n                    \u2062\n                    \n                      \n                    \n                    \u2062\n                    \n                      \u03b6\n                      ^\n                    \n                  \n                  )\n                \n              \n              \u2062\n              \n                \u2146\n                \n                  \u03b6\n                  ^\n                \n              \n            \n          \n        \n      \n    \n    \n      \n        (\n        2\n        )\n      \n    \n  \n\n\n\n\nand where the normalization integral is",
        "N\n        =\n        \n          \n            \n              \u222b\n              \n                -\n                \u221e\n              \n            \n            \u221e\n          \n          \u2062\n          \n            \n              \u2146\n              \n                \u03b6\n                ^\n              \n            \n            .\n          \n        \n      \n    \n    \n      \n        (\n        3\n        )",
        "Here, the \u201c^\u201d is used to indicate that {circumflex over (\u03b6)} is a free variable of integration in Eqs.(2) and (3). Upon Fourier transformation of the reference interference signals and application of the Fourier shift theorem, the transformed interference signal for each pixel x can be expressed as:",
        "q\n                    sys\n                  \n                  \u2061\n                  \n                    (\n                    \n                      K\n                      ,\n                      x\n                    \n                    )\n                  \n                \n                =\n                \n                  \n                    \n                      \u03b4\n                      \u2061\n                      \n                        (\n                        K\n                        )\n                      \n                    \n                    \u2062\n                    \n                      \n                        DC\n                        sys\n                      \n                      \u2061\n                      \n                        (\n                        x\n                        )\n                      \n                    \n                  \n                  +\n                  \n                    \n                      1\n                      2\n                    \n                    \u2062\n                    \n                      \n                        AC\n                        sys\n                      \n                      \u2061\n                      \n                        (\n                        x\n                        )\n                      \n                    \n                  \n                \n              \n            \n          \n          \n            \n              \n                [\n                \n                  \n                    \n                      G\n                      sys\n                      *\n                    \n                    \u2061\n                    \n                      (\n                      \n                        \n                          \n                            -\n                            K\n                          \n                          -\n                          \n                            K\n                            0\n                          \n                        \n                        ,\n                        x\n                      \n                      )\n                    \n                  \n                  =\n                  \n                    \n                      G\n                      sys\n                    \n                    \u2061\n                    \n                      (\n                      \n                        \n                          K\n                          -\n                          \n                            K\n                            0\n                          \n                        \n                        ,\n                        x\n                      \n                      )\n                    \n                  \n                \n                ]\n              \n            \n          \n        \n        \u2062\n        \n          \n\n        \n        \u2062\n        where\n      \n    \n    \n      \n        (\n        4\n        )\n      \n    \n  \n  \n    \n      \n        \n          \n            G\n            sys\n          \n          \u2061\n          \n            (\n            \n              k\n              ,\n              x\n            \n            )\n          \n        \n        =\n        \n          \n            exp\n            \u2061\n            \n              [\n              \n                \u2148\n                \u2062\n                \n                  \n                \n                \u2062\n                \n                  \n                    Kh\n                    sys\n                  \n                  \u2061\n                  \n                    (\n                    x\n                    )\n                  \n                \n              \n              ]\n            \n          \n          \u2062\n          FT\n          \u2062\n          \n            {\n            \n              \n                \n                  m\n                  sys\n                \n                \u2061\n                \n                  (\n                  \u03b6\n                  )\n                \n              \n              \u2062\n              \n                exp\n                [\n                \n                  \u2148\n                  \u2062\n                  \n                    \n                  \n                  \u2062\n                  \n                    \n                      \u03c6\n                      sys\n                    \n                    \u2061\n                    \n                      (\n                      \u03b6\n                      )\n                    \n                  \n                \n                }\n              \n              \u2062\n              \n                \n\n              \n              \u2062\n              and\n            \n          \n        \n      \n    \n    \n      \n        (\n        5\n        )\n      \n    \n  \n  \n    \n      \n        \n          \n            G\n            sys\n            *\n          \n          \u2061\n          \n            (\n            \n              \n                -\n                K\n              \n              ,\n              x\n            \n            )\n          \n        \n        =\n        \n          \n            exp\n            \u2061\n            \n              [\n              \n                \u2148\n                \u2062\n                \n                  \n                \n                \u2062\n                \n                  \n                    Kh\n                    sys\n                  \n                  \u2061\n                  \n                    (\n                    x\n                    )\n                  \n                \n              \n              ]\n            \n          \n          \u2062\n          FT\n          \u2062\n          \n            \n              {\n              \n                \n                  \n                    m\n                    sys\n                  \n                  \u2061\n                  \n                    (\n                    \u03b6\n                    )\n                  \n                \n                \u2062\n                \n                  exp\n                  \u2061\n                  \n                    [\n                    \n                      -\n                      \n                        \n                          \u2148\u03c6\n                          sys\n                        \n                        \u2061\n                        \n                          (\n                          \u03b6\n                          )\n                        \n                      \n                    \n                    ]\n                  \n                \n              \n              }\n            \n            .\n          \n        \n      \n    \n    \n      \n        (\n        6\n        )",
        "The K<0 frequency components of the transformed interference signals are the complex conjugates of the positive-frequency components of the spectrum, with K inverted.",
        "The transformed interference signals may be subjected to a windowing function to select a frequency-domain region of interest (ROI), e.g., a window defined as Kmin to Kmax. The window may be selected to be dominated by or include only non-DC positive-frequency spectral components of Gsys (K\u2212K0) with meaningful intensity or amplitude with respect to noise in the ROI. The windowing function may be an apodizing function.",
        "Preparing 118 representative transformed interferometry data can include combining a plurality of the transformed interference signals such as by averaging with or without weighting, e.g., noise based weighting. In some embodiments, preparing 118 includes preparing a first transformed interference signal that includes contributions from the magnitudes of the transformed interference signals and a second transformed interference signal that includes contributions from the phases of the transformed interference signals. For example, first transformed interference signal including a combination of the magnitudes of the transformed interference signals, e.g., the field average of the magnitudes, can be determined as:",
        "P\n                sys\n              \n              _\n            \n            \u2061\n            \n              (\n              \n                K\n                -\n                \n                  K\n                  0\n                \n              \n              )\n            \n          \n          =\n          \n            \n              \u222b\n              \n                \n                  \n                    P\n                    sys\n                  \n                  \u2061\n                  \n                    (\n                    \n                      \n                        K\n                        -\n                        \n                          K\n                          0\n                        \n                      \n                      ,\n                      x\n                    \n                    )\n                  \n                \n                \u2062\n                \n                  \u2146\n                  x\n                \n              \n            \n            \n              \u222b\n              \n                \u2146\n                x\n              \n            \n          \n        \n        \u2062\n        \n          \n\n        \n        \u2062\n        where\n      \n    \n    \n      \n        (\n        7\n        )\n      \n    \n  \n  \n    \n      \n        \n          \n            P\n            sys\n          \n          \u2061\n          \n            (\n            \n              \n                K\n                -\n                \n                  K\n                  0\n                \n              \n              ,\n              x\n            \n            )\n          \n        \n        =\n        \n          \n            \n              AC\n              sys\n            \n            \u2061\n            \n              (\n              x\n              )\n            \n          \n          |\n          \n            2\n            \u2062\n            \n              \n                G\n                sys\n              \n              \u2061\n              \n                (\n                \n                  \n                    K\n                    -\n                    \n                      K\n                      0\n                    \n                  \n                  ,\n                  x\n                \n                )\n              \n            \n          \n          |\n        \n      \n    \n    \n      \n        (\n        8\n        )\n      \n    \n  \n\n\n\n\nand a combination of the phases of the transformed interference signals, e.g., the field average of the phases, can be determined as:",
        "\u03d5\n              sys\n              \u2032\n            \n            _\n          \n          \u2061\n          \n            (\n            \n              K\n              -\n              \n                K\n                0\n              \n            \n            )\n          \n        \n        =\n        \n          \n            \u222b\n            \n              \n                \n                  \u03d5\n                  sys\n                  \u2033\n                \n                \u2061\n                \n                  (\n                  \n                    \n                      K\n                      -\n                      \n                        K\n                        0\n                      \n                    \n                    ,\n                    x\n                  \n                  )\n                \n              \n              \u2062\n              \n                \u2146\n                x\n              \n            \n          \n          \n            \u222b\n            \n              \u2146\n              x\n            \n          \n        \n      \n    \n    \n      \n        (\n        9\n        )\n      \n    \n  \n\n\n\n\nwhere the measured phase as a function of angular frequency is",
        "\u03d5\n              sys\n              \u2033\n            \n            \u2061\n            \n              (\n              \n                \n                  K\n                  -\n                  \n                    K\n                    0\n                  \n                \n                ,\n                x\n              \n              )\n            \n          \n          =\n          \n            \n              connect\n              K\n            \n            \u2061\n            \n              [\n              \n                \n                  \u03d5\n                  sys\n                  \u2033\u2032\n                \n                \u2061\n                \n                  (\n                  \n                    \n                      K\n                      -\n                      \n                        K\n                        0\n                      \n                    \n                    ,\n                    x\n                  \n                  )\n                \n              \n              ]\n            \n          \n        \n        \u2062\n        \n          \n\n        \n        \u2062\n        for\n      \n    \n    \n      \n        (\n        10\n        )\n      \n    \n  \n  \n    \n      \n        \n          \n            \u03d5\n            sys\n            \u2033\u2032\n          \n          \u2061\n          \n            (\n            \n              \n                K\n                -\n                \n                  K\n                  0\n                \n              \n              ,\n              x\n            \n            )\n          \n        \n        =\n        \n          \n            arg\n            \u2061\n            \n              [\n              \n                \n                  G\n                  sys\n                \n                \u2061\n                \n                  (\n                  \n                    \n                      K\n                      -\n                      \n                        K\n                        0\n                      \n                    \n                    ,\n                    x\n                  \n                  )\n                \n              \n              ]\n            \n          \n          .\n        \n      \n    \n    \n      \n        (\n        11\n        )",
        "The three primes for the phase data",
        "\u03d5\n  sys\n  \u2033\u2032\n\n\n\n\nin the frequency domain indicate that there are multiple 2\u03c0 uncertainties in the phase information: (1) from angular frequency to angular frequency K, (2) from pixel to pixel, and (3) overall with respect to an absolute reference. The connectK function in Eq.(10) removes one of these primes by connecting across angular frequencies for each pixel. Examples of functions for removing such 2\u03c0 uncertainties are discussed in U.S. application Ser. No. 10/053,106, filed Nov. 2, 2001, titled Height scanning interferometry method and apparatus including phase gap analysis and Ghiglia et al., Two Dimensional Phase Unwrapping: Theory, Algorithms, and Software, John Wiley & Sons, Inc., New York, 1998, which references are incorporated herein by reference. The field averaging in Eq.(9) removes another prime, leaving only the single prime that indicates that the overall offset value for the phase is unknown.",
        "A transformed template",
        "q\n      ~\n    \n    sys\n  \n  _\n\n\n\n\ncan be prepared 118 as:",
        "q\n                ~\n              \n              sys\n            \n            _\n          \n          \u2061\n          \n            (\n            K\n            )\n          \n        \n        =\n        \n          \n            \n              \n                P\n                sys\n              \n              _\n            \n            \u2061\n            \n              (\n              \n                K\n                -\n                \n                  K\n                  0\n                \n              \n              )\n            \n          \n          \u2062\n          exp\n          \u2062\n          \n            {\n            \n              \n                nonlin\n                K\n              \n              \u2061\n              \n                [\n                \n                  \n                    \n                      \u03d5\n                      sys\n                      \u2032\n                    \n                    _\n                  \n                  \u2061\n                  \n                    (\n                    \n                      K\n                      -\n                      \n                        K\n                        0\n                      \n                    \n                    )\n                  \n                \n                ]\n              \n            \n            }\n          \n        \n      \n    \n    \n      \n        (\n        12\n        )\n      \n    \n  \n\n\n\n\nwhere the function nonlinK returns that portion of the argument that is nonlinear with respect to angular frequency K, thereby removing the linear change of phase with angular frequency K. The linear change of phase with angular frequency is related to the object topography related shift of the interference pattern along the scan position axis. Removing the linear change of frequency can retain certain instrument related contributions to the interference patterns. Thus, the template relates to a response of the instrument to an object. It should be noted that the linear change of phase can be removed prior to combining interference signals.",
        "The tilde \u201c\u02dc\u201d in Eq.(12) indicates that the transformed template",
        "q\n      ~\n    \n    sys\n  \n  _\n\n\n\n\ncontains only the positive nonzero frequencies. As an alternative to including only nonzero frequencies, the transformed template can include other frequencies as well.",
        "The transformed template",
        "q\n      ~\n    \n    sys\n  \n  _\n\n\n\n\ncan be inverse transformed to prepare a template in the scan domain:",
        "I\n                ~\n              \n              sys\n            \n            _\n          \n          \u2061\n          \n            (\n            \u03b6\n            )\n          \n        \n        =\n        \n          \n            \n              \n                m\n                sys\n              \n              _\n            \n            \u2061\n            \n              (\n              \u03b6\n              )\n            \n          \n          \u2062\n          \n            exp\n            \u2061\n            \n              [\n              \n                \n                  \n                    -\n                    \u2148\n                  \n                  \u2062\n                  \n                    \n                  \n                  \u2062\n                  \n                    K\n                    0\n                  \n                  \u2062\n                  \u03b6\n                \n                +\n                \n                  \n                    \u2148\u03c6\n                    sys\n                  \n                  \u2061\n                  \n                    (\n                    \u03b6\n                    )\n                  \n                \n              \n              ]\n            \n          \n        \n      \n    \n    \n      \n        (\n        13\n        )\n      \n    \n  \n\n\n\n\naccording to an inverse Fourier transform:",
        "I\n                ~\n              \n              sys\n            \n            _\n          \n          \u2061\n          \n            (\n            \u03b6\n            )\n          \n        \n        =\n        \n          \n            FT\n            \n              -\n              1\n            \n          \n          \u2062\n          \n            {\n            \n              \n                \n                  \n                    q\n                    ~\n                  \n                  sys\n                \n                _\n              \n              \u2061\n              \n                (\n                K\n                )\n              \n            \n            }\n          \n        \n      \n    \n    \n      \n        (\n        14\n        )\n      \n    \n  \n  \n    \n      \n        \n          \n            FT\n            \n              -\n              1\n            \n          \n          \u2062\n          \n            {\n            \n              q\n              \u2061\n              \n                (\n                k\n                )\n              \n            \n            }\n          \n        \n        =\n        \n          \n            \u222b\n            \n              -\n              \u221e\n            \n            \u221e\n          \n          \u2062\n          \n            \n              q\n              \u2061\n              \n                (\n                K\n                )\n              \n            \n            \u2062\n            \n              exp\n              \u2061\n              \n                (\n                \n                  \n                    -\n                    \u2148\n                  \n                  \u2062\n                  \n                    \n                  \n                  \u2062\n                  K\n                  \u2062\n                  \n                    \n                  \n                  \u2062\n                  \u03b6\n                \n                )\n              \n            \n            \u2062\n            \n              \u2146\n              K\n            \n          \n        \n      \n    \n    \n      \n        (\n        15\n        )\n      \n    \n  \n\n\n\n\nwhere, for convenience, the averaged scaling factor",
        "AC\n    sys\n  \n  _\n\n\n\n\nis assigned a value of 1.",
        "The real part of the function",
        "I\n      ~\n    \n    sys\n  \n  _\n\n\n\n\nhas a readily separable envelope and phase at each scan position. The envelope is",
        "m\n            sys\n          \n          \u2061\n          \n            (\n            \u03b6\n            )\n          \n        \n        =\n        \n          \uf603\n          \n            \n              \n                \n                  I\n                  \u223c\n                \n                sys\n              \n              _\n            \n            \u2061\n            \n              (\n              \u03b6\n              )\n            \n          \n          \uf604\n        \n      \n    \n    \n      \n        (\n        16\n        )\n      \n    \n  \n\n\n\n\nwhile the phase is",
        "\u03c6\n              sys\n              \u2033\n            \n            \u2061\n            \n              (\n              \u03b6\n              )\n            \n          \n          =\n          \n            \n              connect\n              \u03b6\n            \n            \u2061\n            \n              [\n              \n                \n                  \n                    \u03c6\n                    sys\n                    m\n                  \n                  _\n                \n                \u2061\n                \n                  (\n                  \u03b6\n                  )\n                \n              \n              ]\n            \n          \n        \n        \u2062\n        \n          \n\n        \n        \u2062\n        for\n        \u2062\n        \n          \n\n        \n        \u2062\n        \n          \n            \n              \n                \u03c6\n                sys\n                m\n              \n              _\n            \n            \u2061\n            \n              (\n              \u03b6\n              )\n            \n          \n          =\n          \n            \n              arg\n              \u2061\n              \n                [\n                \n                  \n                    \n                      \n                        I\n                        \u223c\n                      \n                      sys\n                    \n                    _\n                  \n                  \u2061\n                  \n                    (\n                    \u03b6\n                    )\n                  \n                \n                ]\n              \n            \n            .\n          \n        \n      \n    \n    \n      \n        (\n        17\n        )",
        "The template may have the same units as an interference signal, e.g., detector intensity v. scan position. The transformed template may have the same units as transformed interference signals, e.g., intensity or amplitude v. inverse scan position. The template may be generally representative of the response of the interferometer to an object, e.g., a point of an object interface. For example, as discussed above, determining the template can include reducing or removing contributions related to, e.g., object-location and surface height hsys, while retaining instrument related contributions, e.g., contributions related to the shape of the envelope and phase. Contributions from the amplitude of the oscillating and constant background signals ACsys, DCsys may also be reduced or removed. Either template",
        "q\n          \u223c\n        \n        sys\n      \n      \u2062\n      \n        \n      \n    \n    _\n  \n  \u2062\n  \n    \n  \n  \u2062\n  or\n  \u2062\n  \n    \n      \n    \n    \u2062\n    \n      \n    \n  \n  \u2062\n  \n    \n      \n        I\n        \u223c\n      \n      sys\n    \n    _\n  \n\n\n\n\ncan be used to determine a spatial property of a measurement object whether or not the template was acquired from a reference object or in another fashion, e.g., from the measurement object itself.",
        "In some embodiments, a portion of the template can be selected for use in determining the spatial property. For example, a windowed portion \u0128pat of the template can be selected using a window function:",
        "I\n              \u223c\n            \n            pat\n          \n          \u2061\n          \n            (\n            \u03b6\n            )\n          \n        \n        =\n        \n          \n            w\n            \u2061\n            \n              (\n              \u03b6\n              )\n            \n          \n          \u2062\n          \n            \n              \n                I\n                \u223c\n              \n              sys\n            \n            _\n          \n          \u2062\n          \n            \n          \n          \u2062\n          \n            (\n            \u03b6\n            )\n          \n        \n      \n    \n    \n      \n        (\n        19\n        )\n      \n    \n  \n\n\n\n\nThe template window is given by:",
        "w\n          \u2061\n          \n            (\n            \u03b6\n            )\n          \n        \n        =\n        \n          {\n          \n            \n              \n                1\n              \n              \n                \n                  \n                    for\n                    \u2062\n                    \n                      \n                    \n                    \u2062\n                    \n                      \u03b6\n                      start\n                    \n                  \n                  \u2264\n                  \u03b6\n                  \u2264\n                  \n                    \u03b6\n                    stop\n                  \n                \n              \n            \n            \n              \n                0\n              \n              \n                otherwise\n              \n            \n          \n        \n      \n    \n    \n      \n        (\n        20\n        )",
        "An exemplary window is centered about a zero scan position \u03b6=0 in which case an appropriate window may be:",
        "\u03b6\n            start\n          \n          =\n          \n            -\n            \n              \u0394\u03b6\n              2\n            \n          \n        \n        \u2062\n        \n          \n\n        \n        \u2062\n        \n          \n            \u03b6\n            stop\n          \n          =\n          \n            +\n            \n              \u0394\u03b6\n              2\n            \n          \n        \n      \n    \n    \n      \n        (\n        21\n        )\n      \n    \n  \n\n\n\n\nwhere the window width \u0394\u03b6 may be determined arbitrarily. Alternatively, the end-points of the window function can be defined with respect to relative to a peak amplitude of the envelope, e.g., the window may have a width extending to scan positions corresponding to 10% of the peak amplitude.",
        "In some embodiments, the windowed template is not centered about zero scan position. In some embodiments, the windowed template is asymmetrical with respect to the interferometry data, e.g., the windowed template may extend to a scan position corresponding to a 10% amplitude at one side of the template while not extending to a scan position corresponding the same relative amplitude on the other side of the template. For example, \u03b6start can be selected to correspond with the scan position of the peak of the envelope msys and only template data corresponding to scan positions on one side of the peak retained. Such a truncated template can be used to determine a region or interest or spatial property of a surface or interface in the presence of more than one closely spaced layers, e.g., a substrate having a thin film.",
        "Determining A Region of Interest or Spatial Property Based On A Template",
        "Determining a region of interest or a spatial property of a measurement object can include comparing an interference signal and a template, e.g., by locating a portion of a measurement interference signal that corresponds to, e.g., has shape features similar to, a template. The comparison can be expressed as a merit function determined from cross-correlation between the interference signal and the template. Two methods for comparing an interference signal and a template are discussed next.",
        "A First Method Of Determining a Spatial Property Based On A Template",
        "The following discussion illustrates use of a template \u0128pat to determine a region of interest or spatial property of a measurement object. A plurality of measurement interference signals \u0128ex are acquired from the measurement object. Each interference signal describes the detector intensity v. scan position signal for a pixel x as:\n\nIex(\u03b6,x)=DCex(x)+. . .\n\nACex(x)mex[\u03b6\u2212hex(x)]cos{\u2212[\u03b6\u2212hex(x)]K0+\u03a6ex[\u03b6\u2212hex(x)]}\u2003\u2003(22)\n\nThe Fourier transform of each interference signal \u0128ex can be obtained as:",
        "q\n            ex\n          \n          \u2061\n          \n            (\n            \n              K\n              ,\n              x\n            \n            )\n          \n        \n        =\n        \n          FT\n          \u2062\n          \n            {\n            \n              \n                I\n                ex\n              \n              \u2061\n              \n                (\n                \n                  \u03b6\n                  ,\n                  x\n                \n                )\n              \n            \n            }\n          \n        \n      \n    \n    \n      \n        (\n        23\n        )\n      \n    \n  \n  \n    \n      \n        \n          \n            \n              q\n              ex\n            \n            \u2061\n            \n              (\n              \n                K\n                ,\n                x\n              \n              )\n            \n          \n          =\n          \n            \n              \n                \u03b4\n                \u2061\n                \n                  (\n                  K\n                  )\n                \n              \n              \u2062\n              \n                \n                  DC\n                  ex\n                \n                \u2061\n                \n                  (\n                  x\n                  )\n                \n              \n            \n            +\n            \n              \n                1\n                2\n              \n              \u2062\n              \n                \n                  \n                    AC\n                    ex\n                  \n                  \u2061\n                  \n                    (\n                    x\n                    )\n                  \n                \n                \u2061\n                \n                  [\n                  \n                    \n                      \n                        G\n                        ex\n                        *\n                      \n                      \u2061\n                      \n                        (\n                        \n                          \n                            \n                              -\n                              K\n                            \n                            -\n                            \n                              K\n                              0\n                            \n                          \n                          ,\n                          x\n                        \n                        )\n                      \n                    \n                    +\n                    \n                      \n                        G\n                        ex\n                      \n                      \u2061\n                      \n                        (\n                        \n                          \n                            K\n                            -\n                            \n                              K\n                              0\n                            \n                          \n                          ,\n                          x\n                        \n                        )\n                      \n                    \n                  \n                  ]\n                \n              \n            \n          \n        \n        \u2062\n        \n          \n\n        \n        \u2062\n        where\n      \n    \n    \n      \n        (\n        24\n        )\n      \n    \n  \n  \n    \n      \n        \n          \n            \n              G\n              ex\n            \n            \u2061\n            \n              (\n              K\n              )\n            \n          \n          =\n          \n            FT\n            \u2062\n            \n              {\n              \n                \n                  \n                    m\n                    ex\n                  \n                  \u2061\n                  \n                    (\n                    \u03b6\n                    )\n                  \n                \n                \u2062\n                \n                  \n                \n                \u2062\n                \n                  exp\n                  \u2061\n                  \n                    [\n                    \n                      i\n                      \u2062\n                      \n                        \n                      \n                      \u2062\n                      \n                        \n                          \u03c6\n                          ex\n                        \n                        \u2061\n                        \n                          (\n                          \u03b6\n                          )\n                        \n                      \n                    \n                    ]\n                  \n                \n              \n              }\n            \n            \u2062\n            \n              exp\n              \u2061\n              \n                [\n                \n                  \u2148\n                  \u2062\n                  \n                    \n                  \n                  \u2062\n                  K\n                  \u2062\n                  \n                    \n                  \n                  \u2062\n                  \n                    h\n                    ex\n                  \n                  \u2062\n                  \n                    \n                  \n                  \u2062\n                  \n                    (\n                    x\n                    )\n                  \n                \n                ]\n              \n            \n          \n        \n        \u2063\n        .\n      \n    \n    \n      \n        (\n        25\n        )\n      \n    \n  \n\n\n\n\nA partial spectrum can be obtained from the positive-frequency portion of each Fourier transformed measurement interference signal:\n\n{tilde over (q)}ex(K)=ACex(x)Gex(K\u2212K0, x)\u2003\u2003(26)\n\nEach partial spectrum can be inverse transformed as:\n\n\u0128ex(\u03b6)=FT\u22121{{tilde over (q)}ex(K)}\u2003\u2003(27)\n\n\u0128ex(\u03b6,x)=ACex(x)mex[\u03b6\u2212hex(x)]exp{\u2212[\u03b6\u2212hex(x)]K0+\u03a6ex[\u03b6\u2212hex(x)]}\u2003\u2003(28)",
        "The real part of each inverse transformed partial spectrum \u0128ex for a pixel x corresponds to the interference signal Iex for the same pixel. Additionally, the phase and envelope of the spectra \u0128ex are readily separable by simple operations, e.g. the product of the signal strength ACex (x) and the envelope mex can be determined from the magnitude of the complex function \u0128ex as:\n\nACex(x)mex[\u03b6\u2212hex(x)]=|\u0128ex(\u03b6,x)|\u2003\u2003(29)",
        "At least a portion of the envelope mpat of the template interferometry data typically has shape features similar to the envelope mex describing the decay of each spectrum \u0128ex. Differences between the envelopes are typically related to the linear offset hex of the object location imaged at each pixel x and the scaling factor ACex (x). Additionally, differences between the experimental and interference pattern template phase offsets \u03c6ex, \u03c6pat are also related to the height hex of the object location imaged at each pixel x. Typically, the differences in the phase offsets are linearly proportional to the height hex. Accordingly, differences between the envelopes mex, mpat and/or differences between the phase offsets \u03c6ex, \u03c6pat can be used to determine a spatial property of a measurement object. The method may include identifying a scan position \u03b6best for which the shapes of the envelopes mex, mpat and \u03c6ex, \u03c6pat are best matched. The results of the comparison can be described by a merit function. In some embodiments, the merit function is determined by cross-correlating the interference signal and the template. The cross correlation can be a complex correlation or a partially-complex correlation.",
        "In some embodiments, identifying \u03b6best is identified using a merit function \u03a0 derived from the correlation of the template with the interference signal within a subset of the interferometry data as defined by the window w:",
        "\u03a0\n            \u2061\n            \n              (\n              \n                \u03b6\n                ,\n                x\n              \n              )\n            \n          \n          =\n          \n            \n              \n                \uf603\n                \n                  \n                    I\n                    \u223c\n                  \n                  \u2061\n                  \n                    (\n                    \n                      \u03b6\n                      ,\n                      x\n                    \n                    )\n                  \n                \n                \uf604\n              \n              2\n            \n            \n              \n                \u2329\n                \n                  m\n                  pat\n                  2\n                \n                \u232a\n              \n              \u2062\n              \n                \u2329\n                \n                  \n                    \uf603\n                    \n                      \n                        \n                          I\n                          \u223c\n                        \n                        ex\n                      \n                      \u2061\n                      \n                        (\n                        \n                          \u03b6\n                          ,\n                          x\n                        \n                        )\n                      \n                    \n                    \uf604\n                  \n                  2\n                \n                \u232a\n              \n            \n          \n        \n        \u2062\n        \n          \n\n        \n        \u2062\n        where\n      \n    \n    \n      \n        (\n        30\n        )\n      \n    \n  \n  \n    \n      \n        \n          \n            I\n            \u223c\n          \n          \u2061\n          \n            (\n            \n              \u03b6\n              ,\n              x\n            \n            )\n          \n        \n        =\n        \n          \n            1\n            N\n          \n          \u2062\n          \n            \n              \u222b\n              \n                -\n                \u221e\n              \n              \u221e\n            \n            \u2062\n            \n              \n                \n                  \n                    I\n                    \u223c\n                  \n                  pat\n                  *\n                \n                \u2061\n                \n                  (\n                  \n                    \u03b6\n                    ^\n                  \n                  )\n                \n              \n              \u2062\n              \n                \n              \n              \u2062\n              \n                \n                  \n                    I\n                    \u223c\n                  \n                  ex\n                \n                \u2061\n                \n                  (\n                  \n                    \n                      \u03b6\n                      +\n                      \n                        \u03b6\n                        ^\n                      \n                    \n                    ,\n                    x\n                  \n                  )\n                \n              \n              \u2062\n              \n                \n                  \u2146\n                  \n                    \u03b6\n                    ^\n                  \n                \n                .\n              \n            \n          \n        \n      \n    \n    \n      \n        (\n        31\n        )\n      \n    \n  \n\n\n\n\nis the complex correlation function and",
        "\u2329\n          \n            m\n            pat\n            2\n          \n          \u232a\n        \n        =\n        \n          \n            1\n            N\n          \n          \u2062\n          \n            \n              \u222b\n              \n                -\n                \u221e\n              \n              \u221e\n            \n            \u2062\n            \n              \n                \n                  \uf603\n                  \n                    \n                      \n                        I\n                        \u223c\n                      \n                      pat\n                    \n                    \u2061\n                    \n                      (\n                      \n                        \u03b6\n                        ^\n                      \n                      )\n                    \n                  \n                  \uf604\n                \n                2\n              \n              \u2062\n              \n                \n              \n              \u2062\n              \n                \u2146\n                \n                  \u03b6\n                  ^\n                \n              \n            \n          \n        \n      \n    \n    \n      \n        (\n        32\n        )\n      \n    \n  \n  \n    \n      \n        \n          \u2329\n          \n            \n              \uf603\n              \n                \n                  \n                    I\n                    \u223c\n                  \n                  ex\n                \n                \u2061\n                \n                  (\n                  \n                    \u03b6\n                    ,\n                    x\n                  \n                  )\n                \n              \n              \uf604\n            \n            2\n          \n          \u232a\n        \n        =\n        \n          \n            1\n            N\n          \n          \u2062\n          \n            \n              \u222b\n              \n                -\n                \u221e\n              \n              \u221e\n            \n            \u2062\n            \n              \n                \n                  \uf603\n                  \n                    \n                      \n                        I\n                        \u223c\n                      \n                      ex\n                    \n                    \u2061\n                    \n                      (\n                      \n                        \n                          \u03b6\n                          +\n                          \n                            \u03b6\n                            ^\n                          \n                        \n                        ,\n                        x\n                      \n                      )\n                    \n                  \n                  \uf604\n                \n                2\n              \n              \u2062\n              \n                w\n                \u2061\n                \n                  (\n                  \n                    \u03b6\n                    ^\n                  \n                  )\n                \n              \n              \u2062\n              \n                \n              \n              \u2062\n              \n                \u2146\n                \n                  \u03b6\n                  ^\n                \n              \n            \n          \n        \n      \n    \n    \n      \n        (\n        33\n        )\n      \n    \n  \n\n\n\n\nare normalizations that make the merit function of independent of signal-strength. The normalization can be dependent on a shape of the interference signal, e.g., upon the moving average of the square magnitude of the complex interference signal within the window w. Eq.(30) is the square of the \u201cPearson's r\u201d familiar from statistics and can also be derived by a least-squares analysis. Use of the complex conjugate \u0128*pat of the template cancels the synchronous linear phase term K0\u03b6 and maximizes \u03a0 for the case of a match of \u03c6ex, \u03c6pat. The absolute value || of the correlation removes any residual complex phase.",
        "To prevent \u03a0 (\u03b6) from generating false high values or encountering a singularity at low signal levels, a minimum value MinDenom can be added to the denominator as:\n\n<|\u0128ex(\u03b6)|2>\u2190<|\u0128ex(\u03b6)|2>+MinDenom.max (<|\u0128ex|2>)\u2003\u2003(34)\n\nwhere the max ( ) function returns the maximum value of the signal strength |\u0128ex| over the full scan length \u03b6, and MinDenom is the minimum relative signal strength that is considered to provide relevant information. For example, MinDenom can be set to 5% of the maximum signal or other value depending upon the level of noise. The correlation may also be performed by weighting the data to give relative noisy data less influence in determining the result of the correlation.",
        "The correlation integral \u0128 can be performed in the frequency domain using the correlation theorem:\n\n\u0128(\u03b6)=FT31 1{{tilde over (q)}*pat(K){tilde over (q)}ex(K)}\u2003\u2003(35)\n\nwhere\n\nFT {\u0128*pat(\u03b6,x)}\u2212{tilde over (q)}*pat(\u2212K,x)\u2003\u2003(36)\n\nand\n\n{tilde over (q)}pat(K,x)=FT {\u0128pat(\u03b6,x)}\u2003\u2003(37)",
        "The merit function \u03a0 yields the best match position \u03b6best. Typically, the best match position is a peak of the merit function and the relative amplitude of the peak is a measure of the quality of the match, ranging from zero to one, with one corresponding to a perfect match. The search for the best match position can include additional conditions and constraints to increase robustness. A valid best match position \u03b6best can be selected to have a signal strength:\n\n|\u0128ex(\u03b6best)|>GreyLevels.MinMod\u2003\u2003(38)\n\nwhere MinMod is a 0-100% value. A typical MinMod is 10% for a smooth surface and usually lower for a rough surface. The value of the merit function at the best match position can also be required to exceed a selected minimum MinMerit to reduce spurious results:\n\n\u03a0(\u03b6best)>MinMerit\u2003\u2003(39)\n\nwhere MinMerit ranges from 0 to 1, with an exemplary value being about 0.3.",
        "For measurement objects lacking closely spaced interfaces or surfaces, the merit function can be searched for the scan position \u03b6 at which \u03a0 is maximized. For measurement objects having closely spaced interfaces or surfaces, multiple scan positions may satisfy both the MinMod and MinMerit conditions. The scan positions can be identified by, for example, using a search algorithm that finds the first peak that satisfies the MinMerit condition starting at the one end, e.g., the high end of the \u03b6-coordinate scan. The algorithm further establishes MinRelMod and MinRelMerit conditions, which require that smaller peaks have signals relatively comparable to the highest peaks according to some percentage value.",
        "An alternative or complementary search routine includes searching the merit function for the first scan position for which \u03a0 exceeds a certain threshold value, even if it is not a peak. This approach may be used for analysis of data resulting from measurement objects with closely spaced surfaces or interfaces where, e.g., the presence of an underlying substrate obscures a peak resulting from a film-air interface.",
        "A method for searching \u03a0 can include determining a derivative of the merit function, e.g., to locate surface heights.",
        "The best-match position \u03b6best typically relates to a scan position at which the envelopes mex, mpat are aligned. Accordingly, the best match position from cross-correlation can provide a normal resolution or CT-Norm height measurement:\n\nh\u0398(x)=\u03b6best(x)\u2003\u2003(40)\n\nwhere the subscript \u0398 indicates that the height measurement h\u0398 (as opposed to the true height h) is based on a coherence approach or fringe-contrast analysis.",
        "As in frequency domain analysis, the normal resolution height profile h\u0398 may be free of fringe-order uncertainty but have a certain noise level. Frequency domain analysis is described in U.S. Pat. No. 5,398,113, which is incorporated herein by reference. The noise level may be reduced by using the underlying carrier fringes in the interference pattern.",
        "In correlation template analysis, the argument of the correlation function\n\n\u03c6\u2033(\u03b6)=connect\u03b6{arg[\u0128(\u03b6)]}\u2003\u2003(41)\n\nhas a relative phase value equal to the difference \u03c6ex-\u03c6pat. The relative phase \u03c6\u2033 provides additional, fine-scale information regarding the template matching. The double prime in Eq.(41) indicates that there remains a two-fold uncertainty in the fringe order for \u03c6\u2033, both from pixel to pixel within the image and overall with respect to the datum, after connecting across scan positions \u03b6. The relative phase \u03c6\u2033 evolves approximately at a linear rate K0 with scan position \u03b6. The relative phase \u03c6\u2033 at the peak correlation position \u03b6best is the phase gap with respect to the envelope portion of the interference pattern template:\n\nA\u2033(x)=\u03c6\u2033[\u03b6best(x)]\u2003\u2003(42)\n\nThis leads to a higher-resolution phase profile:\n\n\u03b8\u2033(x)=A\u2033(x)+\u0398(x)\u2003\u2003(43)\n\nwhere \u0398 is the coherence profile in units of phase at the nominal angular frequency K0:\n\n\u0398(x)=K0h\u0398(x)\u2003\u2003(44)",
        "The coherence profile \u0398 (x) in Eq.(44) can be determined using nominal angular frequency K0 consistent with the mathematical analysis. An incorrect K0 typically creates interpolation errors. In some embodiments, the template is autocorrelated with itself:",
        "I\n              ~\n            \n            auto\n          \n          \u2061\n          \n            (\n            \u03b6\n            )\n          \n        \n        =\n        \n          \n            1\n            N\n          \n          \u2062\n          \n            \n              \u222b\n              \n                -\n                \u221e\n              \n              \u221e\n            \n            \u2062\n            \n              \n                \n                  \n                    I\n                    ~\n                  \n                  pat\n                  *\n                \n                \u2061\n                \n                  (\n                  \n                    \u03b6\n                    ^\n                  \n                  )\n                \n              \n              \u2062\n              \n                \n                  \n                    I\n                    ~\n                  \n                  pat\n                \n                \u2061\n                \n                  (\n                  \n                    \u03b6\n                    +\n                    \n                      \u03b6\n                      ^\n                    \n                  \n                  )\n                \n              \n              \u2062\n              \n                \n              \n              \u2062\n              \n                \n                  \u2146\n                  \n                    \u03b6\n                    ^\n                  \n                \n                .\n              \n            \n          \n        \n      \n    \n    \n      \n        (\n        45\n        )\n      \n    \n  \n\n\n\n\nso that the auto-correlation phase can be searched as a function of scan position \u03b6:\n\n\u03c6\u2033(\u03b6)=connect\u03b6{arg [\u0128auto(\u03b6)]}\u2003\u2003(46)\n\nKnowing the increments between scan positions \u03b6step, the nominal frequency K0 is given by:",
        "K\n          0\n        \n        =\n        \n          \n            \n              \n                \n                  \u03c6\n                  auto\n                  \u2033\n                \n                \u2061\n                \n                  (\n                  \n                    \n                      \u03b6\n                      best\n                    \n                    +\n                    \n                      \n                        1\n                        2\n                      \n                      \u2062\n                      \n                        \u03b6\n                        step\n                      \n                    \n                  \n                  )\n                \n              \n              -\n              \n                \n                  \u03c6\n                  auto\n                  \u2033\n                \n                \u2061\n                \n                  (\n                  \n                    \n                      \u03b6\n                      best\n                    \n                    -\n                    \n                      \n                        1\n                        2\n                      \n                      \u2062\n                      \n                        \u03b6\n                        step\n                      \n                    \n                  \n                  )\n                \n              \n            \n            \n              \u03b6\n              step\n            \n          \n          .\n        \n      \n    \n    \n      \n        (\n        47\n        )\n      \n    \n  \n\n\n\n\nThe nominal frequency K0 can be used to remove the fringe order uncertainty using a field-connected, approximate phase gap \u03b1\u2032 according to:",
        "\u03b8\n            \u2032\n          \n          \u2061\n          \n            (\n            x\n            )\n          \n        \n        =\n        \n          \n            \n              \u03b8\n              \u2033\n            \n            \u2061\n            \n              (\n              x\n              )\n            \n          \n          -\n          \n            2\n            \u2062\n            \u03c0\n            \u2062\n            \n              \n            \n            \u2062\n            \n              Round\n              \u2061\n              \n                [\n                \n                  \n                    \n                      \n                        A\n                        \u2033\n                      \n                      \u2061\n                      \n                        (\n                        x\n                        )\n                      \n                    \n                    -\n                    \n                      \u03b1\n                      \u2032\n                    \n                  \n                  \n                    2\n                    \u2062\n                    \u03c0\n                  \n                \n                ]\n              \n            \n          \n        \n      \n    \n    \n      \n        (\n        48\n        )\n      \n    \n  \n\n\n\n\nwhere Round function returns the nearest integer to its argument. A phase gap \u03b1\u2032 can be determined using, e.g., a sin-cosine averaging technique. Exemplary techniques for determining a phase gap are described in U.S. patent application Ser. No. 10/053,106, entitled \u201cHEIGHT SCANNING INTERFEROMETRY METHOD AND APPARATUS INCLUDING PHASE GAP ANALYSIS\u201d and filed Nov. 2, 2001, U.S. patent application Ser. No. 10/429,175, entitled \u201cPHASE GAP ANALYSIS FOR SCANNING INTERFEROMETRY\u201d and filed May 2, 2003, and \u201cDetermination of fringe order in white-light interference microscopy,\u201d Appl. Opt. 41(22) 4571 (2002), which documents are incorporated herein by reference. Upon determining the phase gap, the measurement object height can be determined using the coherence profile and nominal frequency K0 as:\n\nh\u03b8(x)=\u03b8\u2032(x)/K0\u2003\u2003(49)",
        "A Second Method Of Determining a Spatial Property Based On A Template",
        "The above method for determining a spatial property included transformation of the interference signals from the optical path length difference dimension to an inverse dimension, e.g., inverse scan dimension. In some embodiments, interference signals are processed in the scan dimension, e.g., without transformation to an inverse dimension. The processing can include cross-correlating the interference signal and a template in the scan dimension. For example, the processing can include subjecting each interference signal and a template to a partially complex correlation as follows:",
        "I\n            \u223c\n          \n          \u2061\n          \n            (\n            \n              \u03b6\n              ,\n              x\n            \n            )\n          \n        \n        =\n        \n          \n            2\n            N\n          \n          \u2062\n          \n            \n              \u222b\n              \n                -\n                \u221e\n              \n              \u221e\n            \n            \u2062\n            \n              \n                \n                  \n                    I\n                    ~\n                  \n                  pat\n                  *\n                \n                \u2061\n                \n                  (\n                  \n                    \u03b6\n                    ^\n                  \n                  )\n                \n              \n              \u2062\n              \n                \n                  I\n                  ex\n                \n                \u2061\n                \n                  (\n                  \n                    \n                      \u03b6\n                      +\n                      \n                        \u03b6\n                        ^\n                      \n                    \n                    ,\n                    x\n                  \n                  )\n                \n              \n              \u2062\n              \n                \n              \n              \u2062\n              \n                \n                  \u2146\n                  \n                    \u03b6\n                    ^\n                  \n                \n                .\n              \n            \n          \n        \n      \n    \n    \n      \n        (\n        50\n        )",
        "The properties of the template can be selected to enhance the sensitivity of the partially complex correlation to best match positions between the interference signal and template. Writing the interference signal as:",
        "I\n              ex\n            \n            \u2061\n            \n              (\n              \n                \u03b6\n                ,\n                x\n              \n              )\n            \n          \n          =\n          \n            \n              \n                DC\n                ex\n              \n              \u2061\n              \n                (\n                x\n                )\n              \n            \n            +\n            \n              \n                1\n                2\n              \n              \u2061\n              \n                [\n                \n                  \n                    \n                      \n                        I\n                        ~\n                      \n                      ex\n                    \n                    \u2061\n                    \n                      (\n                      \n                        \u03b6\n                        ,\n                        x\n                      \n                      )\n                    \n                  \n                  +\n                  \n                    \n                      \n                        I\n                        ~\n                      \n                      ex\n                      *\n                    \n                    \u2061\n                    \n                      (\n                      \n                        \u03b6\n                        ,\n                        x\n                      \n                      )\n                    \n                  \n                \n                ]\n              \n            \n          \n        \n        ,\n      \n    \n    \n      \n        (\n        51\n        )\n      \n    \n  \n\n\n\n\nthe partially complex correlation can be expressed as a sum of two parts:\n\n{tilde under (I)}(\u03b6,x)=\u0128(\u03b6,x)+err (\u03b6,x)\u2003\u2003(52)\n\nwhere the undesired err term is given by:",
        "err\n          \u2061\n          \n            (\n            \n              \u03b6\n              ,\n              x\n            \n            )\n          \n        \n        =\n        \n          \n            \n              \n                2\n                \u2062\n                \n                  \n                \n                \u2062\n                \n                  \n                    DC\n                    ex\n                  \n                  \u2061\n                  \n                    (\n                    x\n                    )\n                  \n                \n              \n              N\n            \n            \u2062\n            \n              \n                \u222b\n                \n                  -\n                  \u221e\n                \n                \u221e\n              \n              \u2062\n              \n                \n                  \n                    \n                      I\n                      ~\n                    \n                    pat\n                    *\n                  \n                  \u2061\n                  \n                    (\n                    \n                      \u03b6\n                      ^\n                    \n                    )\n                  \n                \n                \u2062\n                \n                  \u2146\n                  \n                    \u03b6\n                    ^\n                  \n                \n              \n            \n          \n          +\n          \n            \n              1\n              N\n            \n            \u2062\n            \n              \n                \u222b\n                \n                  -\n                  \u221e\n                \n                \u221e\n              \n              \u2062\n              \n                \n                  \n                    \n                      I\n                      ~\n                    \n                    pat\n                    *\n                  \n                  \u2061\n                  \n                    (\n                    \n                      \u03b6\n                      ^\n                    \n                    )\n                  \n                \n                \u2062\n                \n                  \n                    \n                      I\n                      ~\n                    \n                    ex\n                    *\n                  \n                  \u2061\n                  \n                    (\n                    \n                      \n                        \u03b6\n                        +\n                        \n                          \u03b6\n                          ^\n                        \n                      \n                      ,\n                      x\n                    \n                    )\n                  \n                \n                \u2062\n                \n                  \n                    \u2146\n                    \n                      \u03b6\n                      ^\n                    \n                  \n                  .\n                \n              \n            \n          \n        \n      \n    \n    \n      \n        (\n        53\n        )\n      \n    \n  \n\n\n\n\nProperties of the template \u0128pat can be selected to make the err small, e.g., drive the term toward zero so that the result of the correlation is determined by the first term on the left of Eq. 53. For example, the Fourier transform {tilde over (q)}pat of such a template \u0128pat may have low or negligible values outside of the positive-frequency neighborhood of the expected frequencies of the interference signal. In some embodiments, the average or DC value of the complex portion of the template \u0128*pat are zero, and the correlation of \u0128*pat and (the mathematically hypothetical) \u0128*ex is also zero. For example, the template \u0128pat can have zero negative frequency components.",
        "A template \u0128pat consisting essentially of strong, non-DC positive-frequency spectral components in the range Kmin . . . Kmax can be prepared by subjecting the transformed template prepared as discussed above to an apodizing window function. In some embodiments, the apodizing windowing function includes a raised cosine or von-Hann window instead of a window with a sharper cut-off in the frequency domain:",
        "ROI\n          \u2061\n          \n            (\n            K\n            )\n          \n        \n        =\n        \n          0.5\n          +\n          \n            0.5\n            \u2062\n            \n              \n                cos\n                \u2061\n                \n                  [\n                  \n                    2\n                    \u2062\n                    \n                      \u03c0\n                      \u2061\n                      \n                        (\n                        \n                          \n                            K\n                            -\n                            K0\n                          \n                          \n                            \u0394\n                            \u2062\n                            \n                              \n                            \n                            \u2062\n                            K\n                          \n                        \n                        )\n                      \n                    \n                  \n                  ]\n                \n              \n              .\n            \n          \n        \n      \n    \n    \n      \n        (\n        54\n        )\n      \n    \n  \n\n\n\n\nThe apodized windowing function reduces ringing when generating",
        "I\n      ~\n    \n    sys\n  \n  _\n\n\n\n\nand makes it easier to contain all of the important information about the interference pattern within a limited scan length. Note that to accommodate the apodization, the total frequency-domain range \u0394K may be larger than a square or rectangular windowing function, e.g., twice as wide in the frequency domain.",
        "A scan domain windowing function w having reduced sharpness as compared to a square or rectangular window can also be used:",
        "w\n          \u2061\n          \n            (\n            \u03b6\n            )\n          \n        \n        =\n        \n          0.5\n          +\n          \n            0.5\n            \u2062\n            \n              cos\n              \u2061\n              \n                (\n                \n                  \n                    2\n                    \u2062\n                    \u03c0\u03b6\n                  \n                  \u0394\u03b6\n                \n                )\n              \n            \n          \n        \n      \n    \n    \n      \n        (\n        55\n        )",
        "The interference pattern template is given by the product of the template and the scan domain windowing function:",
        "I\n              ~\n            \n            pat\n          \n          \u2061\n          \n            (\n            \u03b6\n            )\n          \n        \n        =\n        \n          \n            w\n            \u2061\n            \n              (\n              \u03b6\n              )\n            \n          \n          \u2062\n          \n            \n              \n                \n                  I\n                  ~\n                \n                sys\n              \n              _\n            \n            \u2061\n            \n              (\n              \u03b6\n              )\n            \n          \n        \n      \n    \n    \n      \n        (\n        56\n        )\n      \n    \n  \n\n\n\n\nwhere",
        "I\n      \u223c\n    \n    sys\n  \n  _\n\n\n\n\nincludes contributions from a plurality of interference signals. An asymmetric window can be prepared by shifting w to the right by an amount \u0394\u03b6/4. Typically, however, the window is set about the \u03b6=0 position.",
        "A final in-line pattern template \u0128pat.inl can be prepared by retaining only nonzero values and noting the starting offset \u03b6offs. The function \u0128pat.inl is used as a kernel in a discrete partially-complex correlation:",
        "I\n              \u223c\n            \n            \u2061\n            \n              (\n              \n                \u03b6\n                ,\n                x\n              \n              )\n            \n          \n          =\n          \n            \n              2\n              N\n            \n            \u2062\n            \n              \n                \u222b\n                \n                  -\n                  \u221e\n                \n                \u221e\n              \n              \u2062\n              \n                \n                  \n                    \n                      I\n                      \u223c\n                    \n                    \n                      pat\n                      .\n                      inl\n                    \n                    *\n                  \n                  \u2062\n                  \n                    \n                  \n                  (\n                  \n                    \u03b6\n                    ^\n                  \n                  )\n                \n                \u2062\n                \n                  \n                    I\n                    ex\n                  \n                  \u2061\n                  \n                    (\n                    \n                      \n                        \u03b6\n                        +\n                        \n                          \u03b6\n                          ^\n                        \n                        +\n                        \n                          \u03b6\n                          offs\n                        \n                      \n                      ,\n                      x\n                    \n                    )\n                  \n                \n                \u2062\n                \n                  \u2146\n                  \n                    \u03b6\n                    ^\n                  \n                \n              \n            \n          \n        \n        ,\n      \n    \n    \n      \n        (\n        57\n        )\n      \n    \n  \n\n\n\n\nwhere the optional offset \u03b6offs preserves the zero position so that it coincides with that of a Fourier transformation implementation.",
        "The number of frames or buckets for the convolution kernel \u0128pal.inl in varies depending on the coherence length of the instrument, the scan rate (nm/frame) and the pattern threshold parameter. For example, with the pattern threshold set to 20%, the \u0394\u03b6 for the window w spans the width of the system characterization signal envelope to the 20% of levels on either side of maximum. For a 100-nm bandwidth, 560-nm center wavelength and an 80-nm/frame scan rate, the kernel \u0128pat.inl spans approximately 23 buckets. Upon increasing the pattern threshold to 40%, \u0128pat.inl decreases to 17 buckets.",
        "A merit function can be determined as follows:",
        "\u03a0\n            inline\n          \n          \u2061\n          \n            (\n            \n              \u03b6\n              ,\n              x\n            \n            )\n          \n        \n        =\n        \n          \n            \n              \uf603\n              \n                I\n                \u2061\n                \n                  (\n                  \n                    \u03b6\n                    ,\n                    x\n                  \n                  )\n                \n              \n              \uf604\n            \n            2\n          \n          \n            \n              \u2329\n              \n                m\n                pat\n                2\n              \n              \u232a\n            \n            \u2062\n            \n              \u2329\n              \n                m\n                ex\n                2\n              \n              \u232a\n            \n          \n        \n      \n    \n    \n      \n        (\n        58\n        )\n      \n    \n  \n\n\n\n\nwhere {tilde under (I)} is the in-line, partially complex correlation defined by Eq.(57). The normalization can be determined from a selected, arbitrary single strength, e.g., a signal just under saturation. For example, such a signal may be one-half the number of digital grey levels in the detector:",
        "\u2329\n          \n            m\n            ex\n            2\n          \n          \u232a\n        \n        =\n        \n          \n            1\n            N\n          \n          \u2062\n          \n            \n              (\n              \n                greylevels\n                2\n              \n              )\n            \n            2\n          \n          \u2062\n          \n            \n              \u222b\n              \n                -\n                \u221e\n              \n              \u221e\n            \n            \u2062\n            \n              \n                w\n                \u2061\n                \n                  (\n                  \n                    \u03b6\n                    ^\n                  \n                  )\n                \n              \n              \u2062\n              \n                \n              \n              \u2062\n              \n                \n                  \u2146\n                  \n                    \u03b6\n                    ^\n                  \n                \n                .\n              \n            \n          \n        \n      \n    \n    \n      \n        (\n        59\n        )",
        "The merit function oscillates with interference signal strength, even if the quality of the pattern match does not change. In some embodiments, determination of the merit function operates similarly to the application of a PSI algorithm (defined by the conjugate kernel \u0128*pat.inl) proceeding step by step through an interference signal Iex. This can be illustrated by rewriting the partially complex correlation of Eq.(57) in terms of discrete data:",
        "I\n              z\n            \n            \u223c\n          \n          \n            \n          \n        \n        =\n        \n          \n            \n              \u2211\n              \n                z\n                ^\n              \n              \n                \n              \n            \n            \u2062\n            \n              \n            \n            \u2062\n            \n              \n                \n                  c\n                  \n                    z\n                    ^\n                  \n                \n                \u2061\n                \n                  (\n                  \n                    I\n                    ex\n                  \n                  )\n                \n              \n              \n                z\n                ^\n              \n            \n          \n          +\n          \n            i\n            \u2062\n            \n              \n                \u2211\n                \n                  z\n                  ^\n                \n                \n                  \n                \n              \n              \u2062\n              \n                \n              \n              \u2062\n              \n                \n                  \n                    s\n                    \n                      z\n                      ^\n                    \n                  \n                  \u2061\n                  \n                    (\n                    \n                      I\n                      ex\n                    \n                    )\n                  \n                \n                \n                  z\n                  ^\n                \n              \n            \n          \n        \n      \n    \n    \n      \n        (\n        60\n        )\n      \n    \n  \n\n\n\n\nwith algorithm coefficients defined as:\n\nS{circumflex over (Z)}=\u2212Im{(\u0128pat.inl){circumflex over (Z)}}\u2003\u2003(61)\n\nc{circumflex over (Z)}=Re{(\u0128pat.inl){circumflex over (Z)}}\u2003\u2003(62)\n\nTherefore:",
        "\uf603\n            \n              \n                I\n                \u223c\n              \n              z\n            \n            \uf604\n          \n          =\n          \n            \n              \n                \n                  [\n                  \n                    \n                      \u2211\n                      \n                        z\n                        ^\n                      \n                      \n                        \n                      \n                    \n                    \u2062\n                    \n                      \n                    \n                    \u2062\n                    \n                      \n                        \n                          s\n                          \n                            z\n                            ^\n                          \n                        \n                        \u2061\n                        \n                          (\n                          \n                            I\n                            ex\n                          \n                          )\n                        \n                      \n                      \n                        z\n                        ^\n                      \n                    \n                  \n                  ]\n                \n                2\n              \n              +\n              \n                \n                  [\n                  \n                    \n                      \u2211\n                      \n                        z\n                        ^\n                      \n                      \n                        \n                      \n                    \n                    \u2062\n                    \n                      \n                    \n                    \u2062\n                    \n                      \n                        \n                          c\n                          \n                            z\n                            ^\n                          \n                        \n                        \u2061\n                        \n                          (\n                          \n                            I\n                            ex\n                          \n                          )\n                        \n                      \n                      \n                        z\n                        ^\n                      \n                    \n                  \n                  ]\n                \n                2\n              \n            \n          \n        \n        \u2062\n        \n          \n\n        \n        \u2062\n        and\n      \n    \n    \n      \n        (\n        63\n        )\n      \n    \n  \n  \n    \n      \n        \n          arg\n          \u2062\n          \n            {\n            \n              \n                I\n                \u223c\n              \n              z\n            \n            }\n          \n        \n        =\n        \n          arctan\n          \u2062\n          \n            \n              {\n              \n                \n                  \n                    \u2211\n                    \n                      z\n                      ^\n                    \n                    \n                      \n                    \n                  \n                  \u2062\n                  \n                    \n                  \n                  \u2062\n                  \n                    \n                      \n                        s\n                        \n                          z\n                          ^\n                        \n                      \n                      \u2061\n                      \n                        (\n                        \n                          I\n                          ex\n                        \n                        )\n                      \n                    \n                    \n                      z\n                      ^\n                    \n                  \n                \n                \n                  \n                    \u2211\n                    \n                      z\n                      ^\n                    \n                    \n                      \n                    \n                  \n                  \u2062\n                  \n                    \n                  \n                  \u2062\n                  \n                    \n                      \n                        c\n                        \n                          z\n                          ^\n                        \n                      \n                      \u2061\n                      \n                        (\n                        \n                          I\n                          ex\n                        \n                        )\n                      \n                    \n                    \n                      z\n                      ^\n                    \n                  \n                \n              \n              }\n            \n            \u00b7\n          \n        \n      \n    \n    \n      \n        (\n        64\n        )",
        "The merit function based on the partially complex correlation can be searched to identify locations that correspond to a region of interest, e.g., to an interface of an object. For example, to determine a scan position corresponding to an outer surface of an object, the merit function can be searched for the first peak from the right (assuming that scan positions to the right correspond to increased distances from the object). To determine a scan position corresponding to an outer surface of a film, the merit function can be searched for the first peak from the right assuming that at least two merit peaks are present. Film thickness can be determined from the scan positions corresponding to the strongest two peaks of the merit function.",
        "In some embodiments, the merit function approximates the square of the normalized signal strength. Accordingly, the square root of the merit function can be searched for peaks:",
        "m\n        ex\n      \n      \u2061\n      \n        (\n        \n          \u03b6\n          ,\n          x\n        \n        )\n      \n    \n    \u2248\n    \n      \n        greylevels\n        2\n      \n      \u2062\n      \n        \n          \n            \u03a0\n            inline\n          \n          \u2061\n          \n            (\n            \n              \u03b6\n              ,\n              x\n            \n            )\n          \n        \n      \n    \n  \n  ,",
        "The merit function can be reduced, with all values below MinMod2 set to zero. The reduced merit function is then searched for peaks. Once a peak is located, more precise information can be obtained by interpolation between neighboring discrete scan positions using the original \u03a0inline merit function.",
        "The merit function \u03a0 differs from a simple signal strength or envelope calculation in that it evaluates how well the experimental signal matches the interference pattern template \u0128pat within the window w. For this reason, it requires normalization to the signal magnitude.",
        "Processing And Processor Code",
        "Any of the computer analysis methods described above can be implemented in hardware or software, or a combination of both. The methods can be implemented in computer programs using standard programming techniques following the method and figures described herein. Program code is applied to input data to perform the functions described herein and generate output information. The output information is applied to one or more output devices such as a display monitor. Each program may be implemented in a high level procedural or object oriented programming language to communicate with a computer system. However, the programs can be implemented in assembly or machine language, if desired. In any case, the language can be a compiled or interpreted language. Moreover, the program can run on dedicated integrated circuits preprogrammed for that purpose.",
        "Each such computer program is preferably stored on a storage medium or device (e.g., ROM or magnetic diskette) readable by a general or special purpose programmable computer, for configuring and operating the computer when the storage media or device is read by the computer to perform the procedures described herein. The computer program can also reside in cache or main memory during program execution. The analysis method can also be implemented as a computer-readable storage medium, configured with a computer program, where the storage medium so configured causes a computer to operate in a specific and predefined manner to perform the functions described herein.",
        "Exemplary Applications",
        "The low coherence interferometry methods and systems described above may used for any of the following surface analysis problems: simple thin films; multilayer thin films; sharp edges and surface features that diffract or otherwise generate complex interference effects; unresolved surface roughness; unresolved surface features, for example, a sub-wavelength width groove on an otherwise smooth surface; dissimilar materials; polarization-dependent properties of the surface; and deflections, vibrations or motions of the surface or deformable surface features that result in incident-angle dependent perturbations of the interference phenomenon. For the case of thin films, the variable parameter of interest may be the film thickness, the refractive index of the film, the refractive index of the substrate, or some combination thereof. Exemplary applications including objects and devices exhibit such features are discussed next.",
        "Photolithography",
        "In many microelectronics applications, photolithography is used to pattern a layer of photoresist overlying a substrate, e.g., a silicon wafer. Referring to FIGS. 10a and 10b, an object 30 includes a substrate, e.g., a wafer, 32 and an overlying layer, e.g., photoresist layer 34. Object 30 includes a plurality of interfaces as occur between materials of different refractive index. For example, an object-surroundings interface 38 is defined where an outer surface 39 of photoresist layer 34 contacts the environment surrounding object 30, e.g., liquid, air, other gas, or vacuum. A substrate-layer interface 36 is defined between a surface 35 of wafer 32 and a bottom surface 37 of photoresist layer 34. Surface 35 of the wafer may include a plurality of patterned features 29. Some of these features have the same height as adjacent portions of the substrate but a different refractive index. Other features may extend upward or downward relative to adjacent portions of the substrate. Accordingly, interface 36 may exhibit a complex, varying topography underlying the outer surface of the photoresist.",
        "A photolithography apparatus images a pattern onto the object. For example, the pattern may correspond with elements of an electronic circuit (or the negative of the circuit). After imaging, portions of the photoresist are removed revealing the substrate underlying the removed photoresist. The revealed substrate can be etched, covered with deposited material, or otherwise modified. Remaining photoresist protects other portions of the substrate from such modification.",
        "To increase manufacturing efficiencies, more than one device is sometimes prepared from a single wafer. The devices may be the same or different. Each device requires that a subset of the wafer be imaged with a pattern. In some cases, the pattern is sequentially imaged onto different subsets. Sequential imaging can be performed for several reasons. Optical aberrations can prevent achieving adequate pattern focus quality over larger areas of the wafer. Even in the absence of optical aberrations, the spatial properties of the wafer and photoresist may also prevent achieving adequate pattern focus over large areas of the wafer. Aspects of the relationship between the spatial properties of the wafer/resist and focus quality are discussed next.",
        "Referring to back to FIG. 10b, object 30 is shown with a number N subsets 40i, each smaller than a total area 41 the object to be imaged. Within each subset 40i, spatial property variations, e.g., height and slope variations of the wafer or photoresist, are typically smaller than when taken over the total area 41. Nonetheless, the wafer or photoresist of different subsets 40i typically have different heights and slopes. For example, layer 34 exhibits thicknesses \u0394t1 and \u0394t2, which vary the height and slope of surface 39 (FIG. 10a). Thus, each subset of the object may have a different spatial relationship with the photolithography imager. The quality of focus is related to the spatial relationship, e.g., the distance between the object and the photolithography imager. Bringing different subsets of the object into proper focus may require relative repositioning of the object and imager. Because of the object height and slope variations, proper subset focus cannot be achieved solely by determining the position and orientation of the object with respect to a portion of the object that is remote to the imaged subset, e.g., a side 43 of the object.",
        "Proper focus can be achieved by determining a spatial property of an object within a subset of the object to be imaged (or otherwise processed). Once the position of the subset has been determined, the object (and/or a portion of the photolithography imager) can be moved, e.g., translated, rotated, and/or tilted, to modify the position of the subset with respect to a reference, e.g., a portion of the photolithography imager. The determination and movement (if necessary) can be repeated for each subset to be imaged.",
        "The determination of the spatial property of the subset can include determining a position and/or height of one or more points of an outer surface of a thin layer of the object, the one or more points lying within the subset of the object to be imaged. For example, the position and orientation of the outer surface 39 of subset 402 (FIG. 1a) can be determined based upon the positions of points 421-423 within the subset. The determination of the spatial property of the subset to be imaged can include using an interferometer to illuminate the subset with light and detecting an interference signal including light reflected from the illuminated subset. In some embodiments, a plurality of subsets are simultaneously imaged with light to obtain a plurality of interference signals. Each interference signal is indicative of one or more spatial properties of a subset. Thus, the interference signals can be used to prepare an image indicative of the topography of the object over a plurality of the subsets. During photolithography of the subsets, the wafer is positioned based upon the topography of the individual subsets as determined from the plurality of interference signals. Hence, each subset can be positioned for optimum focus with respect to the photolithography apparatus.",
        "Detecting an interference signal from each subset of an object to be imaged can include detecting light reflected from the subset and reference light over an OPD range that is at least as large as a coherence length of the detected light. For example, the light may be detected at least over its coherence length. In some embodiments, the interferometer is configured so that the light reflected from the illuminated subset is dominated by light reflected from either an outer interface (such as outer surface 39) or an inner interface (such as interface 36). In some embodiments, a spatial property of an object is determined based on only a portion of the interference signal. For example, if the interference signal includes two or more overlapping interference patterns, a spatial property of the object can be determined based upon a portion of one of the interference patterns that is dominated by contributions from a single interface of the object.",
        "Copper Interconnect Structures And Chemical Mechanical Polishing",
        "It is becoming common among chip makers to use the so-called \u2018dual damascene copper\u2019 process to fabricate electrical interconnects between different parts of a chip. This is an example of a process which may be effectively characterized using a suitable surface topography system. The dual damascene process may be considered to have six parts: (1) an interlayer dielectric (ILD) deposition, in which a layer of dielectric material (such as a polymer, or glass) is deposited onto the surface of a wafer (containing a plurality of individual chips); (2) chemical mechanical polishing (CMP), in which the dielectric layer is polished so as to create a smooth surface, suitable for precision optical lithography, (3) a combination of lithographic patterning and reactive ion etching steps, in which a complex network is created comprising narrow trenches running parallel to the wafer surface and small vias running from the bottom of the trenches to a lower (previously defined) electrically conducting layer, (4) a combination of metal deposition steps which result in the deposition of copper trenches and vias, (5) a dielectric deposition step in which a dielectric is applied over the copper trenches and vias, and (6) a final CMP step in which the excess copper is removed, leaving a network of copper filled trenches (and possibly vias) surrounded by dielectric material.",
        "Referring to FIG. 11a, a device 500 is exemplary of the a film structure resulting from the deposition of a dielectric 504 over copper features 502 deposited on a substrate 501. The dielectric 504 has a non-uniform outer surface 506 exhibiting height variations therealong. Interference signals obtained from device 500 can include interference patterns resulting from surface 506, an interface 508 between copper features 502 and dielectric 504, and an interface 510 between substrate 501 and dielectric 504. The device 500 may include a plurality of other features that also generate interference patterns.",
        "Referring to FIG. 11b, a device 500\u2032 illustrates the state of device 500 after the final CMP step. The upper surface 506 has been planarized to a surface 506\u2032, and interface 508 may now be exposed to the surroundings. Interface 510 at the substrate surface remains intact. Device performance and uniformity depends critically on monitoring the planarization of surface 504. It is important to appreciate that the polishing rate, and therefore the remaining copper (and dielectric) thickness after polishing, depends strongly and in a complex manner on the polishing conditions (such as the pad pressure and polishing slurry composition), as well as on the local detailed arrangement (i.e., orientation, proximity and shape) of copper and surrounding dielectric regions. Hence, portions of surface 506 over copper elements 502 may etch at different rates than other portions of surface 506. Additionally, once interface 508 of copper elements 502 is exposed, the dielectric and copper elements may exhibit different etch rates.",
        "This \u2018position dependent polishing rate\u2019 is known to give rise to variable surface topography on many lateral length scales. For example, it may mean that chips located closer to the edge of a wafer on aggregate are polished more rapidly than those located close to the center, creating copper regions which are thinner than desired near the edges, and thicker than desired at the center. This is an example of a \u2018wafer scale\u2019 process nonuniformity\u2014i.e., one occurring on length scale comparable to the wafer diameter. It is also known that regions which have a high density of copper trenches polish at a higher rate than nearby regions with low copper line densities. This leads to a phenomenon known as \u2018CMP induced erosion\u2019 in the high copper density regions. This is an example of a \u2018chip scale\u2019 process non-uniformity\u2014i.e., one occurring on a length scale comparable to (and sometimes much less than) the linear dimensions of a single chip. Another type of chip scale nonuniformity, known as \u2018dishing\u2019, occurs within single copper filled trench regions (which tend to polish at a higher rate than the surrounding dielectric material). For trenches greater than a few microns in width dishing may become severe with the result that affected lines later exhibit excessive electrical resistance, leading to a chip failure.",
        "CMP induced wafer and chip scale process nonuniformities are inherently difficult to predict, and they are subject to change over time as conditions within the CMP processing system evolve. To effectively monitor, and suitably adjust the process conditions for the purpose of ensuring that any nonuniformities remain within acceptable limits, it is important for process engineers to make frequent non-contact surface topography measurements on chips at a large number and wide variety of locations. This is possible using embodiments of the interferometry methods and systems described above.",
        "In some embodiments one or more spatial properties, e.g., the topography of surface 506 and/or the thickness of dielectric 504, are monitored by obtaining low coherence interference signals from the structure before and/or during CMP. Based on the spatial properties, the polishing conditions can be changed to achieve the desired planar surface 506\u2032. For example, the pad pressure, pad pressure distribution, polishing agent characteristics, solvent composition and flow, and other conditions can be determined based on the spatial properties. After some period of polishing, the spatial property can again be determined and the polishing conditions changed as needed. The topography and/or thickness is also indicative of the end-point at which, e.g., surface 504\u2032 is achieved. Thus, the low coherence interference signals can be used to avoid depressions caused by over polishing different regions of the object. The low coherence interference methods and systems are advantageous in this respect because spatial properties of the device, e.g., the relative heights of the surface of the dielectric (a) over copper elements 502 and (b) over substrate surface 510 but adjacent copper elements 502 can be determined even in the presence of the multiple interfaces.",
        "Solder Bump Processing",
        "Referring to FIGS. 12a and 12b, a structure 550 is exemplary of a structure produced during solder bump processing. Structure 550 includes a substrate 551, regions 502 non-wettable by solder, and a region 503 wettable by solder. Regions 502 have an outer surface 507. Region 503 has an outer surface 509. Accordingly, an interface 505 is formed between regions 502 and substrate 501.",
        "During processing a mass of solder 504 is positioned in contact with wettable region 503. Upon flowing the solder, the solder forms a secure contact with the wettable region 503. Adjacent non-wettable regions 502 act like a dam preventing the flowed solder from undesirable migration about the structure. It is desirable to know spatial properties of the structure including the relative heights of surfaces 507, 509 and the dimensions of solder 504 relative to surface 502. As can be determined from other discussions herein, structure 550 includes a plurality of interfaces that may each result in an interference pattern. Overlap between the interference patterns prevents accurate determinate of the spatial properties using known interference techniques. Application of the systems and methods discussed herein allow the spatial properties to be determined.",
        "Spatial properties determined from structure 550 can be used to change manufacturing conditions, such as deposition times for layers 502,503 and the amount of solder 504 used per area of region 503. Additionally, heating conditions used to flow the solder can also be changed based on the spatial properties to achieve adequate flow and or prevent migration of the solder.",
        "Liquid Crystal Displays",
        "Referring to FIG. 13, a passive matrix LCD 450 is composed of several layers. The main parts are two glass plates 452,453 connected by seals 454. A polarizer 456 is applied to the front glass plate 453 in order to polarize incoming light in a single direction. The polarized light passes through the front glass plate 453. An Indium Tin Oxide (ITO) layer 458 is used as an electrode. A passivation layer 460, sometimes called hard coat layer, based on SiOx is coated over the ITO 458 to electrically insulate the surface. Polyimide 462 is printed over the passivation layer 460 to align the liquid crystal fluid 464. The liquid crystal fluid is sensitive to electric fields and changes orientation when an electric field is applied. The liquid crystal is also optically active and rotates the polarization direction of the incoming light. The cell gap \u0394g, i.e., thickness of the liquid crystal layer 464, is determined by spacers 466, which keep the two glass plates 452,453 at a fixed distance. When there is no electric potential from the front plate 453 to the rear plate 452, the polarized light is rotated 90\u00b0 as it passes through the liquid crystal layer 464. When an electric potential is applied from one plate to the other plate the light is not rotated. After the light has passed through the liquid crystal layer 464, it passes through another polyimide layer 468, another hard coat layer 470, a rear ITO electrode 472, and the rear glass plate 452. Upon reaching a rear polarizer 474, the light either transmitted through or absorbed, depending on whether or not it has been rotated 90\u00b0. The cell 450 may include filters 476 or other colorizing elements to provide a color display.",
        "The cell gap \u0394g determines to a great extent the optoelectrical properties of the LCD, e.g., the contrast ratio and brightness. Cell gap control during manufacturing is critical to obtaining uniform, quality displays. The actual cell gap may differ from the dimensions of spacers 466 because, during assembly, pressure or vacuum is applied to introduce the liquid crystal medium, seals 454 cure and may change dimensions, and the added liquid crystal medium generates capillary forces between plates 452,453. Both before and after adding the liquid crystal medium 464, surfaces 480,482 of plates 452,453 reflect light that results in an interference pattern indicative of the cell gap \u0394g. The low coherence nature of the interference signal either itself or in combination with the described interference signal processing techniques can be used to monitor properties of the cell including the cell gap \u0394g during manufacture even in the presence of interfaces formed by other layers of the cell.",
        "An exemplary method can include obtaining a low coherence interference signal including interference patterns indicative of the cell gap \u0394g prior to adding layer 464. The cell gap (or other spatial property of the cell) is determined from the interference patterns and can be compared to a specified value. Manufacturing conditions, e.g., a pressure or vacuum applied to plates 452,453 can be changed to modify the cell gap \u0394g if a difference between the specified value and the determined cell gap exceeds tolerances. This process can be repeated until achieving the desired cell gap. Liquid crystal medium is then introduced into the cell. The amount of liquid crystal medium to be added can be determined from the measured spatial property of the cell. This can avoid over- or underfilling the cell. The filling process can also be monitored by observing interference signals from the surfaces 480,482. Once the cell has been filed, additional low coherence interference patterns are obtained to monitor the cell gap \u0394g (or other spatial property). Again, the manufacturing conditions can be changed so that the cell gap is maintained or brought within tolerances.",
        "Laser Scribing and Cutting",
        "Lasers can be used to scribe objects in preparation for separating different, concurrently manufactured structures, e.g., microelectronics structures. The quality of separation is related to the scribing conditions, e.g., laser focus size, laser power, translation rate of the object, and scribe depth. Because the density of features of the structure may be large, the scribe lines may be adjacent thin film or layers of the structures. Interfaces associated with the thin film or layers may create interference patterns that appear when interferometry is used to determine the scribe depth. The methods and systems described herein can be used to determine the scribe depth even in the presence of such adjacent films or layers.",
        "An exemplary method can include scribing one or more electronic structures and separating the structures along the scribe lines. Before and/or after separation, low coherence interference signals can be used to determine the depth of scribe. Other scribing conditions are known, e.g., laser spot size, laser power, translation rate. The scribe depth can be determined from the interference signals. The quality of separation as a function of the scribing conditions, including the scribe depth, can be determined by evaluating the separated structures. Based on such determinations, the scribing conditions necessary to achieve a desired separation quality can be determined. During continued manufacturing, low coherence interference signals can be obtained from scribed regions to monitor the process. Scribing conditions can be changed to maintain or bring the scribe properties within tolerances.",
        "Determining a spatial property of a measurement object is further described the context of the following non-limiting examples.",
        "1. Determining A Spatial Property of A Single-Surface Measurement Object",
        "Referring to back to FIG. 1, interference signal 150 is but one of a total 101 interference signals representing a linear trace across the object surface. For convenience, the remaining 100 interference signals are not shown. The silicon dioxide object surface has an approximately spherical profile with PV=600 nm. The irradiation wavelength is 550 nm with a bandwidth of 100 nm. The bandwidth is Gaussian in wavenumber. The numerical aperture is 0.01 for normal incidence, collimated light. Each interference signal has a full scale digital resolution of 256 grey scale steps. The average signal strength is 20 grey levels amplitude AC above 65 grey levels DC. The signals have random noise having a standard deviation of 2 grey levels.",
        "The 101 interference signals are transformed to an inverse domain using the Fourier transform. Referring to FIG. 14a, the magnitude of the Fourier transform 205 of interference signal 200 has a peak located at about 3.7 cycles per micron of PLD. The transformed interference signals are used to prepare a transformed template including contributions from all of the transformed interference signals. A region of interest 202 is shown as centered about the peak.",
        "Referring to FIG. 14b, a transformed interference signal 204 that includes contributions from the 101 transformed interference signals has a substantially higher signal to noise ratio (S/N) than each transformed interference signals as can be seen upon comparing FIGS. 10a and 10b.",
        "Referring to FIG. 15, a template 210 includes a plurality of fringes that decay according to an envelope 212. Template 210 has a substantially higher S/N than each interference signal as can be seen upon comparing FIGS. 1 and 11. Template 212 further differs from the 101 measurement interference signals (e.g., set 150) in that contributions from the object surface height, phase differences between different interference signals, and the DC bias have been removed from the template.",
        "Referring back to FIG. 2, a windowed template 215 represents the product of template 212 and a window function 217, with values of template 212 outside of the window function set to zero.",
        "Referring to FIG. 16, a function 220 is given by the product of the amplitude of the AC portion of the oscillating signal and the envelope describing the decay of the fringes (ACexmex) of interference signal 200 of FIG. 1.",
        "Referring to FIG. 17, a merit function 230 obtained by complex cross-correlation of the windowed template of FIG. 2 and the interference signal 150 of FIG. 1.",
        "Referring to FIG. 18, the surface height of the measurement object is shown as a function of lateral position across the object surface as determined from the template 215 and 101 interference signals using a coherence profile 240 h\u0398 approach and phase profile 242 h\u03b8 approach.",
        "2. Determining A Spatial Property of A Measurement Object With Thin Film",
        "Referring to FIG. 19, a reference interference signal 300 is one of 101 reference interference signals obtained as from the same reference object used in Example 1.",
        "Referring to FIGS. 20a and 20b, the 101 reference interference signals are transformed to an inverse domain by Fourier transformation. The magnitude of the Fourier transform 305 of interference signal 300 has a peak located at about 3.7 cycles per micron of OPD. A transformed interference signal 304 that includes contributions from the magnitudes of the 101 transformed interference signals has a substantially higher signal to noise ratio (S/N) than each transformed interference signals as can be seen upon comparing FIGS. 20a and 20b.",
        "A template (not shown) having characteristics similar to template 212 of FIG. 15 is prepared from the 101 transformed interference signals. Referring to FIG. 21, an asymmetric windowed template 315 represents the product of the template and a window function 317, with values of the template outside of the window function 317 set to zero. The left boundary of the template corresponds to the peak of the envelope that determines the decay of the fringes.",
        "Referring to FIG. 22, a measurement interference signal 400 is obtained from a measurement object including silicon dioxide film on a silicon substrate (SiO2 on Si). The substrate of the object is the same as that used to acquire the reference interference signals, i.e., the substrate is the same as the measurement object used in Example 1. The film thickness ranges from 900 nm at edges to 1500 nm in the middle (at pixel 50). A linear strip of 101 measurement interference signals are acquired under the same conditions as for Example 1.",
        "As seen in FIG. 22, interference signal 400 includes a first and second interference patterns 402,404 respectively resulting from the substrate-film interface and the film-air interface. The interference patterns are partially overlapped.",
        "Referring to FIG. 23, a function 420 is given by the product of the amplitude of the AC portion of the oscillating signal and the envelopes describing the decays of the fringes of the first and second interference patterns 402,404 interference signals 400 of FIG. 22.",
        "Referring to FIG. 24, a merit function 425 includes first and second peaks 427,429 as a function of scan position. Merit function 425 is obtained by cross-correlating the asymmetric template of FIG. 22 with the interference signal of FIG. 23. Each point of the cross-correlation is normalized as discussed with respect to Eq. 30. A line 431 indicates the location of the first peak position \u03b6best with respect to scan position. The first peak position \u03b6best indicates the location of the film-air interface.",
        "Referring to FIG. 25 height profiles for the film-air interface are shown. A profile 440 h\u0398 (coherence) is determined from the using a coherence approach and a height profile 442 h\u03b8 (phase) is determined using a phase approach.",
        "Other aspects, features, and embodiments are within the scope of the following claims."
    ],
    "citations": [
        "4355903",
        "4576479",
        "4618262",
        "4660980",
        "4818110",
        "4999014",
        "5042949",
        "5042951",
        "5112129",
        "5129724",
        "5133601",
        "5135307",
        "5173746",
        "5301010",
        "5398113",
        "5459564",
        "5483064",
        "5555471",
        "5587792",
        "5589938",
        "5602643",
        "5774224",
        "5900633",
        "6242739",
        "6249351",
        "H1972",
        "6259521",
        "6377349",
        "6381009",
        "6417109",
        "6483580",
        "6500591",
        "6507405",
        "6545761",
        "6545763",
        "6590656",
        "6597460",
        "6611330",
        "6633389",
        "6633831",
        "6636322",
        "6694284",
        "6721094",
        "6856384",
        "6891627",
        "6925860",
        "6940604",
        "6985232",
        "6999180",
        "7088451",
        "7119909",
        "2002/0135775",
        "2002/0196450",
        "2003/0112444",
        "2004/0085544",
        "2004/0185582",
        "2004/0189999",
        "2004/0233442",
        "2004/0233444",
        "2005/0057757",
        "2005/0068540",
        "2005/0073692",
        "2005/0078318",
        "2005/0078319",
        "2005/0088663",
        "2005/0146727",
        "2005/0225769",
        "2005/0237534",
        "2006/0012582",
        "4108944",
        "4309056",
        "0 397 388",
        "0 549 166",
        "0 617 255",
        "0 929 094",
        "2385417",
        "WO 97/44633",
        "WO 02/082008",
        "WO 03/062802",
        "WO 2004/023071"
    ],
    "us_classification": "356497",
    "international_classifications": [
        {
            "classification_level": "A",
            "section": "G",
            "classification_class": "01",
            "subclass": "B",
            "main_group": "11",
            "subgroup": "02"
        }
    ]
}