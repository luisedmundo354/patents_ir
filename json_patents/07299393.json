{
    "title": "Microprocessor with trace module",
    "abstract": "A processor-based device includes a processor, a trace module, a plurality of data input/output pins, and an input/output interface circuit. The input/output interface circuit, when operating in a trace mode, externally outputs trace data signals from the trace module to an external device via at least one of the data input/output pins. When in a normal mode, the input/output interface circuit transfers data from the processor core to the data input/output pins and transfers data received at the data input/output pins to the processor core. In this manner, the processor-based device according to the present invention can output trace data using normal data input/output pins without the need for additional pins for outputting the trace data.",
    "inventors": [
        "Kwon"
    ],
    "document_number": "07299393",
    "publication_date": "20071120",
    "assignees": [
        "Samsung Electronics Co., Ltd."
    ],
    "claims": [
        {
            "claim_number": "CLM-00001",
            "preamble": "1. A semiconductor device including pins that permit connection to at least one external device, comprising:",
            "components": [
                {
                    "component": "an internal core that receives and generates data signals;",
                    "subcomponents": []
                },
                {
                    "component": "a trace module that generates trace data signals;",
                    "subcomponents": []
                },
                {
                    "component": "a plurality of data input/output pins which, when the semiconductor device is operating in a normal mode, input and output the data signals from and to the at least one external device; and",
                    "subcomponents": []
                },
                {
                    "component": "a plurality of logic circuits, each corresponding to one of the plurality of data input/output pins, and each, when the semiconductor device is operating in a trace mode, externally outputs one of the trace data signals from the trace module to the at least one external device via the corresponding one of the plurality of data input/output pins in response to a plurality of trace output pin select signals.",
                    "subcomponents": []
                }
            ]
        },
        {
            "claim_number": "CLM-00002",
            "preamble": "2. The semiconductor device of claim 1 , further comprising:",
            "components": [
                {
                    "component": "a serial port which receives standardized serial signals; and",
                    "subcomponents": []
                },
                {
                    "component": "a test access port (TAP) controller which generates a mode select signal and the plurality of trace output pin select signals in response to the serial signals received at the serial port, wherein the mode select signal indicates whether a current operating mode of the device is the trace mode or the normal mode.",
                    "subcomponents": []
                }
            ]
        },
        {
            "claim_number": "CLM-00003",
            "preamble": "3. The semiconductor device of claim 2 , wherein the trace module activates a trace output enable signal when the mode select signal indicates that the current operating mode is the trace mode.",
            "components": []
        },
        {
            "claim_number": "CLM-00004",
            "preamble": "4. The semiconductor device of claim 3 , wherein each of plurality of logic circuits selects one of the trace data signals from the trace module and transfers the selected one of the trace data signals to a corresponding data input/output pin when the corresponding trace output pin select signal and the corresponding trace output enable signal are activated.",
            "components": []
        },
        {
            "claim_number": "CLM-00005",
            "preamble": "5. The semiconductor device of claim 2 , wherein the serial port is essentially compliant with the IEEE-1149.1-1990 JTAG interface standard or other similar standard.",
            "components": []
        },
        {
            "claim_number": "CLM-00006",
            "preamble": "6. The semiconductor device of claim 1 , wherein the plurality of logic circuits, when the semiconductor device is operating in the normal mode, transfer data from the internal core to the plurality of data input/output pins and transfer data received at the data input/output pins to the internal core.",
            "components": []
        },
        {
            "claim_number": "CLM-00007",
            "preamble": "7. The semiconductor device of claim 1 , wherein the internal core generates an output enable signal, and wherein the plurality of logic circuits each transfer data from the internal core to the corresponding data input/output pin when the mode select signal indicates that the current operating mode is the normal mode and when the output enable signal is activated.",
            "components": []
        },
        {
            "claim_number": "CLM-00008",
            "preamble": "8. The semiconductor device of claim 7 , wherein the plurality of logic circuits each transfer data received from the data input/output pins to the internal core when the mode select signal indicates that the current operating mode is the normal mode and when the output enable signal is inactivated.",
            "components": []
        },
        {
            "claim_number": "CLM-00009",
            "preamble": "9. A method of operating a semiconductor device including pins that permit connection to at least one external device, comprising:",
            "components": [
                {
                    "component": "receiving and generating data signals at an internal core;",
                    "subcomponents": []
                },
                {
                    "component": "generating trace data signals at a trace module;",
                    "subcomponents": []
                },
                {
                    "component": "inputting and outputting the data signals from and to the at least one external device at a plurality of data input/output pins when the semiconductor device is operating in a normal mode; and",
                    "subcomponents": []
                },
                {
                    "component": "externally outputting one of the trace data signals from the trace module to the at least one external device via the corresponding one of the plurality of data input/output pins in response to a plurality of trace output pin select signals at a plurality of logic circuits, each logic circuit corresponding to one of the plurality of data input/output pins, when the semiconductor device is operating in a trace mode.",
                    "subcomponents": []
                }
            ]
        },
        {
            "claim_number": "CLM-00010",
            "preamble": "10. The method of claim 9 , further comprising:",
            "components": [
                {
                    "component": "receiving standardized serial signals at a serial port; and",
                    "subcomponents": []
                },
                {
                    "component": "generating a mode select signal and the plurality of trace output pin select signals at a test access port (TAP) controller in response to the serial signals received at the serial port, wherein the mode select signal indicates whether a current operating mode of the device is the trace mode or the normal mode.",
                    "subcomponents": []
                }
            ]
        },
        {
            "claim_number": "CLM-00011",
            "preamble": "11. The method of claim 10 , wherein the plurality of logic circuits, when the semiconductor device is operating in the normal mode, transfer data from the internal core to the plurality of data input/output pins and transfer data received at the data input/output pins to the internal core.",
            "components": []
        },
        {
            "claim_number": "CLM-00012",
            "preamble": "12. The method of claim 10 , wherein the trace module activates a trace output enable signal when the mode select signal indicates that the current operating mode is the trace mode.",
            "components": []
        },
        {
            "claim_number": "CLM-00013",
            "preamble": "13. The method of claim 12 , wherein each of the plurality of logic circuits selects one of the trace data signals from the trace module and transfers the selected one of the trace data signals to a corresponding data input/output pin when the corresponding trace output pin select signal and the corresponding trace output enable signal are activated.",
            "components": []
        },
        {
            "claim_number": "CLM-00014",
            "preamble": "14. The method of claim 10 , wherein the serial port is essentially compliant with the IEEE-1149.1-1990 JTAG interface standard or other similar standard.",
            "components": []
        },
        {
            "claim_number": "CLM-00015",
            "preamble": "15. The method of claim 10 , wherein the internal core generates an output enable signal, and wherein the plurality of logic circuits each transfer data from the internal core to the corresponding data input/output pin when the mode select signal indicates that the current operating mode is the normal mode and when the output enable signal is activated.",
            "components": []
        },
        {
            "claim_number": "CLM-00016",
            "preamble": "16. The method of claim 15 , wherein the plurality of logic circuits each transfer data received from the data input/output pins to the internal core when the mode select signal indicates that the current operating mode is the normal mode and when the output enable signal is inactivated.",
            "components": []
        }
    ],
    "description": [
        "This application is a continuation application of U.S. application Ser. No. 10/412,979, filed on Apr. 14, 2003 now U.S. Pat. No. 7,055,078, which relies for priority upon Korean Patent Application No. 2002-34814, filed on Jun. 21, 2002, the contents of which are herein incorporated by reference in their entirety.",
        "The present invention is related to a microprocessor that is capable of supporting program trace functionality, and in particular to a microprocessor having a trace module.",
        "Program trace is one of the important debugging tools that are commonly used by programmers and software engineers. The program trace takes the form of a set of instructions executed by a digital processor. By determining whether certain instructions have been executed, users (for example, programmers or software engineers) can judge whether the hardware and software have properly executed a process. If abnormal operation is determined, a user can then discriminate the source of the problem.",
        "A processor chip such as a microprocessor or microcontroller commonly includes a trace module for the purpose of accommodating firmware development and debugging. In order to monitor information generated by the trace module, a trace data output pin is further required in addition to the standard data input/output pins.",
        "However, the addition of a trace data output pin to a processor chip gives rise to an increase in chip size and cost. Accordingly, it is more burdensome to manufacture a processor chip in this manner.",
        "In view of the above limitations of the conventional embodiments, it is therefore an object of the present invention to provide a microprocessor integrated circuit capable of outputting trace data through normal data input/output pins of a processor chip.",
        "In accordance with one aspect of the present invention, there is provided a processor-based device provided with pins that permit connection to at least one external device. The device includes a processor core, a trace module for generating trace data signals, and a plurality of data input/output pins which input and output data from and to the at least one external device. An input/output interface circuit, when operating in a trace mode, externally outputs the trace data signals from the trace module to the at least one external device via at least one of the data input/output pins.",
        "The input/output interface circuit, when operating in a normal mode, transfers data from the processor core to the data input/output pins and transfers data received from the data input/output pins to the processor core.",
        "The input/output interface circuit includes a serial port which receives standardized serial signals, and a controller which generates a mode select signal and trace output pin select signals in response to the serial signals. The mode select signal indicates whether a current operating mode is the trace mode or the normal mode. The trace output pin select signal is used to select the at least one data input/output pins that output the trace data signals during trace mode. The trace output pin select signals correspond to the plurality of data input/output pins, respectively.",
        "The trace module activates a trace output enable signal when the mode select signal indicates that the current operating mode is the trace mode. The input/output interface circuit further includes a plurality of logic circuits corresponding to the trace output pin select signals respectively. Each of the input/output interface circuits selects one of first and second trace data signals from the trace module and transfers the selected one of the first and second trace data signals to a corresponding data input/output pin when a corresponding trace output pin select signal and the corresponding trace output enable signal are activated.",
        "In a preferred embodiment, the serial port is essentially compliant with the IEEE-1149.1-1990 JTAG interface standard or other similar standard.",
        "The processor core generates an output enable signal, and the input/output interface circuit transfers data from the processor core to the data input/output pins when the mode select signal indicates that the current operating mode is the normal mode and the output enable signal is activated. The input/output interface circuit transfers data received from the data input/output pins to the processor core when the mode select signal indicates that the current operating mode is the normal mode and the output enable signal is inactivated.",
        "A more complete appreciation of the present invention, and many of the attendant advantages thereof, will become readily apparent as the same becomes better understood by reference to the following detailed description when considered in conjunction with the accompanying drawings in which like reference symbols indicate the same or similar components, wherein:",
        "FIG. 1 is a block diagram of a target system according to the present invention; and",
        "FIG. 2 is a preferred embodiment of an input/output interface circuit of an embedded processor device for the target system illustrated in FIG. 1.",
        "The preferred embodiment of the invention will now be more fully described with reference to the attached drawings.",
        "FIG. 1 schematically depicts a target system according to the present invention. Referring to FIG. 1, a target system 10 according to the present invention includes an embedded processor device 200 coupled to a system memory 100. The embedded processor device 200 incorporates a processor core 210, a trace module 220, and an input/output interface circuit 230. Although not considered critical to the present invention, the embedded processor device 200 may incorporate additional circuitry (not shown) for performing application specific functions, or, optionally, may take the form of a stand-alone processor or digital signal processor (DSP).",
        "A host system 20 is used- to execute debug control software 21 for transferring high-level commands and for controlling the extraction and analysis of debug information generated by the target system 10. The host system 20 and the target system 10 of the disclosed embodiment of the invention communicate, for example, via a serial link 30.",
        "FIG. 2 is a preferred embodiment of an input/output interface circuit 230 of the embedded processor device 200 illustrated in FIG. 1. Referring to FIG. 2, an input/output interface circuit 230 includes a TAP (Test Access Port) controller 231 coupled with a JTAG (Joint Test Action Group) port 250, a register 232, and logic circuits 310-340 connected respectively to data input/output pins 241-244. In this embodiment, the embedded processor device 200 has four data input/output pins 241-244. It would be apparent to those skilled in the art that the number of data input/output pins can be modified according to circuit specifications.",
        "The JTAG port 250 uses an IEEE-1149.1-1990 compliant JTAG interface or other similar standardized serial port interfaces.",
        "The TAP controller 231 generates a mode select signal MODE in response to an input of the JTAG port 250. The mode select signal MODE indicates whether the current operating mode is a normal mode or a trace mode. A trace module 220 activates a trace output enable (TOE) signal at a high level when the mode select signal MODE indicates that trace, mode is operational. The trace module 220 inactivates the trace output enable TOE signal at a low level when the mode select signal MODE indicates that normal mode is operational. The TAP controller 231 generates select signals TP1-TP4 in response to an input of the JTAG port 250. The select signals TP1-TP4 are used to select which pins, for example two pins, of the data input/output pins, at which trace data TD1 and TD2 from the trace module 220 are to be output. The select signals TP1-TP4 from the TAP controller 231 are stored in the register 232.",
        "In the embodiment illustrated, the trace module 220 outputs two trace data bits TD1 and TD2. It would however be apparent to those skilled in the art that the number of trace data bits from the trace module 220 may be modified according to circuit specifications. For the case where trace data is formed of two bits and the number of data input/output pins is 4, the select signals TP1-TP4 are used to select two data input/output pins from the four available pins for outputting the trace data bits TD1 and TD2.",
        "The logic circuit 310 incorporates AND gates 311, 313 and 318, an OR gate 314, inverters (or buffers) 316 and 317, and multiplexers 312 and 315. Each of the AND gates 313 and 318 has an inverting input terminal and a non-inverting input terminal. The AND gate 311 receives the trace output enable signal TOE from the trace module 220 and the select signal TP1 from the register 232. The multiplexer 312 receives the trace data signals TD1 and TD2 and outputs one of the received signals in response to a select signal S1 from the trace module 220. The AND gate 313 receives an output enable signal OE via its non-inverting input terminal and an output signal of the AND gate 311 via its inverting input terminal. The OR gate 314 receives output signals of gates 311 and 313. The multiplexer 315 receives an output data signal DOUT1 from the processor 210 and an output signal of the multiplexer 312, and selects one of the received signals in response to an output signal of the AND gate 311. An output signal of the multiplexer 315 is transferred to the data input/output pin 241 via the inverter 316. The inverter 316 is controlled by an output signal of the OR gate 314. For example, when the output signal of the OR gate 314 is activated, the inverter 316 is activated to form its transfer path. When the output signal of the OR gate 314 is inactivated, the inverter 316 is inactivated to cut off its transfer path. An input signal received via the pin 241 is transferred to a non-inverting input terminal of the AND gate 318. An output signal of the AND gate 311 is provided to an inverting input terminal of the AND gate 318. An output signal DIN1 of the AND gate 318 is transferred to the processor 210.",
        "Remaining logic circuits 320-340 are configured the same as the logic circuit 310. Constituent elements in the respective logic circuits 320-340 are marked by the same or similar reference numerals and symbols as or to those of the logic circuit 310. Description thereof will be thus omitted for the sake of brevity.",
        "The operation of the processor device 200 according to a preferred embodiment of the present invention will be described below.",
        "To begin with, during a normal mode of operation, the mode select signal MODE becomes low such that output data bits DOUT1-DOUT4 from the processor 210 are transmitted to the external via data input/output pins 241-244. A trace module 220 inactivates the trace output enable signal TOE to a low level in response to the mode select signal MODE being at a low level. Meanwhile, during the normal mode of operation, the processor 210 activates an output enable signal OE to a high level, in order to externally output the output data bits DOUT1-DOUT4. Under these, the output signal of the AND gate 311 becomes low and the output signal of the AND gate 313 becomes high. Multiplexer 315 outputs a data signal DOUT1 generated by the processor 210 in response to the low-level signal output of the AND gate 311. Since the output signal of the AND gate 313 is at a high level, an OR gate 314 outputs a high-level signal. When the output signal of the OR gate 314 has a low-to-high transition, the output signal of the multiplexer 315, that is, the data bit DOUT1 from the processor 210 is transferred to the data input/output pin 241 via the inverter 316.",
        "When the signals OE and TOE are both at a low level, data received via the pin 241 is provided to the processor 210 via a data input path, that is, via the inverter 317 and the AND gate 318. Logic circuits 320-340 connected to remaining pins 242-244 operate the same as the logic circuit 310, and description thereof will be thus omitted.",
        "Meanwhile, during trace mode, the mode select signal MODE goes high for externally outputting trace data TD1 and TD2 via selected data input/output pins 241-244. The trace module 220 activates the trace output enable signal TOE to a high level in response to the mode select signal MODE being at a high level. At this time, the output enable signal OE from the processor 210 is inactivated to a low level.",
        "It is assumed in this example that select signals TP1-TP4 in the register 232 have values of \u20181\u2019, \u20181\u2019, \u20180\u2019 and \u20180\u2019 respectively, and that select signals S1-S4 from the trace module 220 have \u20180\u2019, \u20181\u2019, \u2018x\u2019 and \u2018x\u2019 values respectively. The symbol \u2018x\u2019 indicates the \u201cdon't care\u201d state.",
        "The multiplexer 312 selects one (e.g., TD1) of trace data bits TD1 and TD2 in response to the select signal S1. Since the trace output enable signal TOE and the select signal TP1 both have a high level, the output signal of the AND gate 311 becomes high. At this time, since the OR gate 314 outputs a high-level signal, the multiplexer 315 selects for output the output of multiplexer 312, that is, the trace data TD1 from the trace module 220. The output signal of the multiplexer 315 is transferred to the data input/output pin 241 via the inverter 316, which is activated by a high-level signal from the OR gate 314. That is, during the trace mode, the trace data TD1 is output via the data input/output pin 241 as a normal data input/output pin of the processor device 200.",
        "In a similar manner, the trace data TD2 from the trace module 220 can be externally output to a data input/output pin, for example pin 242, through the logic circuit 320.",
        "Namely, when the trace output enable signal TOE is activated to a high level under the aforementioned assumption, the trace data bits TD1 and TD2 are externally output through normal data input/output pins 241 and 242. As described above, it is assumed that select signals TP1-TP4 in the register 232 have \u20181\u2019, \u20181\u2019, \u20180\u2019 and \u20180\u2019 values respectively and select signals S1-S4 from the trace module 220 have \u20180\u2019, \u20181\u2019, \u2018x\u2019 and \u2018x\u2019 values respectively. In order to output the data bits TD1 and TD2 via data input/output pins 243 and 244, the select signals TP1-TP4 are set to \u20180\u2019, \u20180\u2019, \u20181\u2019 and \u20181\u2019 respectively and the select signals S1-S4 are set to \u2018x\u2019, \u2018x\u2019, \u20180\u2019, and \u20181\u2019 respectively. Accordingly, trace data from the trace module 220 can be output through two pins of the data input/output pins 241-244 of the processor device 200.",
        "In accordance with the present invention, trace data is output using normal data input/output pins of a processor device rather than trace-dedicated pins. This means that additional pins for outputting the trace data are not required. Accordingly, the present invention prevents an increase in the chip size and an increase in the cost involved in providing additional pins for the trace data.",
        "While this invention has been particularly shown and described with references to preferred embodiments thereof, it will be understood by those skilled in the art that various changes in form and details may be made herein without departing from the spirit and scope of the invention as defined by the appended claims."
    ],
    "citations": [
        "4674089",
        "5724505",
        "5961653",
        "6145100",
        "6145123",
        "6175913",
        "6185732",
        "6243836",
        "6728910",
        "60-159949",
        "06-103108",
        "06-119258",
        "06-231010",
        "07-084827",
        "10-011321",
        "10-275092",
        "10-289127",
        "11-282713",
        "11-306040",
        "11-345150",
        "2000-010816",
        "2000-112789"
    ],
    "us_classification": "714734",
    "international_classifications": [
        {
            "classification_level": "A",
            "section": "G",
            "classification_class": "01",
            "subclass": "R",
            "main_group": "31",
            "subgroup": "28"
        }
    ]
}