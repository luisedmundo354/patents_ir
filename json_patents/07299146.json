{
    "title": "Apparatus and method to calibrate a system having an input signal and an output signal",
    "abstract": "A method is disclosed to calibrate a system receiving an input signal and generating an output signal. The method provides an input signal, and generates an output signal. The method establishes a sampling rate comprising a reference frequency, samples the input signal at said sampling rate, and samples the output signal at the sampling rate. The method then forms a measured input signal waveform, forms a measured output signal waveform, determines at (P) harmonics of the reference frequency the real components and the imaginary components of the measured input signal waveform, forms a filtered input signal waveform, determines at (P) harmonics of the reference frequency the real components and imaginary components of the measured output signal waveform, and forms a filtered output signal waveform. The method then calculates a transfer function comprising the mathematical relationship between the filtered output signal waveform and the filtered input signal waveform, and forms a calibration curve using that transfer function.",
    "inventors": [
        "Chliwnyj"
    ],
    "document_number": "07299146",
    "publication_date": "20071120",
    "assignees": [
        "International Business Machines Corporation"
    ],
    "claims": [
        {
            "claim_number": "CLM-00001",
            "preamble": "1. A method to calibrate a transducer receiving an input signal and generating an output signal, comprising the steps of:",
            "components": [
                {
                    "component": "providing an input signal to said transducer;",
                    "subcomponents": []
                },
                {
                    "component": "generating an output signal by said transducer, wherein said output signal comprises noise;",
                    "subcomponents": []
                },
                {
                    "component": "establishing a sampling rate comprising a reference frequency;",
                    "subcomponents": []
                },
                {
                    "component": "sampling said input signal at said sampling rate;",
                    "subcomponents": []
                },
                {
                    "component": "sampling said output signal at said sampling rate;",
                    "subcomponents": []
                },
                {
                    "component": "forming a measured input signal waveform;",
                    "subcomponents": []
                },
                {
                    "component": "forming a measured output signal waveform;",
                    "subcomponents": []
                },
                {
                    "component": "determining at (P) harmonics of said reference frequency the real components and the imaginary components of said measured input signal waveform;",
                    "subcomponents": []
                },
                {
                    "component": "forming a filtered input signal waveform;",
                    "subcomponents": []
                },
                {
                    "component": "determining at (P) harmonics of said reference frequency the real components and imaginary components of said measured output signal waveform;",
                    "subcomponents": []
                },
                {
                    "component": "forming a filtered output signal waveform;",
                    "subcomponents": []
                },
                {
                    "component": "calculating a transfer function comprising a mathematical relationship between said filtered output signal waveform and said filtered input signal waveform;",
                    "subcomponents": []
                },
                {
                    "component": "forming a calibration curve using said transfer function, wherein said calibration curve comprises a relationship between said input signal and said output signal minus said noise;",
                    "subcomponents": []
                },
                {
                    "component": "calibrating said transducer.",
                    "subcomponents": []
                }
            ]
        },
        {
            "claim_number": "CLM-00002",
            "preamble": "2. The method of claim 1 , wherein said determining steps further comprise using a Fast Fourier Transform.",
            "components": []
        },
        {
            "claim_number": "CLM-00003",
            "preamble": "3. The method of claim 1 , wherein said determining steps further comprise using a Goertzel algorithm.",
            "components": []
        },
        {
            "claim_number": "CLM-00004",
            "preamble": "4. The method of claim 3 , further comprising the steps of:",
            "components": [
                {
                    "component": "correlating said filtered output signal waveform with said filtered input signal waveform;",
                    "subcomponents": []
                },
                {
                    "component": "determining a plurality of actual datapoints; and",
                    "subcomponents": []
                },
                {
                    "component": "forming an X/Y array comprising said plurality of actual datapoints.",
                    "subcomponents": []
                }
            ]
        },
        {
            "claim_number": "CLM-00005",
            "preamble": "5. The method of claim 4 , further comprising the steps of:",
            "components": [
                {
                    "component": "determining a plurality of calculated datapoints using said transfer function; and",
                    "subcomponents": []
                },
                {
                    "component": "comparing said plurality of actual datapoints with said plurality of calculated datapoints.",
                    "subcomponents": []
                }
            ]
        },
        {
            "claim_number": "CLM-00006",
            "preamble": "6. The method of claim 1 , further comprising the steps of:",
            "components": [
                {
                    "component": "determining at each of (P) harmonics of said reference frequency the real components and the imaginary components of said measured input signal waveform, wherein (P) is an integer equal to or greater than 1 and equal to or less than about 6; and",
                    "subcomponents": []
                },
                {
                    "component": "determining at each of said (P) harmonics of said reference frequency the real components and the imaginary components of said measured output signal waveform.",
                    "subcomponents": []
                }
            ]
        },
        {
            "claim_number": "CLM-00007",
            "preamble": "7. The method of claim 6 , wherein said determining steps are performed using a Goertzel filter.",
            "components": []
        },
        {
            "claim_number": "CLM-00008",
            "preamble": "8. The method of claim 6 , further comprising the steps of:",
            "components": [
                {
                    "component": "calculating the magnitude M(i) of said measured output signal waveform at each of said (P) harmonics of said reference frequency;",
                    "subcomponents": []
                },
                {
                    "component": "calculating the phase \u03c6(i) of said measured output signal waveform at each of said (P) harmonics of said reference frequency; and",
                    "subcomponents": []
                },
                {
                    "component": "forming said filtered output signal waveform using the equation",
                    "subcomponents": []
                }
            ]
        },
        {
            "claim_number": "CLM-00009",
            "preamble": "9. The method of claim 6 , further comprising the steps of:",
            "components": [
                {
                    "component": "calculating the magnitude M(i) of said measured input signal waveform at each of said (P) harmonics of said reference frequency;",
                    "subcomponents": []
                },
                {
                    "component": "calculating the phase \u03c6(i) of said measured input signal waveform at each of said (P) harmonics of said reference frequency; and",
                    "subcomponents": []
                },
                {
                    "component": "forming said filtered input signal waveform using the equation",
                    "subcomponents": []
                }
            ]
        },
        {
            "claim_number": "CLM-00010",
            "preamble": "10. A computer program product encoded in an information storage medium, said computer program product being useable with a programmable computer processor having computer readable program code embodied therein to calibrate a transducer receiving an input signal and generating an output signal, comprising:",
            "components": [
                {
                    "component": "computer readable program code which causes said programmable computer processor to receive an input signal;",
                    "subcomponents": []
                },
                {
                    "component": "computer readable program code which causes said programmable computer processor to generate an output signal, wherein said output signal comprises noise;",
                    "subcomponents": []
                },
                {
                    "component": "computer readable program code which causes said programmable computer processor to retrieve a pre-determined sampling rate comprising a reference frequency;",
                    "subcomponents": []
                },
                {
                    "component": "computer readable program code which causes said programmable computer processor to sample said input signal at said sampling rate;",
                    "subcomponents": []
                },
                {
                    "component": "computer readable program code which causes said programmable computer processor to sample said output signal at said sampling rate;",
                    "subcomponents": []
                },
                {
                    "component": "computer readable program code which causes said programmable computer processor to generate a measured input signal waveform;",
                    "subcomponents": []
                },
                {
                    "component": "computer readable program code which causes said programmable computer processor to generate a measured output signal waveform;",
                    "subcomponents": []
                },
                {
                    "component": "computer readable program code which causes said programmable computer processor to determine at (P) harmonics of said reference frequency the real components and the imaginary components of said measured input signal waveform;",
                    "subcomponents": []
                },
                {
                    "component": "computer readable program code which causes said programmable computer processor to form a filtered input signal waveform;",
                    "subcomponents": []
                },
                {
                    "component": "computer readable program code which causes said programmable computer processor to determine at (P) harmonics of said reference frequency the real components and imaginary components of said measured output signal waveform;",
                    "subcomponents": []
                },
                {
                    "component": "computer readable program code which causes said programmable computer processor to form a filtered output signal waveform;",
                    "subcomponents": []
                },
                {
                    "component": "computer readable program code which causes said programmable computer processor to calculate a transfer function comprising a mathematical relationship between said filtered output signal waveform and said filtered input signal waveform; and",
                    "subcomponents": []
                },
                {
                    "component": "computer readable program code which causes said programmable computer processor to form a calibration curve using said transfer function wherein said calibration curve comprises a relationship between said input signal and said output signal minus said noise;",
                    "subcomponents": []
                },
                {
                    "component": "computer readable program code which causes said programmable computer processor to calibrate said transducer.",
                    "subcomponents": []
                }
            ]
        },
        {
            "claim_number": "CLM-00011",
            "preamble": "11. The computer program product of claim 10 , wherein said computer readable program code which causes said programmable computer processor to determine at (P) harmonics of said reference frequency the real components and the imaginary components of said measured input signal waveform further comprises computer readable program code which causes said programmable computer processor to use a Goertzel algorithm.",
            "components": []
        },
        {
            "claim_number": "CLM-00012",
            "preamble": "12. The computer program product of claim 11 , wherein said computer readable program code which causes said programmable computer processor to determine at (P) harmonics of said reference frequency the real components and the imaginary components of said measured output signal waveform further comprises computer readable program code which causes said programmable computer processor to use a Goertzel algorithm.",
            "components": []
        },
        {
            "claim_number": "CLM-00013",
            "preamble": "13. The computer program product of claim 10 , wherein said computer readable program code which causes said programmable computer processor to determine at (P) harmonics of said reference frequency the real components and the imaginary components of said measured input signal waveform further comprises computer readable program code which causes said programmable computer processor to use a Fast Fourier Transform.",
            "components": []
        },
        {
            "claim_number": "CLM-00014",
            "preamble": "14. The computer program product of claim 13 , wherein said computer readable program code which causes said programmable computer processor to determine at (P) harmonics of said reference frequency the real components and the imaginary components of said measured output signal waveform further comprises computer readable program code which causes said programmable computer processor to use a Fast Fourier Transform.",
            "components": []
        },
        {
            "claim_number": "CLM-00015",
            "preamble": "15. The computer program product of claim 10 , further comprising:",
            "components": [
                {
                    "component": "computer readable program code which causes said programmable computer processor to correlate said filtered output signal waveform with said filtered input signal waveform;",
                    "subcomponents": []
                },
                {
                    "component": "computer readable program code which causes said programmable computer processor to determine a plurality of actual datapoints; and",
                    "subcomponents": []
                },
                {
                    "component": "computer readable program code which causes said programmable computer processor to form an X/Y array comprising said plurality of actual datapoints.",
                    "subcomponents": []
                }
            ]
        },
        {
            "claim_number": "CLM-00016",
            "preamble": "16. The computer program product of claim 15 , further comprising:",
            "components": [
                {
                    "component": "computer readable program code which causes said programmable computer processor to determine a plurality of calculated datapoints using said transfer function; and",
                    "subcomponents": []
                },
                {
                    "component": "computer readable program code which causes said programmable computer processor to compare said plurality of actual datapoints with said plurality of calculated datapoints.",
                    "subcomponents": []
                }
            ]
        },
        {
            "claim_number": "CLM-00017",
            "preamble": "17. The computer program product of claim 10 , further comprising:",
            "components": [
                {
                    "component": "computer readable program code which causes said programmable computer processor to determine at each of (P) harmonics of said reference frequency the real components and the imaginary components of said measured input signal waveform, wherein (P) is an integer equal to or greater than 1 and equal to or less than about 6; and",
                    "subcomponents": []
                },
                {
                    "component": "computer readable program code which causes said programmable computer processor to determine at each of said (P) harmonics of said reference frequency the real components and the imaginary components of said measured output signal waveform.",
                    "subcomponents": []
                }
            ]
        },
        {
            "claim_number": "CLM-00018",
            "preamble": "18. The computer program product of claim 17 , further comprising:",
            "components": [
                {
                    "component": "computer readable program code which causes said programmable computer processor to calculate the magnitude M(i) of said measured output signal waveform at each of said (P) harmonics of said reference frequency;",
                    "subcomponents": []
                },
                {
                    "component": "computer readable program code which causes said programmable computer processor to calculate the phase \u03c6(i) of said measured output signal waveform at each of said (P) harmonics of said reference frequency; and",
                    "subcomponents": []
                },
                {
                    "component": "computer readable program code which causes said programmable computer processor to form said filtered output signal waveform using the equation",
                    "subcomponents": []
                }
            ]
        },
        {
            "claim_number": "CLM-00019",
            "preamble": "19. The computer program product of claim 17 , further comprising:",
            "components": [
                {
                    "component": "computer readable program code which causes said programmable computer processor to calculate the magnitude M(i) of said measured input signal waveform at each of said (P) harmonics of said reference frequency;",
                    "subcomponents": []
                },
                {
                    "component": "computer readable program code which causes said programmable computer processor to calculate the phase \u03c6(i) of said measured input signal waveform at each of said (P) harmonics of said reference frequency; and",
                    "subcomponents": []
                },
                {
                    "component": "computer readable program code which causes said programmable computer processor to form said filtered input signal waveform using the equation",
                    "subcomponents": []
                }
            ]
        }
    ],
    "description": [
        "This application is a Continuation-In-Part of Ser. No. 10/185,125 filed Jun. 27, 2002 now U.S. Pat No. 6,839,197.",
        "This invention relates to an apparatus and method to calibrate one or more transducers in a \u201cnoisy\u201d environment. In certain embodiments, this invention relates to servo track following a moving magnetic tape having one or more servo edges of dissimilar recorded servo signals, and, more particularly, to calibrating one or more servo sensors.",
        "Automated media storage libraries are known for providing cost effective access to large quantities of stored media. Tape cartridges containing a moveable magnetic tape are often used in automated data storage libraries. Tape media, such a magnetic tape, is a common medium for the storage of data to be utilized by a computer. Magnetic tape has found widespread use as a data storage medium because it provides a relatively inexpensive solution for storing large amounts of data.",
        "Magnetic tape data storage typically provides one or more prerecorded servo tracks to allow precise positioning of a tape head with respect to those prerecorded servo tracks. Servo sensors disposed on the tape head are used to track the recorded servo tracks. The tape head comprises one or more read/write elements precisely positioned with respect to those servo sensors. One example of a magnetic tape system is the IBM 3590, which employs magnetic tape having prerecorded servo patterns that include three parallel sets of servo edges, each servo edge being an interface between two dissimilar recorded servo signals, each set of servo edges comprising one servo edge on each of opposite lateral sides of a middle recorded servo signal.",
        "In certain embodiments, the tape head includes a plurality of servo sensors for each servo edge, with the result that the tape head may be stepped between those servo sensors, each positioning the read/write elements at different interleaved groups of data tracks. Typically, for a given servo pattern of a set of two servo edges, the outer servo signals are recorded first, and the center servo signal is recorded last, to provide the servo edges. The nominal separation distance between the servo edges of each set of servo edges is a certain distance, but there is variation in the magnetic separation between the servo edges, for example, due to the variation of the width of the physical write element which prerecords the servo pattern, due to variation in the magnetic characteristics of the physical write element, etc. The variation may occur between servo tracks in a single magnetic tape, and may occur between prerecording devices and therefore between magnetic tapes.",
        "To reduce the apparent difference of the edge separation distance of the prerecorded servo tracks from nominal, the prerecording of the servo tracks is conducted at different amplitudes so as to attempt to compensate for the physical difference and provide a magnetic pattern that is closer to nominal. Thus, the difference in physical distance and the amplitude compensation may tend to offset each other with respect to the apparent distance between the servo tracks. These actions may provide an adequate signal for track following at the servo edges.",
        "However, to increase track density, a servo sensor may be indexed to positions laterally offset from the linear servo edges to provide further interleaved groups of data tracks. The indexed positions are determined by measuring the ratio between the amplitudes of the two dissimilar recorded servo signals. Thus, when the amplitudes of the recorded servo signals are varied to compensate for physical distance variations, track following the prerecorded servo edges at the offset indexed positions becomes less precise. As the result, the data tracks may vary from the desired positions, i.e. be \u201csqueezed\u201d together, such that writing on one track with a write element that is subject to track misregistration (TMR) may cause a data error on the immediately adjacent data track.",
        "The tape path of the above IBM 3590 is a guided tape path. In such a guided tape path embodiment, the magnetic tape can be moved in a first direction and an opposing second direction along a first axis, i.e. along the longitudinal axis of the tape. Movement of that tape along a second axis orthogonal to the first axis, i.e. the lateral axis of the tape, is minimized. Limiting the lateral movement of the magnetic tape results in generating minimal guiding noise, and therefore, the step from a first ratio of servo signals to a second ratio is readily discernible.",
        "Another approach, however, is required for open channel guiding in which the magnetic tape can move laterally a distance which is substantially greater than the separation between index positions, thereby introducing substantial noise into the calibration process. The guiding signal to noise ratio thus becomes negative, with the guiding noise being far larger than the step from one ratio to another, making it difficult to gather data points with a monotonically increasing or decreasing slope to conduct a calibration of the servo ratios.",
        "Applicants' invention includes an apparatus and method to calibrate a system receiving an input signal and generating an output signal. The method provides an input signal to the system, and generates an output signal by the system. The method establishes a sampling rate comprising a reference frequency, samples the input signal at said sampling rate, and samples the output signal at the sampling rate.",
        "The method then forms a measured input signal waveform, forms a measured output signal waveform, determines at (P) harmonics of the reference frequency the real components and the imaginary components of the measured input signal waveform, forms a filtered input signal waveform, determines at (P) harmonics of the reference frequency the real components and imaginary components of the measured output signal waveform, and forms a filtered output signal waveform.",
        "The method then calculates a transfer function comprising the mathematical relationship between the filtered output signal waveform and the filtered input signal waveform, and forms a calibration curve using that transfer function.",
        "The invention will be better understood from a reading of the following detailed description taken in conjunction with the drawings in which like reference designators are used to designate like elements, and in which:",
        "FIG. 1 is a block diagram of an embodiment of a magnetic tape system employing the present invention for calibration of servo index positions;",
        "FIG. 2A is a diagrammatic illustration of a magnetic tape having three parallel sets of linear servo edges, each servo edge comprising an interface between two dissimilar recorded servo signals;",
        "FIG. 2B is a block diagram showing one embodiment of a magnetic tape head;",
        "FIG. 3A is a detailed diagrammatic representation of a magnetic tape format providing four servo index positions in one set of two linear servo edges of the magnetic tape of FIG. 2A;",
        "FIG. 3B is a detailed diagrammatic representation of a magnetic tape format providing six servo index positions in one set of two linear servo edges of the magnetic tape of FIG. 2A;",
        "FIG. 4A is a diagrammatic representation of the relationships between ratios of the sensed servo signals of a servo edge of FIG. 2A and their corresponding lateral positions, where the recorded servo signals generating the edge are of three different amplitudes;",
        "FIG. 4B shows analog servo signals detected at a first index position;",
        "FIG. 4C shows analog servo signals detected at a second index position;",
        "FIG. 5A is a flow chart summarizing the initials steps of Applicants' method;",
        "FIG. 5B is a flow chart summarizing additional steps of Applicants' method;",
        "FIG. 6 is a graph showing a measured independent sensor waveform and three sampled servo signal waveforms;",
        "FIG. 7 shows a filtered independent sensor waveform graphed against three different filtered servo signal ratio waveforms;",
        "FIG. 8 three sets of datapoints representing the position of an independent position sensor as a function of the servo signal ratio values detected by three servo sensors;",
        "FIG. 9 shows a first periodic function graphed against an identical second periodic function;",
        "FIG. 10 shows a first periodic function graphed against a differing second periodic function;",
        "FIG. 11 is a flow chart summarizing the steps of Applicants' method to calibrate a transducer;",
        "FIG. 12 is a block diagram of a system having an input signal, an output signal, and noise;",
        "FIG. 13 is a block diagram of a system having an input signal, an output signal, a feedback loop, and noise;",
        "FIG. 14 is a flow chart summarizing Applicant's method to calibrate the system of either FIG. 12 or FIG. 13.",
        "FIG. 15 is a circuit diagram for a second order recursive Goertzel filter.",
        "This invention is described in preferred embodiments in the following description with reference to the Figures, in which like numbers represent the same or similar elements. The invention will be described as embodied in an apparatus and method to calibrate servo sensors tracking servo signals recorded on a magnetic tape. The following description of Applicant's apparatus and method is not meant, however, to limit Applicant's invention to magnetic tapes or to data processing applications, as the invention herein can be applied generally to calibrating transducers in an electrically noisy environment.",
        "FIG. 1 shows magnetic tape data storage system 100. Control unit 110 receives and transmits data and control signals to and from a host device 102 via an interface 105. The control unit 110 is coupled to a memory device 107, such as a random access memory for storing information and computer programs. An example of a host device 102 comprises an IBM RS/6000 processor.",
        "A multi-element tape head 190 includes a plurality of read/write elements to record and read information onto and from a magnetic tape 197, and servo sensors to detect servo signals comprising prerecorded linear servo edges on the magnetic tape 197. In certain embodiments, magnetic tape head 190 comprises a thin-film magneto-resistive transducer. In an illustrative embodiment, tape head 190 may be constructed as shown in FIG. 2B. The length of the tape head 190 substantially corresponds to the width of the tape 197. In certain embodiments tape head 190 includes thirty-two read/write element pairs (labeled \u201cRD\u201d and \u201cWR\u201d) and three sets of servo read elements (e.g. LS1 272, RS6 298) corresponding to the three servo areas AB (FIG. 2A), BC (FIG. 2A), and CD (FIG. 2A). In the illustrated embodiment, the thirty-two read/write element pairs are divided into groups of eight, adjacent groups being separated by two tracks occupied by a group of four servo sensors. Each group of four servo sensors may be referred to as a \u201cservo group\u201d, e.g. servo group 255, servo group 265, and servo group 275.",
        "In the illustrated embodiments, tape head 190 includes left and right modules separately fabricated, then bonded together. Write and read elements alternate transversely down the length of each module (i.e., across the width of the tape), beginning with a write element in position on the left module and a read element in the corresponding position on the right module. Thus, each write element in the left module is paired with a read element in the corresponding position on the right module and each read element in the left module is paired with a write element in the corresponding position on the right module such that write/read element pairs alternate transversely with read/write element pairs.",
        "A tape reel motor system (not shown in FIG. 1) moves the tape 197 along a tape path 195 in a first direction, and optionally in an opposing second direction, along a first axis, i.e. the longitudinal axis of the tape, while it is supported by a tape deck for reading and writing. The tape deck does not precisely hold the tape in position laterally. Rather, open channel guiding may be employed in which the magnetic tape can move laterally a distance which is substantially greater than that between index positions, thereby introducing substantial guiding noise into the calibration process. The guiding signal to noise ratio thus becomes negative, with the guiding noise being far larger than the step from one ratio to another, making it difficult to gather data points with a monotonically increasing or decreasing slope to conduct a calibration of the detected servo signal ratios.",
        "A servo track follower 150 directs the motion of the magnetic tape head 190 in a lateral or transverse direction relative to the longitudinal direction of tape motion. The control unit 110 is coupled to one or more tape reel motors and controls the direction, velocity and acceleration of the tape 197 in the longitudinal direction.",
        "The data tracks on the tape 197 are arranged in parallel and are parallel to the linear servo edges. Thus, as the servo track follower 150 causes the servo sensors of the magnetic tape head to track follow a linear servo edge or a servo index position laterally offset from a servo edge, the read/write elements track a parallel group of the data tracks. If it is desired to track another parallel group of data tracks, the magnetic tape head 190 is indexed laterally to another servo edge or to another servo index position, or a different servo sensor is aligned with the same or a different servo edge or servo index position.",
        "When the magnetic tape head 190 is to be moved to a selected index position, an index controller 170 is enabled by the control unit 110, receiving a lateral position signal from an independent position sensor 180 and transmits an appropriate signal to servo logic 160 to select the appropriate servo track, while the control unit 110 transmits an appropriate signal to a servo gap selector 130 to select the appropriate servo sensor. The independent position sensor 180 is discussed in the incorporated U.S. Pat. No. 5,9316,159, where it is called a non-servo position sensor, and indicates the lateral mechanical position of the tape head 190 with respect to the tape path 195.",
        "Over the course of longer distances of longitudinal tape movement, the open channel guiding system will allow the tape to move laterally with respect to the tape deck. In accordance with the present invention, the independent position sensor 180, in limited distances of tape movement, accurately tracks the lateral mechanical position of the tape head 190, and therefore of the servo sensor(s), with respect to the magnetic tape 197 and of the servo edges. The logic 160 operates the servo track follower 150 in accordance with the present invention to calibrate the servo index positions as sensed by the servo sensor with respect to the parallel sets of linear servo edges, as will be explained. The logic 160 may comprise a programmed PROM, ASIC or microprocessor.",
        "The tape system 100 may be bidirectional, in which ones of the read/write elements are selected for one direction of longitudinal tape movement, and others of the read/write elements are selected for the opposite direction of movement. The control unit 110 additionally selects the appropriate ones of the read/write elements by transmitting a signal to a read/write gap select unit 120.",
        "Once a servo edge or edges are selected, the servo gap selector 130 provides the servo signals to a servo detector 140, which information is employed by servo logic 160 to position the tape head 190 to track follow the detected edges. In accordance with the present invention, servo logic 160 employs the servo information sensed by the servo detector 140 and the mechanical positioning information from the independent position sensor 180 to calibrate the track following servo. The track following servo logic is also implemented in the servo logic 160 employing the sensed servo signals to determine the ratios of the sensed servo signals, which are employed in accordance with the present invention to calibrate the servo index positions of the track following servo 150.",
        "Referring to FIG. 2A, a plurality, for example, three, parallel sets of linear servo edges 250, 260 and 270 are illustrated, each servo edge comprising an interface between two dissimilar recorded servo signals, each set of servo edges comprising one of the servo edges on each of opposite lateral sides of a middle recorded servo signal. As an example, a corresponding plurality of laterally offset servo sensors, i.e. servo sensor groups 255 (FIG. 2B), 265 (FIG. 2B), 275 (FIG. 2B), are disposed on tape head 190 to sense the servo signals at each corresponding edge. Additional pluralities of servo sensors, i.e. sensors 272, 274, 276, 278, may be provided to allow positioning of the tape head at additional data tracks.",
        "Referring to FIG. 3A, the typical magnetic tape format of servo signals to form linear servo edges 312 and 314 comprising an interface between two dissimilar recorded servo signals is illustrated. One set of servo edges comprises outer bands 320 and 322, having a recorded pattern of a constant amplitude signal of a single first frequency, on either side of an inner band 310 of the other servo signal, having a recorded pattern alternating between a constant amplitude burst signal 318 of a single second frequency and a zero amplitude null signal 316.",
        "Typically, the servo signals 320, 310 and 322 are provided with servo guard bands 324 and 326 to protect the outer bands 320 and 322 from noise resulting from the data track areas 302 and 304.",
        "It is desirable that the servo edges are separated by a predetermined nominal distance 350 employed for prerecording the servo signals. Typically, the outer servo signals 320, 322 are recorded first, and the center servo signal 310 is recorded last, to provide the servo edges 312, 314. There is, typically, variation in the magnetic separation 350 between the servo edges, for example, due to the variation of the width of the physical write element which prerecords the servo pattern, due to variation in the magnetic characteristics of the physical write element, etc. The variation may occur between servo tracks in a single magnetic tape, and may occur between prerecording devices and therefore between magnetic tapes.",
        "To reduce the apparent difference of the edge separation 350 distance of the prerecorded servo tracks from nominal, the prerecording of the servo signals is conducted at different amplitudes so as to attempt to compensate for the physical difference and provide a magnetic pattern that is closer to nominal. Additionally, three servo sensors are employed to simultaneously sense the three servo tracks. Thus, the difference in physical distance and the amplitude compensation may tend to offset each other with respect to the resultant apparent distance between the servo tracks. These actions may provide an adequate signal for track following at the servo edges.",
        "However, to increase data track density, in the embodiment of FIG. 3A four servo index positions, i.e. index positions 0, 1, 2, and 3, are calibrated. These index positions are laterally offset with respect to the sensed servo edges of the set of linear servo edges. Index position 0 corresponds to sensor placement 330 over tape track position 340. Similarly, index positions 1, 2, and 3, respectively, correspond to sensor placements 332, 334, and 336, respectively, over tape track positions 342, 344, and 346, respectively. The relative positions of these four index positions are: 0, 2, 1, 3.",
        "As an example, the servo index positions may be offset laterally about one quarter the width of the inner band 310 away from the servo edge in either direction, providing four index positions. The indexed positions are determined by measuring the ratios between the amplitudes of the two dissimilar recorded servo signals, e.g., as measured by the servo detector 140 of FIG. 1, and mapping those ratios into physical distances in microns. The servo logic 160 operates the servo track follower 150 to track follow at the desired measured ratio. For example, the measured ratio will be the ratio between the sum of the sensed outer band signal 320 plus the inner band signal 318, and the sensed outer band signal 320, giving effect to the null 316. The illustrations and descriptions herein employ this ratio.",
        "Alternatively, the measured ratio may be the ratio between the outer band signal 320 at frequency F1 and the inner band signal 318 at frequency F2. In order to center the data read/write elements at each of the servo index positions, the ratios must be measured precisely. Thus, when the amplitudes of the recorded servo signals are varied to compensate for physical distance variations, the measured ratios are distorted and track following the prerecorded servo edges at the offset indexed positions becomes less precise. As the result, the data tracks may vary from the desired positions, for example, squeezed together, such that writing on one track with a write element that is subject to track misregistration (TMR) may cause a data error on the immediately adjacent data track.",
        "FIG. 3B illustrates another embodiment of displaced index positions that may be employed with the present invention. This embodiment includes six index positions, i.e. index positions 0, 1, 2, 3, 4, and 5. At the \u201c0\u201d or \u201c1\u201d index positions, the servo element is located at position 360 centered on servo edge 312 or at position 361 centered on servo edge 314. Additional index positions are provided which are aligned such that a servo element is displaced from an edge 312 or 314 in either direction. As the result, the number of index positions becomes six. The relative positions of these six index positions are: 2, 0, 4, 3, 1, 5.",
        "In order to center the data read/write elements in the \u201c2\u201d and \u201c5\u201d index positions, the servo read element must be located at position 362 or at position 365, and will read a minimum signal that has an amplitude ratio of about 5/6 of the maximum signal, and to center the data read/write elements in the \u201c3\u201d and \u201c4\u201d index positions, the servo read element must be located at position 363 or at position 364, and will read a minimum signal that has an amplitude ratio of about 1/6 of the maximum signal.",
        "To track follow an edge or edges, once a servo edge or edges are selected, the servo gap selector 130 of FIG. 1 provides the servo signals to a servo detector 140, which digitally detects the servo signals at a predetermined sample rate, and provides servo signal ratios of each of the selected servo sensors. The servo logic 160 employs the servo signal ratios to determine the displacement from the edges and operates the servo loop servo track follower 150 to position the tape head 190 to track follow at the desired displacement from the edges.",
        "FIG. 4A illustrates examples of distortion of the measured ratios between the sensed servo signals of one linear servo edge, at various lateral positions of the servo sensors, in a guided tape system. Referring additionally to FIGS. 3A and 3B regarding servo sensor placement, in an ideal relationship, the ratio of signals varies linearly from a value of \u201c1\u201d when the servo sensor is at position P(A), which is centered on and senses only the outer band 320 or outer band 322, to a value of \u201c0\u201d when the servo sensor is at position P(B), which is centered on and senses only the inner band 310. Straight line 410 graphically illustrates such an ideal relationship.",
        "Curve 420 comprises a graphical representation of more typical ratio of servo signals, measured in a guided system, where the center recorded servo signal 310 generating the edges is of a relatively weak amplitude. FIGS. 4B and 4C illustrate wave forms of the analog signal from the servo transducer at, respectively, positions 332 and 336 of FIG. 3A. Thus, in FIG. 4B, the bursts 440 and 460 formed while the servo transducer is at position 332 of FIG. 3A from the combination of the first frequency and the second frequency burst is at a high amplitude, but the burst 450 formed from the combination of the first frequency and the null signal is at a very low amplitude because only a small portion of the servo transducer is positioned over the first frequency. In FIG. 4C, the bursts 470 and 490 formed while the servo transducer is at position 336 of FIG. 3A from the combination of the first frequency and the second frequency burst is at a high amplitude, as is the burst 480 formed from the combination of the first frequency and the null signal, because the servo transducer is positioned primarily over the first frequency.",
        "Referring again to FIG. 4A, curve 430 comprises a graphical representation of more typical ratio of servo signals as a function of servo sensor location, measured in a guided system, where the center recorded servo signal 310 generating the edges is of a relatively strong amplitude. As those skilled in the art will appreciate, curves 420 and 430 do not define linear relationships between the ratios of measured servo signals and servo sensor placement. In light of the differing, and complex, relationship between the ratio of measured servo signals as a function of servo sensor location, employing the same ratio setting to position the tape head at various servo index positions for each of the linear edges may result in track misregistration.",
        "As discussed above, the tape deck does not precisely hold the tape in position laterally. Rather, open channel guiding may be employed whereunder the magnetic tape can move laterally a distance which is substantially greater than that between index positions, e.g., index positions 340-346 of FIG. 3A and index positions 370, 312, 372, 374, 314, and 376 of FIG. 3B, thereby introducing substantial noise into the calibration process. The guiding signal to noise ratio thus becomes negative, with the guiding noise being far larger than the step from one ratio to another, making it difficult to gather data points with a monotonically increasing or decreasing slope to conduct a calibration of the detected servo signal ratios.",
        "In one embodiment of the present invention, servo logic 160 is provided with digital signal processor 165, and is coupled to the servo detector 140, the servo track follower 150, and the independent position sensor 180, all of FIG. 1. The logic 160 operates the servo loop, comprising servo gap selector 130, servo detector 140, and servo track follower 150, to inject a defined signal to modulate the lateral position of the head and, thereby, a plurality of servo sensors.",
        "Referring now to FIG. 5A, Applicants' method to calibrate one or more servo sensors begins at step 505. In step 510, Applicants' method operates the servo loop to move off-track to begin calibration of the servo sensor(s). In certain embodiments, step 510 is performed by logic 160. In certain embodiments, Applicants' method calibrates one or more servo sensors across a range which includes four servo index positions, i.e., positions 340-346 of FIG. 3A. In certain embodiments, Applicants' method calibrates one or more servo sensors across a range which includes six index positions, i.e. positions 370, 312, 372, 374, 314, and 376 of FIG. 3B. In certain embodiments, Applicants' method calibrates one or more servo sensors across a range which includes more than six servo index positions.",
        "In step 512, Applicants' method operates the servo loop to move in the direction of the servo pattern, such as pattern 250 (FIG. 2A), or 260 (FIG. 2A), or 270 (FIG. 2A), in order to find and lock to the pattern. In certain embodiments, step 512 is performed by logic 160. Applicants' method transitions from step 512 to step 514 wherein Applicants' method determines whether the servo pattern has been found. In certain embodiments, step 514 is performed by logic 160. If Applicants' method determines in step 514 that the servo pattern has not been found, then Applicants' method transitions from step 514 to step 510 to repeat the movement off-track.",
        "Alternatively, if Applicants' method determines in step 514 that the servo pattern has been located, Applicants' method transitions from step 514 to step 516 wherein Applicants' method follows the servo pattern on the moving tape by causing the servo loop to laterally position the servo sensor to detect the servo signals at continually altered digital set points of the ratios of the sensed servo signals. In certain embodiments, step 516 is performed by logic 160. The set points are altered at a predetermined sampling rate, and are altered to inject a predetermined positioning signal, whereby the servo loop track follows the linear servo edges, e.g., edges 312 or 314 of FIGS. 3A and 3B at each of the parallel sets of linear servo edges 250 (FIG. 2A), 260 (FIG. 2A), 270 (FIG. 2A), with the corresponding plurality of laterally offset servo sensors, i.e. sensor groups 255 (FIG. 2B), 265 (FIG. 2B), 275 (FIG. 2B), at the continually altered digital set points.",
        "In certain embodiments, this predetermined positioning signal comprises a sinusoidal pattern having a known reference frequency. In certain embodiments, the positioning signal is recorded in firmware disposed in logic 160. In certain embodiments, the positioning signal comprises a sinusoidal pattern having a varying frequency. In certain embodiments, the positioning signal is varied according to an algorithm disposed in logic 160.",
        "In certain embodiments, the reference frequency is set in \u201cfirmware\u201d disposed in DSP 165. In certain embodiments, the reference frequency is set by the user during system initialization. In certain embodiments, the reference frequency is set by field service personnel during system initialization. In certain embodiments, the reference frequency is modified by Applicants' method in order to further refine the calibration of the servo sensors disposed in the system.",
        "In certain embodiments, the positioning signal comprises a reference frequency selected such that the reference frequency, and major harmonics thereof, each differs from intrinsic operational frequencies of the track following servo system and/or of the tape drive. As examples, the positioning signal is selected so that the reference frequency and major harmonics thereof differ from the frequencies of the tape reels 197 of FIG. 1, the tape motor(s), and the cooling, fans, and any resonant frequencies of the servo system.",
        "In certain embodiments, the positioning signal is modulated such that the ratio of servo signals detected by the one or more servo sensors being calibrated, i.e. the ratio of the detected amplitudes of F1 and F2, varies from about 0.1 to a ratio of about 0.9. Those detected servo signals are dominated by the sinusoidal pattern and not by the tape movement. The frequency of the positioning signal, i.e. the reference frequency, is known precisely, and signals not having that reference frequency, or harmonics of that reference frequency, comprise noise in the measurement.",
        "Independent position sensor (\u201cIPS\u201d) 180 measures the position of tape head 190 with respect to the tape path 195. In step 520, Applicants' method samples the analog IPS signal at the selected sample rate. In certain embodiments, step 525 is performed by servo logic, such as logic 160. Applicants' method transitions from step 520 to step 525 wherein Applicants' method digitally forms a measured IPS waveform using the data of step 520. In certain embodiments, step 525 is performed by servo logic, such as logic 160.",
        "Referring now to FIG. 6, waveform 640 comprises the measured IPS signal waveform formed in step 525. The Y axis corresponding to curve 640 is found at the right side of graph 600. The digitized measured IPS signal waveform of step 525 is dominated by the sinusoidal pattern having the reference frequency, and not by the tape movement. The frequency of the reference frequency is known precisely, and anything that is not at that reference frequency, or its harmonics, comprises noise in the measurement.",
        "Applicant's method transitions from step 525 to step 530 wherein Applicants' method determines the real and imaginary components, at selected frequencies, of the measured IPS waveform of step 525. In certain embodiments of Applicants' invention, those real and imaginary components are formed using a Goertzel algorithm. In certain embodiments, Applicants' method uses a Goertzel algorithm defined by equation (1)\n\nHfi(z)=[1\u2212e(2\u03c0fi/fs)z\u22121]/1\u22122 cos [2\u03c0fi/fs]z\u22121+z\u22122\u2003\u2003(1)\n\nwhere fi is the frequency of interest, and fs is the sampling frequency. In certain embodiments, Applicants' method includes second order recursive Goertzel filter 1500 as shown in FIG. 15. In certain embodiments, DSP component 165 includes a Goertzel filter.",
        "In certain embodiments, DSP component 165 includes a Goertzel filter.",
        "In certain embodiments, the measured IPS waveform of step 525 comprises the input to a Goertzel filter, and the real and imaginary components of step 530 comprise the output of that Goertzel filter. In certain embodiments, servo logic 160 (FIG. 1) provides the waveform of step 525 to a Goertzel filter in DSP component 165 (FIG. 1).",
        "In certain embodiments, the selected frequencies comprise (P) harmonics of the reference frequency. As (P) increases, Applicants' method can identify more complex distortions of the detected servo signal ratios as a function of IPS location. In certain embodiments, Applicants' method utilizes as many of 6 harmonics of the reference frequency, i.e. (P) equals 6. On the other hand, in certain embodiments Applicants' have found an insubstantial increase in useful information beyond the fourth harmonic.",
        "In step 535, Applicants' method uses the real and imaginary components of step 530 to form a filtered IPS signal waveform. The real components of the measured IPS waveform determined in step 530 are used in step 535 to determine the magnitudes M(i) for that IPS waveform at the selected frequencies, where (i) is an integer between 1 and (P). The imaginary components of the measured IPS waveform are used in step 535 to determine the phase \u03c6(i) of that IPS waveform at the selected frequencies, wherein (i) is as described above.",
        "For example, in embodiments wherein Applicants' method uses the first four harmonics of the reference frequency, (i) is an integer greater than or equal to 1 and less than or equal to 4. M(1) comprises the magnitude of the measured IPS waveform at the reference frequency. As those skilled in the art will appreciate, the first harmonic is identical to the fundamental frequency, i.e. the reference frequency. M(2) comprises the magnitude of the measured IPS waveform at the second harmonic of the reference frequency, M(3) comprises the magnitude of the measured IPS waveform at the third harmonic of the reference frequency, and M(4) comprises the magnitude of the measured IPS waveform at the fourth harmonic of the reference frequency.",
        "Similarly, \u03c6(1) comprises the phase of the measured IPS waveform at the reference frequency, \u03c6(2) comprises the phase of the measured IPS waveform at the second harmonic of the reference frequency, \u03c6(3) comprises the phase of the measured IPS waveform at the third harmonic of the reference frequency, and \u03c6(4) comprises the phase of the measured IPS waveform at the fourth harmonic of the reference frequency.",
        "In step 535, Applicants' method forms a filtered IPS signal waveform using the magnitudes M(i), phases \u03c6(i), and the equation:\n\nFiltered IPS Signal Waveform=M(1)*cos[\u03c6(1)+(2)(\u03c0)(t)/x]+M(2)*cos[\u03c6(2)+(4)(\u03c0)(t)/x]+M(3)*cos[\u03c6(3)+(6)(\u03c0)(t)/x]+M(4)*cos[\u03c6(4)+(8)(\u03c0)(t)/x]\n\nwhere (t)/x comprises a fraction having a value greater than or equal to 0 and less than or equal to 1, where multiplying that fraction by (n)\u03c0 gives a point within the (n)\u03c0 period.",
        "Thus, Applicants' method in steps 520, 525, 530, and 535, processes the measured IPS signal wherein the tape guiding noise is dominant, to form a filtered IPS signal waveform wherein the signal of interest comprise a sinusoidal pattern at a known reference frequency. In this filtered waveform, the noise, not only the tape guiding noise, but also noise resulting from tape defects, has been effectively removed.",
        "In step 540, Applicants' method samples, at the selected sampling rate, one or more servo signals. The sampling of step 540 is performed concurrently with the sampling of step 520. In certain embodiments, the one or more servo sensors each provide an analog signal to a servo detector, such as servo detector 140 (FIG. 1), and the servo detector forms one or more servo signals comprising ratios of the detected first frequency and detected second frequency. The servo detector then provides those one or more servo signals to the servo logic, such as logic 160 (FIG. 1). In certain embodiments, the servo sensors provide the servo signals comprising the ratios of detected signals.",
        "Applicants' method transitions from step 540 to step 545 wherein Applicants' method digitally forms one or more measured servo signal waveforms using the data obtained in step 540. Referring again to FIG. 6, waveforms 610, 620, and 630 comprise the measured servo signal waveforms formed in step 545. The Y axis corresponding to curves 610, 620, and 630, is found at the left side of graph 600. As those skilled in the art will appreciate, in the embodiment of FIG. 6 Applicants' method includes using three servo sensors and one IPS sensor.",
        "Applicants' method transitions from step 545 to step 550 wherein Applicants' method determines the real and imaginary components of each of the measured servo signal waveforms of step 545. In certain embodiments, step 550 includes using a Goertzel algorithm as described above. In certain embodiments, step 550 includes using a Goertzel filter as described above.",
        "Applicants' method transitions from step 550 to step 555 wherein Applicants' method forms one or more filtered servo signal waveforms using the real and imaginary components determined in step 550. When forming, for example, the (j)th filtered servo signal waveform using the real and imaginary components of the (j)th measured servo signal waveform at the (P) harmonics of the reference frequency, Applicants' method in step 555 uses the magnitude M(i)(j) determined from real components of the (j)th measured servo signal waveform at the (i)th harmonic of the reference frequency, and the phase \u03c6(i)(j) determined from the imaginary components of that (j)th measured waveform at the (i)th harmonic of the reference frequency, wherein (i) is an integer greater than or equal to 1 and less than or equal to (P).",
        "The DC component of the measured servo signal waveforms is also kept so as to provide an offset between the plurality of servo sensor channels. M(0)(j) comprises that DC component for the (j)th measured servo signal waveform. Further in step 555, Applicants' forms the (j)th filtered servo signal waveform using the equation:\n\n(j)th filtered servo signal waveform=M(0)(j)+M(1)(j)*cos[\u03c6(1)(j)+(2)(\u03c0)(t)/x]+M(2)(j)*cos[\u03c6(2)(j)+(4)(\u03c0)(t)/x]+M(3)(j)*cos[\u03c6(3)(j)+(6)(\u03c0)(t)/x]+M(4)(j)*cos[\u03c6(4)(j)+(8)(\u03c0)(t)/x]\n\nwhere (t)/x comprises a fraction having a value greater than or equal to 0 and less than or equal to 1, where multiplying that fraction by (n)\u03c0 gives a point within the (n)\u03c0 period.",
        "Thus, Applicants' method in steps 540, 545, 550, and 555, processes the detected servo signals wherein the tape guiding noise is dominant, to form one or more filtered servo signal waveforms wherein the signal(s) of interest comprise a sinusoidal pattern at a known reference frequency. In these filtered waveforms, the noise, not only the tape guiding noise, but also noise resulting from tape defects, has been effectively removed.",
        "Applicants' method transitions from step 555 to step 560. Referring now to FIG. 5B, in step 560, Applicants' method correlates each of the one or more filtered servo signal waveforms of step 555 with the filtered IPS signal waveform of step 535. As those skilled in the art will appreciate, one such correlation comprises graphing the one or more filtered servo signal waveforms against the filtered IPS signal waveform. Such a correlation comprises graphing a first sinusoidal function against a second sinusoidal function.",
        "As those skilled in the art will appreciate, a Lissajous pattern comprises a graph of a first sinusoidal function having a first frequency plotted on the y axis combined with a second sinusoidal function having a second frequency plotted on the x axis, i.e. Y and X are both periodic functions of time t given by equations such as X=sin (w*n*t+c) and Y=sin w*t. Different patterns may be generated for different values of n (period shift) and c (phase shift).",
        "If a linear relationship exists between sampled servo signals and measured IPS positions, then graphing the filtered IPS waveform formed in step 535 against the one of the filtered servo signal ratio waveforms of step 555 would give a straight line Lissajous pattern. For example referring to FIG. 9, if curve 910 comprises the filtered IPS waveform, and curve 920 comprises one of the filtered servo signal ratio waveforms, and graphing curve 910 against curve 920 gives straight line curve 930, then a linear relationship exists between the detected servo signal ratios and the measured IPS location. As those skilled in the art will appreciate, curve 910 and 920 have the same frequency, but are phase shifted by 180 degrees. Graphing sinusoidal functions having identical frequencies and phase shifted by 0 degrees similarly gives a straight line curve.",
        "Graphing differing periodic functions against one another gives more complex curves. Referring to FIG. 10, waveform 1010 differs from waveform 1020. Graphing waveform 1010 and against waveform 1020 gives curve 1030. As those skilled in the art will appreciate, the mathematical relationship between curve 1010 and curve 1020 cannot be accurately expressed as a linear function. On the other hand, a more complex function such as a quadratic function might adequately define the relationship between curves 1010 and 1020.",
        "FIG. 7 comprises graph 700 wherein the filtered servo signal waveforms of step 550, wherein (P) equals 3, are plotted against the filtered IPS waveform. Curve 710 comprises the filtered servo signal waveform derived from measured servo signal waveform 610 (FIG. 6) plotted against the filtered IPS waveform derived from measured IPS signal waveform 640 (FIG. 6). Similarly, curves 720 and 730, respectively, comprise the filtered servo signal waveforms derived from measured servo signal waveforms 620 (FIG. 6) and 630 (FIG. 6), respectively, plotted against the filtered IPS waveform.",
        "As those skilled in the art will appreciate, curves 710, 720, and 730, are more complex than curve 930 or curve 1030. In certain embodiments, Applicants' method utilizes a second order curve fitting algorithm to model curves 710, 720, and 730. In other embodiments, Applicants' method utilizes a third order curve fitting algorithm to model curves 710, 720, and 730. In yet other embodiments, Applicants' method uses an (n)th order data analysis algorithm to model curves 710, 720, and 730, wherein (n) is 4, 5, or 6.",
        "In step 562, Applicants' method forms (N) X/Y datapoint arrays using the correlation of step 560. Each X/Y array comprises a plurality of measured datapoints DPACT(i). Each such datapoint DPACT(i) comprises the IPS signal actually measured for a given measured servo signal. In certain embodiments, step 562 is performed by servo logic 160 (FIG. 1).",
        "In step 566, Applicants' method forms (N) transfer functions using, where each of those (N) transfer functions is formed using one of X/Y data arrays of step 562 and an (n)th order regression algorithm. In step 564, that (n)th order is selected. In certain embodiments, step 564 further includes establishing a highest order curve fitting algorithm, i.e. (n)MAX. In certain embodiments, a second order curve fitting algorithm is used. In certain embodiments, a third order curve fitting algorithm is used. In certain embodiments, one or more higher order curve fitting algorithms are used wherein (n) is 4, 5, or 6.",
        "Applicants' method transitions from step 566 to step 568 wherein Applicants' method forms (N) calibration curves using the (N) transfer functions of step 566. As those skilled in the art will appreciate, a calibration curve is formed for each servo sensor being calibrated. Each of those (N) calibration curves includes a plurality of calculated datapoints DPCAL(i). Referring now to FIG. 8, curves 815, 825, and 835, are derived using the transfer functions of step 566. FIG. 8 further recites three sets of measured datapoints 810, 820, and 830.",
        "Applicants' method transitions from step 568 to step 570 wherein Applicants' method compares the measured datapoints DPACT(i) for a given servo sensor with the calculated datapoints DPCAL(i) for that servo sensor. In certain embodiments, Applicants' method determines the residual error RE(i) for each actual datapoint by computing the difference between DPACT(i) and DPCAL(i). In certain embodiments, Applicants' method establishes a maximum residual error REMAX, and compares each RE(i) to that REMAX. In certain embodiments, Applicants' method determines an average residual error REAVG using the values for RE(i), and compares REAVG to REMAX.",
        "Applicants' method transitions from step 570 to step 572 wherein Applicants' method, based upon the comparison of step 570, determines if the transfer function of step 566 models the actual data measured, i.e. determines if the calibration curves formed using that transfer function adequately match the actual datapoints DPACT(i). If Applicants' method determines in step 572 that the transfer function does not model the measured datapoints, then Applicants' method transitions from step 572 to step 574. For example, in certain embodiments Applicants' method determines that the transfer function of step 566 models the measured datapoints if the REAVG is less than or equal to REMAX.",
        "In step 574 Applicants' method determines if (n) equals (n)MAX. If Applicants' method determines in step 574 that (n)MAX has not been reached, then Applicants' method transitions to step 576 wherein (n) is incremented. Thereafter, Applicants' method transitions from step 576 to step 566 wherein a new transfer function is determined using a higher order data regression analysis. In the event no value for (n)MAX is established in step 564, then Applicants' method returns a finding of \u201cYES\u201d in step 574 and transitions to step 578.",
        "In certain embodiments, Applicants' method includes establishing a maximum number (M) of calibration attempts. If Applicants' method determines in step 574 that (n)MAX has been reached or has not been established, then Applicants' method transitions from step 574 to step 578 wherein Applicants' method determines if (M) calibration attempts have been made. If Applicants' method determines in step 578 that the maximum number of calibration attempts have not been made, then Applicants' method transitions from step 578 to step 516 (FIG. 5A).",
        "If Applicants' method determines in step 578 that (M) calibration attempts have already been made, then Applicants' method transitions from step 578 to step 580 wherein an error message is provided. In the event no value for (M) has been established, then Applicants' method returns a finding of \u201cYES\u201d for step 578.",
        "If Applicants' method determines in step 572 that the transfer function of step 566 adequately models the measured datapoints, then Applicants' method transitions to step 582 wherein that transfer function is saved for subsequent use. In certain embodiments, the transfer function is saved in a memory device, such as memory 107 (FIG. 1).",
        "Applicants' method transitions from step 582 to step 584 wherein Applicants' method determines if the one or more sensors require calibration using a different servo pattern. If Applicants' method determines in step 584 that the one or more sensors requires calibration using a different servo pattern, then Applicants' method transitions from step 584 to step 510. Alternatively, if no further calibration is required, then Applicants' method transitions from step 584 to step 590 and ends.",
        "As those skilled in the art will appreciate, the transfer function saved in step 582 is subsequently used to calculate one or more expected position error signals (\u201cPES\u201d) for the servo loop at the laterally offset servo index positions with respect to the sensed first set of linear servo edges. These calculated PES signals are used to track follow during, for example, a read operation, a write operation, and erase operation, and the like.",
        "In certain embodiments, one or more individual steps of Applicants' method summarized in FIGS. 5A and 5B may be combined, eliminated, or reordered.",
        "Applicants' method has been described above in embodiments wherein one or more servo sensors are calibrated. Applicants' method, however, is not limited to calibrating servo sensors. Rather, Applicants' method can be used to calibrate transducers in an electrically noisy environment.",
        "Referring to FIG. 11, in step 1105 Applicants' method calibrates a transducer with respect to a reference signal, where that transducer produces a first signal. In step 1110, the transducer provides that first signal. In step 1115, the reference provides the reference signal. In step 1120, Applicants' method establishes a sampling rate at a reference frequency.",
        "In step 1125, Applicants' method samples the first signal at the sampling rate. In step 1130, Applicants' method samples the reference signal at the reference frequency. In step 1135, Applicants' method digitally forms a measured first signal waveform using the data of step 1125. In step 1140, Applicants' method digitally forms a measured reference signal waveform using the data of step 1130.",
        "In step 1145, Applicants' method determines at (P) harmonics of the reference frequency the real and imaginary components of the measured first signal waveform using the embodiments described above with respect to steps 530 (FIG. 5A) and 550 (FIG. 5A). In step 1150, Applicants' method forms a filtered first signal waveform using the embodiments described above with respect to steps 535 (FIG. 5A) and 555 (FIG. 5A).",
        "In step 1155, Applicants' method determines at (P) harmonics of the reference frequency the real and imaginary components of the measured reference signal waveform using the embodiments described above with respect to steps 530 (FIG. 5A) and 550 (FIG. 5A). In step 1160, Applicants' method forms a filtered reference signal waveform using the embodiments described above with respect to steps 535 (FIG. 5A) and 555 (FIG. 5A).",
        "In step 1165, Applicants' method correlates the filtered reference signal waveform of step 1160 with the filtered first signal waveform of step 1150 to form a transfer function using the embodiments described above with respect to steps 560 (FIG. 5B), 562 (FIG. 5B), 564 (FIG. 5B), and 566 (FIG. 5B). In step 1170, Applicants' method forms a calibration curve for the transducer using the transfer function of step 1165. In certain embodiments, one or more individual steps of Applicants' method summarized in FIG. 11 may be combined, eliminated, or reordered.",
        "Applicants' invention further includes an article of manufacture comprising a computer useable medium having computer readable program code disposed therein for calibrating a transducer in an electrically noisy environment. Applicants' invention further includes a computer program product usable with a programmable computer processor having computer readable program code embodied therein for calibrating a transducer in an electrically noisy environment.",
        "Applicants' method has been described above in embodiments wherein one or more servo sensors are calibrated, and in embodiments wherein a transducer is calibrated. Referring now to FIG. 12, Applicant has found that the method described above can also be used to eliminate noise from a system, such as system 1200, comprising a single input 1210 and a single output 1240. Applicant's method applies a driving sinusoid to the input signal, and then measures the output signal. Any output signal component not at the same frequency of, or a harmonic of, the driving sinsusoid comprises noise 1220 which results from some external influence.",
        "To calculate a transfer function 1230 for system 1200, one generates and applies an input signal 1210 to the system and measures the output 1240 of the system. An example is a semiconductor curve tracer. A sinusoidal signal of voltage or current is applied to the circuit to be characterized, and the resulting output voltage or current is measured at the output of the circuit. In the simplest of systems the input is applied to the X axis of an XY oscilloscope, and the output is applied to the Y axis of the oscilloscope. The resultant curve comprises the transfer function of the device under test. There are many different applications in sensors and transfer functions of systems where this methodology can be practiced.",
        "Such a method can also be more complex in systems where the inputs and outputs are digitized and the computations are all performed in a digital processor or computer. The method, however, remains the same, namely, apply a signal and measure the output that results from the application of the input signal. In the cases where the data is digitized the mathematical relationship of the output to the input can be calculated.",
        "This is all well and good when the signal to noise of the system is positive. But prior art calibration methods quickly break down in the presence of noise because it is difficult to remove the noise from the measurement of the output signal. Noise destroys the correlation between the input and output signals. Therefore in the presence of noise, prior art calibration curves are very wide and/or very noisy because the relationship of input to output is not a one to one relationship. By \u201cnoise,\u201d Applicant means any external influence in the system being measured.",
        "Such noise could change the system output, such as output 1240, where that noise is not be related to the input in any way. Applicant's method eliminates the noise portion of the output signal by using a sinusoid as the input signal and sampling both the input and output at the same frequency and phase. The component of the output signal due to the input signal can be almost completely isolated free of any noise using Applicant's methodology.",
        "FIG. 12 is a generalized block diagram of a transfer function of a non-feedback system 1200. As a general matter, this embodiment of Applicant's method uses a known driving frequency and only looks at the resultant output frequency and harmonics to eliminate noise, where noise is defined as anything not caused by the input frequency. Applicant has found that using digital Goertzel filters blocks out anything not caused by the input signal.",
        "Applicant's method can be applied to a single input, single output system, as well as being applicable to a single input, multiple output system. One application of Applicant's method comprises checking or refining the calibration of a sensor, and/or checking the overall transfer function of a system, in a working servo system, by applying a sinusoidal input signal to the summing junction during the normal operation of the system.",
        "FIG. 13 is a block diagram of a digital servo loop 1300. Applicant's method provides system 1360 with a reference signal 1310, also known as the set point, and controls the output signal 1340. Applicant's method injects a sinusoidal signal 1320 at the virtual summing junction 1330 in the digital servo loop. Applicant's method performs the calibration on the output signal of the controlled system.",
        "In FIG. 13 feedback loop 1370 utilizes calibration constants and/or information abstracted from a lookup table. Using Applicant's method, the operation of the servo system may be continued while the system is calibrated. For example in the case of a robotic system, the system can be piecewise calibrated during normal operation. As the sensor is exercised throughout the total working range, Applicant's method adds in a sinusoid at a specific frequency into the servo loop and measures the resultant output using the methodology described herein above to capture only the frequencies and harmonics of interest. Applicant's method facilitates calibration of the sensor or system in piecewise increments depending on where the system is at a given time.",
        "For example, a robotic arm that extends outwardly comprises a constantly changing moment or center of gravity. As the system is operating, the transfer function can be determined in portions, and those portions can later be subsequently aggregated. In certain embodiments, Applicant's method generates a plurality of transfer functions for a system, wherein the differing transfer functions are used for different \u201cpositions\u201d of the system with an automatic switching of the transfer function as the system moves from one region to another.",
        "Applicant's method selects the frequency of the injected signal to differ from any frequency or harmonic present in the system at the time of calibration. Moreover, in certain embodiments of Applicant's method the system can be re-calibrated during normal operation of the system without stopping operation of the system, providing that the system remains in the linear operating mode during the entire calibration interval. This capability allows control systems that have a variable mass or a variable moment arm to be re-calibrated or the calibration could be checked during the operation of the system without having to stop the operation of the system to perform a calibration or checkout.",
        "In addition, the ability to calibrate a servo system while that system is operating allows the closing of a servo loop with less than optimal calibration constants and refinement of the calibration while the system is working, providing that the gain is held low and the addition of the sinusoid to the system keeps the system operating in the linear region. Applications in robotics or control systems where the load is unknown, or moment is unknown at power up time, Applicant's method operates the system with default calibration settings while using Applicant's methodology to refine the system calibration, thereby continuously optimizing the operation of the system.",
        "Using this embodiment of Applicant's method, a system can be started in slow motion mode, automatically calibrate itself during operation, and then operate faster and faster as the calibration is refined. Applicant has discovered that the longer the Goertzel filter is allowed to run, the narrower the frequency window. Therefore the longer the system is operated, and the more calibration points are generated, the more selective the filters become. This allows Applicant's method to run in a system where the frequency used as the input frequency may occasionally be present in the \u201cnoise.\u201d",
        "FIG. 14 summarizes the steps of Applicant's method to generate a calibration function for an output signal generated by a system receiving an input signal. Referring now to FIG. 14, in step 1405 Applicants' method provides a system which generates an output signal using an input signal. In step 1410, Applicant's method provides an input signal to the system. In step 1415, the method measures an output signal. In step 1420, Applicants' method establishes a sampling rate at a reference frequency.",
        "In step 1425, Applicants' method samples the input signal at the sampling rate. In step 1430, Applicants' method samples the output signal at the reference frequency. In step 1435, Applicants' method digitally forms a measured input signal waveform using the data of step 1425. In step 1440, Applicants' method digitally forms a measured output signal waveform using the data of step 1430.",
        "In step 1445, Applicants' method determines at (P) harmonics of the reference frequency the real and imaginary components of the measured input signal waveform. In certain embodiments, step 1445 uses the embodiments described above with respect to step 530 (FIG. 5A). In other embodiments, step 1445 comprises using a Fast Fourier Transform to determine at (P) harmonics of the reference frequency the real and imaginary components of the measured input signal waveform.",
        "In step 1450, Applicants' method forms a filtered input signal waveform using the embodiments described above with respect to step 535 (FIG. 5A). In step 1455, Applicants' method determines at (P) harmonics of the reference frequency the real and imaginary components of the measured output signal waveform. In certain embodiments, step 1455 comprises using the embodiments described above with respect to step 530 (FIG. 5A). In other embodiments, step 1455 comprises using a Fast Fourier Transform to determine at (P) harmonics of the reference frequency the real and imaginary components of the measured output signal waveform.",
        "In step 1460, Applicants' method forms a filtered output signal waveform using the embodiments described above with respect to step 535. In step 1465, Applicants' method correlates the filtered output signal waveform of step 1460 with the filtered input signal waveform of step 1450 to form a transfer function using the embodiments described above with respect to steps 560 (FIG. 5B), 562 (FIG. 5B), 564 (FIG. 5B), and 566 (FIG. 5B). In step 1470, Applicants' method forms a calibration curve for the system using the transfer function of step 1465. In certain embodiments, one or more individual steps of Applicants' method summarized in FIG. 14 may be combined, eliminated, or reordered.",
        "Applicants' invention further comprises instructions, where those instructions are executed by a processor to perform steps 1410, 1415, 1420, 1425, 1430, 1435, 1440, 1445, 1450, 1455, 1460, 1465, and/or 1470, recited in FIG. 14.",
        "In other embodiments, Applicants' invention includes instructions residing in a computer program product, where those instructions are executed by a computer external to, or internal to, Applicant's system 1200 (FIG. 12) and/or 1300 (FIG. 13), to perform steps 1410, 1415, 1420, 1425, 1430, 1435, 1440, 1445, 1450, 1455, 1460, 1465, and/or 1470, recited in FIG. 14. In either case, the instructions may be encoded in an information storage medium comprising, for example, a magnetic information storage medium, an optical information storage medium, an electronic information storage medium, and the like. By \u201celectronic storage media,\u201d Applicants mean, for example, a device such as a PROM, EPROM, EEPROM, Flash PROM, compactflash, smartmedia, and the like.",
        "While the preferred embodiments of the present invention have been illustrated in detail, it should be apparent that modifications and adaptations to those embodiments may occur to one skilled in the art without departing from the scope of the present invention as set forth in the following claims."
    ],
    "citations": [
        "4677505",
        "5294791",
        "5379165",
        "5457586",
        "5574602",
        "5583784",
        "5617269",
        "5844814",
        "5901008",
        "5923494",
        "5946159",
        "5956199",
        "5999359",
        "6462899",
        "6525898",
        "6606583",
        "6661600",
        "6674603",
        "6839197",
        "2005/0228604"
    ],
    "us_classification": "702106",
    "international_classifications": [
        {
            "classification_level": "A",
            "section": "G",
            "classification_class": "06",
            "subclass": "F",
            "main_group": "19",
            "subgroup": "00"
        }
    ]
}