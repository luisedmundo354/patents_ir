<us-patent-grant lang="EN" dtd-version="v4.2 2006-08-23" file="US07298704-20071120.XML" status="PRODUCTION" id="us-patent-grant" country="US" date-produced="20071106" date-publ="20071120">
<us-bibliographic-data-grant>
<publication-reference>
<document-id>
<country>US</country>
<doc-number>07298704</doc-number>
<kind>B2</kind>
<date>20071120</date>
</document-id>
</publication-reference>
<application-reference appl-type="utility">
<document-id>
<country>US</country>
<doc-number>09899509</doc-number>
<date>20010705</date>
</document-id>
</application-reference>
<us-application-series-code>09</us-application-series-code>
<us-term-of-grant>
<us-term-extension>1232</us-term-extension>
</us-term-of-grant>
<classifications-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>G</section>
<class>01</class>
<subclass>R</subclass>
<main-group>31</main-group>
<subgroup>08</subgroup>
<symbol-position>F</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20071120</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
</classifications-ipcr>
<classification-national>
<country>US</country>
<main-classification>370238</main-classification>
<further-classification>370400</further-classification>
<further-classification>398 49</further-classification>
<further-classification>398 57</further-classification>
</classification-national>
<invention-title id="d0e53">Dynamic path routing with service level guarantees in optical networks</invention-title>
<references-cited>
<citation>
<patcit num="00001">
<document-id>
<country>US</country>
<doc-number>5786916</doc-number>
<kind>A</kind>
<name>Okayama et al.</name>
<date>19980700</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>398 48</main-classification></classification-national>
</citation>
<citation>
<patcit num="00002">
<document-id>
<country>US</country>
<doc-number>6160651</doc-number>
<kind>A</kind>
<name>Chang et al.</name>
<date>20001200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>398 79</main-classification></classification-national>
</citation>
<citation>
<patcit num="00003">
<document-id>
<country>US</country>
<doc-number>6646989</doc-number>
<kind>B1</kind>
<name>Khotimsky et al.</name>
<date>20031100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370238</main-classification></classification-national>
</citation>
<citation>
<patcit num="00004">
<document-id>
<country>US</country>
<doc-number>6661797</doc-number>
<kind>B1</kind>
<name>Goel et al.</name>
<date>20031200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>37039521</main-classification></classification-national>
</citation>
<citation>
<patcit num="00005">
<document-id>
<country>US</country>
<doc-number>6738354</doc-number>
<kind>B1</kind>
<name>Ashwood Smith</name>
<date>20040500</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370248</main-classification></classification-national>
</citation>
<citation>
<patcit num="00006">
<document-id>
<country>US</country>
<doc-number>6898205</doc-number>
<kind>B1</kind>
<name>Chaskar et al.</name>
<date>20050500</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370450</main-classification></classification-national>
</citation>
<citation>
<patcit num="00007">
<document-id>
<country>US</country>
<doc-number>6925257</doc-number>
<kind>B2</kind>
<name>Yoo</name>
<date>20050800</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>398 47</main-classification></classification-national>
</citation>
</references-cited>
<number-of-claims>30</number-of-claims>
<us-exemplary-claim>1</us-exemplary-claim>
<us-field-of-classification-search>
<classification-national>
<country>US</country>
<main-classification>370351</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>370400</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>370401</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>370238</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>3702381</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>398 47- 51</main-classification>
<additional-info>unstructured</additional-info>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>398 75</main-classification>
</classification-national>
</us-field-of-classification-search>
<figures>
<number-of-drawing-sheets>4</number-of-drawing-sheets>
<number-of-figures>9</number-of-figures>
</figures>
<us-related-documents>
<us-provisional-application>
<document-id>
<country>US</country>
<doc-number>60216430</doc-number>
<kind>00</kind>
<date>20000706</date>
</document-id>
</us-provisional-application>
<related-publication>
<document-id>
<country>US</country>
<doc-number>20020018264</doc-number>
<kind>A1</kind>
<date>20020214</date>
</document-id>
</related-publication>
</us-related-documents>
<parties>
<applicants>
<applicant sequence="001" app-type="applicant-inventor" designation="us-only">
<addressbook>
<last-name>Kodialam</last-name>
<first-name>Muralidharan S.</first-name>
<address>
<city>Marlboro</city>
<state>NJ</state>
<country>US</country>
</address>
</addressbook>
<nationality>
<country>omitted</country>
</nationality>
<residence>
<country>US</country>
</residence>
</applicant>
<applicant sequence="002" app-type="applicant-inventor" designation="us-only">
<addressbook>
<last-name>Lakshman</last-name>
<first-name>Tirunell V.</first-name>
<address>
<city>Eatontown</city>
<state>NJ</state>
<country>US</country>
</address>
</addressbook>
<nationality>
<country>omitted</country>
</nationality>
<residence>
<country>US</country>
</residence>
</applicant>
</applicants>
</parties>
<assignees>
<assignee>
<addressbook>
<orgname>Lucent Technologies Inc.</orgname>
<role>02</role>
<address>
<city>Murray Hill</city>
<state>NJ</state>
<country>US</country>
</address>
</addressbook>
</assignee>
</assignees>
<examiners>
<primary-examiner>
<last-name>Nguyen</last-name>
<first-name>Chau</first-name>
<department>2616</department>
</primary-examiner>
<assistant-examiner>
<last-name>Park</last-name>
<first-name>Jung</first-name>
</assistant-examiner>
</examiners>
</us-bibliographic-data-grant>
<abstract id="abstract">
<p id="p-0001" num="0000">A scheme for guaranteeing network tunnel path (NTP). e.g., Internet Protocol (IP), service levels in optical (e.g., wavelength-division multiplex (WDM)) networks. The invention, in one embodiment, accounts for both network topology (e.g. switches, cross-connects, and links between nodes) and resource usage (e.g., available/provisioned link bandwidth and available/used wavelength paths), which information may be available from the IP and optical WDM protocol layers, in particular (i) router capacities and (ii) presence or absence of wavelength conversion capability of optical cross-connect at each node. A determination is made whether to route an arriving request for an NTP over existing topology by computing “good” routes in accordance with a defined metric, or to open a new, available optical wavelength path by provisioning nodes of the topology for, and computing “good” routes for new wavelength paths. As many requests as possible are identified without a priori information of future requests.</p>
</abstract>
<drawings id="DRAWINGS">
<figure id="Fig-EMI-D00000" num="00000">
<img id="EMI-D00000" he="189.82mm" wi="102.02mm" file="US07298704-20071120-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00001" num="00001">
<img id="EMI-D00001" he="228.60mm" wi="167.22mm" file="US07298704-20071120-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00002" num="00002">
<img id="EMI-D00002" he="204.05mm" wi="104.06mm" file="US07298704-20071120-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00003" num="00003">
<img id="EMI-D00003" he="238.93mm" wi="117.26mm" file="US07298704-20071120-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00004" num="00004">
<img id="EMI-D00004" he="210.65mm" wi="114.47mm" file="US07298704-20071120-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
</drawings>
<description id="description">
<?RELAPP description="Other Patent Relations" end="lead"?>
<heading id="h-0001" level="1">CROSS-REFERENCE TO RELATED APPLICATIONS</heading>
<p id="p-0002" num="0001">This application claims the benefit of the filing date of U.S. provisional application no. 60/2 16,430, filed on Jul. 6, 2000</p>
<?RELAPP description="Other Patent Relations" end="tail"?>
<?BRFSUM description="Brief Summary" end="lead"?>
<heading id="h-0002" level="1">BACKGROUND OF THE INVENTION</heading>
<p id="p-0003" num="0002">1. Field of the Invention</p>
<p id="p-0004" num="0003">The present invention relates to path routing of packets with service level guarantees in an optical telecommunication network.</p>
<p id="p-0005" num="0004">2. Description of the Related Art</p>
<p id="p-0006" num="0005">Packet networks establish new paths through a given network topology, sometimes termed network tunnel paths (NTPs). New paths are established by implementing a routing algorithm when a packet connection request for the path arrives at the network (an NTP request). The NTP request generally specifies a source, which is the node or router of the network that receives the packets for the connection from an external entity (also termed the “origination” or “ingress” node/router). The NTP request also specifies at least one destination, which is the node or router of the network that ultimately receives the packets for the connection from the source (also termed the “termination” or “egress” node/router). For networks that allow provisioning of guaranteed service levels, sometime called quality of service (QoS) guarantees, the request may also include a requested minimum service level. Service levels commonly provisioned are guaranteed bandwidth for the connection, minimum delay, minimum dropped packets, or guaranteed buffer size. As known in the art, most, if not all, of these service levels may be converted into a quantity called “effective bandwidth” for the routing algorithm.</p>
<p id="p-0007" num="0006">NTP requests in packet networks following the Internet protocol (IP) may have traffic carried over wavelength division multiplex (WDM) optical networks. Routing of NTP requests occurs through a routing method or algorithm accounting only for packet (i.e., the IP layer) information only. Wavelength routing at the optical devices of the network takes only optical network information (i.e., the optical layer) into account. The typical approach to routing a path of an NTP request is to separate the routing at each protocol or network layer. For example, a routing algorithm may be implemented at the IP layer to route individual requests independently of network provisioning of wavelengths at the optical layer in the WDM optical network to meet overall increases in demand. Wavelength routing of the optical layer sets up a quasi-static logical topology that is then used at the IP layer by the IP routing algorithm.</p>
<p id="p-0008" num="0007">Many algorithms for routing bandwidth guaranteed paths considering only the IP layer topology and resource information exist in the art, such as widest-shortest path routing, minimum-interference routing, and shortest-path routing with load-dependent weighting. Many algorithms exist in the art for wavelength routing at the optical layer. A key difference between IP layer routing algorithms and wavelength routing algorithms is the characterization of node capabilities. In IP layer routing, the algorithms assume that the node has no switching limitations between links arriving at or leaving the node, and account for link topology and the available/used link capacity when routing a new path through the nodes of the network. However, for wavelength routing, optical network node elements may have different types of wavelength conversion (e.g., optical switching or crossconnect) capabilities, and, thus, these algorithms account for these limitations in wavelength conversion by each node.</p>
<heading id="h-0003" level="1">SUMMARY OF THE INVENTION</heading>
<p id="p-0009" num="0008">In accordance with embodiments of the present invention, a network employs integrated, dynamic routing (IDR) of service level (e.g., bandwidth) guaranteed paths for network tunnel paths (NTPs), such as Internet Protocol (IP) packet connections, through an optical network, such as a wavelength division multiplex (WDM) optical network. For example, IDR accounts for both optical network topology (e.g., optical switches and crossconnects as well as the links between nodes) and resource usage information (e.g., the available/provisioned link bandwidth and available/used wavelength paths). IDR determines several aspects of routing for an arriving request for a network tunnel path (e.g., a request to set up a new packet connection). First, IDR determines whether to route an arriving request for a network tunnel path over the existing topology or to open one or more new optical wavelength paths. Second, if IDR determines to route the request over the existing topology, “good” routes in accordance with a defined metric are computed. Third, if new wavelength paths are opened, IDR identifies which nodes (e.g., optical switches or routers) of the topology are to provisioned for the new wavelength path and computes “good” routes for these new wavelength paths. IDR accommodates as many requests as possible without a priori information of future requests. IDR accounts for i) router capacities, and ii) presence or absence of wavelength conversion capability of optical crossconnect at each node.</p>
<p id="p-0010" num="0009">In accordance with exemplary embodiments of the present invention, a path is between an ingress node and an egress node in a packet network for a new demand. A graph is generated for the packet network integrating logical and optical layers as nodes and links of the graph, wherein each node of the graph accounts for presence or absence of wavelength conversion within the node. The graph is modified, if necessary, based on the new demand and any previously routed demands; and a route is determined through the modified graph for the new demand as the path.</p>
<?BRFSUM description="Brief Summary" end="tail"?>
<?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?>
<description-of-drawings>
<heading id="h-0004" level="1">BRIEF DESCRIPTION OF THE DRAWINGS</heading>
<p id="p-0011" num="0010">Other aspects, features, and advantages of the present invention will become more fully apparent from the following detailed description, the appended claims, and the accompanying drawings in which:</p>
<p id="p-0012" num="0011"><figref idref="DRAWINGS">FIG. 1</figref> shows a wavelength division multiplex (WDM) optical network employing embodiments of integrated dynamic routing (IDR) in accordance with the present invention;</p>
<p id="p-0013" num="0012"><figref idref="DRAWINGS">FIG. 2</figref> shows an exemplary algorithm of an embodiment of IDR for the WDM optical network of <figref idref="DRAWINGS">FIG. 1</figref>.</p>
<p id="p-0014" num="0013"><figref idref="DRAWINGS">FIG. 3</figref> shows an alternative representation for the WDM optical network shown in <figref idref="DRAWINGS">FIG. 1</figref> that may be employed as a network graph by the algorithm of <figref idref="DRAWINGS">FIG. 2</figref>;</p>
<p id="p-0015" num="0014"><figref idref="DRAWINGS">FIG. 4</figref> shows an example of a path through routers and optical cross-connects (OXCs) both with and without wavelength conversion;</p>
<p id="p-0016" num="0015"><figref idref="DRAWINGS">FIG. 5</figref> illustrates the path of <figref idref="DRAWINGS">FIG. 4</figref> with links replaced by cut-through arcs representing logical IP links after routing a first demand;</p>
<p id="p-0017" num="0016"><figref idref="DRAWINGS">FIG. 6</figref> shows a network in which min-hop routing may cause interference to routing of future demands;</p>
<p id="p-0018" num="0017"><figref idref="DRAWINGS">FIG. 7</figref> is a graph of the network shown in <figref idref="DRAWINGS">FIG. 6</figref> generated by employing the modeling techniques at the IP and optical layers;</p>
<p id="p-0019" num="0018"><figref idref="DRAWINGS">FIG. 8</figref> shows the graph of <figref idref="DRAWINGS">FIG. 7</figref> that IDR employs to model the combined state of the IP and optical layers after a demand is routed; and.</p>
<p id="p-0020" num="0019"><figref idref="DRAWINGS">FIG. 9</figref> shows the graph of <figref idref="DRAWINGS">FIG. 8</figref> after weighting links in accordance with critical links of the network.</p>
</description-of-drawings>
<?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?>
<?DETDESC description="Detailed Description" end="lead"?>
<heading id="h-0005" level="1">DETAILED DESCRIPTION</heading>
<p id="p-0021" num="0020">Embodiments of the present invention employ an integrated, dynamic routing (IDR) method for routing of bandwidth guaranteed network tunnel path (NTP) in optical networks. In accordance with embodiments of the present invention, IDR accounts for the combined knowledge of resource and topology information in both the packet and optical network layers. IDR employs modeling of network elements at both the IP and optical layer to generate a reduced network graph. Based on the demand of a request for the path, the reduced network graph is modified to account for interference to routing of the demand to future requests. A shortest path routing algorithm is then used to compute the path within the modified and reduced graph.</p>
<p id="p-0022" num="0021">The exemplary embodiments herein describe IDR for routing IP layer label switched path (LSP) requests in multi-protocol label switched (MPLS) packet networks that are carried over wavelength division multiplex (WDM) optical networks. However, as would be apparent to one skilled in the art, the present invention is not so limited and may be employed for a variety of different packet networks with packet layer switching protocols carried through an optical network. IDR as described herein accounts for bandwidth, or effective bandwidth, as a service level guarantee of the NTP request when establishing a path, but the present invention is not so limited and may be extended to other forms of service level. IDR employs link residual capacities, defined as available bandwidth (or effective bandwidth) at the IP layer, and available wavelengths and wavelength conversion capabilities at the optical layer.</p>
<p id="p-0023" num="0022"><figref idref="DRAWINGS">FIG. 1</figref> shows a WDM optical network <b>100</b> having a set N of nodes N<b>1</b>, N<b>2</b>, N<b>3</b>, and N<b>4</b> interconnected by a set L<sub>N</sub>, of optical links l<sub>1.2</sub>, l<sub>1.3</sub>, l<sub>2.3</sub>, l<sub>2.4</sub>, and l<sub>3.4</sub>. (i.e., l<sub>l.j</sub>∈L<sub>N</sub>, 1≦ij≦4.) Each of the nodes in N includes a router for directing packets of link into the node to one or more links out of the node. The router of a node is an optical network element having WDM input and output interfaces. Nodes N<b>1</b> and N<b>4</b> are at the edges of network <b>100</b> (termed edge nodes) that include those routers that connect network <b>100</b> to external networks. The edge nodes include those routers defined as ingress-egress routers. Ingress-egress routers are those routers that are specified as a possible source o or destination t of an LSP request that arrives at an edge node.</p>
<p id="p-0024" num="0023">Thus, WDM optical network <b>100</b> may be an optical network with each link corresponding to an optical fiber carrying multiple wavelengths, and where each network element is either an optical cross-connect (OXC) or a backbone router with a WDM interface. A (e.g., backbone) router may switch packets with any granularity and perform wavelength conversion (i.e., route packets from any incoming interface to any outgoing interface regardless of the particular incoming or outgoing wavelength). An OXC switches any wavelength from any input fiber link to any outgoing fiber link, and is a wavelength switch that operates with wavelength granularity. Thus, an OXC may only switch 1) packets of all connections of a link carried at a given wavelength at an input interface to 2) a link of an output interface at either the same wavelength (no wavelength conversion) or at a different wavelength (wavelength conversion). For example, an OXC implemented with an electrical cross-connect may perform wavelength conversion, while an all-optical OXC, such as those based on MEMS technology, may not perform wavelength conversion.</p>
<p id="p-0025" num="0024">WDM optical network <b>100</b> employs one or more signaling and messaging techniques to communicate system and network level information between nodes. For example, WDM optical network <b>100</b> may use a link-state discovery method similar to those known in the art (such as OSPF and MPLS signaling for RSVP or LDP), and may use signaling and messaging packets within the network to dynamically set-up wavelength paths between nodes. This link-state discovery method and signaling enables WDM optical network <b>100</b> to use a single control-plane for MPLS and optical channel routing, while also extending MPLS signaling/messaging to the optical layer network.</p>
<p id="p-0026" num="0025">WDM optical network <b>100</b> may also use a standard signaling or messaging method (again, such as OSPF and MPLS signaling) to permit each of the routers to exchange network topology and provisioning information. Standard signaling and messaging can thus dynamically request wavelength paths from the optical network. These signaling and messaging techniques between the packet and optical layers enable integrated online routing of bandwidth guaranteed paths where an arriving bandwidth request may either be i) routed over the existing logical (IP-level) topology (due to previously set-up wavelength paths) or ii) routed by setting up new wavelength paths.</p>
<p id="p-0027" num="0026">WDM optical network <b>100</b> employs IDR in accordance with the described embodiments of the present invention. IDR may be implemented by either each node or, as shown in <figref idref="DRAWINGS">FIG. 1</figref>, by route server <b>102</b> coupled to nodes within WDM optical network <b>100</b>. IDR may be implemented with an algorithm incorporating link weighting and shortest path computation, and the algorithm for IDR is termed herein as the maximum open capacity-routing algorithm (MOCA). MOCA determines routing for an LSP request based on 1) certain design objectives and 2) network modeling for the network in accordance with the present invention as described subsequently.</p>
<p id="p-0028" num="0027"><figref idref="DRAWINGS">FIG. 2</figref> shows an exemplary method of implementing of MOCA. At step <b>201</b>, a graph G (N,L<sub>G</sub>) of the cut-through arcs and the residual capacities of all the links is formed from the existing network topology and links (which may be represented by a graph G (N,L<sub>N</sub>)). A node in the existing topology may include i) a router or ii) an OXS either with or without wavelength conversion. Step <b>201</b> forms a new network graph substituting nodes and adding/eliminating links based on whether the node is a router or an OXS either with or without wavelength conversion.</p>
<p id="p-0029" num="0028">At step <b>202</b>, an LSP request is received (e.g., at route server <b>102</b>) that specifies an ingress node a and an egress node b to establish a connection with a flow of D units of bandwidth (or other service level converted to effective bandwidth).</p>
<p id="p-0030" num="0029">At step <b>203</b>, the critical links for the network graph given the LSP request are determined. At step <b>204</b>, each link in the network graph is weighted based on the corresponding number of critical links for the link.</p>
<p id="p-0031" num="0030">At step <b>205</b>, all links which have residual bandwidth less than D are eliminated from the network graph to form a reduced network graph.</p>
<p id="p-0032" num="0031">At step <b>206</b>, Dijkstra's algorithm is employed to compute the minimum distance path in the reduced network graph for the LSP request.</p>
<p id="p-0033" num="0032">At step <b>207</b>, MOCA updates the reduced network graph to reflect the newly routed LSP request along the path generated at step <b>206</b>, which update includes updating the residual capacities of the cut-through arcs and router-to-router arcs along the newly routed path.</p>
<p id="p-0034" num="0033">After step <b>207</b>, MOCA returns to step <b>202</b> for the next LSP request.</p>
<p id="p-0035" num="0034">MOCA design objectives and techniques to generate the network model for WDM optical network <b>100</b> of step <b>201</b>, are now described.</p>
<p id="p-0036" num="0035">The following design objectives may be employed to generate a particular implementation for IDR. First, MOCA is desirably an on-line algorithm. With this objective, after the routing an LSP request it is possible that no further available capacity between certain ingress-egress routers may exist, even though a different routing may have resulted in some available capacity between those routers. Re-routing of existing LSPs is unlikely except upon link failures, (or relatively rare network re-optimization), and routing demands of future LSP requests is possible. Thus, the algorithm is desirably an on-line algorithm capable of routing requests in an “optimal” manner when the requests are not all presented at once and re-routing of existing LSPs is not allowed.</p>
<p id="p-0037" num="0036">Second, MOCA may have knowledge of pairs of ingress-egress routers within the network. Even though demands of future LSP requests may be completely unknown, the routers where LSPs may originate and terminate are known to MOCA since these are the network's edge routers. Thus, the algorithm may use available knowledge of pairs of ingress-egress routers, and does not necessarily consider every node (network element or optical device) as an ingress or egress router.</p>
<p id="p-0038" num="0037">Third, the algorithm accommodates as many LSP requests as possible without any a priori knowledge of future LSP requests.</p>
<p id="p-0039" num="0038">Fourth, the algorithm uses re-routing performance upon link failure as a performance metric. When a link fails, a link restoration algorithm desirably finds as many alternate routes for as many LSPs as possible. If, before failure, certain ingress-egress router pairs have no residual capacity available between them, then re-routing LSPs between these pairs after link failure is not necessarily possible. An objective of the algorithm is to maximize (as mathematically defined) a surrogate measure of the residual capacity between all ingress-egress pairs to allow the algorithm to perform relatively well upon link failure.</p>
<p id="p-0040" num="0039">Fifth, the algorithm routes without traffic splitting, and so routes a desired amount of bandwidth between a given ingress-egress pair without splitting the packets of the connection into multiple paths in an arbitrary way at every potential router in the path.</p>
<p id="p-0041" num="0040">Sixth, any heuristic or approximation algorithm that is implemented on a router or route server desirably executes within a reasonable time-budget for a given packet network having a practical number (e.g., a few thousand) ingress-egress pairs. As known in the art, such algorithm is thus NP-hard with respect to routing at the IP layer.</p>
<p id="p-0042" num="0041">Seventh, the algorithm may be implemented in a distributed manner throughout a given network. Thus, each LSP determined route is computed at the local ingress router without communication with a domain or area wide route-server in communication with all routers of the nodes in the network. Hence, it is desirable for the algorithm to use information derived in current routing protocols or their extensions, such as use of topology information and residual capacities on links. In employing OSPF and its extensions, the topology information may be derived from the link state database, with residual capacities derived using messaging and signaling methods as described above.</p>
<p id="p-0043" num="0042">Eighth, when routing over multiple areas or multiple domains, the algorithm desirably generates information that may be employed by the network for aggregation of bandwidth availability between ingress-egress pairs.</p>
<p id="p-0044" num="0043">Ninth, routing of existing LSPs may be optimized through re-routing of the LSPs with the algorithm. Though frequent re-routing is generally not performed, occasional re-routing of existing LSPs may be employed so that the network may carry more traffic. This optimization is possible since on-line route selection happens with more available information as each successive LSP request is established.</p>
<p id="p-0045" num="0044">Tenth, the algorithm satisfies network policy constraints, such as policy restrictions on the type of links or routers that are permissible for routing a given LSP, and accommodates requirements such as preemption and set-up priorities.</p>
<p id="p-0046" num="0045">With these design objectives, the algorithm is then based on a model of, for example, WDM optical network <b>100</b> that employs the following methods of modeling links, optical and router devices, and link capacities. WDM optical network <b>100</b> is modeled as network with a set N of nodes interconnected by m optical links, {l<sub>1</sub>, l<sub>2</sub>, . . . , l<sub>m</sub>}, with m a positive integer and the m optical links are of the set L<sub>N</sub>. Each optical link supports k wavelengths, {λ<sub>1</sub>, λ<sub>2</sub>, . . . , λ<sub>k</sub>}, with k a positive integer. Each node comprises either 1) a router, 2) an OXC with wavelength conversion, or 3) an OXC without wavelength conversion.</p>
<p id="p-0047" num="0046">The set R is defined as the set of nodes which are routers (e.g., nodes N<b>1</b> and N<b>4</b> of <figref idref="DRAWINGS">FIG. 1</figref>), the set S is defined as the set of nodes which are OXCs with wavelength conversion (e.g., node N<b>2</b>), and the set T is defined as the set of nodes which are OXCs without wavelength conversion (e.g., node N<b>3</b>). Therefore, a node in the set R may multiplex or demultiplex bandwidths at any granularity and also allow wavelength conversion. For ease of understanding in the present description, all routers have sufficient optical interface capacity and may process all the traffic that potentially flows through it. In practice, the algorithm may be modified to account for the case in which a router has limited processing capacity. A node in the set S may do wavelength conversion and may switch a given wavelength on an incoming link to the same or different wavelength on a given outgoing link. A node of the set T only performs optical switching of a given wavelength on an incoming link to the same wavelength on an outgoing link without wavelength conversion.</p>
<p id="p-0048" num="0047">A subset of nodes in the set R are defined as ingress and/or egress nodes that are edge nodes (e.g., nodes N<b>1</b> and N<b>4</b>) and between which LSP connections may be established dynamically. From a given ingress node, an LSP may be established with only a given set of egress nodes. This constraint may arise from policy or service provisioning constraints. Such information is known, changes relatively infrequently, and is available from a database through a provisioning or administrative mechanism. The set P is the set of “distinguished” router pairs defined as the set of all potential ingress-egress router pairs. The set P is a subset or equivalent to (<u style="single">⊂</u>) R×R. All LSP requests (also termed demands) occur between these pairs in the set P.</p>
<p id="p-0049" num="0048">The i<sup>th </sup>LSP request to establish connection LSP<sub>1 </sub>is defined by the triple (o<sub>1</sub>, t<sub>1</sub>, b<sub>1</sub>). The first field, o<sub>1</sub>∈R, specifies the ingress router, the second field, t<sub>1</sub>∈R, specifies the egress router, and the third field, b<sub>1</sub>, specifies the amount of bandwidth (service level) required for LSP<sub>1</sub>. For the following described embodiment, a unit for the bandwidth request, b<sub>1</sub>, may be defined as the transmission rate for one wavelength, though one skilled in the art would realize that all quantities may be scaled. Therefore, typical bandwidth requests as described herein may be fractional values. In addition, service level guarantees, such as quality of service (QoS) are translated into an effective bandwidth value. LSP requests arrive one at a time and there is no knowledge of the characteristics of future demands.</p>
<p id="p-0050" num="0049">Each LSP request arrives at, for example, the router or route server, which determines the explicit-route for the LSP. If a route server is used, the request either arrives directly to the route server (if the LSPs are being set-up manually) or may first arrive at ingress routers which then query the route server via a messaging or signaling protocol to generate the explicit route. The explicit route is then communicated back to the ingress router. The ingress router then uses a signaling mechanism such as RSVP or LDP to set-up the path to the egress and to reserve bandwidth on each link on the path. With MPLS integration into the optical layer the same protocols may be used to establish wavelength paths at the optical layer as needed. For calculating the explicit route, the route server knows the current network topology and the available capacities of links at both the IP and optical layers. Failure of an LSP due to a link failure is detected from a signaling protocol (e.g., LDP or RSVP) information by the edge routers. Re-routing of the LSPs after the link-state database has been updated may occur by routing protocols or by other means.</p>
<p id="p-0051" num="0050">The functional model for developing IDR is now described for 1) routers and OXCs with and without wavelength conversion at the IP layer, and 2) routers and OXCs with and without wavelength conversion at the optical layer. Returning to <figref idref="DRAWINGS">FIG. 1</figref>, nodes N<b>1</b>-N<b>4</b> are connected by optical links in set L<sub>N</sub>. Each of links carries data on wavelengths λ<sub>1 </sub>and λ<sub>2</sub>. Nodes N<b>1</b> and N<b>4</b> are routers (shown as a solid dot), node N<b>2</b> is an OXC with wavelength conversion (shown as a circle with an “X” inside), and node N<b>3</b> is an OXC without wavelength conversion (shown as a circle with parallel lines inside). An LSP request arrives with triple {o=N<b>1</b>, t=N<b>4</b>, b=0.1} which is a request to set up an IP packet connection from node <b>1</b> to node <b>4</b> with a demand (e.g., service guarantee) of 0.1 units along the path. If, for example, this LSP request is routed from node N<b>1</b> to node N<b>3</b> to node N<b>4</b> using wavelength λ<sub>1</sub>, node N<b>3</b> may no longer use wavelength λ<sub>1 </sub>to route traffic of other nodes along the path N<b>2</b> to N<b>3</b> to N<b>4</b>. Node N<b>3</b> may no longer use wavelength λ<sub>1 </sub>to route traffic because node <b>3</b> is an OXC that switches only between the same wavelengths. Node N<b>3</b>, therefore, may no longer multiplex traffic of future LSP requests coming from node N<b>2</b> in incoming link l<sub>2,3 </sub>onto the unused capacity of wavelength λ<sub>1 </sub>in outgoing link l<sub>3,4</sub>. Therefore, once traffic is routed on a particular wavelength from a node in r<sub>1</sub>∈R through a set S∪T (the union of sets S and T) of nodes to another node in r<sub>2</sub>∈R, then this particular wavelength acts is a direct connection between r<sub>1 </sub>and r<sub>2</sub>. This direct connection may be defined as a logical link in the IP layer.</p>
<p id="p-0052" num="0051">The mathematical difference between 1) modeling routers and OXCs with wavelength conversion and 2) OXCs without wavelength conversion is now described. A packet flow may be established in the network between nodes a∈R and b∈R. This packet flow may comprise packets of existing LSP request demands that have been routed, or potential demands that may be routed from node a to node b. Let y<sub>lj</sub><sup>k </sup>represent the amount of flow on link l<sub>l,j </sub>between nodes i, and j over wavelength λ<sub>k</sub>. Since all flows go between nodes a and b at each node in the path through the network, with the exception of nodes a and b themselves, the amount of flow into each node should equal the amount of flow out of the node. If node p∈R∪S then the balance of flow may be expressed as given in equation (1):</p>
<p id="p-0053" num="0052">
<maths id="MATH-US-00001" num="00001">
<math overflow="scroll">
<mtable>
  <mtr>
    <mtd>
      <mrow>
        <mrow>
          <mrow>
            <munder>
              <mo>∑</mo>
              <mi>k</mi>
            </munder>
            <mo>⁢</mo>
            <mrow>
              <munder>
                <mo>∑</mo>
                <mi>l</mi>
              </munder>
              <mo>⁢</mo>
              <msubsup>
                <mi>y</mi>
                <mrow>
                  <mi>l</mi>
                  <mo>⁢</mo>
                  <mstyle>
                    <mspace width="0.3em" height="0.3ex"/>
                  </mstyle>
                  <mo>⁢</mo>
                  <mi>p</mi>
                </mrow>
                <mi>k</mi>
              </msubsup>
            </mrow>
          </mrow>
          <mo>-</mo>
          <mrow>
            <munder>
              <mo>∑</mo>
              <mi>k</mi>
            </munder>
            <mo>⁢</mo>
            <mrow>
              <munder>
                <mo>∑</mo>
                <mi>l</mi>
              </munder>
              <mo>⁢</mo>
              <msubsup>
                <mi>y</mi>
                <mrow>
                  <mi>p</mi>
                  <mo>⁢</mo>
                  <mstyle>
                    <mspace width="0.3em" height="0.3ex"/>
                  </mstyle>
                  <mo>⁢</mo>
                  <mi>l</mi>
                </mrow>
                <mi>k</mi>
              </msubsup>
            </mrow>
          </mrow>
        </mrow>
        <mo>=</mo>
        <mrow>
          <mn>0</mn>
          <mo>⁢</mo>
          <mstyle>
            <mspace width="2.8em" height="2.8ex"/>
          </mstyle>
          <mo>⁢</mo>
          <mrow>
            <mo>∀</mo>
            <mrow>
              <mi>p</mi>
              <mo>∈</mo>
              <mrow>
                <mi>R</mi>
                <mo>⋃</mo>
                <mrow>
                  <mi>S</mi>
                  <mo>.</mo>
                </mrow>
              </mrow>
            </mrow>
          </mrow>
        </mrow>
      </mrow>
    </mtd>
    <mtd>
      <mrow>
        <mo>(</mo>
        <mn>1</mn>
        <mo>)</mo>
      </mrow>
    </mtd>
  </mtr>
</mtable>
</math>
</maths>
</p>
<p id="p-0054" num="0053">If, for example, node p is an OXC without wavelength conversion, then flow may not go from one wavelength to another at this node p. Therefore, the flow balance of equation (1) for this case also holds for each wavelength of the node. In this case, the balance of flow may be expressed as given in equation (2):</p>
<p id="p-0055" num="0054">
<maths id="MATH-US-00002" num="00002">
<math overflow="scroll">
<mtable>
  <mtr>
    <mtd>
      <mrow>
        <mrow>
          <mrow>
            <munder>
              <mo>∑</mo>
              <mi>l</mi>
            </munder>
            <mo>⁢</mo>
            <msubsup>
              <mi>y</mi>
              <mrow>
                <mi>p</mi>
                <mo>⁢</mo>
                <mstyle>
                  <mspace width="0.3em" height="0.3ex"/>
                </mstyle>
                <mo>⁢</mo>
                <mi>l</mi>
              </mrow>
              <mi>k</mi>
            </msubsup>
          </mrow>
          <mo>-</mo>
          <mrow>
            <munder>
              <mo>∑</mo>
              <mi>l</mi>
            </munder>
            <mo>⁢</mo>
            <msubsup>
              <mi>y</mi>
              <mrow>
                <mi>p</mi>
                <mo>⁢</mo>
                <mstyle>
                  <mspace width="0.3em" height="0.3ex"/>
                </mstyle>
                <mo>⁢</mo>
                <mi>l</mi>
              </mrow>
              <mi>k</mi>
            </msubsup>
          </mrow>
        </mrow>
        <mo>=</mo>
        <mrow>
          <mn>0</mn>
          <mo>⁢</mo>
          <mstyle>
            <mspace width="2.8em" height="2.8ex"/>
          </mstyle>
          <mo>⁢</mo>
          <mrow>
            <mo>∀</mo>
            <mrow>
              <mi>k</mi>
              <mo>⁢</mo>
              <mrow>
                <mo>∀</mo>
                <mrow>
                  <mi>p</mi>
                  <mo>∈</mo>
                  <mrow>
                    <mi>T</mi>
                    <mo>.</mo>
                  </mrow>
                </mrow>
              </mrow>
            </mrow>
          </mrow>
        </mrow>
      </mrow>
    </mtd>
    <mtd>
      <mrow>
        <mo>(</mo>
        <mn>2</mn>
        <mo>)</mo>
      </mrow>
    </mtd>
  </mtr>
</mtable>
</math>
</maths>
</p>
<p id="p-0056" num="0055">In contrast, routers and OXCs with wavelength conversion may switch flows of incoming links between different outgoing links at different wavelengths. Thus, from the perspective of representing the flows at the optical layer, the routers and OXCs with wavelength conversion may be modeled equivalently. Given the relationship of flows, the various routines that calculate, for example, maximum flow, critical links, shortest path through a graph use the flow expression of equation (1) for routers and OXCs with wavelength conversion, and will use the flow expression of equation (2) for OXCs without wavelength conversion.</p>
<p id="p-0057" num="0056"><figref idref="DRAWINGS">FIG. 3</figref> shows an alternative representation for the WDM optical network <b>100</b> shown in <figref idref="DRAWINGS">FIG. 1</figref>. In accordance with IDR of the present invention, the representation of <figref idref="DRAWINGS">FIG. 3</figref> may be employed to generate the routing algorithm to compute routes taking into account the capabilities of the different types of network elements. Each node of <figref idref="DRAWINGS">FIG. 1</figref> is expanded into one or more sub-nodes, one sub-node per wavelength (n<sub>1</sub>λ<sub>1</sub>, n<sub>1</sub>λ<sub>2</sub>, n<sub>2</sub>λ<sub>1</sub>, n<sub>2</sub>λ<sub>2</sub>, n<sub>3</sub>λ<sub>2</sub>, n<sub>4</sub>λ<sub>1</sub>, and n<sub>4</sub>λ<sub>2</sub>). For the 2-wavelength example of WDM optical network <b>100</b> of <figref idref="DRAWINGS">FIG. 1</figref>, node N<b>3</b> (the node without wavelength conversion) is represented by two sub-nodes, and nodes N<b>1</b>, N<b>2</b>, and N<b>4</b> (the nodes capable of wavelength conversion) are represented by two sub-nodes and a super-node. For OXCs without wavelength conversion, each sub-node is connected to a wavelength on each incoming or outgoing link as shown in <figref idref="DRAWINGS">FIG. 2</figref>. For OXCs with wavelength conversion and for routers, the node also includes a super-node (N<b>11</b>, N<b>21</b>, and N<b>41</b>) coupled to the sub-nodes by infinite capacity links. Wavelength conversion occurs by traversing through this super-node from one sub-node at one wavelength to another sub-node at a different wavelength (e.g., from n<sub>2</sub>λ<sub>1 </sub>to n<sub>2</sub>λ<sub>2 </sub>through super-node N<b>21</b>).</p>
<p id="p-0058" num="0057">Modeling logical links in an IP network is now described. An LSP request arrives with a demand of r<sub>d </sub>(r<sub>d</sub>≦1 units) is to be routed from node a∈R to node b∈R. If the LSP request is the first demand in the network and the path for this demand is determined, this path, in general, will pass through a sequence of routers and OXCs (with or without wavelength conversion). <figref idref="DRAWINGS">FIG. 4</figref> shows an example of one such path through routers and OXCs (both with and without wavelength conversion). When a particular wavelength of each link between nodes of the path carries r<sub>d </sub>units of the demand, a residual capacity c<sub>r</sub>, of (l−r<sub>d</sub>) units of bandwidth is available in that wavelength for future demands. The OXCs (with or without wavelength conversion) generally do not perform sub-wavelength granularity bandwidth switching or multiplexing. Therefore, if the path passes through some OXCs between routers, the residual bandwidth of(l−r<sub>d</sub>) units of bandwidth may be modeled by introducing a cut-through arc between the routers and eliminating the wavelength links in the original graph. The terms “arc” and “link” are generally equivalent terms in the art. This cut-through arc represents a logical link in the IP layer. All the non cut-through arcs are also the links in the physical (optical) layer. If the path has two routers that are adjacent then the residual capacity of the wavelength that is used to route this demand is reduced by r<sub>d </sub>units.</p>
<p id="p-0059" num="0058"><figref idref="DRAWINGS">FIG. 5</figref> illustrates the path of <figref idref="DRAWINGS">FIG. 4</figref> replacing appropriate links with cut-through arcs representing logical IP links after routing this first LSP. Cut through arcs representing logical IP links are represented by curved lines <b>501</b> and <b>502</b>. IDR in accordance with embodiments of the present invention routes all future demands using the new network model having cut-through arcs as in <figref idref="DRAWINGS">FIG. 5</figref>. If, after routing a future demand, the residual capacity of a logical link in the network reaches one unit (normalized quantity) on any LSP departure (i.e., the logical IP link is no longer used by any LSP), then new network model is modified as follows. The logical IP link with one unit is eliminated and the original physical (optical) links in the network that constituted the logical IP link are re-established with unit capacity. This is equivalent to removing the cut-through wavelength path from the model.</p>
<p id="p-0060" num="0059">Next, the effect of network location of each ingress and egress router for the model is described. Each ingress and egress router for the current LSP request may also serve as an ingress and/or egress router for traffic of LSP requests established in the future. If routing of a current LSP request does not account for the location of these ingress and egress routers with respect to future traffic, then routing of the current LSP request may “interfere” with the routing of some future demands. Such interference is illustrated with respect to the network shown in <figref idref="DRAWINGS">FIG. 6</figref>.</p>
<p id="p-0061" num="0060">Referring to <figref idref="DRAWINGS">FIG. 6</figref>, nodes <b>601</b>-<b>604</b> (shown as dark nodes) represent nodes with routers and node <b>605</b> (shown as a light node) represents a node without a router. Each of links <b>610</b>-<b>613</b> carries two wavelengths, λ<sub>1 </sub>and λ<sub>2</sub>. Employing the modeling techniques at the IP and optical layers described above, the network of <figref idref="DRAWINGS">FIG. 6</figref> may be modeled as shown in <figref idref="DRAWINGS">FIG. 7</figref>. <figref idref="DRAWINGS">FIGS. 6 and 7</figref> show three potential ingress egress pairs, (<b>601</b>, <b>602</b>), (<b>601</b>, <b>603</b>), (<b>604</b>, <b>603</b>), (<b>604</b>, <b>602</b>). The route server (not shown in <figref idref="DRAWINGS">FIGS. 6 and 7</figref>) receives an LSP request for with demand b=0.2 to establish a connection between the ingress egress pair (<b>604</b>, <b>603</b>). The route server determines that this demand is routed along the wavelength λ<sub>1 </sub>(represented by the dotted line <b>701</b> in <figref idref="DRAWINGS">FIG. 7</figref>). After routing this demand, 0.8 units of residual bandwidth remain on the cut-through arc <b>701</b> between nodes <b>604</b> and <b>603</b>.</p>
<p id="p-0062" num="0061"><figref idref="DRAWINGS">FIG. 8</figref> shows the graph of <figref idref="DRAWINGS">FIG. 7</figref> that IDR employs to model the combined state of the IP and optical layers after the demand of 0.2 wavelengths is routed. <figref idref="DRAWINGS">FIG. 8</figref> shows deletion of some wavelength capacity from the optical layer after routing this demand that leaves 0.8 units of residual bandwidth on the cut-through arc <b>701</b>. A subsequent LSP request arrives having demand b=0.3 units to establish a connection between nodes <b>601</b> and node <b>602</b>. A route server has two options for paths to route this demand: a first path is the wavelength corresponding to the dotted line <b>802</b>, and the second path is the wavelength corresponding to the solid line <b>803</b>. If min-hop routing is used to find the path through the minimum number of nodes, then these two paths appear equivalent since the same number of nodes (i.e., one node, node <b>605</b>) is traversed in both paths. However, if wavelength λ<sub>2 </sub>(solid line <b>803</b>) is used to route this demand, then nodes <b>601</b> and <b>603</b> are “disconnected” from the other nodes of the graph. Nodes <b>601</b> and <b>603</b> are “disconnected” from the other nodes of the graph since link <b>805</b> would be deleted from the graph. If wavelength λ<sub>1 </sub>(dotted line <b>802</b>) is used to route this demand, nodes <b>601</b> and <b>603</b> remain connected to other nodes of the graph through link <b>805</b>. Therefore, implementations of IDR in accordance with the present invention route LSP requests along paths that minimize (in a mathematical sense and in accordance with a predefined criterion) the “interference” to the network for routing of future LSP requests, while maximizing (also in a mathematical sense and according to a predefined criterion) the residual or open capacity between the ingress-egress pairs.</p>
<p id="p-0063" num="0062">To minimize interference and maximize open capacity, paths are selected that do not interfere “too much” with potential future requests for routing of demands between other ingress egress pairs. Thus, paths are selected such that the open capacity is maximized after routing by modifying the model to account for open capacity between edge nodes of the network. After some demands have been routed, an estimate of the available open capacity between the different ingress-egress pairs may be generated.</p>
<p id="p-0064" num="0063">The estimate of open capacity is computed as the maximum flow (maxflow) that may be sent from a given ingress node to a given egress node over the network, where the capacity of a link is its current residual capacity. Techniques for computing the maxflow value for a given network graph with provisioned capacity are well known in the art. For example, a discussion of maximum flow calculation is given in Ahuja, Magnanti, and Orlin, <i>Network Flows: Theory, Algorithms, and Applications</i>, Prentice-Hall, 1993, Chapter 7. The maxflow value is computed based on the network as a graph with logical IP links and optical links modeled as previously described. The maxflow value provides an upper bound on the amount of demand that may be routed between an ingress-egress pair if a given demand is not split across multiple paths. The maxflow value also provides an estimate of the available capacity between different ingress-egress pairs. If the maxflow value between a given ingress-egress pair is zero, then no additional demand may be routed between that ingress-egress pair.</p>
<p id="p-0065" num="0064">The maxflow value depends on the residual capacity of the links in the network. For a particular ingress-egress pair, from linear programming duality, the maximum flow also corresponds to the minimum cut (mincut) path. If the capacity of any of the links in the mincut is decreased, the maximum flow value between that ingress-egress pair decreases. Consequently, the number of demands that may be routed between this ingress-egress pair in the future also decreases. Therefore, all the links that belong in the minimum cut for an ingress-egress pair are defined as critical to that ingress-egress pair. Since there may be more than one mincut for an ingress-egress pair, all arcs belonging to any mincut are defined to be critical for that ingress-egress pair, and these links are termed “critical links”. Computation of critical links for unicast and multicast flows is described in U.S. patent application Ser. No. 09/677,009, filed on Sep. 29, 2000, entitled MULTICAST ROUTING WITH SERVICE-LEVEL GUARANTEES BETWEEN INGRESS-EGRESS POINTS IN A PACKET NETWORK, whose teachings are incorporated herein by reference.</p>
<p id="p-0066" num="0065">With critical links known for a network graph, such as the network graph shown in <figref idref="DRAWINGS">FIG. 8</figref>, the links may be “weighted” in accordance with the number of ingress-egress pairs for which that arc (link) is critical. Once the critical links are determined, a path for an LSP request that maximizes open capacity is the path that maximizes the sum of the maxflows between all other ingress-egress pairs. <figref idref="DRAWINGS">FIG. 9</figref> shows that graph for the illustrative example given in <figref idref="DRAWINGS">FIG. 6</figref>, with the number next each are being its weight (number of ingress-egress pairs for which that arc is critical). For the graph of <figref idref="DRAWINGS">FIG. 9</figref>, the shortest path for the route from node <b>1</b> to node <b>2</b> uses λ<sub>1 </sub>instead of λ<sub>2 </sub>due to the weighting of links based on maxflow values and critical link computation.</p>
<p id="p-0067" num="0066">Thus, as shown in <figref idref="DRAWINGS">FIG. 2</figref>, once the critical links are identified for a given i) network topology model, ii) residual capacity of the links, and iii) newly arrived request with demand, IDR generates a weighted graph where the critical links have weights that are an increasing function of their “criticality”. The increasing weight function is selected so as to defer loading of the critical links whenever possible. Then actual route for the LSP request is calculated using a shortest path computation, such as by using the well-known Dijkstra's algorithm, for the weighted graph formed with both the logical IP and optical link modeling techniques described above.</p>
<p id="p-0068" num="0067">Given the techniques for modeling a network at the IP and optical layers and generating critical links, the MOCA algorithm described with respect to <figref idref="DRAWINGS">FIG. 2</figref> adds a demand for a newly arrived LSP request. When a demand leaves the system (i.e., an LSP tear-down request), the MOCA algorithm is reversed and residual capacities increased. When a logical IP link's residual capacity is one unit, then the logical link is removed and the optical links that make up the logical link are introduced back into the network with unit residual capacity.</p>
<p id="p-0069" num="0068">The following pseudo-code may be used to implement MOCA.
<ul id="ul0001" list-style="none">
    <li id="ul0001-0001" num="0069"><b>100</b> INPUT:</li>
    <li id="ul0001-0002" num="0070"><b>101</b> Either:
    <ul id="ul0002" list-style="none">
        <li id="ul0002-0001" num="0071">NETWORK=G(N, L<sub>N</sub>) (For first RUN with network topology information with provisioned links and wavelengths L<sub>N </sub>and the residual capacities, if any, for these links.</li>
    </ul>
    </li>
    <li id="ul0001-0003" num="0072"><b>102</b> OR:
    <ul id="ul0003" list-style="none">
        <li id="ul0003-0001" num="0073">NETWORK=G(N,L<sub>G</sub>) (For subsequent runs utilizing current network G(N,L<sub>G</sub>) with L<sub>G </sub>including the cut-through arcs and the residual capacities of all links.)</li>
    </ul>
    </li>
    <li id="ul0001-0004" num="0074"><b>103</b> LSP<sub>l</sub>={o=a, t=b, d=D} (receive LSP<sub>l </sub>request to route a connection between an ingress node a and an egress node b between for a flow of D units.</li>
    <li id="ul0001-0005" num="0075"><b>104</b> BEGIN:</li>
    <li id="ul0001-0006" num="0076"><b>105</b> IF NETWORK==G″(N,L<sub>G</sub>)</li>
    <li id="ul0001-0007" num="0077"><b>106</b> Call MODEL routine (input NETWORK=G(N,L<sub>N</sub>), output is G(N,L<sub>G</sub>) and is a routine that generates model for NETWORK=G(N,L<sub>N</sub>) of routers, OXSs with wavelength conversion, and OXSs without wavelength conversion as nodes and arcs of graph G(N,L) using cut-through arcs and residual capacities of all the links).</li>
    <li id="ul0001-0008" num="0078"><b>107</b> NETWORK=G(N,L<sub>G</sub>).</li>
    <li id="ul0001-0009" num="0079"><b>108</b> ENDIF</li>
    <li id="ul0001-0010" num="0080"><b>109</b> CALL Routine CRITICAL LINKS (input is G(N,L<sub>G</sub>) and LSP<sub>l </sub>and output is set CR of critical links, routine for a given input NETWORK G(N,L) that computes the critical links for (s,d)∈ P\(a,b).</li>
    <li id="ul0001-0011" num="0081"><b>109</b> FOR ALL l<sub>l</sub>∈ L<sub>G </sub>in G(N,L<sub>G</sub>)
    <ul id="ul0004" list-style="none">
        <li id="ul0004-0001" num="0082">Wl<sub>l</sub>=num(l<sub>l</sub>∈CR) (Each weight Wl<sub>l </sub>of all the arcs (links) l<sub>l</sub>∈ L<sub>G </sub>including the cut-through arcs is calculated as the number of critical links including the linl l<sub>l</sub>).</li>
    </ul>
    </li>
    <li id="ul0001-0012" num="0083"><b>110</b> IF c<sub>rl</sub>&lt;D</li>
    <li id="ul0001-0013" num="0084"><b>111</b> THEN: L<sub>G</sub>=L<sub>G</sub>−l<sub>l </sub>(Eliminate all links which have residual bandwidth less</li>
    <li id="ul0001-0014" num="0085"><b>112</b> than D and form a reduced network G′(N,L<sub>G</sub>).</li>
    <li id="ul0001-0015" num="0086"><b>113</b> ENDIF</li>
    <li id="ul0001-0016" num="0087"><b>114</b> CALL Routine DYKSTRA (the routine implements Dijkstra's algorithm to compute the minimum path P<sub>LSP </sub>for LSP<sub>l </sub>in the reduced network given input is G′(N,L<sub>G</sub>) and LSP<sub>l </sub>and output are nodes N<sub>LSP </sub>and links L<sub>LSP </sub>of P<sub>LSP</sub>).</li>
    <li id="ul0001-0017" num="0088"><b>115</b> CALL Routine UPDATE_NETWORK (the routine receives reduced network G′(N,L<sub>G</sub>) and forms a new, updated network G″(N,L<sub>G</sub>) having cut-through and router-to-router arcs with the updated residual capacities along the routed path).</li>
    <li id="ul0001-0018" num="0089"><b>116</b> NETWORK=G(N,L<sub>G</sub>)←G″(N,L<sub>G</sub>)</li>
    <li id="ul0001-0019" num="0090"><b>116</b> OUTPUT: P<sub>LSP </sub>(provides the path of nodes and links between a and b having a capacity of D units of bandwidth).</li>
</ul>
</p>
<p id="p-0070" num="0091">IDR may allow service provider to rapidly deploy bandwidth guaranteed service by dynamically establishing service level guaranteed paths between an optical network's ingress-egress routers. IDR may be more robust to changing traffic patterns at the IP layer, than a routing algorithm at the IP layer only that uses a static wavelength topology determined a priori with an assumed network traffic distribution.</p>
<p id="p-0071" num="0092">While the exemplary embodiments of the present invention have been described with respect to system blocks implementing certain algorithms, as would be apparent to one skilled in the art, various functions of the blocks may be implemented in the digital domain as processing steps in a software program, in hardware by circuit elements, or in combination of both software and hardware. Such software may be employed in, for example, a digital signal processor, micro-controller or general-purpose computer. Such hardware and software may be embodied within circuits implemented in an integrated circuit.</p>
<p id="p-0072" num="0093">The present invention can be embodied in the form of methods and apparatuses for practicing those methods. The present invention can also be embodied in the form of program code embodied in tangible media, such as floppy diskettes, CD-ROMs, hard drives, or any other machine-readable storage medium, wherein, when the program code is loaded into and executed by a machine, such as a computer, the machine becomes an apparatus for practicing the invention. The present invention can also be embodied in the form of program code, for example, whether stored in a storage medium, loaded into and/or executed by a machine, or transmitted over some transmission medium, such as over electrical wiring or cabling, through fiber optics, or via electromagnetic radiation, wherein, when the program code is loaded into and executed by a machine, such as a computer, the machine becomes an apparatus for practicing the invention. When implemented on a general-purpose processor, the program code segments combine with the processor to provide a unique device that operates analogously to specific logic circuits.</p>
<p id="p-0073" num="0094">It will be further understood that various changes in the details, materials, and arrangements of the parts which have been described and illustrated in order to explain the nature of this invention may be made by those skilled in the art without departing from the principle and scope of the invention as expressed in the following claims.</p>
<?DETDESC description="Detailed Description" end="tail"?>
</description>
<us-math idrefs="MATH-US-00001" nb-file="US07298704-20071120-M00001.NB">
<img id="EMI-M00001" he="6.69mm" wi="76.20mm" file="US07298704-20071120-M00001.TIF" alt="embedded image " img-content="math" img-format="tif"/>
</us-math>
<us-math idrefs="MATH-US-00002" nb-file="US07298704-20071120-M00002.NB">
<img id="EMI-M00002" he="6.69mm" wi="76.20mm" file="US07298704-20071120-M00002.TIF" alt="embedded image " img-content="math" img-format="tif"/>
</us-math>
<us-claim-statement>What is claimed is:</us-claim-statement>
<claims id="claims">
<claim id="CLM-00001" num="00001">
<claim-text>1. A method of routing, along a path between an ingress node and an egress node in a packet network, packetized data corresponding to a new demand, the method comprising the steps of:
<claim-text>(a) generating a graph for the packet network integrating logical and optical layers as nodes and links of the graph, wherein each node of the graph accounts for presence or absence of wavelength conversion within the node;</claim-text>
<claim-text>(b) modifying the graph, if necessary, based on the new demand and any previously routed demands;</claim-text>
<claim-text>(c) determining a route through the modified graph as the path for the new demand; wherein:
<claim-text>for step (a), each wavelength of an optical link between a pair of nodes is modeled with a corresponding wavelength link in the graph, and</claim-text>
<claim-text>step (b) further comprises the step of replacing a series of wavelength links corresponding to a portion of a provisioned path between a pair of nodes with a cut-through arc; and</claim-text>
</claim-text>
<claim-text>(d) providing the determined route to one or more nodes in the packet network to enable the routing of the packetized data along the determined route.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00002" num="00002">
<claim-text>2. The invention as recited in <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein, for step (a), each router and OXC with wavelength conversion is modeled with at least two sub-nodes and a super-node, wherein each sub-node of a node corresponds to an available wavelength and is coupled to each other sub-node of the node through a super-node.</claim-text>
</claim>
<claim id="CLM-00003" num="00003">
<claim-text>3. The invention as recited in <claim-ref idref="CLM-00002">claim 2</claim-ref>, wherein for each coupled pair of nodes in the graph, each sub-node having the same wavelength of the coupled pair is coupled with a corresponding link.</claim-text>
</claim>
<claim id="CLM-00004" num="00004">
<claim-text>4. The invention as recited in <claim-ref idref="CLM-00002">claim 2</claim-ref>, wherein the flow of packets into a node balances the flow of packets out of a node.</claim-text>
</claim>
<claim id="CLM-00005" num="00005">
<claim-text>5. The invention as recited in <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein, for step (a), each OXC without wavelength conversion is modeled with at least two sub-nodes, wherein each sub-node corresponds to an available wavelength at the corresponding node in the graph.</claim-text>
</claim>
<claim id="CLM-00006" num="00006">
<claim-text>6. The invention as recited in <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein, for step (a), each node and link of the graph is present in the graph based on a residual capacity of each wavelength of each optical link.</claim-text>
</claim>
<claim id="CLM-00007" num="00007">
<claim-text>7. The invention as recited in <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein step (a) models i) each node based on whether it is a router, an optical cross-connect (OXC) with wavelength conversion, or an OXC without wavelength conversion, and ii) each available wavelength of an optical link between nodes in the graph with a corresponding link in the graph.</claim-text>
</claim>
<claim id="CLM-00008" num="00008">
<claim-text>8. The invention as recited in <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein step (c) includes the step of computing the path through the modified graph via a shortest path routing algorithm.</claim-text>
</claim>
<claim id="CLM-00009" num="00009">
<claim-text>9. The invention as recited in <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein, for step (a), at least one of the nodes includes an optical interface, and at least one of the links is an optical link, and the nodes and links are in a wavelength division multiplex communications network.</claim-text>
</claim>
<claim id="CLM-00010" num="00010">
<claim-text>10. The invention as recited in <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein step (b) modifies the graph by the steps of:
<claim-text>(b1) eliminating links based on the demand,</claim-text>
<claim-text>(b2) calculating critical links for the graph based on the demand and a residual capacity of each link in the graph,</claim-text>
<claim-text>(b3) weighting links based on the critical links.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00011" num="00011">
<claim-text>11. The invention as recited in <claim-ref idref="CLM-00010">claim 10</claim-ref>, wherein, for step (b2), the critical links are calculated based on a step of estimating an open capacity between pairs of possible ingress and egress nodes in the packet network.</claim-text>
</claim>
<claim id="CLM-00012" num="00012">
<claim-text>12. A method of routing, along a path between an ingress node and an egress node in a packet network, packetized data corresponding to a new demand, the method comprising the steps of:
<claim-text>(a) generating a graph for the packet network integrating logical and optical layers as nodes and links of the graph, wherein each node of the graph accounts for presence or absence of wavelength conversion within the node;</claim-text>
<claim-text>(b) modifying the graph, if necessary, based on the new demand and any previously routed demands, by the steps of:
<claim-text>(b1) eliminating links based on the demand,</claim-text>
<claim-text>(b2) calculating critical links for the graph based on the demand and a residual capacity of each link in the graph, and</claim-text>
<claim-text>(b3) weighting links based on the critical links;</claim-text>
</claim-text>
<claim-text>(c) determining a route through the modified graph as the path for the new demand; and</claim-text>
<claim-text>(d) providing the determined route to one or more nodes in the packet network to enable the routing of the packetized data along the determined route.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00013" num="00013">
<claim-text>13. The invention as recited in <claim-ref idref="CLM-00012">claim 12</claim-ref>, wherein, for step (b2), the critical links are calculated based on a step of estimating an open capacity between pairs of possible ingress and egress nodes in the packet network.</claim-text>
</claim>
<claim id="CLM-00014" num="00014">
<claim-text>14. The invention as recited in <claim-ref idref="CLM-00012">claim 12</claim-ref>, wherein, for step (a), each node and link of the graph is present in the graph based on a residual capacity of each wavelength of each optical link.</claim-text>
</claim>
<claim id="CLM-00015" num="00015">
<claim-text>15. The invention as recited in <claim-ref idref="CLM-00012">claim 12</claim-ref>, wherein step (a) models i) each node based on whether it is a router, an optical cross-connect (OXC) with wavelength conversion, or an OXC without wavelength conversion, and ii) each available wavelength of an optical link between nodes in the graph with a corresponding link in the graph.</claim-text>
</claim>
<claim id="CLM-00016" num="00016">
<claim-text>16. The invention as recited in <claim-ref idref="CLM-00012">claim 12</claim-ref>, wherein step (c) includes the step of computing the path through the modified graph via a shortest path routing algorithm.</claim-text>
</claim>
<claim id="CLM-00017" num="00017">
<claim-text>17. The invention as recited in <claim-ref idref="CLM-00012">claim 12</claim-ref>, wherein, for step (a), at least one of the nodes includes an optical interface, and at least one of the links is an optical link, and the nodes and links are in a wavelength division multiplex communications network.</claim-text>
</claim>
<claim id="CLM-00018" num="00018">
<claim-text>18. Apparatus for routing, along a path between an ingress node and an egress node in a packet network, packetized data corresponding to a new demand, the apparatus comprising:
<claim-text>(a) means for generating a graph for the packet network integrating logical and optical layers as nodes and links of the graph, wherein each node of the graph accounts for presence or absence of wavelength conversion within the node;</claim-text>
<claim-text>(b) means for modifying the graph, if necessary, based on the new demand and any previously routed demands;</claim-text>
<claim-text>(c) means for determining a route through the modified graph as the path for the new demand;</claim-text>
<claim-text>wherein:
<claim-text>for means (a), each wavelength of an optical link between a pair of nodes is modeled with a corresponding wavelength link in the graph, and</claim-text>
<claim-text>means (b) further comprises means for replacing a series of wavelength links corresponding to a portion of a provisioned path between a pair of nodes with a cut-through arc; and</claim-text>
</claim-text>
<claim-text>(d) means for providing the determined route to one or more nodes in the packet network to enable the routing of the packetized data along the determined route.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00019" num="00019">
<claim-text>19. The invention as recited in <claim-ref idref="CLM-00018">claim 18</claim-ref>, wherein means (b) modifies the graph by:
<claim-text>(b1) eliminating links based on the demand,</claim-text>
<claim-text>(b2) calculating critical links for the graph based on the demand and a residual capacity of each link in the graph,</claim-text>
<claim-text>(b3) weighting links based on the critical links.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00020" num="00020">
<claim-text>20. Apparatus for routing, along a path between an ingress node and an egress node in a packet network, packetized data corresponding to a new demand, the apparatus comprising:
<claim-text>(a) means for generating a graph for the packet network integrating logical and optical layers as nodes and links of the graph, wherein each node of the graph accounts for presence or absence of wavelength conversion within the node;</claim-text>
<claim-text>(b) means for modifying the graph, if necessary, based on the new demand and any previously routed demands, by:
<claim-text>(b1) eliminating links based on the demand,</claim-text>
<claim-text>(b2) calculating critical links for the graph based on the demand and a residual capacity of each link in the graph, and</claim-text>
<claim-text>(b3) weighting links based on the critical links;</claim-text>
</claim-text>
<claim-text>(c) means for determining a route through the modified graph as the path for the new demand; and</claim-text>
<claim-text>(d) means for providing the determined route to one or more nodes in the packet network to enable the routing of the packetized data along the determined route.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00021" num="00021">
<claim-text>21. The invention as recited in <claim-ref idref="CLM-00005">claim 5</claim-ref>, wherein for each coupled pair of nodes in the graph, each sub-node having the same wavelength of the coupled pair is coupled with a corresponding link.</claim-text>
</claim>
<claim id="CLM-00022" num="00022">
<claim-text>22. The invention as recited in <claim-ref idref="CLM-00005">claim 5</claim-ref>, wherein the flow of packets into a node at a wavelength balances the flow of packets out of a node at the wavelength.</claim-text>
</claim>
<claim id="CLM-00023" num="00023">
<claim-text>23. The invention as recited in <claim-ref idref="CLM-00001">claim 1</claim-ref>, further comprising the step of routing packetized data along the path.</claim-text>
</claim>
<claim id="CLM-00024" num="00024">
<claim-text>24. The invention as recited in <claim-ref idref="CLM-00011">claim 11</claim-ref>, wherein the step of estimating the open capacity computes the maximum flow value for each of the pairs of possible ingress and egress nodes.</claim-text>
</claim>
<claim id="CLM-00025" num="00025">
<claim-text>25. The invention as recited in <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the method is embodied in a processor of at least one of a route server and a router of a packet network.</claim-text>
</claim>
<claim id="CLM-00026" num="00026">
<claim-text>26. The invention as recited in <claim-ref idref="CLM-00013">claim 13</claim-ref>, wherein the step of estimating the open capacity computes the maximum flow value for each of the pairs of possible ingress and egress nodes.</claim-text>
</claim>
<claim id="CLM-00027" num="00027">
<claim-text>27. The invention as recited in <claim-ref idref="CLM-00012">claim 12</claim-ref>, further comprising the step of routing packetized data along the path.</claim-text>
</claim>
<claim id="CLM-00028" num="00028">
<claim-text>28. A computer-readable medium having stored thereon a plurality of instructions, the plurality of instructions including instructions which, when executed by a processor, cause the processor to implement a method for routing, along a path between an ingress node and an egress node in a packet network, packetized data corresponding to a new demand, the method comprising the steps of:
<claim-text>(a) generating a graph for the packet network integrating logical and optical layers as nodes and links of the graph, wherein each node of the graph accounts for presence or absence of wavelength conversion within the node;</claim-text>
<claim-text>(b) modifying the graph, if necessary, based on the new demand and any previously routed demands;</claim-text>
<claim-text>(c) determining a route through the modified graph as the path for the new demand;</claim-text>
<claim-text>wherein:
<claim-text>for step (a), each wavelength of an optical link between a pair of nodes is modeled with a corresponding wavelength link in the graph, and</claim-text>
<claim-text>step (b) further comprises the step of replacing a series of wavelength links corresponding to a portion of a provisioned path between a pair of nodes with a cut-through arc; and</claim-text>
</claim-text>
<claim-text>(d) providing the determined route to one or more nodes in the packet network to enable the routing of the packetized data along the determined route.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00029" num="00029">
<claim-text>29. The invention as recited in <claim-ref idref="CLM-00028">claim 28</claim-ref>, wherein step (b) modifies the graph by the steps of:
<claim-text>(b1) eliminating links based on the demand,</claim-text>
<claim-text>(b2) calculating critical links for the graph based on the demand and a residual capacity of each link in the graph,</claim-text>
<claim-text>(b3) weighting links based on the critical links.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00030" num="00030">
<claim-text>30. A computer-readable medium having stored thereon a plurality of instructions, the plurality of instructions including instructions which, when executed by a processor, cause the processor to implement a method for routing, along a path between an ingress node and an egress node in a packet network, packetized data corresponding to a new demand, the method comprising the steps of:
<claim-text>(a) generating a graph for the packet network integrating logical and optical layers as nodes and links of the graph, wherein each node of the graph accounts for presence or absence of wavelength conversion within the node;</claim-text>
<claim-text>(b) modifying the graph, if necessary, based on the new demand and any previously routed demands, by the steps of:
<claim-text>(b1) eliminating links based on the demand,</claim-text>
<claim-text>(b2) calculating critical links for the graph based on the demand and a residual capacity of each link in the graph, and</claim-text>
<claim-text>(b3) weighting links based on the critical links;</claim-text>
</claim-text>
<claim-text>(c) determining a route through the modified graph as the path for the new demand; and</claim-text>
<claim-text>(d) providing the determined route to one or more nodes in the packet network to enable the routing of the packetized data along the determined route.</claim-text>
</claim-text>
</claim>
</claims>
</us-patent-grant>
