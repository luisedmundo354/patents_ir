<us-patent-grant lang="EN" dtd-version="v4.2 2006-08-23" file="US07298929-20071120.XML" status="PRODUCTION" id="us-patent-grant" country="US" date-produced="20071106" date-publ="20071120">
<us-bibliographic-data-grant>
<publication-reference>
<document-id>
<country>US</country>
<doc-number>07298929</doc-number>
<kind>B2</kind>
<date>20071120</date>
</document-id>
</publication-reference>
<application-reference appl-type="utility">
<document-id>
<country>US</country>
<doc-number>11237901</doc-number>
<date>20050929</date>
</document-id>
</application-reference>
<us-application-series-code>11</us-application-series-code>
<priority-claims>
<priority-claim sequence="01" kind="national">
<country>JP</country>
<doc-number>2000-360601</doc-number>
<date>20001128</date>
</priority-claim>
<priority-claim sequence="02" kind="national">
<country>JP</country>
<doc-number>2001-110392</doc-number>
<date>20010409</date>
</priority-claim>
</priority-claims>
<classifications-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>G</section>
<class>06</class>
<subclass>K</subclass>
<main-group>9</main-group>
<subgroup>32</subgroup>
<symbol-position>F</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20071120</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
</classifications-ipcr>
<classification-national>
<country>US</country>
<main-classification>382300</main-classification>
<further-classification>382164</further-classification>
<further-classification>382282</further-classification>
<further-classification>358515</further-classification>
<further-classification>358525</further-classification>
<further-classification>358538</further-classification>
</classification-national>
<invention-title id="d0e79">Image interpolation method and apparatus therefor</invention-title>
<references-cited>
<citation>
<patcit num="00001">
<document-id>
<country>US</country>
<doc-number>4751569</doc-number>
<kind>A</kind>
<name>Clinton et al.</name>
<date>19880600</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>358501</main-classification></classification-national>
</citation>
<citation>
<patcit num="00002">
<document-id>
<country>US</country>
<doc-number>4941038</doc-number>
<kind>A</kind>
<name>Walowit</name>
<date>19900700</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>358518</main-classification></classification-national>
</citation>
<citation>
<patcit num="00003">
<document-id>
<country>US</country>
<doc-number>5526471</doc-number>
<kind>A</kind>
<name>Tannenbaum et al.</name>
<date>19960600</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>345419</main-classification></classification-national>
</citation>
<citation>
<patcit num="00004">
<document-id>
<country>US</country>
<doc-number>5579031</doc-number>
<kind>A</kind>
<name>Liang</name>
<date>19961100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>345604</main-classification></classification-national>
</citation>
<citation>
<patcit num="00005">
<document-id>
<country>US</country>
<doc-number>5613048</doc-number>
<kind>A</kind>
<name>Chen et al.</name>
<date>19970300</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>345419</main-classification></classification-national>
</citation>
<citation>
<patcit num="00006">
<document-id>
<country>US</country>
<doc-number>5781196</doc-number>
<kind>A</kind>
<name>Streater</name>
<date>19980700</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00007">
<document-id>
<country>US</country>
<doc-number>5793886</doc-number>
<kind>A</kind>
<name>Cok</name>
<date>19980800</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>382169</main-classification></classification-national>
</citation>
<citation>
<patcit num="00008">
<document-id>
<country>US</country>
<doc-number>5850463</doc-number>
<kind>A</kind>
<name>Horii</name>
<date>19981200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>382118</main-classification></classification-national>
</citation>
<citation>
<patcit num="00009">
<document-id>
<country>US</country>
<doc-number>6018592</doc-number>
<kind>A</kind>
<name>Shinagawa et al.</name>
<date>20000100</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00010">
<document-id>
<country>US</country>
<doc-number>6137910</doc-number>
<kind>A</kind>
<name>Shinagawa et al.</name>
<date>20001000</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00011">
<document-id>
<country>US</country>
<doc-number>6295087</doc-number>
<kind>B1</kind>
<name>Nohda</name>
<date>20010900</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>348234</main-classification></classification-national>
</citation>
<citation>
<patcit num="00012">
<document-id>
<country>US</country>
<doc-number>6331902</doc-number>
<kind>B1</kind>
<name>Lin</name>
<date>20011200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>358  19</main-classification></classification-national>
</citation>
<citation>
<patcit num="00013">
<document-id>
<country>US</country>
<doc-number>6516089</doc-number>
<kind>B1</kind>
<name>McCann et al.</name>
<date>20030200</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00014">
<document-id>
<country>US</country>
<doc-number>6522338</doc-number>
<kind>B1</kind>
<name>Takagl</name>
<date>20030200</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00015">
<document-id>
<country>US</country>
<doc-number>6560358</doc-number>
<kind>B1</kind>
<name>Tsukada</name>
<date>20030500</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00016">
<document-id>
<country>US</country>
<doc-number>6570616</doc-number>
<kind>B1</kind>
<name>Chen</name>
<date>20030500</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>348272</main-classification></classification-national>
</citation>
<citation>
<patcit num="00017">
<document-id>
<country>US</country>
<doc-number>6636234</doc-number>
<kind>B2</kind>
<name>Endo et al.</name>
<date>20031000</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>345646</main-classification></classification-national>
</citation>
<citation>
<patcit num="00018">
<document-id>
<country>US</country>
<doc-number>6639691</doc-number>
<kind>B2</kind>
<name>Acharya</name>
<date>20031000</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00019">
<document-id>
<country>US</country>
<doc-number>6744916</doc-number>
<kind>B1</kind>
<name>Takahashi</name>
<date>20040600</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>382162</main-classification></classification-national>
</citation>
<citation>
<patcit num="00020">
<document-id>
<country>US</country>
<doc-number>6836572</doc-number>
<kind>B2</kind>
<name>Ishiga et al.</name>
<date>20041200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>382300</main-classification></classification-national>
</citation>
<citation>
<patcit num="00021">
<document-id>
<country>US</country>
<doc-number>6844942</doc-number>
<kind>B2</kind>
<name>Rumph et al.</name>
<date>20050100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>358  19</main-classification></classification-national>
</citation>
<citation>
<patcit num="00022">
<document-id>
<country>US</country>
<doc-number>6990249</doc-number>
<kind>B2</kind>
<name>Nomura</name>
<date>20060100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>382254</main-classification></classification-national>
</citation>
<citation>
<patcit num="00023">
<document-id>
<country>US</country>
<doc-number>7035480</doc-number>
<kind>B2</kind>
<name>Akiyoshi et al.</name>
<date>20060400</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>382300</main-classification></classification-national>
</citation>
<citation>
<patcit num="00024">
<document-id>
<country>JP</country>
<doc-number>62-016695</doc-number>
<kind>A</kind>
<date>19870100</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00025">
<document-id>
<country>JP</country>
<doc-number>08-023550</doc-number>
<kind>A</kind>
<date>19960100</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00026">
<document-id>
<country>JP</country>
<doc-number>08-251420</doc-number>
<date>19960900</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00027">
<document-id>
<country>JP</country>
<doc-number>2927350</doc-number>
<date>19981000</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00028">
<document-id>
<country>WO</country>
<doc-number>WO/98/59321</doc-number>
<date>19981200</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00029">
<document-id>
<country>WO</country>
<doc-number>WO/00/17820</doc-number>
<date>20000300</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<nplcit num="00030">
<othercit>Japanese Patent Office, Notification of Reasons for Refusal, Jan. 31, 2006.</othercit>
</nplcit>
<category>cited by other</category>
</citation>
<citation>
<nplcit num="00031">
<othercit>Japanese Patent Office, Notification of Reason(s) for Refusal, Sep. 2, 2005, 2 pages.</othercit>
</nplcit>
<category>cited by other</category>
</citation>
<citation>
<nplcit num="00032">
<othercit>English Abstract of JP Application, 60-155119, Publication No. 62-016695, Jan. 24, 1987, Patent Abstracts of Japan, Japanese Patent Office Website.</othercit>
</nplcit>
<category>cited by other</category>
</citation>
<citation>
<nplcit num="00033">
<othercit>English Abstract of JP Application, 06-180830, Publication No. 08-023550, Jan. 23, 1996, Patent Abstracts of Japan, Japanese Patent Office Website.</othercit>
</nplcit>
<category>cited by other</category>
</citation>
<citation>
<nplcit num="00034">
<othercit>English Abstract of JP Application, JP2927350, Publication No. 10-269355, Oct. 9, 1998, Patent Abstracts of Japan, Japanese Patent Office Website.</othercit>
</nplcit>
<category>cited by other</category>
</citation>
<citation>
<nplcit num="00035">
<othercit>Japanese Patent Office, Decision of Refusal, Jun. 27, 2006.</othercit>
</nplcit>
<category>cited by other</category>
</citation>
<citation>
<nplcit num="00036">
<othercit>English Abstract of JP Application 07-053846, Publication No. 08-251420, Sep. 27, 1996, Patent Abstracts of Japan, Japanese Patent Office Website.</othercit>
</nplcit>
<category>cited by other</category>
</citation>
</references-cited>
<number-of-claims>7</number-of-claims>
<us-exemplary-claim>1</us-exemplary-claim>
<us-field-of-classification-search>
<classification-national>
<country>US</country>
<main-classification>382165</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>382167</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>382284</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>382300</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>382278</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>382164</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>382282</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>382291</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>358518</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>358525</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>358515</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>358538</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>358453</main-classification>
</classification-national>
</us-field-of-classification-search>
<figures>
<number-of-drawing-sheets>19</number-of-drawing-sheets>
<number-of-figures>38</number-of-figures>
</figures>
<us-related-documents>
<continuation>
<relation>
<parent-doc>
<document-id>
<country>US</country>
<doc-number>09991937</doc-number>
<kind>00</kind>
<date>20011126</date>
</document-id>
<parent-grant-document>
<document-id>
<country>US</country>
<doc-number>7035480</doc-number>
<kind>A </kind>
</document-id>
</parent-grant-document>
</parent-doc>
<child-doc>
<document-id>
<country>US</country>
<doc-number>11237901</doc-number>
</document-id>
</child-doc>
</relation>
</continuation>
<related-publication>
<document-id>
<country>US</country>
<doc-number>20060029294</doc-number>
<kind>A1</kind>
<date>20060209</date>
</document-id>
</related-publication>
</us-related-documents>
<parties>
<applicants>
<applicant sequence="001" app-type="applicant-inventor" designation="us-only">
<addressbook>
<last-name>Akiyoshi</last-name>
<first-name>Kozo</first-name>
<address>
<city>Tokyo</city>
<country>JP</country>
</address>
</addressbook>
<nationality>
<country>JP</country>
</nationality>
<residence>
<country>JP</country>
</residence>
</applicant>
<applicant sequence="002" app-type="applicant-inventor" designation="us-only">
<addressbook>
<last-name>Akiyoshi</last-name>
<first-name>Nobuo</first-name>
<address>
<city>Tokyo</city>
<country>JP</country>
</address>
</addressbook>
<nationality>
<country>JP</country>
</nationality>
<residence>
<country>JP</country>
</residence>
</applicant>
<applicant sequence="003" app-type="applicant-inventor" designation="us-only">
<addressbook>
<last-name>Shinagawa</last-name>
<first-name>Yoshihisa</first-name>
<address>
<city>Tokyo</city>
<country>JP</country>
</address>
</addressbook>
<nationality>
<country>JP</country>
</nationality>
<residence>
<country>JP</country>
</residence>
</applicant>
</applicants>
<agents>
<agent sequence="01" rep-type="attorney">
<addressbook>
<last-name>Dowell</last-name>
<first-name>Ralph A.</first-name>
<address>
<country>unknown</country>
</address>
</addressbook>
</agent>
<agent sequence="02" rep-type="attorney">
<addressbook>
<last-name>Henderson</last-name>
<first-name>Neil</first-name>
<address>
<country>unknown</country>
</address>
</addressbook>
</agent>
</agents>
</parties>
<assignees>
<assignee>
<addressbook>
<orgname>Monolith Co., Ltd.</orgname>
<role>03</role>
<address>
<city>Tokyo</city>
<country>JP</country>
</address>
</addressbook>
</assignee>
</assignees>
<examiners>
<primary-examiner>
<last-name>Kassa</last-name>
<first-name>Yosef</first-name>
<department>2624</department>
</primary-examiner>
</examiners>
</us-bibliographic-data-grant>
<abstract id="abstract">
<p id="p-0001" num="0000">An image interpolation method and apparatus by which to quickly generate and display motion pictures using a small amount of data. An image input unit inputs a first image and a second image. A matching processor computes a pixel matching between those images so that a corresponding point is obtained on the second image with respect to a lattice point of a mesh on the first image. The matching processor stores the matching results recorded as a corresponding point file. An intermediate image generator generates an intermediate image between the first image and the second image based on the corresponding point file. In particular, in generating the intermediate image, an attribute of the pixels on one image may be used as such without the attribute being interpolated between pixels of each image. Thus, when generating intermediate images, only one image and a smaller corresponding point file can be used.</p>
</abstract>
<drawings id="DRAWINGS">
<figure id="Fig-EMI-D00000" num="00000">
<img id="EMI-D00000" he="189.57mm" wi="99.40mm" file="US07298929-20071120-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00001" num="00001">
<img id="EMI-D00001" he="198.37mm" wi="114.98mm" file="US07298929-20071120-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00002" num="00002">
<img id="EMI-D00002" he="193.21mm" wi="168.74mm" file="US07298929-20071120-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00003" num="00003">
<img id="EMI-D00003" he="134.70mm" wi="166.88mm" file="US07298929-20071120-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00004" num="00004">
<img id="EMI-D00004" he="172.30mm" wi="189.82mm" file="US07298929-20071120-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00005" num="00005">
<img id="EMI-D00005" he="166.20mm" wi="86.87mm" file="US07298929-20071120-D00005.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00006" num="00006">
<img id="EMI-D00006" he="205.99mm" wi="81.28mm" file="US07298929-20071120-D00006.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00007" num="00007">
<img id="EMI-D00007" he="162.14mm" wi="73.91mm" file="US07298929-20071120-D00007.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00008" num="00008">
<img id="EMI-D00008" he="175.34mm" wi="101.68mm" file="US07298929-20071120-D00008.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00009" num="00009">
<img id="EMI-D00009" he="153.33mm" wi="113.03mm" file="US07298929-20071120-D00009.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00010" num="00010">
<img id="EMI-D00010" he="98.98mm" wi="85.34mm" file="US07298929-20071120-D00010.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00011" num="00011">
<img id="EMI-D00011" he="219.46mm" wi="84.50mm" file="US07298929-20071120-D00011.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00012" num="00012">
<img id="EMI-D00012" he="195.16mm" wi="178.22mm" file="US07298929-20071120-D00012.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00013" num="00013">
<img id="EMI-D00013" he="213.78mm" wi="90.85mm" file="US07298929-20071120-D00013.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00014" num="00014">
<img id="EMI-D00014" he="187.45mm" wi="83.06mm" file="US07298929-20071120-D00014.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00015" num="00015">
<img id="EMI-D00015" he="214.29mm" wi="192.70mm" file="US07298929-20071120-D00015.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00016" num="00016">
<img id="EMI-D00016" he="110.15mm" wi="155.19mm" file="US07298929-20071120-D00016.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00017" num="00017">
<img id="EMI-D00017" he="168.91mm" wi="111.34mm" file="US07298929-20071120-D00017.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00018" num="00018">
<img id="EMI-D00018" he="207.35mm" wi="109.30mm" file="US07298929-20071120-D00018.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00019" num="00019">
<img id="EMI-D00019" he="210.48mm" wi="190.67mm" file="US07298929-20071120-D00019.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
</drawings>
<description id="description">
<?RELAPP description="Other Patent Relations" end="lead"?>
<heading id="h-0001" level="1">CROSS-REFERENCE TO RELATED APPLICATIONS</heading>
<p id="p-0002" num="0001">This application is a continuation of U.S. patent application Ser. No. 09/991,937, filed Nov. 26, 2001 now U.S. Pat. No. 7,035,480, which claims priority from Japanese Patent Application Nos. 2000-360601, filed Nov. 28, 2000 and 2001-110392, filed Apr. 9, 2001. U.S. patent application Ser. No. 09/991,937 is hereby incorporated by reference herein.</p>
<?RELAPP description="Other Patent Relations" end="tail"?>
<?BRFSUM description="Brief Summary" end="lead"?>
<heading id="h-0002" level="1">BACKGROUND OF THE INVENTION</heading>
<p id="p-0003" num="0002">1. Field of the Invention</p>
<p id="p-0004" num="0003">The present invention relates to an image interpolation method and apparatus, and more particularly relates to a method and apparatus for interpolating two images based on a matching technique.</p>
<p id="p-0005" num="0004">2. Description of the Related Art</p>
<p id="p-0006" num="0005">A very large number of users have begun connecting to the Internet utilizing portable telephones. That is, besides normal telephone call usage, the portable telephone is being used more and more for Web services via the Internet and for electronic mail services. In particular, portable telephones are being used to browse data, which can be transmitted and received on a text basis, such as timetable and stock prices, as well as to browse Web pages specialized for portable telephones.</p>
<p id="p-0007" num="0006">Further, color LCDs have recently been employed in the display unit of portable telephones, and distribution of still images and motion pictures in which relatively simple images are dominant has started. Thus, text, images, and motion pictures can now be utilized on portable telephones, so that portable telephones, which were originally designed primarily for audio usage, are now establishing a position as wearable computers.</p>
<p id="p-0008" num="0007">However, the value of portable telephones lies primarily in their light weight, long battery life, economical hardware, smooth operability and so forth, thus, it is undesirable to take a long time or a large expense to download heavy image or motion picture data (i.e. images or motion pictures generally require large amounts of data). Moreover, the CPU power required to process such heavy image data can be disadvantageous in terms of the power consumed.</p>
<heading id="h-0003" level="1">SUMMARY OF THE INVENTION</heading>
<p id="p-0009" num="0008">The present invention has been made in view of the foregoing circumstances and an object thereof is to provide an image interpolation technique, method and apparatus by which motion pictures can be generated and displayed based on a small amount of image data.</p>
<p id="p-0010" num="0009">The present invention relates to an image interpolation technique. This technique can utilize the image matching technique (referred to as the “premised technology” hereinafter) proposed in Japanese Patent No. 2927350 by the same inventors of the present patent application.</p>
<p id="p-0011" num="0010">An embodiment according to the present invention relates to an image interpolation method. In this method, two images (referred to as a first image and a second image hereinafter) are first matched, that is, selected attributes (such as position, intensity, color, etc.) of pixels or points in the first image are matched to attributes of pixels or points in the second image. Thereafter, an interpolation is performed between the first image and the second image to generate an intermediate image. In the interpolation, only selected attributes, such as position, are used from both the first and second images, while other attributes, such as color, are determined from only one image. It is to be noted here that “points” and “pixels” are generally used interchangeably so that the two are not distinct.</p>
<p id="p-0012" num="0011">For example, suppose, as a result of the matching, that it is known that a point p<sub>1 </sub>(x<sub>1</sub>, y<sub>1</sub>) of the first image corresponds to a point p<sub>2 </sub>(x<sub>2</sub>, y<sub>2</sub>) of the second image. Moreover, suppose that the colors or pixel values (simply referred to as color hereinafter) of these points are v<sub>1 </sub>and v<sub>2</sub>, respectively. In this case, an intermediate image of the first image and second image can be generated by interpolating the coordinates of these points. Namely, in the intermediate image, the position of a point (hereinafter referred to as an interpolation point) moved from the point p<sub>1 </sub>is expressed in the following formula.
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?>((1−t)x<sub>1</sub>+tx<sub>2</sub>, (1−t)y<sub>1</sub>+y<sub>2</sub>)<?in-line-formulae description="In-line Formulae" end="tail"?>
<br/>
In a similar way, in the premised technology, the color of the interpolation point is set to
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?>(1−t)v<sub>1</sub>+tv<sub>2</sub><?in-line-formulae description="In-line Formulae" end="tail"?>
<br/>
by interpolating the color v<sub>1 </sub>of the point p<sub>1 </sub>of the first image and the color v<sub>2 </sub>of the point p<sub>2 </sub>of the second image.
</p>
<p id="p-0013" num="0012">However, the present invention is characterized by the feature that the interpolation computation is skipped for certain attributes, for example, as to color, and only one of the color v<sub>1 </sub>of the first image point p<sub>1 </sub>and the color v<sub>2 </sub>of the second image point p<sub>2 </sub>is adopted as the color for the interpolation point whereby the color adopted remains intact. Notice that if both images are used as to the color in the course of performing the interpolation, then data for both images will be necessary. However, if only one of the images is used, only one of the images suffices. Thus, according to the present invention, the amount of data to be loaded into the memory at the time of performing the interpolation is significantly reduced, thus also reducing the data transmission time and power consumed. The interpolation processing becomes easier, which is further advantageous in terms of power consumed. From a different point of view, the present invention realizes a higher compression rate for motion pictures.</p>
<p id="p-0014" num="0013">Since the result of the matching is utilized for interpolating the positions, both images are implicitly referred to. If the first image only is used for interpolating colors, the intermediate image generated by the interpolation according to the present invention is such that each point of the first image is gradually moved using the original color until a state close to the second image is realized. It is to be noted that the colors of the second image can not be reproduced and the colors of the first image remain intact. Thus, for example, even in a case where the color tone of the second image is dark as a whole compared to that of the first image, the intermediate image does not become dark gradually but is generated reflecting the brightness of the first image as it is.</p>
<p id="p-0015" num="0014">Another embodiment of the present invention is made to modify this point, and the points at which colors remain are selected from the first image and the second image in an average manner for the interpolation of the colors. For example, the color of the first image remains intact for odd-number pixels while the color of the second image remains intact for even-number pixels. Thus, average-like colors for the first and second images can be adopted in advance for the entire image, so that the intermediate image provides natural colors. By implementing this method, the chance or situation in which the color changes abruptly and discontinuously at the second image can be reduced or avoided.</p>
<p id="p-0016" num="0015">Another embodiment of the present invention relates also to an image interpolation method. This method comprises: acquiring a first image and a second image; computing a matching between the first image and the second image and detecting a point on the second image which corresponds to a point on the first image; and interpolating the point on the first image and the point on the second image, wherein, in the interpolating step, a coordinate of the point on the first image and that of the point on the second image are effected in an interpolation computation, and the interpolation computation as to colors thereof is skipped, so that an original color of only one of the points is used as an interpolation result.</p>
<p id="p-0017" num="0016">Still another embodiment of the present invention relates also to an image interpolation method. This method comprises: acquiring a first image, a second image and a corresponding point file which describes a matching result thereof; and generating an intermediate image of the first image and the second image by performing interpolation thereon based on the corresponding point file, wherein, in the generating step, a coordinate of the point on the first image and that of the point on the second image are effected in an interpolation computation, and the interpolation computation as to colors thereof is skipped, so that an original color of only one of the points is used as an interpolation result.</p>
<p id="p-0018" num="0017">In the methods above, the interpolation process requires a matching result that includes correspondence data on the pixel positions and only one of the first image and the second image, thus achieving a data reducing effect and other above-described effects.</p>
<p id="p-0019" num="0018">Another embodiment of the present invention relates to an image interpolation apparatus. This apparatus includes: an image input unit which acquires a first image and a second image; a matching processor which computes a matching between the first image and the second image so that a point on the second image corresponding to a point on the first image is detected; and an intermediate image generator which generates an intermediate image by interpolating the point on the first image and that on the second image, wherein, in the intermediate image generator, a coordinate of the point on the first image and that of the point on the second image are effected in an interpolation computation, and the interpolation computation as to colors thereof is skipped, so that an original color of only one of the points is used as an interpolation result.</p>
<p id="p-0020" num="0019">The matching processor may detect, by the image matching, points on the second image that corresponds to lattice points of a mesh provided on the first image, and based on the thus detected result a destination polygon corresponding to the second image may be defined on a source polygon that constitutes the mesh on the first image.</p>
<p id="p-0021" num="0020">The matching processor may perform a pixel-by-pixel matching computation based on correspondence between a critical point detected through a two-dimensional search on the first image and a critical point detected through a two-dimensional search on the second image.</p>
<p id="p-0022" num="0021">Moreover, the matching processor may multiresolutinalize the first image and the second image by respectively extracting the critical points, then may perform a pixel-by-pixel matching computation between same multiresolution levels, and may acquire a pixel-by-pixel correspondence relation in a most fine level of resolution at a final stage while inheriting a result of the pixel-by-pixel matching computation to a matching computation in a different multiresolution level.</p>
<p id="p-0023" num="0022">Here, the matching method utilizing critical points is an application of the premised technology. However, the premised technology does not touch on the features of the present invention relating to the lattice points or the polygons determined thereby. Introduction of a somewhat simplified technique, such as the polygons in the present invention, makes possible a reduction of the size of a file describing the correspondence relation between the first image and the second image (hereinafter referred to as a “corresponding point file”).</p>
<p id="p-0024" num="0023">Namely, in a case where the first and second images have n×m pixels respectively, there are (n×m)<sup>2 </sup>combinations if pixel-by-pixel correspondence is used, and the size of the corresponding point file will become quite large. However, instead, this correspondence may be modified by describing the correspondence relation between the lattice points or, substantially equivalently, the correspondence relation between polygons determined by the lattice points, so that the data amount may be reduced. Thereafter, the first or second image and the small-sized corresponding point file can be used for reproduction of motion pictures, thereby improving transmission, storage and so forth of motion pictures. As has been described, according to the present invention the transmission or storage of the first or second image can suffice for image interpolation.</p>
<p id="p-0025" num="0024">Another embodiment of the present invention relates to an image interpolation apparatus. This apparatus includes: a communication unit which acquires a first image, a second image and a corresponding point file which describes a matching result thereof; and an intermediate image generator which generates an intermediate image of the first image and the second image by performing interpolation thereon based on the corresponding point file, wherein, in the intermediate image generator, a coordinate of the point on the first image and that of the point on the second image are effected in an interpolation computation, and the interpolation computation as to colors thereof is skipped, so that an original color of only one of the points is used as an interpolation result. The communication unit is a functional block in general capable of receiving and transmitting data to and from an external unit.</p>
<p id="p-0026" num="0025">The intermediate image generator may be such that the second image is not referred to and an original color of a point included in the first image is utilized as an interpolation result, or it may be such that that either of points of the first image or those of the second image are selected in a substantially averaged manner, and then colors of the thus selected points are used as an interpolation result.</p>
<p id="p-0027" num="0026">It is to be noted that the premised technology is not a prerequisite in the present invention. Moreover, it is also possible to have replacement or substitution of the above-described structural components and elements of methods in part or whole as between method and apparatus or to add elements to either method or apparatus. Also, the methods may be implemented by a computer program and saved on a recording medium or the like and are all effective as and encompassed by the present invention.</p>
<p id="p-0028" num="0027">Moreover, this summary of the invention does not describe only necessary features so that an embodiment of the present invention may also be a sub-combination of these described features.</p>
<?BRFSUM description="Brief Summary" end="tail"?>
<?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?>
<description-of-drawings>
<heading id="h-0004" level="1">BRIEF DESCRIPTION OF THE DRAWINGS</heading>
<p id="p-0029" num="0028"><figref idref="DRAWINGS">FIG. 1</figref><i>a </i>is an image obtained as a result of the application of an averaging filter to a human facial image.</p>
<p id="p-0030" num="0029"><figref idref="DRAWINGS">FIG. 1</figref><i>b </i>is an image obtained as a result of the application of an averaging filter to another human facial image.</p>
<p id="p-0031" num="0030"><figref idref="DRAWINGS">FIG. 1</figref><i>c </i>is an image of a human face at p<sup>(5,0) </sup>obtained in a preferred embodiment in the premised technology.</p>
<p id="p-0032" num="0031"><figref idref="DRAWINGS">FIG. 1</figref><i>d </i>is another image of a human face at p<sup>(5,0) </sup>obtained in a preferred embodiment in the premised technology.</p>
<p id="p-0033" num="0032"><figref idref="DRAWINGS">FIG. 1</figref><i>e </i>is an image of a human face at p<sup>(5,1) </sup>obtained in a preferred embodiment in the premised technology.</p>
<p id="p-0034" num="0033"><figref idref="DRAWINGS">FIG. 1</figref><i>f </i>is another image of a human face at p<sup>(5,1) </sup>obtained in a preferred embodiment in the premised technology.</p>
<p id="p-0035" num="0034"><figref idref="DRAWINGS">FIG. 1</figref><i>g </i>is an image of a human face at p<sup>(5,2) </sup>obtained in a preferred embodiment in the premised technology.</p>
<p id="p-0036" num="0035"><figref idref="DRAWINGS">FIG. 1</figref><i>h </i>is another image of a human face at p<sup>(5,2) </sup>obtained in a preferred embodiment in the premised technology.</p>
<p id="p-0037" num="0036"><figref idref="DRAWINGS">FIG. 1</figref><i>i </i>is an image of a human face at p<sup>(5,3) </sup>obtained in a preferred embodiment in the premised technology.</p>
<p id="p-0038" num="0037"><figref idref="DRAWINGS">FIG. 1</figref><i>j </i>is another image of a human face at p<sup>(5,3) </sup>obtained in a preferred embodiment in the premised technology.</p>
<p id="p-0039" num="0038"><figref idref="DRAWINGS">FIG. 2R</figref> shows an original quadrilateral.</p>
<p id="p-0040" num="0039"><figref idref="DRAWINGS">FIG. 2A</figref> shows an inherited quadrilateral.</p>
<p id="p-0041" num="0040"><figref idref="DRAWINGS">FIG. 2B</figref> shows an inherited quadrilateral.</p>
<p id="p-0042" num="0041"><figref idref="DRAWINGS">FIG. 2C</figref> shows an inherited quadrilateral.</p>
<p id="p-0043" num="0042"><figref idref="DRAWINGS">FIG. 2D</figref> shows an inherited quadrilateral.</p>
<p id="p-0044" num="0043"><figref idref="DRAWINGS">FIG. 2E</figref> shows an inherited quadrilateral.</p>
<p id="p-0045" num="0044"><figref idref="DRAWINGS">FIG. 3</figref> is a diagram showing the relationship between a source image and a destination image and that between the m-th level and the (m−1)th level, using a quadrilateral.</p>
<p id="p-0046" num="0045"><figref idref="DRAWINGS">FIG. 4</figref> shows the relationship between a parameter η (represented by x-axis) and energy C<sub>f </sub>(represented by y-axis).</p>
<p id="p-0047" num="0046"><figref idref="DRAWINGS">FIG. 5</figref><i>a </i>is a diagram illustrating determination of whether or not the mapping for a certain point satisfies the bijectivity condition through the outer product computation.</p>
<p id="p-0048" num="0047"><figref idref="DRAWINGS">FIG. 5</figref><i>b </i>is a diagram illustrating determination of whether or not the mapping for a certain point satisfies the bijectivity condition through the outer product computation.</p>
<p id="p-0049" num="0048"><figref idref="DRAWINGS">FIG. 6</figref> is a flowchart of the entire procedure of a preferred embodiment in the premised technology.</p>
<p id="p-0050" num="0049"><figref idref="DRAWINGS">FIG. 7</figref> is a flowchart showing the details of the process at S<b>1</b> in <figref idref="DRAWINGS">FIG. 6</figref>.</p>
<p id="p-0051" num="0050"><figref idref="DRAWINGS">FIG. 8</figref> is a flowchart showing the details of the process at S<b>10</b> in <figref idref="DRAWINGS">FIG. 7</figref>.</p>
<p id="p-0052" num="0051"><figref idref="DRAWINGS">FIG. 9</figref> is a diagram showing correspondence between partial images of the m-th and (m−1)th levels of resolution.</p>
<p id="p-0053" num="0052"><figref idref="DRAWINGS">FIG. 10</figref> is a diagram showing source images generated in the embodiment in the premised technology.</p>
<p id="p-0054" num="0053"><figref idref="DRAWINGS">FIG. 11</figref> is a flowchart of a preparation procedure for S<b>2</b> in <figref idref="DRAWINGS">FIG. 6</figref>.</p>
<p id="p-0055" num="0054"><figref idref="DRAWINGS">FIG. 12</figref> is a flowchart showing the details of the process at S<b>2</b> in <figref idref="DRAWINGS">FIG. 6</figref>.</p>
<p id="p-0056" num="0055"><figref idref="DRAWINGS">FIG. 13</figref> is a diagram showing the way a submapping is determined at the 0-th level.</p>
<p id="p-0057" num="0056"><figref idref="DRAWINGS">FIG. 14</figref> is a diagram showing the way a submapping is determined at the first level.</p>
<p id="p-0058" num="0057"><figref idref="DRAWINGS">FIG. 15</figref> is a flowchart showing the details of the process at S<b>21</b> in <figref idref="DRAWINGS">FIG. 6</figref>.</p>
<p id="p-0059" num="0058"><figref idref="DRAWINGS">FIG. 16</figref> is a graph showing the behavior of energy C<sub>ƒ</sub><sup>(m,s) </sup>corresponding to f<sup>(m,s) </sup>(λ=iΔλ) which has been obtained for a certain f<sup>(m,s) </sup>while changing λ.</p>
<p id="p-0060" num="0059"><figref idref="DRAWINGS">FIG. 17</figref> is a diagram showing the behavior of energy C<sub>ƒ</sub><sup>(n) </sup>corresponding to f<sup>(n) </sup>(η=iΔη)(i=0, 1, . . . ) which has been obtained while changing η.</p>
<p id="p-0061" num="0060"><figref idref="DRAWINGS">FIG. 18</figref> shows how certain pixels correspond between the first image and the second image.</p>
<p id="p-0062" num="0061"><figref idref="DRAWINGS">FIG. 19</figref> shows a correspondence relation between a source polygon taken on the first image and a destination polygon taken on the second image.</p>
<p id="p-0063" num="0062"><figref idref="DRAWINGS">FIG. 20</figref> shows a procedure by which to obtain points in the destination polygon corresponding to points in the source polygon.</p>
<p id="p-0064" num="0063"><figref idref="DRAWINGS">FIG. 21</figref> is a flowchart showing a procedure for generating the corresponding point file according to a present embodiment.</p>
<p id="p-0065" num="0064"><figref idref="DRAWINGS">FIG. 22</figref> is a flowchart showing a procedure for generating an intermediate image based on the corresponding point file.</p>
<p id="p-0066" num="0065"><figref idref="DRAWINGS">FIG. 23</figref> shows a structure of an image interpolation apparatus according to a present embodiment.</p>
</description-of-drawings>
<?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?>
<?DETDESC description="Detailed Description" end="lead"?>
<heading id="h-0005" level="1">DETAILED DESCRIPTION OF THE INVENTION</heading>
<p id="p-0067" num="0066">The invention will now be described based on the preferred embodiments, which do not intend to limit the scope of the present invention, but exemplify the invention. All of the features and the combinations thereof described in the embodiment are not necessarily essential to the invention.</p>
<p id="p-0068" num="0067">First, the multiresolutional critical point filter technology and the image matching processing using the technology, both of which will be utilized in the preferred embodiments, will be described in detail as “Premised Technology”. Namely, the following sections [1] and [2] (below) belong to the premised technology, where [1] describes elemental techniques and [2] describes a processing procedure. These techniques are patented under Japanese Patent No. 2927350 and owned by the same inventors of the present invention. As described in more detail below following the discussion of the premised technology, according to the embodiments of the present invention there is provided a mesh on an image, so that lattice points of the mesh represent a plurality of pixels of the image. Thus, even though application efficiency for a pixel-by-pixel matching technique as described in the premised technology is naturally high, it is to be noted that the image matching techniques provided in the present embodiments are not limited to the same levels. In particular, in <figref idref="DRAWINGS">FIGS. 18 to 23</figref>, image interpolation techniques using embodiments of the present invention and utilizing the premised technology will be described in more detail.</p>
<p id="h-0006" num="0000">Premised Technology</p>
<p id="h-0007" num="0000">[1] Detailed Description of Elemental Techniques</p>
<p id="h-0008" num="0000">[1.1] Introduction</p>
<p id="p-0069" num="0068">Using a set of new multiresolutional filters called critical point filters, image matching is accurately computed. There is no need for any prior knowledge concerning the content of the images or objects in question. The matching of the images is computed at each resolution while proceeding through the resolution hierarchy. The resolution hierarchy proceeds from a coarse level to a fine level. Parameters necessary for the computation are set completely automatically by dynamical computation analogous to human visual systems. Thus, There is no need to manually specify the correspondence of points between the images.</p>
<p id="p-0070" num="0069">The premised technology can be applied to, for instance, completely automated morphing, object recognition, stereo photogrammetry, volume rendering, and smooth generation of motion images from a small number of frames. When applied to morphing, given images can be automatically transformed. When applied to volume rendering, intermediate images between cross sections can be accurately reconstructed, even when a distance between cross sections is rather large and the cross sections vary widely in shape.</p>
<p id="h-0009" num="0000">[1.2] The Hierarchy of the Critical Point Filters</p>
<p id="p-0071" num="0070">The multiresolutional filters according to the premised technology preserve the intensity and location of each critical point included in the images while reducing the resolution. Initially, let the width of an image to be examined be N and the height of the image be M. For simplicity, assume that N=M=2 n where n is a positive integer. An interval [0, N] ⊂R is denoted by I. A pixel of the image at position (i, j) is denoted by p<sup>(i,j) </sup>where i,j εI.</p>
<p id="p-0072" num="0071">Here, a multiresolutional hierarchy is introduced. Hierarchized image groups are produced by a multiresolutional filter. The multiresolutional filter carries out a two dimensional search on an original image and detects critical points therefrom. The multiresolutinal filter then extracts the critical points from the original image to construct another image having a lower resolution. Here, the size of each of the respective images of the m-th level is denoted as 2<sup>m</sup>33 2<sup>m </sup>(0&lt;m&lt;n). A critical point filter constructs the following four new hierarchical images recursively, in the direction descending from n.
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>p</i><sub>(i,j)</sub><sup>(m,0)</sup>=min(min(<i>p</i><sub>(2i,2j)</sub><sup>(m+1,0)</sup><i>, p(</i><sub>2i,2j+1)</sub><sup>(m+1,0)</sup>), min(<i>p</i><sub>(2i+1,2j)</sub><sup>(m+1,0)</sup><i>, p</i><sub>(2i+1,2j+1)</sub><sup>(m+1,0)</sup>))<?in-line-formulae description="In-line Formulae" end="tail"?>
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>p</i><sub>(i,j)</sub><sup>(m,1)</sup>=max(min(<i>p</i><sub>(2i,2j)</sub><sup>(m+1,1)</sup><i>, p</i><sub>(2i,2j+1)</sub><sup>(m+1,1)</sup>), min(<i>p</i><sub>(2i+1,2j)</sub><sup>(m+1,1)</sup><i>, p</i><sub>(2i+1,2j+1)</sub><sup>(m+1,1)</sup>))<?in-line-formulae description="In-line Formulae" end="tail"?>
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>p</i><sub>(i,j)</sub><sup>(m,2)</sup>=min(max(<i>p</i><sub>(2i,2j)</sub><sup>(m+1,2)</sup><i>, p</i><sub>(2i,2j+1)</sub><sup>(m+1,2)</sup>), max(<i>p</i><sub>(2i+1,2j)</sub><sup>(m+1,2)</sup><i>, p</i><sub>(2i+1,2j+1)</sub><sup>(m+1,2)</sup>))<?in-line-formulae description="In-line Formulae" end="tail"?>
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>p</i><sub>(i,j)</sub><sup>(m,3)</sup>=max(max(<i>p</i><sub>(2i,2j)</sub><sup>(m+1,3)</sup><i>, p</i><sub>(2i,2j+1)</sub><sup>(m+1,3)</sup>), max(<i>p</i><sub>(2i+1,2j)</sub><sup>(m+1,3)</sup><i>, p</i><sub>(2i+1,2j+1)</sub><sup>(m+1,3)</sup>))  (1)<?in-line-formulae description="In-line Formulae" end="tail"?>
<br/>
where we let
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>p</i><sub>(i,j)</sub><sup>(n,0)</sup><i>=p</i><sub>(i,j)</sub><sup>(n,1)</sup><i>=p</i><sub>(i,j)</sub><sup>(n,2)</sup><i>=p</i><sub>(i,j)</sub><sup>(n,3)</sup><i>=p</i><sub>(i,j)</sub>  (2)<?in-line-formulae description="In-line Formulae" end="tail"?>
</p>
<p id="p-0073" num="0072">The above four images are referred to as subimages hereinafter. When min<sub>x≦t≦x+1 </sub>and max<sub>x≦t≦x+1 </sub>are abbreviated to α and β, respectively, the subimages can be expressed as follows:
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>p</i><sup>(m,0)</sup>=α(<i>x</i>)α(<i>y</i>)<i>p</i><sup>(m+1,0)</sup><?in-line-formulae description="In-line Formulae" end="tail"?>
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>p</i><sup>(m,1)</sup>=α(<i>x</i>)β(<i>y</i>)<i>p</i><sup>(m+1,1)</sup><?in-line-formulae description="In-line Formulae" end="tail"?>
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>p</i><sup>(m,2)</sup>=β(<i>x</i>)α(<i>y</i>)<i>p</i><sup>(m+1,2)</sup><?in-line-formulae description="In-line Formulae" end="tail"?>
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>p</i><sup>(m,2)</sup>=β(<i>x</i>)β(<i>y</i>)<i>p</i><sup>(m+1,3)</sup><?in-line-formulae description="In-line Formulae" end="tail"?>
</p>
<p id="p-0074" num="0073">Namely, they can be considered analogous to the tensor products of α and β. The subimages correspond to the respective critical points. As is apparent from the above equations, the critical point filter detects a critical point of the original image for every block consisting of 2×2 pixels. In this detection, a point having a maximum pixel value and a point having a minimum pixel value are searched with respect to two directions, namely, vertical and horizontal directions, in each block. Although pixel intensity is used as a pixel value in this premised technology, various other values relating to the image may be used. A pixel having the maximum pixel values for the two directions, one having minimum pixel values for the two directions, and one having a minimum pixel value for one direction and a maximum pixel value for the other direction are detected as a local maximum point, a local minimum point, and a saddle point, respectively.</p>
<p id="p-0075" num="0074">By using the critical point filter, an image (1 pixel here) of a critical point detected inside each of the respective blocks serves to represent its block image (4 pixels here) in the next lower resolution level. Thus, the resolution of the image is reduced. From a singularity theoretical point of view, α(x)α(y) preserves the local minimum point (minima point), β(x)β(y) preserves the local maximum point (maxima point), α(x)β(y) and β(x)α(y) preserve the saddle points.</p>
<p id="p-0076" num="0075">At the beginning, a critical point filtering process is applied separately to a source image and a destination image which are to be matching-computed. Thus, a series of image groups, namely, source hierarchical images and destination hierarchical images are generated. Four source hierarchical images and four destination hierarchical images are generated corresponding to the types of the critical points.</p>
<p id="p-0077" num="0076">Thereafter, the source hierarchical images and the destination hierarchical images are matched in a series of resolution levels. First, the minima points are matched using p<sup>(m,0)</sup>. Next, the first saddle points are matched using p<sup>(m,1) </sup>based on the previous matching result for the minima points. The second saddle points are matched using p<sup>(m,2)</sup>. Finally, the maxima points are matched using p<sup>(m,3)</sup>.</p>
<p id="p-0078" num="0077"><figref idref="DRAWINGS">FIGS. 1</figref><i>c </i>and <b>1</b><i>d </i>show the subimages p<sup>(5,0) </sup>of the images in <figref idref="DRAWINGS">FIGS. 1</figref><i>a </i>and <b>1</b><i>b, </i>respectively. Similarly, <figref idref="DRAWINGS">FIGS. 1</figref><i>e </i>and <b>1</b><i>f </i>show the subimages p<sup>(5,1)</sup>, <figref idref="DRAWINGS">FIGS. 1</figref><i>g </i>and <b>1</b><i>h </i>show the subimages p<sup>(5,2)</sup>, and <figref idref="DRAWINGS">FIGS. 1</figref><i>i </i>and <b>1</b><i>j </i>show the subimages p<sup>(5,3)</sup>. Characteristic parts in the images can be easily matched using subimages. The eyes can be matched by p<sup>(5,0) </sup>since the eyes are the minima points of pixel intensity in a face. The mouths can be matched by p<sup>(5,1) </sup>since the mouths have low intensity in the horizontal direction. Vertical lines on both sides of the necks become clear by p<sup>(5,2)</sup>. The ears and bright parts of the cheeks become clear by p<sup>(5,3) </sup>since these are the maxima points of pixel intensity.</p>
<p id="p-0079" num="0078">As described above, the characteristics of an image can be extracted by the critical point filter. Thus, by comparing, for example, the characteristics of an image shot by a camera with the characteristics of several objects recorded in advance, an object shot by the camera can be identified.</p>
<p id="h-0010" num="0000">[1.3] Computation of Mapping Between Images</p>
<p id="p-0080" num="0079">Now, for matching images, a pixel of the source image at the location (i,j) is denoted by p<sub>(i,j)</sub><sup>(n) </sup>and that of the destination image at (k,l) is denoted by q<sub>(k,j)</sub><sup>(n) </sup>where i, j, k, l εI. The energy of the mapping between the images (described later in more detail) is then defined. This energy is determined by the difference in the intensity of the pixel of the source image and its corresponding pixel of the destination image and the smoothness of the mapping. First, the mapping f<sup>(m,0)</sup>:p<sup>(m,0)</sup>→q<sup>(m,0) </sup>between p<sup>(m,0) </sup>and q<sup>(m,0) </sup>with the minimum energy is computed. Based on f<sup>(m,0)</sup>, the mapping f<sup>(m,1) </sup>between p<sup>(m,1) </sup>and q<sup>(m,1) </sup>with the minimum energy is computed. This process continues until f<sup>(m,3) </sup>between p<sup>(m,3) </sup>and q<sup>(m,3) </sup>is computed. Each f<sup>(m,i) </sup>(i=0, 1, 2, . . . ) is referred to as a submapping. The order of i will be rearranged as shown in the following equation (3) in computing f<sup>(m,i) </sup>for reasons to be described later.
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?>ƒ<sup>(m,i)</sup>:p<sup>(m,σ(i))</sup>→q<sup>(m,σ(i))</sup>  (3)<?in-line-formulae description="In-line Formulae" end="tail"?>
<br/>
where σ(i) ε {0, 1, 2, 3}.
<br/>
[1.3.1] Bijectivity
</p>
<p id="p-0081" num="0080">When the matching between a source image and a destination image is expressed by means of a mapping, that mapping shall satisfy the Bijectivity Conditions (BC) between the two images (note that a one-to-one surjective mapping is called a bijection). This is because the respective images should be connected satisfying both surjection and injection, and there is no conceptual supremacy existing between these images. It is to be noted that the mappings to be constructed here are the digital version of the bijection. In the premised technology, a pixel is specified by a co-ordinate point.</p>
<p id="p-0082" num="0081">The mapping of the source subimage (a subimage of a source image) to the destination subimage (a subimage of a destination image) is represented by f<sup>(m,s)</sup>: I/2<sup>n−m</sup>×I/2<sup>n−m</sup>→I/2<sup>n−m</sup>×I/2<sup>n−m </sup>(s=0, 1, . . . ), where ƒ<sub>(i,j)</sub><sup>(m,s)</sup>=(k,l) means that p<sub>(i,j)</sub><sup>(m,s) </sup>of the source image is mapped to q<sub>(k,l)</sub><sup>(m,s) </sup>of the destination image. For simplicity, when f(i,j)=(k,l) holds, a pixel q<sub>(k,l) </sub>is denoted by q<sub>f(i,j)</sub>.</p>
<p id="p-0083" num="0082">When the data sets are discrete as image pixels (grid points) treated in the premised technology, the definition of bijectivity is important. Here, the bijection will be defined in the following manner, where i, j, k and l are all integers. First, a square region R defined on the source image plane is considered
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>p</i><sub>(i,j)</sub><sup>(m,s)</sup><i>p</i><sub>(i+1,j)</sub><sup>(m,s)</sup><i>p</i><sub>(i+1,j+1)</sub><sup>(m,s)</sup><i>p</i><sub>(i,j+1)</sub><sup>(m,s)</sup>  (4)<?in-line-formulae description="In-line Formulae" end="tail"?>
<br/>
where i=0, . . . , 2<sup>m</sup>−1, and j=0, . . . , 2<sup>m</sup>−1. The edges of R are directed as follows:
</p>
<p id="p-0084" num="0083">
<maths id="MATH-US-00001" num="00001">
<math overflow="scroll">
<mtable>
  <mtr>
    <mtd>
      <mrow>
        <mover>
          <mrow>
            <msubsup>
              <mi>p</mi>
              <mrow>
                <mo>(</mo>
                <mrow>
                  <mi>i</mi>
                  <mo>,</mo>
                  <mi>j</mi>
                </mrow>
                <mo>)</mo>
              </mrow>
              <mrow>
                <mo>(</mo>
                <mrow>
                  <mi>m</mi>
                  <mo>,</mo>
                  <mi>s</mi>
                </mrow>
                <mo>)</mo>
              </mrow>
            </msubsup>
            <mo>⁢</mo>
            <msubsup>
              <mi>p</mi>
              <mrow>
                <mo>(</mo>
                <mrow>
                  <mrow>
                    <mi>i</mi>
                    <mo>+</mo>
                    <mn>1</mn>
                  </mrow>
                  <mo>,</mo>
                  <mi>j</mi>
                </mrow>
                <mo>)</mo>
              </mrow>
              <mrow>
                <mo>(</mo>
                <mrow>
                  <mi>m</mi>
                  <mo>,</mo>
                  <mi>s</mi>
                </mrow>
                <mo>)</mo>
              </mrow>
            </msubsup>
          </mrow>
          <mo>→</mo>
        </mover>
        <mo>,</mo>
        <mover>
          <mrow>
            <msubsup>
              <mi>p</mi>
              <mrow>
                <mo>(</mo>
                <mrow>
                  <mrow>
                    <mi>i</mi>
                    <mo>+</mo>
                    <mn>1</mn>
                  </mrow>
                  <mo>,</mo>
                  <mi>j</mi>
                </mrow>
                <mo>)</mo>
              </mrow>
              <mrow>
                <mo>(</mo>
                <mrow>
                  <mi>m</mi>
                  <mo>,</mo>
                  <mi>s</mi>
                </mrow>
                <mo>)</mo>
              </mrow>
            </msubsup>
            <mo>⁢</mo>
            <msubsup>
              <mi>p</mi>
              <mrow>
                <mo>(</mo>
                <mrow>
                  <mrow>
                    <mi>i</mi>
                    <mo>+</mo>
                    <mn>1</mn>
                  </mrow>
                  <mo>,</mo>
                  <mrow>
                    <mi>j</mi>
                    <mo>+</mo>
                    <mn>1</mn>
                  </mrow>
                </mrow>
                <mo>)</mo>
              </mrow>
              <mrow>
                <mo>(</mo>
                <mrow>
                  <mi>m</mi>
                  <mo>,</mo>
                  <mi>s</mi>
                </mrow>
                <mo>)</mo>
              </mrow>
            </msubsup>
          </mrow>
          <mo>→</mo>
        </mover>
        <mo>,</mo>
        <mrow>
          <mover>
            <mrow>
              <msubsup>
                <mi>p</mi>
                <mrow>
                  <mo>(</mo>
                  <mrow>
                    <mrow>
                      <mi>i</mi>
                      <mo>+</mo>
                      <mn>1</mn>
                    </mrow>
                    <mo>,</mo>
                    <mrow>
                      <mi>j</mi>
                      <mo>+</mo>
                      <mn>1</mn>
                    </mrow>
                  </mrow>
                  <mo>)</mo>
                </mrow>
                <mrow>
                  <mo>(</mo>
                  <mrow>
                    <mi>m</mi>
                    <mo>,</mo>
                    <mi>s</mi>
                  </mrow>
                  <mo>)</mo>
                </mrow>
              </msubsup>
              <mo>⁢</mo>
              <msubsup>
                <mi>p</mi>
                <mrow>
                  <mo>(</mo>
                  <mrow>
                    <mi>i</mi>
                    <mo>,</mo>
                    <mrow>
                      <mi>j</mi>
                      <mo>+</mo>
                      <mn>1</mn>
                    </mrow>
                  </mrow>
                  <mo>)</mo>
                </mrow>
                <mrow>
                  <mo>(</mo>
                  <mrow>
                    <mi>m</mi>
                    <mo>,</mo>
                    <mi>s</mi>
                  </mrow>
                  <mo>)</mo>
                </mrow>
              </msubsup>
            </mrow>
            <mo>→</mo>
          </mover>
          <mo>⁢</mo>
          <mstyle>
            <mspace width="0.8em" height="0.8ex"/>
          </mstyle>
          <mo>⁢</mo>
          <mi>and</mi>
          <mo>⁢</mo>
          <mstyle>
            <mspace width="0.8em" height="0.8ex"/>
          </mstyle>
          <mo>⁢</mo>
          <mover>
            <mrow>
              <msubsup>
                <mi>p</mi>
                <mrow>
                  <mo>(</mo>
                  <mrow>
                    <mi>i</mi>
                    <mo>,</mo>
                    <mrow>
                      <mi>j</mi>
                      <mo>+</mo>
                      <mn>1</mn>
                    </mrow>
                  </mrow>
                  <mo>)</mo>
                </mrow>
                <mrow>
                  <mo>(</mo>
                  <mrow>
                    <mi>m</mi>
                    <mo>,</mo>
                    <mi>s</mi>
                  </mrow>
                  <mo>)</mo>
                </mrow>
              </msubsup>
              <mo>⁢</mo>
              <msubsup>
                <mi>p</mi>
                <mrow>
                  <mo>(</mo>
                  <mrow>
                    <mi>i</mi>
                    <mo>,</mo>
                    <mi>j</mi>
                  </mrow>
                  <mo>)</mo>
                </mrow>
                <mrow>
                  <mo>(</mo>
                  <mrow>
                    <mi>m</mi>
                    <mo>,</mo>
                    <mi>s</mi>
                  </mrow>
                  <mo>)</mo>
                </mrow>
              </msubsup>
            </mrow>
            <mo>→</mo>
          </mover>
        </mrow>
      </mrow>
    </mtd>
    <mtd>
      <mrow>
        <mo>(</mo>
        <mn>5</mn>
        <mo>)</mo>
      </mrow>
    </mtd>
  </mtr>
</mtable>
</math>
</maths>
</p>
<p id="p-0085" num="0084">This square region R will be mapped by f to a quadrilateral on the destination image plane:
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>q</i><sub>ƒ(i,j)</sub><sup>(m,s)</sup><i>q</i><sub>ƒ(i+1,j)</sub><sup>(m,s)</sup><i>q</i><sub>ƒ(i,j+1)</sub><sup>(m,s)</sup>  (6)<?in-line-formulae description="In-line Formulae" end="tail"?>
<br/>
This mapping f<sup>(m,s) </sup>(R), that is,
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?>ƒ<sup>(m,s) </sup>(<i>R</i>)=ƒ<sup>(m,s) </sup>(<i>p</i><sub>(i,j)</sub><sup>(m,s) </sup><i>p</i><sub>(i+1,j)</sub><sup>(m,s)</sup><i>p</i><sub>(i+1,j+1)</sub><sup>(m,s)</sup><i>p</i><sub>(i,j+1)</sub><sup>(m,s)</sup>)=<i>q</i><sub>ƒ(i,j)</sub><sup>(m,s)</sup><i>q</i><sub>ƒ(i+1,j)</sub><sup>(m,s)</sup><i>q</i><sub>ƒ(i+1,j+1)</sub><sup>(m,s)</sup><i>q</i><sub>ƒ(i,j+1)</sub><sup>(m,s)</sup>)<?in-line-formulae description="In-line Formulae" end="tail"?>
<br/>
should satisfy the following bijectivity conditions (referred to as BC hereinafter):
<ul id="ul0001" list-style="none">
    <li id="ul0001-0001" num="0085">1. The edges of the quadrilateral f<sup>(m,s) </sup>(R) should not intersect one another.</li>
    <li id="ul0001-0002" num="0086">2. The orientation of the edges of f<sup>(m,s) </sup>(R) should be the same as that of R (clockwise in the case shown in <figref idref="DRAWINGS">FIG. 2</figref>, described below).</li>
    <li id="ul0001-0003" num="0087">3. As a relaxed condition, a retraction mapping is allowed.</li>
</ul>
</p>
<p id="p-0086" num="0088">Without a certain type of a relaxed condition as in, for example, condition 3 above, there would be no mappings which completely satisfy the BC other than a trivial identity mapping. Here, the length of a single edge of f<sup>(m,s) </sup>(R) may be zero. Namely, f<sup>(m,s) </sup>(R) may be a triangle. However, f<sup>(m,s) </sup>(R) is not allowed to be a point or a line segment having area zero. Specifically speaking, if <figref idref="DRAWINGS">FIG. 2R</figref> is the original quadrilateral, <figref idref="DRAWINGS">FIGS. 2A and 2D</figref> satisfy the BC while <figref idref="DRAWINGS">FIGS. 2B</figref>, <b>2</b>C and <b>2</b>E do not satisfy the BC.</p>
<p id="p-0087" num="0089">In actual implementation, the following condition may be further imposed to easily guarantee that the mapping is surjective. Namely, each pixel on the boundary of the source image is mapped to the pixel that occupies the same location at the destination image. In other words, f(i,j)=(i,j) (on the four lines of i=0, i=2<sup>m</sup>−1, j=0, j=2<sup>m</sup>−1). This condition will be hereinafter referred to as an additional condition.</p>
<p id="h-0011" num="0000">[1.3.2] Energy of Mapping</p>
<p id="h-0012" num="0000">[1.3.2.1] Cost Related to the Pixel Intensity</p>
<p id="p-0088" num="0090">The energy of the mapping f is defined. An objective here is to search a mapping whose energy becomes minimum. The energy is determined mainly by the difference in the intensity between the pixel of the source image and its corresponding pixel of the destination image. Namely, the energy C<sub>(i,j)</sub><sup>(m,s) </sup>of the mapping f<sup>(m,s) </sup>at (i,j) is determined by the following equation (7).
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>C</i><sub>(i,j)</sub><sup>(m,s)</sup><i>=|V</i>(<i>p</i><sub>(i,j)</sub><sup>(m,s)</sup>)−<i>V</i>(<i>q</i><sub>ƒ(i,j)</sub><sup>(m,s)</sup>)|<sup>2</sup>  (7)<?in-line-formulae description="In-line Formulae" end="tail"?>
<br/>
where V(p<sub>(i,j)</sub><sup>(m,s)</sup>) and V(q<sub>ƒ(i,j)</sub><sup>(m,s)</sup>) are the intensity values of the pixels p<sub>(i,j)</sub><sup>(m,s) </sup>and q<sub>ƒ(i,j)</sub><sup>(m,s)</sup>, respectively. The total energy C<sup>(m,s) </sup>of f is a matching evaluation equation, and can be defined as the sum of C<sub>(i,j)</sub><sup>(m,s) </sup>as shown in the following equation (8).
</p>
<p id="p-0089" num="0091">
<maths id="MATH-US-00002" num="00002">
<math overflow="scroll">
<mtable>
  <mtr>
    <mtd>
      <mrow>
        <msubsup>
          <mi>C</mi>
          <mi>f</mi>
          <mrow>
            <mo>(</mo>
            <mrow>
              <mi>m</mi>
              <mo>,</mo>
              <mi>s</mi>
            </mrow>
            <mo>)</mo>
          </mrow>
        </msubsup>
        <mo>=</mo>
        <mrow>
          <munderover>
            <mo>∑</mo>
            <mrow>
              <mi>i</mi>
              <mo>=</mo>
              <mn>0</mn>
            </mrow>
            <mrow>
              <mi>i</mi>
              <mo>=</mo>
              <mrow>
                <msup>
                  <mn>2</mn>
                  <mi>m</mi>
                </msup>
                <mo>-</mo>
                <mn>1</mn>
              </mrow>
            </mrow>
          </munderover>
          <mo>⁢</mo>
          <mstyle>
            <mspace width="0.3em" height="0.3ex"/>
          </mstyle>
          <mo>⁢</mo>
          <mrow>
            <munderover>
              <mo>∑</mo>
              <mrow>
                <mi>j</mi>
                <mo>=</mo>
                <mn>0</mn>
              </mrow>
              <mrow>
                <mi>j</mi>
                <mo>=</mo>
                <mrow>
                  <msup>
                    <mn>2</mn>
                    <mi>m</mi>
                  </msup>
                  <mo>-</mo>
                  <mn>1</mn>
                </mrow>
              </mrow>
            </munderover>
            <mo>⁢</mo>
            <mstyle>
              <mspace width="0.3em" height="0.3ex"/>
            </mstyle>
            <mo>⁢</mo>
            <msubsup>
              <mi>C</mi>
              <mrow>
                <mo>(</mo>
                <mrow>
                  <mi>i</mi>
                  <mo>,</mo>
                  <mi>j</mi>
                </mrow>
                <mo>)</mo>
              </mrow>
              <mrow>
                <mo>(</mo>
                <mrow>
                  <mi>m</mi>
                  <mo>,</mo>
                  <mi>s</mi>
                </mrow>
                <mo>)</mo>
              </mrow>
            </msubsup>
          </mrow>
        </mrow>
      </mrow>
    </mtd>
    <mtd>
      <mrow>
        <mo>(</mo>
        <mn>8</mn>
        <mo>)</mo>
      </mrow>
    </mtd>
  </mtr>
</mtable>
</math>
</maths>
<br/>
[1.3.2.2] Cost Related to the Locations of the Pixel for Smooth Mapping
</p>
<p id="p-0090" num="0092">In order to obtain smooth mappings, another energy D<sub>f </sub>for the mapping is introduced. The energy D<sub>f </sub>is determined by the locations of p<sub>(i,j)</sub><sup>(m,s) </sup>and q<sub>ƒ(i,j)</sub><sup>(m,s) </sup>(i=0, 1, . . . , 2<sup>m</sup>−1, j=0, 1, . . . , 2<sup>m</sup>−1), regardless of the intensity of the pixels. The energy D<sub>(i,j)</sub><sup>(m,s) </sup>of the mapping f<sup>(m,s) </sup>at a point (i,j) is determined by the following equation (9).
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>D</i><sub>(i,j)</sub><sup>(m,s)</sup><i>=ηE</i><sub>0(i,j)</sub><sup>(m,s)</sup><i>+E</i><sub>1(i,j)</sub><sup>(m,s)</sup>  (9)<?in-line-formulae description="In-line Formulae" end="tail"?>
<br/>
where the coefficient parameter η which is equal to or greater than 0 is a real number. And we have
</p>
<p id="p-0091" num="0093">
<maths id="MATH-US-00003" num="00003">
<math overflow="scroll">
<mtable>
  <mtr>
    <mtd>
      <mrow>
        <msubsup>
          <mi>E</mi>
          <mrow>
            <mn>0</mn>
            <mo>⁢</mo>
            <mrow>
              <mo>(</mo>
              <mrow>
                <mi>i</mi>
                <mo>,</mo>
                <mi>j</mi>
              </mrow>
              <mo>)</mo>
            </mrow>
          </mrow>
          <mrow>
            <mo>(</mo>
            <mrow>
              <mi>m</mi>
              <mo>,</mo>
              <mi>s</mi>
            </mrow>
            <mo>)</mo>
          </mrow>
        </msubsup>
        <mo>=</mo>
        <msup>
          <mrow>
            <mo></mo>
            <mrow>
              <mrow>
                <mo>(</mo>
                <mrow>
                  <mi>i</mi>
                  <mo>,</mo>
                  <mi>j</mi>
                </mrow>
                <mo>)</mo>
              </mrow>
              <mo>-</mo>
              <mrow>
                <msup>
                  <mi>f</mi>
                  <mrow>
                    <mo>(</mo>
                    <mrow>
                      <mi>m</mi>
                      <mo>,</mo>
                      <mi>s</mi>
                    </mrow>
                    <mo>)</mo>
                  </mrow>
                </msup>
                <mo>⁡</mo>
                <mrow>
                  <mo>(</mo>
                  <mrow>
                    <mi>i</mi>
                    <mo>,</mo>
                    <mi>j</mi>
                  </mrow>
                  <mo>)</mo>
                </mrow>
              </mrow>
            </mrow>
            <mo></mo>
          </mrow>
          <mn>2</mn>
        </msup>
      </mrow>
    </mtd>
    <mtd>
      <mrow>
        <mo>(</mo>
        <mn>10</mn>
        <mo>)</mo>
      </mrow>
    </mtd>
  </mtr>
  <mtr>
    <mtd>
      <mrow>
        <mrow>
          <msubsup>
            <mi>E</mi>
            <mrow>
              <mn>1</mn>
              <mo>⁢</mo>
              <mrow>
                <mo>(</mo>
                <mrow>
                  <mi>i</mi>
                  <mo>,</mo>
                  <mi>j</mi>
                </mrow>
                <mo>)</mo>
              </mrow>
            </mrow>
            <mrow>
              <mo>(</mo>
              <mrow>
                <mi>m</mi>
                <mo>,</mo>
                <mi>s</mi>
              </mrow>
              <mo>)</mo>
            </mrow>
          </msubsup>
          <mo>=</mo>
          <mrow>
            <munderover>
              <mo>∑</mo>
              <mrow>
                <msup>
                  <mi>i</mi>
                  <mi>′</mi>
                </msup>
                <mo>=</mo>
                <mrow>
                  <mi>i</mi>
                  <mo>-</mo>
                  <mn>1</mn>
                </mrow>
              </mrow>
              <mi>i</mi>
            </munderover>
            <mo>⁢</mo>
            <mstyle>
              <mspace width="0.3em" height="0.3ex"/>
            </mstyle>
            <mo>⁢</mo>
            <mrow>
              <munderover>
                <mo>∑</mo>
                <mrow>
                  <msup>
                    <mi>j</mi>
                    <mi>′</mi>
                  </msup>
                  <mo>=</mo>
                  <mrow>
                    <mi>j</mi>
                    <mo>-</mo>
                    <mn>1</mn>
                  </mrow>
                </mrow>
                <mi>j</mi>
              </munderover>
              <mo>⁢</mo>
              <mstyle>
                <mspace width="0.3em" height="0.3ex"/>
              </mstyle>
              <mo>⁢</mo>
              <mrow>
                <msup>
                  <mrow>
                    <mo></mo>
                    <mtable>
                      <mtr>
                        <mtd>
                          <mrow>
                            <mrow>
                              <mo>(</mo>
                              <mrow>
                                <mrow>
                                  <msup>
                                    <mi>f</mi>
                                    <mrow>
                                      <mo>(</mo>
                                      <mrow>
                                        <mi>m</mi>
                                        <mo>,</mo>
                                        <mi>s</mi>
                                      </mrow>
                                      <mo>)</mo>
                                    </mrow>
                                  </msup>
                                  <mo>⁡</mo>
                                  <mrow>
                                    <mo>(</mo>
                                    <mrow>
                                      <mi>i</mi>
                                      <mo>,</mo>
                                      <mi>j</mi>
                                    </mrow>
                                    <mo>)</mo>
                                  </mrow>
                                </mrow>
                                <mo>-</mo>
                                <mrow>
                                  <mo>(</mo>
                                  <mrow>
                                    <mi>i</mi>
                                    <mo>,</mo>
                                    <mi>j</mi>
                                  </mrow>
                                  <mo>)</mo>
                                </mrow>
                              </mrow>
                              <mo>)</mo>
                            </mrow>
                            <mo>-</mo>
                          </mrow>
                        </mtd>
                      </mtr>
                      <mtr>
                        <mtd>
                          <mrow>
                            <mo>(</mo>
                            <mrow>
                              <mrow>
                                <msup>
                                  <mi>f</mi>
                                  <mrow>
                                    <mo>(</mo>
                                    <mrow>
                                      <mi>m</mi>
                                      <mo>,</mo>
                                      <mi>s</mi>
                                    </mrow>
                                    <mo>)</mo>
                                  </mrow>
                                </msup>
                                <mo>⁡</mo>
                                <mrow>
                                  <mo>(</mo>
                                  <mrow>
                                    <msup>
                                      <mi>i</mi>
                                      <mi>′</mi>
                                    </msup>
                                    <mo>,</mo>
                                    <msup>
                                      <mi>j</mi>
                                      <mi>′</mi>
                                    </msup>
                                  </mrow>
                                  <mo>)</mo>
                                </mrow>
                              </mrow>
                              <mo>-</mo>
                              <mrow>
                                <mo>(</mo>
                                <mrow>
                                  <msup>
                                    <mi>i</mi>
                                    <mi>′</mi>
                                  </msup>
                                  <mo>,</mo>
                                  <msup>
                                    <mi>j</mi>
                                    <mi>′</mi>
                                  </msup>
                                </mrow>
                                <mo>)</mo>
                              </mrow>
                            </mrow>
                            <mo>)</mo>
                          </mrow>
                        </mtd>
                      </mtr>
                    </mtable>
                    <mo></mo>
                  </mrow>
                  <mn>2</mn>
                </msup>
                <mo>/</mo>
                <mn>4</mn>
              </mrow>
            </mrow>
          </mrow>
        </mrow>
        <mo>⁢</mo>
        <mstyle>
          <mtext>
</mtext>
        </mstyle>
        <mo>⁢</mo>
        <mi>where</mi>
      </mrow>
    </mtd>
    <mtd>
      <mrow>
        <mo>(</mo>
        <mn>11</mn>
        <mo>)</mo>
      </mrow>
    </mtd>
  </mtr>
  <mtr>
    <mtd>
      <mrow>
        <mrow>
          <mrow>
            <mo></mo>
            <mrow>
              <mo>(</mo>
              <mrow>
                <mi>x</mi>
                <mo>,</mo>
                <mi>y</mi>
              </mrow>
              <mo>)</mo>
            </mrow>
            <mo></mo>
          </mrow>
          <mo>=</mo>
          <msqrt>
            <mrow>
              <msup>
                <mi>x</mi>
                <mn>2</mn>
              </msup>
              <mo>+</mo>
              <msup>
                <mi>y</mi>
                <mn>2</mn>
              </msup>
            </mrow>
          </msqrt>
        </mrow>
        <mo>,</mo>
      </mrow>
    </mtd>
    <mtd>
      <mrow>
        <mo>(</mo>
        <mn>12</mn>
        <mo>)</mo>
      </mrow>
    </mtd>
  </mtr>
</mtable>
</math>
</maths>
<br/>
i′ and j′ are integers and f(i′,j′) is defined to be zero for i′&lt;0 and j′&lt;0. E<sub>0 </sub>is determined by the distance between (i,j) and f(i,j). E<sub>0 </sub>prevents a pixel from being mapped to a pixel too far away from it. However, as explained below, E<sub>0 </sub>can be replaced by another energy function. E<sub>1 </sub>ensures the smoothness of the mapping. E<sub>1 </sub>represents a distance between the displacement of p(i,j) and the displacement of its neighboring points. Based on the above consideration, another evaluation equation for evaluating the matching, or the energy D<sub>f </sub>is determined by the following equation:
</p>
<p id="p-0092" num="0094">
<maths id="MATH-US-00004" num="00004">
<math overflow="scroll">
<mtable>
  <mtr>
    <mtd>
      <mrow>
        <msubsup>
          <mi>D</mi>
          <mi>f</mi>
          <mrow>
            <mo>(</mo>
            <mrow>
              <mi>m</mi>
              <mo>,</mo>
              <mi>s</mi>
            </mrow>
            <mo>)</mo>
          </mrow>
        </msubsup>
        <mo>=</mo>
        <mrow>
          <munderover>
            <mo>∑</mo>
            <mrow>
              <mi>i</mi>
              <mo>=</mo>
              <mn>0</mn>
            </mrow>
            <mrow>
              <mi>i</mi>
              <mo>=</mo>
              <mrow>
                <msup>
                  <mn>2</mn>
                  <mi>m</mi>
                </msup>
                <mo>-</mo>
                <mn>1</mn>
              </mrow>
            </mrow>
          </munderover>
          <mo>⁢</mo>
          <mstyle>
            <mspace width="0.3em" height="0.3ex"/>
          </mstyle>
          <mo>⁢</mo>
          <mrow>
            <munderover>
              <mo>∑</mo>
              <mrow>
                <mi>j</mi>
                <mo>=</mo>
                <mn>0</mn>
              </mrow>
              <mrow>
                <mi>j</mi>
                <mo>=</mo>
                <mrow>
                  <msup>
                    <mn>2</mn>
                    <mi>m</mi>
                  </msup>
                  <mo>-</mo>
                  <mn>1</mn>
                </mrow>
              </mrow>
            </munderover>
            <mo>⁢</mo>
            <mstyle>
              <mspace width="0.3em" height="0.3ex"/>
            </mstyle>
            <mo>⁢</mo>
            <msubsup>
              <mi>D</mi>
              <mrow>
                <mo>(</mo>
                <mrow>
                  <mi>i</mi>
                  <mo>,</mo>
                  <mi>j</mi>
                </mrow>
                <mo>)</mo>
              </mrow>
              <mrow>
                <mo>(</mo>
                <mrow>
                  <mi>m</mi>
                  <mo>,</mo>
                  <mi>s</mi>
                </mrow>
                <mo>)</mo>
              </mrow>
            </msubsup>
          </mrow>
        </mrow>
      </mrow>
    </mtd>
    <mtd>
      <mrow>
        <mo>(</mo>
        <mn>13</mn>
        <mo>)</mo>
      </mrow>
    </mtd>
  </mtr>
</mtable>
</math>
</maths>
<br/>
[1.3.2.3] Total Energy of the Mapping
</p>
<p id="p-0093" num="0095">The total energy of the mapping, that is, a combined evaluation equation which relates to the combination of a plurality of evaluations, is defined as λC<sub>ƒ</sub><sup>(m,s)</sup>+D<sub>ƒ</sub><sup>(m,s)</sup>, where λ≧0 is a real number. The goal is to detect a state in which the combined evaluation equation has an extreme value, namely, to find a mapping which gives the minimum energy expressed by the following:</p>
<p id="p-0094" num="0096">
<maths id="MATH-US-00005" num="00005">
<math overflow="scroll">
<mtable>
  <mtr>
    <mtd>
      <mrow>
        <munder>
          <mi>min</mi>
          <mi>f</mi>
        </munder>
        <mo>⁢</mo>
        <mrow>
          <mo>{</mo>
          <mrow>
            <mrow>
              <mi>λ</mi>
              <mo>⁢</mo>
              <mstyle>
                <mspace width="0.3em" height="0.3ex"/>
              </mstyle>
              <mo>⁢</mo>
              <msubsup>
                <mi>C</mi>
                <mi>f</mi>
                <mrow>
                  <mo>(</mo>
                  <mrow>
                    <mi>m</mi>
                    <mo>,</mo>
                    <mi>s</mi>
                  </mrow>
                  <mo>)</mo>
                </mrow>
              </msubsup>
            </mrow>
            <mo>+</mo>
            <msubsup>
              <mi>D</mi>
              <mi>f</mi>
              <mrow>
                <mo>(</mo>
                <mrow>
                  <mi>m</mi>
                  <mo>,</mo>
                  <mi>s</mi>
                </mrow>
                <mo>)</mo>
              </mrow>
            </msubsup>
          </mrow>
          <mo>}</mo>
        </mrow>
      </mrow>
    </mtd>
    <mtd>
      <mrow>
        <mo>(</mo>
        <mn>14</mn>
        <mo>)</mo>
      </mrow>
    </mtd>
  </mtr>
</mtable>
</math>
</maths>
</p>
<p id="p-0095" num="0097">Care must be exercised in that the mapping becomes an identity mapping if λ=0 and η=0 (i.e., f<sup>(m,s) </sup>(i,j)=(i,j) for all i=0, 1, . . . , 2<sup>m</sup>−1 and j=0, 1, . . . , 2<sup>m</sup>−1). As will be described later, the mapping can be gradually modified or transformed from an identity mapping since the case of λ=0 and η=0 is evaluated at the outset in the premised technology. If the combined evaluation equation is defined as C<sub>ƒ</sub><sup>(m,s)</sup>+λD<sub>ƒ</sub><sup>(m,s) </sup>where the original position of λ is changed as such, the equation with λ=0 and η=0 will be C<sub>ƒ</sub><sup>(m,s) </sup>only. As a result thereof, pixels would randomly matched to each other only because their pixel intensities are close, thus making the mapping totally meaningless. Transforming the mapping based on such a meaningless mapping makes no sense. Thus, the coefficient parameter is so determined that the identity mapping is initially selected for the evaluation as the best mapping.</p>
<p id="p-0096" num="0098">Similar to this premised technology, differences in the pixel intensity and smoothness are considered in a technique called “optical flow” that is known in the art. However, the optical flow technique cannot be used for image transformation since the optical flow technique takes into account only the local movement of an object. However, global correspondence can also be detected by utilizing the critical point filter according to the premised technology.</p>
<p id="h-0013" num="0000">[1.3.3] Determining the Mapping with Multiresolution</p>
<p id="p-0097" num="0099">A mapping f<sub>min </sub>which gives the minimum energy and satisfies the BC is searched by using the multiresolution hierarchy. The mapping between the source subimage and the destination subimage at each level of the resolution is computed. Starting from the top of the resolution hierarchy (i.e., the coarsest level), the mapping is determined at each resolution level, and where possible, mappings at other levels are considered. The number of candidate mappings at each level is restricted by using the mappings at an upper (i.e., coarser) level of the hierarchy. More specifically speaking, in the course of determining a mapping at a certain level, the mapping obtained at the coarser level by one is imposed as a sort of constraint condition.</p>
<p id="p-0098" num="0100">We thus define a parent and child relationship between resolution levels. When the following equation (15) holds,</p>
<p id="p-0099" num="0101">
<maths id="MATH-US-00006" num="00006">
<math overflow="scroll">
<mtable>
  <mtr>
    <mtd>
      <mrow>
        <mrow>
          <mrow>
            <mo>(</mo>
            <mrow>
              <msup>
                <mi>i</mi>
                <mi>′</mi>
              </msup>
              <mo>,</mo>
              <msup>
                <mi>j</mi>
                <mi>′</mi>
              </msup>
            </mrow>
            <mo>)</mo>
          </mrow>
          <mo>=</mo>
          <mrow>
            <mo>(</mo>
            <mrow>
              <mrow>
                <mo>⌊</mo>
                <mfrac>
                  <mi>i</mi>
                  <mn>2</mn>
                </mfrac>
                <mo>⌋</mo>
              </mrow>
              <mo>,</mo>
              <mrow>
                <mo>⌊</mo>
                <mfrac>
                  <mi>j</mi>
                  <mn>2</mn>
                </mfrac>
                <mo>⌋</mo>
              </mrow>
            </mrow>
            <mo>)</mo>
          </mrow>
        </mrow>
        <mo>,</mo>
      </mrow>
    </mtd>
    <mtd>
      <mrow>
        <mo>(</mo>
        <mn>15</mn>
        <mo>)</mo>
      </mrow>
    </mtd>
  </mtr>
</mtable>
</math>
</maths>
<br/>
where └x┘ denotes the largest integer not exceeding x, p<sub>(i′,j′)</sub><sup>(m−1,s) </sup>and q<sub>(i′,j′)</sub><sup>(m−1,s) </sup>are called the parents of p<sub>(i,j)</sub><sup>(m,s) </sup>and q<sub>(i,j)</sub><sup>(m,s)</sup>, respectively. Conversely, p<sub>(i,j)</sub><sup>(m,s) </sup>and q<sub>(i,j)</sub><sup>(m,s) </sup>are the child of p<sub>(i′,j′)</sub><sup>(m−1,s) </sup>and the child of q<sub>(i′,j′)</sub><sup>(m−1,s)</sup>, respectively. A function parent (i,j) is defined by the following equation (16):
</p>
<p id="p-0100" num="0102">
<maths id="MATH-US-00007" num="00007">
<math overflow="scroll">
<mtable>
  <mtr>
    <mtd>
      <mrow>
        <mrow>
          <mrow>
            <mi>parent</mi>
            <mo>⁢</mo>
            <mstyle>
              <mspace width="0.6em" height="0.6ex"/>
            </mstyle>
            <mo>⁢</mo>
            <mrow>
              <mo>(</mo>
              <mrow>
                <mi>i</mi>
                <mo>,</mo>
                <mi>j</mi>
              </mrow>
              <mo>)</mo>
            </mrow>
          </mrow>
          <mo>=</mo>
          <mrow>
            <mo>(</mo>
            <mrow>
              <mrow>
                <mo>⌊</mo>
                <mfrac>
                  <mi>i</mi>
                  <mn>2</mn>
                </mfrac>
                <mo>⌋</mo>
              </mrow>
              <mo>,</mo>
              <mrow>
                <mo>⌊</mo>
                <mfrac>
                  <mi>j</mi>
                  <mn>2</mn>
                </mfrac>
                <mo>⌋</mo>
              </mrow>
            </mrow>
            <mo>)</mo>
          </mrow>
        </mrow>
        <mo>,</mo>
      </mrow>
    </mtd>
    <mtd>
      <mrow>
        <mo>(</mo>
        <mn>16</mn>
        <mo>)</mo>
      </mrow>
    </mtd>
  </mtr>
</mtable>
</math>
</maths>
</p>
<p id="p-0101" num="0103">Now, a mapping between p<sub>(i,j)</sub><sup>(m,s) </sup>and q<sub>(k,l)</sub><sup>(m,s) </sup>is determined by computing the energy and finding the minimum thereof. The value of f<sup>(m,s) </sup>(i,j)=(k,l) is determined as follows using f(m−1,s) (m=1,2, . . . , n). First of all, a condition is imposed that q<sub>(k,l)</sub><sup>(m,s) </sup>should lie inside a quadrilateral defined by the following definitions (17) and (18). Then, the applicable mappings are narrowed down by selecting ones that are thought to be reasonable or natural among them satisfying the BC.
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>q</i><sub>g</sub><sub><sup2>(m,s)</sup2></sub><sub>(i−1,j−1)</sub><sup>(m,s)</sup><i>q</i><sub>g</sub><sub><sup2>(m,s)</sup2></sub><sub>(i−1,j+1)</sub><sup>(m,s)</sup><i>q</i><sub>g</sub><sub><sup2>(m,s)</sup2></sub><sub>(i+1,j+1)</sub><sup>(m,s)</sup><i>q</i><sub>g</sub><sub><sup2>(m,s)</sup2></sub><sub>(i+1,j−1)</sub><sup>(m,s)</sup>  (17)<?in-line-formulae description="In-line Formulae" end="tail"?>
<br/>
where
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>g</i><sup>(m,s)</sup>(<i>i,j)</i>=ƒ<sup>(m−1,s)</sup>(parent(<i>i,j</i>))+ƒ<sup>(m−1,s)</sup>(parent(<i>i,j</i>)+(1,1))  (18)<?in-line-formulae description="In-line Formulae" end="tail"?>
</p>
<p id="p-0102" num="0104">The quadrilateral defined above is hereinafter referred to as the inherited quadrilateral of p<sub>(i,j)</sub><sup>(m,s)</sup>. The pixel minimizing the energy is sought and obtained inside the inherited quadrilateral.</p>
<p id="p-0103" num="0105"><figref idref="DRAWINGS">FIG. 3</figref> illustrates the above-described procedures. The pixels A, B, C and D of the source image are mapped to A′, B′, C′ and D′ of the destination image, respectively, at the (m−1)th level in the hierarchy. The pixel p<sub>(i,j)</sub><sup>(m,s) </sup>should be mapped to the pixel q<sub>ƒ</sub><sub><sup2>(m)</sup2></sub><sub>(i,j) </sub><sup>(m,s) </sup>which exists inside the inherited quadrilateral A′B′C′D′. Thereby, bridging from the mapping at the (m−1)th level to the mapping at the m-th level is achieved.</p>
<p id="p-0104" num="0106">The energy E<sub>0 </sub>defined above may now be replaced by the following equations (19) and (20):
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>E</i><sub>0(i,j)</sub>=∥ƒ<sup>(m,0)</sup>(<i>i,j</i>)−<i>g</i><sup>(m)</sup>(<i>i,j</i>)∥<sup>2</sup>  (19)<?in-line-formulae description="In-line Formulae" end="tail"?>
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>E</i><sub>0(i,j)</sub>=∥ƒ<sup>(m,s)</sup>(<i>i,j</i>)−ƒ<sup>(m,s−1)</sup>(<i>i,j)</i>∥<sup>2</sup>, (1<i>≦i</i>)  (20)<?in-line-formulae description="In-line Formulae" end="tail"?>
<br/>
for computing the submapping f<sup>(m,0) </sup>and the submapping f<sup>(m,s) </sup>at the m-th level, respectively.
</p>
<p id="p-0105" num="0107">In this manner, a mapping which maintains a low energy of all the submappings is obtained. Using the equation (20) makes the submappings corresponding to the different critical points associated to each other within the same level in order that the subimages can have high similarity. The equation (19) represents the distance between f<sup>(m,s) </sup>(i,j) and the location where (i,j) should be mapped when regarded as a part of a pixel at the (m−1) the level.</p>
<p id="p-0106" num="0108">When there is no pixel satisfying the BC inside the inherited quadrilateral A′B′C′D′, the following steps are taken. First, pixels whose distance from the boundary of A′B′C′D′ is L (at first, L=1) are examined. If a pixel whose energy is the minimum among them satisfies the BC, then this pixel-will be selected as a value of f<sup>(m,s) </sup>(i,j). L is increased until such a pixel is found or L reaches its upper bound L<sub>max</sub><sup>(m)</sup>. L<sub>max</sub><sup>(m) </sup>is fixed for each level m. If no pixel is found at all, the third condition of the BC is ignored temporarily and such mappings that caused the area of the transformed quadrilateral to become zero (a point or a line) will be permitted so as to determine f<sup>(m,s) </sup>(i,j). If such a pixel is still not found, then the first and the second conditions of the BC will be removed.</p>
<p id="p-0107" num="0109">Multiresolution approximation is essential to determining the global correspondence of the images while preventing the mapping from being affected by small details of the images. Without the multiresolution approximation, it is impossible to detect a correspondence between pixels whose distances are large. In the case where the multiresolution approximation is not available, the size of an image will generally be limited to a very small size, and only tiny changes in the images can be handled. Moreover, imposing smoothness on the mapping usually makes it difficult to find the correspondence of such pixels. That is because the energy of the mapping from one pixel to another pixel which is far therefrom is high. On the other hand, the multiresolution approximation enables finding the approximate correspondence of such pixels. This is because the distance between the pixels is small at the upper (coarser) level of the hierarchy of the resolution.</p>
<p id="h-0014" num="0000">[1.4] Automatic Determination of the Optimal Parameter Values</p>
<p id="p-0108" num="0110">One of the main deficiencies of the existing image matching techniques lies in the difficulty of parameter adjustment. In most cases, the parameter adjustment is performed manually and it is extremely difficult to select the optimal value. However, according to the premised technology, the optimal parameter values can be obtained completely automatically.</p>
<p id="p-0109" num="0111">The systems according to this premised technology include two parameters, namely, λ and η, where λ and η represent the weight of the difference of the pixel intensity and the stiffness of the mapping, respectively. In order to automatically determine these parameters, the are initially set to 0. First, λ is gradually increased from λ=0 while η is fixed at 0. As λ becomes larger and the value of the combined evaluation equation (equation (14)) is minimized, the value of C<sub>ƒ</sub><sup>(m,s) </sup>for each submapping generally becomes smaller. This basically means that the two images are matched better. However, if λ exceeds the optimal value, the following phenomena occur:
<ul id="ul0002" list-style="none">
    <li id="ul0002-0001" num="0112">1. Pixels which should not be corresponded are erroneously corresponded only because their intensities are close.</li>
    <li id="ul0002-0002" num="0113">2. As a result, correspondence between images becomes inaccurate, and the mapping becomes invalid.</li>
    <li id="ul0002-0003" num="0114">3. As a result, D<sub>ƒ</sub><sup>(m,s) </sup>in equation (14) tends to increase abruptly.</li>
    <li id="ul0002-0004" num="0115">4. As a result, since the value of equation (14) tends to increase abruptly, f<sup>(m,s) </sup>changes in order to suppress the abrupt increase of D<sub>ƒ</sub><sup>(m,s)</sup>. As a result, C<sub>ƒ</sub><sup>(m,s) </sup>increases.</li>
</ul>
</p>
<p id="p-0110" num="0116">Therefore, a threshold value at which C<sub>ƒ</sub><sup>(m,s) </sup>turns to an increase from a decrease is detected while a state in which equation (14) takes the minimum value with λ being increased is kept. Such λ is determined as the optimal value at η=0. Next, the behavior of C<sub>ƒ</sub><sup>(m,s) </sup>is examined while η is increased gradually, and η will be automatically determined by a method described later. λ will then again be determined corresponding to such an automatically determined η.</p>
<p id="p-0111" num="0117">The above-described method resembles the focusing mechanism of human visual systems. In the human visual systems, the images of the respective right eye and left eye are matched while moving one eye. When the objects are clearly recognized, the moving eye is fixed.</p>
<p id="h-0015" num="0000">[1.4.1] Dynamic Determination of λ</p>
<p id="p-0112" num="0118">Initially, λ is increased from 0 at a certain interval, and a subimage is evaluated each time the value of λ changes. As shown in equation (14), the total energy is defined by λC<sub>ƒ</sub><sup>(m,s)</sup>+D<sub>ƒ</sub><sup>(m,s)</sup>. D<sub>(i,j)</sub><sup>(m,s) </sup>in equation (9) represents the smoothness and theoretically becomes minimum when it is the identity mapping. E<sub>0 </sub>and E<sub>1 </sub>increase as the mapping is further distorted. Since E<sub>1 </sub>is an integer, 1 is the smallest step of D<sub>ƒ</sub><sup>(m,s)</sup>. Thus, it is impossible to change the mapping to reduce the total energy unless a changed amount (reduction amount) of the current λC<sub>(i,j)</sub><sup>(m,s) </sup>is equal to or greater than 1. Since D<sub>ƒ</sub><sup>(m,s) </sup>increases by more than 1 accompanied by the change of the mapping, the total energy is not reduced unless λC<sub>(i,j)</sub><sup>(m,s) </sup>is reduced by more than 1.</p>
<p id="p-0113" num="0119">Under this condition, it is shown that C<sub>(i,j)</sub><sup>(m,s) </sup>decreases in normal cases as λ increases. The histogram of C<sub>(i,j)</sub><sup>(m,s) </sup>is denoted as h(l), where h(l) is the number of pixels whose energy C<sub>(i,j)</sub><sup>(m,s) </sup>is l<sup>2</sup>. In order that λl<sup>2</sup>≧1, for example, the case of l<sup>2</sup>=1/λ is considered. When λ varies from λ<sub>1 </sub>to λ<sub>2</sub>, a number of pixels (denoted A) expressed by the following equation (21):</p>
<p id="p-0114" num="0120">
<maths id="MATH-US-00008" num="00008">
<math overflow="scroll">
<mtable>
  <mtr>
    <mtd>
      <mtable>
        <mtr>
          <mtd>
            <mrow>
              <mi>A</mi>
              <mo>=</mo>
              <mi/>
              <mo>⁢</mo>
              <mrow>
                <munderover>
                  <mo>∑</mo>
                  <mrow>
                    <mi>l</mi>
                    <mo>=</mo>
                    <mrow>
                      <mo>⌈</mo>
                      <mfrac>
                        <mn>1</mn>
                        <msub>
                          <mi>λ</mi>
                          <mn>2</mn>
                        </msub>
                      </mfrac>
                      <mo>⌉</mo>
                    </mrow>
                  </mrow>
                  <mrow>
                    <mo>⌊</mo>
                    <mfrac>
                      <mn>1</mn>
                      <msub>
                        <mi>λ</mi>
                        <mn>1</mn>
                      </msub>
                    </mfrac>
                    <mo>⌋</mo>
                  </mrow>
                </munderover>
                <mo>⁢</mo>
                <mstyle>
                  <mspace width="0.3em" height="0.3ex"/>
                </mstyle>
                <mo>⁢</mo>
                <mrow>
                  <mi>h</mi>
                  <mo>⁢</mo>
                  <mstyle>
                    <mspace width="0.6em" height="0.6ex"/>
                  </mstyle>
                  <mo>⁢</mo>
                  <mrow>
                    <mo>(</mo>
                    <mi>l</mi>
                    <mo>)</mo>
                  </mrow>
                </mrow>
              </mrow>
            </mrow>
          </mtd>
        </mtr>
        <mtr>
          <mtd>
            <mrow>
              <mo>≅</mo>
              <mi/>
              <mo>⁢</mo>
              <mrow>
                <msubsup>
                  <mo>∫</mo>
                  <mrow>
                    <mi>l</mi>
                    <mo>=</mo>
                    <mfrac>
                      <mn>1</mn>
                      <msub>
                        <mi>λ</mi>
                        <mn>2</mn>
                      </msub>
                    </mfrac>
                  </mrow>
                  <mfrac>
                    <mn>1</mn>
                    <msub>
                      <mi>λ</mi>
                      <mn>1</mn>
                    </msub>
                  </mfrac>
                </msubsup>
                <mo>⁢</mo>
                <mrow>
                  <mi>h</mi>
                  <mo>⁢</mo>
                  <mstyle>
                    <mspace width="0.6em" height="0.6ex"/>
                  </mstyle>
                  <mo>⁢</mo>
                  <mrow>
                    <mo>(</mo>
                    <mi>l</mi>
                    <mo>)</mo>
                  </mrow>
                  <mo>⁢</mo>
                  <mstyle>
                    <mspace width="0.2em" height="0.2ex"/>
                  </mstyle>
                  <mo>⁢</mo>
                  <mrow>
                    <mo>ⅆ</mo>
                    <mi>l</mi>
                  </mrow>
                </mrow>
              </mrow>
            </mrow>
          </mtd>
        </mtr>
        <mtr>
          <mtd>
            <mrow>
              <mo>=</mo>
              <mi/>
              <mo>⁢</mo>
              <mrow>
                <mo>-</mo>
                <mrow>
                  <msubsup>
                    <mo>∫</mo>
                    <msub>
                      <mi>λ</mi>
                      <mn>2</mn>
                    </msub>
                    <msub>
                      <mi>λ</mi>
                      <mn>1</mn>
                    </msub>
                  </msubsup>
                  <mo>⁢</mo>
                  <mrow>
                    <mi>h</mi>
                    <mo>⁢</mo>
                    <mstyle>
                      <mspace width="0.6em" height="0.6ex"/>
                    </mstyle>
                    <mo>⁢</mo>
                    <mrow>
                      <mo>(</mo>
                      <mi>l</mi>
                      <mo>)</mo>
                    </mrow>
                    <mo>⁢</mo>
                    <mfrac>
                      <mn>1</mn>
                      <msup>
                        <mi>λ</mi>
                        <mrow>
                          <mn>3</mn>
                          <mo>/</mo>
                          <mn>2</mn>
                        </mrow>
                      </msup>
                    </mfrac>
                    <mo>⁢</mo>
                    <mstyle>
                      <mspace width="0.2em" height="0.2ex"/>
                    </mstyle>
                    <mo>⁢</mo>
                    <mrow>
                      <mo>ⅆ</mo>
                      <mi>λ</mi>
                    </mrow>
                  </mrow>
                </mrow>
              </mrow>
            </mrow>
          </mtd>
        </mtr>
        <mtr>
          <mtd>
            <mrow>
              <mo>=</mo>
              <mi/>
              <mo>⁢</mo>
              <mrow>
                <msubsup>
                  <mo>∫</mo>
                  <msub>
                    <mi>λ</mi>
                    <mn>1</mn>
                  </msub>
                  <msub>
                    <mi>λ</mi>
                    <mn>2</mn>
                  </msub>
                </msubsup>
                <mo>⁢</mo>
                <mrow>
                  <mfrac>
                    <mrow>
                      <mi>h</mi>
                      <mo>⁢</mo>
                      <mstyle>
                        <mspace width="0.6em" height="0.6ex"/>
                      </mstyle>
                      <mo>⁢</mo>
                      <mrow>
                        <mo>(</mo>
                        <mi>l</mi>
                        <mo>)</mo>
                      </mrow>
                    </mrow>
                    <msup>
                      <mi>λ</mi>
                      <mrow>
                        <mn>3</mn>
                        <mo>/</mo>
                        <mn>2</mn>
                      </mrow>
                    </msup>
                  </mfrac>
                  <mo>⁢</mo>
                  <mstyle>
                    <mspace width="0.2em" height="0.2ex"/>
                  </mstyle>
                  <mo>⁢</mo>
                  <mrow>
                    <mo>ⅆ</mo>
                    <mi>λ</mi>
                  </mrow>
                </mrow>
              </mrow>
            </mrow>
          </mtd>
        </mtr>
      </mtable>
    </mtd>
    <mtd>
      <mrow>
        <mo>(</mo>
        <mn>21</mn>
        <mo>)</mo>
      </mrow>
    </mtd>
  </mtr>
</mtable>
</math>
</maths>
<br/>
changes to a more stable state having the energy shown in equation (22):
</p>
<p id="p-0115" num="0121">
<maths id="MATH-US-00009" num="00009">
<math overflow="scroll">
<mtable>
  <mtr>
    <mtd>
      <mrow>
        <mrow>
          <msubsup>
            <mi>C</mi>
            <mi>f</mi>
            <mrow>
              <mo>(</mo>
              <mrow>
                <mi>m</mi>
                <mo>,</mo>
                <mi>s</mi>
              </mrow>
              <mo>)</mo>
            </mrow>
          </msubsup>
          <mo>-</mo>
          <msup>
            <mi>l</mi>
            <mn>2</mn>
          </msup>
        </mrow>
        <mo>=</mo>
        <mrow>
          <msubsup>
            <mi>C</mi>
            <mi>f</mi>
            <mrow>
              <mo>(</mo>
              <mrow>
                <mi>m</mi>
                <mo>,</mo>
                <mi>s</mi>
              </mrow>
              <mo>)</mo>
            </mrow>
          </msubsup>
          <mo>-</mo>
          <mrow>
            <mfrac>
              <mn>1</mn>
              <mi>λ</mi>
            </mfrac>
            <mo>.</mo>
          </mrow>
        </mrow>
      </mrow>
    </mtd>
    <mtd>
      <mrow>
        <mo>(</mo>
        <mn>22</mn>
        <mo>)</mo>
      </mrow>
    </mtd>
  </mtr>
</mtable>
</math>
</maths>
</p>
<p id="p-0116" num="0122">Here, it is assumed that the energy of these pixels is approximated to be zero. This means that the value of C<sub>(i,j)</sub><sup>(m,s) </sup>changes by:</p>
<p id="p-0117" num="0123">
<maths id="MATH-US-00010" num="00010">
<math overflow="scroll">
<mtable>
  <mtr>
    <mtd>
      <mrow>
        <mrow>
          <mo>∂</mo>
          <msubsup>
            <mi>C</mi>
            <mi>f</mi>
            <mrow>
              <mo>(</mo>
              <mrow>
                <mi>m</mi>
                <mo>,</mo>
                <mi>s</mi>
              </mrow>
              <mo>)</mo>
            </mrow>
          </msubsup>
        </mrow>
        <mo>=</mo>
        <mrow>
          <mo>-</mo>
          <mfrac>
            <mi>A</mi>
            <mi>λ</mi>
          </mfrac>
        </mrow>
      </mrow>
    </mtd>
    <mtd>
      <mrow>
        <mo>(</mo>
        <mn>23</mn>
        <mo>)</mo>
      </mrow>
    </mtd>
  </mtr>
</mtable>
</math>
</maths>
<br/>
As a result, equation (24) holds.
</p>
<p id="p-0118" num="0124">
<maths id="MATH-US-00011" num="00011">
<math overflow="scroll">
<mtable>
  <mtr>
    <mtd>
      <mrow>
        <mfrac>
          <mrow>
            <mo>∂</mo>
            <msubsup>
              <mi>C</mi>
              <mi>f</mi>
              <mrow>
                <mo>(</mo>
                <mrow>
                  <mi>m</mi>
                  <mo>,</mo>
                  <mi>s</mi>
                </mrow>
                <mo>)</mo>
              </mrow>
            </msubsup>
          </mrow>
          <mrow>
            <mo>∂</mo>
            <mi>λ</mi>
          </mrow>
        </mfrac>
        <mo>=</mo>
        <mrow>
          <mo>-</mo>
          <mfrac>
            <mrow>
              <mi>h</mi>
              <mo>⁡</mo>
              <mrow>
                <mo>(</mo>
                <mi>l</mi>
                <mo>)</mo>
              </mrow>
            </mrow>
            <msup>
              <mi>λ</mi>
              <mrow>
                <mn>5</mn>
                <mo>/</mo>
                <mn>2</mn>
              </mrow>
            </msup>
          </mfrac>
        </mrow>
      </mrow>
    </mtd>
    <mtd>
      <mrow>
        <mo>(</mo>
        <mn>24</mn>
        <mo>)</mo>
      </mrow>
    </mtd>
  </mtr>
</mtable>
</math>
</maths>
<br/>
Since h(l)&gt;0, C<sub>ƒ</sub><sup>(m,s) </sup>decreases in the normal case. However, when λ exceeds the optimal value, the above phenomenon, that is, an increase in C<sub>ƒ</sub><sup>(m,s) </sup>occurs. The optimal value of λ is determined by detecting this phenomenon.
</p>
<p id="p-0119" num="0125">When</p>
<p id="p-0120" num="0126">
<maths id="MATH-US-00012" num="00012">
<math overflow="scroll">
<mtable>
  <mtr>
    <mtd>
      <mrow>
        <mrow>
          <mi>h</mi>
          <mo>⁡</mo>
          <mrow>
            <mo>(</mo>
            <mi>l</mi>
            <mo>)</mo>
          </mrow>
        </mrow>
        <mo>=</mo>
        <mrow>
          <msup>
            <mi>Hl</mi>
            <mi>k</mi>
          </msup>
          <mo>=</mo>
          <mfrac>
            <mi>H</mi>
            <msup>
              <mi>λ</mi>
              <mrow>
                <mi>k</mi>
                <mo>/</mo>
                <mn>2</mn>
              </mrow>
            </msup>
          </mfrac>
        </mrow>
      </mrow>
    </mtd>
    <mtd>
      <mrow>
        <mo>(</mo>
        <mn>25</mn>
        <mo>)</mo>
      </mrow>
    </mtd>
  </mtr>
</mtable>
</math>
</maths>
<br/>
is assumed, where both H(H&gt;0) and k are constants, the equation (26) holds:
</p>
<p id="p-0121" num="0127">
<maths id="MATH-US-00013" num="00013">
<math overflow="scroll">
<mtable>
  <mtr>
    <mtd>
      <mrow>
        <mfrac>
          <mrow>
            <mo>∂</mo>
            <msubsup>
              <mi>C</mi>
              <mi>f</mi>
              <mrow>
                <mo>(</mo>
                <mrow>
                  <mi>m</mi>
                  <mo>,</mo>
                  <mi>s</mi>
                </mrow>
                <mo>)</mo>
              </mrow>
            </msubsup>
          </mrow>
          <mrow>
            <mo>∂</mo>
            <mi>λ</mi>
          </mrow>
        </mfrac>
        <mo>=</mo>
        <mrow>
          <mo>-</mo>
          <mfrac>
            <mi>H</mi>
            <msup>
              <mi>λ</mi>
              <mrow>
                <mrow>
                  <mn>5</mn>
                  <mo>/</mo>
                  <mn>2</mn>
                </mrow>
                <mo>+</mo>
                <mrow>
                  <mi>k</mi>
                  <mo>/</mo>
                  <mn>2</mn>
                </mrow>
              </mrow>
            </msup>
          </mfrac>
        </mrow>
      </mrow>
    </mtd>
    <mtd>
      <mrow>
        <mo>(</mo>
        <mn>26</mn>
        <mo>)</mo>
      </mrow>
    </mtd>
  </mtr>
</mtable>
</math>
</maths>
<br/>
Then, if k≠−3, the following equation (27) holds:
</p>
<p id="p-0122" num="0128">
<maths id="MATH-US-00014" num="00014">
<math overflow="scroll">
<mtable>
  <mtr>
    <mtd>
      <mrow>
        <msubsup>
          <mi>C</mi>
          <mi>f</mi>
          <mrow>
            <mo>(</mo>
            <mrow>
              <mi>m</mi>
              <mo>,</mo>
              <mi>s</mi>
            </mrow>
            <mo>)</mo>
          </mrow>
        </msubsup>
        <mo>=</mo>
        <mrow>
          <mi>C</mi>
          <mo>+</mo>
          <mfrac>
            <mi>H</mi>
            <mrow>
              <mrow>
                <mo>(</mo>
                <mrow>
                  <mrow>
                    <mn>3</mn>
                    <mo>/</mo>
                    <mn>2</mn>
                  </mrow>
                  <mo>+</mo>
                  <mrow>
                    <mi>k</mi>
                    <mo>/</mo>
                    <mn>2</mn>
                  </mrow>
                </mrow>
                <mo>)</mo>
              </mrow>
              <mo>⁢</mo>
              <msup>
                <mi>λ</mi>
                <mrow>
                  <mrow>
                    <mn>3</mn>
                    <mo>/</mo>
                    <mn>2</mn>
                  </mrow>
                  <mo>+</mo>
                  <mrow>
                    <mi>k</mi>
                    <mo>/</mo>
                    <mn>2</mn>
                  </mrow>
                </mrow>
              </msup>
            </mrow>
          </mfrac>
        </mrow>
      </mrow>
    </mtd>
    <mtd>
      <mrow>
        <mo>(</mo>
        <mn>27</mn>
        <mo>)</mo>
      </mrow>
    </mtd>
  </mtr>
</mtable>
</math>
</maths>
<br/>
The equation (27) is a general equation of C<sub>ƒ</sub><sup>(m,s) </sup>(where C is a constant).
</p>
<p id="p-0123" num="0129">When detecting the optimal value of λ, the number of pixels violating the BC may be examined for safety. In the course of determining a mapping for each pixel, the probability of violating the BC is assumed as a value p<sub>0 </sub>here. In this case, since</p>
<p id="p-0124" num="0130">
<maths id="MATH-US-00015" num="00015">
<math overflow="scroll">
<mtable>
  <mtr>
    <mtd>
      <mrow>
        <mfrac>
          <mrow>
            <mo>∂</mo>
            <mi>A</mi>
          </mrow>
          <mrow>
            <mo>∂</mo>
            <mi>λ</mi>
          </mrow>
        </mfrac>
        <mo>=</mo>
        <mfrac>
          <mrow>
            <mi>h</mi>
            <mo>⁡</mo>
            <mrow>
              <mo>(</mo>
              <mi>l</mi>
              <mo>)</mo>
            </mrow>
          </mrow>
          <msup>
            <mi>λ</mi>
            <mrow>
              <mn>3</mn>
              <mo>/</mo>
              <mn>2</mn>
            </mrow>
          </msup>
        </mfrac>
      </mrow>
    </mtd>
    <mtd>
      <mrow>
        <mo>(</mo>
        <mn>28</mn>
        <mo>)</mo>
      </mrow>
    </mtd>
  </mtr>
</mtable>
</math>
</maths>
<br/>
holds, the number of pixels violating the BC increases at a rate of:
</p>
<p id="p-0125" num="0131">
<maths id="MATH-US-00016" num="00016">
<math overflow="scroll">
<mtable>
  <mtr>
    <mtd>
      <mrow>
        <mrow>
          <msub>
            <mi>B</mi>
            <mn>0</mn>
          </msub>
          <mo>=</mo>
          <mfrac>
            <mrow>
              <mrow>
                <mi>h</mi>
                <mo>⁡</mo>
                <mrow>
                  <mo>(</mo>
                  <mi>l</mi>
                  <mo>)</mo>
                </mrow>
              </mrow>
              <mo>⁢</mo>
              <msub>
                <mi>p</mi>
                <mn>0</mn>
              </msub>
            </mrow>
            <msup>
              <mi>λ</mi>
              <mrow>
                <mn>3</mn>
                <mo>/</mo>
                <mn>2</mn>
              </mrow>
            </msup>
          </mfrac>
        </mrow>
        <mo>⁢</mo>
        <mstyle>
          <mtext>
</mtext>
        </mstyle>
        <mo>⁢</mo>
        <mrow>
          <mi>Thus</mi>
          <mo>,</mo>
        </mrow>
      </mrow>
    </mtd>
    <mtd>
      <mrow>
        <mo>(</mo>
        <mn>29</mn>
        <mo>)</mo>
      </mrow>
    </mtd>
  </mtr>
  <mtr>
    <mtd>
      <mrow>
        <mfrac>
          <mrow>
            <msub>
              <mi>B</mi>
              <mn>0</mn>
            </msub>
            <mo>⁢</mo>
            <msup>
              <mi>λ</mi>
              <mrow>
                <mn>3</mn>
                <mo>/</mo>
                <mn>2</mn>
              </mrow>
            </msup>
          </mrow>
          <mrow>
            <msub>
              <mi>p</mi>
              <mn>0</mn>
            </msub>
            <mo>⁢</mo>
            <mrow>
              <mi>h</mi>
              <mo>⁡</mo>
              <mrow>
                <mo>(</mo>
                <mi>l</mi>
                <mo>)</mo>
              </mrow>
            </mrow>
          </mrow>
        </mfrac>
        <mo>=</mo>
        <mn>1</mn>
      </mrow>
    </mtd>
    <mtd>
      <mrow>
        <mo>(</mo>
        <mn>30</mn>
        <mo>)</mo>
      </mrow>
    </mtd>
  </mtr>
</mtable>
</math>
</maths>
<br/>
is a constant. If it is assumed that h(l)=Hl<sup>k</sup>, the following equation (31), for example,
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>B</i><sub>0</sub>λ<sup>3/2+k/2</sup><i>=p</i><sub>0</sub><i>H</i>  (31)<?in-line-formulae description="In-line Formulae" end="tail"?>
<br/>
becomes a constant. However, when λ exceeds the optimal value, the above value of equation (31) increases abruptly. By detecting this phenomenon, i.e. whether or not the value of B<sub>0</sub>λ<sup>3/2+k/2 </sup>/2<sup>m </sup>exceeds an abnormal value B<sub>0thres</sub>, the optimal value of λ can be determined. Similarly, whether or not the value of B<sub>1</sub>λ<sup>3/2+k/2 </sup>/2<sup>m </sup>exceeds an abnormal value B<sub>1thres </sub>can be used to check for an increasing rate B<sub>1 </sub>of pixels violating the third condition of the BC. The reason why the factor 2<sup>m </sup>is introduced here will be described at a later stage. This system is not sensitive to the two threshold values B<sub>0thres </sub>and B<sub>1thres</sub>. The two threshold values B<sub>0thres </sub>and B<sub>1thres </sub>can be used to detect excessive distortion of the mapping which may not be detected through observation of the energy C<sub>ƒ</sub><sup>(m,s)</sup>.
</p>
<p id="p-0126" num="0132">In the experimentation, when λ exceeded 0.1 the computation of f<sup>(m,s) </sup>was stopped and the computation of f<sup>(m,s+1) </sup>was started. That is because the computation of submappings is affected by a difference of only 3 out of 255 levels in pixel intensity when λ&gt;0.1 and it is then difficult to obtain a correct result.</p>
<p id="h-0016" num="0000">[1.4.2] Histogram h(l)</p>
<p id="p-0127" num="0133">The examination of C<sub>ƒ</sub><sup>(m,s) </sup>does not depend on the histogram h(l), however, the examination of the BC and its third condition may be affected by h(l). When (λ, C<sub>ƒ</sub><sup>(m,s)</sup>) is actually plotted, k is usually close to 1. In the experiment, k=1 is used, that is, B<sub>0</sub>λ<sup>2 </sup>and B<sub>1</sub>λ<sup>2 </sup>are examined. If the true value of k is less than 1, B<sub>0</sub>λ<sup>2 </sup>and B<sub>1</sub>λ<sup>2 </sup>are not constants and increase gradually by a factor of λ<sup>(1−k)/2</sup>. If h(l) is a constant, the factor is, for example, λ<sup>1/2</sup>. However, such a difference can be absorbed by setting the threshold B<sub>0thres </sub>appropriately.</p>
<p id="p-0128" num="0134">Let us model the source image by a circular object, with its center at (x<sub>0</sub>, y<sub>0</sub>) and its radius r, given by:</p>
<p id="p-0129" num="0135">
<maths id="MATH-US-00017" num="00017">
<math overflow="scroll">
<mtable>
  <mtr>
    <mtd>
      <mrow>
        <mrow>
          <mi>p</mi>
          <mo>⁡</mo>
          <mrow>
            <mo>(</mo>
            <mrow>
              <mi>i</mi>
              <mo>,</mo>
              <mi>j</mi>
            </mrow>
            <mo>)</mo>
          </mrow>
        </mrow>
        <mo>=</mo>
        <mrow>
          <mo>{</mo>
          <mtable>
            <mtr>
              <mtd>
                <mrow>
                  <mi/>
                  <mo>⁢</mo>
                  <mrow>
                    <mfrac>
                      <mn>255</mn>
                      <mi>r</mi>
                    </mfrac>
                    <mo>⁢</mo>
                    <mrow>
                      <mi>c</mi>
                      <mo>⁡</mo>
                      <mrow>
                        <mo>(</mo>
                        <msqrt>
                          <mrow>
                            <msup>
                              <mrow>
                                <mo>(</mo>
                                <mrow>
                                  <mi>i</mi>
                                  <mo>-</mo>
                                  <msub>
                                    <mi>x</mi>
                                    <mn>0</mn>
                                  </msub>
                                </mrow>
                                <mo>)</mo>
                              </mrow>
                              <mn>2</mn>
                            </msup>
                            <mo>+</mo>
                            <msup>
                              <mrow>
                                <mo>(</mo>
                                <mrow>
                                  <mi>j</mi>
                                  <mo>-</mo>
                                  <msub>
                                    <mi>y</mi>
                                    <mn>0</mn>
                                  </msub>
                                </mrow>
                                <mo>)</mo>
                              </mrow>
                              <mn>2</mn>
                            </msup>
                          </mrow>
                        </msqrt>
                        <mo>)</mo>
                      </mrow>
                    </mrow>
                    <mo>⁢</mo>
                    <mstyle>
                      <mspace width="0.8em" height="0.8ex"/>
                    </mstyle>
                    <mo>⁢</mo>
                    <mi>…</mi>
                    <mo>⁢</mo>
                    <mstyle>
                      <mspace width="0.6em" height="0.6ex"/>
                    </mstyle>
                    <mo>⁢</mo>
                    <mrow>
                      <mo>(</mo>
                      <mrow>
                        <msqrt>
                          <mrow>
                            <msup>
                              <mrow>
                                <mo>(</mo>
                                <mrow>
                                  <mi>i</mi>
                                  <mo>-</mo>
                                  <msub>
                                    <mi>x</mi>
                                    <mn>0</mn>
                                  </msub>
                                </mrow>
                                <mo>)</mo>
                              </mrow>
                              <mn>2</mn>
                            </msup>
                            <mo>+</mo>
                            <msup>
                              <mrow>
                                <mo>(</mo>
                                <mrow>
                                  <mi>j</mi>
                                  <mo>-</mo>
                                  <msub>
                                    <mi>y</mi>
                                    <mn>0</mn>
                                  </msub>
                                </mrow>
                                <mo>)</mo>
                              </mrow>
                              <mn>2</mn>
                            </msup>
                          </mrow>
                        </msqrt>
                        <mo>≤</mo>
                        <mi>r</mi>
                      </mrow>
                      <mo>)</mo>
                    </mrow>
                  </mrow>
                </mrow>
              </mtd>
            </mtr>
            <mtr>
              <mtd>
                <mrow>
                  <mi/>
                  <mo>⁢</mo>
                  <mrow>
                    <mn>0</mn>
                    <mo>⁢</mo>
                    <mstyle>
                      <mspace width="0.8em" height="0.8ex"/>
                    </mstyle>
                    <mo>⁢</mo>
                    <mi>…</mi>
                    <mo>⁢</mo>
                    <mstyle>
                      <mspace width="0.8em" height="0.8ex"/>
                    </mstyle>
                    <mo>⁢</mo>
                    <mrow>
                      <mo>(</mo>
                      <mi>otherwise</mi>
                      <mo>)</mo>
                    </mrow>
                  </mrow>
                </mrow>
              </mtd>
            </mtr>
          </mtable>
        </mrow>
      </mrow>
    </mtd>
    <mtd>
      <mrow>
        <mo>(</mo>
        <mn>32</mn>
        <mo>)</mo>
      </mrow>
    </mtd>
  </mtr>
</mtable>
</math>
</maths>
<br/>
and the destination image given by:
</p>
<p id="p-0130" num="0136">
<maths id="MATH-US-00018" num="00018">
<math overflow="scroll">
<mtable>
  <mtr>
    <mtd>
      <mrow>
        <mrow>
          <mi>q</mi>
          <mo>⁡</mo>
          <mrow>
            <mo>(</mo>
            <mrow>
              <mi>i</mi>
              <mo>,</mo>
              <mi>j</mi>
            </mrow>
            <mo>)</mo>
          </mrow>
        </mrow>
        <mo>=</mo>
        <mrow>
          <mo>{</mo>
          <mtable>
            <mtr>
              <mtd>
                <mrow>
                  <mi/>
                  <mo>⁢</mo>
                  <mrow>
                    <mfrac>
                      <mn>255</mn>
                      <mi>r</mi>
                    </mfrac>
                    <mo>⁢</mo>
                    <mrow>
                      <mi>c</mi>
                      <mo>⁡</mo>
                      <mrow>
                        <mo>(</mo>
                        <msqrt>
                          <mrow>
                            <msup>
                              <mrow>
                                <mo>(</mo>
                                <mrow>
                                  <mi>i</mi>
                                  <mo>-</mo>
                                  <msub>
                                    <mi>x</mi>
                                    <mn>1</mn>
                                  </msub>
                                </mrow>
                                <mo>)</mo>
                              </mrow>
                              <mn>2</mn>
                            </msup>
                            <mo>+</mo>
                            <msup>
                              <mrow>
                                <mo>(</mo>
                                <mrow>
                                  <mi>j</mi>
                                  <mo>-</mo>
                                  <msub>
                                    <mi>y</mi>
                                    <mn>1</mn>
                                  </msub>
                                </mrow>
                                <mo>)</mo>
                              </mrow>
                              <mn>2</mn>
                            </msup>
                          </mrow>
                        </msqrt>
                        <mo>)</mo>
                      </mrow>
                    </mrow>
                    <mo>⁢</mo>
                    <mstyle>
                      <mspace width="0.8em" height="0.8ex"/>
                    </mstyle>
                    <mo>⁢</mo>
                    <mi>…</mi>
                    <mo>⁢</mo>
                    <mstyle>
                      <mspace width="0.6em" height="0.6ex"/>
                    </mstyle>
                    <mo>⁢</mo>
                    <mrow>
                      <mo>(</mo>
                      <mrow>
                        <msqrt>
                          <mrow>
                            <msup>
                              <mrow>
                                <mo>(</mo>
                                <mrow>
                                  <mi>i</mi>
                                  <mo>-</mo>
                                  <msub>
                                    <mi>x</mi>
                                    <mn>1</mn>
                                  </msub>
                                </mrow>
                                <mo>)</mo>
                              </mrow>
                              <mn>2</mn>
                            </msup>
                            <mo>+</mo>
                            <msup>
                              <mrow>
                                <mo>(</mo>
                                <mrow>
                                  <mi>j</mi>
                                  <mo>-</mo>
                                  <msub>
                                    <mi>y</mi>
                                    <mn>1</mn>
                                  </msub>
                                </mrow>
                                <mo>)</mo>
                              </mrow>
                              <mn>2</mn>
                            </msup>
                          </mrow>
                        </msqrt>
                        <mo>≤</mo>
                        <mi>r</mi>
                      </mrow>
                      <mo>)</mo>
                    </mrow>
                  </mrow>
                </mrow>
              </mtd>
            </mtr>
            <mtr>
              <mtd>
                <mrow>
                  <mi/>
                  <mo>⁢</mo>
                  <mrow>
                    <mn>0</mn>
                    <mo>⁢</mo>
                    <mstyle>
                      <mspace width="0.8em" height="0.8ex"/>
                    </mstyle>
                    <mo>⁢</mo>
                    <mi>…</mi>
                    <mo>⁢</mo>
                    <mstyle>
                      <mspace width="0.8em" height="0.8ex"/>
                    </mstyle>
                    <mo>⁢</mo>
                    <mrow>
                      <mo>(</mo>
                      <mi>otherwise</mi>
                      <mo>)</mo>
                    </mrow>
                  </mrow>
                </mrow>
              </mtd>
            </mtr>
          </mtable>
        </mrow>
      </mrow>
    </mtd>
    <mtd>
      <mrow>
        <mo>(</mo>
        <mn>33</mn>
        <mo>)</mo>
      </mrow>
    </mtd>
  </mtr>
</mtable>
</math>
</maths>
<br/>
with its center at (x<sub>1</sub>,y<sub>1</sub>) and radius r. In the above, let c(x) have the form of c(x)=x<sup>k</sup>. When the centers (x<sub>0</sub>, y<sub>0</sub>) and (x<sub>1</sub>,y<sub>1</sub>) are sufficiently far from each other, the histogram h(l) is then in the form:
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>h</i>(<i>l</i>)∝<i>rl</i><sup>k</sup>(<i>k</i>≠0)  (34)<?in-line-formulae description="In-line Formulae" end="tail"?>
</p>
<p id="p-0131" num="0137">When k=1, the images represent objects with clear boundaries embedded in the background. These objects become darker toward their centers and brighter toward their boundaries. When k=−1, the images represent objects with vague boundaries. These objects are brightest at their centers, and become darker toward their boundaries. Without much loss of generality, it suffices to state that objects in images are generally between these two types of objects. Thus, choosing k such that −1≦k≦1 can cover most cases and the equation (27) is generally a decreasing function for this range.</p>
<p id="p-0132" num="0138">As can be observed from the above equation (34), attention must be directed to the fact that r is influenced by the resolution of the image, that is, r is proportional to 2<sup>m</sup>. This is the reason for the factor 2<sup>m </sup>being introduced in the above section [1.4.1].</p>
<p id="h-0017" num="0000">[1.4.3] Dynamic Determination of η</p>
<p id="p-0133" num="0139">The parameter η can also be automatically determined in a similar manner. Initially, η is set to zero, and the final mapping f<sup>(n) </sup>and the energy C<sub>ƒ</sub><sup>(n) </sup>at the finest resolution are computed. Then, after η is increased by a certain value Δη, the final mapping f<sup>(n) </sup>and the energy C<sub>ƒ</sub><sup>(n) </sup>at the finest resolution are again computed. This process is repeated until the optimal value of η is obtained. η represents the stiffness of the mapping because it is a weight of the following equation (35):
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>E</i><sub>0(i,j)</sub><sup>(m,s)</sup>=∥ƒ<sup>(m,s)</sup>(<i>i,j</i>)−ƒ<sup>(m,s−1)</sup>(<i>i,j</i>)∥<sup>2</sup>  (35)<?in-line-formulae description="In-line Formulae" end="tail"?>
</p>
<p id="p-0134" num="0140">If η is zero, D<sub>ƒ</sub><sup>(n) </sup>is determined irrespective of the previous submapping, and the present submapping may be elastically deformed and become too distorted. On the other hand, if η is a very large value, D<sub>ƒ</sub><sup>(n) </sup>is almost completely determined by the immediately previous submapping. The submappings are then very stiff, and the pixels are mapped to almost the same locations. The resulting mapping is therefore the identity mapping. When the value of η increases from 0, C<sub>ƒ</sub><sup>(n) </sup>gradually decreases as will be described later. However, when the value of η exceeds the optimal value, the energy starts increasing as shown in <figref idref="DRAWINGS">FIG. 4</figref>. In <figref idref="DRAWINGS">FIG. 4</figref>, the x-axis represents η, and y-axis represents C<sub>f</sub>.</p>
<p id="p-0135" num="0141">The optimum value of η which minimizes C<sub>ƒ</sub><sup>(n) </sup>can be obtained in this manner. However, since various elements affect this computation as compared to the case of λ, C<sub>ƒ</sub><sup>(n) </sup>changes while slightly fluctuating. This difference is caused because a submapping is re-computed once in the case of λ whenever an input changes slightly, whereas all the submappings must be re-computed in the case of η. Thus, whether the obtained value of C<sub>ƒ</sub><sup>(n) </sup>is the minimum or not cannot be determined as easily. When candidates for the minimum value are found, the true minimum needs to be searched by setting up further finer intervals.</p>
<p id="h-0018" num="0000">[1.5] Supersampling</p>
<p id="p-0136" num="0142">When deciding the correspondence between the pixels, the range of f<sup>(m,s) </sup>can be expanded to R×R (R being the set of real numbers) in order to increase the degree of freedom. In this case, the intensity of the pixels of the destination image is interpolated, to provide f<sup>(m,s) </sup>having an intensity at non-integer points:
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>V</i>(<i>q</i><sub>ƒ</sub><sub><sup2>(m,s)</sup2></sub><sub>i,j)</sub><sup>(m,s)</sup>)  (36)<?in-line-formulae description="In-line Formulae" end="tail"?>
<br/>
That is, supersampling is performed. In an example implementation, f<sup>(m,s) </sup>may take integer and half integer values, and
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>V</i>(<i>q</i><sub>(i,j)+(0.5,0.5)</sub><sup>(m,s)</sup>)  (37)<?in-line-formulae description="In-line Formulae" end="tail"?>
<br/>
is given by
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?>(<i>V</i>(<i>q</i><sub>(i,j)</sub><sup>(m,s)</sup>)+<i>V</i>(<i>q</i><sub>(i,j)+(1,1)</sub><sup>(m,s)</sup>))/2  (38)<?in-line-formulae description="In-line Formulae" end="tail"?>
<br/>
[1.6] Normalization of the Pixel Intensity of Each Image
</p>
<p id="p-0137" num="0143">When the source and destination images contain quite different objects, the raw pixel intensity may not be used to compute the mapping because a large difference in the pixel intensity causes excessively large energy C<sub>ƒ</sub><sup>(m,s) </sup>and thus making it difficult to obtain an accurate evaluation.</p>
<p id="p-0138" num="0144">For example, a matching between a human face and a cat's face is computed as shown in <figref idref="DRAWINGS">FIGS. 20(</figref><i>a</i>) and <b>20</b>(<i>b</i>). The cat's face is covered with hair and is a mixture of very bright pixels and very dark pixels. In this case, in order to compute the submappings of the two faces, subimages are normalized. That is, the darkest pixel intensity is set to 0 while the brightest pixel intensity is set to 255, and other pixel intensity values are obtained using linear interpolation.</p>
<p id="h-0019" num="0000">[1.7] Implementation</p>
<p id="p-0139" num="0145">In an example implementation, a heuristic method is utilized wherein the computation proceeds linearly as the source image is scanned. First, the value of f<sup>(m,s) </sup>is determined at the top leftmost pixel (i,j)=(0,0). The value of each f<sup>(m,s) </sup>(i,j) is then determined while i is increased by one at each step. When i reaches the width of the image, j is increased by one and i is reset to zero. Thereafter, f<sup>(m,s) </sup>(i,j) is determined while scanning the source image. Once pixel correspondence is determined for all the points, it means that a single mapping f<sup>(m,s) </sup>is determined.</p>
<p id="p-0140" num="0146">When a corresponding point q<sub>f(i,j) </sub>is determined for p<sub>(i,j)</sub>, a corresponding point q<sub>f(i,j+1) </sub>of p<sub>(i,j+1) </sub>is determined next. The position of q<sub>f(i,j+1) </sub>is constrained by the position of q<sub>f(i,j) </sub>since the position of q<sub>f(i,j+1) </sub>satisfies the BC. Thus, in this system, a point whose corresponding point is determined earlier is given higher priority. If the situation continues in which (0,0) is always given the highest priority, the final mapping might be unnecessarily biased. In order to avoid this bias, f<sup>(m,s) </sup>is determined in the following manner in the premised technology.</p>
<p id="p-0141" num="0147">First, when (s mod 4) is 0, f<sup>(m,s) </sup>is determined starting from (0,0) while gradually increasing both i and j. When (s mod 4) is 1, f<sup>(m,s) </sup>is determined starting from the top rightmost location while decreasing i and increasing j. When (s mod 4) is 2, f<sup>(m,s) </sup>is determined starting from the bottom rightmost location while decreasing both i and j. When (s mod 4) is 3, f<sup>(m,s) </sup>is determined starting from the bottom leftmost location while increasing i and decreasing j. Since a concept such as the submapping, that is, a parameter s, does not exist in the finest n-th level, f<sup>(m,s) </sup>is computed continuously in two directions on the assumption that s=0 and s=2.</p>
<p id="p-0142" num="0148">In this implementation, the values of f<sup>(m,s) </sup>(i,j) (m=0, . . . ,n) that satisfy the BC are chosen as much as possible from the candidates (k,l) by imposing a penalty on the candidates violating the BC. The energy D<sub>(k,l) </sub>of a candidate that violates the third condition of the BC is multiplied by φ and that of a candidate that violates the first or second condition of the BC is multiplied by φ. In this implementation, φ=2 and φ=100000 are used.</p>
<p id="p-0143" num="0149">In order to check the above-mentioned BC, the following test may be performed as the procedure when determining (k,l)=f<sup>(m,s) </sup>(i,j). Namely, for each grid point (k,l) in the inherited quadrilateral of f<sup>(m,s) </sup>(i,j), whether or not the z-component of the outer product of
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>W={right arrow over (A)}×{right arrow over (B)}</i>  (39)<?in-line-formulae description="In-line Formulae" end="tail"?>
<br/>
is equal to or greater than 0 is examined, where
</p>
<p id="p-0144" num="0150">
<maths id="MATH-US-00019" num="00019">
<math overflow="scroll">
<mtable>
  <mtr>
    <mtd>
      <mrow>
        <mover>
          <mi>A</mi>
          <mo>→</mo>
        </mover>
        <mo>=</mo>
        <mover>
          <mrow>
            <msubsup>
              <mi>q</mi>
              <msup>
                <mi>f</mi>
                <msub>
                  <mrow>
                    <mo>(</mo>
                    <mrow>
                      <mi>m</mi>
                      <mo>,</mo>
                      <mi>s</mi>
                    </mrow>
                    <mo>)</mo>
                  </mrow>
                  <mrow>
                    <mo>(</mo>
                    <mrow>
                      <mi>i</mi>
                      <mo>,</mo>
                      <mrow>
                        <mi>j</mi>
                        <mo>-</mo>
                        <mn>1</mn>
                      </mrow>
                    </mrow>
                    <mo>)</mo>
                  </mrow>
                </msub>
              </msup>
              <mrow>
                <mo>(</mo>
                <mrow>
                  <mi>m</mi>
                  <mo>,</mo>
                  <mi>s</mi>
                </mrow>
                <mo>)</mo>
              </mrow>
            </msubsup>
            <mo>⁢</mo>
            <msubsup>
              <mi>q</mi>
              <msup>
                <mi>f</mi>
                <msub>
                  <mrow>
                    <mo>(</mo>
                    <mrow>
                      <mi>m</mi>
                      <mo>,</mo>
                      <mi>s</mi>
                    </mrow>
                    <mo>)</mo>
                  </mrow>
                  <mrow>
                    <mo>(</mo>
                    <mrow>
                      <mrow>
                        <mi>i</mi>
                        <mo>+</mo>
                        <mn>1</mn>
                      </mrow>
                      <mo>,</mo>
                      <mrow>
                        <mi>j</mi>
                        <mo>-</mo>
                        <mn>1</mn>
                      </mrow>
                    </mrow>
                    <mo>)</mo>
                  </mrow>
                </msub>
              </msup>
              <mrow>
                <mo>(</mo>
                <mrow>
                  <mi>m</mi>
                  <mo>,</mo>
                  <mi>s</mi>
                </mrow>
                <mo>)</mo>
              </mrow>
            </msubsup>
          </mrow>
          <mo>→</mo>
        </mover>
      </mrow>
    </mtd>
    <mtd>
      <mrow>
        <mo>(</mo>
        <mn>40</mn>
        <mo>)</mo>
      </mrow>
    </mtd>
  </mtr>
  <mtr>
    <mtd>
      <mrow>
        <mover>
          <mi>B</mi>
          <mo>→</mo>
        </mover>
        <mo>=</mo>
        <mover>
          <mrow>
            <msubsup>
              <mi>q</mi>
              <msup>
                <mi>f</mi>
                <msub>
                  <mrow>
                    <mo>(</mo>
                    <mrow>
                      <mi>m</mi>
                      <mo>,</mo>
                      <mi>s</mi>
                    </mrow>
                    <mo>)</mo>
                  </mrow>
                  <mrow>
                    <mo>(</mo>
                    <mrow>
                      <mi>i</mi>
                      <mo>,</mo>
                      <mrow>
                        <mi>j</mi>
                        <mo>-</mo>
                        <mn>1</mn>
                      </mrow>
                    </mrow>
                    <mo>)</mo>
                  </mrow>
                </msub>
              </msup>
              <mrow>
                <mo>(</mo>
                <mrow>
                  <mi>m</mi>
                  <mo>,</mo>
                  <mi>s</mi>
                </mrow>
                <mo>)</mo>
              </mrow>
            </msubsup>
            <mo>⁢</mo>
            <msubsup>
              <mi>q</mi>
              <mrow>
                <mo>(</mo>
                <mrow>
                  <mi>k</mi>
                  <mo>,</mo>
                  <mi>l</mi>
                </mrow>
                <mo>)</mo>
              </mrow>
              <mrow>
                <mo>(</mo>
                <mrow>
                  <mi>m</mi>
                  <mo>,</mo>
                  <mi>s</mi>
                </mrow>
                <mo>)</mo>
              </mrow>
            </msubsup>
          </mrow>
          <mo>→</mo>
        </mover>
      </mrow>
    </mtd>
    <mtd>
      <mrow>
        <mo>(</mo>
        <mn>41</mn>
        <mo>)</mo>
      </mrow>
    </mtd>
  </mtr>
</mtable>
</math>
</maths>
<br/>
Here, the vectors are regarded as 3D vectors and the z-axis is defined in the orthogonal right-hand coordinate system. When W is negative, the candidate is imposed with a penalty by multiplying D<sub>(k,j)</sub><sup>(m,s) </sup>by φ so that it is not as likely to be selected.
</p>
<p id="p-0145" num="0151"><figref idref="DRAWINGS">FIGS. 5(</figref><i>a</i>) and <b>5</b>(<i>b</i>) illustrate the reason why this condition is inspected. <figref idref="DRAWINGS">FIG. 5(</figref><i>a</i>) shows a candidate without a penalty and <figref idref="DRAWINGS">FIG. 5(</figref><i>b</i>) shows one with a penalty. When determining the mapping f<sup>(m,s) </sup>(i,j+1) for the adjacent pixel at (i,j+1), there is no pixel on the source image plane that satisfies the BC if the z-component of W is negative because then q<sub>(k,l)</sub><sup>(m,s) </sup>passes the boundary of the adjacent quadrilateral.</p>
<p id="h-0020" num="0000">[1.7.1] The Order of Submappings</p>
<p id="p-0146" num="0152">In this implementation, σ(0)=0, σ(1)=1, σ(2)=2, σ(3)=3, σ(4)=0 are used when the resolution level is even, while σ(0)=3, σ(1)=2, σ(2)=1, σ(3)=0, σ(4)=3 are used when the resolution level is odd. Thus, the submappings are shuffled to some extent. It is to be noted that the submappings are primarily of four types, and s may be any of 0 to 3. However, a processing with s=4 is used in this implementation for a reason to be described later.</p>
<p id="h-0021" num="0000">[1.8] Interpolations</p>
<p id="p-0147" num="0153">After the mapping between the source and destination images is determined, the intensity values of the corresponding pixels are interpolated. In the implementation, trilinear interpolation is used. Suppose that a square p<sub>(i,j)</sub>p<sub>(i+1,j)</sub>p<sub>(i+j+1)</sub>p<sub>(i,j+1) </sub>on the source image plane is mapped to a quadrilateral q<sub>f(i,j)</sub>q<sub>f(i+1,j)</sub>q<sub>f(i+1,j+1)</sub>q<sub>f(i,j+1</sub>) on the destination image plane. For simplicity, the distance between the image planes is assumed to be 1. The intermediate image pixels r(x,y,t) (0≦x≦N−1, 0≦y≦M−1) whose distance from the source image plane is t (0≦t≦1) are obtained as follows. First, the location of the pixel r(x,y,t), where x,y,t εR, is determined by equation (42):</p>
<p id="p-0148" num="0154">
<maths id="MATH-US-00020" num="00020">
<math overflow="scroll">
<mtable>
  <mtr>
    <mtd>
      <mrow>
        <mrow>
          <mo>(</mo>
          <mrow>
            <mi>x</mi>
            <mo>,</mo>
            <mi>y</mi>
          </mrow>
          <mo>)</mo>
        </mrow>
        <mo>=</mo>
        <mrow>
          <mrow>
            <mrow>
              <mo>(</mo>
              <mrow>
                <mn>1</mn>
                <mo>-</mo>
                <mi>dx</mi>
              </mrow>
              <mo>)</mo>
            </mrow>
            <mo>⁢</mo>
            <mrow>
              <mo>(</mo>
              <mrow>
                <mn>1</mn>
                <mo>-</mo>
                <mi>dy</mi>
              </mrow>
              <mo>)</mo>
            </mrow>
            <mo>⁢</mo>
            <mrow>
              <mo>(</mo>
              <mrow>
                <mn>1</mn>
                <mo>-</mo>
                <mi>t</mi>
              </mrow>
              <mo>)</mo>
            </mrow>
            <mo>⁢</mo>
            <mrow>
              <mo>(</mo>
              <mrow>
                <mi>i</mi>
                <mo>,</mo>
                <mi>j</mi>
              </mrow>
              <mo>)</mo>
            </mrow>
          </mrow>
          <mo>+</mo>
          <mrow>
            <mrow>
              <mo>(</mo>
              <mrow>
                <mn>1</mn>
                <mo>-</mo>
                <mi>dx</mi>
              </mrow>
              <mo>)</mo>
            </mrow>
            <mo>⁢</mo>
            <mrow>
              <mo>(</mo>
              <mrow>
                <mn>1</mn>
                <mo>-</mo>
                <mi>dy</mi>
              </mrow>
              <mo>)</mo>
            </mrow>
            <mo>⁢</mo>
            <mrow>
              <mi>tf</mi>
              <mo>⁡</mo>
              <mrow>
                <mo>(</mo>
                <mrow>
                  <mi>i</mi>
                  <mo>,</mo>
                  <mi>j</mi>
                </mrow>
                <mo>)</mo>
              </mrow>
            </mrow>
          </mrow>
          <mo>+</mo>
          <mrow>
            <mrow>
              <mi>dx</mi>
              <mo>⁡</mo>
              <mrow>
                <mo>(</mo>
                <mrow>
                  <mn>1</mn>
                  <mo>-</mo>
                  <mi>dy</mi>
                </mrow>
                <mo>)</mo>
              </mrow>
            </mrow>
            <mo>⁢</mo>
            <mrow>
              <mo>(</mo>
              <mrow>
                <mn>1</mn>
                <mo>-</mo>
                <mi>t</mi>
              </mrow>
              <mo>)</mo>
            </mrow>
            <mo>⁢</mo>
            <mrow>
              <mo>(</mo>
              <mrow>
                <mrow>
                  <mi>i</mi>
                  <mo>+</mo>
                  <mn>1</mn>
                </mrow>
                <mo>,</mo>
                <mi>j</mi>
              </mrow>
              <mo>)</mo>
            </mrow>
          </mrow>
          <mo>+</mo>
          <mrow>
            <mrow>
              <mi>dx</mi>
              <mo>⁡</mo>
              <mrow>
                <mo>(</mo>
                <mrow>
                  <mn>1</mn>
                  <mo>-</mo>
                  <mi>dy</mi>
                </mrow>
                <mo>)</mo>
              </mrow>
            </mrow>
            <mo>⁢</mo>
            <mrow>
              <mi>tf</mi>
              <mo>⁡</mo>
              <mrow>
                <mo>(</mo>
                <mrow>
                  <mrow>
                    <mi>i</mi>
                    <mo>+</mo>
                    <mn>1</mn>
                  </mrow>
                  <mo>,</mo>
                  <mi>j</mi>
                </mrow>
                <mo>)</mo>
              </mrow>
            </mrow>
          </mrow>
          <mo>+</mo>
          <mrow>
            <mrow>
              <mo>(</mo>
              <mrow>
                <mn>1</mn>
                <mo>-</mo>
                <mi>dx</mi>
              </mrow>
              <mo>)</mo>
            </mrow>
            <mo>⁢</mo>
            <mrow>
              <mi>dy</mi>
              <mo>⁡</mo>
              <mrow>
                <mo>(</mo>
                <mrow>
                  <mn>1</mn>
                  <mo>-</mo>
                  <mi>t</mi>
                </mrow>
                <mo>)</mo>
              </mrow>
            </mrow>
            <mo>⁢</mo>
            <mrow>
              <mo>(</mo>
              <mrow>
                <mi>i</mi>
                <mo>,</mo>
                <mrow>
                  <mi>j</mi>
                  <mo>+</mo>
                  <mn>1</mn>
                </mrow>
              </mrow>
              <mo>)</mo>
            </mrow>
          </mrow>
          <mo>+</mo>
          <mrow>
            <mrow>
              <mo>(</mo>
              <mrow>
                <mn>1</mn>
                <mo>-</mo>
                <mi>dx</mi>
              </mrow>
              <mo>)</mo>
            </mrow>
            <mo>⁢</mo>
            <mrow>
              <mi>dytf</mi>
              <mo>⁡</mo>
              <mrow>
                <mo>(</mo>
                <mrow>
                  <mi>i</mi>
                  <mo>,</mo>
                  <mrow>
                    <mi>j</mi>
                    <mo>+</mo>
                    <mn>1</mn>
                  </mrow>
                </mrow>
                <mo>)</mo>
              </mrow>
            </mrow>
          </mrow>
          <mo>+</mo>
          <mrow>
            <mrow>
              <mi>dxdy</mi>
              <mo>⁡</mo>
              <mrow>
                <mo>(</mo>
                <mrow>
                  <mn>1</mn>
                  <mo>-</mo>
                  <mi>t</mi>
                </mrow>
                <mo>)</mo>
              </mrow>
            </mrow>
            <mo>⁢</mo>
            <mrow>
              <mo>(</mo>
              <mrow>
                <mrow>
                  <mi>i</mi>
                  <mo>+</mo>
                  <mn>1</mn>
                </mrow>
                <mo>,</mo>
                <mrow>
                  <mi>j</mi>
                  <mo>+</mo>
                  <mn>1</mn>
                </mrow>
              </mrow>
              <mo>)</mo>
            </mrow>
          </mrow>
          <mo>+</mo>
          <mrow>
            <mi>dxdytf</mi>
            <mo>⁡</mo>
            <mrow>
              <mo>(</mo>
              <mrow>
                <mrow>
                  <mi>i</mi>
                  <mo>+</mo>
                  <mn>1</mn>
                </mrow>
                <mo>,</mo>
                <mrow>
                  <mi>j</mi>
                  <mo>+</mo>
                  <mn>1</mn>
                </mrow>
              </mrow>
              <mo>)</mo>
            </mrow>
          </mrow>
        </mrow>
      </mrow>
    </mtd>
    <mtd>
      <mrow>
        <mo>(</mo>
        <mn>42</mn>
        <mo>)</mo>
      </mrow>
    </mtd>
  </mtr>
</mtable>
</math>
</maths>
<br/>
The value of the pixel intensity at r(x,y,t) is then determined by equation (43):
</p>
<p id="p-0149" num="0155">
<maths id="MATH-US-00021" num="00021">
<math overflow="scroll">
<mtable>
  <mtr>
    <mtd>
      <mrow>
        <mrow>
          <mi>V</mi>
          <mo>⁡</mo>
          <mrow>
            <mo>(</mo>
            <mrow>
              <mi>r</mi>
              <mo>⁡</mo>
              <mrow>
                <mo>(</mo>
                <mrow>
                  <mi>x</mi>
                  <mo>,</mo>
                  <mi>y</mi>
                  <mo>,</mo>
                  <mi>t</mi>
                </mrow>
                <mo>)</mo>
              </mrow>
            </mrow>
            <mo>)</mo>
          </mrow>
        </mrow>
        <mo>=</mo>
        <mrow>
          <mrow>
            <mrow>
              <mo>(</mo>
              <mrow>
                <mn>1</mn>
                <mo>-</mo>
                <mi>dx</mi>
              </mrow>
              <mo>)</mo>
            </mrow>
            <mo>⁢</mo>
            <mrow>
              <mo>(</mo>
              <mrow>
                <mn>1</mn>
                <mo>-</mo>
                <mi>dy</mi>
              </mrow>
              <mo>)</mo>
            </mrow>
            <mo>⁢</mo>
            <mrow>
              <mo>(</mo>
              <mrow>
                <mn>1</mn>
                <mo>-</mo>
                <mi>t</mi>
              </mrow>
              <mo>)</mo>
            </mrow>
            <mo>⁢</mo>
            <mrow>
              <mi>V</mi>
              <mo>⁡</mo>
              <mrow>
                <mo>(</mo>
                <msub>
                  <mi>p</mi>
                  <mrow>
                    <mo>(</mo>
                    <mrow>
                      <mi>i</mi>
                      <mo>,</mo>
                      <mi>j</mi>
                    </mrow>
                    <mo>)</mo>
                  </mrow>
                </msub>
                <mo>)</mo>
              </mrow>
            </mrow>
          </mrow>
          <mo>+</mo>
          <mrow>
            <mrow>
              <mo>(</mo>
              <mrow>
                <mn>1</mn>
                <mo>-</mo>
                <mi>dx</mi>
              </mrow>
              <mo>)</mo>
            </mrow>
            <mo>⁢</mo>
            <mrow>
              <mo>(</mo>
              <mrow>
                <mn>1</mn>
                <mo>-</mo>
                <mi>dy</mi>
              </mrow>
              <mo>)</mo>
            </mrow>
            <mo>⁢</mo>
            <mrow>
              <mi>tV</mi>
              <mo>⁡</mo>
              <mrow>
                <mo>(</mo>
                <msub>
                  <mi>q</mi>
                  <mrow>
                    <mi>f</mi>
                    <mo>⁡</mo>
                    <mrow>
                      <mo>(</mo>
                      <mrow>
                        <mi>i</mi>
                        <mo>,</mo>
                        <mi>j</mi>
                      </mrow>
                      <mo>)</mo>
                    </mrow>
                  </mrow>
                </msub>
                <mo>)</mo>
              </mrow>
            </mrow>
          </mrow>
          <mo>+</mo>
          <mrow>
            <mrow>
              <mi>dx</mi>
              <mo>⁡</mo>
              <mrow>
                <mo>(</mo>
                <mrow>
                  <mn>1</mn>
                  <mo>-</mo>
                  <mi>dy</mi>
                </mrow>
                <mo>)</mo>
              </mrow>
            </mrow>
            <mo>⁢</mo>
            <mrow>
              <mo>(</mo>
              <mrow>
                <mn>1</mn>
                <mo>-</mo>
                <mi>t</mi>
              </mrow>
              <mo>)</mo>
            </mrow>
            <mo>⁢</mo>
            <mrow>
              <mi>V</mi>
              <mo>⁡</mo>
              <mrow>
                <mo>(</mo>
                <msub>
                  <mi>p</mi>
                  <mrow>
                    <mo>(</mo>
                    <mrow>
                      <mrow>
                        <mi>i</mi>
                        <mo>+</mo>
                        <mn>1</mn>
                      </mrow>
                      <mo>,</mo>
                      <mi>j</mi>
                    </mrow>
                    <mo>)</mo>
                  </mrow>
                </msub>
                <mo>)</mo>
              </mrow>
            </mrow>
          </mrow>
          <mo>+</mo>
          <mrow>
            <mrow>
              <mi>dx</mi>
              <mo>⁡</mo>
              <mrow>
                <mo>(</mo>
                <mrow>
                  <mn>1</mn>
                  <mo>-</mo>
                  <mi>dy</mi>
                </mrow>
                <mo>)</mo>
              </mrow>
            </mrow>
            <mo>⁢</mo>
            <mrow>
              <mi>tV</mi>
              <mo>⁡</mo>
              <mrow>
                <mo>(</mo>
                <msub>
                  <mi>q</mi>
                  <mrow>
                    <mi>f</mi>
                    <mo>⁡</mo>
                    <mrow>
                      <mo>(</mo>
                      <mrow>
                        <mrow>
                          <mi>i</mi>
                          <mo>+</mo>
                          <mn>1</mn>
                        </mrow>
                        <mo>,</mo>
                        <mi>j</mi>
                      </mrow>
                      <mo>)</mo>
                    </mrow>
                  </mrow>
                </msub>
                <mo>)</mo>
              </mrow>
            </mrow>
          </mrow>
          <mo>+</mo>
          <mrow>
            <mrow>
              <mo>(</mo>
              <mrow>
                <mn>1</mn>
                <mo>-</mo>
                <mi>dx</mi>
              </mrow>
              <mo>)</mo>
            </mrow>
            <mo>⁢</mo>
            <mrow>
              <mi>dy</mi>
              <mo>⁡</mo>
              <mrow>
                <mo>(</mo>
                <mrow>
                  <mn>1</mn>
                  <mo>-</mo>
                  <mi>t</mi>
                </mrow>
                <mo>)</mo>
              </mrow>
            </mrow>
            <mo>⁢</mo>
            <mrow>
              <mi>V</mi>
              <mo>⁡</mo>
              <mrow>
                <mo>(</mo>
                <msub>
                  <mi>p</mi>
                  <mrow>
                    <mo>(</mo>
                    <mrow>
                      <mi>i</mi>
                      <mo>,</mo>
                      <mrow>
                        <mi>j</mi>
                        <mo>+</mo>
                        <mn>1</mn>
                      </mrow>
                    </mrow>
                    <mo>)</mo>
                  </mrow>
                </msub>
                <mo>)</mo>
              </mrow>
            </mrow>
          </mrow>
          <mo>+</mo>
          <mrow>
            <mrow>
              <mo>(</mo>
              <mrow>
                <mn>1</mn>
                <mo>-</mo>
                <mi>dx</mi>
              </mrow>
              <mo>)</mo>
            </mrow>
            <mo>⁢</mo>
            <mrow>
              <mi>dytV</mi>
              <mo>⁡</mo>
              <mrow>
                <mo>(</mo>
                <msub>
                  <mi>q</mi>
                  <mrow>
                    <mi>f</mi>
                    <mo>⁡</mo>
                    <mrow>
                      <mo>(</mo>
                      <mrow>
                        <mi>i</mi>
                        <mo>,</mo>
                        <mrow>
                          <mi>j</mi>
                          <mo>+</mo>
                          <mn>1</mn>
                        </mrow>
                      </mrow>
                      <mo>)</mo>
                    </mrow>
                  </mrow>
                </msub>
                <mo>)</mo>
              </mrow>
            </mrow>
          </mrow>
          <mo>+</mo>
          <mrow>
            <mrow>
              <mi>dxdy</mi>
              <mo>⁡</mo>
              <mrow>
                <mo>(</mo>
                <mrow>
                  <mn>1</mn>
                  <mo>-</mo>
                  <mi>t</mi>
                </mrow>
                <mo>)</mo>
              </mrow>
            </mrow>
            <mo>⁢</mo>
            <mrow>
              <mi>V</mi>
              <mo>⁡</mo>
              <mrow>
                <mo>(</mo>
                <msub>
                  <mi>p</mi>
                  <mrow>
                    <mo>(</mo>
                    <mrow>
                      <mrow>
                        <mi>i</mi>
                        <mo>+</mo>
                        <mn>1</mn>
                      </mrow>
                      <mo>,</mo>
                      <mrow>
                        <mi>j</mi>
                        <mo>+</mo>
                        <mn>1</mn>
                      </mrow>
                    </mrow>
                    <mo>)</mo>
                  </mrow>
                </msub>
                <mo>)</mo>
              </mrow>
            </mrow>
          </mrow>
          <mo>+</mo>
          <mrow>
            <mi>dxdytV</mi>
            <mo>⁡</mo>
            <mrow>
              <mo>(</mo>
              <msub>
                <mi>q</mi>
                <mrow>
                  <mi>f</mi>
                  <mo>⁡</mo>
                  <mrow>
                    <mo>(</mo>
                    <mrow>
                      <mrow>
                        <mi>i</mi>
                        <mo>+</mo>
                        <mn>1</mn>
                      </mrow>
                      <mo>,</mo>
                      <mrow>
                        <mi>j</mi>
                        <mo>+</mo>
                        <mn>1</mn>
                      </mrow>
                    </mrow>
                    <mo>)</mo>
                  </mrow>
                </mrow>
              </msub>
              <mo>)</mo>
            </mrow>
          </mrow>
        </mrow>
      </mrow>
    </mtd>
    <mtd>
      <mrow>
        <mo>(</mo>
        <mn>43</mn>
        <mo>)</mo>
      </mrow>
    </mtd>
  </mtr>
</mtable>
</math>
</maths>
<br/>
where dx and dy are parameters varying from 0 to 1.
<br/>
[1.9] Mapping to Which Constraints are Imposed
</p>
<p id="p-0150" num="0156">So far, the determination of a mapping in which no constraints are imposed has been described. However, if a correspondence between particular pixels of the source and destination images is provided in a predetermined manner, the mapping can be determined using such correspondence as a constraint.</p>
<p id="p-0151" num="0157">The basic idea is that the source image is roughly deformed by an approximate mapping which maps the specified pixels of the source image to the specified pixels of the destination image and thereafter a mapping f is accurately computed.</p>
<p id="p-0152" num="0158">First, the specified pixels of the source image are mapped to the specified pixels of the destination image, then the approximate mapping that maps other pixels of the source image to appropriate locations are determined. In other words, the mapping is such that pixels in the vicinity of a specified pixel are mapped to locations near the position to which the specified one is mapped. Here, the approximate mapping at the m-th level in the resolution hierarchy is denoted by F<sup>(m)</sup>.</p>
<p id="p-0153" num="0159">The approximate mapping F is determined in the following manner. First, the mappings for several pixels are specified. When n<sub>s </sub>pixels
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>p</i>(<i>i</i><sub>0</sub><i>,j</i><sub>0</sub>),<i>p</i>(<i>i</i><sub>1</sub><i>,j</i><sub>1</sub>), . . . ,<i>p</i>(<i>i</i><sub>n</sub><sub><sub2>s</sub2></sub><sub>−1</sub><i>,j</i><sub>n</sub><sub><sub2>s</sub2></sub><sub>−1</sub>)  (44)<?in-line-formulae description="In-line Formulae" end="tail"?>
<br/>
of the source image are specified, the following values in the equation (45) are determined.
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>F</i><sup>(n)</sup>(<i>i</i><sub>0</sub><i>,j</i><sub>0</sub>)=(<i>k</i><sub>0</sub><i>,l</i><sub>0</sub>),<?in-line-formulae description="In-line Formulae" end="tail"?>
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>F</i><sup>(n)</sup>(<i>i</i><sub>1</sub>,j<sub>1</sub>)=(<i>k</i><sub>1</sub><i>,l</i><sub>1</sub>), . . . ,<?in-line-formulae description="In-line Formulae" end="tail"?>
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>F</i><sup>(n)</sup>(<i>i</i><sub>n</sub><sub><sub2>s</sub2></sub><sub>−1</sub><i>,j</i><sub>n</sub><sub><sub2>s</sub2></sub><sub>−1</sub>)=(<i>k</i><sub>n</sub><sub><sub2>s</sub2></sub><sub>−1</sub><i>,l</i><sub>n</sub><sub><sub2>s</sub2></sub><sub>−1</sub>)  (45)<?in-line-formulae description="In-line Formulae" end="tail"?>
</p>
<p id="p-0154" num="0160">For the remaining pixels of the source image, the amount of displacement is the weighted average of the displacement of p(i<sub>h</sub>, j<sub>h</sub>) (h=0, . . . , n<sub>s</sub>−1). Namely, a pixel p<sub>(i,j) </sub>is mapped to the following pixel (expressed by the equation (46)) of the destination image.</p>
<p id="p-0155" num="0161">
<maths id="MATH-US-00022" num="00022">
<math overflow="scroll">
<mtable>
  <mtr>
    <mtd>
      <mrow>
        <mrow>
          <mrow>
            <msup>
              <mi>F</mi>
              <mrow>
                <mo>(</mo>
                <mi>m</mi>
                <mo>)</mo>
              </mrow>
            </msup>
            <mo>⁡</mo>
            <mrow>
              <mo>(</mo>
              <mrow>
                <mi>i</mi>
                <mo>,</mo>
                <mi>j</mi>
              </mrow>
              <mo>)</mo>
            </mrow>
          </mrow>
          <mo>=</mo>
          <mfrac>
            <mrow>
              <mrow>
                <mo>(</mo>
                <mrow>
                  <mi>i</mi>
                  <mo>,</mo>
                  <mi>j</mi>
                </mrow>
                <mo>)</mo>
              </mrow>
              <mo>+</mo>
              <mrow>
                <munderover>
                  <mo>∑</mo>
                  <mrow>
                    <mi>h</mi>
                    <mo>=</mo>
                    <mn>0</mn>
                  </mrow>
                  <mrow>
                    <mi>h</mi>
                    <mo>=</mo>
                    <mrow>
                      <msub>
                        <mi>n</mi>
                        <mi>s</mi>
                      </msub>
                      <mo>-</mo>
                      <mn>1</mn>
                    </mrow>
                  </mrow>
                </munderover>
                <mo>⁢</mo>
                <mrow>
                  <mrow>
                    <mo>(</mo>
                    <mrow>
                      <mrow>
                        <msub>
                          <mi>k</mi>
                          <mi>h</mi>
                        </msub>
                        <mo>-</mo>
                        <msub>
                          <mi>i</mi>
                          <mi>h</mi>
                        </msub>
                      </mrow>
                      <mo>,</mo>
                      <mrow>
                        <msub>
                          <mi>l</mi>
                          <mi>h</mi>
                        </msub>
                        <mo>-</mo>
                        <msub>
                          <mi>j</mi>
                          <mi>h</mi>
                        </msub>
                      </mrow>
                    </mrow>
                    <mo>)</mo>
                  </mrow>
                  <mo>⁢</mo>
                  <mrow>
                    <msub>
                      <mi>weight</mi>
                      <mi>h</mi>
                    </msub>
                    <mo>⁡</mo>
                    <mrow>
                      <mo>(</mo>
                      <mrow>
                        <mi>i</mi>
                        <mo>,</mo>
                        <mi>j</mi>
                      </mrow>
                      <mo>)</mo>
                    </mrow>
                  </mrow>
                </mrow>
              </mrow>
            </mrow>
            <msup>
              <mn>2</mn>
              <mrow>
                <mi>n</mi>
                <mo>-</mo>
                <mi>m</mi>
              </mrow>
            </msup>
          </mfrac>
        </mrow>
        <mo>⁢</mo>
        <mstyle>
          <mtext>
</mtext>
        </mstyle>
        <mo>⁢</mo>
        <mi>where</mi>
      </mrow>
    </mtd>
    <mtd>
      <mrow>
        <mo>(</mo>
        <mn>46</mn>
        <mo>)</mo>
      </mrow>
    </mtd>
  </mtr>
  <mtr>
    <mtd>
      <mrow>
        <mrow>
          <mrow>
            <msub>
              <mi>weight</mi>
              <mi>h</mi>
            </msub>
            <mo>⁡</mo>
            <mrow>
              <mo>(</mo>
              <mrow>
                <mi>i</mi>
                <mo>,</mo>
                <mi>j</mi>
              </mrow>
              <mo>)</mo>
            </mrow>
          </mrow>
          <mo>=</mo>
          <mfrac>
            <mrow>
              <mn>1</mn>
              <mo>/</mo>
              <msup>
                <mrow>
                  <mo></mo>
                  <mrow>
                    <mo>(</mo>
                    <mrow>
                      <mrow>
                        <msub>
                          <mi>i</mi>
                          <mi>h</mi>
                        </msub>
                        <mo>-</mo>
                        <mi>i</mi>
                      </mrow>
                      <mo>,</mo>
                      <mrow>
                        <msub>
                          <mi>j</mi>
                          <mi>h</mi>
                        </msub>
                        <mo>-</mo>
                        <mi>j</mi>
                      </mrow>
                    </mrow>
                    <mo>)</mo>
                  </mrow>
                  <mo></mo>
                </mrow>
                <mn>2</mn>
              </msup>
            </mrow>
            <mrow>
              <mi>total_weight</mi>
              <mo>⁢</mo>
              <mrow>
                <mo>(</mo>
                <mrow>
                  <mi>i</mi>
                  <mo>,</mo>
                  <mi>j</mi>
                </mrow>
                <mo>)</mo>
              </mrow>
            </mrow>
          </mfrac>
        </mrow>
        <mo>⁢</mo>
        <mstyle>
          <mtext>
</mtext>
        </mstyle>
        <mo>⁢</mo>
        <mi>where</mi>
      </mrow>
    </mtd>
    <mtd>
      <mrow>
        <mo>(</mo>
        <mn>47</mn>
        <mo>)</mo>
      </mrow>
    </mtd>
  </mtr>
  <mtr>
    <mtd>
      <mrow>
        <mrow>
          <mi>total_weight</mi>
          <mo>⁢</mo>
          <mrow>
            <mo>(</mo>
            <mrow>
              <mi>i</mi>
              <mo>,</mo>
              <mi>j</mi>
            </mrow>
            <mo>)</mo>
          </mrow>
        </mrow>
        <mo>=</mo>
        <mrow>
          <munderover>
            <mo>∑</mo>
            <mrow>
              <mi>h</mi>
              <mo>=</mo>
              <mn>0</mn>
            </mrow>
            <mrow>
              <mi>h</mi>
              <mo>=</mo>
              <mrow>
                <msub>
                  <mi>n</mi>
                  <mi>s</mi>
                </msub>
                <mo>-</mo>
                <mn>1</mn>
              </mrow>
            </mrow>
          </munderover>
          <mo>⁢</mo>
          <mrow>
            <mn>1</mn>
            <mo>/</mo>
            <msup>
              <mrow>
                <mo></mo>
                <mrow>
                  <mo>(</mo>
                  <mrow>
                    <mrow>
                      <msub>
                        <mi>i</mi>
                        <mi>h</mi>
                      </msub>
                      <mo>-</mo>
                      <mi>i</mi>
                    </mrow>
                    <mo>,</mo>
                    <mrow>
                      <msub>
                        <mi>j</mi>
                        <mi>h</mi>
                      </msub>
                      <mo>-</mo>
                      <mi>j</mi>
                    </mrow>
                  </mrow>
                  <mo>)</mo>
                </mrow>
                <mo></mo>
              </mrow>
              <mn>2</mn>
            </msup>
          </mrow>
        </mrow>
      </mrow>
    </mtd>
    <mtd>
      <mrow>
        <mo>(</mo>
        <mn>48</mn>
        <mo>)</mo>
      </mrow>
    </mtd>
  </mtr>
</mtable>
</math>
</maths>
</p>
<p id="p-0156" num="0162">Second, the energy D<sub>(i,j)</sub><sup>(m,s) </sup>of the candidate mapping f is changed so that a mapping f similar to F<sup>(m) </sup>has a lower energy. Precisely speaking, D<sub>(i,j)</sub><sup>(m,s) </sup>is expressed by the equation (49):</p>
<p id="p-0157" num="0163">
<maths id="MATH-US-00023" num="00023">
<math overflow="scroll">
<mtable>
  <mtr>
    <mtd>
      <mrow>
        <mrow>
          <msubsup>
            <mi>D</mi>
            <mrow>
              <mo>(</mo>
              <mrow>
                <mi>i</mi>
                <mo>,</mo>
                <mi>j</mi>
              </mrow>
              <mo>)</mo>
            </mrow>
            <mrow>
              <mo>(</mo>
              <mrow>
                <mi>m</mi>
                <mo>,</mo>
                <mi>s</mi>
              </mrow>
              <mo>)</mo>
            </mrow>
          </msubsup>
          <mo>=</mo>
          <mrow>
            <msubsup>
              <mi>E</mi>
              <msub>
                <mn>0</mn>
                <mrow>
                  <mo>(</mo>
                  <mrow>
                    <mi>i</mi>
                    <mo>,</mo>
                    <mi>j</mi>
                  </mrow>
                  <mo>)</mo>
                </mrow>
              </msub>
              <mrow>
                <mo>(</mo>
                <mrow>
                  <mi>m</mi>
                  <mo>,</mo>
                  <mi>s</mi>
                </mrow>
                <mo>)</mo>
              </mrow>
            </msubsup>
            <mo>+</mo>
            <mrow>
              <mi>η</mi>
              <mo>⁢</mo>
              <mstyle>
                <mspace width="0.3em" height="0.3ex"/>
              </mstyle>
              <mo>⁢</mo>
              <msubsup>
                <mi>E</mi>
                <msub>
                  <mn>1</mn>
                  <mrow>
                    <mo>(</mo>
                    <mrow>
                      <mi>i</mi>
                      <mo>,</mo>
                      <mi>j</mi>
                    </mrow>
                    <mo>)</mo>
                  </mrow>
                </msub>
                <mrow>
                  <mo>(</mo>
                  <mrow>
                    <mi>m</mi>
                    <mo>,</mo>
                    <mi>s</mi>
                  </mrow>
                  <mo>)</mo>
                </mrow>
              </msubsup>
            </mrow>
            <mo>+</mo>
            <mrow>
              <mi>κ</mi>
              <mo>⁢</mo>
              <mstyle>
                <mspace width="0.3em" height="0.3ex"/>
              </mstyle>
              <mo>⁢</mo>
              <msubsup>
                <mi>E</mi>
                <msub>
                  <mn>2</mn>
                  <mrow>
                    <mo>(</mo>
                    <mrow>
                      <mi>i</mi>
                      <mo>,</mo>
                      <mi>j</mi>
                    </mrow>
                    <mo>)</mo>
                  </mrow>
                </msub>
                <mrow>
                  <mo>(</mo>
                  <mrow>
                    <mi>m</mi>
                    <mo>,</mo>
                    <mi>s</mi>
                  </mrow>
                  <mo>)</mo>
                </mrow>
              </msubsup>
            </mrow>
          </mrow>
        </mrow>
        <mo>⁢</mo>
        <mstyle>
          <mtext>
</mtext>
        </mstyle>
        <mo>⁢</mo>
        <mi>where</mi>
      </mrow>
    </mtd>
    <mtd>
      <mrow>
        <mo>(</mo>
        <mn>49</mn>
        <mo>)</mo>
      </mrow>
    </mtd>
  </mtr>
  <mtr>
    <mtd>
      <mrow>
        <msubsup>
          <mi>E</mi>
          <msub>
            <mn>2</mn>
            <mrow>
              <mo>(</mo>
              <mrow>
                <mi>i</mi>
                <mo>,</mo>
                <mi>j</mi>
              </mrow>
              <mo>)</mo>
            </mrow>
          </msub>
          <mrow>
            <mo>(</mo>
            <mrow>
              <mi>m</mi>
              <mo>,</mo>
              <mi>s</mi>
            </mrow>
            <mo>)</mo>
          </mrow>
        </msubsup>
        <mo>=</mo>
        <mrow>
          <mo>{</mo>
          <mtable>
            <mtr>
              <mtd>
                <mrow>
                  <mn>0</mn>
                  <mo>,</mo>
                  <mrow>
                    <mrow>
                      <mi>if</mi>
                      <mo>⁢</mo>
                      <mstyle>
                        <mspace width="0.8em" height="0.8ex"/>
                      </mstyle>
                      <mo>⁢</mo>
                      <msup>
                        <mrow>
                          <mo></mo>
                          <mrow>
                            <mrow>
                              <msup>
                                <mi>F</mi>
                                <mrow>
                                  <mo>(</mo>
                                  <mi>m</mi>
                                  <mo>)</mo>
                                </mrow>
                              </msup>
                              <mo>⁡</mo>
                              <mrow>
                                <mo>(</mo>
                                <mrow>
                                  <mi>i</mi>
                                  <mo>,</mo>
                                  <mi>j</mi>
                                </mrow>
                                <mo>)</mo>
                              </mrow>
                            </mrow>
                            <mo>-</mo>
                            <mrow>
                              <msup>
                                <mi>f</mi>
                                <mrow>
                                  <mo>(</mo>
                                  <mrow>
                                    <mi>m</mi>
                                    <mo>,</mo>
                                    <mi>s</mi>
                                  </mrow>
                                  <mo>)</mo>
                                </mrow>
                              </msup>
                              <mo>⁡</mo>
                              <mrow>
                                <mo>(</mo>
                                <mrow>
                                  <mi>i</mi>
                                  <mo>,</mo>
                                  <mi>j</mi>
                                </mrow>
                                <mo>)</mo>
                              </mrow>
                            </mrow>
                          </mrow>
                          <mo></mo>
                        </mrow>
                        <mn>2</mn>
                      </msup>
                    </mrow>
                    <mo>≤</mo>
                    <mrow>
                      <mo>⌊</mo>
                      <mfrac>
                        <msup>
                          <mi>ρ</mi>
                          <mn>2</mn>
                        </msup>
                        <msup>
                          <mn>2</mn>
                          <mrow>
                            <mn>2</mn>
                            <mo>⁢</mo>
                            <mrow>
                              <mo>(</mo>
                              <mrow>
                                <mi>n</mi>
                                <mo>-</mo>
                                <mi>m</mi>
                              </mrow>
                              <mo>)</mo>
                            </mrow>
                          </mrow>
                        </msup>
                      </mfrac>
                      <mo>⌋</mo>
                    </mrow>
                  </mrow>
                </mrow>
              </mtd>
            </mtr>
            <mtr>
              <mtd>
                <mrow>
                  <msup>
                    <mrow>
                      <mo></mo>
                      <mrow>
                        <mrow>
                          <msup>
                            <mi>F</mi>
                            <mrow>
                              <mo>(</mo>
                              <mi>m</mi>
                              <mo>)</mo>
                            </mrow>
                          </msup>
                          <mo>⁡</mo>
                          <mrow>
                            <mo>(</mo>
                            <mrow>
                              <mi>i</mi>
                              <mo>,</mo>
                              <mi>j</mi>
                            </mrow>
                            <mo>)</mo>
                          </mrow>
                        </mrow>
                        <mo>-</mo>
                        <mrow>
                          <msup>
                            <mi>f</mi>
                            <mrow>
                              <mo>(</mo>
                              <mrow>
                                <mi>m</mi>
                                <mo>,</mo>
                                <mi>s</mi>
                              </mrow>
                              <mo>)</mo>
                            </mrow>
                          </msup>
                          <mo>⁡</mo>
                          <mrow>
                            <mo>(</mo>
                            <mrow>
                              <mi>i</mi>
                              <mo>,</mo>
                              <mi>j</mi>
                            </mrow>
                            <mo>)</mo>
                          </mrow>
                        </mrow>
                      </mrow>
                      <mo></mo>
                    </mrow>
                    <mn>2</mn>
                  </msup>
                  <mo>,</mo>
                  <mi>otherwise</mi>
                </mrow>
              </mtd>
            </mtr>
          </mtable>
        </mrow>
      </mrow>
    </mtd>
    <mtd>
      <mrow>
        <mo>(</mo>
        <mn>50</mn>
        <mo>)</mo>
      </mrow>
    </mtd>
  </mtr>
</mtable>
</math>
</maths>
<br/>
where κ, ρ≧0. Finally, the resulting mapping f is determined by the above-described automatic computing process.
</p>
<p id="p-0158" num="0164">Note that E<sub>2</sub><sub><sub2>(i,j)</sub2></sub><sup>(m,s) </sup>becomes 0 if f<sup>(m,s) </sup>(i,j) is sufficiently close to F<sup>(m) </sup>(i,j) i.e., the distance therebetween is equal to or less than
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?>└ρ<sup>2</sup>/2<sup>2(n−m)</sup>┘  (51)<?in-line-formulae description="In-line Formulae" end="tail"?>
<br/>
This has been defined in this way because it is desirable to determine each value f<sup>(m,s) </sup>(i, j) automatically to fit in an appropriate place in the destination image as long as each value f<sup>(m,s) </sup>(i,j) is close to F<sup>(m) </sup>(i,j). For this reason, there is no need to specify the precise correspondence in detail to have the source image automatically mapped so that the source image matches the destination image.
<br/>
[2] Concrete Processing Procedure
</p>
<p id="p-0159" num="0165">The flow of a process utilizing the respective elemental techniques described in [1] will now be described.</p>
<p id="p-0160" num="0166"><figref idref="DRAWINGS">FIG. 6</figref> is a flowchart of the overall procedure of the premised technology. Referring to <figref idref="DRAWINGS">FIG. 6</figref>, a source image and destination image are first processed using a multiresolutional critical point filter (S<b>1</b>). The source image and the destination image are then matched (S<b>2</b>). As will be understood, the matching (S<b>2</b>) is not required in every case, and other processing such as image recognition may be performed instead, based on the characteristics of the source image obtained at S<b>1</b>.</p>
<p id="p-0161" num="0167"><figref idref="DRAWINGS">FIG. 7</figref> is a flowchart showing details of the process S<b>1</b> shown in <figref idref="DRAWINGS">FIG. 6</figref>. This process is performed on the assumption that a source image and a destination image are matched at S<b>2</b>. Thus, a source image is first hierarchized using a critical point filter (S<b>10</b>) so as to obtain a series of source hierarchical images. Then, a destination image is hierarchized in the similar manner (S<b>11</b>) so as to obtain a series of destination hierarchical images. The order of S<b>10</b> and S<b>11</b> in the flow is arbitrary, and the source image and the destination image can be generated in parallel. It may also be possible to process a number of source and destination images as required by subsequent processes.</p>
<p id="p-0162" num="0168"><figref idref="DRAWINGS">FIG. 8</figref> is a flowchart showing details of the process at S<b>10</b> shown in <figref idref="DRAWINGS">FIG. 7</figref>. Suppose that the size of the original source image is 2<sup>n</sup>×2<sup>n</sup>. Since source hierarchical images are sequentially generated from an image with a finer resolution to one with a coarser resolution, the parameter m which indicates the level of resolution to be processed is set to n (S<b>100</b>). Then, critical points are detected from the images p<sup>(m,0)</sup>, p<sup>(m,1)</sup>, p<sup>(m,2) </sup>and p<sup>(m,3) </sup>of the m-th level of resolution, using a critical point filter (S<b>101</b>), so that the images p<sup>(m−1,0)</sup>, p<sup>(m−1,1)</sup>, p<sup>(m−1,2) </sup>and p<sup>(m−1,3) </sup>of the (m−1)th level are generated (S<b>102</b>). Since m=n here, p<sup>(m,0)</sup>=p<sup>(m,1)</sup>=p<sup>(m,2)</sup>=p<sup>(m,3)</sup>=p<sup>(n) </sup>holds and four types of subimages are thus generated from a single source image.</p>
<p id="p-0163" num="0169"><figref idref="DRAWINGS">FIG. 9</figref> shows correspondence between partial images of the m-th and those of (m−1)th levels of resolution. Referring to <figref idref="DRAWINGS">FIG. 9</figref>, respective numberic values shown in the figure represent the intensity of respective pixels. p<sup>(m,s) </sup>symbolizes any one of four images p<sup>(m,0) </sup>through p<sup>(m,3)</sup>, and when generating p<sup>(m−1,0)</sup>, p<sup>(m,0) </sup>is used from p<sup>(m,s)</sup>. For example, as for the block shown in <figref idref="DRAWINGS">FIG. 9</figref>, comprising four pixels with their pixel intensity values indicated inside, images p<sup>(m−1,0)</sup>, p<sup>(m−1,1)</sup>, p<sup>(m−1,2) </sup>and p<sup>(m−1,3) </sup>acquire “3”, “8”, “6” and “10”, respectively, according to the rules described in [1.2]. This block at the m-th level is replaced at the (m−1)th level by respective single pixels thus acquired. Therefore, the size of the subimages at the (m−1)th level is 2<sup>m−1</sup>×2<sup>m−1</sup>.</p>
<p id="p-0164" num="0170">After m is decremented (S<b>103</b> in <figref idref="DRAWINGS">FIG. 8</figref>), it is ensured that m is not negative (S<b>104</b>). Thereafter, the process returns to S<b>101</b>, so that subimages of the next level of resolution, i.e., a next coarser level, are generated. The above process is repeated until subimages at m=0 (0-th level) are generated to complete the process at S<b>10</b>. The size of the subimages at the 0-th level is 1×1.</p>
<p id="p-0165" num="0171"><figref idref="DRAWINGS">FIG. 10</figref> shows source hierarchical images generated at S<b>10</b> in the case of n=3. The initial source image is the only image common to the four series followed. The four types of subimages are generated independently, depending on the type of critical point. Note that the process in <figref idref="DRAWINGS">FIG. 8</figref> is common to S<b>11</b> shown in <figref idref="DRAWINGS">FIG. 7</figref>, and that destination hierarchical images are generated through a similar procedure. Then, the process at S<b>1</b> in <figref idref="DRAWINGS">FIG. 6</figref> is completed.</p>
<p id="p-0166" num="0172">In this premised technology, in order to proceed to S<b>2</b> shown in <figref idref="DRAWINGS">FIG. 6</figref> a matching evaluation is prepared. <figref idref="DRAWINGS">FIG. 11</figref> shows the preparation procedure. Referring to <figref idref="DRAWINGS">FIG. 11</figref>, a plurality of evaluation equations are set (S<b>30</b>). The evaluation equations may include the energy C<sub>ƒ</sub><sup>(m,s) </sup>concerning a pixel value, introduced in [1.3.2.1], and the energy D<sub>ƒ</sub><sup>(m,s) </sup>concerning the smoothness of the mapping introduced in [1.3.2.2]. Next, by combining these evaluation equations, a combined evaluation equation is set (S<b>31</b>). Such a combined evaluation equation may be λC<sub>(i,j)</sub><sup>(m,s)</sup>+D<sub>ƒ</sub><sup>(m,s)</sup>. Using η introduced in [1.3.2.2], we have
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?>ΣΣ(λ<i>C</i><sub>(i,j)</sub><sup>(m,s)</sup><i>+ηE</i><sub>0(i,j)</sub><sup>(m,s)</sup><i>+E</i><sub>1(i,j)</sub><sup>(m,s)</sup>)  (52)<?in-line-formulae description="In-line Formulae" end="tail"?>
<br/>
In the equation (52) the sum is taken for each i and j where i and j run through 0, 1, . . . , 2<sup>m−1</sup>. Now, the preparation for matching evaluation is completed.
</p>
<p id="p-0167" num="0173"><figref idref="DRAWINGS">FIG. 12</figref> is a flowchart showing the details of the process of S<b>2</b> shown in <figref idref="DRAWINGS">FIG. 6</figref>. As described in [1], the source hierarchical images and destination hierarchical images are matched between images having the same level of resolution. In order to detect global correspondence correctly, a matching is calculated in sequence from a coarse level to a fine level of resolution. Since the source and destination hierarchical images are generated using the critical point filter, the location and intensity of critical points are stored clearly even at a coarse level. Thus, the result of the global matching is superior to conventional methods.</p>
<p id="p-0168" num="0174">Referring to <figref idref="DRAWINGS">FIG. 12</figref>, a coefficient parameter η and a level parameter m are set to 0 (S<b>20</b>). Then, a matching is computed between the four subimages at the m-th level of the source hierarchical images and those of the destination hierarchical images at the m-th level, so that four types of submappings f<sup>(m,s) </sup>(s=0, 1, 2, 3) which satisfy the BC and minimize the energy are obtained (S<b>21</b>). The BC is checked by using the inherited quadrilateral described in [1.3.3]. In that case, the submappings at the m-th level are constrained by those at the (m−1)th level, as indicated by the equations (17) and (18). Thus, the matching computed at a coarser level of resolution is used in subsequent calculation of a matching. This is called a vertical reference between different levels. If m=0, there is no coarser level and this exceptional case will be described using <figref idref="DRAWINGS">FIG. 13</figref>.</p>
<p id="p-0169" num="0175">A horizontal reference within the same level is also performed. As indicated by the equation (20) in [1.3.3], f<sup>(m,3)</sup>, f<sup>(m,2) </sup>and f<sup>(m,1) </sup>are respectively determined so as to be analogous to f<sup>(m,2)</sup>, f<sup>(m,1) </sup>and f<sup>(m,0)</sup>. This is because a situation in which the submappings are totally different seems unnatural even though the type of critical points differs so long as the critical points are originally included in the same source and destination images. As can been seen from the equation (20), the closer the submappings are to each other, the smaller the energy becomes, so that the matching is then considered more satisfactory.</p>
<p id="p-0170" num="0176">As for f<sup>(m,0)</sup>, which is to be initially determined, a coarser level by one may be referred to since there is no other submapping at the same level to be referred to as shown in the equation (19). In this premised technology, however, a procedure is adopted such that after the submappings were obtained up to f<sup>(m,3)</sup>, f<sup>(m,0) </sup>is recalculated once utilizing the thus obtained subamppings as a constraint. This procedure is equivalent to a process in which s=4 is substituted into the equation (20) and f<sup>(m,4) </sup>is set to f<sup>(m,0) </sup>anew. The above process is employed to avoid the tendency in which the degree of association between f<sup>(m,0) </sup>and f<sup>(m,3) </sup>becomes too low. This scheme actually produced a preferable result. In addition to this scheme, the submappings are shuffled in the experiment as described in [1.7.1], so as to closely maintain the degrees of association among submappings which are originally determined independently for each type of critical point. Furthermore, in order to prevent the tendency of being dependent on the starting point in the process, the location thereof is changed according to the value of s as described in [1.7].</p>
<p id="p-0171" num="0177"><figref idref="DRAWINGS">FIG. 13</figref> illustrates how the submapping is determined at the 0-th level. Since at the 0-th level each sub-image is constituted by a single pixel, the four submappings f<sup>(0,s) </sup>are automatically chosen as the identity mapping. <figref idref="DRAWINGS">FIG. 14</figref> shows how the submappings are determined at the first level. At the first level, each of the sub-images is constituted of four pixels, which are indicated by solid lines. When a corresponding point (pixel) of the point (pixel) x in p<sup>(1,s) </sup>is searched within q<sup>(1,s)</sup>, the following procedure is adopted:
<ul id="ul0003" list-style="none">
    <li id="ul0003-0001" num="0178">1. An upper left point a, an upper right point b, a lower left point c and a lower right point d with respect to the point x are obtained at the first level of resolution.</li>
    <li id="ul0003-0002" num="0179">2. Pixels to which the points a to d belong at a coarser level by one, i.e., the 0-th level, are searched. In <figref idref="DRAWINGS">FIG. 14</figref>, the points a to d belong to the pixels A to D, respectively. However, the pixels A to C are virtual pixels which do not exist in reality.</li>
    <li id="ul0003-0003" num="0180">3. The corresponding points A′ to D′ of the pixels A to D, which have already been defined at the 0-th level, are plotted in q<sup>(1,s)</sup>. The pixels A′ to C′ are virtual pixels and regarded to be located at the same positions as the pixels A to C.</li>
    <li id="ul0003-0004" num="0181">4. The corresponding point a′ to the point a in the pixel A is regarded as being located inside the pixel A′, and the point a′ is plotted. Then, it is assumed that the position occupied by the point a in the pixel A (in this case, positioned at the lower right) is the same as the position occupied by the point a′ in the pixel A′.</li>
    <li id="ul0003-0005" num="0182">5. The corresponding points b′ to d′ are plotted by using the same method as the above 4 so as to produce an inherited quadrilateral defined by the points a′ to d′.</li>
    <li id="ul0003-0006" num="0183">6. The corresponding point x′ of the point x is searched such that the energy becomes minimum in the inherited quadrilateral. Candidate corresponding points x′ may be limited to the pixels, for instance, whose centers are included in the inherited quadrilateral. In the case shown in <figref idref="DRAWINGS">FIG. 14</figref>, the four pixels all become candidates.</li>
</ul>
</p>
<p id="p-0172" num="0184">The above described is a procedure for determining the corresponding point of a given point x. The same processing is performed on all other points so as to determine the submappings. As the inherited quadrilateral is expected to become deformed at the upper levels (higher than the second level), the pixels A′ to D′ will be positioned apart from one another as shown in <figref idref="DRAWINGS">FIG. 3</figref>.</p>
<p id="p-0173" num="0185">Once the four submappings at the m-th level are determined in this manner, m is incremented (S<b>22</b> in <figref idref="DRAWINGS">FIG. 12</figref>). Then, when it is confirmed that m does not exceed n (S<b>23</b>), return to S<b>21</b>. Thereafter, every time the process returns to S<b>21</b>, submappings at a finer level of resolution are obtained until the process finally returns to S<b>21</b> at which time the mapping f<sup>(n) </sup>at the n-th level is determined. This mapping is denoted as f<sup>(n) </sup>(η=0) because it has been determined relative to η=0.</p>
<p id="p-0174" num="0186">Next, to obtain the mapping with respect to other different η, η is shifted by Δη and m is reset to zero (S<b>24</b>). After confirming that new n does not exceed a predetermined search-stop value η<sub>max </sub>(S<b>25</b>), the process returns to S<b>21</b> and the mapping f<sup>(n) </sup>(η=Δη) relative to the new η is obtained. This process is repeated while obtaining f<sup>(n) </sup>(η=iΔη) (i=0, 1, . . . ) at S<b>21</b>. When η exceeds η<sub>max</sub>, the process proceeds to S<b>26</b> and the optimal η=η<sub>opt </sub>is determined using a method described later, so as to let f<sup>(n) </sup>(η=η<sub>opt</sub>) be the final mapping f<sup>(n)</sup>.</p>
<p id="p-0175" num="0187"><figref idref="DRAWINGS">FIG. 15</figref> is a flowchart showing the details of the process of S<b>21</b> shown in <figref idref="DRAWINGS">FIG. 12</figref>. According to this flowchart, the submappings at the m-th level are determined for a certain predetermined η. In this premised technology, when determining the mappings, the optimal λ is defined independently for each submapping.</p>
<p id="p-0176" num="0188">Referring to <figref idref="DRAWINGS">FIG. 15</figref>, s and λ are first reset to zero (S<b>210</b>). Then, obtained is the submapping f<sup>(m,s) </sup>that minimizes the energy with respect to the then λ (and, implicitly, η) (S<b>211</b>), and the thus obtained submapping is denoted as f<sup>(m,s) </sup>(λ=0). In order to obtain the mapping with respect to other different λ, λ is shifted by αλ. After confirming that the new λ does not exceed a predetermined search-stop value λ<sub>max </sub>(S<b>213</b>), the process returns to S<b>211</b> and the mapping f<sup>(m,s) </sup>(λ=Δλ) relative to the new λ is obtained. This process is repeated while obtaining f<sup>(m,s) </sup>(λ=iΔλ)(i=0, 1, . . . ). When λ exceeds λ<sub>max</sub>, the process proceeds to S<b>214</b> and the optimal λ=λ<sub>opt </sub>is determined, so as to let f<sup>(n) </sup>(λ=λ<sub>opt</sub>) be the final mapping f<sup>(m,s) </sup>(S<b>214</b>).</p>
<p id="p-0177" num="0189">Next, in order to obtain other submappings at the same level, λ is reset to zero and s is incremented (S<b>215</b>). After confirming that s does not exceed 4 (S<b>216</b>), return to S<b>211</b>. When s=4, f<sup>(m,0) </sup>is renewed utilizing f<sup>(m,3) </sup>as described above and a submapping at that level is determined.</p>
<p id="p-0178" num="0190"><figref idref="DRAWINGS">FIG. 16</figref> shows the behavior of the energy C<sub>ƒ</sub><sup>(m,s) </sup>corresponding to f<sup>(m,s) </sup>(λ=iΔλ) (i=0, 1, . . . ) for a certain m and s while varying λ. As described in [1.4], as λ increases, C<sub>ƒ</sub><sup>(m,s) </sup>normally decreases but changes to increase after λ exceeds the optimal value. In this premised technology, λ in which C<sub>ƒ</sub><sup>(m,s) </sup>becomes the minima is defined as λ<sub>opt</sub>. As observed in <figref idref="DRAWINGS">FIG. 16</figref>, even if C<sub>ƒ</sub><sup>(m,s) </sup>begins to decrease again in the range λ&gt;λ<sub>opt</sub>, the mapping will not be as good. For this reason, it suffices to pay attention to the first occurring minima value. In this premised technology, λ<sub>opt </sub>is independently determined for each submapping including f<sup>(n)</sup>.</p>
<p id="p-0179" num="0191"><figref idref="DRAWINGS">FIG. 17</figref> shows the behavior of the energy C<sub>ƒ</sub><sup>(n) </sup>corresponding to f<sup>(n) </sup>(η=iΔη) (i=0, 1, . . . ) while varying η. Here too, C<sub>ƒ</sub><sup>(n) </sup>normally decreases as η increases, but C<sub>ƒ</sub><sup>(n) </sup>changes to increase after η exceeds the optimal value. Thus, η in which C<sub>ƒ</sub><sup>(n) </sup>becomes the minima is defined as η<sub>opt</sub>. <figref idref="DRAWINGS">FIG. 17</figref> can be considered as an enlarged graph around zero along the horizontal axis shown in <figref idref="DRAWINGS">FIG. 4</figref>. Once η<sub>opt </sub>is determined, f<sup>(n) </sup>can be finally determined.</p>
<p id="p-0180" num="0192">As described above, this premised technology provides various merits. First, since there is no need to detect edges, problems in connection with the conventional techniques of the edge detection type are solved. Furthermore, prior knowledge about objects included in an image is not necessitated, thus automatic detection of corresponding points is achieved. Using the critical point filter, it is possible to preserve intensity and locations of critical points even at a coarse level of resolution, thus being extremely advantageous when applied to object recognition, characteristic extraction, and image matching. As a result, it is possible to construct an image processing system which significantly reduces manual labor.</p>
<p id="p-0181" num="0193">Some further extensions to or modifications of the above-described premised technology may be made as follows:
<ul id="ul0004" list-style="none">
    <li id="ul0004-0001" num="0194">(1) Parameters are automatically determined when the matching is computed between the source and destination hierarchical images in the premised technology. This method can be applied not only to the calculation of the matching between the hierarchical images but also to computing the matching between two images in general.</li>
</ul>
</p>
<p id="p-0182" num="0195">For instance, an energy E<sub>0 </sub>relative to a difference in the intensity of pixels and an energy E<sub>1 </sub>relative to a positional displacement of pixels between two images may be used as evaluation equations, and a linear sum of these equations, i.e., E<sub>tot</sub>=αE<sub>0</sub>+E<sub>1</sub>, may be used as a combined evaluation equation. While paying attention to the neighborhood of the extrema in this combined evaluation equation, α is automatically determined. Namely, mappings which minimize E<sub>tot </sub>are obtained for various α's. Among such mappings, α at which E<sub>tot </sub>takes the minimum value is defined as an optimal parameter. The mapping corresponding to this parameter is finally regarded as the optimal mapping between the two images.</p>
<p id="p-0183" num="0196">Many other methods are available in the course of setting up evaluation equations. For instance, a term which becomes larger as the evaluation result becomes more favorable, such as 1/E<sub>1 </sub>and 1/E<sub>2</sub>, may be employed. A combined evaluation equation is not necessarily a linear sum, but an n-powered sum (n=2, ½, −1, −2, etc.), a polynomial or an arbitrary function may be employed when appropriate.</p>
<p id="p-0184" num="0197">The system may employ a single parameter such as the above α, two parameters such as η and λ as in the premised technology, or more than two parameters. When there are more than three parameters used, they may be determined while changing one at a time.
<ul id="ul0005" list-style="none">
    <li id="ul0005-0001" num="0198">(2) In the premised technology, a parameter is determined in a two-step process. That is, in such a manner that a point at which C<sub>ƒ</sub><sup>(m,s) </sup>takes the minima is detected after a mapping such that the value of the combined evaluation equation becomes minimum is determined. However, instead of this two-step processing, a parameter may be effectively determined, as the case may be, in a manner such that the minimum value of a combined evaluation equation becomes minimum. In this case, αE<sub>0</sub>+βE<sub>1</sub>, for example, may be used as the combined evaluation equation, where α+β=1 may be imposed as a constraint so as to equally treat each evaluation equation. The automatic determination of a parameter is effective when determining the parameter such that the energy becomes minimum.</li>
    <li id="ul0005-0002" num="0199">(3) In the premised technology, four types of submappings related to four types of critical points are generated at each level of resolution. However, one, two, or three types among the four types may be selectively used. For instance, if there exists only one bright point in an image, generation of hierarchical images based solely on f<sup>(m,3) </sup>related to a maxima point can be effective to a certain degree. In this case, no other submapping is necessary at the same level, thus the amount of computation relative on s is effectively reduced.</li>
    <li id="ul0005-0003" num="0200">(4) In the premised technology, as the level of resolution of an image advances by one through a critical point filter, the number of pixels becomes ¼. However, it is possible to suppose that one block consists of 3×3 pixels and critical points are searched in this 3×3 block, then the number of pixels will be 1/9 as the level advances by one.</li>
    <li id="ul0005-0004" num="0201">(5) In the premised technology, if the source and the destination images are color images, they would generally first be converted to monochrome images, and the mappings then computed. The source color images may then be transformed by using the mappings thus obtained. However, as an alternate method, the submappings may be computed regarding each RGB component.
<br/>
Preferred Embodiments for Image Interpolation
</li>
</ul>
</p>
<p id="p-0185" num="0202">Image interpolation techniques based on the above-described premised technology will now be described. Firstly, a mesh is introduced to provide more efficient compression of a corresponding point file between two images, and thereafter an image interpolation apparatus will be described with reference to <figref idref="DRAWINGS">FIG. 23</figref>.</p>
<p id="p-0186" num="0203"><figref idref="DRAWINGS">FIG. 18</figref> shows a first image I<b>1</b> and a second image I<b>2</b>, which serve as key frames, where certain pixels p<sub>1</sub>(x<sub>1</sub>, y<sub>1</sub>) and p<sub>2</sub>(x<sub>2</sub>, Y<sub>2</sub>) correspond therebetween. The correspondence between these pixels is obtained using the premised technology described above.</p>
<p id="p-0187" num="0204">Referring to <figref idref="DRAWINGS">FIG. 19</figref>, when a mesh is provided on the first image I<b>1</b>, a corresponding mesh can be formed on the second image I<b>2</b>. Now, a polygon R<b>1</b> on the first image I<b>1</b> is determined by four lattice points A, B, C and D. This polygon R<b>1</b> is called a “source polygon.” As has been shown in <figref idref="DRAWINGS">FIG. 18</figref>, these lattice points A, B, C and D have respectively corresponding points A′, B′, C′ and D′ on the second image I<b>2</b>, and a polygon R<b>2</b> formed by the corresponding points is called a “destination polygon.” In this embodiment, the source polygon is generally a rectangle while the destination polygon is generally a quadrilateral. In any event, according to the present embodiment, the correspondence relation between the first and second images is not described pixel by pixel, instead, the corresponding pixels are described with respect to the lattice points of the source polygon. Such a description is made available in a corresponding point file. By directing attention to the lattice points, storage capacity (data volume) for the corresponding point file can be reduced significantly.</p>
<p id="p-0188" num="0205">The corresponding point file is utilized for generating an intermediate image between the first image I<b>1</b> and the second image I<b>2</b>. As described in the premised technology section above, intermediate images at arbitrary temporal position can be generated by interpolating positions between the corresponding points. Thus, storing the first image I<b>1</b>, the second image I<b>2</b> and the corresponding point file allows morphing between two images and the generation of smooth motion pictures between two images, thus providing a compression effect for motion pictures.</p>
<p id="p-0189" num="0206"><figref idref="DRAWINGS">FIG. 20</figref> shows a method for computing the correspondence relation between points other than the lattice points, from the corresponding point file. Since the corresponding point file includes information on the lattice points only, data corresponding to interior points of the polygon need to be computed separately. <figref idref="DRAWINGS">FIG. 20</figref> shows a correspondence between a triangle ABC which corresponds to a lower half of the source polygon R<b>1</b> shown in <figref idref="DRAWINGS">FIG. 19</figref> and a triangle A′B′C′ which corresponds to that of the destination polygon R<b>2</b> shown in <figref idref="DRAWINGS">FIG. 19</figref>. Now, suppose that an interior point Q, of the triangle ABC, interior-divides the line segment AC in the ratio t:(1−t) and the point Q interior-divides a line segment connecting such the interior-divided point and a point B in the ratio s:(1−s). Thus, it may be thought of as in a manner that a corresponding point Q′, which corresponds to the point Q, in a triangle A′B′C′ in a destination polygon side interior-divides a line segment A′C′, in the ratio t:(1−t) and the point Q′ interior-divides a line segment connecting such the interior-divided point and a point B′ corresponding to B in the ratio s:(1−s). In this case, it is preferable that the source polygon is divided into triangles, and interior points of the destination polygon are determined in the forms of interior-division of vectors concerning the triangle. When expressed in a vector skew field, the above becomes
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>BQ</i>=(1<i>−s</i>){(1<i>−t</i>)<i>BA+tBC},</i><?in-line-formulae description="In-line Formulae" end="tail"?>
<br/>
thus, we have
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>B′Q</i>′=(1<i>−s</i>){(1<i>−t</i>)<i>B′A′+tB′C′}</i><?in-line-formulae description="In-line Formulae" end="tail"?>
</p>
<p id="p-0190" num="0207">Of course, a similar process will be performed on a triangle ACD which corresponds to an upper half of the source polygon R<b>1</b> shown and a triangle A′C′D′ which corresponds to that of the destination polygon R<b>2</b>.</p>
<p id="p-0191" num="0208"><figref idref="DRAWINGS">FIG. 21</figref> shows the above-described processing procedure. Firstly, the matching results on the lattice points taken on the first image I<b>1</b> are acquired (S<b>10</b>) as shown in <figref idref="DRAWINGS">FIG. 19</figref>. Then, it is preferable that the pixel-by-pixel matching according to the premised technology is performed, so that a portion corresponding to the lattice points is extracted from those results. It is to be noted that the matching results on the lattice points may also be specified based on other matching techniques such as optical flow and block matching, instead of using the premised technology.</p>
<p id="p-0192" num="0209">Thereafter, destination polygons are defined on the second image I<b>2</b> (S<b>12</b>), as shown in the right side of <figref idref="DRAWINGS">FIG. 19</figref>. The corresponding point file is then output to memory, data storage or the like (S<b>14</b>). Preferably, the corresponding point file may also include data by which to identify the first image I<b>1</b> with which it is related. Notably, in this embodiment, instead of two images, only one of the images is associated with the corresponding point data. The first image I<b>1</b> and corresponding point file can be stored on an arbitrary recording device or medium, or may be transmitted directly via a network or broadcast or the like.</p>
<p id="p-0193" num="0210"><figref idref="DRAWINGS">FIG. 22</figref> shows a procedure to generate intermediate images by using the corresponding point file. Firstly, the first image I<b>1</b> only is read in (S<b>20</b>), and then the corresponding point file is read in (S<b>22</b>). Thereafter, the correspondence relation between points in source polygons and those of destination polygons is computed using a method such as that described with regard to <figref idref="DRAWINGS">FIG. 20</figref> (S<b>24</b>). At this time, the correspondence relation for all pixels within the images can be acquired. As described in the premised technology, the coordinates and brightness or colors of points corresponding to each other are interior-divided in the ratio u:(1−u), so that an intermediate image in a position which interior-divides temporally in the ratio u:(1−u) between the first image I<b>1</b> and the second image I<b>2</b> can be generated (S<b>26</b>). However, different from the premised technology, in this embodiment, the colors are not interpolated, and the color of each pixel of the first image I<b>1</b> is simply used as such without any alteration thereto. It is to be noted that not only interpolation but also extrapolation may be performed.</p>
<p id="p-0194" num="0211"><figref idref="DRAWINGS">FIG. 23</figref> shows an embodiment of an image interpolation apparatus <b>10</b> which may perform the above-described processes or methods. The apparatus <b>10</b> includes: an image input unit <b>12</b> which acquires the first image I<b>1</b> and second image I<b>2</b> from an external storage, a photographing camera, a network or some other source as is known in the art; a matching processor <b>14</b> which performs a matching computation on these images using the premised technology or other technique, a corresponding point file storage <b>16</b> which stores the corresponding point file F generated by the matching processor <b>14</b>, an intermediate image generator <b>18</b> which generates one or more intermediate images from the first image I<b>1</b> and the corresponding point file F, and a display unit <b>20</b> which displays the first image I<b>1</b> and intermediate images as an original motion picture by adjusting the number and timing of intermediate images. It is to be noted that the display unit <b>20</b> may also display the second image I<b>2</b> at the end of the display of the interpolated images. Moreover, a communication unit <b>22</b> may also send out the first image I<b>1</b> and the corresponding point file F to a transmission infrastructure such as a network or broadcast or the like according to an external request. In this case as well, the second image I<b>2</b> may also be sent out. As shown in <figref idref="DRAWINGS">FIG. 23</figref>, mesh data, such as the size of the mesh, the positions of the lattice points and so forth, may also be input in the matching processor <b>14</b> either as fixed values or interactively.</p>
<p id="p-0195" num="0212">By implementing the above-described structure, the first image I<b>1</b> and the second image I<b>2</b> which were input in the image input unit <b>12</b> are sent to the matching processor <b>14</b>. The matching processor <b>14</b> performs a pixel-by-pixel matching computation in between images. Namely, both the images are referred to at the matching stage. The matching processor <b>14</b> generates the corresponding point file F based on the mesh data, and the thus generated file F is output to the corresponding point file storage <b>16</b>.</p>
<p id="p-0196" num="0213">The intermediate image generator <b>18</b> reads out the corresponding point file F upon request from a user or due to other factors, and generates an intermediate image or images. At this interpolation stage, the color data on one of the two images I<b>1</b> and I<b>2</b> are utilized. This intermediate image is sent to the display unit <b>20</b>, where the time adjustment of image output is performed, so that motion pictures or morphing images are displayed. As evident from this operation, the intermediate image generator <b>18</b> and the display unit <b>20</b> may be provided in a remote terminal (not shown) which is separated from the apparatus <b>10</b>, for example, a remote terminal connected to a network which is also connected to communication <b>22</b> as described below. In this case, the terminal can receive relatively light data (low data volume) comprised of the first image I<b>1</b> and the corresponding point file F and can independently reproduce motion pictures.</p>
<p id="p-0197" num="0214">The communication unit <b>22</b> is structured and provided on the assumption that there is provided a remote terminal as described above. The communication unit <b>22</b> sends out the first image I<b>1</b> and the corresponding point file F via a network or broadcast or the like, so that motion pictures can be displayed at the remote terminal side. Of course, the remote terminal may also be provided for the purpose of storage instead of display.</p>
<p id="p-0198" num="0215">An experiment was carried out according to the processing of the present embodiments. For example, when using images of 256×256 pixels or a similar size for the first image and second image, a satisfactory morphing or motion picture compression effect was obtained by setting the lattice points at intervals of 10 to some tens of pixels in the vertical and horizontal directions. In these cases, the size of the corresponding point file was generally under approximately 10 kilobytes, and it was confirmed that high image quality with a small data amount could be achieved.</p>
<p id="p-0199" num="0216">Moreover, since intermediate images leading to the second image I<b>2</b> can be generated using only the first image I<b>1</b> and the corresponding point file F, the present embodiments are advantageous in terms of data streamlining. This is in contrast to a case where it is necessary to wait for the second image I<b>2</b>, in which further processing to go back to the previous intermediate image after the second image I<b>2</b> has been acquired may be needed.</p>
<p id="p-0200" num="0217">In the present embodiments, the first image I<b>1</b> only is used when interpolating color. More specifically, as each pixel of the first image I<b>1</b> is interpolated toward the corresponding pixel on the second image I<b>2</b>, the color data are not interpolated between the corresponding pixels, but simply the color of the first image I<b>1</b> is used. However, as alternatives, the pixel color on the second image I<b>2</b> may be used, or the pixel on the first image I<b>1</b> and the pixel on the second image I<b>2</b> may be adopted alternately pixel by pixel or block by block and those colors may be utilized alternately. In this case, the first image I<b>1</b> and the second image I<b>2</b> are blended from the outset, so that an intermediate-like image of both images can be smoothly generated.</p>
<p id="p-0201" num="0218">Moreover, although the present embodiments have been described in a way that is advantageous for terminals such as portable phones and the like, the present invention can be applied to arbitrary image related equipment in general.</p>
<p id="p-0202" num="0219">Although the present invention has been described by way of exemplary embodiments, it should be understood that many changes and substitutions may be made by those skilled in the art without departing from the spirit and the scope of the present invention which is defined by the appended claims.</p>
<?DETDESC description="Detailed Description" end="tail"?>
</description>
<us-math idrefs="MATH-US-00001" nb-file="US07298929-20071120-M00001.NB">
<img id="EMI-M00001" he="5.67mm" wi="76.20mm" file="US07298929-20071120-M00001.TIF" alt="embedded image " img-content="math" img-format="tif"/>
</us-math>
<us-math idrefs="MATH-US-00002" nb-file="US07298929-20071120-M00002.NB">
<img id="EMI-M00002" he="9.57mm" wi="76.20mm" file="US07298929-20071120-M00002.TIF" alt="embedded image " img-content="math" img-format="tif"/>
</us-math>
<us-math idrefs="MATH-US-00003" nb-file="US07298929-20071120-M00003.NB">
<img id="EMI-M00003" he="27.86mm" wi="76.20mm" file="US07298929-20071120-M00003.TIF" alt="embedded image " img-content="math" img-format="tif"/>
</us-math>
<us-math idrefs="MATH-US-00004" nb-file="US07298929-20071120-M00004.NB">
<img id="EMI-M00004" he="9.57mm" wi="76.20mm" file="US07298929-20071120-M00004.TIF" alt="embedded image " img-content="math" img-format="tif"/>
</us-math>
<us-math idrefs="MATH-US-00005" nb-file="US07298929-20071120-M00005.NB">
<img id="EMI-M00005" he="6.01mm" wi="76.20mm" file="US07298929-20071120-M00005.TIF" alt="embedded image " img-content="math" img-format="tif"/>
</us-math>
<us-math idrefs="MATH-US-00006" nb-file="US07298929-20071120-M00006.NB">
<img id="EMI-M00006" he="6.35mm" wi="76.20mm" file="US07298929-20071120-M00006.TIF" alt="embedded image " img-content="math" img-format="tif"/>
</us-math>
<us-math idrefs="MATH-US-00007" nb-file="US07298929-20071120-M00007.NB">
<img id="EMI-M00007" he="6.35mm" wi="76.20mm" file="US07298929-20071120-M00007.TIF" alt="embedded image " img-content="math" img-format="tif"/>
</us-math>
<us-math idrefs="MATH-US-00008" nb-file="US07298929-20071120-M00008.NB">
<img id="EMI-M00008" he="39.54mm" wi="76.20mm" file="US07298929-20071120-M00008.TIF" alt="embedded image " img-content="math" img-format="tif"/>
</us-math>
<us-math idrefs="MATH-US-00009" nb-file="US07298929-20071120-M00009.NB">
<img id="EMI-M00009" he="6.35mm" wi="76.20mm" file="US07298929-20071120-M00009.TIF" alt="embedded image " img-content="math" img-format="tif"/>
</us-math>
<us-math idrefs="MATH-US-00010" nb-file="US07298929-20071120-M00010.NB">
<img id="EMI-M00010" he="6.35mm" wi="76.20mm" file="US07298929-20071120-M00010.TIF" alt="embedded image " img-content="math" img-format="tif"/>
</us-math>
<us-math idrefs="MATH-US-00011" nb-file="US07298929-20071120-M00011.NB">
<img id="EMI-M00011" he="7.45mm" wi="76.20mm" file="US07298929-20071120-M00011.TIF" alt="embedded image " img-content="math" img-format="tif"/>
</us-math>
<us-math idrefs="MATH-US-00012" nb-file="US07298929-20071120-M00012.NB">
<img id="EMI-M00012" he="6.35mm" wi="76.20mm" file="US07298929-20071120-M00012.TIF" alt="embedded image " img-content="math" img-format="tif"/>
</us-math>
<us-math idrefs="MATH-US-00013" nb-file="US07298929-20071120-M00013.NB">
<img id="EMI-M00013" he="7.45mm" wi="76.20mm" file="US07298929-20071120-M00013.TIF" alt="embedded image " img-content="math" img-format="tif"/>
</us-math>
<us-math idrefs="MATH-US-00014" nb-file="US07298929-20071120-M00014.NB">
<img id="EMI-M00014" he="6.69mm" wi="76.20mm" file="US07298929-20071120-M00014.TIF" alt="embedded image " img-content="math" img-format="tif"/>
</us-math>
<us-math idrefs="MATH-US-00015" nb-file="US07298929-20071120-M00015.NB">
<img id="EMI-M00015" he="6.35mm" wi="76.20mm" file="US07298929-20071120-M00015.TIF" alt="embedded image " img-content="math" img-format="tif"/>
</us-math>
<us-math idrefs="MATH-US-00016" nb-file="US07298929-20071120-M00016.NB">
<img id="EMI-M00016" he="19.05mm" wi="76.20mm" file="US07298929-20071120-M00016.TIF" alt="embedded image " img-content="math" img-format="tif"/>
</us-math>
<us-math idrefs="MATH-US-00017" nb-file="US07298929-20071120-M00017.NB">
<img id="EMI-M00017" he="14.82mm" wi="76.20mm" file="US07298929-20071120-M00017.TIF" alt="embedded image " img-content="math" img-format="tif"/>
</us-math>
<us-math idrefs="MATH-US-00018" nb-file="US07298929-20071120-M00018.NB">
<img id="EMI-M00018" he="14.82mm" wi="76.20mm" file="US07298929-20071120-M00018.TIF" alt="embedded image " img-content="math" img-format="tif"/>
</us-math>
<us-math idrefs="MATH-US-00019" nb-file="US07298929-20071120-M00019.NB">
<img id="EMI-M00019" he="14.82mm" wi="76.20mm" file="US07298929-20071120-M00019.TIF" alt="embedded image " img-content="math" img-format="tif"/>
</us-math>
<us-math idrefs="MATH-US-00020" nb-file="US07298929-20071120-M00020.NB">
<img id="EMI-M00020" he="14.48mm" wi="76.20mm" file="US07298929-20071120-M00020.TIF" alt="embedded image " img-content="math" img-format="tif"/>
</us-math>
<us-math idrefs="MATH-US-00021" nb-file="US07298929-20071120-M00021.NB">
<img id="EMI-M00021" he="19.73mm" wi="76.20mm" file="US07298929-20071120-M00021.TIF" alt="embedded image " img-content="math" img-format="tif"/>
</us-math>
<us-math idrefs="MATH-US-00022" nb-file="US07298929-20071120-M00022.NB">
<img id="EMI-M00022" he="39.88mm" wi="76.20mm" file="US07298929-20071120-M00022.TIF" alt="embedded image " img-content="math" img-format="tif"/>
</us-math>
<us-math idrefs="MATH-US-00023" nb-file="US07298929-20071120-M00023.NB">
<img id="EMI-M00023" he="22.61mm" wi="76.20mm" file="US07298929-20071120-M00023.TIF" alt="embedded image " img-content="math" img-format="tif"/>
</us-math>
<us-claim-statement>What is claimed is:</us-claim-statement>
<claims id="claims">
<claim id="CLM-00001" num="00001">
<claim-text>1. An image interpolation method comprising:
<claim-text>acquiring a first image and a matching result between the first image and a second image, wherein the matching result is based on matching of positions and colors of points in each of the first image and second image; and</claim-text>
<claim-text>generating an intermediate image related to the first image and the second image by performing interpolation on the first image based on the matching result, wherein, in said generating, a position of a point on the first image and that of a point on the second image are effected in an interpolation computation and an original color of points from only one of the first image and second image is used in an interpolation result such that interpolation computation as to color is skipped.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00002" num="00002">
<claim-text>2. An image interpolation method according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein points of the two images are selected alternately, so that a color thereof is used alternatively.</claim-text>
</claim>
<claim id="CLM-00003" num="00003">
<claim-text>3. An image interpolation apparatus comprising:
<claim-text>a communication unit which acquires digital data which comprises a first image and a matching result between the first image and a second image, wherein the matching result is based on position data and color data for points within each of the first image and the second image; and</claim-text>
<claim-text>an intermediate image generator which generates an intermediate image related to the first image and the second image by performing interpolation on the first image based on the matching result, wherein, in the intermediate image generator, position data for points on the first image are interpolated using the matching result while color data for points on the first image are not interpolated based on the matching result.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00004" num="00004">
<claim-text>4. An image interpolation apparatus according to <claim-ref idref="CLM-00003">claim 3</claim-ref>, further comprising a display unit that displays at least the intermediate image.</claim-text>
</claim>
<claim id="CLM-00005" num="00005">
<claim-text>5. An image interpolation apparatus according to <claim-ref idref="CLM-00003">claim 3</claim-ref>, wherein said intermediate image generator uses the original color of points of the first image and points of the second image in a substantially averaged manner as an interpolation result.</claim-text>
</claim>
<claim id="CLM-00006" num="00006">
<claim-text>6. An image interpolation apparatus according to <claim-ref idref="CLM-00005">claim 5</claim-ref>, wherein said points are pixels and the original color of a pixel of the first image and a pixel of the second image are selected alternately.</claim-text>
</claim>
<claim id="CLM-00007" num="00007">
<claim-text>7. A computer readable medium comprising computer executable instructions, which when executed by a computer cause the computer to:
<claim-text>acquiring a first image and a matching result between the first image and a second image, wherein the matching result is based on matching of positions and colors of points in each of the first image and second image; and</claim-text>
<claim-text>generating an intermediate image related to the first image and the second image by performing interpolation on the first image based on the matching result, wherein, in said generating, a position of a point on the first image and that of a point on the second image are effected in an interpolation computation and an original color of points from only one of the first image and second image is used in an interpolation result such that interpolation computation as to color is skipped.</claim-text>
</claim-text>
</claim>
</claims>
</us-patent-grant>
