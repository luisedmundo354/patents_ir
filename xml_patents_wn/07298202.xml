<us-patent-grant lang="EN" dtd-version="v4.2 2006-08-23" file="US07298202-20071120.XML" status="PRODUCTION" id="us-patent-grant" country="US" date-produced="20071106" date-publ="20071120">
<us-bibliographic-data-grant>
<publication-reference>
<document-id>
<country>US</country>
<doc-number>07298202</doc-number>
<kind>B2</kind>
<date>20071120</date>
</document-id>
</publication-reference>
<application-reference appl-type="utility">
<document-id>
<country>US</country>
<doc-number>11359479</doc-number>
<date>20060223</date>
</document-id>
</application-reference>
<us-application-series-code>11</us-application-series-code>
<priority-claims>
<priority-claim sequence="01" kind="national">
<country>JP</country>
<doc-number>2005-148370</doc-number>
<date>20050520</date>
</priority-claim>
</priority-claims>
<us-term-of-grant>
<us-term-extension>80</us-term-extension>
</us-term-of-grant>
<classifications-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>H</section>
<class>04</class>
<subclass>L</subclass>
<main-group>27</main-group>
<subgroup>14</subgroup>
<symbol-position>F</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20071120</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>H</section>
<class>03</class>
<subclass>D</subclass>
<main-group>3</main-group>
<subgroup>00</subgroup>
<symbol-position>L</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20071120</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
</classifications-ipcr>
<classification-national>
<country>US</country>
<main-classification>329300</main-classification>
<further-classification>329303</further-classification>
<further-classification>375334</further-classification>
</classification-national>
<invention-title id="d0e71">FSK demodulator</invention-title>
<references-cited>
<citation>
<patcit num="00001">
<document-id>
<country>US</country>
<doc-number>4388595</doc-number>
<kind>A</kind>
<name>Brooks</name>
<date>19830600</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>329336</main-classification></classification-national>
</citation>
<citation>
<patcit num="00002">
<document-id>
<country>US</country>
<doc-number>4472816</doc-number>
<kind>A</kind>
<name>Thompson</name>
<date>19840900</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>375324</main-classification></classification-national>
</citation>
<citation>
<patcit num="00003">
<document-id>
<country>US</country>
<doc-number>4716376</doc-number>
<kind>A</kind>
<name>Daudelin</name>
<date>19871200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>329300</main-classification></classification-national>
</citation>
<citation>
<patcit num="00004">
<document-id>
<country>US</country>
<doc-number>5781588</doc-number>
<kind>A</kind>
<name>Abe et al.</name>
<date>19980700</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>375334</main-classification></classification-national>
</citation>
<citation>
<patcit num="00005">
<document-id>
<country>JP</country>
<doc-number>6-54004</doc-number>
<date>19940200</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00006">
<document-id>
<country>JP</country>
<doc-number>7-231338</doc-number>
<date>19950800</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00007">
<document-id>
<country>JP</country>
<doc-number>11-298541</doc-number>
<date>19991000</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00008">
<document-id>
<country>JP</country>
<doc-number>2001-358786</doc-number>
<date>20011200</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
</references-cited>
<number-of-claims>8</number-of-claims>
<us-exemplary-claim>1</us-exemplary-claim>
<us-field-of-classification-search>
<classification-national>
<country>US</country>
<main-classification>329300</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>329303</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>375334</main-classification>
</classification-national>
</us-field-of-classification-search>
<figures>
<number-of-drawing-sheets>6</number-of-drawing-sheets>
<number-of-figures>8</number-of-figures>
</figures>
<us-related-documents>
<related-publication>
<document-id>
<country>US</country>
<doc-number>20060261883</doc-number>
<kind>A1</kind>
<date>20061123</date>
</document-id>
</related-publication>
</us-related-documents>
<parties>
<applicants>
<applicant sequence="001" app-type="applicant-inventor" designation="us-only">
<addressbook>
<last-name>Mizuno</last-name>
<first-name>Koutaro</first-name>
<address>
<city>Tokyo</city>
<country>JP</country>
</address>
</addressbook>
<nationality>
<country>JP</country>
</nationality>
<residence>
<country>JP</country>
</residence>
</applicant>
</applicants>
<agents>
<agent sequence="01" rep-type="attorney">
<addressbook>
<orgname>Nixon Peabody LLP</orgname>
<address>
<country>unknown</country>
</address>
</addressbook>
</agent>
<agent sequence="02" rep-type="attorney">
<addressbook>
<last-name>Studebaker</last-name>
<first-name>Donald</first-name>
<address>
<country>unknown</country>
</address>
</addressbook>
</agent>
</agents>
</parties>
<assignees>
<assignee>
<addressbook>
<orgname>Oki Electric Industry Co., Ltd.</orgname>
<role>03</role>
<address>
<city>Tokyo</city>
<country>JP</country>
</address>
</addressbook>
</assignee>
</assignees>
<examiners>
<primary-examiner>
<last-name>Chang</last-name>
<first-name>Joseph</first-name>
<department>2817</department>
</primary-examiner>
</examiners>
</us-bibliographic-data-grant>
<abstract id="abstract">
<p id="p-0001" num="0000">An FSK demodulator which outputs an enable signal in response to the detection of a data change point in a detected signal of an amplitude associated with the received frequency of an input FSK signal, outputs an average signal of the detected signal for each predetermined time period, acquires the average signal in response to the enable signal to output as an offset signal an average value of M average signals, and subtracts the offset signal from the detected signal to output the resulting signal.</p>
</abstract>
<drawings id="DRAWINGS">
<figure id="Fig-EMI-D00000" num="00000">
<img id="EMI-D00000" he="172.38mm" wi="266.02mm" file="US07298202-20071120-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00001" num="00001">
<img id="EMI-D00001" he="267.21mm" wi="180.51mm" orientation="landscape" file="US07298202-20071120-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00002" num="00002">
<img id="EMI-D00002" he="259.25mm" wi="186.10mm" file="US07298202-20071120-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00003" num="00003">
<img id="EMI-D00003" he="225.21mm" wi="176.95mm" file="US07298202-20071120-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00004" num="00004">
<img id="EMI-D00004" he="168.83mm" wi="159.94mm" file="US07298202-20071120-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00005" num="00005">
<img id="EMI-D00005" he="243.08mm" wi="158.75mm" file="US07298202-20071120-D00005.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00006" num="00006">
<img id="EMI-D00006" he="270.26mm" wi="180.51mm" orientation="landscape" file="US07298202-20071120-D00006.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
</drawings>
<description id="description">
<?BRFSUM description="Brief Summary" end="lead"?>
<heading id="h-0001" level="1">BACKGROUND OF THE INVENTION</heading>
<p id="p-0002" num="0001">1. Field of the Invention</p>
<p id="p-0003" num="0002">The present invention relates to an FSK (Frequency Shift Keying) demodulator for demodulating an FSK signal.</p>
<p id="p-0004" num="0003">2. Description of the Related Background Art</p>
<p id="p-0005" num="0004">A typical frequency shift keying demodulator (hereinafter referred to as an FSK demodulator), which is used in wireless communication receivers, receives an input FSK signal to acquire, as data, a detected signal of an amplitude associated with the received frequency. The FSK demodulator then compares the amplitude of the detected signal with a threshold value to make an evaluation of the data. A data error may occur at the FSK demodulator due to the effect of noise produced when the detected signal is acquired or due to an offset caused by a frequency error at a local oscillator that is included in a transmitter or receiver.</p>
<p id="p-0006" num="0005">To suppress the noise effect produced when a detected signal is acquired, a method is available for performing demodulations without using a signal around the zero cross point that is susceptible to noise (e.g., see Japanese Patent Application Kokai No. Hei 6-54004.)</p>
<p id="p-0007" num="0006">In some methods typically available for removing offsets, a detected signal is introduced into an integrator to acquire the average of amplitude values of the detected signal, which is in turn determined as the quantity of offset.</p>
<p id="p-0008" num="0007">Another method for removing offsets is also disclosed, for example, in Japanese Patent Application Kokai No. Hei 7-231338 in which a sign evaluation point is set past the center of a symbol period. Still another method for removing offsets is disclosed, for example, in Japanese Patent Application Kokai No. 2001-358786 in which upon acquirement of a detected signal, a cycle is determined on the basis of the intersection between the time axis and the sampled value of an FSK signal waveform to compute the frequency from the cycle. A further method for removing offsets is also disclosed in Japanese Patent Application kokai No. Hei 11-298541 in which a sample value of the detected signal at the zero cross point is subtracted from the detected signal.</p>
<p id="p-0009" num="0008">According to the method for determining the average value of a detected signal as the quantity of offset, a system in which “0” and “1” equally appear in data provides a stable average value between “0” and “1.” However, in a system in which “0” and “1” do not equally appear, the output from the integrator, i.e., the quantity of offset may vary depending on the data pattern, thereby causing the offset not to be properly removed.</p>
<heading id="h-0002" level="1">SUMMARY OF THE INVENTION</heading>
<p id="p-0010" num="0009">The present invention was developed in view of the aforementioned problems. It is therefore an object of the present invention to provide an FSK demodulator which can properly remove an offset component even from a data pattern in which “0” and “1” do not equally appear in data.</p>
<p id="p-0011" num="0010">An FSK demodulator according to the present invention comprises: a frequency detection unit which outputs a detected signal of an amplitude associated with a received frequency in response to an input FSK signal; and an offset removal unit which removes an offset component from the detected signal, wherein the offset removal unit includes: a data change point detection unit which outputs an enable signal in response to a detection of a data change point in the detected signal; a first averaging circuit which outputs an average signal of the detected signal for each predetermined time period; an M-time-averaging circuit which acquires the average signal in response to the enable signal, and outputs as an offset signal an average value of M average signals (M is a positive integer); and an offset subtractor circuit which subtracts the offset signal from the detected signal to output a resulting signal as an output signal of the offset removal unit.</p>
<p id="p-0012" num="0011">An FSK demodulator according to the present invention comprises: a frequency detection unit which outputs a detected signal of an amplitude associated with a received frequency in response to an input FSK signal; and an offset removal unit which removes an offset component from the detected signal, wherein the offset removal unit includes: a delay circuit which delays the detected signal by the predetermined time period to output a delayed signal; a delayed signal subtractor circuit which outputs as a differential signal a difference between the detected signal and the delayed signal; a comparator circuit which outputs a data change point detection signal when an absolute value of the differential signal exceeds a pre-set threshold value; and an N-sample delay circuit which delays the data change point detection signal by an N-sample period (N is a positive integer) to output a resulting delayed signal as the enable signal; a two-value averaging circuit which averages the detected signal and the delayed signal to output a resulting average value as the average signal; an M-time-averaging circuit which acquires the average signal in response to the enable signal, and outputs as an offset signal an average value of M average signals (M is a positive integer); and an offset subtractor circuit which subtracts the offset signal from the detected signal to output a resulting signal as an output signal of the offset removal unit.</p>
<p id="p-0013" num="0012">Each of the FSK demodulators according to the present invention detects a data change point at which the detected signal changes from “0” to “1” or from “1” to “0,” thereby determining an offset value. It is thus possible to remove an offset component properly even from a data pattern in which “0” and “1” do not equally appear. Additionally, the offset value is determined based on an average amplitude value during a predetermined time period such as a one-symbol period in which the data change point is contained, thereby making it possible to reduce the effect of variations in amplitude at the data change point.</p>
<?BRFSUM description="Brief Summary" end="tail"?>
<?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?>
<description-of-drawings>
<heading id="h-0003" level="1">BRIEF DESCRIPTION OF THE DRAWINGS</heading>
<p id="p-0014" num="0013"><figref idref="DRAWINGS">FIG. 1</figref> is a block diagram showing an FSK demodulator according to the present invention;</p>
<p id="p-0015" num="0014"><figref idref="DRAWINGS">FIG. 2</figref> is an explanatory signal waveform diagram showing the operation of the FSK demodulator of <figref idref="DRAWINGS">FIG. 1</figref>;</p>
<p id="p-0016" num="0015"><figref idref="DRAWINGS">FIG. 3</figref> is a block diagram showing an exemplary configuration of a comparator circuit within the FSK demodulator of <figref idref="DRAWINGS">FIG. 1</figref>;</p>
<p id="p-0017" num="0016"><figref idref="DRAWINGS">FIG. 4</figref> is an explanatory view showing how to set a threshold value;</p>
<p id="p-0018" num="0017"><figref idref="DRAWINGS">FIG. 5</figref> is an explanatory signal waveform diagram showing the operation of an edge detection circuit within the comparator circuit of <figref idref="DRAWINGS">FIG. 3</figref>;</p>
<p id="p-0019" num="0018"><figref idref="DRAWINGS">FIGS. 6A and 6B</figref> are explanatory signal waveform diagrams showing how to set a delay time in an N-sample delay circuit; and</p>
<p id="p-0020" num="0019"><figref idref="DRAWINGS">FIG. 7</figref> is a block diagram showing another FSK demodulator according to the present invention.</p>
</description-of-drawings>
<?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?>
<?DETDESC description="Detailed Description" end="lead"?>
<heading id="h-0004" level="1">DETAILED DESCRIPTION OF THE INVENTION</heading>
<p id="p-0021" num="0020">Embodiments of the present invention will be described below in more detail with reference to the accompanying drawings.</p>
<p id="p-0022" num="0021"><figref idref="DRAWINGS">FIG. 1</figref> shows the configuration of an FSK demodulator according to the present invention. <figref idref="DRAWINGS">FIG. 2</figref> shows a signal waveform at each portion of the FSK demodulator of <figref idref="DRAWINGS">FIG. 1</figref>. The FSK demodulator <b>10</b> shown in <figref idref="DRAWINGS">FIG. 1</figref> includes a frequency detection unit <b>20</b> and an offset removal unit <b>40</b>, which are connected in series. The frequency detection unit <b>20</b> is supplied with an FSK signal S<b>100</b> and outputs a detected signal S<b>110</b>. The detected signal S<b>110</b> output from the frequency detection unit <b>20</b> is input to the offset removal unit <b>40</b> which removes an offset from the detected signal S<b>110</b> to output a signal S<b>150</b>. The frequency detection unit <b>20</b> outputs the detected signal S<b>110</b> of an amplitude associated with the received frequency in response to the input FSK signal S<b>100</b>, and can be any known suitable circuit that is typically used with FSK demodulators.</p>
<p id="p-0023" num="0022">The offset removal unit <b>40</b> also includes a data change point detection unit <b>50</b>, a one-symbol averaging circuit <b>42</b>, an M-time-averaging circuit <b>44</b>, and an offset subtractor circuit <b>46</b>. The detected signal S<b>110</b> supplied to the offset removal unit <b>40</b> is branched into first, second, and third detected signals S<b>111</b> to S<b>113</b>. The first detected signal S<b>111</b> is input to the data change point detection unit <b>50</b>, the second detected signal S<b>112</b> is input to the one-symbol averaging circuit <b>42</b>, and the third detected signal S<b>113</b> is input to the offset subtractor circuit <b>46</b>.</p>
<p id="p-0024" num="0023">The data change point detection unit <b>50</b> includes a one-symbol delay circuit <b>52</b>, a delayed signal subtractor circuit <b>54</b>, an absolute value circuit <b>56</b>, a comparator circuit <b>60</b>, and an N-sample delay circuit <b>70</b>. The first detected signal S<b>111</b> input to the data change point detection unit <b>50</b> is branched into a first branched signal S<b>121</b> and a second branched signal S<b>122</b>. The first branched signal S<b>121</b> is input to the one-symbol delay circuit <b>52</b>, while the second branched signal S<b>122</b> is input to the delayed signal subtractor circuit <b>54</b>.</p>
<p id="p-0025" num="0024">The detected signal S<b>110</b> is branched into the first to third detected signals S<b>111</b> to S<b>113</b>, and the first detected signal S<b>111</b> is branched into the first and second branched signals S<b>121</b> and S<b>122</b>, as described above. If these signals are voltage signals, all the signals can have the same voltage level.</p>
<p id="p-0026" num="0025">The one-symbol averaging circuit <b>42</b>, the M-time-averaging circuit <b>44</b>, the one-symbol delay circuit <b>52</b>, and the N-sample delay circuit <b>70</b> are provided with a common clock signal S<b>118</b> generated in a clock generation circuit <b>30</b>. The clock signal S<b>118</b> may also be externally input to the FSK demodulator <b>10</b>, in which case the clock generation circuit <b>30</b> may not need to be included in the FSK demodulator <b>10</b>. Although the pattern of the clock signal S<b>118</b> is not explicitly indicated in <figref idref="DRAWINGS">FIG. 2</figref>, the clock signal S<b>118</b> has one clock cycle of t(s).</p>
<p id="p-0027" num="0026">The one-symbol delay circuit <b>52</b> delays the input first branched signal S<b>121</b> by a one-symbol period T(s) to output the resulting signal as a one-symbol delayed signal S<b>124</b>. Here, the one-symbol period T(s) (which corresponds to a predetermined time period) is a fundamental unit period of data, and the detected signal S<b>110</b> contains data “1” or “0” in each one-symbol time period. The one-symbol delay circuit <b>52</b> can be any known suitable circuit. The one-symbol delayed signal S<b>124</b> output from the one-symbol delay circuit <b>52</b> is input to the delayed signal subtractor circuit <b>54</b>.</p>
<p id="p-0028" num="0027">The delayed signal subtractor circuit <b>54</b> outputs, as a differential signal S<b>130</b>, the difference between the second branched signal S<b>122</b> and the one-symbol delayed signal S<b>124</b> which are input thereto respectively. Since the one-symbol delayed signal S<b>124</b> has been delayed by a one-symbol period relative to the first detected signal S<b>111</b>, the differential signal S<b>130</b> indicates the difference in the detected signal between two points separated from each other by a one-symbol period T(s). The differential signal S<b>130</b> is converted into an absolute value, at the absolute value circuit <b>56</b>, to be input to the comparator circuit <b>60</b> as an absolute differential signal S<b>132</b>. The delayed signal subtractor circuit <b>54</b> can be any known suitable differential circuit. The absolute value circuit <b>56</b> can also be any known suitable circuit.</p>
<p id="p-0029" num="0028">The comparator circuit <b>60</b> outputs a pulsed data change point detection signal S<b>134</b> when an absolute value of the differential signal or the absolute differential signal S<b>132</b> has exceeded a pre-set threshold value. Referring now to <figref idref="DRAWINGS">FIG. 3</figref>, an exemplary configuration of the comparator circuit <b>60</b> will be described.</p>
<p id="p-0030" num="0029">The comparator circuit <b>60</b> includes a differential circuit <b>62</b>, a sign extractor circuit <b>64</b>, a first D flip-flop <b>66</b>, a second D flip-flop <b>67</b>, and an AND circuit <b>68</b>. In response to the input absolute differential signal S<b>132</b> and a signal indicative of the threshold value S<b>133</b> (hereinafter also referred to as the threshold signal), the differential circuit <b>62</b> subtracts the threshold signal S<b>133</b> from the absolute differential signal S<b>132</b>. The first D flip-flop <b>66</b> and the second D flip-flop <b>67</b> are supplied with a common clock signal S<b>119</b>. As the clock signal S<b>119</b>, the clock signal S<b>118</b> input to the one-symbol averaging circuit <b>42</b> or the like may be shared. Alternatively, the clock signal S<b>119</b> may be separately generated or acquired externally.</p>
<p id="p-0031" num="0030">Referring now to <figref idref="DRAWINGS">FIG. 4</figref>, a description will be given to how to set a threshold value. <figref idref="DRAWINGS">FIG. 4</figref> is an explanatory view showing how to set a threshold value, in which the detected signal S<b>110</b> is indicated with the horizontal axis representing time and the vertical axis representing the amplitude value. At a point at which the data indicated by the detected signal S<b>110</b> changes from “1” to “0” or from “0” to “1”, the difference in the amplitude of the detected signal S<b>110</b> between two points spaced apart from each other by a one-symbol period T(s) takes on a certain value “A” or greater. On the other hand, when the same data continues, i.e., no change exists in the data, the difference in the amplitude of the detected signal S<b>110</b> between two points spaced apart from each other by a one-symbol period T(s) takes on a certain value “B” or greater. Here, “B” is less than “A.” In this embodiment, the detected signal S<b>110</b> or the absolute differential signal S<b>132</b> is observed on an oscilloscope to set as the threshold value a value between “A” and “B.”</p>
<p id="p-0032" num="0031">The signal resulting from a subtraction at the differential circuit <b>62</b> is input to the sign extractor circuit <b>64</b>, where the sign of the subtracted signal is evaluated. If the sign is positive, i.e., the subtracted signal is greater than the threshold value, the sign extractor circuit <b>64</b> outputs a signal at a high potential level (H). If the subtracted signal is less than or equal to the threshold value, the sign extractor circuit <b>64</b> outputs a signal at a low potential level (L).</p>
<p id="p-0033" num="0032">The first D flip-flop <b>66</b>, the second D flip-flop <b>67</b>, and the AND circuit <b>68</b> constitute an edge detection circuit <b>65</b>. Referring now to <figref idref="DRAWINGS">FIG. 5</figref>, a description will be given of the operation of the edge detection circuit <b>65</b>. <figref idref="DRAWINGS">FIG. 5</figref> is an explanatory time chart showing how the edge detection circuit <b>65</b> operates.</p>
<p id="p-0034" num="0033">It is assumed that an output S<b>161</b> from the sign extractor circuit <b>64</b> has a low initial potential level (see a time point C<b>0</b> in <figref idref="DRAWINGS">FIG. 5</figref>). The first D flip-flop <b>66</b> outputs a first output signal S<b>163</b> at the low level through a Q terminal. The first output signal S<b>163</b> is branched into one signal which is input to the second D flip-flop <b>67</b> and the other signal which is input to the AND circuit <b>68</b>. The second D flip-flop <b>67</b>, to which the one signal branched from the first output signal S<b>163</b> has been input, outputs a second output signal S<b>165</b> at a high level through a QN terminal. Since the first output signal S<b>163</b> is at the low level and the second output signal S<b>165</b> is at the high level, the output from the AND circuit <b>68</b> or the data change point detection signal S<b>134</b> is at the low level.</p>
<p id="p-0035" num="0034">Here, suppose that the output S<b>161</b> from the sign extractor circuit <b>64</b> has changed to the high potential level. In this case, the first output signal S<b>163</b> output from the first D flip-flop <b>66</b> changes to the high level in sync with the rising edge (at a time point C<b>1</b> in <figref idref="DRAWINGS">FIG. 5</figref>) of a pulse of the clock signal S<b>119</b> (hereinafter referred to as the clock pulse). The second output signal S<b>165</b> output from the second D flip-flop <b>67</b> continues to output a signal at the high level until the subsequent clock pulse rises (at a time point C<b>2</b> in <figref idref="DRAWINGS">FIG. 5</figref>). Thus, during the period from the time point C<b>0</b> to the time point C<b>1</b>, both the first output signal S<b>163</b> and the second output signal S<b>165</b> output a signal at the high level, thereby causing the AND circuit <b>68</b> to output a signal at the high level. At the time point C<b>2</b>, the second output signal S<b>165</b> output through the QN terminal of the second D flip-flop <b>67</b> is at the low level, thereby causing the AND circuit <b>68</b> to output a signal at the low level.</p>
<p id="p-0036" num="0035">Thus, the comparator circuit <b>60</b> outputs the pulsed data change point detection signal S<b>134</b> having a width of one clock cycle when the absolute value of the differential signal S<b>130</b> has exceeded the threshold value.</p>
<p id="p-0037" num="0036">The N-sample delay circuit <b>70</b> outputs, as an enable signal S<b>136</b>, a delayed signal obtained by delaying the data change point detection signal S<b>134</b> by a pre-set N-sample period (N is a positive integer). Here, the sample period is a time interval at which the detected signal is sampled. One sample period t(s) corresponds to one clock cycle of the clock signal S<b>118</b> input to the N-sample delay circuit <b>70</b>.</p>
<p id="p-0038" num="0037">A delay time provided by the N-sample delay circuit <b>70</b> is set by observing the detected signal S<b>110</b> and the enable signal S<b>136</b> on an oscilloscope or the like such that the enable signal S<b>136</b> rises at an ideal data change point. A more detailed description will be given later on how to set the delay time.</p>
<p id="p-0039" num="0038">The one-symbol averaging circuit <b>42</b> outputs, as a one-symbol average signal S<b>138</b>, an average amplitude value of the second detected signal S<b>112</b> for each one-symbol period. Assuming that the one-symbol period is T(s) and one sample period is t(s), the one-symbol average signal S<b>138</b> outputs the average value of the second detected signal S<b>112</b> during a one-symbol period T(s) at intervals of the one sample period t(s). Accordingly, the one-symbol averaging circuit <b>42</b> outputs an average value of the detected signal S<b>110</b> from a time point <b>0</b> to a time point T during the time from the time point T to a time point T+t, and an average value of the detected signal S<b>110</b> from the time point t to the time point T+t during the time from the T+t to a time point T+2t. Similarly, during the time from a time point aT+bt to a time point aT+(b+1)t, the one-symbol averaging circuit <b>42</b> outputs an average value of the detected signal S<b>110</b> from a time point (a−1)T+bt to the time point aT+bt. Here, “a” and “b” are an integer.</p>
<p id="p-0040" num="0039">The M-time-averaging circuit <b>44</b>, which is connected to the output portions of the one-symbol averaging circuit <b>42</b> and the N-sample delay circuit <b>70</b> in the data change point detection unit <b>50</b>, acquires the one-symbol average signal S<b>138</b> in response to the reception of the enable signal S<b>136</b> output from the N-sample delay circuit <b>70</b>. The M-time-averaging circuit <b>44</b> outputs, as an offset signal S<b>140</b>, a pre-set M-time average value (M is a positive integer) of the acquired one-symbol average signal S<b>138</b>. The offset signal S<b>140</b> output from the M-time-averaging circuit <b>44</b> is input to the offset subtractor circuit <b>46</b>. Here, M is determined in accordance with the response speed required of the demodulator to remove a frequency offset. The larger the M, the lower the response speed becomes. However, a variation in offset value caused by noise or the like will be reduced and thus stabilized. On the other hand, the smaller the M, the greater the variation in offset value caused by noise or the like becomes. However, the response speed is increased.</p>
<p id="p-0041" num="0040">The value of M also depends on the preamble data pattern. However, for example, when the preamble data pattern has a repetition of “1010,” the value of M is desirably less than or equal to the number of symbols that corresponds to a half of the data pattern. For example, to acquire an offset value within 24 symbols, M may be one third of 24, i.e., 8.</p>
<p id="p-0042" num="0041">Referring now to <figref idref="DRAWINGS">FIGS. 6A and 6B</figref>, a description will be given with reference to how to provide a delay time setting to the N-sample delay circuit <b>70</b>. <figref idref="DRAWINGS">FIG. 6A</figref> shows the second branched signal S<b>122</b> and the data change point detection signal S<b>134</b>, for example, where the enable signal S<b>136</b> rises at a non-ideal time. As illustrated in <figref idref="DRAWINGS">FIG. 6A</figref>, the horizontal axis represents time, while the vertical axis represents the amplitude value for the second detected signal S<b>112</b> and the potential level for the data change point detection signal. Additionally, the data change point detection signal S<b>134</b> is not delayed but used as an enable signal.</p>
<p id="p-0043" num="0042">When the data change point detection signal S<b>134</b> serving as an enable signal is input to the M-time-averaging circuit <b>44</b>, the one-symbol average signal S<b>138</b> then available is acquired by the M-time-averaging circuit <b>44</b>. Assuming that Tr is a point in time at which the second detected signal S<b>112</b> intersects an offset value Vo, the M-time-averaging circuit <b>44</b> is supplied with an average value from a time point Tr−T to the time point Tr, thereby causing the value of the offset signal to be less than the original offset value Vo.</p>
<p id="p-0044" num="0043"><figref idref="DRAWINGS">FIG. 6B</figref> shows the second detected signal S<b>112</b>, the data change point detection signal S<b>134</b>, and the enable signal S<b>136</b>, for example, where the enable signal rises at an ideal time. As illustrated in <figref idref="DRAWINGS">FIG. 6B</figref>, the horizontal axis represents time, while the vertical axis represents the amplitude value for the second detected signal S<b>112</b> and the potential level for the data change point detection signal S<b>134</b> and the enable signal S<b>136</b>. Additionally, the data change point detection signal S<b>134</b> is delayed by N samples. When the enable signal S<b>136</b> delayed by N samples is input to the M-time-averaging circuit <b>44</b> at a time point Tr+T/2, the M-time-averaging circuit <b>44</b> receives, as the one-symbol average signal S<b>138</b>, an average value from a time point Tr−T/2 to the time point Tr+T/2. Accordingly, the value of the offset signal S<b>140</b> becomes equal to the original offset value Vo.</p>
<p id="p-0045" num="0044">The offset subtractor circuit <b>46</b> is supplied with the third detected signal S<b>113</b> and the offset signal S<b>140</b>, while the offset subtractor circuit <b>46</b> subtracts the offset signal S<b>140</b> from the input third detected signal S<b>113</b> to output the resulting signal as the output signal S<b>150</b>.</p>
<p id="p-0046" num="0045">The FSK demodulator shown in <figref idref="DRAWINGS">FIG. 1</figref> detects a data change point at which data (detected signal) changes from “0” to “1” or from “1” to “0” to determine an offset value, thereby making it possible to remove an offset component properly, even from a data pattern in which “0” and “1” do not equally appear in data. Furthermore, the FSK demodulator determines an offset value based on the average amplitude value for a one-symbol time period including a data change point, thereby making it possible to reduce the effect of variations in amplitude at the data change point.</p>
<p id="p-0047" num="0046"><figref idref="DRAWINGS">FIG. 7</figref> also shows the configuration of another FSK demodulator according to the present invention. The FSK demodulator <b>11</b> shown in <figref idref="DRAWINGS">FIG. 7</figref> includes a frequency detection unit <b>20</b> and an offset removal unit <b>40</b>, which are connected in series. The frequency detection unit <b>20</b> is supplied with an FSK signal S<b>100</b>. A detected signal S<b>110</b> output from the frequency detection unit <b>20</b> is input to an offset removal unit <b>41</b> which removes an offset from the detected signal S<b>110</b> to output a signal S<b>151</b>. The frequency detection unit <b>20</b> outputs the detected signal S<b>110</b> of an amplitude associated with the received frequency in response to the input FSK signal S<b>100</b>, and can be any suitable well-known circuit that is used with FSK demodulators.</p>
<p id="p-0048" num="0047">The offset removal unit <b>41</b> also includes a data change point detection unit <b>51</b>, a two-value averaging circuit <b>43</b>, an M-time-averaging circuit <b>44</b>, and an offset subtractor circuit <b>46</b>. The detected signal S<b>110</b> input to the offset removal unit <b>41</b> is branched into first to third detected signals S<b>111</b> to S<b>113</b>. The first detected signal S<b>111</b> is input to the data change point detection unit <b>51</b>, the second detected signal S<b>112</b> is input to the two-value averaging circuit <b>43</b>, and the third detected signal S<b>113</b> is input to the offset subtractor circuit <b>46</b>.</p>
<p id="p-0049" num="0048">Similar to the FSK demodulator of <figref idref="DRAWINGS">FIG. 1</figref>, the data change point detection unit <b>51</b> includes a one-symbol delay circuit <b>52</b>, a delayed signal subtractor circuit <b>54</b>, an absolute value circuit <b>56</b>, a comparator circuit <b>60</b>, and an N-sample delay circuit <b>70</b>. The FSK demodulator of this embodiment is different from the FSK demodulator of <figref idref="DRAWINGS">FIG. 1</figref> in the following points. That is, a one-symbol delayed signal S<b>124</b> output from the one-symbol delay circuit <b>52</b> is branched into a first delayed signal S<b>125</b> and a second delayed signal S<b>126</b>. The first delayed signal S<b>125</b> is input to the delayed signal subtractor circuit <b>54</b>, while the second delayed signal S<b>126</b> is input to the two-value averaging circuit <b>43</b>. The other arrangements are the same as those of the FSK demodulator of <figref idref="DRAWINGS">FIG. 1</figref> and thus will not be discussed here in detail.</p>
<p id="p-0050" num="0049">The two-value averaging circuit <b>43</b> outputs an average value of the second detected signal S<b>112</b> and the second delayed signal S<b>126</b>, as a two-value average signal S<b>139</b>.</p>
<p id="p-0051" num="0050">The M-time-averaging circuit <b>44</b>, which is connected to the output portions of the two-value averaging circuit <b>43</b> and the N-sample delay circuit <b>70</b> in the data change point detection unit <b>51</b>, acquires the two-value average signal S<b>139</b> in response to the reception of an enable signal S<b>136</b> output from the N-sample delay circuit <b>70</b>. The M-time-averaging circuit <b>44</b> outputs, as an offset signal S<b>141</b>, an M-time average value (M is a positive integer) of the acquired two-value average signal S<b>139</b>. The offset signal S<b>141</b> output from the M-time-averaging circuit <b>44</b> is input to the offset subtractor circuit <b>46</b>.</p>
<p id="p-0052" num="0051">The offset subtractor circuit <b>46</b> is supplied with the third detected signal S<b>113</b> and the offset signal S<b>141</b>. The offset subtractor circuit <b>46</b> subtracts the offset signal S<b>141</b> from the input third detected signal S<b>113</b> to output the resulting signal as the output signal S<b>151</b>.</p>
<p id="p-0053" num="0052">The FSK demodulator of <figref idref="DRAWINGS">FIG. 7</figref> detects a data change point at which data changes from “0” to “1” or from “1” to “0”, and then based on the data change point, determines as an offset value the average value of the detected signal at two points spaced apart from each other by a one-symbol period T(s). Accordingly, this makes it possible to remove an offset component properly even from a data pattern in which “0” and “1” do not equally appear in data. It is also possible to reduce variations in amplitude at the data change point.</p>
<p id="p-0054" num="0053">The one-symbol averaging circuit included in the FSK demodulator of <figref idref="DRAWINGS">FIG. 1</figref> requires a shift register that has the number of storage areas that corresponds to the number of samples in a one-symbol period T(s). In contrast to this, the FSK demodulator of <figref idref="DRAWINGS">FIG. 7</figref> employs the two-value averaging circuit <b>43</b> instead of the one-symbol averaging circuit <b>42</b>. The two-value averaging circuit <b>43</b> has to include only a function of outputting the average of two points, thereby making it possible to reduce the circuit scale.</p>
<?DETDESC description="Detailed Description" end="tail"?>
</description>
<us-claim-statement>What is claimed is:</us-claim-statement>
<claims id="claims">
<claim id="CLM-00001" num="00001">
<claim-text>1. An FSK demodulator comprising:
<claim-text>a frequency detection unit which outputs a detected signal of an amplitude associated with a received frequency in response to an input FSK signal; and</claim-text>
<claim-text>an offset removal unit which removes an offset component from the detected signal,</claim-text>
<claim-text>wherein said offset removal unit includes:</claim-text>
<claim-text>a data change point detection unit which outputs an enable signal in response to a detection of a data change point in the detected signal;</claim-text>
<claim-text>a first averaging circuit which outputs an average signal of the detected signal for each predetermined time period;</claim-text>
<claim-text>an M-time-averaging circuit which acquires the average signal in response to the enable signal, and outputs as an offset signal an average value of M average signals (M is a positive integer); and</claim-text>
<claim-text>an offset subtractor circuit which subtracts the offset signal from the detected signal to output a resulting signal as an output signal of said offset removal unit.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00002" num="00002">
<claim-text>2. The FSK demodulator according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein said first averaging circuit outputs, as the average signal, an average amplitude value of the detected signal for each predetermined time period.</claim-text>
</claim>
<claim id="CLM-00003" num="00003">
<claim-text>3. The FSK demodulator according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein said first averaging circuit includes:
<claim-text>predetermined time period to output a delayed signal; and
<claim-text>a two-value averaging circuit which averages the detected signal and the delayed signal to output a resulting average value as the average signal.</claim-text>
</claim-text>
</claim-text>
</claim>
<claim id="CLM-00004" num="00004">
<claim-text>4. The FSK demodulator according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein
<claim-text>said data change point detection unit includes:</claim-text>
<claim-text>a delay circuit which delays the detected signal by the predetermined time period to output a resulting delayed signal;</claim-text>
<claim-text>a delayed signal subtractor circuit which outputs, as a differential signal, a difference between the detected signal and the delayed signal;</claim-text>
<claim-text>a comparator circuit which outputs a data change point detection signal when an absolute value of the differential signal exceeds a pre-set threshold value; and</claim-text>
<claim-text>an N-sample delay circuit which delays the data change point detection signal by an N-sample period (N is a positive integer) to output a resulting delayed signal as the enable signal.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00005" num="00005">
<claim-text>5. The FSK demodulator according to <claim-ref idref="CLM-00004">claim 4</claim-ref>, wherein said comparator circuit includes:
<claim-text>a differential circuit which subtracts the threshold value from the absolute value of the differential signal to output a resulting signal;</claim-text>
<claim-text>a sign extractor circuit which extracts a sign of the output signal of said differential circuit; and</claim-text>
<claim-text>an edge detection circuit which detects a time point when the sign of the output signal of said differential circuit changes from a negative state to a positive state in sync with a clock signal to output the data change point detection signal during one cycle of the clock signal from the time point.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00006" num="00006">
<claim-text>6. The FSK demodulator according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the predetermined time period is a one-symbol time period corresponding to a fundamental unit period of the detected signal.</claim-text>
</claim>
<claim id="CLM-00007" num="00007">
<claim-text>7. An FSK demodulator comprising:
<claim-text>a frequency detection unit which outputs a detected signal of an amplitude associated with a received frequency in response to an input FSK signal; and</claim-text>
<claim-text>an offset removal unit which removes an offset component from the detected signal,</claim-text>
<claim-text>wherein said offset removal unit includes:</claim-text>
<claim-text>a delay circuit which delays the detected signal by the predetermined time period to output a delayed signal;</claim-text>
<claim-text>a delayed signal subtractor circuit which outputs as a differential signal a difference between the detected signal and the delayed signal;</claim-text>
<claim-text>a comparator circuit which outputs a data change point detection signal when an absolute value of the differential signal exceeds a pre-set threshold value; and</claim-text>
<claim-text>an N-sample delay circuit which delays the data change point detection signal by an N-sample period (N is a positive integer) to output a resulting delayed signal as the enable signal;</claim-text>
<claim-text>a two-value averaging circuit which averages the detected signal and the delayed signal to output a resulting average value as the average signal;</claim-text>
<claim-text>an M-time-averaging circuit which acquires the average signal in response to the enable signal, and outputs as an offset signal an average value of M average signals (M is a positive integer); and</claim-text>
<claim-text>an offset subtractor circuit which subtracts the offset signal from the detected signal to output a resulting signal as an output signal of said offset removal unit.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00008" num="00008">
<claim-text>8. The FSK demodulator according to <claim-ref idref="CLM-00007">claim 7</claim-ref>, wherein the predetermined time period is a one-symbol time period corresponding to a fundamental unit period of the detected signal.</claim-text>
</claim>
</claims>
</us-patent-grant>
