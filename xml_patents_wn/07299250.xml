<us-patent-grant lang="EN" dtd-version="v4.2 2006-08-23" file="US07299250-20071120.XML" status="PRODUCTION" id="us-patent-grant" country="US" date-produced="20071106" date-publ="20071120">
<us-bibliographic-data-grant>
<publication-reference>
<document-id>
<country>US</country>
<doc-number>07299250</doc-number>
<kind>B2</kind>
<date>20071120</date>
</document-id>
</publication-reference>
<application-reference appl-type="utility">
<document-id>
<country>US</country>
<doc-number>11275655</doc-number>
<date>20060120</date>
</document-id>
</application-reference>
<us-application-series-code>11</us-application-series-code>
<us-term-of-grant>
<disclaimer>
<text>This patent is subject to a terminal disclaimer.</text>
</disclaimer>
</us-term-of-grant>
<classifications-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>G</section>
<class>06</class>
<subclass>F</subclass>
<main-group>17</main-group>
<subgroup>30</subgroup>
<symbol-position>F</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20071120</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
</classifications-ipcr>
<classification-national>
<country>US</country>
<main-classification>707204</main-classification>
<further-classification>707205</further-classification>
<further-classification>707202</further-classification>
<further-classification>707203</further-classification>
</classification-national>
<invention-title id="d0e51">File availability in distributed file storage systems</invention-title>
<references-cited>
<citation>
<patcit num="00001">
<document-id>
<country>US</country>
<doc-number>5317728</doc-number>
<kind>A</kind>
<name>Tevis et al.</name>
<date>19940500</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00002">
<document-id>
<country>US</country>
<doc-number>5371794</doc-number>
<kind>A</kind>
<name>Diffie et al.</name>
<date>19941200</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00003">
<document-id>
<country>US</country>
<doc-number>5452447</doc-number>
<kind>A</kind>
<name>Nelson et al.</name>
<date>19950900</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00004">
<document-id>
<country>US</country>
<doc-number>5588147</doc-number>
<kind>A</kind>
<name>Neeman et al.</name>
<date>19961200</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00005">
<document-id>
<country>US</country>
<doc-number>5758359</doc-number>
<kind>A</kind>
<name>Saxon</name>
<date>19980500</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00006">
<document-id>
<country>US</country>
<doc-number>5778395</doc-number>
<kind>A</kind>
<name>Whiting et al.</name>
<date>19980700</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00007">
<document-id>
<country>US</country>
<doc-number>5812776</doc-number>
<kind>A</kind>
<name>Gifford</name>
<date>19980900</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00008">
<document-id>
<country>US</country>
<doc-number>5873085</doc-number>
<kind>A</kind>
<name>Enoki et al.</name>
<date>19990200</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00009">
<document-id>
<country>US</country>
<doc-number>5901227</doc-number>
<kind>A</kind>
<name>Perlman</name>
<date>19990500</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00010">
<document-id>
<country>US</country>
<doc-number>5907673</doc-number>
<kind>A</kind>
<name>Hirayama et al.</name>
<date>19990500</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00011">
<document-id>
<country>US</country>
<doc-number>5909540</doc-number>
<kind>A</kind>
<name>Carter et al.</name>
<date>19990600</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00012">
<document-id>
<country>US</country>
<doc-number>5915096</doc-number>
<kind>A</kind>
<name>Rosenzweig et al.</name>
<date>19990600</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00013">
<document-id>
<country>US</country>
<doc-number>5950198</doc-number>
<kind>A</kind>
<name>Falls et al.</name>
<date>19990900</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00014">
<document-id>
<country>US</country>
<doc-number>5991414</doc-number>
<kind>A</kind>
<name>Garay et al.</name>
<date>19991100</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00015">
<document-id>
<country>US</country>
<doc-number>5991771</doc-number>
<kind>A</kind>
<name>Falls et al.</name>
<date>19991100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>707202</main-classification></classification-national>
</citation>
<citation>
<patcit num="00016">
<document-id>
<country>US</country>
<doc-number>6026474</doc-number>
<kind>A</kind>
<name>Carter et al.</name>
<date>20000200</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00017">
<document-id>
<country>US</country>
<doc-number>6067545</doc-number>
<kind>A</kind>
<name>Wolff</name>
<date>20000500</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00018">
<document-id>
<country>US</country>
<doc-number>6098079</doc-number>
<kind>A</kind>
<name>Howard</name>
<date>20000800</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00019">
<document-id>
<country>US</country>
<doc-number>6160552</doc-number>
<kind>A</kind>
<name>Wilsher et al.</name>
<date>20001200</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00020">
<document-id>
<country>US</country>
<doc-number>6167449</doc-number>
<kind>A</kind>
<name>Arnold et al.</name>
<date>20001200</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00021">
<document-id>
<country>US</country>
<doc-number>6185574</doc-number>
<kind>B1</kind>
<name>Howard et al.</name>
<date>20010200</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00022">
<document-id>
<country>US</country>
<doc-number>6208659</doc-number>
<kind>B1</kind>
<name>Govindarajan et al.</name>
<date>20010300</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00023">
<document-id>
<country>US</country>
<doc-number>6233606</doc-number>
<kind>B1</kind>
<name>Dujari</name>
<date>20010500</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00024">
<document-id>
<country>US</country>
<doc-number>6263348</doc-number>
<kind>B1</kind>
<name>Kathrow et al.</name>
<date>20010700</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00025">
<document-id>
<country>US</country>
<doc-number>6269080</doc-number>
<kind>B1</kind>
<name>Kumar</name>
<date>20010700</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00026">
<document-id>
<country>US</country>
<doc-number>6295538</doc-number>
<kind>B1</kind>
<name>Cooper et al.</name>
<date>20010900</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00027">
<document-id>
<country>US</country>
<doc-number>6324544</doc-number>
<kind>B1</kind>
<name>Alam et al.</name>
<date>20011100</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00028">
<document-id>
<country>US</country>
<doc-number>6345288</doc-number>
<kind>B1</kind>
<name>Reed et al.</name>
<date>20020200</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00029">
<document-id>
<country>US</country>
<doc-number>6370547</doc-number>
<kind>B1</kind>
<name>Eftink</name>
<date>20020400</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00030">
<document-id>
<country>US</country>
<doc-number>6389433</doc-number>
<kind>B1</kind>
<name>Bolosky et al.</name>
<date>20020500</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00031">
<document-id>
<country>US</country>
<doc-number>6405315</doc-number>
<kind>B1</kind>
<name>Burns et al.</name>
<date>20020600</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00032">
<document-id>
<country>US</country>
<doc-number>6415372</doc-number>
<kind>B1</kind>
<name>Zakai et al.</name>
<date>20020700</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>711165</main-classification></classification-national>
</citation>
<citation>
<patcit num="00033">
<document-id>
<country>US</country>
<doc-number>6463535</doc-number>
<kind>B1</kind>
<name>Drews</name>
<date>20021000</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00034">
<document-id>
<country>US</country>
<doc-number>6466978</doc-number>
<kind>B1</kind>
<name>Mukherjee et al.</name>
<date>20021000</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>709225</main-classification></classification-national>
</citation>
<citation>
<patcit num="00035">
<document-id>
<country>US</country>
<doc-number>6477544</doc-number>
<kind>B1</kind>
<name>Bolosky et al.</name>
<date>20021100</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00036">
<document-id>
<country>US</country>
<doc-number>6484204</doc-number>
<kind>B1</kind>
<name>Rabinovich</name>
<date>20021100</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00037">
<document-id>
<country>US</country>
<doc-number>6493804</doc-number>
<kind>B1</kind>
<name>Soltis et al.</name>
<date>20021200</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00038">
<document-id>
<country>US</country>
<doc-number>6510426</doc-number>
<kind>B1</kind>
<name>Cohen et al.</name>
<date>20030100</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00039">
<document-id>
<country>US</country>
<doc-number>6516350</doc-number>
<kind>B1</kind>
<name>Lumelsky et al.</name>
<date>20030200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>709226</main-classification></classification-national>
</citation>
<citation>
<patcit num="00040">
<document-id>
<country>US</country>
<doc-number>6522423</doc-number>
<kind>B2</kind>
<name>Cohen et al.</name>
<date>20030200</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00041">
<document-id>
<country>US</country>
<doc-number>6535894</doc-number>
<kind>B1</kind>
<name>Schmidt et al.</name>
<date>20030300</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00042">
<document-id>
<country>US</country>
<doc-number>6556998</doc-number>
<kind>B1</kind>
<name>Mukherjee et al.</name>
<date>20030400</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00043">
<document-id>
<country>US</country>
<doc-number>6560706</doc-number>
<kind>B1</kind>
<name>Carbajal et al.</name>
<date>20030500</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00044">
<document-id>
<country>US</country>
<doc-number>6577734</doc-number>
<kind>B1</kind>
<name>Etzel et al.</name>
<date>20030600</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00045">
<document-id>
<country>US</country>
<doc-number>6604170</doc-number>
<kind>B1</kind>
<name>Suzuki</name>
<date>20030800</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00046">
<document-id>
<country>US</country>
<doc-number>6671821</doc-number>
<kind>B1</kind>
<name>Castro et al.</name>
<date>20031200</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00047">
<document-id>
<country>US</country>
<doc-number>6704730</doc-number>
<kind>B2</kind>
<name>Moulton et al.</name>
<date>20040300</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00048">
<document-id>
<country>US</country>
<doc-number>6718360</doc-number>
<kind>B1</kind>
<name>Jones et al.</name>
<date>20040400</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00049">
<document-id>
<country>US</country>
<doc-number>6721880</doc-number>
<kind>B1</kind>
<name>Pike</name>
<date>20040400</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00050">
<document-id>
<country>US</country>
<doc-number>6725373</doc-number>
<kind>B2</kind>
<name>Carbajal et al.</name>
<date>20040400</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00051">
<document-id>
<country>US</country>
<doc-number>6738797</doc-number>
<kind>B1</kind>
<name>Martin</name>
<date>20040500</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00052">
<document-id>
<country>US</country>
<doc-number>6742114</doc-number>
<kind>B1</kind>
<name>Carter et al.</name>
<date>20040500</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00053">
<document-id>
<country>US</country>
<doc-number>6748538</doc-number>
<kind>B1</kind>
<name>Chan et al.</name>
<date>20040600</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00054">
<document-id>
<country>US</country>
<doc-number>6766367</doc-number>
<kind>B1</kind>
<name>Stevenson et al.</name>
<date>20040700</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00055">
<document-id>
<country>US</country>
<doc-number>6788769</doc-number>
<kind>B1</kind>
<name>Waites</name>
<date>20040900</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00056">
<document-id>
<country>US</country>
<doc-number>7000141</doc-number>
<kind>B1</kind>
<name>Karlsson et al.</name>
<date>20060200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>714  4</main-classification></classification-national>
</citation>
<citation>
<patcit num="00057">
<document-id>
<country>US</country>
<doc-number>7051028</doc-number>
<kind>B2</kind>
<name>Shi et al.</name>
<date>20060500</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00058">
<document-id>
<country>US</country>
<doc-number>7096493</doc-number>
<kind>B1</kind>
<name>Liu</name>
<date>20060800</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00059">
<document-id>
<country>US</country>
<doc-number>7200618</doc-number>
<kind>B2</kind>
<name>Douceur et al.</name>
<date>20070400</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00060">
<document-id>
<country>US</country>
<doc-number>2001/0039548</doc-number>
<kind>A1</kind>
<name>Shinkai et al.</name>
<date>20011100</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00061">
<document-id>
<country>US</country>
<doc-number>2002/0016174</doc-number>
<kind>A1</kind>
<name>Gibson et al.</name>
<date>20020200</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00062">
<document-id>
<country>US</country>
<doc-number>2002/0073082</doc-number>
<kind>A1</kind>
<name>Duvillier et al.</name>
<date>20020600</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>707  3</main-classification></classification-national>
</citation>
<citation>
<patcit num="00063">
<document-id>
<country>US</country>
<doc-number>2002/0088011</doc-number>
<kind>A1</kind>
<name>Lamkin et al.</name>
<date>20020700</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00064">
<document-id>
<country>US</country>
<doc-number>2002/0095590</doc-number>
<kind>A1</kind>
<name>Douceur et al.</name>
<date>20020700</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00065">
<document-id>
<country>US</country>
<doc-number>2002/0099784</doc-number>
<kind>A1</kind>
<name>Tran</name>
<date>20020700</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00066">
<document-id>
<country>US</country>
<doc-number>2002/0103818</doc-number>
<kind>A1</kind>
<name>Amberden</name>
<date>20020800</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00067">
<document-id>
<country>US</country>
<doc-number>2002/0111996</doc-number>
<kind>A1</kind>
<name>Jones et al.</name>
<date>20020800</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00068">
<document-id>
<country>US</country>
<doc-number>2003/0046533</doc-number>
<kind>A1</kind>
<name>Olkin et al.</name>
<date>20030300</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00069">
<document-id>
<country>US</country>
<doc-number>2003/0135586</doc-number>
<kind>A1</kind>
<name>Minborg et al.</name>
<date>20030700</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00070">
<document-id>
<country>US</country>
<doc-number>2004/0068652</doc-number>
<kind>A1</kind>
<name>Carpentier et al.</name>
<date>20040400</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<nplcit num="00071">
<othercit>“Towards an Archival Intememory” IEEE International forum on Research and Technology Advances in Digital Libraries pp. 147-156 Apr. 1998.</othercit>
</nplcit>
<category>cited by other</category>
</citation>
<citation>
<nplcit num="00072">
<othercit>“Scalability in the XFS File System” USENIX Annual Technical Conference 15 pages 1998.</othercit>
</nplcit>
<category>cited by other</category>
</citation>
<citation>
<nplcit num="00073">
<othercit>Borg. Digital Signatures Keep Cyberstreets Safe for Shoppers, Computer Technology Review, vol. 16, No. 2, Feb. 1996 p. 1.</othercit>
</nplcit>
<category>cited by other</category>
</citation>
<citation>
<nplcit num="00074">
<othercit>“Accessing Nearby Copies of Replicated Objects in a Distributed Environment” Theory of Computing Systems pp. 32:241-280 1999.</othercit>
</nplcit>
<category>cited by other</category>
</citation>
<citation>
<nplcit num="00075">
<othercit>“Accessing Nearby Copies of Replicated Objects in a Distributed Environment” Proceedins of the 9th Annual ACM Symposium on Parallel Algorithms and Architectures pp. 311-320 1997.</othercit>
</nplcit>
<category>cited by other</category>
</citation>
<citation>
<nplcit num="00076">
<othercit>“Franipani: A Scalable Distributed File System” 16th ACM Symposium on Operating Systems Principles pp. 224-237 1997.</othercit>
</nplcit>
<category>cited by other</category>
</citation>
<citation>
<nplcit num="00077">
<othercit>Decentralizing a Global Naming Serifce for Improved Performance and Fault Tolerance May 1989 pp. 147-183.</othercit>
</nplcit>
<category>cited by other</category>
</citation>
<citation>
<nplcit num="00078">
<othercit>“Separating Key Management from File System Security” 17th ACM Symposium on Operating Systems Principles pp. 124-4139 Dec. 1999.</othercit>
</nplcit>
<category>cited by other</category>
</citation>
<citation>
<nplcit num="00079">
<othercit>“Computing Replica Placement in Distributed Systems” IEEE Second Workshop on Replicated Data pp. 58-61 Nov. 1992.</othercit>
</nplcit>
<category>cited by other</category>
</citation>
<citation>
<nplcit num="00080">
<othercit>David R Cheriton and Timothy P. Mann, Decentralizing a Global Naming Service for Improved Performance and Fault Tolerance, (1989) pp. 147-183.</othercit>
</nplcit>
<category>cited by other</category>
</citation>
<citation>
<nplcit num="00081">
<othercit>“Free Riding on Gnutella” Xerox PARC Technical Report pp. 1-22 Aug. 2000.</othercit>
</nplcit>
<category>cited by other</category>
</citation>
<citation>
<nplcit num="00082">
<othercit>“Petal: Distributed Virtual Disks” Seventh International Conference on Architectural Support for Programming Languages and Operating Systems' pp. 84-92 Oct. 1996.</othercit>
</nplcit>
<category>cited by other</category>
</citation>
<citation>
<nplcit num="00083">
<othercit>FTFS: The Design of a Fault Tolerant Distributed File-System May 2000 pp. 1-49.</othercit>
</nplcit>
<category>cited by other</category>
</citation>
<citation>
<nplcit num="00084">
<othercit>Federal Information Processing Standards Publication 186: Digital Signature Standard (DSS). 1994.</othercit>
</nplcit>
<category>cited by other</category>
</citation>
<citation>
<nplcit num="00085">
<othercit>Experience of Adaptive Replication In Distributed File Systems' 22nd IEEE EUROMICRO 10 pages Sep. 1996.</othercit>
</nplcit>
<category>cited by other</category>
</citation>
<citation>
<nplcit num="00086">
<othercit>Hu, Some Thoughts on Agent Trust and Delegation, Available at http://www.cs.nccu.edu.tw/jong, 2001, pp. 489-496.</othercit>
</nplcit>
<category>cited by other</category>
</citation>
<citation>
<nplcit num="00087">
<othercit>“Freenet: A Distributed Anonymous Information Storage and Retrieval System” ICSI Workshop on Design Issues in Anonymity and Unobservability 21 pages Jul. 2000.</othercit>
</nplcit>
<category>cited by other</category>
</citation>
<citation>
<nplcit num="00088">
<othercit>“Survivable Information Storage Systems” IEEE Computer pp. 33(8):61-68 Aug. 2000.</othercit>
</nplcit>
<category>cited by other</category>
</citation>
<citation>
<nplcit num="00089">
<othercit>“A Large-Scale Study of File-System Contents” SIGMETRICS pp. 59-70 May 1999.</othercit>
</nplcit>
<category>cited by other</category>
</citation>
<citation>
<nplcit num="00090">
<othercit>“Scale and Performance in a Distributed File System” ACM Transactions on Computer Systems pp. 51-81 Feb. 1988.</othercit>
</nplcit>
<category>cited by other</category>
</citation>
<citation>
<nplcit num="00091">
<othercit>“Disconnected Operation in the Coda File System” ACM Transactions on Computer Systems V 10 N 1 pp. 3-25 Feb. 1992.</othercit>
</nplcit>
<category>cited by other</category>
</citation>
<citation>
<nplcit num="00092">
<othercit>“OceanStore: An Architecture for Global-Scale Persistent Storage” Proceedings of the Ninth International Conference on Architectural Support for Programming Languages and Operating Systems 12 pages Nov. 2000.</othercit>
</nplcit>
<category>cited by other</category>
</citation>
<citation>
<nplcit num="00093">
<othercit>“The Protection of Information in Computer Systems”. Proceedings of the IEEE 63(9) pp. 1278-1308 Sep. 1975.</othercit>
</nplcit>
<category>cited by other</category>
</citation>
<citation>
<nplcit num="00094">
<othercit>“Summary Cache: A Scalable Wide-Area Web Cache Sharing Protocol” ACM SIGCOMM pp. 254-265 1998.</othercit>
</nplcit>
<category>cited by other</category>
</citation>
<citation>
<nplcit num="00095">
<othercit>“Proactive Recovery in a Byznatine-Fault-Tolerant System” 4th Symposium on Operating Systems Design and Implmentation pp. 273-287 Oct. 2000.</othercit>
</nplcit>
<category>cited by other</category>
</citation>
<citation>
<nplcit num="00096">
<othercit>“Practical Byzantine Fauyt Tolerence” Proceedings of the Third Symposium on Operating Systems Design and Implementation 14 pages Feb. 1999.</othercit>
</nplcit>
<category>cited by other</category>
</citation>
<citation>
<nplcit num="00097">
<othercit>“A Fast File System for Unix” ACM Transactions on Computer Sytems V 2 N 3 pp. 181-197 Aug. 1984.</othercit>
</nplcit>
<category>cited by other</category>
</citation>
<citation>
<nplcit num="00098">
<othercit>Matt Evans, FTFS: The Design of A Fault Tolerant Distrubted File-System, (2000), pp. 1-49.</othercit>
</nplcit>
<category>cited by other</category>
</citation>
<citation>
<nplcit num="00099">
<othercit>“The Eternity Service” Prago-Crypt pp. 242-252 Oct. 1996.</othercit>
</nplcit>
<category>cited by other</category>
</citation>
<citation>
<nplcit num="00100">
<othercit>“Design and Implementation of the Sun Network Filesystem” Summer USENIX Conference pp. 119-130 Jun. 1985.</othercit>
</nplcit>
<category>cited by other</category>
</citation>
<citation>
<nplcit num="00101">
<othercit>“S.M.A.R.T. Phase-II” No. WP-9803-001 Maxtor Corporation 3 pages Feb. 1998.</othercit>
</nplcit>
<category>cited by other</category>
</citation>
<citation>
<nplcit num="00102">
<othercit>Serverless Network File Systems 15th Symposium on Operating Systems Principles pp. 109-126 Dec. 1995.</othercit>
</nplcit>
<category>cited by other</category>
</citation>
<citation>
<nplcit num="00103">
<othercit>The OceanStore Project web pages http://ocenstore.cs.berkeley.edu/info/overview.html 2 pages last modified Jul. 8, 2002.</othercit>
</nplcit>
<category>cited by other</category>
</citation>
<citation>
<nplcit num="00104">
<othercit>ISU: http://www.isu.edu/departments/comcom/unix/workshop/shell.html, Dec. 25, 2004.</othercit>
</nplcit>
<category>cited by other</category>
</citation>
<citation>
<nplcit num="00105">
<othercit>From the Internet: http://www.isu.edu/departments/comcom/unix.workshop/, retrieved Sep. 28, 2005.</othercit>
</nplcit>
<category>cited by other</category>
</citation>
<citation>
<nplcit num="00106">
<othercit>“Single Instance Storage in Windows 2000” Proceedings of the 4th USENIX Windows Systems Symposium pp. 13-24 Aug. 2000.</othercit>
</nplcit>
<category>cited by other</category>
</citation>
<citation>
<nplcit num="00107">
<othercit>“Feasibility of a Serverless Distributed File System Depolyed on an Existing Set of Desktop PCs” Proceedings of the International Conference on Measurement and Modeling of Computer Systems pp. 34-43 Jun. 17-21, 2000.</othercit>
</nplcit>
<category>cited by other</category>
</citation>
<citation>
<nplcit num="00108">
<othercit>“File system usage in Windows NT 4.0” 17th ACM Symposium on Operating Systems Principles pp. 93-109 Dec. 1999.</othercit>
</nplcit>
<category>cited by other</category>
</citation>
<citation>
<nplcit num="00109">
<othercit>Miller et al, “Strong Security for Distributed File Systems”, 2001 IEEE, pp. 34-40.</othercit>
</nplcit>
<category>cited by other</category>
</citation>
<citation>
<nplcit num="00110">
<othercit>Cheriton, et al., “Decentralizing a Global Naming Service for Improved Performance and Fault Tolerance”, (1989) pp. 147-183.</othercit>
</nplcit>
<category>cited by other</category>
</citation>
<citation>
<nplcit num="00111">
<othercit>McCue, et al., “Computing Replica Placement in Distributed Systems” IEEE Second Workshop on Replicated Data pp. 58-61 Nov. 1992.</othercit>
</nplcit>
<category>cited by other</category>
</citation>
<citation>
<nplcit num="00112">
<othercit>Reich, et al., “S.M.A.R.T. Phase-II”. No. WP-9803-001 Maxtor Corporation 3 pages Feb. 1998.</othercit>
</nplcit>
<category>cited by other</category>
</citation>
<citation>
<nplcit num="00113">
<othercit>The OceanStore Project web pages http://ocenstore.cs.berkeley.edu/info/overview.html 2 pages last modified Jul. 8, 2002.</othercit>
</nplcit>
<category>cited by other</category>
</citation>
</references-cited>
<number-of-claims>12</number-of-claims>
<us-exemplary-claim>1</us-exemplary-claim>
<us-field-of-classification-search>
<classification-national>
<country>US</country>
<main-classification>707200-205</main-classification>
<additional-info>unstructured</additional-info>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>709206</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>714  4</main-classification>
</classification-national>
</us-field-of-classification-search>
<figures>
<number-of-drawing-sheets>7</number-of-drawing-sheets>
<number-of-figures>7</number-of-figures>
</figures>
<us-related-documents>
<continuation>
<relation>
<parent-doc>
<document-id>
<country>US</country>
<doc-number>10092994</doc-number>
<kind>00</kind>
<date>20020307</date>
</document-id>
<parent-grant-document>
<document-id>
<country>US</country>
<doc-number>7020665</doc-number>
<kind>A </kind>
</document-id>
</parent-grant-document>
</parent-doc>
<child-doc>
<document-id>
<country>US</country>
<doc-number>11275655</doc-number>
</document-id>
</child-doc>
</relation>
</continuation>
<related-publication>
<document-id>
<country>US</country>
<doc-number>20060106882</doc-number>
<kind>A1</kind>
<date>20060518</date>
</document-id>
</related-publication>
</us-related-documents>
<parties>
<applicants>
<applicant sequence="001" app-type="applicant-inventor" designation="us-only">
<addressbook>
<last-name>Douceur</last-name>
<first-name>John R.</first-name>
<address>
<city>Bellevue</city>
<state>WA</state>
<country>US</country>
</address>
</addressbook>
<nationality>
<country>omitted</country>
</nationality>
<residence>
<country>US</country>
</residence>
</applicant>
<applicant sequence="002" app-type="applicant-inventor" designation="us-only">
<addressbook>
<last-name>Wattenhofer</last-name>
<first-name>Roger P.</first-name>
<address>
<city>Zurich</city>
<country>CH</country>
</address>
</addressbook>
<nationality>
<country>CH</country>
</nationality>
<residence>
<country>CH</country>
</residence>
</applicant>
</applicants>
</parties>
<assignees>
<assignee>
<addressbook>
<orgname>Microsoft Corporation</orgname>
<role>02</role>
<address>
<city>Redmond</city>
<state>WA</state>
<country>US</country>
</address>
</addressbook>
</assignee>
</assignees>
<examiners>
<primary-examiner>
<last-name>Truong</last-name>
<first-name>Cam Y T</first-name>
<department>2162</department>
</primary-examiner>
</examiners>
</us-bibliographic-data-grant>
<abstract id="abstract">
<p id="p-0001" num="0000">File availability in distributed file storage systems is improved by initially placing replicas of a file or other object on different ones of multiple devices using a first process. Subsequently, the placement of the replicas is improved by evaluating whether any replicas of a first file can be swapped with any replicas of a second file without a reduction in the combined file availability of the first and second files, and swapping a replica of the first file with a replica of the second file if the swapping results in no reduction in the combined file availability of the first and second files.</p>
</abstract>
<drawings id="DRAWINGS">
<figure id="Fig-EMI-D00000" num="00000">
<img id="EMI-D00000" he="205.99mm" wi="110.74mm" file="US07299250-20071120-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00001" num="00001">
<img id="EMI-D00001" he="184.07mm" wi="171.20mm" file="US07299250-20071120-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00002" num="00002">
<img id="EMI-D00002" he="205.57mm" wi="157.06mm" file="US07299250-20071120-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00003" num="00003">
<img id="EMI-D00003" he="172.13mm" wi="173.06mm" file="US07299250-20071120-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00004" num="00004">
<img id="EMI-D00004" he="231.82mm" wi="111.76mm" file="US07299250-20071120-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00005" num="00005">
<img id="EMI-D00005" he="238.68mm" wi="172.21mm" file="US07299250-20071120-D00005.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00006" num="00006">
<img id="EMI-D00006" he="206.59mm" wi="157.99mm" file="US07299250-20071120-D00006.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00007" num="00007">
<img id="EMI-D00007" he="238.68mm" wi="175.26mm" file="US07299250-20071120-D00007.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
</drawings>
<description id="description">
<?RELAPP description="Other Patent Relations" end="lead"?>
<heading id="h-0001" level="1">RELATED APPLICATIONS</heading>
<p id="p-0002" num="0001">This application is a continuation of U.S. patent application Ser. No. 10/092,994, filed Mar. 7, 2002, now U.S. Pat. No. 7,020,665 which is hereby incorporated by reference herein.</p>
<?RELAPP description="Other Patent Relations" end="tail"?>
<?BRFSUM description="Brief Summary" end="lead"?>
<heading id="h-0002" level="1">TECHNICAL FIELD</heading>
<p id="p-0003" num="0002">This invention relates to computer networks and file systems, and particularly to improving file availability in distributed file storage systems.</p>
<heading id="h-0003" level="1">BACKGROUND</heading>
<p id="p-0004" num="0003">File systems manage files and other data objects stored on computer systems. File systems were originally built into the computer operating system to facilitate access to files stored locally on resident storage media. As personal computers became networked, some file storage capabilities were offloaded from individual user machines to special storage servers that stored large numbers of files on behalf of the user machines. When a file was needed, the user machine simply requested the file from the server. In this server-based architecture, the file system is extended to facilitate management of and access to files stored remotely at the storage server over a network. Today, file storage is migrating toward a distributed file system model in which files are stored on various networked computers, rather than on a central storage server.</p>
<p id="p-0005" num="0004">One problem that arises in distributed file systems concerns the availability of files stored in the file system. As files are stored on various networked computers, the availability of such files becomes dependent on the availability of the various networked computers, which may not be as great as the availability of a central storage server. One solution to this problem is to store multiple copies of files on different ones of the network computers. However, this solution still leaves the problem of determining which of the network computers the copies of a particular file should be stored on.</p>
<p id="p-0006" num="0005">The improving file availability in distributed file storage systems described herein solves these and other problems.</p>
<heading id="h-0004" level="1">SUMMARY</heading>
<p id="p-0007" num="0006">Improving file availability in distributed file storage systems is described herein.</p>
<p id="p-0008" num="0007">According to one aspect, replicas of a file or other objects are initially placed on different ones of multiple devices using a first process. Subsequently, the placement of the replicas is improved by evaluating whether any replicas of a first file can be swapped with any replicas of a second file without a reduction in the combined file availability of the first and second files, and swapping a replica of the first file with a replica of the second file if the swapping results in no reduction in the combined file availability of the first and second files.</p>
<?BRFSUM description="Brief Summary" end="tail"?>
<?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?>
<description-of-drawings>
<heading id="h-0005" level="1">BRIEF DESCRIPTION OF THE DRAWINGS</heading>
<p id="p-0009" num="0008">The same numbers are used throughout the document to reference like components and/or features.</p>
<p id="p-0010" num="0009"><figref idref="DRAWINGS">FIG. 1</figref> illustrates an exemplary system including multiple devices and multiple files.</p>
<p id="p-0011" num="0010"><figref idref="DRAWINGS">FIG. 2</figref> illustrates an exemplary network environment that supports a serverless distributed file system.</p>
<p id="p-0012" num="0011"><figref idref="DRAWINGS">FIG. 3</figref> is a flowchart illustrating an exemplary process for placing file replicas in a system.</p>
<p id="p-0013" num="0012"><figref idref="DRAWINGS">FIG. 4</figref> is a flowchart illustrating an exemplary file placement improvement process.</p>
<p id="p-0014" num="0013"><figref idref="DRAWINGS">FIG. 5</figref> illustrates an exemplary evaluation of whether replicas of two files can be swapped to improve file availability.</p>
<p id="p-0015" num="0014"><figref idref="DRAWINGS">FIG. 6</figref> illustrates logical components of an exemplary computing device.</p>
<p id="p-0016" num="0015"><figref idref="DRAWINGS">FIG. 7</figref> illustrates a more general computer environment.</p>
</description-of-drawings>
<?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?>
<?DETDESC description="Detailed Description" end="lead"?>
<heading id="h-0006" level="1">DETAILED DESCRIPTION</heading>
<p id="p-0017" num="0016">The following discussion is directed to improving file availability in distributed file storage systems by improving file replica placement. Multiple copies or “replicas” of a file are stored on different devices in the storage system in order to improve the availability of the file (e.g., if a device on which one replica is stored is not available when retrieval of the file is requested, another replica can be retrieved from another device which is available). When a new file replica needs to be stored, a location for the file replica is determined in accordance with a first process. Subsequently, attempts are made to reposition replicas of the various files in order to improve the combined file availability. As used herein, the combined file availability of a set of files being considered refers to how close to one another the availabilities of the files in the set are. The combined availability of a set (e.g., two) files is thus improved as their file availabilities become closer. By improving the combined file availability of sets of files, the overall file availability in the distributed file storage system is improved.</p>
<p id="p-0018" num="0017">While the file storage system is described herein in the context of storing “files”, it should be noted that other types of storable data can be stored in the file system. The term “file” is used for discussion purposes and is intended to include other objects or essentially any other storage subject matter that may not be commonly characterized as a “file”, such as a portion of a file, a group of multiple files, a directory or folder (whether populated with files or unpopulated), and so forth.</p>
<p id="p-0019" num="0018"><figref idref="DRAWINGS">FIG. 1</figref> illustrates an exemplary system <b>100</b> including multiple devices <b>102</b> and multiple files <b>104</b>. For ease of explanation only a few devices <b>102</b> and two files <b>104</b> have been illustrated. It is to be appreciated that system <b>100</b> may include any number of devices (e.g., hundreds, thousands, hundreds of thousands, etc.) and any number of files (e.g., tens of thousands, hundreds of thousands, millions, etc.). The devices <b>102</b> collectively implement a distributed file system to store files including files <b>104</b>. Multiple replicas of each file <b>104</b> are stored on different devices <b>102</b>. In the illustrated example, three replicas of each file <b>104</b> are stored on devices <b>102</b>, although larger or smaller numbers of replicas may alternatively be stored.</p>
<p id="p-0020" num="0019">Determining the location where the file replicas should be stored (that is, on which devices <b>102</b> the file replicas should be stored) is a two part process. The first part, referred to as initial placement, determines on which device <b>102</b> a particular file replica should be stored when the replica is not currently stored anywhere or its previous storage location is no longer available (in other words, the replica is “homeless”). The second part, referred to as placement improvement, determines whether replicas should be moved to different devices after their initial placement. This two part process is discussed in additional detail below.</p>
<p id="p-0021" num="0020"><figref idref="DRAWINGS">FIG. 2</figref> illustrates an exemplary network environment <b>120</b> that supports a serverless distributed file system. Four client computing devices <b>122</b>, <b>124</b>, <b>126</b>, and <b>128</b> are coupled together via a data communications network <b>130</b>. Although four computing devices are illustrated, different numbers (either greater or fewer than four) may be included in network environment <b>120</b>.</p>
<p id="p-0022" num="0021">Network <b>130</b> represents any of a wide variety of data communications networks. Network <b>130</b> may include public portions (e.g., the Internet) as well as private portions (e.g., an internal corporate Local Area Network (LAN)), as well as combinations of public and private portions. Network <b>130</b> may be implemented using any one or more of a wide variety of conventional communications media including both wired and wireless media. Any of a wide variety of communications protocols can be used to communicate data via network <b>130</b>, including both public and proprietary protocols. Examples of such protocols include TCP/IP, IPX/SPX, NetBEUI, etc.</p>
<p id="p-0023" num="0022">Computing devices <b>122</b>-<b>128</b> represent any of a wide range of computing devices, and each device may be the same or different. By way of example, devices <b>122</b>-<b>128</b> may be desktop computers, laptop computers, handheld or pocket computers, personal digital assistants (PDAs), cellular phones, Internet appliances, consumer electronics devices, gaming consoles, and so forth.</p>
<p id="p-0024" num="0023">Two or more of devices <b>122</b>-<b>128</b> operate to implement a serverless distributed file system. The actual devices participating in the serverless distributed file system can change over time, allowing new devices to be added to the system and other devices to be removed from the system. Each device <b>122</b>-<b>126</b> that implements (participates in) the distributed file system has portions of its mass storage device(s) (e.g., hard disk drive) allocated for use as either local storage or distributed storage. The local storage is used for data that the user desires to store on his or her local machine and not in the distributed file system structure. The distributed storage portion is used for data that the user of the device (or another device) desires to store within the distributed file system structure.</p>
<p id="p-0025" num="0024">In the illustrated example of <figref idref="DRAWINGS">FIG. 2</figref>, certain devices connected to network <b>130</b> have one or more mass storage devices that include both a distributed portion and a local portion. The amount allocated to distributed or local storage varies among the devices. For example, device <b>122</b> has a larger percentage allocated for a distributed system portion <b>140</b> in comparison to the local portion <b>142</b>; device <b>124</b> includes a distributed system portion <b>144</b> that is approximately the same size as the local portion <b>146</b>; and device <b>126</b> has a smaller percentage allocated for a distributed system portion <b>148</b> in comparison to the local portion <b>150</b>. The storage separation into multiple portions may occur on a per storage device basis (e.g., one hard drive is designated for use in the distributed system while another is designated solely for local use), and/or within a single storage device (e.g., part of one hard drive may be designated for use in the distributed system while another part is designated for local use). The amount allocated to distributed or local storage may vary over time. Other devices connected to network <b>130</b>, such as computing device <b>128</b>, may not implement any of the distributed file system and thus do not have any of their mass storage device(s) allocated for use by the distributed system. Hence, device <b>128</b> has only a local portion <b>152</b>.</p>
<p id="p-0026" num="0025">A distributed file system <b>160</b> operates to store multiple replicas of files on different computing devices <b>122</b>-<b>126</b>. When a new file is created by the user of a computer, he or she has the option of storing the file on the local portion of his or her computing device, or alternatively in the distributed file system. If the file is stored in the distributed file system <b>160</b>, the file will be stored in the distributed system portion of the mass storage device(s) of one or more of devices <b>122</b>-<b>126</b>. The user creating the file typically has no ability to control which device <b>122</b>-<b>126</b> the file is stored on, nor any knowledge of which device <b>122</b>-<b>126</b> the file is stored on. Additionally, replicated copies of the file will be saved, allowing the user to subsequently retrieve the file even if one of the computing devices <b>122</b>-<b>126</b> on which the file is saved is unavailable (e.g., is powered-down, is malfunctioning, etc.).</p>
<p id="p-0027" num="0026">The distributed file system <b>160</b> is implemented by one or more components on each of the devices <b>122</b>-<b>126</b>, thereby obviating the need for any centralized server to coordinate the file system. These components operate to determine where particular file replicas are stored, how many replicas of the files are created for storage on different devices, and so forth. Exactly which device will store which files depends on numerous factors, including the number of devices in the distributed file system, the storage space allocated to the file system from each of the devices, how many replicas of the file are to be saved, the number of files already stored on the devices, and so on. The distributed file system <b>160</b> does not manage the storage disk (or other mass storage device) directly, but rather relies on existing file systems on local machines, such as those file systems integrated into operating systems (e.g., the Windows NT® file system).</p>
<p id="p-0028" num="0027">Distributed file system <b>160</b> is designed to be scalable to support large numbers of computers within system <b>160</b>. Protocols and data structures used by the components on the devices in system <b>160</b> are designed so as not to be proportional to the number of computers in the system, thereby allowing them to readily scale to large numbers of computers.</p>
<p id="p-0029" num="0028">The files stored by the file system are distributed among the various devices <b>122</b>-<b>126</b> and stored in encrypted form. When a new file is created, the device on which the file is being created encrypts the file prior to communicating the file to other device(s) for storage. The directory entry (which includes the file name) for a new file is also communicated to other device(s) for storage, which need not be (and typically will not be) the same device(s) on which the encrypted file is stored. Additionally, if a new folder or directory is created, the directory entry (which includes the folder name or directory name) is also communicated to the other device(s) for storage. As used herein, a directory entry refers to any entry that can be added to a file system directory, including both file names and directory (or folder) names.</p>
<p id="p-0030" num="0029">Each directory entry includes the name of the corresponding file, an identification of the computers at which replicas of the file are stored, and file verification data that allows the contents of the file to be verified as corresponding to the directory entry. The file verification data can take a variety of different forms, and in one implementation is a hash value generated by applying a cryptographically secure hash function to the file, such as MD5 (Message Digest 5), SHA-1 (Secure Hash Algorithm-1), etc. When a file is retrieved from storage, the retrieving computer can re-generate the hash value and compare it to the hash value in the directory entry to verify that the computer received the correct file. In another implementation, the file verification data is a combination of: a file identification number (e.g., a unique identifier of the file), a file version number, and the name of the user whose signature is on the file.</p>
<p id="p-0031" num="0030">Directories are maintained in distributed file system <b>160</b> by groups of computers organized into directory groups. In one implementation, each directory group is a Byzantine-fault-tolerant group, which is a group of computers that can be used to store information and/or perform other actions even though a certain number of those computers are faulty (compromised or otherwise unavailable). A computer can be compromised in a variety of different manners, such as a malicious user operating the computer, a malicious program running on the computer, etc. Any type of behavior can be observed from a compromised computer, such as refusing to respond to requests, intentionally responding to requests with incorrect or garbage information, etc. The Byzantine-fault-tolerant group is able to accurately store information and/or perform other actions despite the presence of such compromised computers. Byzantine groups are well-known to those skilled in the art, and thus will not be discussed further except as they pertain to the present invention.</p>
<p id="p-0032" num="0031">The distributed file system <b>160</b> is designed to prevent unauthorized users from reading data stored on one of the devices <b>122</b>-<b>126</b>. Thus, a file created by device <b>122</b> and stored on device <b>124</b> is not readable by the user of device <b>124</b> (unless he or she is authorized to do so). In order to implement such security, the contents of files as well as all file and directory names in directory entries are encrypted, and only authorized users are given the decryption key. Thus, although device <b>124</b> may store a file created by device <b>122</b>, if the user of device <b>124</b> is not an authorized user of the file, the user of device <b>124</b> cannot decrypt (and thus cannot read) either the contents of the file or the file name in its directory entry.</p>
<p id="p-0033" num="0032">Generally, the process for storing a file in serverless distributed file system <b>160</b> is as follows. Initially, a new file storage request is received at a client computing device. The client encrypts the file and the file name and generates a file contents hash. The client sends the encrypted file name and file contents hash to the appropriate Byzantine-fault-tolerant directory group along with a request to create a directory entry. The directory group validates the request, such as by verifying that the file name does not conflict with an existing name and that the client has permission to do what it is requesting to do. If the request is not validated then the request fails. However, if the request is validated, then the directory group generates a directory entry for the new file. The directory group also generates the replicas for the file, determines the placement for the replica, and saves the replicas to the proper computers, and updates the directory entry for the file accordingly.</p>
<p id="p-0034" num="0033">Every computer <b>122</b>-<b>126</b> in distributed file system <b>160</b> can have three functions: it can be a client for a local user, it can be a repository for encrypted copies of files stored in the system, and it can be a member of a group of computers that maintain one or more directories (that is, a member of a directory group). A computer <b>122</b>-<b>126</b> may perform any one or more of these three functions, and which function(s) a computer performs may change over time.</p>
<p id="p-0035" num="0034"><figref idref="DRAWINGS">FIG. 3</figref> is a flowchart illustrating an exemplary process <b>200</b> for placing file replicas in a system. Process <b>200</b> is implemented by one or more devices responsible for maintaining one or more directories. Process <b>200</b> is idle (act <b>202</b>) until one of two events occurs—a homeless replica needs placement, or a replica swap is triggered. When a homeless replica exists, the homeless replica needs placement and an initial placement part of process <b>200</b> is invoked. A replica may be homeless for a variety of different reasons, such as creation of a new file, a device previously storing a replica is removed from the system (e.g., to no longer be part of distributed file system <b>160</b> of <figref idref="DRAWINGS">FIG. 2</figref>, or because it has broken), a replica was evicted from a device because space was needed on the device for local storage, the number of replicas for the file has increased, and so forth. An initial location for the new replica is determined (act <b>204</b>) and the replica is stored at the determined location (act <b>206</b>).</p>
<p id="p-0036" num="0035">In one implementation, the initial location is determined in act <b>204</b> by randomly selecting a device. The random selection may be based on a truly random function or alternatively a pseudo-random function. The set of devices from which the random selection is made may be all devices in the system (e.g., the devices of distributed file system <b>160</b> of <figref idref="DRAWINGS">FIG. 2</figref>), or alternatively fewer devices (e.g., only those devices in the system that the device(s) implementing the process <b>200</b> is aware of).</p>
<p id="p-0037" num="0036">Alternatively, the determination in act <b>204</b> may be made in other manners, such as by selecting the device that has the highest device availability (or one of the highest device availabilities), selecting the device that has the lowest device availability (or one of the lowest device availabilities), selecting the device with the largest amount (or one of the largest amounts) of available space for file storage, selecting the device with the smallest amount (or one of the smallest amounts) of available space for file storage, selecting the newest device (or one of the newest devices), selecting the oldest device (or one of the oldest devices), and so forth. In yet another alternative, the determination in act <b>204</b> is made by assigning an order according to some criteria (e.g., randomly, by IP address, alphabetically by name, etc.) to a set of devices on which replicas may be stored and, each time a new replica is to be stored selecting the next device in accordance with this order.</p>
<p id="p-0038" num="0037">Various other factors may also be considered in making the determination of act <b>204</b>, regardless of whether the device selection is random or otherwise. For example, if the selected device does not currently have sufficient space to store the replica then another device is selected (e.g., according to the same criteria as the originally selected device but ignoring the originally selected device). By way of another example, if the selected device is not currently available (e.g., is malfunctioning, turned off, etc.) then another device is selected, or alternatively if the device is not currently available then it may not be included as a device in the set of devices from which the selection is made. By way of yet another example, if the selected device is owned by the same person/entity as another device on which another replica of the same file is already stored then another device is selected, or alternatively such a commonly-owned device may not be included as a device in the set of devices form which the selection is made.</p>
<p id="p-0039" num="0038">Once the homeless replica is initially placed, process <b>200</b> returns to idle (act <b>202</b>). Given the manner in which the initial placement is determined (e.g., randomly), it is often likely that file availability in the system can be improved by relocating the initially placed replica. Thus, a placement improvement part of the process is invoked when a replica swap is triggered. Once a replica swap is triggered, two files are selected (act <b>208</b>). An evaluation is then made as to whether replicas of the files can be swapped with one another in order to improve the combined file availability of the selected files (act <b>210</b>). If the combined file availability of the selected files cannot be improved, then process <b>200</b> returns to idle (act <b>202</b>). However, if the combined file availability of the selected files can be improved (or at least not reduced), then replicas of the files are swapped, thereby improving the combined file availability (act <b>212</b>). Process <b>200</b> then returns to idle (act <b>202</b>).</p>
<p id="p-0040" num="0039">The combined file availability of the two files can be improved if swapping any replica of the one file with any replica of the other file brings the availabilities of the two files closer together. It is to be appreciated that, by bringing the availabilities of the two files closer together, situations can arise where the availability of one file is increased while the availability of the other file is decreased.</p>
<p id="p-0041" num="0040">A replica swap can be triggered, and the file placement improvement portion of process <b>200</b> invoked, in a variety of circumstances. In one implementation, the replica swap is triggered at regular or irregular intervals (e.g., once every 200 milliseconds). Alternatively, the file system may be configured so that the file placement improvement portion of process <b>200</b> does not consume more than a particular amount (e.g., 1%) of resources (e.g., of network bandwidth, processor utilization, disk access time, combinations thereof, etc.). The factors which go into triggering the file placement improvement portion of process <b>200</b> may be static (e.g., preprogrammed into the system) or alternatively dynamic (e.g., an interval between triggers may be increased at times where the file system is not being used very heavily, or the amount of resources to be consumed by the file placement improvement process may be increased if the combined file availability of all (or a threshold number) of files in the file system becomes too low, etc.).</p>
<p id="p-0042" num="0041">The replica swap may be triggered by one or more devices in the file storage system that are responsible for maintaining files in the system, or alternatively some other device or devices. For example, there may be a device in the file system with the responsibility for monitoring and/or managing the combined performance of the file system, and this device is responsible for triggering the replica swap.</p>
<p id="p-0043" num="0042"><figref idref="DRAWINGS">FIG. 4</figref> is a flowchart illustrating an exemplary file placement improvement process <b>250</b>. The file placement improvement process <b>250</b> is, in accordance with one implementation, a more detailed description of acts <b>208</b>-<b>212</b> of <figref idref="DRAWINGS">FIG. 3</figref>. The process <b>205</b> is discussed with reference to <figref idref="DRAWINGS">FIG. 5</figref> as well.</p>
<p id="p-0044" num="0043">In the illustrated examples of <figref idref="DRAWINGS">FIGS. 4 and 5</figref>, a hierarchical file storage structure is employed that includes one or more namespace roots each capable of supporting one or more subtrees of directories or folders, and with each subtree being capable of supporting one or more additional subtrees. A directory can be viewed as a simulated file folder, being capable of holding zero or more files and/or zero or more other directories. A subtree refers to one or more directories and includes a root (it may also include a namespace root), and has the property that the path from the subtree root to all members of the subtree is within the subtree itself.</p>
<p id="p-0045" num="0044">Each subtree is managed or maintained by a group of one or more devices referred to as a directory group. A directory group can manage a subtree or alternatively an arbitrary set of directories within the namespace. One or more modules of the group of devices are responsible for implementing directory services to manage the subtree(s) assigned to the directory group, including all files in the subtree(s). In situations where the directory group is made up of multiple devices, those devices operate collectively to manage the subtree(s) assigned to the directory group. In one implementation, directory groups can create new directory groups and assign subtree(s) to these new groups, thereby alleviating some of the management responsibilities of the creating group. Alternatively, the ability to create new directory groups and assign subtree(s) to those directory groups may be restricted to only certain devices.</p>
<p id="p-0046" num="0045"><figref idref="DRAWINGS">FIG. 5</figref> illustrates two exemplary directory groups <b>270</b> and <b>272</b>. Although a file system may typically include additional directory groups, only two directory groups have been illustrated in <figref idref="DRAWINGS">FIG. 5</figref> for ease of explanation and in order to avoid cluttering the drawings. Initially, in <figref idref="DRAWINGS">FIG. 4</figref>, a directory group decides to attempt to improve file availability in the file system (act <b>252</b>). This decision to attempt to improve file availability may be made by the device or devices managing the directory group, or alternatively some other device as discussed above. The directory group selects a directory group with which to participate in the placement improvement process (act <b>254</b>). The selection in act <b>254</b> may be performed randomly or alternatively in some other manner. For example, a device managing the directory group may keep track of all other devices in the file system managing different directory groups, and have an ordering associated with those other devices or directory groups and select in act <b>254</b>, devices or directory groups in that order. The directory group selected in act <b>254</b> may be a different directory group than the group that made the decision in act <b>252</b>, or alternatively the same group. In other words, a directory group may participate with itself in the placement improvement process.</p>
<p id="p-0047" num="0046">For purposes of explanation, assume that two different directory groups are participating in the placement improvement process, directory groups <b>270</b> and <b>272</b> of <figref idref="DRAWINGS">FIG. 5</figref>. As illustrated in <figref idref="DRAWINGS">FIG. 5</figref>, directory group <b>270</b> is responsible for managing storage of a file A that has three replicas <b>274</b>, <b>276</b>, and <b>278</b>, stored on three devices <b>280</b>, <b>282</b>, and <b>284</b>, respectively. Additionally, directory group <b>272</b> is responsible for managing storage of a file B that has three replicas <b>286</b>, <b>288</b>, and <b>290</b>, stored on three devices <b>292</b>, <b>294</b>, and <b>296</b>, respectively. Although each directory group <b>270</b> and <b>272</b> is typically responsible for managing storage of additional files, these additional files have not been illustrated in <figref idref="DRAWINGS">FIG. 5</figref> so as to avoid cluttering the drawings. Additionally, it should be noted that multiple directory groups can store files to the same device.</p>
<p id="p-0048" num="0047">Returning to <figref idref="DRAWINGS">FIG. 4</figref>, the directory group (e.g., directory group <b>270</b>) communicates a request to the directory group selected in act <b>254</b> (e.g., directory group <b>272</b>) to participate in the placement improvement process (act <b>256</b>). Each of the directory groups <b>270</b> and <b>272</b> selects a file for the placement improvement process (act <b>258</b>). Each directory group <b>270</b> and <b>272</b> selects a file in act <b>258</b> in accordance with any of a wide variety of processes. In one implementation, each directory group <b>270</b> and <b>272</b> selects a file that they manage randomly in act <b>258</b>. In an alternate implementation, one of the directory groups selects, from all the files that it manages, the file with the lowest availability (or one of the lowest availabilities) while the other directory group selects a file at random. In yet another alternate implementations, one of the directory group selects, from all the files that it manages, the file with the lowest availability (or one of the lowest availabilities) while the other directory group selects, from all the files that it manages, the file with the highest availability (or one of the highest availabilities). For example, the directory group initiating the attempt in act <b>252</b> may select the file that it manages with the lowest availability while the selected directory group may randomly select a file that it manages. Alternatively, other file selection processes may be used, such as biased random selection, in which one directory group selects a file randomly but with a bias towards low-availability files, or in which one directory group selects a file randomly but with a bias toward high-availability files. Such a bias could involve weighting factors, cutoff availability thresholds, or other means.</p>
<p id="p-0049" num="0048">For purposes of explanation, assume that, in act <b>258</b>, directory group <b>270</b> selects file A, and directory group <b>272</b> selects file B. Directory groups <b>270</b> and <b>272</b> then evaluate whether a replica swap will improve the combined file availability of the selected files (act <b>260</b>). The evaluation of act <b>260</b> may be performed by directory group <b>270</b>, directory group <b>272</b>, or by both directory groups. The evaluation may also involve communicating information (such as file availability or machine availability) from one directory group to another.</p>
<p id="p-0050" num="0049">The evaluation of act <b>260</b> may involve considering all possible replica exchanges for the two files and checking whether any of them improve the combined file availability of the selected files. These swaps or exchanges refer to swapping the devices on which the replicas are stored. In the illustrated example of <figref idref="DRAWINGS">FIG. 5</figref>, a swap of replica <b>274</b> with replica <b>286</b> is evaluated, and a file availability resulting from the considered swap <b>300</b> is determined. The resulting file availability refers to the file availability of file A and the file availability of file B after the replica swap. The remaining possible replica exchanges for the two files are illustrated as <b>302</b>-<b>316</b>, each having a file availability resulting from the swap.</p>
<p id="p-0051" num="0050">A check is then made as to whether swapping any of the replicas of the selected files will improve (or at least not reduce) the combined file availability of the selected files (act <b>262</b>). This check is made by comparing the file availability results that would result from swapping the various replicas (<b>300</b>-<b>316</b>) to the file availabilities of file A and file B if no replicas are swapped. If the file availability results from any of the swappings (<b>300</b>-<b>316</b>) bring the file availabilities of file A and file B closer than they were without performing any swapping, then a swap will improve combined file availability between the two files; otherwise, a swap will not improve combined file availability between the two files.</p>
<p id="p-0052" num="0051">If a swap will not improve combined file availability between two the files, then the process <b>250</b> ends. However, if a swap will improve combined file availability (or at least not reduce combined file availability) between the two files, then a file replica swap (<b>300</b>-<b>316</b>) which results in the greatest improvement of combined file availability between the two files (brings the file availabilities of the two files closest together) is performed (act <b>264</b>). In one implementation, only one set of replicas is swapped. Alternatively, depending on the number of replicas and the file availabilities, multiple swaps may be evaluated in act <b>260</b> and performed in act <b>264</b> (that is, two or more sets of replicas may be swapped).</p>
<p id="p-0053" num="0052">The swap is performed by the directory group(s) communicating requests to the devices storing the replicas to be swapped to each transfer their replica to the other (and delete their copy of the replica after it has been transferred). Any necessary updates are also made in the directory group (e.g., the directory entries are updated to reflect which devices store replicas of which files after the swap).</p>
<p id="p-0054" num="0053">In one implementation, the evaluation of act <b>260</b> can be performed without actually swapping the files. That is, file availabilities resulting from the swaps can be calculated without actually moving replicas between devices. Alternatively, different evaluation methodologies may be used that do require actual swapping of the files.</p>
<p id="p-0055" num="0054">The availability of a file is a function of the availability of the devices on which replicas of the file are stored. The availability of a device can be calculated in a variety of different manners. In one implementation, the availability of a device refers to how often the device is available to (accessible by) other devices in the file system. Thus, for example, the device is available if it is running, is coupled to the network, and is functioning correctly. If the device is not running (for example, has been turned off), is not coupled to the network, has experienced a software and/or hardware crash, etc., the device is not available.</p>
<p id="p-0056" num="0055">In one implementation, each directory group calculates the availability of each device on which a replica of a file managed by the directory group is stored. The directory group sends, at regular or irregular intervals, a communication or request that requires the other device to respond. The communication or request sent to the other device can take any of a wide variety of forms, such as a conventional “pinging” of the other device. If a response is received from the other device, then the other device is determined to be available at that time. If a response is not received from the other device, then the other device is determined to be not available at that time. Based on these determinations of available and not available, the device availability can be readily calculated.</p>
<p id="p-0057" num="0056">The availability of a file is then calculated by considering the availability of each device on which a replica of the file is stored. For each device on which a replica of the file is stored, a value is generated that reflects the availability of the device. In one implementation, this value is generated by taking the negative logarithm of the fraction of time that the device is not available. This value then reflects the number of “nines” in the decimal expansion of the available time for the device. For example, if a device is available 99% of the time, it is not available 1% or 0.01 of the time. The negative logarithm of 0.01 is 2 (i.e., −log(0.01)=2), which is the number of nines in the fraction of time the device is available (i.e., two nines).</p>
<p id="p-0058" num="0057">Once this value is calculated for each device on which a replica of the file is stored, the values calculated for the devices can be combined by summing the values. This sum is the availability of the file. By way of example, assume that device <b>280</b> of <figref idref="DRAWINGS">FIG. 5</figref> is available 99% of the time, device <b>282</b> is available 90% of the time, and device <b>284</b> is available 43% of the time. The availability of file A would be 3.24 (2+1+0.24). Thus, it can be seen that the file availabilities can be calculated based on the device availabilities without having to actually copy replicas between devices.</p>
<p id="p-0059" num="0058">Table I below illustrates example availabilities of file A and file B for the various swaps (<b>300</b>-<b>316</b>), assuming device <b>280</b> is available 99% of the time (with −log(0.01)=2), device <b>282</b> is available 90% of the time (with −log(0.1)=1), device <b>284</b> available 45% of the time (with −log(0.55)=0.26), device <b>292</b> is available 99.9% of the time (with −log(0.001)=3), device <b>294</b> is available 99.99% of the time (with −log(0.0001)=4), and device <b>296</b> is available 84% of the time (with −log(0.16)=0.8). The absolute value of the difference between these file availabilities is also shown in Table I.</p>
<p id="p-0060" num="0059">
<tables id="TABLE-US-00001" num="00001">
<table frame="none" colsep="0" rowsep="0">
<tgroup align="left" colsep="0" rowsep="0" cols="5">
<colspec colname="offset" colwidth="14pt" align="left"/>
<colspec colname="1" colwidth="28pt" align="center"/>
<colspec colname="2" colwidth="70pt" align="center"/>
<colspec colname="3" colwidth="42pt" align="center"/>
<colspec colname="4" colwidth="63pt" align="center"/>
<thead>
<row>
<entry/>
<entry namest="offset" nameend="4" rowsep="1">TABLE I</entry>
</row>
<row>
<entry/>
<entry namest="offset" nameend="4" align="center" rowsep="1"/>
</row>
<row>
<entry/>
<entry/>
<entry>File A</entry>
<entry>File B</entry>
<entry>Absolute</entry>
</row>
<row>
<entry/>
<entry>Swap</entry>
<entry>Availability</entry>
<entry>Availability</entry>
<entry>Difference</entry>
</row>
<row>
<entry/>
<entry namest="offset" nameend="4" align="center" rowsep="1"/>
</row>
</thead>
<tbody valign="top">
<row>
<entry/>
<entry>300</entry>
<entry>4.26</entry>
<entry>6.80</entry>
<entry>2.54</entry>
</row>
<row>
<entry/>
<entry>302</entry>
<entry>5.26</entry>
<entry>5.80</entry>
<entry>0.54</entry>
</row>
<row>
<entry/>
<entry>304</entry>
<entry>2.06</entry>
<entry>9.00</entry>
<entry>6.94</entry>
</row>
<row>
<entry/>
<entry>306</entry>
<entry>5.26</entry>
<entry>5.80</entry>
<entry>0.54</entry>
</row>
<row>
<entry/>
<entry>308</entry>
<entry>6.26</entry>
<entry>4.80</entry>
<entry>1.46</entry>
</row>
<row>
<entry/>
<entry>310</entry>
<entry>3.06</entry>
<entry>8.00</entry>
<entry>4.94</entry>
</row>
<row>
<entry/>
<entry>312</entry>
<entry>6.00</entry>
<entry>5.06</entry>
<entry>0.94</entry>
</row>
<row>
<entry/>
<entry>314</entry>
<entry>7.00</entry>
<entry>4.06</entry>
<entry>2.94</entry>
</row>
<row>
<entry/>
<entry>316</entry>
<entry>3.80</entry>
<entry>7.26</entry>
<entry>3.46</entry>
</row>
<row>
<entry/>
<entry namest="offset" nameend="4" align="center" rowsep="1"/>
</row>
</tbody>
</tgroup>
</table>
</tables>
</p>
<p id="p-0061" num="0060">The original file availability for file A (without swapping any replicas) is 3.26, and the original file availability for file B (without swapping any replicas) is 7.80. Multiple swaps <b>300</b>-<b>316</b> could result in an improved combined file availability between the two files—the absolute difference between the original file availability for file A and file B is 4.54, so any swap that results in an absolute difference less than 4.54 is an improvement (i.e., swaps <b>300</b>, <b>302</b>, <b>306</b>, <b>308</b>, <b>312</b>, <b>314</b>, and <b>316</b>). Swaps <b>304</b> and <b>310</b> both reduce file availability. The greatest improvement of swaps <b>300</b>-<b>316</b> is from swaps <b>302</b> and <b>306</b>, each of which result in file availabilities for file A and file B having an absolute difference of 0.54. One of these swaps is selected (e.g., randomly) in act <b>264</b> and performed.</p>
<p id="p-0062" num="0061">Various other factors may also be considered in making the determination of which (if any) of swaps <b>300</b>-<b>316</b> to perform. For example, there may be insufficient storage space on one of the files to store a particular replica, in which case a swap will not be performed that involves storing a replica to a device having insufficient storage space (e.g., if the replicas of file A are much larger than the replicas of file B, one of the devices <b>292</b>, <b>294</b>, or <b>296</b> may not have sufficient storage space to store a replica of file A). By way of another example, it may be desirable to not have replicas of the same file stored on devices owned by the same person/entity, in which case a swap will not be performed that involves storing a replica of a file to a device owned by a person/entity that already has a replica of the file stored thereon.</p>
<p id="p-0063" num="0062">In the examples above, the files have the same number of replicas. Alternatively, different files may have different numbers of replicas. By way of another example, the file system may be configured to have an overall replication factor of 3.5, so roughly half of the files would have three replicas each and roughly half of the files would have four replicas each.</p>
<p id="p-0064" num="0063">Thus, it can be seen that modules and techniques described herein are readily scalable as they are not dependent on the overall number of devices in the file system (rather, the directory groups initially place and subsequently swap replicas based on devices storing replicas of files maintained by the directory groups not all devices in the system). Additionally, the modules and techniques described herein operate in a distributed manner without the need for a central control to coordinate either initial replica placement or subsequent placement improvement. Furthermore, the modules and techniques described herein operate in an iterative manner, allowing changes to be made swap-by-swap rather than requiring placement decisions for all replicas in the file system to be made at a single time. This further allows the placement to be adaptive to changes in the file system, such as addition or removal of devices, increases or decreases in the number of replicas for a file(s), and so forth.</p>
<p id="p-0065" num="0064"><figref idref="DRAWINGS">FIG. 6</figref> illustrates logical components of an exemplary computing device <b>320</b> that is representative of any one of the devices <b>102</b> of <figref idref="DRAWINGS">FIG. 1</figref>, devices <b>122</b>-<b>126</b> of <figref idref="DRAWINGS">FIG. 2</figref> that participate in the distributed file system <b>160</b>, or devices <b>280</b>, <b>282</b>, <b>284</b>, <b>292</b>, <b>294</b>, or <b>296</b> of <figref idref="DRAWINGS">FIG. 5</figref>. Computing device <b>320</b> includes a server component <b>322</b>, a client component <b>324</b>, a memory <b>326</b>, a mass storage device <b>328</b>, and a distributed file system interface <b>330</b>. Computing device <b>320</b> also typically includes additional components (e.g., a processor), however these additional components have not been shown in <figref idref="DRAWINGS">FIG. 6</figref> so as not to clutter the drawings. A more general description of a computer architecture with various hardware and software components is described below with reference to <figref idref="DRAWINGS">FIG. 7</figref>.</p>
<p id="p-0066" num="0065">Memory <b>326</b> can be any of a wide variety of conventional volatile and/or nonvolatle memories, such as RAM, ROM, Flash memory, and so on. Mass storage device <b>328</b> can be any of a wide variety of conventional nonvolatile storage devices, such as a magnetic disk, optical disk, Flash memory, and so forth. Mass storage device <b>328</b> is partitioned into a distributed system portion and a local portion. Although only one mass storage device <b>328</b> is illustrated in <figref idref="DRAWINGS">FIG. 6</figref>, computing device <b>320</b> may include multiple storage devices <b>328</b> (of different types, or alternatively all of the same type).</p>
<p id="p-0067" num="0066">Computing device <b>320</b> is intended to be used in a serverless distributed file system, and as such includes both a server component <b>322</b> and client component <b>324</b>. Server component <b>322</b> handles requests when device <b>320</b> is responding to a request involving a file or directory entry stored (or to be stored) in storage device <b>328</b>, while client component <b>324</b> handles the issuance of requests by device <b>320</b> for files or directories stored (or to be stored) in the distributed file system. Client component <b>324</b> and server component <b>322</b> operate independently of one another. Thus, situations can arise where the serverless distributed file system <b>160</b> causes files being stored by client component <b>324</b> to be stored in mass storage device <b>328</b> by server component <b>322</b>.</p>
<p id="p-0068" num="0067">Client component <b>324</b> includes a storage and retrieval control module <b>332</b>, which along with interface <b>330</b>, manages access to the serverless distributed file system <b>160</b> for the creation, storage, retrieval, reading, writing, modifying, and verifying of files and directories on behalf of computing device <b>320</b>. Control module <b>332</b> uses a file encryption module <b>334</b> to encrypt files and a directory encryption module <b>336</b> to encrypt file and directory names in directory entries.</p>
<p id="p-0069" num="0068">The server component <b>322</b> includes a distributed system control module <b>340</b> that manages access to the encrypted files <b>338</b>. It communicates with mass storage device <b>328</b> to store and retrieve encrypted files <b>338</b>. Distributed system control module <b>340</b> also maintains a record of the directory entries (not shown) in memory <b>326</b> and/or mass storage device <b>328</b> that are stored at computing device <b>320</b> (or alternatively that are stored elsewhere in the serverless distributed file system).</p>
<p id="p-0070" num="0069">In situations where computing device <b>320</b> manages a directory group, server component <b>322</b> also includes a directory group control module <b>342</b>. Directory group control module <b>342</b> manages the various subtrees that computing device <b>320</b> is responsible for, and also includes an initial placement module <b>344</b> and a replica swap module <b>346</b>. Initial placement module <b>344</b> determines the initial placement for new replicas as discussed above, while replica swap module <b>346</b> performs the placement improvement process as discussed above.</p>
<p id="p-0071" num="0070">In the discussions above, reference is made to files being encrypted. In some systems, files are encrypted prior to being replicated and thus the replicas being placed in the discussions above are encrypted. In other systems, however, the files need not be encrypted prior to being replicated and un-encrypted replicas are placed by the above-described modules and techniques.</p>
<p id="p-0072" num="0071"><figref idref="DRAWINGS">FIG. 7</figref> illustrates a more general computer environment <b>400</b>. The computer environment <b>400</b> is only one example of a computing environment and is not intended to suggest any limitation as to the scope of use or functionality of the computer and network architectures. Neither should the computer environment <b>400</b> be interpreted as having any requirement regarding the inclusion (or exclusion) of any components or the coupling or combination of components illustrated in the exemplary computer environment <b>400</b>.</p>
<p id="p-0073" num="0072">Computer environment <b>400</b> includes a general-purpose computing device in the form of a computer <b>402</b>. The components of computer <b>402</b> can include, but are not limited to, one or more processors or processing units <b>404</b>, a system memory <b>406</b>, and a system bus <b>408</b> that couples various system components including the processor <b>404</b> to the system memory <b>406</b>.</p>
<p id="p-0074" num="0073">The system bus <b>408</b> represents one or more of any of several types of bus structures, including a memory bus or memory controller, a peripheral bus, an accelerated graphics port, and a processor or local bus using any of a variety of bus architectures. By way of example, such architectures can include an Industry Standard Architecture (ISA) bus, a Micro Channel Architecture (MCA) bus, an Enhanced ISA (EISA) bus, a Video Electronics Standards Association (VESA) local bus, and a Peripheral Component Interconnects (PCI) bus also known as a Mezzanine bus.</p>
<p id="p-0075" num="0074">Computer <b>402</b> typically includes a variety of computer readable media. Such media can be any available media that is accessible by computer <b>402</b> and includes both volatile and non-volatile media, removable and non-removable media.</p>
<p id="p-0076" num="0075">The system memory <b>406</b> includes computer readable media in the form of volatile memory, such as random access memory (RAM) <b>410</b>, and/or non-volatile memory, such as read only memory (ROM) <b>412</b>. A basic input/output system (BIOS) <b>414</b>, containing the basic routines that help to transfer information between elements within computer <b>402</b>, such as during start-up, is stored in ROM <b>412</b>. RAM <b>410</b> typically contains data and/or program modules that are immediately accessible to and/or presently operated on by the processing unit <b>404</b>.</p>
<p id="p-0077" num="0076">Computer <b>402</b> may also include other removable/non-removable, volatile/non-volatile computer storage media. By way of example, <figref idref="DRAWINGS">FIG. 7</figref> illustrates a hard disk drive <b>416</b> for reading from and writing to a non-removable, non-volatile magnetic media (not shown), a magnetic disk drive <b>418</b> for reading from and writing to a removable, non-volatile magnetic disk <b>420</b> (e.g., a “floppy disk”), and an optical disk drive <b>422</b> for reading from and/or writing to a removable, non-volatile optical disk <b>424</b> such as a CD-ROM, DVD-ROM, or other optical media. The hard disk drive <b>416</b>, magnetic disk drive <b>418</b>, and optical disk drive <b>422</b> are each connected to the system bus <b>408</b> by one or more data media interfaces <b>426</b>. Alternatively, the hard disk drive <b>416</b>, magnetic disk drive <b>418</b>, and optical disk drive <b>422</b> can be connected to the system bus <b>408</b> by one or more interfaces (not shown).</p>
<p id="p-0078" num="0077">The disk drives and their associated computer-readable media provide non-volatile storage of computer readable instructions, data structures, program modules, and other data for computer <b>402</b>. Although the example illustrates a hard disk <b>416</b>, a removable magnetic disk <b>420</b>, and a removable optical disk <b>424</b>, it is to be appreciated that other types of computer readable media which can store data that is accessible by a computer, such as magnetic cassettes or other magnetic storage devices, flash memory cards, CD-ROM, digital versatile disks (DVD) or other optical storage, random access memories (RAM), read only memories (ROM), electrically erasable programmable read-only memory (EEPROM), and the like, can also be utilized to implement the exemplary computing system and environment.</p>
<p id="p-0079" num="0078">Any number of program modules can be stored on the hard disk <b>416</b>, magnetic disk <b>420</b>, optical disk <b>424</b>, ROM <b>412</b>, and/or RAM <b>410</b>, including by way of example, an operating system <b>426</b>, one or more application programs <b>428</b>, other program modules <b>430</b>, and program data <b>432</b>. Each of such operating system <b>426</b>, one or more application programs <b>428</b>, other program modules <b>430</b>, and program data <b>432</b> (or some combination thereof) may implement all or part of the resident components that support the distributed file system.</p>
<p id="p-0080" num="0079">A user can enter commands and information into computer <b>402</b> via input devices such as a keyboard <b>434</b> and a pointing device <b>436</b> (e.g., a “mouse”). Other input devices <b>438</b> (not shown specifically) may include a microphone, joystick, game pad, satellite dish, serial port, scanner, and/or the like. These and other input devices are connected to the processing unit <b>404</b> via input/output interfaces <b>440</b> that are coupled to the system bus <b>408</b>, but may be connected by other interface and bus structures, such as a parallel port, game port, or a universal serial bus (USB).</p>
<p id="p-0081" num="0080">A monitor <b>442</b> or other type of display device can also be connected to the system bus <b>408</b> via an interface, such as a video adapter <b>444</b>. In addition to the monitor <b>442</b>, other output peripheral devices can include components such as speakers (not shown) and a printer <b>446</b> which can be connected to computer <b>402</b> via the input/output interfaces <b>440</b>.</p>
<p id="p-0082" num="0081">Computer <b>402</b> can operate in a networked environment using logical connections to one or more remote computers, such as a remote computing device <b>448</b>. By way of example, the remote computing device <b>448</b> can be a personal computer, portable computer, a server, a router, a network computer, a peer device or other common network node, and the like. The remote computing device <b>448</b> is a illustrated as a portable computer that can include many or all of the elements and features described herein relative to computer <b>402</b>.</p>
<p id="p-0083" num="0082">Logical connections between computer <b>402</b> and the remote computer <b>448</b> are depicted as a local area network (LAN) <b>450</b> and a general wide area network (WAN) <b>452</b>. Such networking environments are commonplace in offices, enterprise-wide computer networks, intranets, and the Internet.</p>
<p id="p-0084" num="0083">When implemented in a LAN networking environment, the computer <b>402</b> is connected to a local network <b>450</b> via a network interface or adapter <b>454</b>. When implemented in a WAN networking environment, the computer <b>402</b> typically includes a modem <b>456</b> or other means for establishing communications over the wide network <b>452</b>. The modem <b>456</b>, which can be internal or external to computer <b>402</b>, can be connected to the system bus <b>408</b> via the input/output interfaces <b>440</b> or other appropriate mechanisms. It is to be appreciated that the illustrated network connections are exemplary and that other means of establishing communication link(s) between the computers <b>402</b> and <b>448</b> can be employed.</p>
<p id="p-0085" num="0084">In a networked environment, such as that illustrated with <figref idref="DRAWINGS">FIG. 2</figref>, program modules depicted relative to the computer <b>402</b>, or portions thereof, may be stored in a remote memory storage device. By way of example, remote application programs <b>458</b> reside on a memory device of remote computer <b>448</b>. For purposes of illustration, application programs and other executable program components such as the operating system are illustrated herein as discrete blocks, although it is recognized that such programs and components reside at various times in different storage components of the computing device <b>402</b>, and are executed by the data processor(s) of the computer.</p>
<p id="p-0086" num="0085">Various modules and techniques may be described herein in the general context of computer-executable instructions, such as program modules, executed by one or more computers or other devices. Generally, program modules include routines, programs, objects, components, data structures, etc. that perform particular tasks or implement particular abstract data types. Typically, the functionality of the program modules may be combined or distributed as desired in various embodiments.</p>
<p id="p-0087" num="0086">An implementation of these modules and techniques may be stored on or transmitted across some form of computer readable media. Computer readable media can be any available media that can be accessed by a computer By way of example, and not limitation, computer readable media may comprise “computer storage media” and “communications media.”</p>
<p id="p-0088" num="0087">“Computer storage media” include volatile and non-volatile, removable and non-removable media implemented in any method or technology for storage of information such as computer readable instructions, data structures, program modules, or other data. Computer storage media include, but are not limited to, RAM, ROM, EEPROM, flash memory or other memory technology, CD-ROM, digital versatile disks (DVD) or other optical storage, magnetic cassettes, magnetic tape, magnetic disk storage or other magnetic storage devices, or any other medium which can be used to store the desired information and which can be accessed by a computer.</p>
<p id="p-0089" num="0088">“Communication media” typically embody computer readable instructions, data structures, program modules, or other data in a modulated data signal, such as carrier wave or other transport mechanism. Communication media also include any information delivery media. The term “modulated data signal” means a signal that has one or more of its characteristics set or changed in such a manner as to encode information in the signal. By way of example, and not limitation, communication media include wired media such as a wired network or direct-wired connection, and wireless media such as acoustic, RF, infrared, and other wireless media. Combinations of any of the above are also included within the scope of computer readable media.</p>
<heading id="h-0007" level="1">CONCLUSION</heading>
<p id="p-0090" num="0089">Although the description above uses language that is specific to structural features and/or methodological acts, it is to be understood that the invention defined in the appended claims is not limited to the specific features or acts described. Rather, the specific features and acts are disclosed as exemplary forms of implementing the invention.</p>
<?DETDESC description="Detailed Description" end="tail"?>
</description>
<us-claim-statement>The invention claimed is:</us-claim-statement>
<claims id="claims">
<claim id="CLM-00001" num="00001">
<claim-text>1. A method for determining location to store object replicas, the method comprising:
<claim-text>receiving an indication of a homeless replica of an object, wherein the object has a plurality of replicas including the homeless replica;</claim-text>
<claim-text>determining an initial placement for the homeless replica, wherein the initial placement is one of a plurality of devices in a system;</claim-text>
<claim-text>evaluating, on an object by object basis, whether any replicas of the object can be swapped with one of a plurality of replicas of an other object and not reduce a combined object availability of the two objects, wherein the evaluating comprises determining, for each possible swapping of replicas of objects, an object availability for each object, and checking whether any of the possible swappings result in a combined object availability of two objects that is greater than other combined object availability prior to the evaluating; and</claim-text>
<claim-text>swapping a replica of the object with the one of the plurality of replicas of the other object, wherein the swapping is based on the evaluating and performed only if the swapping does not reduce the combined object availability of the two objects, wherein the replica of the object is stored on a first computing device and wherein the swapping the replicas comprises moving the replica of the object to a second computing device, storing the moved replica of the object in the second computing device and moving the one of the plurality of replicas of the other object to the first computing device, wherein the swapping results in decreasing an availability of the object and increasing an availability of the other object.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00002" num="00002">
<claim-text>2. A method as recited in <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the object comprises a file.</claim-text>
</claim>
<claim id="CLM-00003" num="00003">
<claim-text>3. A method as recited in <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the object comprises a plurality of files.</claim-text>
</claim>
<claim id="CLM-00004" num="00004">
<claim-text>4. A method as recited in <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the object comprises a portion of a file.</claim-text>
</claim>
<claim id="CLM-00005" num="00005">
<claim-text>5. A method as recited in <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the object comprises a directory.</claim-text>
</claim>
<claim id="CLM-00006" num="00006">
<claim-text>6. A method as recited in <claim-ref idref="CLM-00001">claim 1</claim-ref>, implemented by a computing device and further comprising selecting, prior to the evaluating, as the object one of a plurality of objects that the computing device is responsible for maintaining.</claim-text>
</claim>
<claim id="CLM-00007" num="00007">
<claim-text>7. A method as recited in <claim-ref idref="CLM-00006">claim 6</claim-ref>, wherein the selecting comprises selecting the one of the plurality of objects that has lowest object availability.</claim-text>
</claim>
<claim id="CLM-00008" num="00008">
<claim-text>8. One or more computer readable storage media having stored thereon a plurality of instructions that, when executed by one or more processors of a computing device, causes the one or more processors to perform acts comprising:
<claim-text>working, in conjunction with one or more other processors of by other computing device, to determine whether a replica of a file managed by the computing device and a replica of an other file managed by the other computing device can be swapped with one another to bring an availability of the file and an availability of the other file closer, wherein said working comprises determining, for the replicas, an availability for each replica and checking whether the swapping results in a combined availability of two replicas that is greater than other combined availability if the files were not to be swapped; and</claim-text>
<claim-text>swapping the replica of the file and the replica of the other file only if the swapping brings the availability of the file and the availability of the other file closer, wherein said swapping comprises communicating with a first device on which the replica of the file is stored and a second device on which the replica of the other file is stored to have the first device transfer the replica of the file to the second device and delete the replica of the file on the first device, and to have the second device transfer the replica of the other file to the first device and delete the replica of the other file on the second device, wherein the swapping results in decreasing an availability of the replica of the file and increasing the availability of the replica of the other file.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00009" num="00009">
<claim-text>9. One or more computer readable storage media as recited in <claim-ref idref="CLM-00008">claim 8</claim-ref>, wherein the plurality of instructions further cause the one or more processors to perform acts comprising:
<claim-text>receiving an indication of a homeless replica of the file; and</claim-text>
<claim-text>determining an initial placement, on one of a plurality of additional computing devices, for the homeless replica.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00010" num="00010">
<claim-text>10. One or more computer readable storage media as recited in <claim-ref idref="CLM-00009">claim 9</claim-ref>, wherein the plurality of additional computing devices exclude any computing device on which a replica of the file is already stored.</claim-text>
</claim>
<claim id="CLM-00011" num="00011">
<claim-text>11. One or more computer readable storage media as recited in <claim-ref idref="CLM-00008">claim 8</claim-ref>, wherein the file is selected randomly from a plurality of files managed by the computing device, and wherein the other file is selected randomly from another plurality of files managed by the other computing device.</claim-text>
</claim>
<claim id="CLM-00012" num="00012">
<claim-text>12. One or more computer readable storage media as recited in <claim-ref idref="CLM-00008">claim 8</claim-ref>, wherein the one or more processors of a computing device and the one or more other processors of another computing device are the same processors of a same computing device.</claim-text>
</claim>
</claims>
</us-patent-grant>
