<us-patent-grant lang="EN" dtd-version="v4.2 2006-08-23" file="US07299400-20071120.XML" status="PRODUCTION" id="us-patent-grant" country="US" date-produced="20071106" date-publ="20071120">
<us-bibliographic-data-grant>
<publication-reference>
<document-id>
<country>US</country>
<doc-number>07299400</doc-number>
<kind>B2</kind>
<date>20071120</date>
</document-id>
</publication-reference>
<application-reference appl-type="utility">
<document-id>
<country>US</country>
<doc-number>11057150</doc-number>
<date>20050215</date>
</document-id>
</application-reference>
<us-application-series-code>11</us-application-series-code>
<priority-claims>
<priority-claim sequence="01" kind="national">
<country>JP</country>
<doc-number>2004-053317</doc-number>
<date>20040227</date>
</priority-claim>
</priority-claims>
<us-term-of-grant>
<us-term-extension>503</us-term-extension>
</us-term-of-grant>
<classifications-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>G</section>
<class>11</class>
<subclass>C</subclass>
<main-group>29</main-group>
<subgroup>00</subgroup>
<symbol-position>F</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20071120</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
</classifications-ipcr>
<classification-national>
<country>US</country>
<main-classification>714764</main-classification>
</classification-national>
<invention-title id="d0e71">Error correction circuit</invention-title>
<references-cited>
<citation>
<patcit num="00001">
<document-id>
<country>US</country>
<doc-number>4794597</doc-number>
<kind>A</kind>
<name>Ooba et al.</name>
<date>19881200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>714703</main-classification></classification-national>
</citation>
<citation>
<patcit num="00002">
<document-id>
<country>US</country>
<doc-number>5341379</doc-number>
<kind>A</kind>
<name>Crisp</name>
<date>19940800</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>714709</main-classification></classification-national>
</citation>
<citation>
<patcit num="00003">
<document-id>
<country>US</country>
<doc-number>5978953</doc-number>
<kind>A</kind>
<name>Olarig</name>
<date>19991100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>714768</main-classification></classification-national>
</citation>
<citation>
<patcit num="00004">
<document-id>
<country>US</country>
<doc-number>7069482</doc-number>
<kind>B1</kind>
<name>Callahan</name>
<date>20060600</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>714710</main-classification></classification-national>
</citation>
<citation>
<patcit num="00005">
<document-id>
<country>JP</country>
<doc-number>2000-020409</doc-number>
<date>20000100</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
</references-cited>
<number-of-claims>20</number-of-claims>
<us-exemplary-claim>1</us-exemplary-claim>
<us-field-of-classification-search>
<classification-national>
<country>US</country>
<main-classification>714764</main-classification>
</classification-national>
</us-field-of-classification-search>
<figures>
<number-of-drawing-sheets>5</number-of-drawing-sheets>
<number-of-figures>6</number-of-figures>
</figures>
<us-related-documents>
<related-publication>
<document-id>
<country>US</country>
<doc-number>20050204264</doc-number>
<kind>A1</kind>
<date>20050915</date>
</document-id>
</related-publication>
</us-related-documents>
<parties>
<applicants>
<applicant sequence="001" app-type="applicant-inventor" designation="us-only">
<addressbook>
<last-name>Yusa</last-name>
<first-name>Atsushi</first-name>
<address>
<city>Minato-ku</city>
<country>JP</country>
</address>
</addressbook>
<nationality>
<country>JP</country>
</nationality>
<residence>
<country>JP</country>
</residence>
</applicant>
</applicants>
<agents>
<agent sequence="01" rep-type="attorney">
<addressbook>
<orgname>Rabin &amp; Berdo, P.C.</orgname>
<address>
<country>unknown</country>
</address>
</addressbook>
</agent>
</agents>
</parties>
<assignees>
<assignee>
<addressbook>
<orgname>Oki Electric Industry Co., Ltd.</orgname>
<role>03</role>
<address>
<city>Tokyo</city>
<country>JP</country>
</address>
</addressbook>
</assignee>
</assignees>
<examiners>
<primary-examiner>
<last-name>Chase</last-name>
<first-name>Shelly</first-name>
<department>2112</department>
</primary-examiner>
</examiners>
</us-bibliographic-data-grant>
<abstract id="abstract">
<p id="p-0001" num="0000">An error correction circuit includes a selected-bit reverse circuit, an ECC circuit, a checkbit generation circuit, an ECC data register, a bit-comparing circuit, and an address memory unit. The selected-bit reverse circuit includes memory data and check data from the memory unit. The ECC circuit corrects a one-bit error. The checkbit generation circuit generates checkbits. The ECC data register stores the corrected data and the checkdata. The bit-comparing circuit compares each bit between the output data A from the selected-bit reverse circuit and the output data A′ from the ECC data register. The address memory unit stores an address corresponding to the memory data when the bit-comparing circuit detects a discrepancy among the data A and the data A′. The error data memory unit writes the discrepancy information at the bit-location. The data OR circuit generates the first signal.</p>
</abstract>
<drawings id="DRAWINGS">
<figure id="Fig-EMI-D00000" num="00000">
<img id="EMI-D00000" he="259.93mm" wi="186.94mm" file="US07299400-20071120-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00001" num="00001">
<img id="EMI-D00001" he="261.37mm" wi="187.88mm" file="US07299400-20071120-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00002" num="00002">
<img id="EMI-D00002" he="213.19mm" wi="159.09mm" orientation="landscape" file="US07299400-20071120-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00003" num="00003">
<img id="EMI-D00003" he="220.90mm" wi="162.56mm" file="US07299400-20071120-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00004" num="00004">
<img id="EMI-D00004" he="241.89mm" wi="183.56mm" file="US07299400-20071120-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00005" num="00005">
<img id="EMI-D00005" he="270.00mm" wi="183.56mm" file="US07299400-20071120-D00005.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
</drawings>
<description id="description">
<?BRFSUM description="Brief Summary" end="lead"?>
<heading id="h-0001" level="1">BACKGROUND OF THE INVENTION</heading>
<p id="p-0002" num="0001">1. Field of the Invention</p>
<p id="p-0003" num="0002">The present invention generally relates to technology to improve data reliability of flash memory. More specifically, the present invention relates to technology to improve data reliability of flash memory mainly in ICs such as microcomputers having built-in flash memories.</p>
<p id="p-0004" num="0003">2. Background Information</p>
<p id="p-0005" num="0004">In conventional ICs such as microcomputers (referred to as MICOMs hereafter) that have built-in flash memories, error checking and correcting circuits (referred to as ECC circuits or EECs hereafter ) have been provided. The reason is that stored data are susceptible to change by disturbances from outside the memory when data-retention, data-write, or data-read is done. Especially, when a flash memory is used as a memory device for operation programs of MICOMs, a malfunction never fails to occur even if a CPU receives just one error bit, and then a checkbit for error checking is stored in addition to the data itself at every address in the flash memory. For example, a six-bit width checkbit is added to 32-bit width memory data.</p>
<p id="p-0006" num="0005">After receiving the memory data and checkbits, the ECC circuit conducts one-bit error correction or more-than-two-bit error checking and sends the data to the CPU. An example of this final ECC circuit is shown in Japanese Patent Application Publication 2000-20409, which is hereby incorporated by reference.</p>
<p id="p-0007" num="0006">However, a conventional ECC circuit, which adds a six-bit width checkbit to 32-bit width memory data, has a problem in that it can do one-bit error correction but not more-than-two-bit error correction. A problem arises because a malfunction occurs in a MICOM using a built-in flash memory as a memory device of the CPU programs when a more-than-two-bit error occurs.</p>
<p id="p-0008" num="0007">In view of the above, it will be apparent to those skilled in the art from this disclosure that there exists a need for an improved error correction circuit. This invention addresses this need in the art as well as other needs, which will become apparent to those skilled in the art from this disclosure.</p>
<heading id="h-0002" level="1">SUMMARY OF THE INVENTION</heading>
<p id="p-0009" num="0008">It is an object of the present invention to provide an error correction circuit that can deal with more-than-two-bit errors, solving the aforementioned problem.</p>
<p id="p-0010" num="0009">To solve the aforementioned problem, the error correction circuit of this invention includes a selected-bit reverse circuit, an ECC circuit, a checkbit generating circuit, an ECC data register, a bit-comparing circuit, an address memory, and an error information memory. The selected-bit reverse circuit reverses an error bit in output data having a memory data and a check data from the memory device, based on a first signal. The ECC circuit corrects a one-bit error in the memory data, based on the output data from the selected-bit reverse circuit. The checkbit generating circuit generates checkbits, based on the correction data outputted from the ECC circuit. The ECC data register stores the correction data and the checkbit. The bit-comparing circuit compares each bit of the output data (first data group) A from the selected bit reverse circuit with each bit of output data (second data group) A′ from the ECC data register. The address memory stores the address of the corresponding memory data when the bit comparing circuit detects a discrepancy between the data A and the data A′. The error information memory includes enough numbers of the error-bit memory circuit for the given bit-width of the data, and writes the bit-discrepancy-indicating information on the corresponding bit place. The data OR circuit conducts an OR logic operation on each group of data stored in a plurality of error data memory device and generates the first signal.</p>
<p id="p-0011" num="0010">This invention enables the more-than-two-bit error correction that cannot be conducted by conventional ECC circuits using a six-bit width checkbit to 32-bit width data. Consequently, ICs such as MICOMs installing programs in its built-in flash memory have no possibility of malfunctioning even if a more-than-two-bit error occurs, and then the IC can realize an improvement in its reliability. Furthermore, since the number of the address memory devices that stores the address of error data and the number of the data memory can be respectively and flexibly changed, the most suitable circuit capacity can be selected according to the reliability of the flash memory.</p>
<p id="p-0012" num="0011">These and other objects, features, aspects, and advantages of the present invention will become apparent to those skilled in the art from the following detailed description, which, taken in conjunction with the annexed drawings, discloses a preferred embodiment of the present invention.</p>
<?BRFSUM description="Brief Summary" end="tail"?>
<?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?>
<description-of-drawings>
<heading id="h-0003" level="1">BRIEF DESCRIPTION OF THE DRAWINGS</heading>
<p id="p-0013" num="0012">Referring now to the attached drawings which form a part of this original disclosure:</p>
<p id="p-0014" num="0013"><figref idref="DRAWINGS">FIG. 1</figref> is a view of a block diagram illustrating a basic configuration of an error checking and correction circuit ECC in accordance with a first embodiment of the present invention;</p>
<p id="p-0015" num="0014"><figref idref="DRAWINGS">FIG. 2</figref> is a view of a circuit diagram illustrating a write control circuit of the ECC circuit of <figref idref="DRAWINGS">FIG. 1</figref>;</p>
<p id="p-0016" num="0015"><figref idref="DRAWINGS">FIG. 3</figref> is a view of a circuit diagram illustrating an error-bit memory circuit of the ECC circuit of <figref idref="DRAWINGS">FIG. 1</figref>;</p>
<p id="p-0017" num="0016"><figref idref="DRAWINGS">FIG. 4</figref> is a view of a circuit diagram illustrating an address memory unit of the ECC circuit of <figref idref="DRAWINGS">FIG. 1</figref>;</p>
<p id="p-0018" num="0017"><figref idref="DRAWINGS">FIG. 5</figref> is a view of a timing chart illustrating the basic timing of the ECC circuit of <figref idref="DRAWINGS">FIG. 1</figref>; and</p>
<p id="p-0019" num="0018"><figref idref="DRAWINGS">FIG. 6</figref> is a view of a block diagram illustrating a basic configuration of an ECC circuit in accordance with a second embodiment of the present invention.</p>
</description-of-drawings>
<?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?>
<?DETDESC description="Detailed Description" end="lead"?>
<heading id="h-0004" level="1">DETAILED DESCRIPTION OF THE PREFERRED EMBODIMENTS</heading>
<p id="p-0020" num="0019">Selected embodiments of the present invention will now be explained with reference to the drawings. It will be apparent to those skilled in the art from this disclosure that the following descriptions of the embodiments of the present invention are provided for illustration only and not for the purpose of limiting the invention as defined by the appended claims and their equivalents.</p>
<heading id="h-0005" level="1">First Embodiment</heading>
<p id="p-0021" num="0020"><figref idref="DRAWINGS">FIG. 1</figref> is a block diagram illustrating the basic configuration of an ECC in accordance with a first preferred embodiment of the present invention. The ECC is composed of a CPU <b>100</b>, a flash memory <b>101</b>, a selected-bit reverse circuit <b>105</b>, an ECC <b>108</b> for one-bit error correction circuit, a flash memory data register <b>109</b>, a checkbit generation circuit <b>111</b>, an ECC data register <b>113</b> for retention of the ECC data, an address register <b>114</b> to store output addresses from the CPU <b>100</b>, a bit comparing circuit <b>115</b> to compare the output data from the ECC data register <b>113</b> with the output data from the flash memory data register <b>109</b>, a timing control circuit <b>118</b> to control the data-setting timing in each component such as the flash memory data register <b>109</b>, error data memories (error data memory unit) <b>128</b><i>a</i>-<b>128</b><i>x </i>storing error bits, address memories (address memory unit) <b>127</b><i>a</i>-<b>127</b><i>x </i>to store the address where an error occurs, a write control circuit <b>125</b> to control writing data in the aforementioned error data memories <b>128</b><i>a</i>-<b>128</b><i>x </i>and address memories <b>127</b><i>a</i>-<b>127</b><i>x</i>, and a data OR circuit <b>134</b> to conduct OR logic operations on each group of output data from the error data memories <b>128</b><i>a</i>-<b>128</b><i>x. </i></p>
<p id="p-0022" num="0021"><figref idref="DRAWINGS">FIG. 2</figref> is a diagram of the write control circuit <b>125</b>. <figref idref="DRAWINGS">FIG. 3</figref> is a diagram of the error-bit memory circuit storing the one-bit error information in the error data memories <b>128</b><i>a</i>-<b>128</b><i>x</i>. <figref idref="DRAWINGS">FIG. 4</figref> is a diagram of the circuit inside the address memories <b>127</b><i>a</i>-<b>127</b><i>x. </i></p>
<p id="p-0023" num="0022">The operation of this embodiment will now be explained as below, referring to the circuit diagrams of <figref idref="DRAWINGS">FIG. 1</figref> to <figref idref="DRAWINGS">FIG. 4</figref> and the timing chart of <figref idref="DRAWINGS">FIG. 5</figref>. During the read cycle (<b>1</b>), the CPU <b>100</b> outputs address data <b>102</b> at the timing t<b>0</b>. An address latch signal <b>121</b> from the timing control circuit <b>118</b> changes to ‘H’ level from ‘L’ level and the address data <b>102</b> are stored in the address register <b>114</b> at the rising edge of the level change. The output data change of the address register <b>114</b> is illustrated the first or top line of <figref idref="DRAWINGS">FIG. 5</figref>.</p>
<p id="p-0024" num="0023">The flash memory <b>101</b> outputs memory data <b>103</b> and checkbit data <b>104</b> at the timing of t<b>2</b> in <figref idref="DRAWINGS">FIG. 5</figref> upon receiving the address data <b>102</b>. The memory data are the contents of the memory itself and the checkbit data represent the checkbit. In this case, the memory data <b>103</b> and the checkbit data are supposed to be data A and the memory data <b>103</b> are supposed to have a one-bit error.</p>
<p id="p-0025" num="0024">These output data are inputted to the selected-bit reverse circuit <b>105</b>, which outputs output data <b>106</b> and <b>107</b> corresponding to data <b>103</b> and <b>104</b>, based on the contents of a reverse-bit selection signal <b>135</b>. At the initial stage in this case, the error data or its address data are not stored, and then any address matching signal <b>131</b> (<b>131</b><i>a</i>, <b>131</b><i>b</i>, - - - , <b>133</b><i>x</i>) is ‘L’ level (address is mismatched: refer to <figref idref="DRAWINGS">FIG. 4</figref>) and any output signal <b>133</b> (<b>133</b><i>a</i>, <b>133</b><i>b</i>, - - - , <b>133</b><i>x</i>) is ‘L’ level, too (refer to <figref idref="DRAWINGS">FIG. 3</figref>). Consequently, every bit of the reverse-bit selection signal <b>135</b> having the memory data and the checkbit changes to be level ‘L’. As the result, the output data <b>106</b> and <b>107</b> of the selected-bit reverse circuit <b>105</b> are not reversed and then become the same data to output data A.</p>
<p id="p-0026" num="0025">The ECC circuit <b>108</b> inputs the output data <b>106</b> and <b>107</b> of the selected-bit reverse circuit <b>105</b> and outputs correction data <b>110</b> after correcting one-bit error in the data. These correction data <b>110</b> are taken into the CPU <b>100</b> at the write cycle(<b>1</b>).</p>
<p id="p-0027" num="0026">The data latch signal <b>119</b> changes to level ‘H’ from level ‘L’ at the timing t<b>3</b> and at its rising edge the contents of the output data <b>106</b> and <b>107</b> are inputted into the flash memory <b>109</b>, then the output data <b>116</b> becomes data A.</p>
<p id="p-0028" num="0027">The checkbit generation circuit <b>111</b> outputs checkbit <b>112</b> made of the given numbers of a bit (for example six bits), after receiving the correction data <b>110</b> from the ECC circuit <b>108</b>. For example, this checkbit is generated from the correction data <b>110</b>, using a formula as below.</p>
<p id="p-0029" num="0028">
<maths id="MATH-US-00001" num="00001">
<math overflow="scroll">
  <mrow>
    <mrow>
      <mo>(</mo>
      <mtable>
        <mtr>
          <mtd>
            <mi>Y6</mi>
          </mtd>
        </mtr>
        <mtr>
          <mtd>
            <mi>Y5</mi>
          </mtd>
        </mtr>
        <mtr>
          <mtd>
            <mi>Y4</mi>
          </mtd>
        </mtr>
        <mtr>
          <mtd>
            <mi>Y3</mi>
          </mtd>
        </mtr>
        <mtr>
          <mtd>
            <mi>Y2</mi>
          </mtd>
        </mtr>
        <mtr>
          <mtd>
            <mi>Y1</mi>
          </mtd>
        </mtr>
      </mtable>
      <mo>)</mo>
    </mrow>
    <mo>=</mo>
    <mrow>
      <mrow>
        <mo>(</mo>
        <mtable>
          <mtr>
            <mtd>
              <mn>11111100000000000000000000000000</mn>
            </mtd>
          </mtr>
          <mtr>
            <mtd>
              <mn>00000011111111111111100000000000</mn>
            </mtd>
          </mtr>
          <mtr>
            <mtd>
              <mn>00000011111111000000011111110000</mn>
            </mtd>
          </mtr>
          <mtr>
            <mtd>
              <mn>11100011110000111100011110001110</mn>
            </mtd>
          </mtr>
          <mtr>
            <mtd>
              <mn>10011011001100110011011001101101</mn>
            </mtd>
          </mtr>
          <mtr>
            <mtd>
              <mn>01010110101010101010110101011011</mn>
            </mtd>
          </mtr>
        </mtable>
        <mo>)</mo>
      </mrow>
      <mo>⁢</mo>
      <mrow>
        <mo>(</mo>
        <mtable>
          <mtr>
            <mtd>
              <mi>X32</mi>
            </mtd>
          </mtr>
          <mtr>
            <mtd>
              <mi>X31</mi>
            </mtd>
          </mtr>
          <mtr>
            <mtd>
              <mi>…</mi>
            </mtd>
          </mtr>
          <mtr>
            <mtd>
              <mi>…</mi>
            </mtd>
          </mtr>
          <mtr>
            <mtd>
              <mi>X2</mi>
            </mtd>
          </mtr>
          <mtr>
            <mtd>
              <mi>X1</mi>
            </mtd>
          </mtr>
        </mtable>
        <mo>)</mo>
      </mrow>
    </mrow>
  </mrow>
</math>
</maths>
<maths id="MATH-US-00001-2" num="00001.2">
<math overflow="scroll">
  <mtable>
    <mtr>
      <mtd>
        <mrow>
          <mi>Y6</mi>
          <mo>=</mo>
          <mi/>
          <mo>⁢</mo>
          <mrow>
            <mrow>
              <mi>X27</mi>
              <mo>⁡</mo>
              <mrow>
                <mo>(</mo>
                <mo>+</mo>
                <mo>)</mo>
              </mrow>
            </mrow>
            <mo>⁢</mo>
            <mrow>
              <mi>X28</mi>
              <mo>⁡</mo>
              <mrow>
                <mo>(</mo>
                <mo>+</mo>
                <mo>)</mo>
              </mrow>
            </mrow>
            <mo>⁢</mo>
            <mrow>
              <mi>X29</mi>
              <mo>⁡</mo>
              <mrow>
                <mo>(</mo>
                <mo>+</mo>
                <mo>)</mo>
              </mrow>
            </mrow>
            <mo>⁢</mo>
            <mrow>
              <mi>X30</mi>
              <mo>⁡</mo>
              <mrow>
                <mo>(</mo>
                <mo>+</mo>
                <mo>)</mo>
              </mrow>
            </mrow>
            <mo>⁢</mo>
            <mrow>
              <mi>X31</mi>
              <mo>⁡</mo>
              <mrow>
                <mo>(</mo>
                <mo>+</mo>
                <mo>)</mo>
              </mrow>
            </mrow>
            <mo>⁢</mo>
            <mi>X32</mi>
          </mrow>
        </mrow>
      </mtd>
    </mtr>
    <mtr>
      <mtd>
        <mrow>
          <mi>Y5</mi>
          <mo>=</mo>
          <mi/>
          <mo>⁢</mo>
          <mrow>
            <mi>X12</mi>
            <mo>⁢</mo>
            <mrow>
              <mo>(</mo>
              <mo>+</mo>
              <mo>)</mo>
            </mrow>
            <mo>⁢</mo>
            <mrow>
              <mi>X13</mi>
              <mo>⁡</mo>
              <mrow>
                <mo>(</mo>
                <mo>+</mo>
                <mo>)</mo>
              </mrow>
            </mrow>
            <mo>⁢</mo>
            <mrow>
              <mi>X14</mi>
              <mo>⁡</mo>
              <mrow>
                <mo>(</mo>
                <mo>+</mo>
                <mo>)</mo>
              </mrow>
            </mrow>
            <mo>⁢</mo>
            <mrow>
              <mi>X15</mi>
              <mo>⁡</mo>
              <mrow>
                <mo>(</mo>
                <mo>+</mo>
                <mo>)</mo>
              </mrow>
            </mrow>
            <mo>⁢</mo>
            <mrow>
              <mi>X16</mi>
              <mo>⁡</mo>
              <mrow>
                <mo>(</mo>
                <mo>+</mo>
                <mo>)</mo>
              </mrow>
            </mrow>
            <mo>⁢</mo>
            <mrow>
              <mi>X17</mi>
              <mo>⁡</mo>
              <mrow>
                <mo>(</mo>
                <mo>+</mo>
                <mo>)</mo>
              </mrow>
            </mrow>
            <mo>⁢</mo>
            <mrow>
              <mi>X18</mi>
              <mo>⁡</mo>
              <mrow>
                <mo>(</mo>
                <mo>+</mo>
                <mo>)</mo>
              </mrow>
            </mrow>
            <mo>⁢</mo>
            <mrow>
              <mi>X19</mi>
              <mo>⁡</mo>
              <mrow>
                <mo>(</mo>
                <mo>+</mo>
                <mo>)</mo>
              </mrow>
            </mrow>
          </mrow>
        </mrow>
      </mtd>
    </mtr>
    <mtr>
      <mtd>
        <mrow>
          <mi/>
          <mo>⁢</mo>
          <mrow>
            <mrow>
              <mi>X20</mi>
              <mo>⁡</mo>
              <mrow>
                <mo>(</mo>
                <mo>+</mo>
                <mo>)</mo>
              </mrow>
            </mrow>
            <mo>⁢</mo>
            <mrow>
              <mi>X21</mi>
              <mo>⁡</mo>
              <mrow>
                <mo>(</mo>
                <mo>+</mo>
                <mo>)</mo>
              </mrow>
            </mrow>
            <mo>⁢</mo>
            <mrow>
              <mi>X22</mi>
              <mo>⁡</mo>
              <mrow>
                <mo>(</mo>
                <mo>+</mo>
                <mo>)</mo>
              </mrow>
            </mrow>
            <mo>⁢</mo>
            <mrow>
              <mi>X23</mi>
              <mo>⁡</mo>
              <mrow>
                <mo>(</mo>
                <mo>+</mo>
                <mo>)</mo>
              </mrow>
            </mrow>
            <mo>⁢</mo>
            <mrow>
              <mi>X24</mi>
              <mo>⁡</mo>
              <mrow>
                <mo>(</mo>
                <mo>+</mo>
                <mo>)</mo>
              </mrow>
            </mrow>
            <mo>⁢</mo>
            <mrow>
              <mi>X25</mi>
              <mo>⁡</mo>
              <mrow>
                <mo>(</mo>
                <mo>+</mo>
                <mo>)</mo>
              </mrow>
            </mrow>
            <mo>⁢</mo>
            <mi>X26</mi>
          </mrow>
        </mrow>
      </mtd>
    </mtr>
    <mtr>
      <mtd>
        <mrow>
          <mi>Y4</mi>
          <mo>=</mo>
          <mi/>
          <mo>⁢</mo>
          <mrow>
            <mrow>
              <mi>X5</mi>
              <mo>⁡</mo>
              <mrow>
                <mo>(</mo>
                <mo>+</mo>
                <mo>)</mo>
              </mrow>
            </mrow>
            <mo>⁢</mo>
            <mrow>
              <mi>X6</mi>
              <mo>⁡</mo>
              <mrow>
                <mo>(</mo>
                <mo>+</mo>
                <mo>)</mo>
              </mrow>
            </mrow>
            <mo>⁢</mo>
            <mrow>
              <mi>X7</mi>
              <mo>⁡</mo>
              <mrow>
                <mo>(</mo>
                <mo>+</mo>
                <mo>)</mo>
              </mrow>
            </mrow>
            <mo>⁢</mo>
            <mrow>
              <mi>X8</mi>
              <mo>⁡</mo>
              <mrow>
                <mo>(</mo>
                <mo>+</mo>
                <mo>)</mo>
              </mrow>
            </mrow>
            <mo>⁢</mo>
            <mrow>
              <mi>X9</mi>
              <mo>⁡</mo>
              <mrow>
                <mo>(</mo>
                <mo>+</mo>
                <mo>)</mo>
              </mrow>
            </mrow>
            <mo>⁢</mo>
            <mrow>
              <mi>X10</mi>
              <mo>⁡</mo>
              <mrow>
                <mo>(</mo>
                <mo>+</mo>
                <mo>)</mo>
              </mrow>
            </mrow>
            <mo>⁢</mo>
            <mrow>
              <mi>X11</mi>
              <mo>⁡</mo>
              <mrow>
                <mo>(</mo>
                <mo>+</mo>
                <mo>)</mo>
              </mrow>
            </mrow>
            <mo>⁢</mo>
            <mrow>
              <mi>X19</mi>
              <mo>⁡</mo>
              <mrow>
                <mo>(</mo>
                <mo>+</mo>
                <mo>)</mo>
              </mrow>
            </mrow>
            <mo>⁢</mo>
            <mrow>
              <mi>X20</mi>
              <mo>⁡</mo>
              <mrow>
                <mo>(</mo>
                <mo>+</mo>
                <mo>)</mo>
              </mrow>
            </mrow>
          </mrow>
        </mrow>
      </mtd>
    </mtr>
    <mtr>
      <mtd>
        <mrow>
          <mi/>
          <mo>⁢</mo>
          <mrow>
            <mrow>
              <mi>X21</mi>
              <mo>⁡</mo>
              <mrow>
                <mo>(</mo>
                <mo>+</mo>
                <mo>)</mo>
              </mrow>
            </mrow>
            <mo>⁢</mo>
            <mrow>
              <mi>X22</mi>
              <mo>⁡</mo>
              <mrow>
                <mo>(</mo>
                <mo>+</mo>
                <mo>)</mo>
              </mrow>
            </mrow>
            <mo>⁢</mo>
            <mrow>
              <mi>X23</mi>
              <mo>⁡</mo>
              <mrow>
                <mo>(</mo>
                <mo>+</mo>
                <mo>)</mo>
              </mrow>
            </mrow>
            <mo>⁢</mo>
            <mrow>
              <mi>X24</mi>
              <mo>⁡</mo>
              <mrow>
                <mo>(</mo>
                <mo>+</mo>
                <mo>)</mo>
              </mrow>
            </mrow>
            <mo>⁢</mo>
            <mrow>
              <mi>X25</mi>
              <mo>⁡</mo>
              <mrow>
                <mo>(</mo>
                <mo>+</mo>
                <mo>)</mo>
              </mrow>
            </mrow>
            <mo>⁢</mo>
            <mi>X26</mi>
          </mrow>
        </mrow>
      </mtd>
    </mtr>
    <mtr>
      <mtd>
        <mrow>
          <mi>Y3</mi>
          <mo>=</mo>
          <mi/>
          <mo>⁢</mo>
          <mrow>
            <mrow>
              <mi>X2</mi>
              <mo>⁡</mo>
              <mrow>
                <mo>(</mo>
                <mo>+</mo>
                <mo>)</mo>
              </mrow>
            </mrow>
            <mo>⁢</mo>
            <mrow>
              <mi>X3</mi>
              <mo>⁡</mo>
              <mrow>
                <mo>(</mo>
                <mo>+</mo>
                <mo>)</mo>
              </mrow>
            </mrow>
            <mo>⁢</mo>
            <mrow>
              <mi>X4</mi>
              <mo>⁡</mo>
              <mrow>
                <mo>(</mo>
                <mo>+</mo>
                <mo>)</mo>
              </mrow>
            </mrow>
            <mo>⁢</mo>
            <mrow>
              <mi>X8</mi>
              <mo>⁡</mo>
              <mrow>
                <mo>(</mo>
                <mo>+</mo>
                <mo>)</mo>
              </mrow>
            </mrow>
            <mo>⁢</mo>
            <mrow>
              <mi>X9</mi>
              <mo>⁡</mo>
              <mrow>
                <mo>(</mo>
                <mo>+</mo>
                <mo>)</mo>
              </mrow>
            </mrow>
            <mo>⁢</mo>
            <mrow>
              <mi>X10</mi>
              <mo>⁡</mo>
              <mrow>
                <mo>(</mo>
                <mo>+</mo>
                <mo>)</mo>
              </mrow>
            </mrow>
            <mo>⁢</mo>
            <mrow>
              <mi>X11</mi>
              <mo>⁡</mo>
              <mrow>
                <mo>(</mo>
                <mo>+</mo>
                <mo>)</mo>
              </mrow>
            </mrow>
            <mo>⁢</mo>
            <mrow>
              <mi>X15</mi>
              <mo>⁡</mo>
              <mrow>
                <mo>(</mo>
                <mo>+</mo>
                <mo>)</mo>
              </mrow>
            </mrow>
            <mo>⁢</mo>
            <mrow>
              <mi>X16</mi>
              <mo>⁡</mo>
              <mrow>
                <mo>(</mo>
                <mo>+</mo>
                <mo>)</mo>
              </mrow>
            </mrow>
          </mrow>
        </mrow>
      </mtd>
    </mtr>
    <mtr>
      <mtd>
        <mrow>
          <mi/>
          <mo>⁢</mo>
          <mrow>
            <mrow>
              <mi>X17</mi>
              <mo>⁡</mo>
              <mrow>
                <mo>(</mo>
                <mo>+</mo>
                <mo>)</mo>
              </mrow>
            </mrow>
            <mo>⁢</mo>
            <mrow>
              <mi>X18</mi>
              <mo>⁡</mo>
              <mrow>
                <mo>(</mo>
                <mo>+</mo>
                <mo>)</mo>
              </mrow>
            </mrow>
            <mo>⁢</mo>
            <mrow>
              <mi>X23</mi>
              <mo>⁡</mo>
              <mrow>
                <mo>(</mo>
                <mo>+</mo>
                <mo>)</mo>
              </mrow>
            </mrow>
            <mo>⁢</mo>
            <mrow>
              <mi>X24</mi>
              <mo>⁡</mo>
              <mrow>
                <mo>(</mo>
                <mo>+</mo>
                <mo>)</mo>
              </mrow>
            </mrow>
            <mo>⁢</mo>
            <mrow>
              <mi>X25</mi>
              <mo>⁡</mo>
              <mrow>
                <mo>(</mo>
                <mo>+</mo>
                <mo>)</mo>
              </mrow>
            </mrow>
            <mo>⁢</mo>
            <mrow>
              <mi>X26</mi>
              <mo>⁡</mo>
              <mrow>
                <mo>(</mo>
                <mo>+</mo>
                <mo>)</mo>
              </mrow>
            </mrow>
            <mo>⁢</mo>
            <mrow>
              <mi>X30</mi>
              <mo>⁡</mo>
              <mrow>
                <mo>(</mo>
                <mo>+</mo>
                <mo>)</mo>
              </mrow>
            </mrow>
            <mo>⁢</mo>
            <mrow>
              <mi>X31</mi>
              <mo>⁡</mo>
              <mrow>
                <mo>(</mo>
                <mo>+</mo>
                <mo>)</mo>
              </mrow>
            </mrow>
            <mo>⁢</mo>
            <mi>X32</mi>
          </mrow>
        </mrow>
      </mtd>
    </mtr>
    <mtr>
      <mtd>
        <mrow>
          <mi>Y2</mi>
          <mo>=</mo>
          <mi/>
          <mo>⁢</mo>
          <mrow>
            <mrow>
              <mi>X1</mi>
              <mo>⁡</mo>
              <mrow>
                <mo>(</mo>
                <mo>+</mo>
                <mo>)</mo>
              </mrow>
            </mrow>
            <mo>⁢</mo>
            <mrow>
              <mi>X3</mi>
              <mo>⁡</mo>
              <mrow>
                <mo>(</mo>
                <mo>+</mo>
                <mo>)</mo>
              </mrow>
            </mrow>
            <mo>⁢</mo>
            <mrow>
              <mi>X4</mi>
              <mo>⁡</mo>
              <mrow>
                <mo>(</mo>
                <mo>+</mo>
                <mo>)</mo>
              </mrow>
            </mrow>
            <mo>⁢</mo>
            <mrow>
              <mi>X6</mi>
              <mo>⁡</mo>
              <mrow>
                <mo>(</mo>
                <mo>+</mo>
                <mo>)</mo>
              </mrow>
            </mrow>
            <mo>⁢</mo>
            <mrow>
              <mi>X7</mi>
              <mo>⁡</mo>
              <mrow>
                <mo>(</mo>
                <mo>+</mo>
                <mo>)</mo>
              </mrow>
            </mrow>
            <mo>⁢</mo>
            <mrow>
              <mi>X10</mi>
              <mo>⁡</mo>
              <mrow>
                <mo>(</mo>
                <mo>+</mo>
                <mo>)</mo>
              </mrow>
            </mrow>
            <mo>⁢</mo>
            <mrow>
              <mi>X11</mi>
              <mo>⁡</mo>
              <mrow>
                <mo>(</mo>
                <mo>+</mo>
                <mo>)</mo>
              </mrow>
            </mrow>
            <mo>⁢</mo>
            <mrow>
              <mi>X13</mi>
              <mo>⁡</mo>
              <mrow>
                <mo>(</mo>
                <mo>+</mo>
                <mo>)</mo>
              </mrow>
            </mrow>
            <mo>⁢</mo>
            <mrow>
              <mi>X14</mi>
              <mo>⁡</mo>
              <mrow>
                <mo>(</mo>
                <mo>+</mo>
                <mo>)</mo>
              </mrow>
            </mrow>
          </mrow>
        </mrow>
      </mtd>
    </mtr>
    <mtr>
      <mtd>
        <mrow>
          <mi/>
          <mo>⁢</mo>
          <mrow>
            <mrow>
              <mi>X17</mi>
              <mo>⁡</mo>
              <mrow>
                <mo>(</mo>
                <mo>+</mo>
                <mo>)</mo>
              </mrow>
            </mrow>
            <mo>⁢</mo>
            <mrow>
              <mi>X18</mi>
              <mo>⁡</mo>
              <mrow>
                <mo>(</mo>
                <mo>+</mo>
                <mo>)</mo>
              </mrow>
            </mrow>
            <mo>⁢</mo>
            <mrow>
              <mi>X21</mi>
              <mo>⁡</mo>
              <mrow>
                <mo>(</mo>
                <mo>+</mo>
                <mo>)</mo>
              </mrow>
            </mrow>
            <mo>⁢</mo>
            <mrow>
              <mi>X22</mi>
              <mo>⁡</mo>
              <mrow>
                <mo>(</mo>
                <mo>+</mo>
                <mo>)</mo>
              </mrow>
            </mrow>
            <mo>⁢</mo>
            <mrow>
              <mi>X25</mi>
              <mo>⁡</mo>
              <mrow>
                <mo>(</mo>
                <mo>+</mo>
                <mo>)</mo>
              </mrow>
            </mrow>
            <mo>⁢</mo>
            <mrow>
              <mi>X26</mi>
              <mo>⁡</mo>
              <mrow>
                <mo>(</mo>
                <mo>+</mo>
                <mo>)</mo>
              </mrow>
            </mrow>
            <mo>⁢</mo>
            <mrow>
              <mi>X28</mi>
              <mo>⁡</mo>
              <mrow>
                <mo>(</mo>
                <mo>+</mo>
                <mo>)</mo>
              </mrow>
            </mrow>
            <mo>⁢</mo>
            <mrow>
              <mi>X29</mi>
              <mo>⁡</mo>
              <mrow>
                <mo>(</mo>
                <mo>+</mo>
                <mo>)</mo>
              </mrow>
            </mrow>
            <mo>⁢</mo>
            <mi>X32</mi>
          </mrow>
        </mrow>
      </mtd>
    </mtr>
    <mtr>
      <mtd>
        <mrow>
          <mi>Y1</mi>
          <mo>=</mo>
          <mi/>
          <mo>⁢</mo>
          <mrow>
            <mrow>
              <mi>X1</mi>
              <mo>⁡</mo>
              <mrow>
                <mo>(</mo>
                <mo>+</mo>
                <mo>)</mo>
              </mrow>
            </mrow>
            <mo>⁢</mo>
            <mrow>
              <mi>X2</mi>
              <mo>⁡</mo>
              <mrow>
                <mo>(</mo>
                <mo>+</mo>
                <mo>)</mo>
              </mrow>
            </mrow>
            <mo>⁢</mo>
            <mrow>
              <mi>X4</mi>
              <mo>⁡</mo>
              <mrow>
                <mo>(</mo>
                <mo>+</mo>
                <mo>)</mo>
              </mrow>
            </mrow>
            <mo>⁢</mo>
            <mrow>
              <mi>X5</mi>
              <mo>⁡</mo>
              <mrow>
                <mo>(</mo>
                <mo>+</mo>
                <mo>)</mo>
              </mrow>
            </mrow>
            <mo>⁢</mo>
            <mrow>
              <mi>X7</mi>
              <mo>⁡</mo>
              <mrow>
                <mo>(</mo>
                <mo>+</mo>
                <mo>)</mo>
              </mrow>
            </mrow>
            <mo>⁢</mo>
            <mrow>
              <mi>X9</mi>
              <mo>⁡</mo>
              <mrow>
                <mo>(</mo>
                <mo>+</mo>
                <mo>)</mo>
              </mrow>
            </mrow>
            <mo>⁢</mo>
            <mrow>
              <mi>X11</mi>
              <mo>⁡</mo>
              <mrow>
                <mo>(</mo>
                <mo>+</mo>
                <mo>)</mo>
              </mrow>
            </mrow>
            <mo>⁢</mo>
            <mrow>
              <mi>X12</mi>
              <mo>⁡</mo>
              <mrow>
                <mo>(</mo>
                <mo>+</mo>
                <mo>)</mo>
              </mrow>
            </mrow>
            <mo>⁢</mo>
            <mrow>
              <mi>X14</mi>
              <mo>⁡</mo>
              <mrow>
                <mo>(</mo>
                <mo>+</mo>
                <mo>)</mo>
              </mrow>
            </mrow>
          </mrow>
        </mrow>
      </mtd>
    </mtr>
    <mtr>
      <mtd>
        <mrow>
          <mi/>
          <mo>⁢</mo>
          <mrow>
            <mrow>
              <mi>X16</mi>
              <mo>⁡</mo>
              <mrow>
                <mo>(</mo>
                <mo>+</mo>
                <mo>)</mo>
              </mrow>
            </mrow>
            <mo>⁢</mo>
            <mrow>
              <mi>X18</mi>
              <mo>⁡</mo>
              <mrow>
                <mo>(</mo>
                <mo>+</mo>
                <mo>)</mo>
              </mrow>
            </mrow>
            <mo>⁢</mo>
            <mrow>
              <mi>X20</mi>
              <mo>⁡</mo>
              <mrow>
                <mo>(</mo>
                <mo>+</mo>
                <mo>)</mo>
              </mrow>
            </mrow>
            <mo>⁢</mo>
            <mrow>
              <mi>X22</mi>
              <mo>⁡</mo>
              <mrow>
                <mo>(</mo>
                <mo>+</mo>
                <mo>)</mo>
              </mrow>
            </mrow>
            <mo>⁢</mo>
            <mrow>
              <mi>X24</mi>
              <mo>⁡</mo>
              <mrow>
                <mo>(</mo>
                <mo>+</mo>
                <mo>)</mo>
              </mrow>
            </mrow>
            <mo>⁢</mo>
            <mrow>
              <mi>X26</mi>
              <mo>⁡</mo>
              <mrow>
                <mo>(</mo>
                <mo>+</mo>
                <mo>)</mo>
              </mrow>
            </mrow>
            <mo>⁢</mo>
            <mrow>
              <mi>X27</mi>
              <mo>⁡</mo>
              <mrow>
                <mo>(</mo>
                <mo>+</mo>
                <mo>)</mo>
              </mrow>
            </mrow>
            <mo>⁢</mo>
            <mrow>
              <mi>X29</mi>
              <mo>⁡</mo>
              <mrow>
                <mo>(</mo>
                <mo>+</mo>
                <mo>)</mo>
              </mrow>
            </mrow>
            <mo>⁢</mo>
            <mi>X31</mi>
          </mrow>
        </mrow>
      </mtd>
    </mtr>
  </mtable>
</math>
</maths>
<maths id="MATH-US-00001-3" num="00001.3">
<math overflow="scroll">
  <mrow>
    <mrow>
      <mo>(</mo>
      <mo>+</mo>
      <mo>)</mo>
    </mrow>
    <mo>⁢</mo>
    <mstyle>
      <mspace width="0.8em" height="0.8ex"/>
    </mstyle>
    <mo>⁢</mo>
    <mi>shows</mi>
    <mo>⁢</mo>
    <mstyle>
      <mspace width="0.8em" height="0.8ex"/>
    </mstyle>
    <mo>⁢</mo>
    <mi>Exclusive</mi>
    <mo>⁢</mo>
    <mstyle>
      <mspace width="0.8em" height="0.8ex"/>
    </mstyle>
    <mo>⁢</mo>
    <mi>or</mi>
    <mo>⁢</mo>
    <mstyle>
      <mspace width="0.8em" height="0.8ex"/>
    </mstyle>
    <mo>⁢</mo>
    <mi>Sum</mi>
    <mo>⁢</mo>
    <mstyle>
      <mspace width="0.8em" height="0.8ex"/>
    </mstyle>
    <mo>⁢</mo>
    <mrow>
      <mi>symbol</mi>
      <mo>.</mo>
    </mrow>
  </mrow>
</math>
</maths>
</p>
<p id="p-0030" num="0029">The ECC data latch signal <b>120</b> from the timing control circuit <b>118</b> changes to ‘H’ level from ‘L’ level at the t<b>4</b> timing phase, and at its rising edge, the correction data <b>110</b> and the contents A′ of the checkbit output data <b>112</b> are taken into the ECC data register <b>113</b>, then the output data <b>117</b> changes to ‘A’.</p>
<p id="p-0031" num="0030">The contents A of the output data <b>116</b> from the flash memory data register <b>109</b> and the contents A′ of the output data <b>117</b> from the ECC data register <b>113</b> are compared to each other by the bit comparing circuit <b>115</b>. Then an output result signal <b>124</b> is outputted, where the only mismatched bits between the ‘A’ and ‘A′’ (the error bit of data A) are set to datum ‘1’, while other bits are set to datum ‘0’. At the same time, the error detection signal <b>123</b> of the bit comparing circuit <b>115</b> changes to level ‘H’ from level ‘L’</p>
<p id="p-0032" num="0031">A write-timing control signal <b>122</b> from the timing control circuit <b>118</b> changes to level ‘H’ from level ‘L’ at the timing t<b>5</b>, and according to that a write-enable signal <b>129</b><i>a </i>and a write-busy signal <b>126</b> changes to level ‘H’ from level ‘L’. Receiving the change of level ‘H’ of the write-busy signal <b>126</b>, the timing control circuit <b>118</b> recognizes the starting of the write-cycle, and then changes the level of the address-latch signal <b>121</b> and the latch signal <b>119</b> to the flash memory data register <b>109</b>, and the data latch signal <b>120</b> is inputted to the ECC data register <b>113</b> to level ‘L’ from level ‘H’. These signals are fixed to level ‘L’ and the write-timing signal <b>122</b> is fixed to level ‘H’ during the write-cycle.</p>
<p id="p-0033" num="0032">While, the write-enable signal <b>129</b> in the address memory <b>127</b><i>a </i>is set to level ‘H’ during the write-cycle and a write-enable signal (WE) is set to level ‘H’, the contents of the address register <b>114</b> are written in the address memory <b>201</b>. At the same time, datum ‘1’ is written in the memory chip <b>205</b>.</p>
<p id="p-0034" num="0033">Since the write-enable signal <b>129</b><i>a </i>is set to level ‘H’ during the write-cycle in the error data memory <b>128</b><i>a</i>, too, datum ‘1’ is written in the memory chip <b>401</b> while the write-enable signal (WE) is set to level ‘H’ in the error-bit memory circuit <b>401</b> corresponding to the error bit in the output data <b>124</b> of the bit-comparing circuit <b>115</b>, where, the number of the error-bit memory circuits equipped in each error data memory is equal to the number corresponding to the data bit-width and the checkbit bit-width (in case of <figref idref="DRAWINGS">FIG. 1</figref>. the number is 38 corresponding to 32 bit-width of the data and 6 bit-width of the checkbit).</p>
<p id="p-0035" num="0034">When writing into the address memory <b>127</b><i>a </i>and the error data memory <b>128</b><i>a </i>is completed, the timing controller <b>118</b> changes the level of the write-timing control signal <b>122</b> to level ‘L’ from level ‘H’, accordingly the write-busy signal <b>126</b> changes to level ‘L’ from level ‘H’ and the write cycle is finished. Even when the write-cycle occurs during the read-cycle, there is no influence in taking the necessary correction data <b>110</b> by the CPU <b>100</b> because the contents of the flash memory data register <b>109</b>, the ECC data register <b>113</b>, or the address register <b>114</b> is not renewed.</p>
<p id="p-0036" num="0035">Since there is no one-bit error in the data B of the output memory data <b>103</b> and <b>104</b> at the address <b>2</b><i>a </i>of the flash memory in the read-cycle (<b>2</b>), the data, which are respectively saved in the flash memory data register <b>109</b> and the ECC data register <b>113</b> by the same action as in the read-cycle (<b>1</b>), come to be B. For this reason, when the write timing signal is set to level ‘H’ there is no write action because the error detecting signal <b>123</b> holds level ‘L’, the write-busy signal holds level ‘L’ as well.</p>
<p id="p-0037" num="0036">At the read cycle (<b>3</b>), when the flash-memory memory data <b>103</b> and <b>104</b> of address <b>1</b> (data A), which include one-bit error at address <b>1</b><i>a</i>, output again, the contents of the address output <b>102</b> are compared with the contents of the memory chip <b>201</b> in an address comparing circuit <b>202</b> of the address memory <b>127</b><i>a</i>, and then the address matching signal <b>131</b> changes to level ‘H’ from level ‘L’ since both addresses match each other in this case. The address matching signal <b>131</b> is set to level ‘H’, and consequently the output of the error-bit memory circuit in the error data memory <b>128</b><i>a</i>, in which datum ‘1’ is already written, changes to level ‘H’ from level ‘L’. Since the outputs from other error-bit memory circuits are still level ‘L’, only one bit corresponding to the abovementioned one-bit error changes to level ‘H’ among all bit having level ‘L’ in the reverse-bit selection signal <b>135</b>, which is the output from the data OR circuit <b>134</b> conducting OR logic operation of the output signals <b>133</b><i>a</i>-<b>133</b><i>x </i>from the error data memories <b>128</b><i>a</i>-<b>128</b><i>x. </i></p>
<p id="p-0038" num="0037">The selected-bit reverse circuit <b>105</b> reverses only bits of the output memory data <b>103</b> and <b>104</b> of the flash memory and outputs data A to the output data <b>106</b> and <b>107</b> of the selected-bit reverse circuit <b>105</b> after receiving the reverse-bit selection signal <b>135</b>. After that, both data groups held by the flash memory data register <b>109</b> and the ECC data register <b>113</b> become data ‘A’ by the same action as the aforementioned cycle (<b>1</b>). Consequently, no write-operation occurs by the same action as the read-cycle (<b>2</b>).</p>
<p id="p-0039" num="0038">When the output memory data <b>103</b> and <b>104</b> at other address includes one-bit error in the later write-cycle, the write enable signal <b>129</b><i>b </i>changes to level ‘H’ from level ‘L’ by the same action as in the write-cycle (<b>1</b>) on this occasion, and the corresponding address is written in the address memory <b>127</b><i>b </i>during the write cycle, and the error-bit location revealed in the bit-comparing result signal <b>124</b> from the bit-comparing circuit <b>115</b> is written in the error-bit memory circuit corresponding to the error-bit memory <b>128</b><i>b</i>. Where, the address memories and the error-bit data memories can be equipped in necessary numbers according to the required reliability.</p>
<p id="p-0040" num="0039">Even when an additional bit becomes error memory data <b>103</b> and <b>104</b> at the address <b>1</b><i>a </i>of the flash-memory and two-bit error occurs, the contents of the output data <b>106</b> and <b>107</b> of the selected-bit reverse circuit <b>105</b> become one-bit error as in the case of the write-cycle (<b>1</b>). Since the one bit detected to be error in the cycle (<b>1</b>) is reversed to be the right value by the selected-bit reverse circuit <b>105</b>, the new one-bit error is only outputted. Consequently the correction data <b>110</b> corrected by the ECC circuit <b>108</b> are given to the CPU <b>100</b>. After that action, the error detection signal <b>123</b> changes to level ‘H’ from level ‘L’ according to the data discrepancy in the bit-comparing circuit <b>115</b> as in the read-cycle(<b>1</b>), and then write action arises. Since the address has been already written in the address memory <b>127</b><i>a</i>, however, the write enable signal (WE) corresponding to the one-bit error in the output data <b>124</b> of the bit-comparing circuit <b>115</b> changes to level ‘H’ and the datum ‘1’ is written in the memory chip <b>401</b>.</p>
<p id="p-0041" num="0040">Through all these actions in the error correction circuit according to this invention, the rightly correction data <b>110</b> can be supplied to the CPU <b>100</b>, even if all bits of the flash memory output become errors.</p>
<p id="p-0042" num="0041">As explained before, more-than-two-bit errors, which cannot be corrected by a conventional ECC circuit using only six-bit checkbit to the 32-bit-width data, can be corrected according to the first embodiment of this invention. Therefore, the ICs having the built-in flash memory in which the operation program is installed have no malfunctions even if a two-bit error occurs at the same address, and then improvement in the reliability of the ICs is able to be realized. In addition, since the number of the address memories that store the addresses of the error data and the number of the error data memories both can be changed without limitation and only with a small modification in the write control circuit <b>125</b>, the most appropriate circuit capacity is able to be chosen according to the reliability of the flash memory.</p>
<p id="p-0043" num="0042">As used herein, the following directional terms “forward, rearward, above, downward, vertical, horizontal, below, and transverse” as well as any other similar directional terms refer to those directions of a device equipped with the present invention. Accordingly, these terms, as utilized to describe the present invention should be interpreted relative to a device equipped with the present invention.</p>
<heading id="h-0006" level="1">Second Embodiment</heading>
<p id="p-0044" num="0043">A second embodiment will now be explained. In view of the similarity between the first and second embodiments, the parts of the second embodiment that are identical to the parts of the first embodiment will be given the same reference numerals as the parts of the first embodiment. Moreover, the descriptions of the parts of the second embodiment that are identical to the parts of the first embodiment may be omitted for the sake of brevity.</p>
<p id="p-0045" num="0044"><figref idref="DRAWINGS">FIG. 6</figref> is a block diagram illustrating the configuration of an error correction circuit according to a second embodiment of the present invention. The main difference between the first embodiment of the present invention and this one is that an external input terminal <b>601</b> is equipped and an input signal <b>602</b> that is inputted from this input terminal <b>601</b> is inputted to the timing control circuit <b>118</b>. Referring to <figref idref="DRAWINGS">FIG. 6</figref>, the error correction circuit of the second embodiment will now be explained as below.</p>
<p id="p-0046" num="0045">When the input signal <b>602</b> from the external input terminal <b>601</b> is level ‘L’, the address latch signal <b>121</b>, the flash-memory-data latch signal <b>119</b>, the latch signal <b>120</b> for the ECC data register <b>113</b>, and the write-timing control signal <b>122</b> are controlled to be fixed to level ‘L’ (invalid level) in the timing control circuit <b>118</b>. These signal levels cause the address register <b>114</b>, the flash-memory-data register <b>109</b>, and the ECC data register <b>113</b> to stop respectively holding data. At the same time, since the write-timing control signal <b>122</b> is fixed to level ‘L’ and then all output data from the write control circuit <b>125</b> are fixed to level ‘L’, the write operation is stopped.</p>
<p id="p-0047" num="0046">While, in the case when the input signal <b>602</b> from the external input terminal <b>601</b> is level ‘H’, the address latch signal <b>121</b>, the flash-memory-data latch signal <b>119</b>, the latch signal <b>120</b> of the ECC data register <b>113</b>, and the write-timing control signal <b>122</b> are controlled in the timing control circuit <b>118</b>, as illustrated in <figref idref="DRAWINGS">FIG. 5</figref>. These signals cause the address register <b>114</b>, flash-memory-data register <b>109</b>, and the ECC data register <b>113</b> to hold respectively data at the rising edges of their latch signals, and then the write operation is available after the write control circuit <b>125</b> becomes active according to the change to level ‘H’ of the write-timing control signal <b>122</b>.</p>
<p id="p-0048" num="0047">As described before, according to the error correction circuit of the second embodiment of this invention, it becomes possible that the function according to the first embodiment of this invention is not available, based on the input signal <b>602</b> from the external terminal <b>601</b>. Consequently, the error correction circuit becomes able to prevent from writing unnecessary data in the address memory or the error data memory in case of its shipment test or in case pseudo data are stored in the flash memory for a test operation.</p>
<p id="p-0049" num="0048">The term “configured” as used herein to describe a component, section or part of a device includes hardware and/or software that is constructed and/or programmed to carry out the desired function.</p>
<p id="p-0050" num="0049">Moreover, terms that are expressed as “means-plus function” in the claims should include any structure that can be utilized to carry out the function of that part of the present invention.</p>
<p id="p-0051" num="0050">The terms of degree such as “substantially,” “about,” and “approximately” as used herein mean a reasonable amount of deviation of the modified term such that the end result is not significantly changed. For example, these terms can be construed as including a deviation of at least ±5% of the modified term if this deviation would not negate the meaning of the word it modifies.</p>
<p id="p-0052" num="0051">This application claims priority to Japanese Patent Application No. 2004-053317. The entire disclosure of Japanese Patent Application No. 2004-053317 is hereby incorporated herein by reference.</p>
<p id="p-0053" num="0052">While only selected embodiments have been chosen to illustrate the present invention, it will be apparent to those skilled in the art from this disclosure that various changes and modifications can be made herein without departing from the scope of the invention as defined in the appended claims. Furthermore, the foregoing descriptions of the embodiments according to the present invention are provided for illustration only, and not for the purpose of limiting the invention as defined by the appended claims and their equivalents. Thus, the scope of the invention is not limited to the disclosed embodiments.</p>
<?DETDESC description="Detailed Description" end="tail"?>
</description>
<us-math idrefs="MATH-US-00001 MATH-US-00001-2 MATH-US-00001-3" nb-file="US07299400-20071120-M00001.NB">
<img id="EMI-M00001" he="81.53mm" wi="76.20mm" file="US07299400-20071120-M00001.TIF" alt="embedded image " img-content="math" img-format="tif"/>
</us-math>
<us-claim-statement>What is claimed is:</us-claim-statement>
<claims id="claims">
<claim id="CLM-00001" num="00001">
<claim-text>1. An error correction circuit comprising:
<claim-text>a selected-bit reverse circuit being configured to reverse error bits in output data based on a first signal, said output data including memory data and a check data from a memory device;</claim-text>
<claim-text>an ECC circuit being configured to correct a one-bit error based on said output data;</claim-text>
<claim-text>a checkbit generation circuit being configured to generate checkbits based on correction data outputted from said ECC circuit;</claim-text>
<claim-text>an ECC data register being configured to store said correction data and said check data;</claim-text>
<claim-text>a bit-comparing circuit being configured to compare each bit between a first data group of said output data from said selected-bit reverse circuit and a second data group of output data from said ECC data register;</claim-text>
<claim-text>an address memory unit being configured to store an address corresponding to said memory data when said bit-comparing circuit detects a discrepancy between said first data group and said second data group;</claim-text>
<claim-text>an error data memory unit being configured to include a plurality of memory circuits having a necessary number for a predetermined data-width, said error data memory unit being configured to write discrepancy information at a bit-location corresponding to said discrepancy when said bit-comparing circuit detects said discrepancy between said first data group and said second data group;</claim-text>
<claim-text>a data OR circuit being configured to perform a logical operation between each data group stored in said plurality of memory circuits of said error-data memory unit and to generate said first signal.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00002" num="00002">
<claim-text>2. The error correction circuit according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein an additional external terminal is configured to disable error correction based on a signal inputted from said external terminal.</claim-text>
</claim>
<claim id="CLM-00003" num="00003">
<claim-text>3. The error correction circuit according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein said address memory unit includes an address comparing circuit configured to enable output data from each of said plurality of memory circuits of said error data memory unit corresponding to said address corresponding to said memory data when a referred address matches a stored address in said memory.</claim-text>
</claim>
<claim id="CLM-00004" num="00004">
<claim-text>4. The error correction circuit according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, further comprising a CPU configured to output address data.</claim-text>
</claim>
<claim id="CLM-00005" num="00005">
<claim-text>5. The error correction circuit according to <claim-ref idref="CLM-00004">claim 4</claim-ref>, further comprising a flash memory configured to output said output data upon receiving said address data from said CPU.</claim-text>
</claim>
<claim id="CLM-00006" num="00006">
<claim-text>6. The error correction circuit according to <claim-ref idref="CLM-00005">claim 5</claim-ref>, further comprising a flash memory data register configured to receive data from said selected-bit reverse circuit.</claim-text>
</claim>
<claim id="CLM-00007" num="00007">
<claim-text>7. The error correction circuit according to <claim-ref idref="CLM-00006">claim 6</claim-ref>, further comprising an address register configured to store said output address data from said CPU.</claim-text>
</claim>
<claim id="CLM-00008" num="00008">
<claim-text>8. The error correction circuit according to <claim-ref idref="CLM-00007">claim 7</claim-ref>, further comprising a timing control circuit configured to control data setting timing in each component.</claim-text>
</claim>
<claim id="CLM-00009" num="00009">
<claim-text>9. The error correction circuit according to <claim-ref idref="CLM-00008">claim 8</claim-ref>, further comprising a write control circuit being configured to control writing data in said address memory unit and said error data memory unit.</claim-text>
</claim>
<claim id="CLM-00010" num="00010">
<claim-text>10. The error correction circuit according to <claim-ref idref="CLM-00002">claim 2</claim-ref>, further comprising a CPU configured to output address data.</claim-text>
</claim>
<claim id="CLM-00011" num="00011">
<claim-text>11. The error correction circuit according to <claim-ref idref="CLM-00010">claim 10</claim-ref>, further comprising a flash memory configured to output said output data upon receiving said address data from said CPU.</claim-text>
</claim>
<claim id="CLM-00012" num="00012">
<claim-text>12. The error correction circuit according to <claim-ref idref="CLM-00011">claim 11</claim-ref>, further comprising a flash memory data register configured to receive data from said selected-bit reverse circuit.</claim-text>
</claim>
<claim id="CLM-00013" num="00013">
<claim-text>13. The error correction circuit according to <claim-ref idref="CLM-00012">claim 12</claim-ref>, further comprising an address register configured to store said output address data from said CPU.</claim-text>
</claim>
<claim id="CLM-00014" num="00014">
<claim-text>14. The error correction circuit according to <claim-ref idref="CLM-00013">claim 13</claim-ref>, further comprising a timing control circuit configured to control data setting timing in each component.</claim-text>
</claim>
<claim id="CLM-00015" num="00015">
<claim-text>15. The error correction circuit according to <claim-ref idref="CLM-00014">claim 14</claim-ref>, further comprising a write control circuit being configured to control writing data in said address memory unit and said error data memory unit.</claim-text>
</claim>
<claim id="CLM-00016" num="00016">
<claim-text>16. The error correction circuit according to <claim-ref idref="CLM-00003">claim 3</claim-ref>, further comprising a CPU configured to output address data.</claim-text>
</claim>
<claim id="CLM-00017" num="00017">
<claim-text>17. The error correction circuit according to <claim-ref idref="CLM-00016">claim 16</claim-ref>, further comprising a flash memory configured to output said output data upon receiving said address data from said CPU.</claim-text>
</claim>
<claim id="CLM-00018" num="00018">
<claim-text>18. The error correction circuit according to <claim-ref idref="CLM-00017">claim 17</claim-ref>, further comprising a flash memory data register configured to receive data from said selected-bit reverse circuit.</claim-text>
</claim>
<claim id="CLM-00019" num="00019">
<claim-text>19. The error correction circuit according to <claim-ref idref="CLM-00018">claim 18</claim-ref>, further comprising an address register configured to store said output address data from said CPU.</claim-text>
</claim>
<claim id="CLM-00020" num="00020">
<claim-text>20. The error correction circuit according to <claim-ref idref="CLM-00019">claim 19</claim-ref>, further comprising a timing control circuit configured to control data setting timing in each component.</claim-text>
</claim>
</claims>
</us-patent-grant>
