<us-patent-grant lang="EN" dtd-version="v4.2 2006-08-23" file="US07299233-20071120.XML" status="PRODUCTION" id="us-patent-grant" country="US" date-produced="20071106" date-publ="20071120">
<us-bibliographic-data-grant>
<publication-reference>
<document-id>
<country>US</country>
<doc-number>07299233</doc-number>
<kind>B2</kind>
<date>20071120</date>
</document-id>
</publication-reference>
<application-reference appl-type="utility">
<document-id>
<country>US</country>
<doc-number>10699564</doc-number>
<date>20031031</date>
</document-id>
</application-reference>
<us-application-series-code>10</us-application-series-code>
<priority-claims>
<priority-claim sequence="01" kind="national">
<country>JP</country>
<doc-number>2002-317717</doc-number>
<date>20021031</date>
</priority-claim>
</priority-claims>
<us-term-of-grant>
<us-term-extension>214</us-term-extension>
</us-term-of-grant>
<classifications-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>G</section>
<class>06</class>
<subclass>F</subclass>
<main-group>7</main-group>
<subgroup>00</subgroup>
<symbol-position>F</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20071120</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>G</section>
<class>06</class>
<subclass>F</subclass>
<main-group>17</main-group>
<subgroup>00</subgroup>
<symbol-position>L</symbol-position>
<classification-value>N</classification-value>
<action-date><date>20071120</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
</classifications-ipcr>
<classification-national>
<country>US</country>
<main-classification>707100</main-classification>
<further-classification>707  1</further-classification>
<further-classification>358  11</further-classification>
</classification-national>
<invention-title id="d0e71">Copying apparatus, method of controlling the same, and program for implementing the method</invention-title>
<references-cited>
<citation>
<patcit num="00001">
<document-id>
<country>US</country>
<doc-number>5606609</doc-number>
<kind>A</kind>
<name>Houser et al.</name>
<date>19970200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>715515</main-classification></classification-national>
</citation>
<citation>
<patcit num="00002">
<document-id>
<country>US</country>
<doc-number>6751336</doc-number>
<kind>B2</kind>
<name>Zhao</name>
<date>20040600</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>382100</main-classification></classification-national>
</citation>
<citation>
<patcit num="00003">
<document-id>
<country>US</country>
<doc-number>2002/0082027</doc-number>
<kind>A1</kind>
<name>Nagata</name>
<date>20020600</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>455456</main-classification></classification-national>
</citation>
<citation>
<patcit num="00004">
<document-id>
<country>US</country>
<doc-number>2003/0188260</doc-number>
<kind>A1</kind>
<name>Jensen et al.</name>
<date>20031000</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>715505</main-classification></classification-national>
</citation>
</references-cited>
<number-of-claims>13</number-of-claims>
<us-exemplary-claim>1</us-exemplary-claim>
<us-field-of-classification-search>
<classification-national>
<country>US</country>
<main-classification>707  1</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>707 10</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>707100</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>715505</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>715515</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>358  11</main-classification>
</classification-national>
</us-field-of-classification-search>
<figures>
<number-of-drawing-sheets>18</number-of-drawing-sheets>
<number-of-figures>18</number-of-figures>
</figures>
<us-related-documents>
<related-publication>
<document-id>
<country>US</country>
<doc-number>20040141761</doc-number>
<kind>A1</kind>
<date>20040722</date>
</document-id>
</related-publication>
</us-related-documents>
<parties>
<applicants>
<applicant sequence="001" app-type="applicant-inventor" designation="us-only">
<addressbook>
<last-name>Ikegawa</last-name>
<first-name>Yoshiharu</first-name>
<address>
<city>Kanagawa</city>
<country>JP</country>
</address>
</addressbook>
<nationality>
<country>JP</country>
</nationality>
<residence>
<country>JP</country>
</residence>
</applicant>
</applicants>
<agents>
<agent sequence="01" rep-type="attorney">
<addressbook>
<orgname>Rossi, Kimms &amp; McDowell LLP</orgname>
<address>
<country>unknown</country>
</address>
</addressbook>
</agent>
</agents>
</parties>
<assignees>
<assignee>
<addressbook>
<orgname>Canon Kabushiki Kaisha</orgname>
<role>03</role>
<address>
<country>JP</country>
</address>
</addressbook>
</assignee>
</assignees>
<examiners>
<primary-examiner>
<last-name>Rimell</last-name>
<first-name>Sam</first-name>
<department>2164</department>
</primary-examiner>
</examiners>
</us-bibliographic-data-grant>
<abstract id="abstract">
<p id="p-0001" num="0000">There is provided a copying apparatus and a method of controlling the same which are capable of performing a proper search for an original file even when the image quality of the original is heavily degraded such that the additional information cannot be read or is not correctly recognized, to thereby obtain a copy without degradation in image quality regardless of the condition of the original. Additional information is read from an image signal from an original inputted by a scanner unit. A search is carried out for an original file corresponding to the original based on the read additional information. A printer outputs a copy of the original using the original file found as a result of the search. The additional information is displayed and edited. The search is controlled using the edited additional information.</p>
</abstract>
<drawings id="DRAWINGS">
<figure id="Fig-EMI-D00000" num="00000">
<img id="EMI-D00000" he="185.84mm" wi="143.43mm" file="US07299233-20071120-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00001" num="00001">
<img id="EMI-D00001" he="241.22mm" wi="177.04mm" orientation="landscape" file="US07299233-20071120-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00002" num="00002">
<img id="EMI-D00002" he="207.69mm" wi="164.76mm" file="US07299233-20071120-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00003" num="00003">
<img id="EMI-D00003" he="230.29mm" wi="172.30mm" orientation="landscape" file="US07299233-20071120-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00004" num="00004">
<img id="EMI-D00004" he="212.43mm" wi="140.89mm" orientation="landscape" file="US07299233-20071120-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00005" num="00005">
<img id="EMI-D00005" he="250.44mm" wi="179.07mm" orientation="landscape" file="US07299233-20071120-D00005.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00006" num="00006">
<img id="EMI-D00006" he="242.91mm" wi="163.91mm" orientation="landscape" file="US07299233-20071120-D00006.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00007" num="00007">
<img id="EMI-D00007" he="239.10mm" wi="137.67mm" orientation="landscape" file="US07299233-20071120-D00007.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00008" num="00008">
<img id="EMI-D00008" he="227.84mm" wi="146.56mm" orientation="landscape" file="US07299233-20071120-D00008.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00009" num="00009">
<img id="EMI-D00009" he="253.58mm" wi="160.36mm" orientation="landscape" file="US07299233-20071120-D00009.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00010" num="00010">
<img id="EMI-D00010" he="113.45mm" wi="137.67mm" file="US07299233-20071120-D00010.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00011" num="00011">
<img id="EMI-D00011" he="205.32mm" wi="170.26mm" orientation="landscape" file="US07299233-20071120-D00011.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00012" num="00012">
<img id="EMI-D00012" he="218.02mm" wi="161.21mm" orientation="landscape" file="US07299233-20071120-D00012.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00013" num="00013">
<img id="EMI-D00013" he="200.91mm" wi="157.23mm" orientation="landscape" file="US07299233-20071120-D00013.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00014" num="00014">
<img id="EMI-D00014" he="203.71mm" wi="105.33mm" file="US07299233-20071120-D00014.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00015" num="00015">
<img id="EMI-D00015" he="198.88mm" wi="95.17mm" file="US07299233-20071120-D00015.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00016" num="00016">
<img id="EMI-D00016" he="204.13mm" wi="145.20mm" file="US07299233-20071120-D00016.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00017" num="00017">
<img id="EMI-D00017" he="181.53mm" wi="165.95mm" orientation="landscape" file="US07299233-20071120-D00017.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00018" num="00018">
<img id="EMI-D00018" he="193.38mm" wi="119.30mm" file="US07299233-20071120-D00018.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
</drawings>
<description id="description">
<?BRFSUM description="Brief Summary" end="lead"?>
<heading id="h-0001" level="1">BACKGROUND OF THE INVENTION</heading>
<p id="p-0002" num="0001">1. Field of the Invention</p>
<p id="p-0003" num="0002">The present invention relates to a copying apparatus, a method of controlling the same, and a program for implementing the method, and in particular to a copying apparatus that is connected to a network or a public telephone line, and a method of controlling the same, and a program for implementing the method.</p>
<p id="p-0004" num="0003">2. Description of the Related Art</p>
<p id="p-0005" num="0004">A copying apparatus with a copy function that reads an original using a scanner, detects additional information that has been added to the original using a technique such as an electronic watermark or a barcode, and prints out an original file based on the additional information instead of outputting a copy of the read original has been conventionally proposed. By using such a copying apparatus, it is possible to obtain a copy output with no degradation in image quality compared to the original. Even if the original is a second or third generation copy with degraded image quality, by printing out the original file as mentioned above, it is possible to restore the image quality of the first generation original.</p>
<p id="p-0006" num="0005">However, when the image quality of the original is heavily degraded, or when the original was produced by enlarged or reduced copying the first generation original, there has been the problem that the conventional copying apparatus cannot read or misrecognizes the additional information, and so cannot find the original file.</p>
<heading id="h-0002" level="1">SUMMARY OF THE INVENTION</heading>
<p id="p-0007" num="0006">It is an object of the present invention to provide a copying apparatus and a method of controlling the same which are capable of performing a proper search for an original file even when the image quality of the original is heavily degraded such that the additional information cannot be read or is not correctly recognized, to thereby obtain a copy without degradation in image quality regardless of the condition of the original.</p>
<p id="p-0008" num="0007">To attain the above object, in a first aspect of the present invention, there is provided a copying apparatus comprising an image input device that inputs an image signal read from an original, an additional information reading device that reads additional information from the inputted image signal, a search device that carries out a search for an original file corresponding to the original based on the read additional information, a copy output device that outputs a copy of the original using the original file found as a result of the search by the search device, a display device that displays the additional information, an editing device that edits the displayed additional information, and a controller that controls the search device to carry out the search for the original file using the edited additional information.</p>
<p id="p-0009" num="0008">Preferably, the controller determines that editing of the additional information by the editing device is possible when the original file has not been found as a result of the search by the search device.</p>
<p id="p-0010" num="0009">Preferably, the controller determines that the search for the original file by the search device is possible when editing of the additional information read from the inputted image signal is completed.</p>
<p id="p-0011" num="0010">Preferably, the copying apparatus is connected to at least one information processing apparatus via a network or a communication line, and the search device searches the at least one information processing apparatus for the original file.</p>
<p id="p-0012" num="0011">Preferably, the additional information comprises electronic watermark information embedded in the original.</p>
<p id="p-0013" num="0012">Preferably, the additional information comprises barcode information printed on the original.</p>
<p id="p-0014" num="0013">To attain the above object, in a second aspect of the present invention, there is provided a method of controlling a copying apparatus, comprising the steps of inputting an image signal read from an original, reading additional information from the inputted image signal, carrying out a search for an original file corresponding to the original based on the read additional information, outputting a copy of the original using the original file found as a result of the search in the searching step, displaying the additional information, editing the displayed additional information, and controlling the search for the original file to be carried out using the edited additional information in the searching step.</p>
<p id="p-0015" num="0014">Preferably, it is determined in the controlling step that editing of the additional information in the editing step is possible when the original file has not been found as a result of the search in the searching step.</p>
<p id="p-0016" num="0015">Preferably, it is determined in the controlling step that the search for the original file in the searching step is possible when editing of the additional information read from the inputted image signal is completed.</p>
<p id="p-0017" num="0016">Preferably, the copying apparatus is connected at least one information processing apparatus via a network or a communication line, and in the searching step the at least one information processing apparatus is searched for the original file.</p>
<p id="p-0018" num="0017">Preferably, the additional information comprises electronic watermark information embedded in the original.</p>
<p id="p-0019" num="0018">Preferably, the additional information comprises barcode information printed on the original.</p>
<p id="p-0020" num="0019">To attain the above object, in a third aspect of the present invention, there is provided a computer-readable program for causing a computer to execute a method of controlling a copying apparatus, comprising an image input module for inputting an image signal read from an original, an additional information reading module for reading additional information from the inputted image signal, a search module for carrying out a search for an original file corresponding to the original based on the read additional information, a copy output module for outputting a copy of the original using the original file found as a result of the search by the search module, a display module for displaying the additional information, an editing module for editing the displayed additional information, and a control module for controlling the search for the original file to be carried out using the edited additional information by the search module.</p>
<p id="p-0021" num="0020">According to the first aspect of the present invention, a proper search can be carried out for an original file even when the image quality of an original is heavily degraded such that the additional information cannot be read or is not correctly recognized, so that a copy with no degradation in image quality can be obtained regardless of the condition of the original.</p>
<p id="p-0022" num="0021">Further, editing of the additional information is enabled only when the search has not been able to find an original file due to the additional information being incorrect, so that the operability of the copying apparatus can be enhanced.</p>
<p id="p-0023" num="0022">Further, whether or not the additional information is correct can be determined before the search for the original file is started, and the additional information can be corrected immediately when the additional information has been determined to be incorrect.</p>
<p id="p-0024" num="0023">The above and other objects, features, and advantages of the invention will become more apparent from the following detailed description taken in conjunction with the accompanying drawings.</p>
<?BRFSUM description="Brief Summary" end="tail"?>
<?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?>
<description-of-drawings>
<heading id="h-0003" level="1">BRIEF DESCRIPTION OF THE DRAWINGS</heading>
<p id="p-0025" num="0024"><figref idref="DRAWINGS">FIG. 1</figref> is a diagram showing the overall construction of a network system including a copying apparatus according to a first embodiment of the present invention;</p>
<p id="p-0026" num="0025"><figref idref="DRAWINGS">FIG. 2</figref> is a block diagram showing the construction of a multi-function apparatus <b>1001</b> appearing in <figref idref="DRAWINGS">FIG. 1</figref>;</p>
<p id="p-0027" num="0026"><figref idref="DRAWINGS">FIG. 3</figref> is a schematic cross-sectional view showing the construction of a reader section <b>200</b> and a printer section <b>300</b>;</p>
<p id="p-0028" num="0027"><figref idref="DRAWINGS">FIG. 4</figref> is a block diagram showing the construction of a reader image processing section <b>222</b>;</p>
<p id="p-0029" num="0028"><figref idref="DRAWINGS">FIG. 5</figref> is a block diagram showing the construction of a controller section <b>110</b>;</p>
<p id="p-0030" num="0029"><figref idref="DRAWINGS">FIG. 6</figref> is a block diagram showing the construction of a scanner image processing section <b>157</b>;</p>
<p id="p-0031" num="0030"><figref idref="DRAWINGS">FIGS. 7A and 7B</figref> are block diagram showing the construction of a printer image processing section <b>153</b>;</p>
<p id="p-0032" num="0031"><figref idref="DRAWINGS">FIG. 8</figref> is a block diagram showing the construction of a graphic processor <b>151</b>;</p>
<p id="p-0033" num="0032"><figref idref="DRAWINGS">FIG. 9</figref> is a view showing the layout of an operating section <b>180</b>;</p>
<p id="p-0034" num="0033"><figref idref="DRAWINGS">FIG. 10</figref> is a view showing an operating screen <b>3010</b>;</p>
<p id="p-0035" num="0034"><figref idref="DRAWINGS">FIG. 11</figref> is a view showing a COPY screen;</p>
<p id="p-0036" num="0035"><figref idref="DRAWINGS">FIG. 12</figref> is a view showing a printer list display screen;</p>
<p id="p-0037" num="0036"><figref idref="DRAWINGS">FIG. 13</figref> is a flowchart showing the procedure of a PDL image output process;</p>
<p id="p-0038" num="0037"><figref idref="DRAWINGS">FIG. 14</figref> is a flowchart showing the procedure of a copy image output process;</p>
<p id="p-0039" num="0038"><figref idref="DRAWINGS">FIG. 15</figref> is a flowchart showing the procedure of an original file copy image output process;</p>
<p id="p-0040" num="0039"><figref idref="DRAWINGS">FIG. 16</figref> is a view showing an operating/editing screen; and</p>
<p id="p-0041" num="0040"><figref idref="DRAWINGS">FIG. 17</figref> is a flowchart showing the procedure of an original file copy image output process according to a second embodiment of the present invention.</p>
</description-of-drawings>
<?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?>
<?DETDESC description="Detailed Description" end="lead"?>
<heading id="h-0004" level="1">DETAILED DESCRIPTION OF THE PREFERRED EMBODIMENTS</heading>
<p id="p-0042" num="0041">The present invention will now be described in detail with reference to the accompanying drawings showing preferred embodiments thereof.</p>
<p id="p-0043" num="0042"><figref idref="DRAWINGS">FIG. 1</figref> is a diagram showing the overall construction of a network system including a copying apparatus according to a first embodiment of the present invention. In <figref idref="DRAWINGS">FIG. 1</figref>, reference numeral <b>1001</b> designates a multi-function apparatus as the copying apparatus according to the present embodiment. The multi-function apparatus <b>1001</b> is comprised of a scanner and a printer, described later. Images read by the scanner are outputted to a local area network (hereinafter “LAN”) <b>1010</b> and images received from the LAN <b>1010</b> are printed using the printer. Further, Images read by the scanner are transmitted to a PSTN or ISDN <b>1030</b> by a FAX transmission section, not shown, and images received from the PSTN or ISDN <b>1030</b> are printed by the printer.</p>
<p id="p-0044" num="0043">Reference numeral <b>1002</b> designates a database server that manages binary images or multivalue images that have been read from the multi-function apparatus <b>1001</b> as a database. Reference numeral <b>1003</b> designates a database client for the database server <b>1002</b>. The database client <b>1003</b> browses and searches image data stored in the database server <b>1002</b>. Reference numeral <b>1004</b> designates an electronic mail server that can receive images read from the multi-function apparatus <b>1001</b> as attachment files of electronic mails.</p>
<p id="p-0045" num="0044">Reference numeral <b>1005</b> designates an electronic mail client for the electronic mail server <b>1004</b>. The electronic mail client <b>1005</b> receives and browses electronic mails received by the electronic mail server <b>1004</b>, and transmits electronic mails. Reference numeral <b>1006</b> designates a WWW server that provides HTML documents to the LAN <b>1010</b>. The multi-function apparatus <b>1001</b> can print HTML documents provided from the WWW server <b>1006</b>. Reference numeral <b>1007</b> designates a DNS server.</p>
<p id="p-0046" num="0045">Reference numeral <b>1011</b> designates a router that connects the LAN <b>1010</b> to the Internet or an Intranet <b>1012</b>. Similar apparatuses to the database server <b>1002</b>, the WWW server <b>1006</b>, the electronic mail server <b>1004</b>, and the multi-function apparatus <b>1001</b> mentioned above, that is, a database server <b>1021</b>, a WWW server <b>1022</b>, an electronic mail server <b>1023</b>, and a multi-function apparatus <b>1020</b> are connected to the Internet/Intranet <b>1012</b>.</p>
<p id="p-0047" num="0046">The multi-function apparatus <b>1001</b> can communicate with a FAX apparatus <b>1031</b> via the PSTN or ISDN <b>1030</b>. A printer <b>1040</b> is also connected to the LAN <b>1010</b> and can print images read by the multi-function apparatus <b>1001</b>.</p>
<p id="p-0048" num="0047"><figref idref="DRAWINGS">FIG. 2</figref> is a block diagram showing the construction of the multi-function apparatus <b>1001</b>. In <figref idref="DRAWINGS">FIG. 2</figref>, the multi-function apparatus <b>1001</b> is mainly comprised of a reader section <b>200</b>, a printer section <b>300</b>, a controller section <b>110</b>, and an operating section <b>180</b>.</p>
<p id="p-0049" num="0048">The reader section <b>200</b> optically reads an image of an original and converts the image into image data, and is comprised of a scanner unit <b>210</b> that reads the original, and an original feeder unit (DF unit) <b>250</b> that conveys the original. The printer section <b>300</b> conveys a recording sheet, and after printing image data on the recording sheet as a visible image, discharges the recording sheet to outside the multi-function apparatus <b>1001</b>. The printer section <b>300</b> is comprised of a feeder unit <b>360</b> that includes a plurality of types of recording sheet cassette, a marking unit <b>310</b> that transfers and fixes image data onto a recording sheet, and a discharging unit <b>370</b> that sorts and staples printed recording sheets and outputs the printed recording sheets to outside the multi-function apparatus <b>1001</b>.</p>
<p id="p-0050" num="0049">The controller section <b>110</b> is electrically connected to the reader section <b>200</b> and the printer section <b>300</b> and is also connected to host computers <b>401</b> and <b>402</b> via the LAN <b>1010</b>. It should be noted that the host computers <b>401</b>, <b>402</b> represent the various apparatuses connected to the LAN <b>1010</b> in <figref idref="DRAWINGS">FIG. 1</figref>. The controller section <b>110</b> also provides a copy function that controls the reader section <b>200</b> to read image data of an original and controls the printer section <b>300</b> to output the image data onto a recording sheet. The controller section <b>110</b> also provides a scanner (OCR) function that converts image data read by the reader section <b>200</b> into code data that is transmitted via the LAN <b>1010</b> to the host computers <b>401</b> and <b>402</b>, and a printer function that converts code data received from the host computers <b>401</b> and <b>402</b> via the LAN <b>1010</b> into image data that is outputted to the printer section <b>300</b>.</p>
<p id="p-0051" num="0050">The operating section <b>180</b> is connected to the controller section <b>110</b>, is composed of a liquid crystal touch panel, and provides a user interface for operating the multi-function apparatus <b>1001</b>.</p>
<p id="p-0052" num="0051"><figref idref="DRAWINGS">FIG. 3</figref> is a schematic cross-sectional view showing the construction of the reader section <b>200</b> and the printer section <b>300</b>. The original feeder unit <b>250</b> inside the reader section <b>200</b> feeds originals one sheet at a time from the top of a stack thereof to a platen glass <b>211</b>, and after the reading operation is completed for a fed original on the platen glass <b>211</b>, discharges the original.</p>
<p id="p-0053" num="0052">When an original has been conveyed onto the platen glass <b>211</b>, the reader section <b>200</b> turns on a lamp <b>212</b> and causes an optical unit <b>213</b> start to move to scan and expose to light the original. The light reflected from the original is guided by mirrors <b>214</b>, <b>215</b>, and <b>216</b> and a lens <b>217</b> to a CCD image sensor (hereinafter referred to simply as “CCD”) <b>218</b>. In this way, the image of the scanned original is read by the CCD <b>218</b>.</p>
<p id="p-0054" num="0053">Reference numeral <b>222</b> designates a reader image processing circuit (section) that carries out predetermined processing on image data outputted from the CCD <b>218</b> and outputs the image data via a scanner interface, not shown, to the controller section <b>110</b>. Reference numeral <b>352</b> designates a printer image processing circuit (section) that outputs image signals sent from the controller section <b>110</b> via a printer interface, not shown, to a laser driver <b>317</b> of the printer section <b>300</b>.</p>
<p id="p-0055" num="0054">The laser driver <b>317</b> of the printer section <b>300</b> drives laser emitters <b>313</b>, <b>314</b>, <b>315</b>, and <b>316</b> to cause the laser emitters <b>313</b>, <b>314</b>, <b>315</b>, and <b>316</b> to emit laser light in accordance with the image signals outputted from the printer image processing circuit <b>352</b>. The laser light is incident on photosensitive drums <b>325</b>, <b>326</b>, <b>327</b>, and <b>328</b> via mirrors <b>340</b>, <b>341</b>, <b>342</b>, <b>343</b>, <b>344</b>, <b>345</b>, <b>346</b>, <b>347</b>, <b>348</b>, <b>349</b>, <b>350</b>, and <b>351</b>, so that latent images are formed on the photosensitive drums <b>325</b>, <b>326</b>, <b>327</b>, and <b>328</b> in accordance with the laser light.</p>
<p id="p-0056" num="0055">Reference numerals <b>321</b>, <b>322</b>, <b>323</b>, and <b>324</b> designate developing units that develop the latent images using black (Bk), yellow (Y), cyan (C), and magenta (M) toner, respectively. The developed toner images in respective colors are transferred onto a recording sheet to produce a full-color printout.</p>
<p id="p-0057" num="0056">A recording sheet that has been fed from one of recording sheet cassettes <b>360</b><i>a </i>and <b>360</b><i>b </i>and a manual feed tray <b>362</b> in timing synchronized with the start of emission of the laser light is conveyed via a registration roller <b>333</b> and is attached to a transfer belt <b>334</b> to be further conveyed. Toner images that have been attached to the photosensitive drums <b>325</b>, <b>326</b>, <b>327</b>, and <b>328</b> are then transferred onto the recording sheet. The recording sheet onto which the toner images have been transferred is conveyed to a fixing section <b>335</b> that fixes the toner images onto the recording sheet using heat and pressure. The recording sheet that has passed the fixing section <b>335</b> is discharged by discharge rollers <b>336</b>, and then the discharging unit <b>370</b> bundles and sorts discharged recording sheets, and staples sorted recording sheets as required.</p>
<p id="p-0058" num="0057">On the other hand, when a double-sided recording mode is set, after the recording sheet has been conveyed to the discharge rollers <b>336</b>, the direction of rotation of the discharge rollers <b>336</b> is reversed, and the recording sheet is guided to a refeeding conveying path <b>338</b> by a flapper <b>337</b>. The recording sheet guided to the refeeding conveying path <b>338</b> is fed to the transfer belt <b>334</b> in the timing mentioned above.</p>
<p id="p-0059" num="0058"><figref idref="DRAWINGS">FIG. 4</figref> is a block diagram showing the construction of the reader image processing section <b>222</b>. The reader image processing section <b>222</b> is supplied with electric signals outputted from the CCD <b>218</b> that reads an original on the platen glass <b>211</b>.</p>
<p id="p-0060" num="0059">In the case where the CCD <b>218</b> is a color sensor, the CCD <b>218</b> may be implemented by a single-line CCD where red (R), green (G) and blue (B) color filters are provided in a line in the order of red (R), green (G) and blue (B) or by a three-line CCD where a red (R) filter, a green (G) filter, and a blue (B) filter are arranged on separate CCDs. The filters may be provided on a chip, or may be constructed separately to the CCD <b>218</b>.</p>
<p id="p-0061" num="0060">Electric signals (analog image signals)from the CCD <b>218</b> are inputted to the reader image processing section <b>222</b> and are sampled and held (S/H) by a clamp &amp; amp &amp; S/H &amp; A/D section <b>223</b>. The clamp &amp; amp &amp; S/H &amp; A/D section <b>223</b> clamps a dark level of the analog image signals at a reference potential, amplifies the analog image signals by a predetermined amount, and then carries out an A/D conversion, to convert the analog image signals into 8-bit digital signals for R, G, and B, respectively, for example. The RGB signals are subjected to a shading correction and a black correction by a shading section <b>224</b> at the next stage, and are then outputted to the controller section <b>110</b>.</p>
<p id="p-0062" num="0061"><figref idref="DRAWINGS">FIG. 5</figref> is a block diagram showing the construction of the controller section <b>110</b>. A main controller <b>111</b> mainly is comprised of a CPU <b>112</b>, a bus controller <b>113</b>, and various interface controllers including an asynchronous serial communication controller <b>114</b>. The CPU <b>112</b> and the bus controller <b>113</b> control the overall operation of the controller section <b>110</b>. The CPU <b>112</b> executes a program read from a ROM <b>120</b> via a ROM interface <b>121</b>. A process that interprets PDL (Page Description Language) code data received from a host computer and expands the same into raster image data is also described in this program.</p>
<p id="p-0063" num="0062">The bus controller <b>113</b> controls transfer of data inputted and outputted via various interfaces, and controls DMA (Direct Memory Access) data transfer as well as arbitration when there is a bus conflict. A DRAM <b>122</b> is connected to the main controller <b>111</b> via a DRAM interface <b>123</b>, and is used as a work area for operations by the CPU <b>112</b> and as an area for storing image data.</p>
<p id="p-0064" num="0063">The asynchronous serial communication controller <b>114</b> transmits and receives control commands to and from respective CPUs of the reader section <b>200</b> and the printer section <b>300</b> via serial buses <b>172</b>, and <b>173</b> and carries out communication for a touch panel and key inputs of the operating section <b>180</b>.</p>
<p id="p-0065" num="0064">A network controller <b>125</b> is connected to the main controller <b>111</b> via an interface <b>127</b> and is also connected to an external network via a connector <b>126</b>. For example, the external network can be typically implemented by a ETHERNET (registered trademark).</p>
<p id="p-0066" num="0065">A serial connector <b>124</b> is connected to the main controller <b>111</b> and communicates with an external apparatus. For example, the serial bus can be typically implemented by a USB. A fan <b>128</b> is connected to the main controller <b>111</b> and is used to cool the controller section <b>110</b>.</p>
<p id="p-0067" num="0066">A temperature monitoring IC <b>142</b> is connected to the main controller <b>111</b> via a serial bus <b>143</b> and is used for control of the fan <b>128</b>, temperature compensation of a real-time clock module <b>137</b>, and the like.</p>
<p id="p-0068" num="0067">A general-purpose high-speed bus <b>130</b> has connected thereto an expansion connector <b>135</b> for connecting an expansion board, an I/O controller <b>136</b>, an HD controller <b>131</b>, and a codec <b>133</b>. For example, the general-purpose high-speed bus <b>130</b> can be typically implemented by a PCI (Peripheral Component Interconnect) bus.</p>
<p id="p-0069" num="0068">The codec <b>133</b> compresses raster image data stored in the DRAM <b>122</b> according to a method such as MH, MR, MMR, JBIG, or JPEG, and conversely, expands compressed code data that has been stored into raster image data. An SRAM <b>134</b> is used as a temporary work area for the codec <b>133</b>. Transfers of data to and from the DRAM <b>122</b> are controlled by the bus controller <b>113</b> such that the data is DMA-transferred.</p>
<p id="p-0070" num="0069">The HD controller <b>131</b> is provided for connecting the controller section <b>110</b> to external storage devices. In the present embodiment, a hard disk drive <b>132</b> is connected via the HD controller <b>131</b>. The hard disk drive <b>132</b> is used to store programs and image data.</p>
<p id="p-0071" num="0070">The I/O controller <b>136</b> controls a data bus and also controls ports and interrupts. The panel interface <b>141</b> is connected to an LCD controller <b>140</b> and also connected to the serial communication controller <b>114</b> via a serial bus <b>171</b> and is comprised of an interface for performing display on a liquid crystal display of the operating section <b>180</b>, and a key input interface for making inputs hard keys or touch panel keys.</p>
<p id="p-0072" num="0071">The serial bus <b>171</b> transfers to the CPU <b>112</b> signals inputted using the touch panel attached to the liquid crystal display section or the hard keys of the operating section <b>180</b>. The panel interface <b>141</b> sends image data for display on the liquid crystal display section to the operating section <b>180</b>.</p>
<p id="p-0073" num="0072">The real-time clock module <b>137</b> updates and stores a date and time managed in the multi-function apparatus <b>1001</b>, and is backed up by a backup battery <b>138</b>. The SRAM <b>139</b> is also backed up by the backup battery <b>138</b>, and stores user modes, various kinds of setting information, file management information for the hard disk drive <b>132</b>, and the like.</p>
<p id="p-0074" num="0073">A graphic processor <b>151</b> carries out processes, such as image rotation, image magnification/reduction, color space conversion, binarization, scanner image input, and printer image output, on image data stored in the DRAM <b>122</b>. A DRAM <b>152</b> is used as a temporary work area for the graphic processor <b>151</b>. The graphic processor <b>151</b> is connected to the main controller <b>111</b> via an interface <b>150</b>. Data transfers to and from the DRAM <b>122</b> are controlled by the bus controller <b>113</b> such that the data is DMA-transferred.</p>
<p id="p-0075" num="0074">Connectors <b>160</b> and <b>155</b> are connected respectively to the reader section <b>200</b> and the printer section <b>300</b> and are provided respectively with an asynchronous serial interface (<b>173</b>, <b>172</b>) and a video interface (<b>163</b>, <b>162</b>).</p>
<p id="p-0076" num="0075">A scanner image processing section <b>157</b> is connected to the reader section <b>200</b> via the connector <b>160</b> and is also connected to the graphic processor <b>151</b> via a scanner bus <b>161</b>. The scanner image processing section <b>157</b> has a function of performing predetermined processing on an image received from the reader section <b>200</b> and also a function of outputting a control signal, which is generated based on a video control signal sent from the reader section <b>200</b>, to the scanner bus <b>161</b>. A FIFO <b>158</b> is connected to the scanner image processing section <b>157</b> and is used to perform a line correction on a video signal sent from the reader section <b>200</b>.</p>
<p id="p-0077" num="0076">A printer image processing section <b>153</b> is connected to the printer section <b>300</b> via the connector <b>155</b> and is also connected to the graphic processor <b>151</b> via a printer bus <b>156</b>. The printer image processing section <b>153</b> has a function of performing predetermined processing on image data outputted from the graphic processor <b>151</b> and then outputting the image data to the printer section <b>300</b>, and also a function of outputting a control signal, which is generated based on a video control signal sent from the printer section <b>300</b>, to a video interface <b>162</b>.</p>
<p id="p-0078" num="0077">A DRAM <b>154</b> is connected to the printer image processing section <b>153</b> and is used to delay a video signal by a fixed time period. Transfer of raster image data expanded on the DRAM <b>154</b> to the printer section <b>300</b> is controlled by the bus controller <b>113</b> such that the data is DMA-transferred to the printer section <b>300</b> via the graphic processor <b>151</b>, the printer image processing section <b>153</b>, and the connector <b>155</b>.</p>
<p id="p-0079" num="0078"><figref idref="DRAWINGS">FIG. 6</figref> is a block diagram showing the construction of the scanner image processing section <b>157</b>.</p>
<p id="p-0080" num="0079">In <figref idref="DRAWINGS">FIG. 6</figref>, the scanner image processing section <b>157</b> is comprised of a connection processing &amp; MTF (Modulation Transfer Function) correction section <b>601</b>, an input masking section <b>602</b>, and an ACS counting section <b>603</b>.</p>
<p id="p-0081" num="0080">The connection processing &amp; MTF correction section <b>601</b> adjusts a delay per line for an image signal sent from the reader section <b>200</b> via the connector <b>160</b> in accordance with the original reading speed, and corrects a modulation transfer function (MTF) that changes according to the original reading speed. For example, in the case where the CCD <b>218</b> is a three-line CCD, the signal timing is corrected such that the read position is the same between the three lines.</p>
<p id="p-0082" num="0081">Specifically, the connection processing &amp; MTF correction section <b>601</b> corrects the reading position timing for the image signal by using the FIFO <b>158</b> as a line delay buffer. The input masking section <b>602</b> corrects the image signal thus corrected for the reading position timing, according to spectral characteristics of the CCD <b>218</b> and spectral characteristics of the lamp <b>212</b> and the mirrors <b>214</b>, <b>215</b>, and <b>216</b>. The output from the input masking section <b>602</b> is sent to the ACS counting section <b>603</b> and the graphic processor <b>151</b>.</p>
<p id="p-0083" num="0082"><figref idref="DRAWINGS">FIGS. 7A and 7B</figref> are block diagram showing the construction of the printer image processing section <b>153</b>.</p>
<p id="p-0084" num="0083">In <figref idref="DRAWINGS">FIGS. 7A and 7B</figref>, the printer image processing section <b>153</b> is comprised of a LOG conversion section <b>701</b>, a moire removal section <b>702</b>, a UCR &amp; masking section <b>703</b>, a γ correction section <b>704</b>, a filter section <b>705</b>, and an output switch <b>706</b>, with these component elements being connected in series.</p>
<p id="p-0085" num="0084">The LOG conversion section <b>701</b> carries out a LOG conversion on an image signal input from the graphic processor <b>151</b> via the printer bus <b>156</b>, thereby converting the RGB signals into CMY signals.</p>
<p id="p-0086" num="0085">The moiré removal section <b>702</b> removes moiré from the CMY signals. The UCR &amp; masking section <b>703</b> carries out UCR processing on the CMY signals that have been subjected to moiré removal to generate CMYK signals, and also carries out masking on the CMYK signals into signals suitable for printer output. The signals thus produced by the UCR &amp; masking section <b>703</b> are subjected to a density adjustment in the γ correction section <b>704</b>, and are then subjected to smoothing and edge correction processing by the filter section <b>705</b>.</p>
<p id="p-0087" num="0086">The output switch <b>706</b> temporarily stores image data for the respective CMYK images in the DRAM <b>154</b> to compensate for the distances between the photosensitive drums <b>321</b> to <b>324</b>, and the image data for which the inter-drum distances have been corrected are sent via the connector <b>155</b> to the printer section <b>300</b>.</p>
<p id="p-0088" num="0087"><figref idref="DRAWINGS">FIG. 8</figref> is a block diagram showing the construction of the graphic processor <b>151</b>.</p>
<p id="p-0089" num="0088">In <figref idref="DRAWINGS">FIG. 8</figref>, the graphic processor <b>151</b> is comprised of modules for performing various image processes, such as an image rotation section <b>801</b> that carries out image rotation, an image magnification section <b>802</b> that carries out image magnification/reduction, color space conversion section <b>803</b> that carries out color space conversion, an image binarization section <b>805</b> that carries out binarization of image data, a scanner interface <b>806</b> that inputs a scanner image, a printer interface <b>807</b> that outputs a printer image, and an additional information detection section <b>809</b> that detects additional information.</p>
<p id="p-0090" num="0089">The modules mentioned above use the DRAM <b>152</b> as a temporary work area via a DRAM controller <b>808</b>. To prevent conflicts over the work area in the DRAM <b>152</b> used by the modules, work areas are statically assigned to the respective modules in advance.</p>
<p id="p-0091" num="0090">The graphic processor <b>151</b> is connected via the interface <b>150</b> to the bus controller <b>113</b>. Data transfer between the DRAM <b>122</b> and the graphic processor <b>151</b> is controlled by the bus controller <b>113</b> such that the data is DMA-transferred. The bus controller <b>113</b> provides control to set modes and the like of the respective modules of the graphic processor <b>151</b> and control of timing for transferring image data to the respective.</p>
<p id="p-0092" num="0091"><figref idref="DRAWINGS">FIG. 9</figref> is a view showing the layout of the operating section <b>180</b>.</p>
<p id="p-0093" num="0092">In <figref idref="DRAWINGS">FIG. 9</figref>, the operating section <b>180</b> has an LCD display section <b>3001</b> disposed at a central part, and a start key <b>3002</b>, an ID key <b>3004</b>, and a reset key <b>3005</b> disposed at a side of the LCD display section <b>3001</b> in the order mentioned from the bottom.</p>
<p id="p-0094" num="0093">The LCD display section <b>3001</b> is comprised of an LCD that displays an operating screen <b>3010</b> (see <figref idref="DRAWINGS">FIG. 10</figref>) and a touch panel sheet that is stuck on the entire surface of the LCD. The LCD display section <b>3001</b> displays the operating screen <b>3010</b> and when a displayed key is pressed on the touch panel sheet, position information indicative of the pressed position is transferred to the CPU <b>112</b> of the main controller <b>111</b>.</p>
<p id="p-0095" num="0094">The start key <b>3002</b> is used to start a reading operation for an image of an original. A dual color LED, i.e. a red and green LED is provided in the center of the start key <b>3002</b>, and according to the color indicated by the lit LED, it is possible to determine whether the start key can be used. A stop key <b>3003</b> is disposed above and to the right of the start key <b>3002</b>, and is used to stop an ongoing operation. The ID key <b>3004</b> is used to input a user ID of the user. The reset <b>3005</b> is used to initialize the settings of the operating section <b>180</b>.</p>
<p id="p-0096" num="0095"><figref idref="DRAWINGS">FIG. 10</figref> is a view showing the operating screen <b>3010</b>. The functions provided by the multi-function apparatus <b>1001</b> are roughly classified into six categories: Copy; Send; Retrieve; Tasks; Management; and Configuration. By pressing six main tabs (COPY <b>3011</b>, SEND <b>3012</b>, RETRIEVE <b>3013</b>, TASKS <b>3014</b>, MGMT <b>3015</b>, and CONFIG <b>3016</b>) displayed in an upper part of the operating screen <b>3010</b>, it is possible to switch between screens for the respective categories. The operating screen <b>3010</b> is configured such that when switching to a different category is not permitted, display colors of main tabs change and nothing happens when any main tab is pressed.</p>
<p id="p-0097" num="0096">The “Copy” category includes a function of using the scanner and printer in this multi-function apparatus <b>1001</b> to perform a normal copying operation for a document, and a function of using the scanner in this multi-function apparatus <b>1001</b> and a printer connected via a network to perform a copying operation for a document (“remote copying”).</p>
<p id="p-0098" num="0097">The “Send” category is a function of transferring a document placed on the scanner in this multi-function apparatus <b>1001</b> for electronic mail, to a remote printer, for a facsimile, for file transfer (FTP), or to a database, with it being possible to designate a plurality of destinations. The “Retrieve” category is a function of obtaining an external document and printing the document using the printer in this multi-function apparatus <b>1001</b>. Here, as examples, the document can be obtained via the WWW (World Wide Web), electronic mail, FTP, or facsimile.</p>
<p id="p-0099" num="0098">The “Tasks” category generates and manages tasks, such as “facsimile” and “Internet print”, for automatically processing documents sent from outside and periodically performing “Retrieve”. The “Management” category manages jobs, an address book, bookmarks, documents, account information, and the like. The “Configuration” category makes settings (such as network and clock settings) of this multi-function apparatus <b>1001</b>.</p>
<p id="p-0100" num="0099"><figref idref="DRAWINGS">FIG. 11</figref> is a view showing a COPY screen. The COPY screen is a display screen of the operating screen <b>3010</b> when a main COPY tag <b>3011</b> has been pressed. If the start button <b>3002</b> is pressed while the COPY screen is being displayed, the scanner operates and copies are outputted from a selected printer in accordance with various setting parameters that are displayed on the screen.</p>
<p id="p-0101" num="0100">The COPY screen is comprised of a printer selection button <b>3103</b>, a printer display region <b>3102</b>, an image quality selection button <b>3105</b>, an image quality display region <b>3104</b>, a copy parameter display section <b>3101</b> that is similar to the conventional copying apparatus, enlarge/reduce setting buttons <b>3106</b> and <b>3107</b>, a sheet selection button <b>3108</b>, a sorter setting button <b>3110</b>, a double-sided copy setting button <b>3112</b>, a density indicator <b>3100</b>, a density setting button <b>3109</b>, and a ten key <b>3114</b>.</p>
<p id="p-0102" num="0101">When the printer selection button <b>3103</b> is pressed, a list <b>3120</b> of usable printers (the printer in this multi-function apparatus <b>1001</b> and any printers connected via the network) is displayed as a pull-down menu as shown in <figref idref="DRAWINGS">FIG. 12</figref>. When a desired printer is selected from the list, the list vanishes and the selected printer name is displayed in the printer display region <b>3102</b>.</p>
<p id="p-0103" num="0102">When the image quality selection button <b>3105</b> is pressed, an image quality list is displayed from which a desired image quality can be selected. When the copy parameter setting buttons mentioned above are selectively pressed, a subscreen (enlarge/reduce setting, sheet selection, sorter setting, double-sided copy setting) is displayed for making the corresponding settings, so that parameters can be set in the same way as with the conventional copying apparatus. The density setting is also made via the same operation as with the conventional copying apparatus.</p>
<p id="p-0104" num="0103"><figref idref="DRAWINGS">FIG. 13</figref> is a flowchart showing the procedure of a PDL image output process.</p>
<p id="p-0105" num="0104">In <figref idref="DRAWINGS">FIG. 13</figref>, first, the user makes print settings for a PDL image output job on the PC (host computer) <b>401</b> in <figref idref="DRAWINGS">FIG. 2</figref> (step S<b>1</b>). The print settings include settings as to a number of copies, a sheet size, single-sided or double-sided, a page output order, sorted output on/off, stapling on/off, and the like.</p>
<p id="p-0106" num="0105">When a print instruction is issued on the PC <b>401</b>, driver software installed on the PC <b>401</b> converts code data in the PC <b>401</b> that is to be printed, into PDL data and transfers the PDL data together with the print setting parameters set in the step S<b>1</b> via the LAN <b>1010</b> to the controller section <b>110</b> of the multi-function apparatus <b>1001</b> (step S<b>2</b>).</p>
<p id="p-0107" num="0106">Based on the print setting parameters, the CPU <b>112</b> inside the main controller <b>111</b> of the controller section <b>110</b> expands the PDL data transferred via the connector <b>126</b> and the network controller <b>125</b> into image data, that is, the CPU <b>112</b> rasterizes the code data (step S<b>3</b>). This rasterizing of the image data is carried out in the DRAM <b>122</b>.</p>
<p id="p-0108" num="0107">When the rasterization of the image data is completed, the main controller <b>111</b> transfers the rasterized image data in the DRAM <b>122</b> to the graphic processor <b>151</b> (step S<b>4</b>). The graphic processor <b>151</b> carries out image processing independently of the print setting parameters (step S<b>5</b>). For example, regardless of whether the set sheet size designated by the print setting parameters is A4, when only A4R sheets are present in the feeder unit <b>360</b> of the printer section <b>300</b>, the graphic processor <b>151</b> can carry out image output suitable for the output sheet by rotating the image by 90 degrees.</p>
<p id="p-0109" num="0108">When such image processing of the image data is completed, the graphic processor <b>151</b> transfers the processed image data to the main controller <b>111</b> (step S<b>6</b>). The main controller <b>111</b> stores the transferred image data in the DRAM <b>122</b>.</p>
<p id="p-0110" num="0109">While controlling the printer section <b>300</b> via the graphic processor <b>151</b>, the printer image processing section <b>153</b>, and the connector <b>155</b>, the main controller <b>111</b> transfers the image data in the DRAM <b>122</b> to the printer section <b>300</b> in appropriate timing (step S<b>7</b>). The controller section <b>110</b> controls the printer section <b>300</b> to print out the image data (step S<b>8</b>). When all of the image data has been transferred, that is, when this PDL job is completed, the print output operation is terminated.</p>
<p id="p-0111" num="0110"><figref idref="DRAWINGS">FIG. 14</figref> is a flowchart showing the procedure of a copy image output process.</p>
<p id="p-0112" num="0111">In <figref idref="DRAWINGS">FIG. 14</figref>, first, the user makes copy settings for a copy image output job on the operating section <b>180</b> (step S<b>11</b>). These copy settings include settings as to a number of copies, a sheet size, single-sided or double-sided, an enlargement/reduction ratio, sorted output on/off, stapling on/off, and the like.</p>
<p id="p-0113" num="0112">When a copy start instruction is given on the operating section <b>180</b>, the main controller <b>111</b> of the controller section <b>110</b> controls the reader section <b>200</b> via the connector <b>160</b> to carry out a reading operation for image data of an original (step S<b>12</b>). First, the original feeder unit <b>250</b> feeds stacked originals one sheet at a time to the platen glass <b>211</b> and at the same time detects the size of the fed original. The original on the platen glass <b>211</b> is illuminated and scanned based on the detected size, whereby the image data is read. The read image data is compressed by the graphic processor <b>151</b> according to a designated image format, and the compressed image data is stored in the DRAM <b>122</b>.</p>
<p id="p-0114" num="0113">In the conventional copying apparatus, a magnification/reduction process in a sub-scanning direction is realized by changing the moving speed of the optical unit <b>213</b> in accordance with setting of the enlargement/reduction ratio in the copy settings, that is, the magnification/reduction ratio in the sub-scanning direction. In the copying apparatus of the present embodiment, however, image data is read 100% magnification or equimultiplication regardless of the setting of the enlargement/reduction ratio in the copy settings, and the magnification/reduction process is carried out in both the main scanning direction and the sub-scanning direction by the graphic processor <b>151</b>, as described later.</p>
<p id="p-0115" num="0114">The main controller <b>111</b> transfers the image data in the DRAM <b>122</b> to the graphic processor <b>151</b> (step S<b>13</b>). The graphic processor <b>151</b> carries out image processing based on the copy setting parameters (step S<b>14</b>). For example, when an enlargement of 400% has been set, the image magnification section <b>802</b> that is a module inside the graphic processor <b>151</b> is caused to perform a magnification/reduction process in both the main scanning direction and the sub-scanning direction.</p>
<p id="p-0116" num="0115">When the image processing of image data is completed, the graphic processor <b>151</b> compresses the processed image data according to the designated image format and transfers the compressed image data to the main controller <b>111</b>, which stores the transferred image data in the DRAM <b>122</b> (step S<b>15</b>).</p>
<p id="p-0117" num="0116">The main controller <b>111</b> converts the image data stored in the DRAM <b>122</b> into a file of a designated file format and transfers the image data file via the HD controller <b>131</b> to the HD drive <b>132</b>, thus storing the read image data in the HD drive <b>132</b>. These operations are repeated so long as there are originals on the DF unit <b>250</b>.</p>
<p id="p-0118" num="0117">The image data is then transferred to the printer section <b>300</b> (step S<b>16</b>). At this time, when no image data file to be printed is present in the DRAM <b>122</b>, an image file is read from the HD drive <b>132</b> and is stored in the DRAM <b>122</b>. While controlling the printer section <b>300</b> via the graphic processor <b>151</b>, the printer image processing section <b>153</b>, and the connector <b>155</b>, the main controller <b>111</b> transfers the image data in the DRAM <b>122</b> to the printer section <b>300</b> in appropriate timing.</p>
<p id="p-0119" num="0118">The controller section <b>110</b> controls the printer section <b>300</b> to print out the image data (step S<b>17</b>). When all of the image data has been transferred, that is, when the copy job is completed, the print output operation is terminated.</p>
<p id="p-0120" num="0119"><figref idref="DRAWINGS">FIG. 15</figref> is a flowchart showing the procedure of an original file copy image output process.</p>
<p id="p-0121" num="0120">In <figref idref="DRAWINGS">FIG. 15</figref>, first, the user makes settings for an original file copy image output job on the operating section <b>180</b> (step S<b>21</b>). These settings include settings as to a number of copies, a sheet size, single-sided or double-sided, an enlargement/reduction ratio, sorted output on/off, stapling on/off, and the like.</p>
<p id="p-0122" num="0121">When a copy start instruction has been given on the operating section <b>180</b>, the main controller <b>111</b> of the controller section <b>110</b> controls the reader section <b>200</b> via the connector <b>160</b> to carry out a reading operation for image data of an original (step S<b>22</b>). Specifically, first, the original feeder unit <b>250</b> feeds stacked originals one sheet at a time to the platen glass <b>211</b> and at the same time detects the size of the fed original. The original on the platen glass <b>211</b> is illuminated and scanned based on the detected size, thereby reading the image data. The read image data is compressed by the graphic processor <b>151</b> according to a designated image format, is transferred to the DRAM <b>122</b> (step S<b>22</b>A), and is thereafter stored in the DRAM <b>122</b>.</p>
<p id="p-0123" num="0122">The main controller <b>111</b> transfers the image data in the DRAM <b>122</b> to the additional information detection section <b>809</b> of the graphic processor <b>151</b>, where the additional information added to the original is detected (step S<b>23</b>). This additional information can be implemented in a variety of ways, such as by an electronic watermark embedded in an image, a bar code embedded in an image region, or a identification code, but is not limited to these examples and can be any information that can be added to an image.</p>
<p id="p-0124" num="0123">Then, a search for an original file corresponding to the original is carried out via the network (step S<b>24</b>). It is determined whether the original file has been found (step S<b>25</b>), and when the original file has been found, the file is expanded into PDL data by the PC <b>401</b> and the resulting PDL data is transferred to the multi-function apparatus <b>1001</b> via the LAN <b>1010</b> (step S<b>26</b>). At this time, print settings of the PDL image output job are carried out based on the settings of the original file copy image output job mentioned above. The received PDL data is processed and printed out in the same way as the PDL image output process described with reference to <figref idref="DRAWINGS">FIG. 13</figref> hereinbefore (step S<b>27</b>), and the present process is terminated.</p>
<p id="p-0125" num="0124">On the other hand, when the original file is not found in step S<b>25</b>, file path information obtained from the detected additional information is displayed on an operating/editing screen (see <figref idref="DRAWINGS">FIG. 16</figref>) of the operating screen <b>3010</b> as the LCD display section <b>3001</b>, to enable editing of the additional information (step S<b>28</b>). Although the file path information is used here, the additional information edited here is not limited to file path information, and any information that can indicate an original file, such as a URL, an electronic mail address, and a FAX number, may be used. Also, in the case where additional information such as a login name and a password is embedded in addition to file information on the original file, such information may be displayed and edited.</p>
<p id="p-0126" num="0125">As described above, according to the present embodiment, even when the image quality of an original is heavily degraded such that the additional information cannot be read or is not correctly recognized, the additional information can be corrected to make it possible to conduct a proper search for an original file. Further, the operating/editing screen is displayed to enable editing of the additional information only in the case where an existing original file cannot be found due to the additional information being incorrect, which enhances the operability of the multi-function apparatus more.</p>
<p id="p-0127" num="0126">Next, a second embodiment of the present invention will be described.</p>
<p id="p-0128" num="0127">A copying apparatus according to the second embodiment and a network system including this copying apparatus are identical in construction with the copying apparatus according to the first embodiment described above and the network system including the copying apparatus. The PDL image output process of <figref idref="DRAWINGS">FIG. 13</figref> and the copy image output process of <figref idref="DRAWINGS">FIG. 14</figref> are also applied to the second embodiment. While in the first embodiment, when an original file is not found (step S<b>25</b> in <figref idref="DRAWINGS">FIG. 15</figref>) in the original file copy image output process of <figref idref="DRAWINGS">FIG. 15</figref>, file path information obtained from the detected additional image is displayed on the operating/editing screen (see <figref idref="DRAWINGS">FIG. 16</figref>) as the operating screen <b>3010</b> of the LCD display section <b>3001</b> to enable editing of the file path information. The second embodiment is distinguished from the first embodiment in that when the additional information added to an original is detected in step S<b>23</b>, the file path information obtained from the detected additional information is immediately displayed on the operating/editing screen (see <figref idref="DRAWINGS">FIG. 16</figref>) as the operating screen <b>3010</b> of the LCD display section <b>3001</b> to enable editing of the additional information.</p>
<p id="p-0129" num="0128"><figref idref="DRAWINGS">FIG. 17</figref> is a flowchart showing the procedure of an original file copy image output process according to the second embodiment.</p>
<p id="p-0130" num="0129">This process is the same as the original file copy image output process of <figref idref="DRAWINGS">FIG. 15</figref> of the first embodiment in that any information that can indicate an original file corresponding to an original, such as a URL, an electronic mail address, and a FAX number, can be used in place of file path information. Also, if additional information such as a login name and a password is embedded in addition to file information on the original, such information may be displayed and edited. The construction of the operating section <b>180</b> is the same as in the first embodiment, and the operating/editing screen displayed as the operating screen <b>3010</b> of the LCD display section <b>3001</b> is the same as that displayed in <figref idref="DRAWINGS">FIG. 16</figref>.</p>
<p id="p-0131" num="0130">In <figref idref="DRAWINGS">FIG. 17</figref>, after the same processing has been carried out as in the steps S<b>21</b> to S<b>23</b> in <figref idref="DRAWINGS">FIG. 15</figref>, the file path information obtained from the detected additional information is displayed on the operating/editing screen (<figref idref="DRAWINGS">FIG. 16</figref>) as the operating screen <b>3010</b> of the LCD display section <b>3001</b> to enable editing of the additional information is enabled (step S<b>24</b>A). After this, when the editing of the additional information has been completed, a search is conducted via the LAN <b>1010</b> for an original file corresponding to the original (step S<b>25</b>A). When the original file is found, the file is expanded into PDL data by the PC <b>401</b> and the resulting PDL data is transferred via the LAN <b>1010</b> to the multi-function apparatus <b>1001</b> (step S<b>26</b>). At this time, print settings of the PDL image output job are carried out based on the settings of the original file copy image output job mentioned above. The received PDL data is processed and printed out in the same way as the PDL image output process described with reference to <figref idref="DRAWINGS">FIG. 13</figref> hereinbefore (step S<b>27</b>), and the present process is terminated</p>
<p id="p-0132" num="0131">As described above, according to the present embodiment, even when the image quality of an original is heavily degraded such that the additional information cannot be read or is not correctly recognized, the additional information can be corrected to make it possible to conduct a proper search for an original file. Further, it is possible to check whether or not the additional information is correct before a search is carried out for the original file so that the user can correct the additional information immediately upon determining that the additional information is incorrect.</p>
<p id="p-0133" num="0132">The present invention is not limited to the above described embodiments and can be applied to any construction that can achieve the functions described in the appended claims or the functions of the constructions of the above described embodiments.</p>
<p id="p-0134" num="0133">The present invention may either be applied to a system composed of a plurality of apparatuses (e.g. a host computer, interface equipment, a reader, and a printer) or to a single apparatus (e.g. a copying machine, a facsimile machine, or the like).</p>
<p id="p-0135" num="0134">It is to be understood that the present invention may also be accomplished by supplying a system or an apparatus with a storage medium in which a program code of software which realizes the functions of any of the above described embodiments is stored, and causing a computer (or CPU or MPU) of the system or apparatus to read out and execute the program code stored in the storage medium.</p>
<p id="p-0136" num="0135">In this case, the program code itself read out from the storage medium realizes the functions of any of the embodiments described above, and hence the storage medium in which the program code is stored constitutes the present invention.</p>
<p id="p-0137" num="0136">Examples of the storage medium for supplying the program code include a floppy (registered trademark) disk, a hard disk, an optical disk, a magneto-optical disk, a CD-ROM, a CD-R, a CD-RW, a DVD-ROM, a DVD-RAM, a DVD−RW, a DVD+RW, a magnetic tape, a nonvolatile memory card, a ROM, and an EEPROM. Alternatively, the program may be downloaded via a network.</p>
<p id="p-0138" num="0137">Further, it is to be understood that the functions of any of the above described embodiments may be accomplished not only by executing a program code read out by a computer, but also by causing an OS (operating system) or the like which operates on the computer to perform a part or all of the actual operations based on instructions of the program code.</p>
<p id="p-0139" num="0138">Further, it is to be understood that the functions of any of the above described embodiments may be accomplished by writing a program code read out from the medium, such as a storage medium, into a memory provided on an expansion board inserted into a computer or in an expansion unit connected to the computer and then causing a CPU or the like provided in the expansion board or the expansion unit to perform a part or all of the actual operations based on instructions of the program code.</p>
<?DETDESC description="Detailed Description" end="tail"?>
</description>
<us-claim-statement>What is claimed is:</us-claim-statement>
<claims id="claims">
<claim id="CLM-00001" num="00001">
<claim-text>1. A copying apparatus comprising:
<claim-text>an image input device that inputs an image signal read from an original;</claim-text>
<claim-text>an additional information reading device that reads additional information from the inputted image signal;</claim-text>
<claim-text>a file path information obtaining device that obtains file path information from the read additional information, the file path information addressing a location where an original file corresponding to the original is stored;</claim-text>
<claim-text>a search device that carries out a search for the original file corresponding to the original based on the file path information obtained from the read additional information;</claim-text>
<claim-text>a copy output device that outputs a copy of the original using the original file found as a result of the search by said search device;</claim-text>
<claim-text>a display device that displays the file path information obtained from the read additional information;</claim-text>
<claim-text>an editing device that edits the displayed file path information;</claim-text>
<claim-text>a determining device that determines whether said search device found the original file based on the file path information obtained from the read additional information; and</claim-text>
<claim-text>a controller that prompts a user to correct the displayed file path information with said editing device, and controls said search device to carry out the search for the original file with the corrected file path information when said determining device determines that said search device did not find the original file based on the file path information obtained from the read additional information,</claim-text>
<claim-text>wherein said controller controls said copy output device to output the copy of the original file searched by said search device without displaying the file path information in said display device when said determining device determines that said search device found the original file based on the file path information obtained from the read additional information.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00002" num="00002">
<claim-text>2. A copying apparatus as claimed in <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein said controller determines that editing of the file path information obtained from the additional information by said editing device is possible when the original file has not been found as a result of the search by said search device.</claim-text>
</claim>
<claim id="CLM-00003" num="00003">
<claim-text>3. A copying apparatus as claimed in <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein said controller determines that the search for the original file by said search device is possible when editing of the file path information obtained from the additional information read from the inputted image signal is completed.</claim-text>
</claim>
<claim id="CLM-00004" num="00004">
<claim-text>4. A copying apparatus as claimed in <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the copying apparatus is connected to at least one information processing apparatus via a network or a communication line, and wherein said search device searches the at least one information processing apparatus for the original file.</claim-text>
</claim>
<claim id="CLM-00005" num="00005">
<claim-text>5. A copying apparatus as claimed in <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the additional information comprises electronic watermark information embedded in the original.</claim-text>
</claim>
<claim id="CLM-00006" num="00006">
<claim-text>6. A copying apparatus as claimed in <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the additional information comprises barcode information printed on the original.</claim-text>
</claim>
<claim id="CLM-00007" num="00007">
<claim-text>7. A method of controlling a copying apparatus, comprising:
<claim-text>an image inputting step of inputting an image signal read from an original;</claim-text>
<claim-text>an additional information reading step of reading additional information from the inputted image signal;</claim-text>
<claim-text>a file path information obtaining step of obtaining file path information from the read additional information, the file path information addressing a location where an original file corresponding to the original is stored;</claim-text>
<claim-text>a searching step of carrying out a search for the original file corresponding to the original based on the file path information obtained from the read additional information;</claim-text>
<claim-text>a copy outputting step of outputting a copy of the original using the original file found as a result of the search in said searching step;</claim-text>
<claim-text>a displaying step of displaying the file path information obtained from the read additional information;</claim-text>
<claim-text>an editing step of editing the displayed file path information;</claim-text>
<claim-text>a determining step of determining whether said searching step found the original file based on the file path information obtained from the read additional information; and</claim-text>
<claim-text>a controlling step of prompting a user to correct the displayed file path information by the editing in said editing step, and controlling said searching step to carry out the search for the original file using the corrected file path information when said determining step determines that said searching step did not find the original file based on the file path information obtained from the read additional information,</claim-text>
<claim-text>wherein said controlling step controls said copy output step to output the copy of the original file searched by said search step without displaying the file path information-in said displaying step when said determining step determines that the original file based on the file path information obtained from the read additional information was found in said search step.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00008" num="00008">
<claim-text>8. A method as claimed in <claim-ref idref="CLM-00007">claim 7</claim-ref>, wherein it is determined in said controlling step that editing of the file path information obtained from the additional information in said editing step is possible when the original file has not been found as a result of the search in said searching step.</claim-text>
</claim>
<claim id="CLM-00009" num="00009">
<claim-text>9. A method as claimed in <claim-ref idref="CLM-00007">claim 7</claim-ref>, wherein it is determined in said controlling step that the search for the original file in said searching step is possible when editing of the file path information obtained from the additional information read from the inputted image signal is completed.</claim-text>
</claim>
<claim id="CLM-00010" num="00010">
<claim-text>10. A method as claimed in <claim-ref idref="CLM-00007">claim 7</claim-ref>, wherein the copying apparatus is connected at least one information processing apparatus via a network or a communication line, and wherein in said searching step the at least one information processing apparatus is searched for the original file.</claim-text>
</claim>
<claim id="CLM-00011" num="00011">
<claim-text>11. A method as claimed in <claim-ref idref="CLM-00007">claim 7</claim-ref>, wherein the additional information comprises electronic watermark information embedded in the original.</claim-text>
</claim>
<claim id="CLM-00012" num="00012">
<claim-text>12. A method as claimed in <claim-ref idref="CLM-00007">claim 7</claim-ref>, wherein the additional information comprises barcode information printed on the original.</claim-text>
</claim>
<claim id="CLM-00013" num="00013">
<claim-text>13. A computer-readable storage device storing a computer program for controlling a copying apparatus, the computer program comprising:
<claim-text>an image input module for inputting an image signal read from an original;</claim-text>
<claim-text>an additional information reading module for reading additional information from the inputted image signal;</claim-text>
<claim-text>a file path information obtaining module for obtaining file path information from the read additional information, the file path information addressing a location where an original file corresponding to the original is stored;</claim-text>
<claim-text>a search module for carrying out a search for the original file corresponding to the original based on the file path information obtained from the read additional information;</claim-text>
<claim-text>a copy output module for outputting a copy of the original using the original file found as a result of the search by said search module;</claim-text>
<claim-text>a display module for displaying the file path information obtained from the read additional information;</claim-text>
<claim-text>an editing module for editing the displayed file path information;</claim-text>
<claim-text>a determining module for determining whether said search module found the original file based on the file path information obtained from the read additional information; and</claim-text>
<claim-text>a controlling module for prompting a user to correct the displayed file path information by the editing in said editing module, and controlling said search module to carry out the search for the original file using the corrected file path information when said determining module determines that said search module did not find the original file based on the file path information obtained from the read additional information,</claim-text>
<claim-text>wherein said controlling module controls said copy output module to output the copy of the original file searched by said search module without displaying the file path information by said display module when said determining module determines that the original file based on the file path information obtained from the read additional information was found by said search module.</claim-text>
</claim-text>
</claim>
</claims>
</us-patent-grant>
