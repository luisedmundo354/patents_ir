<us-patent-grant lang="EN" dtd-version="v4.2 2006-08-23" file="US07299248-20071120.XML" status="PRODUCTION" id="us-patent-grant" country="US" date-produced="20071106" date-publ="20071120">
<us-bibliographic-data-grant>
<publication-reference>
<document-id>
<country>US</country>
<doc-number>07299248</doc-number>
<kind>B2</kind>
<date>20071120</date>
</document-id>
</publication-reference>
<application-reference appl-type="utility">
<document-id>
<country>US</country>
<doc-number>10885532</doc-number>
<date>20040629</date>
</document-id>
</application-reference>
<us-application-series-code>10</us-application-series-code>
<us-term-of-grant>
<us-term-extension>477</us-term-extension>
</us-term-of-grant>
<classifications-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>G</section>
<class>06</class>
<subclass>F</subclass>
<main-group>17</main-group>
<subgroup>30</subgroup>
<symbol-position>F</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20071120</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
</classifications-ipcr>
<classification-national>
<country>US</country>
<main-classification>707200</main-classification>
<further-classification>707  1</further-classification>
<further-classification>707  2</further-classification>
<further-classification>382170</further-classification>
</classification-national>
<invention-title id="d0e53">Method, system, program for determining frequency of updating database histograms</invention-title>
<references-cited>
<citation>
<patcit num="00001">
<document-id>
<country>US</country>
<doc-number>5870196</doc-number>
<kind>A</kind>
<name>Lulli et al.</name>
<date>19990200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>356511</main-classification></classification-national>
</citation>
<citation>
<patcit num="00002">
<document-id>
<country>US</country>
<doc-number>5870752</doc-number>
<kind>A</kind>
<name>Gibbons et al.</name>
<date>19990200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>707102</main-classification></classification-national>
</citation>
<citation>
<patcit num="00003">
<document-id>
<country>US</country>
<doc-number>6038341</doc-number>
<kind>A</kind>
<name>Takeshima et al.</name>
<date>20000300</date>
</document-id>
</patcit>
<category>cited by other</category>
<classification-national><country>US</country><main-classification>382168</main-classification></classification-national>
</citation>
<citation>
<patcit num="00004">
<document-id>
<country>US</country>
<doc-number>6181817</doc-number>
<kind>B1</kind>
<name>Zabih et al.</name>
<date>20010100</date>
</document-id>
</patcit>
<category>cited by other</category>
<classification-national><country>US</country><main-classification>382170</main-classification></classification-national>
</citation>
<citation>
<patcit num="00005">
<document-id>
<country>US</country>
<doc-number>6201176</doc-number>
<kind>B1</kind>
<name>Yourlo</name>
<date>20010300</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification> 84609</main-classification></classification-national>
</citation>
<citation>
<patcit num="00006">
<document-id>
<country>US</country>
<doc-number>6278989</doc-number>
<kind>B1</kind>
<name>Chaudhuri et al.</name>
<date>20010800</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>707  2</main-classification></classification-national>
</citation>
<citation>
<patcit num="00007">
<document-id>
<country>US</country>
<doc-number>6460045</doc-number>
<kind>B1</kind>
<name>Aboulnaga et al.</name>
<date>20021000</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>707102</main-classification></classification-national>
</citation>
<citation>
<patcit num="00008">
<document-id>
<country>US</country>
<doc-number>6507668</doc-number>
<kind>B1</kind>
<name>Park</name>
<date>20030100</date>
</document-id>
</patcit>
<category>cited by other</category>
<classification-national><country>US</country><main-classification>382169</main-classification></classification-national>
</citation>
<citation>
<patcit num="00009">
<document-id>
<country>US</country>
<doc-number>6850925</doc-number>
<kind>B2</kind>
<name>Chaudhuri et al.</name>
<date>20050200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>707  2</main-classification></classification-national>
</citation>
<citation>
<patcit num="00010">
<document-id>
<country>US</country>
<doc-number>6957387</doc-number>
<kind>B2</kind>
<name>Barbieri</name>
<date>20051000</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>715719</main-classification></classification-national>
</citation>
<citation>
<patcit num="00011">
<document-id>
<country>US</country>
<doc-number>7007039</doc-number>
<kind>B2</kind>
<name>Chaudhuri et al.</name>
<date>20060200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>707200</main-classification></classification-national>
</citation>
<citation>
<patcit num="00012">
<document-id>
<country>US</country>
<doc-number>7010516</doc-number>
<kind>B2</kind>
<name>Leslie</name>
<date>20060300</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>707  2</main-classification></classification-national>
</citation>
<citation>
<patcit num="00013">
<document-id>
<country>US</country>
<doc-number>2002/0087518</doc-number>
<kind>A1</kind>
<name>Ellis et al.</name>
<date>20020700</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>707  2</main-classification></classification-national>
</citation>
<citation>
<patcit num="00014">
<document-id>
<country>US</country>
<doc-number>2002/0168106</doc-number>
<kind>A1</kind>
<name>Trajkovic</name>
<date>20021100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>382170</main-classification></classification-national>
</citation>
<citation>
<patcit num="00015">
<document-id>
<country>US</country>
<doc-number>2002/0198896</doc-number>
<kind>A1</kind>
<name>Chaudhuri et al.</name>
<date>20021200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>707200</main-classification></classification-national>
</citation>
<citation>
<patcit num="00016">
<document-id>
<country>US</country>
<doc-number>2003/0018615</doc-number>
<kind>A1</kind>
<name>Chaudhuri et al.</name>
<date>20030100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>707  1</main-classification></classification-national>
</citation>
<citation>
<patcit num="00017">
<document-id>
<country>US</country>
<doc-number>2003/0028631</doc-number>
<kind>A1</kind>
<name>Rhodes</name>
<date>20030200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>709224</main-classification></classification-national>
</citation>
<citation>
<patcit num="00018">
<document-id>
<country>US</country>
<doc-number>2003/0055813</doc-number>
<kind>A1</kind>
<name>Chaudhuri et al.</name>
<date>20030300</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>707  3</main-classification></classification-national>
</citation>
<citation>
<patcit num="00019">
<document-id>
<country>US</country>
<doc-number>2003/0088542</doc-number>
<kind>A1</kind>
<name>McGee et al.</name>
<date>20030500</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>707  1</main-classification></classification-national>
</citation>
<citation>
<patcit num="00020">
<document-id>
<country>US</country>
<doc-number>2003/0135485</doc-number>
<kind>A1</kind>
<name>Leslie</name>
<date>20030700</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>707  3</main-classification></classification-national>
</citation>
<citation>
<patcit num="00021">
<document-id>
<country>US</country>
<doc-number>2004/0122845</doc-number>
<kind>A1</kind>
<name>Lohman et al.</name>
<date>20040600</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>707102</main-classification></classification-national>
</citation>
<citation>
<patcit num="00022">
<document-id>
<country>US</country>
<doc-number>2004/0236762</doc-number>
<kind>A1</kind>
<name>Chaudhuri et al.</name>
<date>20041100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>707100</main-classification></classification-national>
</citation>
<citation>
<patcit num="00023">
<document-id>
<country>US</country>
<doc-number>2005/0131914</doc-number>
<kind>A1</kind>
<name>Abdo et al.</name>
<date>20050600</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>707100</main-classification></classification-national>
</citation>
<citation>
<nplcit num="00024">
<othercit>Mannino, Michael et al., “Statistical Profile Estimation in Database Systems”, ACM Computing Services vol. 20, No. 3, Sep. 1998.</othercit>
</nplcit>
<category>cited by examiner</category>
</citation>
</references-cited>
<number-of-claims>10</number-of-claims>
<us-exemplary-claim>1</us-exemplary-claim>
<us-field-of-classification-search>
<classification-national>
<country>US</country>
<main-classification>707  1</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>382170</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>356357</main-classification>
</classification-national>
</us-field-of-classification-search>
<figures>
<number-of-drawing-sheets>13</number-of-drawing-sheets>
<number-of-figures>13</number-of-figures>
</figures>
<us-related-documents>
<related-publication>
<document-id>
<country>US</country>
<doc-number>20050289191</doc-number>
<kind>A1</kind>
<date>20051229</date>
</document-id>
</related-publication>
</us-related-documents>
<parties>
<applicants>
<applicant sequence="001" app-type="applicant-inventor" designation="us-only">
<addressbook>
<last-name>Popivanov</last-name>
<first-name>Ivan</first-name>
<address>
<city>Markham</city>
<country>CA</country>
</address>
</addressbook>
<nationality>
<country>CA</country>
</nationality>
<residence>
<country>CA</country>
</residence>
</applicant>
</applicants>
<agents>
<agent sequence="01" rep-type="attorney">
<addressbook>
<orgname>Sughrue Mion, PLLC</orgname>
<address>
<country>unknown</country>
</address>
</addressbook>
</agent>
</agents>
</parties>
<assignees>
<assignee>
<addressbook>
<orgname>International Business Machines Corporation</orgname>
<role>02</role>
<address>
<city>Armonk</city>
<state>NY</state>
<country>US</country>
</address>
</addressbook>
</assignee>
</assignees>
<examiners>
<primary-examiner>
<last-name>Truong</last-name>
<first-name>Cam-Y</first-name>
<department>2162</department>
</primary-examiner>
<assistant-examiner>
<last-name>Myint</last-name>
<first-name>Dennis</first-name>
</assistant-examiner>
</examiners>
</us-bibliographic-data-grant>
<abstract id="abstract">
<p id="p-0001" num="0000">A method, system and computer program product for a database management system to be operatively coupled to a data processing system. The data processing system includes memory for storing a data table. The method, system and computer program product for determining frequency of updating a histogram of the data table. The method includes determining sampled histograms for sample portions of the data table from time to time, computing a difference between at least two of the determined sampled histograms, and determining a frequency with which to update the histogram of the data table depending on the amount of the computed difference.</p>
</abstract>
<drawings id="DRAWINGS">
<figure id="Fig-EMI-D00000" num="00000">
<img id="EMI-D00000" he="162.64mm" wi="227.84mm" file="US07299248-20071120-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00001" num="00001">
<img id="EMI-D00001" he="231.22mm" wi="178.48mm" orientation="landscape" file="US07299248-20071120-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00002" num="00002">
<img id="EMI-D00002" he="193.38mm" wi="142.24mm" orientation="landscape" file="US07299248-20071120-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00003" num="00003">
<img id="EMI-D00003" he="167.64mm" wi="169.33mm" orientation="landscape" file="US07299248-20071120-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00004" num="00004">
<img id="EMI-D00004" he="208.20mm" wi="170.35mm" orientation="landscape" file="US07299248-20071120-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00005" num="00005">
<img id="EMI-D00005" he="217.85mm" wi="150.45mm" orientation="landscape" file="US07299248-20071120-D00005.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00006" num="00006">
<img id="EMI-D00006" he="217.25mm" wi="155.02mm" orientation="landscape" file="US07299248-20071120-D00006.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00007" num="00007">
<img id="EMI-D00007" he="172.04mm" wi="122.85mm" orientation="landscape" file="US07299248-20071120-D00007.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00008" num="00008">
<img id="EMI-D00008" he="194.06mm" wi="116.84mm" orientation="landscape" file="US07299248-20071120-D00008.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00009" num="00009">
<img id="EMI-D00009" he="202.44mm" wi="182.71mm" file="US07299248-20071120-D00009.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00010" num="00010">
<img id="EMI-D00010" he="180.17mm" wi="138.85mm" file="US07299248-20071120-D00010.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00011" num="00011">
<img id="EMI-D00011" he="189.65mm" wi="156.46mm" file="US07299248-20071120-D00011.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00012" num="00012">
<img id="EMI-D00012" he="137.50mm" wi="117.86mm" file="US07299248-20071120-D00012.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00013" num="00013">
<img id="EMI-D00013" he="219.96mm" wi="152.65mm" file="US07299248-20071120-D00013.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
</drawings>
<description id="description">
<?BRFSUM description="Brief Summary" end="lead"?>
<heading id="h-0001" level="1">FIELD OF THE INVENTION</heading>
<p id="p-0002" num="0001">The present invention relates to database management systems, and more specifically relates to a method, a system and a computer program product for determining frequency of updating database histograms.</p>
<heading id="h-0002" level="1">BACKGROUND</heading>
<p id="p-0003" num="0002">Object (e.g., table, index, etc) histograms are an important aspect of a database. Histograms are used by a query optimizer of a database management system (DBMS) to estimate the cost of alternative data access plans (for a given database query) for accessing the data stored in a data table contained in the database, and to select the most efficient data access plan for that data table. Therefore the task of recomputing histograms for a data table is an important task to be executed by the DBMS so that the most cost effective access plan may be selected for database queries to be received in the future.</p>
<p id="p-0004" num="0003">There are known methods for directing the DBMS to compute histograms for a data table, such as for example the Chi-Square test, the Kolmogorov-Smirnov test, etc. However, these known methods have drawbacks. The DBMS may use the Kolmogorov-Smirnov to examine histograms which may indicate a measure of a “maximum estimation error” that the query optimizer may incur for a particular histogram. Reliance on the Kolmogorov-Smirnov test may cause the DBMS to experience difficulty in determining just when it may be desirable to recompute histograms for each column of the data table.</p>
<p id="p-0005" num="0004">Accordingly, a solution is desired that addresses, at least in part, these shortcomings.</p>
<heading id="h-0003" level="1">SUMMARY</heading>
<p id="p-0006" num="0005">The present invention obviates or mitigates at least some of the above mentioned disadvantages.</p>
<p id="p-0007" num="0006">In a first aspect of the present invention, there is provided, for a database management system to be operatively coupled to a data processing system, the data processing system comprising memory for storing a data table, a method of determining frequency of updating a histogram of the data table, the method including determining sampled histograms for sample portions of the data table from time to time, computing a difference between at least two of the determined sampled histograms, and determining a frequency with which to update the histogram of the data table depending on the amount of the computed difference.</p>
<p id="p-0008" num="0007">In a second aspect of the present invention, there is provided a database management system to be operatively coupled to a data processing system, the data processing system comprising memory for storing a data table, a method of determining frequency of updating a histogram of the data table, the database management system including means for determining sampled histograms for sample portions of the data table from time to time, means for computing a difference between at least two of the determined sampled histograms, and means for determining a frequency with which to update the histogram of the data table depending on the amount of the computed difference.</p>
<p id="p-0009" num="0008">In a third aspect of the present invention, there is provided for a database management system to be operatively coupled to a data processing system, the data processing system comprising memory for storing a data table, a computer programmed product for directing the database management system to determine frequency of updating a histogram of the data table, the computer programmed product including a computer readable medium for tangibly transporting computer executable code, the computer executable code including code for determining sampled histograms for sample portions of the data table from time to time, code for computing a difference between at least two of the determined sampled histograms, and code for determining a frequency with which to update the histogram of the data table depending on the amount of the computed difference.</p>
<?BRFSUM description="Brief Summary" end="tail"?>
<?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?>
<description-of-drawings>
<heading id="h-0004" level="1">BRIEF DESCRIPTION OF THE DRAWINGS</heading>
<p id="p-0010" num="0009">A better understanding of these and other embodiments of the present invention may be obtained with reference to the following drawings and detailed description of the preferred embodiments, in which:</p>
<p id="p-0011" num="0010"><figref idref="DRAWINGS">FIG. 1</figref> shows a statistical analysis system (SAS) coupled to a database management system (DBMS) installed in a data processing system (DPS) having memory for storing a data table, table column histograms, a histogram comparison table and a frequency for updating table column histograms;</p>
<p id="p-0012" num="0011"><figref idref="DRAWINGS">FIG. 2</figref> shows the data table of <figref idref="DRAWINGS">FIG. 1</figref>;</p>
<p id="p-0013" num="0012"><figref idref="DRAWINGS">FIG. 3</figref> shows the table column histograms of <figref idref="DRAWINGS">FIG. 1</figref>;</p>
<p id="p-0014" num="0013"><figref idref="DRAWINGS">FIG. 4</figref> shows the table column histograms of <figref idref="DRAWINGS">FIG. 1</figref>, in which the table column histograms are readjusted along their x-axis;</p>
<p id="p-0015" num="0014"><figref idref="DRAWINGS">FIG. 5</figref> shows a difference between the table column histograms shown in <figref idref="DRAWINGS">FIG. 4</figref>;</p>
<p id="p-0016" num="0015"><figref idref="DRAWINGS">FIG. 6</figref> shows a portion of the difference between histograms of <figref idref="DRAWINGS">FIG. 5</figref>;</p>
<p id="p-0017" num="0016"><figref idref="DRAWINGS">FIG. 7</figref> shows a computed difference between two histograms, and the computer difference is compared against a preset threshold level.</p>
<p id="p-0018" num="0017"><figref idref="DRAWINGS">FIG. 8</figref> shows the frequency for updating table column histograms of <figref idref="DRAWINGS">FIG. 1</figref>;</p>
<p id="p-0019" num="0018"><figref idref="DRAWINGS">FIGS. 9A</figref>, <b>9</b>B, <b>9</b>C and <b>9</b>D show operation of the SAS of <figref idref="DRAWINGS">FIG. 1</figref>; and</p>
<p id="p-0020" num="0019"><figref idref="DRAWINGS">FIG. 10</figref> shows operation of the DBMS of <figref idref="DRAWINGS">FIG. 1</figref>.</p>
</description-of-drawings>
<?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?>
<?DETDESC description="Detailed Description" end="lead"?>
<heading id="h-0005" level="1">Similar references are used in different figures to denote similar components.</heading>
<heading id="h-0006" level="1">DETAILED DESCRIPTION OF THE EMBODIMENTS</heading>
<p id="p-0021" num="0020">The following detailed description of the embodiments of the present invention does not limit the implementation of the embodiments to any particular computer programming language. The computer program product may be implemented in any computer programming language provided that the OS (Operating System) provides the facilities that may support the requirements of the computer program product. A preferred embodiment is implemented in the C or C++ computer programming language (or may be implemented in other computer programming languages in conjunction with C/C++). Any limitations presented would be a result of a particular type of operating system, computer programming language, or data processing system and would not be a limitation of the embodiments described herein.</p>
<p id="p-0022" num="0021"><figref idref="DRAWINGS">FIG. 1</figref> shows a statistical analysis system (SAS) <b>102</b> coupled to a database management system (DBMS) <b>100</b> installed in a memory <b>104</b> of a data processing system (DPS) <b>106</b>. The memory <b>104</b> is used for storing a data table <b>126</b>, table column histograms <b>130</b>, a histogram comparisons table <b>132</b> and frequency of updating table column histograms <b>134</b>. The DBMS <b>100</b> and the SAS <b>102</b> include computer executable code which directs the DPS<b>106</b> perform operations to be detailed further below. A compiler (not depicted) was used to generate the computer executable code by compiling source code (not depicted) having computer programming instructions. The source code was written in a high level computer programming language. A person skilled in the art may be able to derive the source code by inspection of the operations of the DBMS <b>100</b> and SAS <b>102</b> to be provided further below.</p>
<p id="p-0023" num="0022">The memory <b>104</b> is operatively coupled to a bus <b>110</b>. Operatively coupled to the bus <b>110</b> is a central processing unit (CPU) <b>112</b> and an input/output interface (I/O) <b>114</b>. The CPU <b>112</b> executes the computer executable code included in DBMS <b>100</b> and the SAS <b>102</b>. Operatively coupled to the I/O <b>114</b> is a display unit <b>116</b> for displaying a query response <b>128</b> generated by the DBMS <b>100</b> and/or for displaying other output derived from the SAS <b>102</b>, a keyboard and mouse <b>118</b> for inputting a query <b>124</b> and/or other commands from a user, a disc <b>120</b> and a network <b>122</b>. The disc <b>120</b> is a computer program product having a computer readable medium tangibly embodying and transporting the computer executable code to the memory <b>104</b> via the I/O <b>114</b> and the bus <b>110</b>. Also, the network <b>122</b> includes a signal carrier which may be considered to be a computer program product which may also embody and transport the computer executable code to the memory <b>104</b> via the I/O <b>114</b> and the bus <b>110</b>.</p>
<p id="p-0024" num="0023">The memory <b>104</b> includes an operating system <b>108</b> which takes care of basic operating requirements of the DPS <b>106</b>. The memory <b>104</b> stores the data table <b>126</b> which includes data organized into table columns. The DBMS <b>100</b> and the SAS <b>102</b> both interface and interact with the data table <b>126</b>. The SAS <b>102</b> interacts with the table column histograms <b>130</b> and the histogram comparisons table <b>132</b> and the frequency of updating histograms <b>134</b>. The operations used by the DBMS <b>100</b> and the SAS <b>102</b> for interacting with the data table <b>126</b>, the table column histograms <b>130</b>, the histogram comparisons table <b>132</b> and the frequency of updating histograms <b>134</b> will be described further below.</p>
<p id="p-0025" num="0024"><figref idref="DRAWINGS">FIG. 2</figref> shows the data table <b>126</b> of <figref idref="DRAWINGS">FIG. 1</figref>. The data table <b>126</b> includes three columns. Column <b>202</b> is labeled NAME, column <b>204</b> is labeled SALARY, and column <b>206</b> is labeled DATE BEGAN EMPLOYMENT. The DBMS <b>100</b> manages the data contained in the data table <b>126</b> by following user requests and commands received via keyboard <b>118</b>.</p>
<p id="p-0026" num="0025">Table rows <b>208</b>, <b>210</b>, <b>212</b> and <b>214</b> all contain data under table columns <b>202</b>, <b>204</b> and <b>206</b>. For example: in row <b>208</b> data SMITH under the column NAME <b>202</b> is associated with a salary of $15,000 under column SALARY <b>204</b>. Similarly in the table row <b>210</b>, data JONES is associated with a salary of $21,000. Likewise in row <b>214</b>, data KRAMDEN is associated with a salary of $26,000. Typically, the data table <b>126</b> may be approximately one terabyte in size or larger. The example shown in the data table <b>126</b> is but a portion contained in the data table <b>126</b>.</p>
<p id="p-0027" num="0026"><figref idref="DRAWINGS">FIG. 3</figref> shows the table column histograms <b>130</b> of <figref idref="DRAWINGS">FIG. 1</figref>. The table <b>130</b> includes a column YEAR <b>302</b> and another column SALARY HISTORGRAM <b>304</b>. The SAS <b>102</b> computes the histograms for a table column of the data table <b>126</b>. The SAS <b>102</b> computes the histograms and inserts them into the table column histograms <b>130</b>. A table column <b>304</b> contains histograms associated with the column SALARY of the data table <b>126</b> (i.e., column SALARAY <b>204</b> of the data table <b>126</b>).</p>
<p id="p-0028" num="0027">Table rows <b>306</b>, <b>308</b> of the table column histograms <b>130</b> store specific histograms taken at different points in time (as indicated in column <b>302</b> of each table row <b>306</b>, <b>308</b>). For example table row <b>306</b> shows the salary histogram computed on May 1, 1998. The histogram shown in table row <b>306</b> shows the salary histogram computed on Jun. 1, 2001. Between May 1, 1998 and Jun. 1, 2001, the SAS <b>102</b> did not compute any other salary histograms during that time period.</p>
<p id="p-0029" num="0028">For each histogram in the table column <b>304</b>, salary is shown along the x-axis. Along the y-axis there is shown the number of employees contained in the data table <b>126</b>. These histograms show a distribution of the employee salaries stored in the data table <b>126</b> of <figref idref="DRAWINGS">FIG. 2</figref>.</p>
<p id="p-0030" num="0029">The histograms in column <b>304</b> are shown as containing a group of quantiles or sections. Each section has a high value and a low value along the x-axis. Histograms, in general, narrow the areas where the majority of the table row values (contained in the data table <b>126</b>) are concentrated. Without a histogram, an optimizer (not depicted) contained in the DBMS <b>100</b> assumes that the data contained the data table <b>126</b> is distributed uniformly. With a histogram the optimizer may assume uniformity inside each section. So given two histograms, the SAS <b>102</b> computes a measure by how much the histograms differ. The optimizer uses the histograms to estimate filter factors for query predicates, as known to those skilled in the art.</p>
<p id="p-0031" num="0030">Referring to the histogram contained in table row <b>306</b>, there is a portion or section <b>310</b> of the histogram. Also included in the histogram are a section <b>312</b> and a section <b>314</b>. The section <b>310</b> indicates that there are 50 employees (as read off the y-axis) that have a salary between 0 and $10,000 per year. The section <b>312</b> indicates that there are 200 employees having a salary between $10,000 and $20,000 per year. The section <b>314</b> indicates that there are 500 employees having a salary between $20,000 and $30,000 per year.</p>
<p id="p-0032" num="0031">The table row <b>308</b> shows another histogram computed on Jun. 1, 2001. Sections <b>316</b>, <b>318</b> and <b>320</b> of this histogram shown in the table row <b>308</b> indicate that for the section <b>316</b> there are 10 employees that have a salary between $0 and $15,000 per year, for the section <b>318</b> there are 300 employees that have a salary of between $15,000 and $25,000 per year, and for section <b>320</b> there are 800 employees that have a salary between $25,000 and $55,000 per year.</p>
<p id="p-0033" num="0032"><figref idref="DRAWINGS">FIG. 4</figref> shows the table column histograms <b>130</b> of <figref idref="DRAWINGS">FIG. 1</figref>. The SAS <b>102</b> readjusts the table column histograms <b>130</b> along their x-axis so the sections of each histogram match up or correspond with each other. The table column histogram <b>130</b> includes table columns: YEAR <b>302</b> and SALARY HISTORGRAM <b>304</b>.</p>
<p id="p-0034" num="0033">A table row <b>402</b> shows a histogram for 1998 (which is the histogram taken from the table row <b>306</b> of <figref idref="DRAWINGS">FIG. 3</figref>) in which this histogram has had its sections readjusted to match up with corresponding sections of the histogram indicated in a table row <b>404</b>. The table row <b>404</b> shows a histogram (which was taken from the table row <b>308</b> of <figref idref="DRAWINGS">FIG. 3</figref>) which has had its sections readjusted to match up with the sections of the histogram shown in the table row <b>402</b>. Adjustments have been made to the histograms of <figref idref="DRAWINGS">FIG. 3</figref> so that the two corresponding histograms shown in <figref idref="DRAWINGS">FIG. 4</figref> have their x-axis or their salary axis partitioned or sectioned so that they share the same section lengths.</p>
<p id="p-0035" num="0034">Referring back to <figref idref="DRAWINGS">FIG. 3</figref>, the histogram contained in the table row <b>306</b> shows that the x-axis or the salary axis is partitioned at 10K, 20K, and 50K, while the histogram contained in the table row <b>402</b> of <figref idref="DRAWINGS">FIG. 4</figref> is the same histogram but distributed in a way that the histogram now has been slit up and partitioned or sectioned at 10K, 15K, 20K, 25K, 30K, 40K and 50K.</p>
<p id="p-0036" num="0035">Referring back to <figref idref="DRAWINGS">FIG. 3</figref>, the histogram contained in the table row <b>308</b> shows the x-axis sectioned at 15K, 25K, and 55K, while the histogram contained in the table row <b>404</b> is the same histogram but distributed or sectioned at 10K, 15K, 20K, 25K, 30K, 40K, 50K and 55K (for example).</p>
<p id="p-0037" num="0036">In another example, the histogram contained in the table row <b>404</b> may be sectioned at 10K, 15K, 20K, 25K, 30K and 55K.</p>
<p id="p-0038" num="0037">It is to be noted that the histograms contained in the table rows <b>402</b> and <b>404</b> have sections which correspond with each other. Sections <b>406</b>, <b>408</b>, <b>410</b>, <b>412</b>, <b>414</b>, <b>416</b> and <b>418</b> of histogram contained in the table row <b>406</b> correspond with sections <b>420</b>, <b>422</b>, <b>424</b>, <b>426</b>, <b>428</b>, <b>430</b>, <b>432</b> and <b>434</b> of the histogram contained in the table row <b>404</b> respectively.</p>
<p id="p-0039" num="0038"><figref idref="DRAWINGS">FIG. 5</figref> shows a difference between the table column histograms shown in <figref idref="DRAWINGS">FIG. 4</figref>. The difference is displayed as a graph, by way of example, which indicates the difference between the table column histogram. The SAS <b>102</b> computes a difference histogram, which may be called a function or a histogram difference function. The table column histogram <b>130</b> includes a table row <b>502</b> that stored or contains a difference histogram function. The difference histogram function is computed as a mathematical subtraction between the histogram of the table row <b>402</b> and the histogram contained in the table row <b>404</b> of <figref idref="DRAWINGS">FIG. 4</figref>. Generally, the algorithm is a subtraction between two query response size estimates, calculated using the first and the second histogram. Then the difference between any two queries is averaged over the whole area covered by the histogram.</p>
<p id="p-0040" num="0039">The difference histogram contained in the table row <b>502</b> includes series of points <b>504</b>, <b>506</b>, <b>508</b>, <b>510</b>, <b>512</b>, <b>514</b>, <b>516</b> and <b>518</b> each having a value computed by the SAS <b>102</b>. The value of the point <b>504</b> is computed as follows: the value of section <b>406</b> is subtracted from the value associated with section <b>420</b> (i.e., the value indicated along the y-axis) and that computed difference number is plotted as the point <b>504</b>. The value of the point <b>506</b> was computed by taking the value associated with section <b>408</b> and subtracting it from the value associated with section <b>424</b> and then displayed in the histogram of table row <b>502</b>. Similarly, points <b>508</b>, <b>510</b>, <b>512</b>, <b>514</b>, <b>516</b>, and <b>518</b> were all computed in a similar fashion. The point <b>516</b> is computed by taking the value associated with the section <b>418</b> and subtracting it from the value of the section <b>432</b>. The point <b>518</b> is computed as follows: since the histogram of contained in table row <b>402</b> does not include a section between 50K and 55K a zero value is associated with that section and it is subtracted from the value of section <b>434</b>, and that difference is then plotted as the value of the point <b>518</b>.</p>
<p id="p-0041" num="0040">Alternatively, the value associated with the last section may not be a zero. For example, if the response size of the query “How many people have salary less then 53K” is estimated using the first histogram (<b>306</b>, the one that ends with 30K), the answer may be “every single person from the table”. Same query estimated using the other histogram may return something like 767 (out of 800) for example.</p>
<p id="p-0042" num="0041">All the points are connected with line segments as shown in the histogram of table row <b>502</b>.</p>
<p id="p-0043" num="0042">The SAS <b>102</b> computes an area for each section shown in the difference histogram of table row <b>502</b>. This difference histogram includes sections <b>520</b>, <b>522</b>, <b>524</b>, <b>526</b>, <b>528</b>, <b>530</b>, <b>532</b>, and <b>534</b>. The areas of these sections are computed and totaled and used at another processing step as will be shown further below.</p>
<p id="p-0044" num="0043">Generally, the SAS <b>102</b> compares a geometric aspect of the difference histogram against a preset threshold level value. An example of the geometric aspect is a computed total of the areas of each section of the difference histogram of table row <b>502</b>, which is then compared against a preset threshold level. Another example of the geometric aspect of the difference histogram is computing the perimeter lengths of each section of the difference histogram. Another example is computing the length of the lines across the top of the difference histogram.</p>
<p id="p-0045" num="0044">Later, the SAS <b>102</b> compares the computed total of the section areas associated with the histogram of table row <b>502</b> against a preset threshold level and then the SAS <b>102</b> decides whether the histograms are similar or not similar. The SAS then resets a date stored in the frequency of updating histograms <b>134</b> depending on the result of the comparison of the total area under the difference histogram curve with the preset threshold level.</p>
<p id="p-0046" num="0045">Alternatively, the SAS <b>102</b> may use the area below the difference histogram in another manner. The SAS <b>102</b> may compute the area under the difference histogram curve and then divide the computed area by the maximum length of the value along the x-axis (the right end minus the left end of the difference histogram for example). This metric may be referred to as an “average area difference”, and may be treated as the average difference between the two histograms over all possible queries. The error that may be observed may be significant over a small interval and may be negligible over a wide interval as in the example; therefore, if the absolute value of the error were used, this computation may mislead. However, if the error is averaged over the entire x-axis range, the error becomes more negligible.</p>
<p id="p-0047" num="0046"><figref idref="DRAWINGS">FIG. 6</figref> shows a portion of the difference between histograms of <figref idref="DRAWINGS">FIG. 5</figref>. A portion of the histogram contained in the table row <b>502</b> is shown as a new table row <b>602</b> for illustrating the manner in which the area <b>534</b> is computed by the SAS <b>102</b>.</p>
<p id="p-0048" num="0047">The area <b>534</b> is a trapezium. The section begins at Q<b>1</b> and ends at Q<b>2</b> with the area of interest falling between these two points. The value of the difference at Q<b>1</b> is V<b>1</b>, and the value of the difference at Q<b>2</b> is V<b>2</b>. According to a known mathematical formula, the area of this shape is equal to half of the sum of the bases times the height of the trapezoid. In this case the bases are the values of the difference at the beginning and at the end of the quantile (i.e., section), V<b>1</b> and V<b>2</b> respectively. Therefore, these values can be determined and used in the formula for the area of a trapezium. This area may be added to the current area calculated for the previous quantiles.</p>
<p id="p-0049" num="0048">The area is computed to be according to Equation 1 below:</p>
<p id="p-0050" num="0049">
<maths id="MATH-US-00001" num="00001">
<math overflow="scroll">
<mtable>
  <mtr>
    <mtd>
      <mrow>
        <mfrac>
          <mrow>
            <mo>(</mo>
            <mrow>
              <msub>
                <mi>V</mi>
                <mn>1</mn>
              </msub>
              <mo>+</mo>
              <msub>
                <mi>V</mi>
                <mn>2</mn>
              </msub>
            </mrow>
            <mo>)</mo>
          </mrow>
          <mn>2</mn>
        </mfrac>
        <mo>⁢</mo>
        <mrow>
          <mo>(</mo>
          <mrow>
            <msub>
              <mi>Q</mi>
              <mn>2</mn>
            </msub>
            <mo>-</mo>
            <msub>
              <mi>Q</mi>
              <mn>1</mn>
            </msub>
          </mrow>
          <mo>)</mo>
        </mrow>
      </mrow>
    </mtd>
    <mtd>
      <mrow>
        <mo>(</mo>
        <mrow>
          <mi>Equation</mi>
          <mo>⁢</mo>
          <mstyle>
            <mspace width="1.1em" height="1.1ex"/>
          </mstyle>
          <mo>⁢</mo>
          <mn>1</mn>
        </mrow>
        <mo>)</mo>
      </mrow>
    </mtd>
  </mtr>
</mtable>
</math>
</maths>
</p>
<p id="p-0051" num="0050">At the end the area is divided by the total width of all sections (right end minus the left end for the whole difference histogram) and this yields the average area under the difference histogram. The area for this quantile is determined according to Equation 1.</p>
<p id="p-0052" num="0051"><figref idref="DRAWINGS">FIG. 7</figref> shows a computed difference between two histograms which is compared against a preset threshold level. This information may be contained in the histogram comparisons table <b>132</b> or some other convenient location in memory <b>104</b>.</p>
<p id="p-0053" num="0052">The histogram comparisons table <b>132</b> includes a table column <b>710</b> titled DIFFERENCE BETWEEN HISTOGRAMS, a table column <b>712</b> titled PRESET THRESHOLD, and a table column <b>714</b> titled PRESCRIBED ACTION (i.e., action to be taken by the SAS <b>102</b>). A table row <b>702</b> contains computations made by the SAS <b>102</b> pertaining to the difference between two histograms contained in the table row <b>502</b>, and the corresponding comparison of that difference against a threshold level.</p>
<p id="p-0054" num="0053">The table column <b>710</b> stores the computed difference between two histograms which is, by example, <b>80</b> indicated as (X). The table column <b>712</b> stores the pre-set threshold value which is, by example, <b>75</b> indicated as (Y). The table column <b>714</b> stores the prescribed action to be taken by the SAS <b>102</b> depending on the outcome of the comparison made between the table column <b>704</b> or <b>708</b> and the table column <b>712</b>. One prescribed action is if the value of (X) is greater than or less than the value of (Y), the action to be taken by the SAS <b>102</b> is to update the salary histogram more frequently than what may be indicated at the present time. Another prescribed action is if (X) is less than (Y), the SAS <b>102</b> should update the salary histogram less frequently than what may be indicated at the present time.</p>
<p id="p-0055" num="0054"><figref idref="DRAWINGS">FIG. 8</figref> shows the frequency for updating table column histograms <b>134</b>. The table <b>134</b> includes a table column <b>802</b> which identifies a specific table column of the data table <b>126</b>. A table column <b>804</b> stores the next date in which the SAS <b>102</b> is to update the table column histogram associated with the identified table column <b>802</b>. For example, the table column <b>802</b> identifies the table column SALARY of the data table <b>126</b>. The table column <b>804</b> contains a date (for example, Jan. 30, 2005) which is the next date that the SAS <b>102</b> is to update the table column histogram for the table column SALARY of the data table <b>126</b>. Referring back to <figref idref="DRAWINGS">FIG. 7</figref>, if the prescribed action directs the SAS <b>102</b> to update the salary histogram more frequently, a new date is inserted in the table row <b>806</b> (under the table column <b>802</b>), such as Jan. 30, 2004 for example. Or, if the prescribed action is to update the salary histogram less frequently, the SAS <b>102</b> is directed to insert another date, such as Jan. 30, 2006 for example, in the table row <b>806</b> (under the table column <b>802</b>).</p>
<p id="p-0056" num="0055"><figref idref="DRAWINGS">FIGS. 9A</figref>, <b>9</b>B, <b>9</b>C and <b>9</b>D show operation S<b>900</b> of the SAS <b>102</b> of <figref idref="DRAWINGS">FIG. 1</figref>. Step S<b>902</b> includes beginning the operation of the SAS <b>102</b>.</p>
<p id="p-0057" num="0056">Operation S<b>904</b> includes determining whether to compute a new column histogram for each column in the data table <b>126</b>. For example, operation S<b>904</b> may determine whether today's date matches the preset date contained in a date flag (for example, the date flag indicated in <figref idref="DRAWINGS">FIG. 8</figref>). If the determination is NO, then the SAS<b>102</b> waits for an amount of time and then SAS<b>102</b> repeats the operation S<b>904</b> again (in other words, the SAS<b>102</b> waits until the prescribed date becomes today's date). However, if the determination is YES, control may then be transferred over to operation S<b>906</b>. Operation S<b>904</b> is a check of whether it's time to recomputed the histograms (by referring to a date flag); if it's not time to recomputed the histograms, then operation may exit (that is, check the date flag later) for example; and if it is time to recomputed the histograms, then control is transferred over to operation S<b>908</b>. A histogram is not recomputed in operation S<b>906</b>. In other words, if the current date is past the date flag, control is transferred over to operation S<b>908</b>.</p>
<p id="p-0058" num="0057">Operation S<b>906</b> includes computing new column histograms for each column of the data table <b>126</b> since the operation S<b>904</b> has determined that it is time to do so.</p>
<p id="p-0059" num="0058">Operation S<b>908</b> includes sampling a portion of the data table <b>126</b>, the portion containing only several rows of the data table <b>126</b>.</p>
<p id="p-0060" num="0059">Operation S<b>910</b> includes computing histograms for each column contained in the sampled portion of the data table <b>126</b>, then adjusting the corresponding sections of each computed histogram so as to correspond with sections of the previously computed histograms (as discussed above for <figref idref="DRAWINGS">FIG. 4</figref>), then computing a difference histogram for each table column (as discussed above for <figref idref="DRAWINGS">FIG. 5</figref>), and then computing the total area under the difference histogram curve (as discussed above for <figref idref="DRAWINGS">FIG. 6</figref>).</p>
<p id="p-0061" num="0060">Operation S<b>912</b> includes determining whether the areas computed for each difference histogram are lower than a preset threshold level value (as discussed above for <figref idref="DRAWINGS">FIG. 7</figref>). If the determination is YES (that is, the computed area is lower than the preset threshold level), control is then transferred over to operation S<b>914</b>. If the determination is NO (that is, the computed area is higher), control may then be transferred over to operation S<b>916</b>.</p>
<p id="p-0062" num="0061">Operation S<b>914</b> determines whether the difference between the sample histograms and the table histograms does not exceeding a preset threshold level. If the difference does not exceed the threshold level (that is, the sample does not warrant re-computation of the histograms) then a new value for the date flag is determined and then the SAS<b>102</b> waits until that new date to start the procedure again (which means starting from operation S<b>900</b>).</p>
<p id="p-0063" num="0062">Operation S<b>916</b> includes re-computing the columns statistics for the entire table <b>126</b>.</p>
<p id="p-0064" num="0063">Operation S<b>918</b> determines whether the difference histogram (the difference between the recomputed column histograms and the older table column histograms) are lower than another pre-set threshold level value. If the determination is NO, control may then be transferred over to operation S<b>922</b>. If the determination is YES, control may then be transferred over to operation S<b>920</b>.</p>
<p id="p-0065" num="0064">Operation S<b>920</b> includes inserting a new date in a date flag (as described above for <figref idref="DRAWINGS">FIG. 8</figref>) so that the inserted date is more distant in the future. That is, the SAS <b>102</b> is to update columns statistics less frequently.</p>
<p id="p-0066" num="0065">Operation S<b>922</b> includes inserting a date in a date flag so that the inserted date is less distant in the future. That is, the SAS <b>102</b> is to update the column statistics more frequently. Control may then be transferred back over to operation S<b>902</b>.</p>
<p id="p-0067" num="0066">Alternatively, the operations of the statistical analysis SAS<b>102</b> may end at this point and begin again upon a received request from the user.</p>
<p id="p-0068" num="0067"><figref idref="DRAWINGS">FIG. 10</figref> shows operation S<b>1000</b> of the DBMS <b>100</b> of <figref idref="DRAWINGS">FIG. 1</figref>.</p>
<p id="p-0069" num="0068">Operation S<b>1002</b> begins operation of the DBMS <b>100</b> upon receiving a user request or command directed to the DBMS <b>100</b>.</p>
<p id="p-0070" num="0069">Operation S<b>1004</b> includes receiving a query to be executed against a table column.</p>
<p id="p-0071" num="0070">Operation S<b>1006</b> includes determining an estimate of a potential number of table rows to be received which may contain data satisfying the received query. The computed estimate is based on column table histograms (as known in the art).</p>
<p id="p-0072" num="0071">Operation S<b>1008</b> includes adjusting the resources of the DBMS <b>100</b> so as to accommodate the determined estimated potential number of table rows to be retrieved.</p>
<p id="p-0073" num="0072">Operation S<b>1010</b> includes generating several query plans for potentially executing the received query.</p>
<p id="p-0074" num="0073">Operation S<b>1012</b> includes selecting a query plan which permits efficient retrieval of the data contained in the table rows based on determined estimate potential number of table rows to be retrieved.</p>
<p id="p-0075" num="0074">Operation S<b>1014</b> includes ending the operation of DBMS <b>100</b> or alternatively until user indicates further requirements for DBMS <b>100</b>.</p>
<p id="p-0076" num="0075">It will be appreciated that the elements described above may be adapted for specific conditions or functions. The concepts of the present invention can be further extended to a variety of other applications that are clearly within the scope of this invention. Having thus described the present invention with respect to preferred embodiments as implemented, it will be apparent to those skilled in the art that many modifications and enhancements are possible to the present invention without departing from the basic concepts as described in the preferred embodiment of the present invention. Therefore, what is intended to be protected by way of letters patent should be limited only by the scope of the following claims.</p>
<?DETDESC description="Detailed Description" end="tail"?>
</description>
<us-math idrefs="MATH-US-00001" nb-file="US07299248-20071120-M00001.NB">
<img id="EMI-M00001" he="6.35mm" wi="76.20mm" file="US07299248-20071120-M00001.TIF" alt="embedded image " img-content="math" img-format="tif"/>
</us-math>
<us-claim-statement>The invention claimed is:</us-claim-statement>
<claims id="claims">
<claim id="CLM-00001" num="00001">
<claim-text>1. For a database management system to be operatively coupled to a data processing system, the data processing system comprising memory for storing a data table, a method of determining frequency of updating a histogram of the data table, the method comprising:
<claim-text>determining sampled histograms for sample portions of the data table over a period of time;</claim-text>
<claim-text>computing a difference between at least two of the determined sampled histograms;</claim-text>
<claim-text>determining a frequency with which to update the histogram of the data table depending on the amount of the computed difference; and</claim-text>
<claim-text>storing the determined frequency in the memory to update the histogram of the data table,</claim-text>
<claim-text>wherein the determined sampled histograms include histogram sections; the step of computing the computed difference comprises:</claim-text>
<claim-text>adjusting the sections of one sampled histogram to line up with sections of another sampled histogram;</claim-text>
<claim-text>subtracting each section of the another sampled histogram from a corresponding section of the one sampled histogram; and</claim-text>
<claim-text>computing the sum of the subtracted sections,</claim-text>
<claim-text>wherein the method further comprises dividing the computed sum by a length of the x-axis of at least one of the one sampled histogram and the another sampled histogram.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00002" num="00002">
<claim-text>2. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref> wherein the step of determining the frequency comprises comparing the computed difference against a pre-set threshold level value.</claim-text>
</claim>
<claim id="CLM-00003" num="00003">
<claim-text>3. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref> wherein the computed difference is a geometric aspect representing a difference between the at least two of the sampled histograms.</claim-text>
</claim>
<claim id="CLM-00004" num="00004">
<claim-text>4. The method of <claim-ref idref="CLM-00003">claim 3</claim-ref> wherein the geometric aspect represents an area under a curve.</claim-text>
</claim>
<claim id="CLM-00005" num="00005">
<claim-text>5. The method of <claim-ref idref="CLM-00003">claim 3</claim-ref>, wherein the geometric aspect represents a perimeter length of a curve.</claim-text>
</claim>
<claim id="CLM-00006" num="00006">
<claim-text>6. A database management system comprising a central processing unit and to be operatively coupled to a data processing system, the data processing system comprising memory for storing a data table, the database management system for determining frequency of updating a histogram of the data table, the database management system further comprising:
<claim-text>means for determining sampled histograms for sample portions of the data table from time to time;</claim-text>
<claim-text>means for computing a difference between at least two of the determined sampled histograms;</claim-text>
<claim-text>means for determining a frequency with which to update the histogram of the data table depending on the amount of the computed difference; and</claim-text>
<claim-text>means for storing the determined frequency in the memory to update the histogram of the data table,</claim-text>
<claim-text>wherein the determined sampled histograms include histogram sections; the means for computing the computed difference comprises:</claim-text>
<claim-text>means for adjusting the sections of one sampled histogram to line up with sections of another sampled histogram</claim-text>
<claim-text>means for subtracting each section of the another sampled histogram from a corresponding section of the one sampled histogram; and</claim-text>
<claim-text>means for computing the sum of the subtracted sections,</claim-text>
<claim-text>wherein the database management system further comprises means for dividing the computed sum by a length of the x-axis of at least one of the one sampled histogram and the another sampled histogram.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00007" num="00007">
<claim-text>7. The database management system of <claim-ref idref="CLM-00006">claim 6</claim-ref> wherein the means for determining the frequency comprises comparing the computed difference against a pre-set threshold level value.</claim-text>
</claim>
<claim id="CLM-00008" num="00008">
<claim-text>8. The database management system of <claim-ref idref="CLM-00006">claim 6</claim-ref> wherein the computed difference is a geometric aspect representing a difference between the at least two of the sampled histograms.</claim-text>
</claim>
<claim id="CLM-00009" num="00009">
<claim-text>9. The database management system of <claim-ref idref="CLM-00008">claim 8</claim-ref> wherein the geometric aspect represents an area under a curve.</claim-text>
</claim>
<claim id="CLM-00010" num="00010">
<claim-text>10. The database management system of <claim-ref idref="CLM-00008">claim 8</claim-ref> wherein the geometric aspect represents a perimeter length of a curve.</claim-text>
</claim>
</claims>
</us-patent-grant>
