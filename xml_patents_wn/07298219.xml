<us-patent-grant lang="EN" dtd-version="v4.2 2006-08-23" file="US07298219-20071120.XML" status="PRODUCTION" id="us-patent-grant" country="US" date-produced="20071106" date-publ="20071120">
<us-bibliographic-data-grant>
<publication-reference>
<document-id>
<country>US</country>
<doc-number>07298219</doc-number>
<kind>B2</kind>
<date>20071120</date>
</document-id>
</publication-reference>
<application-reference appl-type="utility">
<document-id>
<country>US</country>
<doc-number>11269742</doc-number>
<date>20051109</date>
</document-id>
</application-reference>
<us-application-series-code>11</us-application-series-code>
<priority-claims>
<priority-claim sequence="01" kind="national">
<country>JP</country>
<doc-number>2004-374265</doc-number>
<date>20041224</date>
</priority-claim>
</priority-claims>
<us-term-of-grant>
<us-term-extension>57</us-term-extension>
</us-term-of-grant>
<classifications-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>H</section>
<class>03</class>
<subclass>L</subclass>
<main-group>7</main-group>
<subgroup>00</subgroup>
<symbol-position>F</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20071120</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>H</section>
<class>03</class>
<subclass>L</subclass>
<main-group>1</main-group>
<subgroup>02</subgroup>
<symbol-position>L</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20071120</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
</classifications-ipcr>
<classification-national>
<country>US</country>
<main-classification>331 16</main-classification>
<further-classification>331 17</further-classification>
<further-classification>331 25</further-classification>
<further-classification>331 34</further-classification>
<further-classification>331 44</further-classification>
<further-classification>331176</further-classification>
<further-classification>327157</further-classification>
</classification-national>
<invention-title id="d0e71">Phase-locked loop circuit</invention-title>
<references-cited>
<citation>
<patcit num="00001">
<document-id>
<country>US</country>
<doc-number>4469082</doc-number>
<kind>A</kind>
<name>Nishitoba et al.</name>
<date>19840900</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>123609</main-classification></classification-national>
</citation>
<citation>
<patcit num="00002">
<document-id>
<country>US</country>
<doc-number>4595886</doc-number>
<kind>A</kind>
<name>Mroch et al.</name>
<date>19860600</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00003">
<document-id>
<country>US</country>
<doc-number>5389899</doc-number>
<kind>A</kind>
<name>Yahagi et al.</name>
<date>19950200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>331 10</main-classification></classification-national>
</citation>
<citation>
<patcit num="00004">
<document-id>
<country>US</country>
<doc-number>6023185</doc-number>
<kind>A</kind>
<name>Galipeau et al.</name>
<date>20000200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>327513</main-classification></classification-national>
</citation>
<citation>
<patcit num="00005">
<document-id>
<country>US</country>
<doc-number>6466100</doc-number>
<kind>B2</kind>
<name>Mullgrav, Jr. et al.</name>
<date>20021000</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00006">
<document-id>
<country>US</country>
<doc-number>6552618</doc-number>
<kind>B2</kind>
<name>Nelson et al.</name>
<date>20030400</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>331 11</main-classification></classification-national>
</citation>
<citation>
<patcit num="00007">
<document-id>
<country>US</country>
<doc-number>6686804</doc-number>
<kind>B1</kind>
<name>Adams et al.</name>
<date>20040200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>331 17</main-classification></classification-national>
</citation>
<citation>
<nplcit num="00008">
<othercit>Michael H. Perrott, et al., “A Modeling Approach for Σ- Δ Fractional- <i>N </i>Frequency Synthesizers Allowing Straightforward Noise Analysis,” IEEE Journal of Solid-State Circuits, Aug. 2002, pp. 1028-1038, vol. 37, No. 8, IEEE.</othercit>
</nplcit>
<category>cited by other</category>
</citation>
</references-cited>
<number-of-claims>3</number-of-claims>
<us-exemplary-claim>2</us-exemplary-claim>
<us-field-of-classification-search>
<classification-national>
<country>US</country>
<main-classification>331  8</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>331 14</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>331 16</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>331 17</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>331 18</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>331 25</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>331 34</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>331  1 A</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>331 44</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>331 66</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>331175</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>331176</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>331177 R</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>327156</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>327157</main-classification>
</classification-national>
</us-field-of-classification-search>
<figures>
<number-of-drawing-sheets>10</number-of-drawing-sheets>
<number-of-figures>13</number-of-figures>
</figures>
<us-related-documents>
<related-publication>
<document-id>
<country>US</country>
<doc-number>20060139106</doc-number>
<kind>A1</kind>
<date>20060629</date>
</document-id>
</related-publication>
</us-related-documents>
<parties>
<applicants>
<applicant sequence="001" app-type="applicant-inventor" designation="us-only">
<addressbook>
<last-name>Dosho</last-name>
<first-name>Shiro</first-name>
<address>
<city>Osaka</city>
<country>JP</country>
</address>
</addressbook>
<nationality>
<country>JP</country>
</nationality>
<residence>
<country>JP</country>
</residence>
</applicant>
<applicant sequence="002" app-type="applicant-inventor" designation="us-only">
<addressbook>
<last-name>Morie</last-name>
<first-name>Takashi</first-name>
<address>
<city>Osaka</city>
<country>JP</country>
</address>
</addressbook>
<nationality>
<country>JP</country>
</nationality>
<residence>
<country>JP</country>
</residence>
</applicant>
<applicant sequence="003" app-type="applicant-inventor" designation="us-only">
<addressbook>
<last-name>Okamoto</last-name>
<first-name>Kouji</first-name>
<address>
<city>Osaka</city>
<country>JP</country>
</address>
</addressbook>
<nationality>
<country>JP</country>
</nationality>
<residence>
<country>JP</country>
</residence>
</applicant>
<applicant sequence="004" app-type="applicant-inventor" designation="us-only">
<addressbook>
<last-name>Yamada</last-name>
<first-name>Yuji</first-name>
<address>
<city>Osaka</city>
<country>JP</country>
</address>
</addressbook>
<nationality>
<country>JP</country>
</nationality>
<residence>
<country>JP</country>
</residence>
</applicant>
<applicant sequence="005" app-type="applicant-inventor" designation="us-only">
<addressbook>
<last-name>Sogawa</last-name>
<first-name>Kazuaki</first-name>
<address>
<city>Osaka</city>
<country>JP</country>
</address>
</addressbook>
<nationality>
<country>JP</country>
</nationality>
<residence>
<country>JP</country>
</residence>
</applicant>
</applicants>
<agents>
<agent sequence="01" rep-type="attorney">
<addressbook>
<orgname>McDermott Will &amp; Emery LLP</orgname>
<address>
<country>unknown</country>
</address>
</addressbook>
</agent>
</agents>
</parties>
<assignees>
<assignee>
<addressbook>
<orgname>Matsushita Electric Industrial Co., Ltd.</orgname>
<role>03</role>
<address>
<city>Osaka</city>
<country>JP</country>
</address>
</addressbook>
</assignee>
</assignees>
<examiners>
<primary-examiner>
<last-name>Pascal</last-name>
<first-name>Robert</first-name>
<department>2817</department>
</primary-examiner>
<assistant-examiner>
<last-name>Johnson</last-name>
<first-name>Ryan J</first-name>
</assistant-examiner>
</examiners>
</us-bibliographic-data-grant>
<abstract id="abstract">
<p id="p-0001" num="0000">The phase-locked loop circuit includes a gain setting circuit for setting a gain of a voltage controlled oscillator, and a time-constant setting circuit for setting a time constant, which is determined by the amount of current in a charge pump circuit and a capacitance value of a loop filter. The gain setting circuit sets the gain to a predetermined value, and the time-constant setting circuit sets the time constant to a predetermined value, whereby the loop band width of the phase-locked loop circuit is set to a desired value.</p>
</abstract>
<drawings id="DRAWINGS">
<figure id="Fig-EMI-D00000" num="00000">
<img id="EMI-D00000" he="160.19mm" wi="265.85mm" file="US07298219-20071120-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00001" num="00001">
<img id="EMI-D00001" he="274.24mm" wi="188.13mm" orientation="landscape" file="US07298219-20071120-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00002" num="00002">
<img id="EMI-D00002" he="143.34mm" wi="173.65mm" file="US07298219-20071120-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00003" num="00003">
<img id="EMI-D00003" he="253.15mm" wi="183.64mm" file="US07298219-20071120-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00004" num="00004">
<img id="EMI-D00004" he="236.81mm" wi="170.43mm" orientation="landscape" file="US07298219-20071120-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00005" num="00005">
<img id="EMI-D00005" he="261.54mm" wi="186.94mm" file="US07298219-20071120-D00005.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00006" num="00006">
<img id="EMI-D00006" he="269.16mm" wi="174.33mm" orientation="landscape" file="US07298219-20071120-D00006.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00007" num="00007">
<img id="EMI-D00007" he="131.83mm" wi="179.83mm" file="US07298219-20071120-D00007.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00008" num="00008">
<img id="EMI-D00008" he="235.46mm" wi="171.11mm" orientation="landscape" file="US07298219-20071120-D00008.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00009" num="00009">
<img id="EMI-D00009" he="217.09mm" wi="166.88mm" orientation="landscape" file="US07298219-20071120-D00009.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00010" num="00010">
<img id="EMI-D00010" he="217.76mm" wi="168.83mm" orientation="landscape" file="US07298219-20071120-D00010.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
</drawings>
<description id="description">
<?BRFSUM description="Brief Summary" end="lead"?>
<heading id="h-0001" level="1">CROSS-REFERENCE TO RELATED APPLICATION</heading>
<p id="p-0002" num="0001">This Non-provisional application claims priority under 35 U.S.C. §119(a) on Patent Application No. 2004-374265 filed in Japan on Dec. 24, 2004, the entire contents of which are hereby incorporated by reference.</p>
<heading id="h-0002" level="1">BACKGROUND OF THE INVENTION</heading>
<p id="p-0003" num="0002">The present invention relates to phase-locked loop circuits, and more particularly relates to technology for controlling the loop band width of a phase-locked loop circuit. A phase-locked loop circuit (which will be hereinafter also called a frequency synthesizer) is essential for an integrated circuit, and recent developments in radio communication have provided significant improvements in phase-locked loop circuits. Among others, a frequency synthesizer, in which sigma-delta modulation technique is applied to a frequency divider, (which will be hereinafter referred to as a “sigma-delta modulation frequency synthesizer”) has a large response time-constant, and is thus capable of responding quickly. In addition, sigma-delta modulation frequency synthesizers are capable of achieving very fine frequency resolution.</p>
<p id="p-0004" num="0003"><figref idref="DRAWINGS">FIG. 11</figref> illustrates the configuration of a sigma-delta modulation frequency synthesizer. Unlike a frequency divider in a typical phase-locked loop circuit, a frequency divider <b>50</b> (a dual modulus prescaler) in this sigma-delta modulation frequency synthesizer does not have a fixed frequency dividing ratio, and includes at least two frequency dividers (frequency dividers <b>51</b> and <b>52</b> in this example). When a sigma-delta modulator <b>100</b> uses the frequency dividers <b>51</b> and <b>52</b>, the sigma-delta modulator <b>100</b> switches the frequency dividers <b>51</b> and <b>52</b> at a frequency higher than the loop band width. The oscillation frequency of the synthesizer is therefore determined by the use rates of the frequency dividers <b>51</b> and <b>52</b>. For example, if the frequency divider <b>51</b>, having a frequency dividing ratio of N+1, is used at a rate of 50%, and the frequency divider <b>52</b>, having a frequency dividing ratio of N, is used at a rate of 50%, the oscillation frequency of the synthesizer is (N+½) times the frequency of input signal.</p>
<p id="p-0005" num="0004">When the sigma-delta modulation frequency synthesizer switches the frequency dividers, switching noise is produced. However, by switching the frequency dividers at a high frequency and by performing sigma-delta modulation, the frequency components of the switching noise are centered in the high frequency region and removed by a loop filter <b>30</b>, whereby the phase noise characteristics are improved. The frequency dividing ratio of the sigma-delta modulation frequency synthesizer is as low as about N, which allows the synthesizer to have a higher response frequency than a typical frequency synthesizer having a frequency dividing ratio of about the square of N.</p>
<p id="p-0006" num="0005">In order to optimize the phase noise characteristics of a sigma-delta modulation frequency synthesizer, the loop band width thereof must be optimized. <figref idref="DRAWINGS">FIG. 12</figref> is a graph indicating the switching noise characteristics of a sigma-delta modulation frequency synthesizer. The sigma-delta modulation frequency synthesizer's response shows low-pass filter characteristics to switching noise. Therefore, as the response frequency becomes lower, that is, the loop band width becomes lower, the switching noise is reduced further. <figref idref="DRAWINGS">FIG. 13</figref> is a graph indicating the phase noise characteristics of the sigma-delta modulation frequency synthesizer. The sigma-delta modulation frequency synthesizer's response shows high-pass filter characteristics to VCO phase noise. Therefore, in order to reduce the VCO phase noise, the response frequency needs to be set high. As can be seen from the figures, since there is a trade-off between the switching noise and the VCO phase noise, the loop band width must be selected carefully so as to minimize the total amount of switching noise and VCO phase noise.</p>
<p id="p-0007" num="0006">Nevertheless, so far there is no disclosed method for precisely optimizing the response characteristics of a phase-locked loop circuit, and there have only been techniques for partially controlling characteristics of a voltage controlled oscillator, etc. Under these circumstances, it might be difficult to enhance the performance of future sigma-delta modulation frequency synthesizers, etc.</p>
<heading id="h-0003" level="1">SUMMARY OF THE INVENTION</heading>
<p id="p-0008" num="0007">In view of the above problem, it is therefore an object of the present invention to control the loop band width of a phase-locked loop circuit in an optimal manner, thereby enhancing the performance of the phase-locked loop circuit.</p>
<p id="p-0009" num="0008">In order to achieve the above object, an inventive phase-locked loop circuit includes: a gain setting circuit for setting a gain of a voltage controlled oscillator; and a time-constant setting circuit for setting a time constant, which is determined by the amount of current in a charge pump circuit and a capacitance value of a loop filter.</p>
<p id="p-0010" num="0009">The phase-locked loop circuit preferably further includes a temperature-compensation circuit for adjusting the amount of current in the charge pump circuit in accordance with temperature changes.</p>
<p id="p-0011" num="0010">In one embodiment of the present invention, the gain setting circuit includes: a switching section for switching inputs into the voltage controlled oscillator; a gain measurement section for measuring the gain based on a difference between outputs produced from the voltage controlled oscillator in response to a first voltage and a second voltage, respectively, which are input into the voltage controlled oscillator by the switching section; a gain setting section for setting the gain in accordance with a supplied control signal; and a gain control section for generating the control signal based on a difference between the gain measured by the gain measurement section and an expected value.</p>
<p id="p-0012" num="0011">In another embodiment, the time-constant setting circuit includes: a dummy charge pump circuit for performing push-pull operation in accordance with a first signal and a second signal; a capacitor for receiving a current output from the dummy charge pump circuit; a signal generation section for generating the first and second signals based on a voltage produced in the capacitor; a frequency measurement section for measuring a frequency of either the first or second signal; a current setting section for setting the amount of current in the dummy charge pump circuit and the amount of current in the charge pump circuit in accordance with a supplied control signal; and a current control section for generating the control signal based on a difference between the frequency measured by the frequency measurement section and an expected value.</p>
<p id="p-0013" num="0012">In this particular embodiment, the phase-locked loop circuit further includes a temperature-compensation circuit for outputting a current which increases in amount according to temperature changes, wherein the current setting section sets the amount of the current in the dummy charge pump circuit and the current in the charge pump circuit based on the current output from the temperature-compensation circuit.</p>
<p id="p-0014" num="0013">In another embodiment, the temperature-compensation circuit includes: a diode; a resistor connected in series to the diode; and a current mirror circuit for receiving a current passing through the resistor, wherein a constant voltage is applied to the diode and the resistor.</p>
<?BRFSUM description="Brief Summary" end="tail"?>
<?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?>
<description-of-drawings>
<heading id="h-0004" level="1">BRIEF DESCRIPTION OF THE DRAWINGS</heading>
<p id="p-0015" num="0014"><figref idref="DRAWINGS">FIG. 1</figref> illustrates the configuration of a phase-locked loop circuit according to an embodiment of the present invention.</p>
<p id="p-0016" num="0015"><figref idref="DRAWINGS">FIG. 2</figref> is a graph indicating the gain characteristics of a voltage controlled oscillator.</p>
<p id="p-0017" num="0016"><figref idref="DRAWINGS">FIG. 3</figref> illustrates a configuration for a gain measurement section.</p>
<p id="p-0018" num="0017"><figref idref="DRAWINGS">FIG. 4</figref> illustrates another configuration for the gain measurement section.</p>
<p id="p-0019" num="0018"><figref idref="DRAWINGS">FIG. 5</figref> illustrates the configurations of a gain setting section and the voltage controlled oscillator.</p>
<p id="p-0020" num="0019"><figref idref="DRAWINGS">FIG. 6</figref> illustrates the configuration of a signal generation section.</p>
<p id="p-0021" num="0020"><figref idref="DRAWINGS">FIG. 7</figref> is a graph indicating change with time in voltage produced in a capacitor in a time-constant setting circuit.</p>
<p id="p-0022" num="0021"><figref idref="DRAWINGS">FIG. 8</figref> illustrates the configuration of a frequency measurement section.</p>
<p id="p-0023" num="0022"><figref idref="DRAWINGS">FIG. 9</figref> illustrates the configuration of a current setting section.</p>
<p id="p-0024" num="0023"><figref idref="DRAWINGS">FIG. 10</figref> illustrates the configuration of a temperature-compensation circuit.</p>
<p id="p-0025" num="0024"><figref idref="DRAWINGS">FIG. 11</figref> illustrates the configuration of a sigma-delta modulation frequency synthesizer.</p>
<p id="p-0026" num="0025"><figref idref="DRAWINGS">FIG. 12</figref> is a graph indicating the switching noise characteristics of a sigma-delta modulation frequency synthesizer.</p>
<p id="p-0027" num="0026"><figref idref="DRAWINGS">FIG. 13</figref> is a graph indicating the phase noise characteristics of the sigma-delta modulation frequency synthesizer.</p>
</description-of-drawings>
<?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?>
<?DETDESC description="Detailed Description" end="lead"?>
<heading id="h-0005" level="1">DETAILED DESCRIPTION OF THE INVENTION</heading>
<p id="p-0028" num="0027">Hereinafter, preferred embodiments of the present invention will be described with reference to the accompanying drawings.</p>
<p id="p-0029" num="0028"><figref idref="DRAWINGS">FIG. 1</figref> illustrates the configuration of a phase-locked loop circuit according to an embodiment of the present invention. The phase-locked loop circuit of this embodiment includes a phase comparator <b>10</b>, a charge pump circuit <b>20</b>, a loop filter <b>30</b>, a voltage controlled oscillator (which will be hereinafter also called a VCO) <b>40</b>, a frequency divider <b>50</b>, a gain setting circuit <b>60</b>, a time-constant setting circuit <b>70</b>, and a temperature-compensation circuit <b>80</b>. The loop band width ωn of the phase-locked loop circuit of this embodiment is substantially expressed by the following equation:</p>
<p id="p-0030" num="0029">
<maths id="MATH-US-00001" num="00001">
<math overflow="scroll">
<mrow>
  <mrow>
    <mi>ω</mi>
    <mo>⁢</mo>
    <mstyle>
      <mspace width="0.3em" height="0.3ex"/>
    </mstyle>
    <mo>⁢</mo>
    <mi>n</mi>
  </mrow>
  <mo>=</mo>
  <msqrt>
    <mfrac>
      <mi>KoIp</mi>
      <mrow>
        <mn>2</mn>
        <mo>⁢</mo>
        <mstyle>
          <mspace width="0.3em" height="0.3ex"/>
        </mstyle>
        <mo>⁢</mo>
        <mi>π</mi>
        <mo>⁢</mo>
        <mstyle>
          <mspace width="0.3em" height="0.3ex"/>
        </mstyle>
        <mo>⁢</mo>
        <mi>C</mi>
      </mrow>
    </mfrac>
  </msqrt>
</mrow>
</math>
</maths>
<br/>
where Ko represents the gain of the VCO <b>40</b>, Ip represents the amount of current in the charge pump circuit <b>20</b>, and C represents the capacitance value of the loop filter <b>30</b>. Therefore, the loop band width ωn of the phase-locked loop circuit can be set to a desired value by setting the gain Ko of the VCO <b>40</b> and the time constant Ip/C of the phase-locked loop circuit to certain values. Description will now be made in further detail of the gain setting circuit <b>60</b> for setting the gain Ko, the time-constant setting circuit <b>70</b> for setting the time constant Ip/C, and the temperature-compensation circuit <b>80</b> for compensating for variation in the gain Ko caused by temperature changes.
</p>
<p id="p-0031" num="0030">The gain setting circuit <b>60</b> includes a switching section <b>61</b>, a gain measurement section <b>62</b>, a gain control section <b>63</b>, and a gain setting section <b>64</b>. The switching section <b>61</b> selectively inputs one of voltages V<b>1</b>, V<b>2</b> (V<b>1</b>&lt;V<b>2</b>), and an output from the loop filter <b>30</b>, to the VCO <b>40</b> through the gain setting section <b>64</b>. The gain measurement section <b>62</b> measures the gain of the VCO <b>40</b> based on the difference between the outputs produced from the VCO <b>40</b> in response to the voltages V<b>1</b> and V<b>2</b>, respectively, which have been input to the VCO <b>40</b> by the switching section <b>61</b>. The gain control section <b>63</b> generates a control signal CTLg based on the difference between the gain measured by the gain measurement section <b>62</b> and the gain's expected value to be achieved. The gain setting section <b>64</b> sets the gain of the VCO <b>40</b> in accordance with the control signal CTLg.</p>
<p id="p-0032" num="0031"><figref idref="DRAWINGS">FIG. 2</figref> is a graph indicating the gain characteristics of the VCO <b>40</b>. The gain of the VCO <b>40</b> has liner characteristics with respect to voltages output from the loop filter <b>30</b>, and thus can be measured by inputting two different voltages. Therefore, the gain measurement section <b>62</b> measures the gain of the VCO <b>40</b> based on the frequencies f<b>1</b> and f<b>2</b> of clock signals CKvco output from the VCO <b>40</b> in response to the voltages V<b>1</b> and V<b>2</b>, respectively, which have been input into the VCO <b>40</b> by the switching section <b>61</b>. More specifically, the gain Ko of the VCO <b>40</b> is obtained by the equation
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>Ko</i>=(<i>f</i>2<i>−f</i>1)/(<i>V</i>2<i>−V</i>1).<?in-line-formulae description="In-line Formulae" end="tail"?>
<br/>
If the difference between the voltages V<b>1</b> and V<b>2</b> is set to unit voltage (V<b>2</b>−V<b>1</b>=1), it is possible to measure the gain Ko by the frequencies f<b>1</b> and f<b>2</b> (Ko=f<b>2</b>−f<b>1</b>).
</p>
<p id="p-0033" num="0032"><figref idref="DRAWINGS">FIG. 3</figref> illustrates a first exemplary configuration for the gain measurement section <b>62</b>. A counter <b>621</b> counts up pulses of a clock signal CKvco for a certain period of time indicated by a timer <b>622</b>. The count values obtained when the voltages V<b>1</b> and V<b>2</b> are input into the VCO <b>40</b> are stored in memories <b>623</b> and <b>624</b>, respectively. A gain calculation section <b>625</b> calculates the difference between the count values stored in the memories <b>623</b> and <b>624</b>, and outputs the obtained value as a measured gain.</p>
<p id="p-0034" num="0033"><figref idref="DRAWINGS">FIG. 4</figref> illustrates another configuration for the gain measurement section <b>62</b>. Of the two voltages V<b>1</b> and V<b>2</b> input into the VCO <b>40</b> by the switching section <b>61</b>, the voltage that makes the clock signal CKvco have a higher frequency, that is, the voltage V<b>2</b>, is first input into the VCO <b>40</b>. The counter <b>621</b> counts up pulses of the clock signal CKvco for a certain period of time indicated by the timer <b>622</b>. Then, the voltage V<b>1</b> is input into the VCO <b>40</b> by the switching section <b>61</b>, at which time the counter <b>621</b> is set to countdown mode by a count up/down switching signal so as to count down pulses of the clock signal CKvco for a certain period of time indicated by the timer <b>622</b>. The count value that the counter <b>621</b> holds at the time of completion of the countdown corresponds to the difference between the frequencies f<b>1</b> and f<b>2</b>. The counter <b>621</b> outputs this count value as the measured gain. In this configuration, memories for storing count values and a gain calculation section for calculating a count-value difference are not necessary, which allows the circuit size to be reduced as compared with the first configuration.</p>
<p id="p-0035" num="0034"><figref idref="DRAWINGS">FIG. 5</figref> illustrates the configurations of the gain setting section <b>64</b> and the VCO <b>40</b>. In the VCO <b>40</b>, a current mirror circuit <b>41</b> formed of PMOS transistors performs mirroring of current output from the gain setting section <b>64</b> and supplies the obtained current to an inverter chain oscillator <b>42</b>. Since the amount of current supplied to the inverter chain oscillator <b>42</b> is almost proportional to the oscillation frequency, it is possible to control the gain of the VCO <b>40</b> by controlling the amount of current output from the gain setting section <b>64</b>. In the gain setting section <b>64</b>, five basic units, each composed of an NMOS transistor <b>642</b> and a switch <b>643</b>, are connected in parallel to an NMOS transistor <b>641</b>, and current is output from the connection point. Output of the switching section <b>61</b> is applied, as an input voltage, to the gate of each NMOS transistor <b>641</b> and <b>642</b>. Each switch <b>643</b> opens/closes according to a corresponding bit in a control signal CTLg. The NMOS transistors <b>642</b> are different in size, and each NMOS transistor <b>642</b> has a size that corresponds to the size indicated by the corresponding bit in the control signal CTLg. That is, the gain setting section <b>64</b> is capable of performing a 5-bit gain setting, i.e., a 32-step gain setting, for the VCO <b>40</b> in accordance with the supplied signal CTLg.</p>
<p id="p-0036" num="0035">It should be noted that all of the NMOS transistors <b>642</b> may have the same size. In that case, a number of NMOS transistors <b>642</b> corresponding to the number of steps that can be controlled by the control signal CTLg may be provided, that is 32 NMOS transistors <b>642</b> may be provided. Also, the control signal CTLg is not limited to 5 bits, but may have any number of bits. Furthermore, the gain setting section <b>64</b> may include PMOS transistors instead of the NMOS transistors.</p>
<p id="p-0037" num="0036">The gain setting circuit <b>60</b> sets the gain of the VCO <b>40</b> in the following manner. First, the MSB of the control signal CTLg is set to “1”, i.e., the control signal CTLg is set to “0b10000” to set the gain. At this time, if the measured gain is equal to the expected value, the gain setting process is complete. If the measured gain exceeds the expected value, the MSB of the control signal CTLg is set to “0”, while a lower bit is set to “1”, i.e., the control signal CTLg is set to “0b01000”, so as to perform the gain setting again. On the other hand, if the measured gain is smaller than the expected value, a lower bit of the control signal CTLg is set to “1”, i.e., the control signal CTLg is set to “0b11000”, so as to perform the gain setting again. This process is repeated until the setting of the LSB of the control signal CTLg is performed. In other words, the condition of the gain setting by the gain setting section <b>64</b> is determined by binary search. Therefore, the gain Ko of the VCO <b>40</b> is set to a predetermined value by performing at most a number of gain comparisons corresponding to the number of bits of the control signal CTLg. In a case in which the measured gain significantly differs from the expected value even after the search process for the LSB of the control signal CTLg has been performed, an overflow or an underflow is detected.</p>
<p id="p-0038" num="0037">Referring back to <figref idref="DRAWINGS">FIG. 1</figref>, the time-constant setting circuit <b>70</b> includes a dummy charge pump circuit <b>71</b>, a capacitor <b>72</b>, a signal generation section <b>73</b>, a frequency measurement section <b>74</b>, a current control section <b>75</b>, and a current setting section <b>76</b>. The dummy charge pump circuit <b>71</b> is similar in configuration to the charge pump circuit <b>20</b>, and performs push-pull operation for current Ip in accordance with signals UP and DN. The capacitor <b>72</b> receives the current Ip output from the dummy charge pump circuit <b>71</b>. The signal generation section <b>73</b> generates the signals UP and DN based on the voltage produced in the capacitor <b>72</b>. The frequency measurement section <b>74</b> measures the frequency of the signal UP. The current control section <b>75</b> generates a control signal CTLi based on the difference between the frequency measured by the frequency measurement section <b>74</b> and a frequency to be achieved. The current setting section <b>76</b> sets the amount of current in the dummy charge pump circuit <b>71</b> and in the charge pump circuit <b>20</b> according to the control signal CTLi.</p>
<p id="p-0039" num="0038"><figref idref="DRAWINGS">FIG. 6</figref> illustrates the configuration of the signal generation section <b>73</b>. A comparator <b>731</b> compares an input voltage with a voltage REFH and outputs the comparison result. A comparator <b>732</b> compares the input voltage with a voltage REFL and outputs the comparison result. Herein, REFL&lt;REFH. An RS flip-flop <b>733</b> receives the outputs of the comparators <b>731</b> and <b>732</b> and outputs the signals UP and DN, which have opposite phases.</p>
<p id="p-0040" num="0039">The signals UP and DN generated by the signal generation section <b>73</b> are fed back to the dummy charge pump circuit <b>71</b>. The dummy charge pump circuit <b>71</b> performs push-pull operation according to the signals UP and DN, thereby producing a voltage in the capacitor <b>72</b>. <figref idref="DRAWINGS">FIG. 7</figref> is a graph indicating change with time in the voltage produced in the capacitor <b>72</b>. The voltage produced in the capacitor <b>72</b> linearly and periodically varies between the voltages REFH and REFL, and the slope of the lines is represented by Ip/Cd, where Cd indicates the capacitance value of the capacitor <b>72</b>. If it is assumed that the difference between the voltages REFH and REFL is unit voltage (REFH−REFL=1), the frequency f of the signals UP and DN is obtained by the equation
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>f=Ip/Cd/</i>2.<?in-line-formulae description="In-line Formulae" end="tail"?>
<br/>
Therefore, if the current Ip is adjusted so that the frequency f has a predetermined value, Ip/Cd is set to a desired value. In addition, the capacitance value C of the loop filter <b>30</b> is a certain multiple of the capacitance value Cd of the capacitor <b>72</b> (C=αCd). To set Ip/Cd to a desired value is therefore to set the time constant Ip/C of the phase-locked loop circuit to a desired value.
</p>
<p id="p-0041" num="0040"><figref idref="DRAWINGS">FIG. 8</figref> illustrates the configuration of the frequency measurement section <b>74</b>. A counter <b>741</b> counts up pulses of the signal UP or DN (in this embodiment, the signal UP) for a certain period of time indicated by a timer <b>742</b>, and outputs the count value as a measured frequency.</p>
<p id="p-0042" num="0041"><figref idref="DRAWINGS">FIG. 9</figref> illustrates the configuration of the current setting section <b>76</b>. In the current setting section <b>76</b>, five basic units, each composed of an NMOS transistor <b>762</b> and a switch <b>763</b>, are connected in parallel to an NMOS transistor <b>761</b>. Output of the temperature-compensation circuit <b>80</b>, which will be described later, is applied, as an input voltage, to the gate of each NMOS transistor <b>761</b> and <b>762</b>. Each switch <b>763</b> opens/closes according to a corresponding bit in a control signal CTLi. The NMOS transistors <b>762</b> are different in size, and each NMOS transistor <b>762</b> has a size corresponding to the size indicated by the corresponding bit in the control signal CTLi.</p>
<p id="p-0043" num="0042">Current output from the connection point is mirrored by a current mirror circuit <b>764</b> formed of PMOS transistors, and the obtained current is supplied to an NMOS transistor <b>765</b>. The current setting section <b>76</b> outputs the voltage produced at the input side of the current mirror circuit <b>764</b> and the voltage produced in the NMOS transistor <b>765</b> as respective biases to charge current sources and discharge current sources for the dummy charge pump circuit <b>71</b> and the charge pump circuit <b>20</b>. That is, the current setting section <b>76</b> is capable of performing a 5-bit current setting, i.e., a 32-step current setting, for the dummy charge pump circuit <b>71</b> and the charge pump circuit <b>20</b> according to the supplied signal CTLi.</p>
<p id="p-0044" num="0043">It should be noted that all of the NMOS transistors <b>762</b> may have the same size. In that case, a number of NMOS transistors <b>762</b> corresponding to the number of steps that can be controlled by the control signal CTLi may be provided, i.e., 32 NMOS transistors <b>762</b> may be provided. Also, the control signal CTLi is not limited to 5 bits, but may have any number of bits. Furthermore, the current setting section <b>76</b> may include PMOS transistors instead of the NMOS transistors.</p>
<p id="p-0045" num="0044">Time-constant setting by the time-constant setting circuit <b>70</b> is performed in the same manner as the above-described gain setting by the gain setting section <b>64</b>. More specifically, first, the control signal CTLi is set to “0b10000” so as to set the amount of current in the dummy charge pump circuit <b>71</b> and in the charge pump circuit <b>20</b>. At this time, if the measured frequency is equal to the expected value, the current setting process is complete. If the measured frequency exceeds the expected value, the control signal CTLi is set to “0b01000” so as to perform the current setting again. On the other hand, if the measured frequency is lower than the expected value, the control signal CTLi is set to “0b11000” so as to perform the current setting again. This process is repeated until the setting of the LSB of the control signal CTLi is performed. Therefore, the amount of current in the dummy charge pump circuit <b>71</b> and the amount of current in the charge pump circuit <b>20</b> are set to predetermined values by performing at most a number of frequency comparisons corresponding to the number of bits of the control signal CTLi. In a case in which the measured frequency significantly differs from the expected value even after the search process for the LSB of the control signal CTLi has been performed, an overflow or an underflow is detected.</p>
<p id="p-0046" num="0045">If the gain setting and the time-constant setting mentioned above are performed upon start-up of the phase-locked loop circuit, the loop band width is set to the desired value. However, while the phase-locked loop circuit performs normal operation, the switching section <b>61</b> selects the output of the loop filter <b>30</b> as the input to the VCO <b>40</b>, such that dynamic gain adjustment cannot be performed. The gain of the VCO <b>40</b> decreases particularly when the temperature increases. Therefore, in order to keep the loop band width constant, it is necessary to compensate for variation in the gain of the VCO <b>40</b> resulting from temperature changes by using different means. The phase-locked loop circuit of this embodiment therefore includes the temperature-compensation circuit <b>80</b>.</p>
<p id="p-0047" num="0046"><figref idref="DRAWINGS">FIG. 10</figref> illustrates the configuration of the temperature-compensation circuit <b>80</b>. In the temperature-compensation circuit <b>80</b>, a reference voltage Vref is applied to inverting input terminals of operational amplifiers <b>81</b> and <b>82</b>. The operational amplifier <b>81</b> applies the reference voltage Vref to a load composed of a diode <b>83</b> and a resistor <b>84</b> which are connected in series. The operational amplifier <b>82</b> applies the reference voltage Vref to a resistor <b>85</b>. Since the voltage applied to the diode <b>83</b> decreases substantially in proportional to temperature changes, the voltage applied to the resistor <b>84</b> increases substantially in proportional to the temperature changes. In other words, the current passing through the resistor <b>84</b> increases almost in proportional to the temperature changes. On the other hands, variation in the resistance value of the resistor <b>85</b> resulting from temperature changes is negligible. It is therefore considered that the current passing through the resistor <b>85</b> is constant.</p>
<p id="p-0048" num="0047">The respective currents passing through the resistors <b>84</b> and <b>85</b> are mirrored respectively by current mirror circuits <b>86</b> and <b>87</b>, each formed of PMOS transistors. Since the output sides of the current mirror circuits <b>86</b> and <b>87</b> are connected together, the current obtained by the mirroring of the current passing through the resistor <b>84</b> and the current obtained by the mirroring of the current passing through the resistor <b>85</b> are added together, and the resultant current is supplied to an NMOS transistor <b>88</b>. The voltage produced in the NMOS transistor <b>88</b> is input, as a temperature compensation reference voltage, into the charge pump circuit <b>20</b> and to the dummy charge pump circuit <b>71</b> thorough the current setting section <b>76</b>. In this manner, when the gain of the VCO <b>40</b> decreases due to temperature increase, the temperature-compensation circuit <b>80</b> compensates for the gain decrease by increasing the amount of current flowing through the charge pump circuit <b>20</b>.</p>
<p id="p-0049" num="0048">As described above, in this embodiment, the loop band width of the phase-locked loop circuit is set to an optimal value and the optimal value is kept constant.</p>
<p id="p-0050" num="0049">The temperature-compensation circuit <b>80</b> is not always necessary, and may be provided in cases in which variation in the gain of the VCO <b>40</b> caused by temperature changes must be compensated for.</p>
<?DETDESC description="Detailed Description" end="tail"?>
</description>
<us-math idrefs="MATH-US-00001" nb-file="US07298219-20071120-M00001.NB">
<img id="EMI-M00001" he="8.13mm" wi="76.20mm" file="US07298219-20071120-M00001.TIF" alt="embedded image " img-content="math" img-format="tif"/>
</us-math>
<us-claim-statement>What is claimed is:</us-claim-statement>
<claims id="claims">
<claim id="CLM-00001" num="00001">
<claim-text>1. A phase-locked loop circuit comprising:
<claim-text>a gain setting circuit for setting a gain of a voltage controlled oscillator; and</claim-text>
<claim-text>a time-constant setting circuit for setting a time constant, which is determined by the amount of current in a charge pump circuit and a capacitance value of a loop filter,</claim-text>
<claim-text>wherein the gain setting circuit includes:</claim-text>
<claim-text>a switching section for switching inputs into the voltage controlled oscillator;</claim-text>
<claim-text>a gain measurement section for measuring the gain based on a difference between outputs produced from the voltage controlled oscillator in response to a first voltage and a second voltage, respectively, which are input into the voltage controlled oscillator by the switching section;</claim-text>
<claim-text>a gain setting section for setting the gain in accordance with a supplied control signal; and</claim-text>
<claim-text>a gain control section for generating the control signal based on a difference between the gain measured by the gain measurement section and an expected value.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00002" num="00002">
<claim-text>2. A phase-locked loop circuit comprising:
<claim-text>a gain setting circuit for setting a gain of a voltage controlled oscillator; and</claim-text>
<claim-text>a time-constant setting circuit for setting a time constant, which is determined by the amount of current in a charge pump circuit and a capacitance value of a loop filter,</claim-text>
<claim-text>wherein the time-constant setting circuit includes:</claim-text>
<claim-text>a dummy charge pump circuit for performing push-pull operation in accordance with a first signal and a second signal;</claim-text>
<claim-text>a capacitor for receiving a current output from the dummy charge pump circuit;</claim-text>
<claim-text>a signal generation section for generating the first and second signals based on a voltage produced in the capacitor;</claim-text>
<claim-text>a frequency measurement section for measuring a frequency of either the first or second signal;</claim-text>
<claim-text>a current setting section for setting the amount of current in the dummy charge pump circuit and the amount of current in the charge pump circuit in accordance with a supplied control signal; and</claim-text>
<claim-text>a current control section for generating the control signal based on a difference between the frequency measured by the frequency measurement section and an expected value.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00003" num="00003">
<claim-text>3. The circuit of <claim-ref idref="CLM-00002">claim 2</claim-ref>, further comprising a temperature-compensation circuit for outputting a current which increases in amount according to temperature changes,
<claim-text>wherein the current setting section sets the amount of the current in the dummy charge pump circuit and the current in the charge pump circuit based on the current output from the temperature-compensation circuit.</claim-text>
</claim-text>
</claim>
</claims>
</us-patent-grant>
