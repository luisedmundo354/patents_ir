<us-patent-grant lang="EN" dtd-version="v4.2 2006-08-23" file="US07298747-20071120.XML" status="PRODUCTION" id="us-patent-grant" country="US" date-produced="20071106" date-publ="20071120">
<us-bibliographic-data-grant>
<publication-reference>
<document-id>
<country>US</country>
<doc-number>07298747</doc-number>
<kind>B2</kind>
<date>20071120</date>
</document-id>
</publication-reference>
<application-reference appl-type="utility">
<document-id>
<country>US</country>
<doc-number>10332183</doc-number>
<date>20010705</date>
</document-id>
</application-reference>
<us-application-series-code>10</us-application-series-code>
<priority-claims>
<priority-claim sequence="01" kind="national">
<country>FR</country>
<doc-number>00 08897</doc-number>
<date>20000707</date>
</priority-claim>
</priority-claims>
<us-term-of-grant>
<us-term-extension>790</us-term-extension>
</us-term-of-grant>
<classifications-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>H</section>
<class>04</class>
<subclass>L</subclass>
<main-group>12</main-group>
<subgroup>56</subgroup>
<symbol-position>F</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20071120</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
</classifications-ipcr>
<classification-national>
<country>US</country>
<main-classification>37039521</main-classification>
<further-classification>370352</further-classification>
<further-classification>370401</further-classification>
</classification-national>
<invention-title id="d0e71">Method of setting up communications in a packet switching system</invention-title>
<references-cited>
<citation>
<patcit num="00001">
<document-id>
<country>US</country>
<doc-number>6799210</doc-number>
<kind>B1</kind>
<name>Gentry et al.</name>
<date>20040900</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>709223</main-classification></classification-national>
</citation>
<citation>
<patcit num="00002">
<document-id>
<country>US</country>
<doc-number>2001/0005372</doc-number>
<kind>A1</kind>
<name>Cave et al.</name>
<date>20010600</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370401</main-classification></classification-national>
</citation>
<citation>
<patcit num="00003">
<document-id>
<country>US</country>
<doc-number>2001/0053154</doc-number>
<kind>A1</kind>
<name>Christie et al.</name>
<date>20011200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370466</main-classification></classification-national>
</citation>
<citation>
<patcit num="00004">
<document-id>
<country>US</country>
<doc-number>2003/0031173</doc-number>
<kind>A1</kind>
<name>Park et al.</name>
<date>20030200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370389</main-classification></classification-national>
</citation>
<citation>
<patcit num="00005">
<document-id>
<country>US</country>
<doc-number>2004/0228328</doc-number>
<kind>A1</kind>
<name>Potter et al.</name>
<date>20041100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370352</main-classification></classification-national>
</citation>
<citation>
<patcit num="00006">
<document-id>
<country>US</country>
<doc-number>2005/0008008</doc-number>
<kind>A1</kind>
<name>Ohura</name>
<date>20050100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370352</main-classification></classification-national>
</citation>
<citation>
<patcit num="00007">
<document-id>
<country>US</country>
<doc-number>2005/0174990</doc-number>
<kind>A1</kind>
<name>Riemann et al.</name>
<date>20050800</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370352</main-classification></classification-national>
</citation>
<citation>
<nplcit num="00008">
<othercit>Korpi M et al “Supplementary services in the H., 323 IP telephony network” IEEE Communications magazine, US, IEE Service Center. Piscataway, N.J, vol. 37, No. 7, Jul. 1999, pp. 118-125, p. 118, column 2, line38-line 48 Figure 1.</othercit>
</nplcit>
<category>cited by other</category>
</citation>
<citation>
<nplcit num="00009">
<othercit>Thom G A: “H. 323: The Multimedia communications standard for local area networks” IEEE Communications magazine, US, IEEE Service Center. Piscataway, N.J, vol. 34, No. 12, Dec. 1, 1996, pp. 52-56, p. 53, column 2, line 29—p. 54, column 2, line 5 figure 3.</othercit>
</nplcit>
<category>cited by other</category>
</citation>
<citation>
<nplcit num="00010">
<othercit>Anquetil L—P et al: “Media gateway control protocol and voice over ip gateways. MGCP and VOIP Gateways will offer seamless Interworking of new Voip Network with today's telephone networks” electrical communication, Alcatel. Brussels, BE, Apr. 1, 1999, pp. 151-157, p. 153 column 3, line 8-line 18.</othercit>
</nplcit>
<category>cited by other</category>
</citation>
<citation>
<nplcit num="00011">
<othercit>Salman M A et al: “The Future of Ip-PSTN Interworking” Utrecht, NL, Aug. 24-28, 1999, London: IBTE, GB, Aug. 24, 1999, pp. 163-167, the whole document.</othercit>
</nplcit>
<category>cited by other</category>
</citation>
<citation>
<nplcit num="00012">
<othercit>Huitema C et al: “An Architecture for residential internet telephony service” IEEE Network, IEEE INC. New York, US, vol. 13, No. 3, May 1999, pp. 50-56, the whole document.</othercit>
</nplcit>
<category>cited by other</category>
</citation>
<citation>
<nplcit num="00013">
<othercit>“Internet Protocol”, Request for Comments (RFC) 760, Internet Engineering Task Force (IETF), janvier 1980.</othercit>
</nplcit>
<category>cited by other</category>
</citation>
<citation>
<nplcit num="00014">
<othercit>“SIP : Session Initiation Protocol”, RFC 2543, IETF, mars 1999.</othercit>
</nplcit>
<category>cited by other</category>
</citation>
<citation>
<nplcit num="00015">
<othercit>“Megaco Protocol”, Internet Draft, IETF, 21 Février 2000.</othercit>
</nplcit>
<category>cited by other</category>
</citation>
<citation>
<nplcit num="00016">
<othercit>“User Datagram Protocol”, RFC 768, IETF, août 1980.</othercit>
</nplcit>
<category>cited by other</category>
</citation>
<citation>
<nplcit num="00017">
<othercit>“Transmission Control Protocol”, RFC 793, IETF, Sep. 1981.</othercit>
</nplcit>
<category>cited by other</category>
</citation>
<citation>
<nplcit num="00018">
<othercit>“International Search Report, PCT/FR01/02161 dated Oct. 24, 2001.”</othercit>
</nplcit>
<category>cited by other</category>
</citation>
</references-cited>
<number-of-claims>5</number-of-claims>
<us-exemplary-claim>1</us-exemplary-claim>
<us-field-of-classification-search>
<classification-national>
<country>US</country>
<main-classification>3703952</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>370260</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>370261</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>370262</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>370351</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>370356</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>370360</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>370397</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>370238</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>370401</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>370352</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>370465</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>370402</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>370377</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>37039521</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>370252</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>370253</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>379 70</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>379 84</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>379 8807</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>379 8812</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>379 8813</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>709223-226</main-classification>
<additional-info>unstructured</additional-info>
</classification-national>
</us-field-of-classification-search>
<figures>
<number-of-drawing-sheets>4</number-of-drawing-sheets>
<number-of-figures>6</number-of-figures>
</figures>
<us-related-documents>
<related-publication>
<document-id>
<country>US</country>
<doc-number>20030179753</doc-number>
<kind>A1</kind>
<date>20030925</date>
</document-id>
</related-publication>
</us-related-documents>
<parties>
<applicants>
<applicant sequence="001" app-type="applicant-inventor" designation="us-only">
<addressbook>
<last-name>Mercuriali</last-name>
<first-name>Jean-Pierre</first-name>
<address>
<city>Orsay</city>
<country>FR</country>
</address>
</addressbook>
<nationality>
<country>FR</country>
</nationality>
<residence>
<country>FR</country>
</residence>
</applicant>
</applicants>
<agents>
<agent sequence="01" rep-type="attorney">
<addressbook>
<orgname>McCracken &amp; Frank LLP</orgname>
<address>
<country>unknown</country>
</address>
</addressbook>
</agent>
</agents>
</parties>
<assignees>
<assignee>
<addressbook>
<orgname>Aastra Matra Telecom</orgname>
<role>03</role>
<address>
<city>Guyancourt</city>
<country>FR</country>
</address>
</addressbook>
</assignee>
</assignees>
<examiners>
<primary-examiner>
<last-name>Ngo</last-name>
<first-name>Ricky Q.</first-name>
<department>2616</department>
</primary-examiner>
<assistant-examiner>
<last-name>Mui</last-name>
<first-name>Gary</first-name>
</assistant-examiner>
</examiners>
<pct-or-regional-filing-data>
<document-id>
<country>WO</country>
<doc-number>PCT/FR01/02161</doc-number>
<kind>00</kind>
<date>20010705</date>
</document-id>
<us-371c124-date>
<date>20030429</date>
</us-371c124-date>
</pct-or-regional-filing-data>
<pct-or-regional-publishing-data>
<document-id>
<country>WO</country>
<doc-number>WO02/05512</doc-number>
<kind>A </kind>
<date>20020117</date>
</document-id>
</pct-or-regional-publishing-data>
</us-bibliographic-data-grant>
<abstract id="abstract">
<p id="p-0001" num="0000">A call server, a media gateway and terminals are connected to a packet switching network. Other terminals are connected to the gateway interfaces. The method for setting up communication includes generating a call processing task for the calling terminal in the call server, transmitting by the task a connection set-up message including at least an identifier of the called terminal and a first network address enabling to reach the calling terminal, generating a call processing task for the called terminal, and sending, based on the task to a second network address enabling to reach the called terminal, signaling data indicating in particular the first network address. When the first and second network addresses are identical and correspond to a gateway address, the latter sets up between the two terminals a communication path which does not pass through the network.</p>
</abstract>
<drawings id="DRAWINGS">
<figure id="Fig-EMI-D00000" num="00000">
<img id="EMI-D00000" he="185.17mm" wi="134.03mm" file="US07298747-20071120-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00001" num="00001">
<img id="EMI-D00001" he="186.18mm" wi="135.47mm" file="US07298747-20071120-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00002" num="00002">
<img id="EMI-D00002" he="181.69mm" wi="137.08mm" orientation="landscape" file="US07298747-20071120-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00003" num="00003">
<img id="EMI-D00003" he="187.11mm" wi="146.98mm" file="US07298747-20071120-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00004" num="00004">
<img id="EMI-D00004" he="187.11mm" wi="142.41mm" file="US07298747-20071120-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
</drawings>
<description id="description">
<?BRFSUM description="Brief Summary" end="lead"?>
<p id="p-0002" num="0001">The present invention relates to a method of setting up communications between terminals in a communication system, in particular in a multimedia system.</p>
<p id="p-0003" num="0002">The invention applies in particular to a communication system operating on a network for transmitting packets according to the IP protocol (“Internet Protocol”, Request for Comments (RFC) 760, Internet Engineering Task Force (IETF), January 1980) to which one or more call servers providing telephony services to a collection of subscribers are connected.</p>
<p id="p-0004" num="0003">The success of networks operating according to the IP protocol has led to the development of real-time protocols RTP (“Real Time Protocol”), and RTCP (“Real Time Control Protocol”) capable of supporting traffic of telephony type. Telephony terminals which link up to such networks, hereinbelow called “IP terminals”, are now available. These IP terminals can in particular take the form of conventional telephones, designed to operate on circuit switching networks, associated with appropriate adapters, of telephone terminals which can be linked directly to the IP network (for example ETHERSET terminals marketed by the company Nortel Networks), or of microcomputers equipped with telephony software (for example NETMEETING telephone software marketed by the company Microsoft).</p>
<p id="p-0005" num="0004">The success of IP networks suggests moreover that they be used to support telephony traffic or more generally multimedia traffic not only between two users of IP terminals, but also between users of traditional terminals. One of the objectives of the TIPHON project (“Telecommunications and Internet Protocol Harmonization Over Networks”) conducted by ETSI (“European Telecommunications Standards Institute”) is to solve the problems of interworking between voice over IP transport applications and circuit switching networks.</p>
<p id="p-0006" num="0005">This project borrows the functional model defined in the H.323 standard of the International Telecommunications Union (ITU-T), which defines three entities, the gatekeeper, the gateway, and the terminal. The functions of the H.323 gateway have been distributed by TIPHON over three modules: the signaling gateway (SG), the media gateway (MGW), and the media gateway controller (MGC).</p>
<p id="p-0007" num="0006">The media gateway converts streams originating from a first type of network to a format corresponding to a second type of network. When it is used for example between a conventional circuit switching network and a packet switching network operating according to the IP protocol, it typically provides a point of access for various types of “conventional” terminals (analog terminals, ISDN stations, wireless telephone relays, etc.), and it moreover comprises a point of access connected to the IP network.</p>
<p id="p-0008" num="0007">In this architecture, the signal processing relating to the setting up of a communication (or any other provision of service) through the media gateway is performed by the gateway controller (MGC). This processing comprises on the one hand the tasks of supervising the MGW so as to identify the voice signaling (line seizure, release, dialing, occupancy, charging, etc.) and to translate it into high-level signaling and so as to address various commands to the MGW (ringing, tones, display, etc.), and on the other hand call management tasks for processing requests relating to the MGW.</p>
<p id="p-0009" num="0008">The call management tasks customarily use messages according to standardized formats and protocols, such as for example H.323 or SIP (“SIP: Session Initiation Protocol”, RFC 2543, IETF, March 1999), while the MGW control tasks carry out the necessary translations for taking account of the specific individualities of the various types of terminals or of networks capable of being linked to the driven MGW. For this purpose, the MGC has the capability to download to the MGW scripts describing profiles of terminals using protocols such as MGCP, H.248, or Megaco.</p>
<p id="p-0010" num="0009">These protocols describe the messages exchanged by physically distinct MGW and MGC entities (see for example, “Megaco Protocol”, Internet Draft, IETF, Feb. 21, 2000). They allow several MGWs to be driven by a single MGC. Each MGW is driven entirely by an MGC, so that it comprises no software intelligence. This functional distinction, based essentially on the boundary between software and hardware, compels the MGC to have the capacity to drive all the signalings of the connection lines of the various items of equipment which may be connected to each driven MGW. This considerably increases the complexity of the messages exchanged over the interface between the two types of equipment.</p>
<p id="p-0011" num="0010">A further drawback is revealed by analyzing the signal processing performed when setting up a voice path between two terminals connected to one and the same MGW. Currently, the MGWs incorporate a switching matrix which makes it possible to effect connections between the various conventional telephony interfaces so as to ensure the routing of the signals in circuit mode. On receipt of a call setup message originating from a call server and destined for a conventional terminal linked to a point of access of an MGW driven by an MGC, the MGC sends the MGW a request for connection within the</p>
<p id="p-0012" num="0011">MGW between the IP access point, an input of the switching matrix, and the point of access of the requested terminal, including in the case where the call originates from a conventional terminal linked to the same MGW as the called terminal. Only the MGC can in fact control the internal connections effected within an MGW so as to connect two points of access, just as the connections between the IP access point of the MGW.</p>
<p id="p-0013" num="0012">Thus, as soon as a communication involving two terminals connected to the same media gateway is to be set up, the setup phase requires the reserving of resources of the IP access point at the level of the home MGW hosting the terminals with a view to the setting up of the required connections.</p>
<p id="p-0014" num="0013">An aim of the present invention is to optimize, in a communication system of this type, the use of the resources mobilized within the entities forming the gateways.</p>
<p id="p-0015" num="0014">According to the invention, there is proposed a method of setting up communications in a system comprising a packet switching network, at least one call server connected to the network, at least one media gateway connected to the network at a gateway address, a first collection of terminals connected to the network at respective terminal addresses, and a second collection of terminals connected to interfaces of the media gateway. Each terminal is associated with a call server in respect of signaling processing. The method according to the invention comprises the following steps for setting up a communication between calling and called terminals:
<ul id="ul0001" list-style="none">
    <li id="ul0001-0001" num="0000">
    <ul id="ul0002" list-style="none">
        <li id="ul0002-0001" num="0015">creation of a first call processing task in the call server associated with the calling terminal;</li>
        <li id="ul0002-0002" num="0016">transmission, by the first call processing task, of a setup message including at least one identifier of the called terminal and a first network address making it possible to reach the calling terminal;</li>
        <li id="ul0002-0003" num="0017">in response to the receipt of said setup message, creation of a second call processing task in the call server associated with the called terminal;</li>
        <li id="ul0002-0004" num="0018">sending, from the second call processing task to a second network address making it possible to reach the called terminal, of signaling information indicating at least said first network address;</li>
        <li id="ul0002-0005" num="0019">when the first and second network address are identical and correspond to a gateway address, setup within the gateway having said address of a communication path between the calling and called terminals, not passing through the packet switching network.</li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0016" num="0020">The method optimizes the use of the packet switching network serving as support a communication system (this network will generally be of IP type). Passage through the IP network and use of the corresponding addressing resources are avoided when the gateway determines that it can route the communication locally without passing through the network interface.</p>
<p id="p-0017" num="0021">Another aspect of the present invention concerns a media gateway, comprising an interface for linking to a packet switching network, interfaces for linking a collection of terminals, a switching matrix connected to said interfaces, and means of control of the interfaces and of the switching matrix so as to set up communication paths, at least one call server being connected to the network so as to perform signaling processing for at least the terminals of said collection, in which the control means are arranged so as to set up a communication path in response to instructions emanating from the call server in a signaling exchange performed over the packet switching network, in the course of which exchange the control means obtain respective network addresses for calling and called terminals, at least one of which belongs to said collection, the path set up passing through interfaces for linking of the calling and called terminals and through the switching matrix, without passing through the interface for linking to the network, when said network addresses are identical and correspond to a network address of the gateway, the path set up passing through an interface for linking of one of the calling and called terminals, through the interface for linking to the network and through the switching matrix when one of said network addresses differs from the network address of the gateway.</p>
<?BRFSUM description="Brief Summary" end="tail"?>
<?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?>
<description-of-drawings>
<p id="p-0018" num="0022">Other features and advantages of the invention will become apparent in the description hereinbelow of non-limiting exemplary embodiments, with reference to the appended drawings, in which:</p>
<p id="p-0019" num="0023"><figref idref="DRAWINGS">FIG. 1</figref> is a diagram of a communication system implementing the invention;</p>
<p id="p-0020" num="0024"><figref idref="DRAWINGS">FIG. 2</figref> is a schematic diagram of a gateway according to the invention;</p>
<p id="p-0021" num="0025"><figref idref="DRAWINGS">FIGS. 3 to 6</figref> are charts illustrating half-call procedures respectively in the case of a calling terminal of IP type, in the case of a called terminal of IP type, in the case of a calling terminal of non-IP type and in the case of a called terminal of non-IP type.</p>
</description-of-drawings>
<?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?>
<?DETDESC description="Detailed Description" end="lead"?>
<p id="p-0022" num="0026"><figref idref="DRAWINGS">FIG. 1</figref> shows, by way of illustration, an exemplary communication system constructed on the basis of an IP network consisting of two local area networks (LAN) <b>54</b>, <b>55</b> connected together by way of a wide-area network (WAN) <b>56</b>. The WAN plays the role of interconnection between the subnetworks <b>54</b>, <b>55</b> formed by the LANS.</p>
<p id="p-0023" num="0027">Various IP terminals <b>40</b>-<b>43</b> are connected directly to the LANs <b>54</b>, <b>55</b>, and are managed by two call servers <b>52</b>, <b>53</b> which are connected to the subnetworks <b>54</b>, <b>55</b> respectively. There could also be a single call server for the whole network. Such a terminal <b>40</b> may be a conventional telephone <b>47</b> associated with an adapter <b>48</b> for linking to the IP network, a telephone terminal <b>41</b>, <b>42</b> incorporating an IP interface or else a microcomputer <b>43</b> executing a telephony over IP network application.</p>
<p id="p-0024" num="0028">The invention is described hereinbelow in the particular case where the network uses the H.323 standard of the ITU-T for call signaling. Each call server <b>52</b>, <b>53</b> then has a gatekeeper function.</p>
<p id="p-0025" num="0029">For the transmission of coded speech over the IP network <b>54</b>-<b>56</b>, use is made, as is normal, of the UDP transport protocol (“User Datagram Protocol”, RFC 768, IETF, August 1980) and the RTP and RTCP real-time protocols. Various modes of speech coding/decoding can be used by the IP terminals <b>40</b>-<b>43</b>. In the case of H.323, the audio coding can comply with one of the recommendations G.711, G.722, G.723.1, G.728 and G.729 of the ITU-T.</p>
<p id="p-0026" num="0030">In the example represented, each subnetwork comprises a media gateway (MGW) <b>60</b>, <b>61</b> connected to the LAN <b>54</b>, <b>55</b>. Each MGW has a determined address in the IP network. Conventional terminals (that is to say non-IP) <b>32</b>-<b>35</b> can be connected to one of the MGWs <b>60</b>, <b>61</b>. These terminals are for example of S.63 type (<b>32</b>, <b>33</b>) or ISDN type (<b>34</b>) or else wireless terminals <b>35</b> which connect up by way of radio installations <b>37</b>, <b>38</b> (for example DECT) connected to the MGWs.</p>
<p id="p-0027" num="0031">One or more MGWs may moreover comprise interfaces for linking to external networks such as a switched telephone network (STN) <b>50</b>.</p>
<p id="p-0028" num="0032">In the example represented, each MGW is driven respectively by a media gateway controller (MGC) <b>62</b>, <b>63</b>. The MGC/MGW assembly ensures the interface between the IP network equipped with its call servers <b>52</b>, <b>53</b> and various types of lines, depending on the desired compatibilities of the system.</p>
<p id="p-0029" num="0033">The signaling between the call server <b>52</b>, <b>53</b> and the MGC <b>62</b>, <b>63</b> is for example transported according to the protocols of the H.323 standard (H.225 for high-level signaling and H.245 for voice signaling), while the Megaco protocol can structure the exchanges between the MGC <b>62</b>, <b>63</b> and the MGW <b>60</b>, <b>61</b>.</p>
<p id="p-0030" num="0034">Each telephone terminal <b>32</b>-<b>35</b>, <b>40</b>-<b>43</b> capable of communicating by way of the network <b>54</b>-<b>56</b> has a host call server which, in the case of a wire terminal, is typically that linked to the same subnetwork as the terminal. This host call server ensures in particular the signaling processing relating to the terminals.</p>
<p id="p-0031" num="0035">In the example considered, the signaling is transmitted over the IP network in accordance with the H.323 standard in sessions of the TCP transport protocol (“Transmission Control Protocol”, RFC 793, IETF, September 1981) set up between two call servers or between an IP terminal and its call server. In the case of a terminal connected by way of a gateway <b>60</b>, <b>61</b>, its call server <b>52</b>, <b>53</b> talks to the MGC <b>62</b>, <b>63</b> according to the H.323 standard in a TCP session, the MGC <b>62</b>, <b>63</b> talks to the MGW <b>60</b>, <b>61</b> according to the Megaco protocol in another TCP session, and the MGW talks to the terminal according to the signaling format specific to the type of terminal.</p>
<p id="p-0032" num="0036"><figref idref="DRAWINGS">FIG. 2</figref> shows the structure of an MGW <b>60</b> which incorporates points of access for analog terminals <b>32</b>, ISDN terminals <b>34</b> and for the linking of radio installations <b>37</b>, as well as a point of access for linking to the LAN <b>54</b>.</p>
<p id="p-0033" num="0037">Each point of access of the MGW <b>60</b> comprises a physical interface <b>70</b>-<b>73</b>, which ensures the physical signaling functions (detection of events, commands, etc.). Each of these interfaces <b>70</b>-<b>73</b> is connected to the bus <b>74</b> of a processor <b>75</b> associated with a memory <b>76</b>. They are moreover connected to a switching matrix <b>77</b>, which operates a physical switching, under the control of the processor <b>75</b>, between time-multiplexed channels in accordance with a multiplexing scheme specific to the MGW.</p>
<p id="p-0034" num="0038">The IP interface <b>70</b> is connected to the LAN <b>54</b>, at the IP address of the gateway. Under this address, it uses one or more TCP logic ports for the exchanges of signaling with the associated MGC, and UDP logic ports for the various open RTP-RTCP sessions for transporting coded speech. The TCP signaling port makes the signaling programs of the processor <b>75</b> talk to the MGC. The RTP/UDP ports are associated with translation modules connected to the switching matrix <b>77</b>.</p>
<p id="p-0035" num="0039">In the example represented, the MGW has one or more interfaces <b>71</b> for analog terminals <b>32</b>, one or more interfaces <b>72</b> for ISDN terminals <b>34</b> and one or more interfaces <b>73</b> for radio installations <b>37</b>. Each of these interfaces <b>71</b>-<b>73</b> caters for the translations and shapings required for the compatibility of the facilities linked to the points of access with the format used by the switching matrix. It extracts the signaling received on the line connected to the point of access and advises the processor <b>75</b> thereof, so that the latter forwards the signaling information to the MGCG and it inserts signaling onto the line under the control of the processor <b>75</b>.</p>
<p id="p-0036" num="0040">A half-call relating to a terminal comprises the creation of a Single Call Monitor (SCM) task in the terminal's host call server, which carries out all the analysis and decision functions (call routing, request for capability, etc.) involved in call management. For these functions, the SCM consults tables stored in the call server, containing the association between the terminal's directory number and a corresponding IP address, at which this terminal can be reached (the terminal's own IP address if it is of IP type, and the IP address of an MGC and/or MGW gateway otherwise). These tables furthermore define the user's rights.</p>
<p id="p-0037" num="0041">Various types of software modules are used by the processors of the MGC and of the MGW to perform the signaling processing. A half-call relating to a non-IP terminal thus comprises the creation of a task T_MGC within the MGC <b>62</b>, <b>63</b> which carries out the functions of interfacing with the SCM of the call server, while a task T_MGW within the MGW <b>60</b>, <b>61</b> manages the details specific to each type of terminal. For these functions, the T_MGW consults tables stored in the memory <b>66</b>, which contain in particular information relating to the type and to the identification of the interface <b>71</b>-<b>73</b> to which the terminal equipment is connected as well as to the identification of the associated user (directory number). The T_MGC consults tables stored in the MGC <b>62</b>, <b>63</b>, which contain in particular information making it possible to associate users' identification information, namely their directory numbers, and the IP addresses of the MGWs <b>60</b>, <b>61</b> to which they are linked. During initializing of the MGW <b>60</b>, <b>61</b>, the task T_MGW constructs its tables and declares itself to the MGC <b>62</b>, <b>63</b>. Allowance for the mobility of the wireless terminals <b>35</b> may lead to updatings of these tables in the MGWs and the MGCs.</p>
<p id="p-0038" num="0042">Thus, the SCM task executed in the call server manipulates only terminal equipment identified by IP addresses and directory numbers.</p>
<p id="p-0039" num="0043">As a variant, it is possible to dispense with the MGCs <b>62</b>, <b>63</b> and to make the call servers <b>52</b>, <b>53</b> talk directly to the MGWs <b>60</b>, <b>61</b> without using the Megaco protocol. It suffices to furnish the MGW with the capacity to process the H.323 signaling.</p>
<p id="p-0040" num="0044">This variant will be considered in the call scenarios described hereinbelow, so as to streamline the description thereof. This may readily be carried over to the case where the network is equipped with MGCs using an intermediate protocol such as Megaco or MGCP.</p>
<p id="p-0041" num="0045">In the charts of <figref idref="DRAWINGS">FIGS. 3 to 6</figref>, each half-call relating to a terminal entails a call processing which is executed completely in the call server <b>52</b>, <b>53</b> in the case of an IP terminal <b>40</b>-<b>43</b> (SCM task, <figref idref="DRAWINGS">FIGS. 3 and 4</figref>), and which is divided into SCM tasks, as appropriate T_MGC, and T_MGW in the case of a non-IP terminal (<figref idref="DRAWINGS">FIGS. 5 and 6</figref>). In each chart, the notation “rg” refers to the requesting terminal, and the notation “rd” refers to the requested terminal.</p>
<p id="p-0042" num="0046">A call begins with an exchange of information between the calling terminal <b>80</b>, <b>180</b> and the SCM task <b>81</b>, <b>181</b> corresponding thereto (<figref idref="DRAWINGS">FIGS. 3 and 5</figref>). This SCM task has for example been created by the call server of the calling terminal <b>80</b>, <b>180</b> on receipt of a message signaling line seizure by this terminal. It addresses to the terminal the messages coding the information to be presented to the user (displays, tones, etc.), and recovers the data supplied by the user to define his request (choice of functions, dialing, etc.).</p>
<p id="p-0043" num="0047">When the exchange with the calling terminal <b>80</b>, <b>180</b> affords it sufficient information, the SCM task <b>81</b>, <b>181</b> produces a setup message comprising in particular the following elements:
<ul id="ul0003" list-style="none">
    <li id="ul0003-0001" num="0000">
    <ul id="ul0004" list-style="none">
        <li id="ul0004-0001" num="0048">the directory number of the called terminal <b>90</b>, <b>190</b>, defined directly or indirectly by the user of the calling terminal <b>80</b>, <b>180</b>;</li>
        <li id="ul0004-0002" num="0049">an IP address making it possible to reach the calling terminal <b>80</b>, <b>180</b> in the network <b>54</b>-<b>56</b>, a corresponding UDP port number for the transmission of voice according to the RTP protocol and another UDP port number for the transmission of control information according to the RTCP protocol;</li>
        <li id="ul0004-0003" num="0050">possibly the directory number of the calling terminal <b>80</b>, <b>180</b>.</li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0044" num="0051">The setup message is sent to the IP address of the call server which will create the SCM task <b>91</b>, <b>191</b> for the half-call on the requested side. This IP address is deduced from the directory number of the called terminal. This deduction may be implicit in the organization of the directory numbers, or may result from the consultation of a table available to the call servers. If the same call server is required to process the half-call on the requested side (this always occurring in the particular case where there is just one call server), the setup message needs not travel over the IP network.</p>
<p id="p-0045" num="0052">In the case of a calling terminal <b>80</b> of IP type, the dialogue with the call server takes place directly in a TCP connection between the terminal and the SCM task <b>81</b> (<figref idref="DRAWINGS">FIG. 3</figref>).</p>
<p id="p-0046" num="0053">In the case of a non-IP terminal <b>180</b>, it takes place by way of the task T_MGW <b>182</b> (and T_MGC as appropriate) which effects the software interface with the H.323 and/or Megaco protocol (<figref idref="DRAWINGS">FIG. 5</figref>). The task T_MGW <b>182</b> is created in the gateway <b>60</b> on receipt of the signaling of line seizure by the relevant physical interface <b>71</b>-<b>73</b>. It is this task T_MGW which supplies the IP address (namely that of the MGW) and the UDP port numbers assigned to the terminal, and it transmits a session opening message to the IP address of the corresponding call server <b>52</b>.</p>
<p id="p-0047" num="0054">If it accepts the call, the SCM task <b>91</b>, <b>191</b> for the half-call on the requested side transmits an incoming call signaling to the requested terminal <b>90</b>, <b>190</b> (<figref idref="DRAWINGS">FIGS. 4 and 6</figref>), by supplying at least the IP address and the UDP port numbers defined for the calling terminal in the setup message, and possibly its directory number.</p>
<p id="p-0048" num="0055">In the case of a called terminal <b>90</b> of IP type, the call server transmits this signaling directly in a TCP connection between the terminal and the SCM task <b>91</b> (<figref idref="DRAWINGS">FIG. 4</figref>).</p>
<p id="p-0049" num="0056">In the case of a non-IP terminal <b>190</b>, the call server transmits this signaling to the MGW <b>60</b>, while appending the directory number of the requested terminal. On receipt of this information, the MGW creates a task T_MGW, which communicates the incoming call to the requested terminal <b>190</b> and assigns available UDP ports of the interface <b>70</b> thereto.</p>
<p id="p-0050" num="0057">The (IP address, UDP port) pair which is valid for the requested terminal <b>90</b>, <b>190</b> is returned to the SCM <b>81</b>, <b>181</b> on the requesting side (ALERT message of <figref idref="DRAWINGS">FIGS. 4 and 6</figref>), which transmits it to the IP address assigned to the calling terminal, that is to say to the IP address of the terminal in the case of <figref idref="DRAWINGS">FIG. 3</figref>, and to that of its MGW in the case of <figref idref="DRAWINGS">FIG. 5</figref>.</p>
<p id="p-0051" num="0058">This makes it possible to define a path which can be used for communication inside the IP network, since the IP terminals and the MGWs know the (IP address, UDP port) pairs of their counterpart.</p>
<p id="p-0052" num="0059">When the called terminal <b>90</b>, <b>190</b> seizes the line, the communication can commence (CONNECT signaling message in <figref idref="DRAWINGS">FIGS. 3 to 6</figref>).</p>
<p id="p-0053" num="0060">If one of the terminals is not of IP type, the processor <b>75</b> of its MGW completes the communication path by instructing the IP interface <b>70</b>, the switching matrix <b>77</b> and the interface <b>71</b>-<b>73</b> to which the terminal is linked so that the interfaces carry out the required translations and that the matrix <b>77</b> makes them communicate with one another.</p>
<p id="p-0054" num="0061">Sometimes, the two communicating terminals are linked to the same MGW. This is immediately detectable by the T_MGW tasks since the IP addresses assigned to the two terminals are identical and correspond to that of the MGW.</p>
<p id="p-0055" num="0062">In this case, the T_MGW task does not reserve any UDP ports of the IP interface <b>70</b> for the communication. Coded speech will not pass through the IP interface <b>70</b>, but through the interfaces <b>71</b>-<b>73</b> to which the two terminals are respectively linked and through the switching matrix <b>77</b>. The processor <b>75</b> instructs these two interfaces and the matrix <b>77</b> accordingly.</p>
<p id="p-0056" num="0063">This process optimizes the use of the resources of the IP network as well as of its interfaces in the gateways.</p>
<?DETDESC description="Detailed Description" end="tail"?>
</description>
<us-claim-statement>The invention claimed is:</us-claim-statement>
<claims id="claims">
<claim id="CLM-00001" num="00001">
<claim-text>1. A method of setting up communications in a system comprising a packet switching network, between at least one call server connected to the network, at least one media gateway connected to the network at a gateway address, a first collection of terminals connected to the network at respective terminal addresses, and a second collection of terminals connected to interfaces of the media gateway, wherein each terminal is associated with the call server in respect of signaling processing, the method comprising the following steps for setting up a communication between calling and called terminals:
<claim-text>creating a first call processing task in the call server associated with the calling terminal;</claim-text>
<claim-text>transmitting, by the first call processing task, a setup message including at least one identifier of the called terminal and a first network address making it possible to reach the calling terminal;</claim-text>
<claim-text>in response to the receipt of said setup message, creating a second call processing task in the call server associated with the called terminal;</claim-text>
<claim-text>sending, from the second call processing task to a second network address making it possible to reach the called terminal, of signaling information indicating at least said first network address;</claim-text>
<claim-text>when the first and second network address are identical and correspond to the gateway address, setting up within the gateway having said gateway address communication path between the calling and called terminals, not passing through the packet switching network.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00002" num="00002">
<claim-text>2. The method as claimed in <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the system furthermore comprises at least one media gateway controller having an address in the packet switching network, and wherein, when said second address corresponds to the gateway address, said signaling information is transmitted from the second call processing task to the media gateway controller and relayed to the second network address by the media gateway controller.</claim-text>
</claim>
<claim id="CLM-00003" num="00003">
<claim-text>3. The method as claimed in <claim-ref idref="CLM-00002">claim 2</claim-ref>, wherein the packet switching network operates according to IP protocol.</claim-text>
</claim>
<claim id="CLM-00004" num="00004">
<claim-text>4. The method as claimed in <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the packet switching network operates according to an IP protocol.</claim-text>
</claim>
<claim id="CLM-00005" num="00005">
<claim-text>5. A media gateway, comprising:
<claim-text>an interface for linking to a packet switching network;</claim-text>
<claim-text>interfaces for linking a collection of terminals;</claim-text>
<claim-text>a switching matrix connected to said interfaces;</claim-text>
<claim-text>at least one call server being connected to the network so as to perform signaling processing for at least the terminals of said collection, and</claim-text>
<claim-text>means for controlling the interfaces and the switching matrix adapted to set up a communication path in response to instructions emanating from the call server in a signaling exchange performed over the packet switching network, in the course of which exchange, respective network addresses for calling and called terminals, one at least of which belongs to said collection, are obtained by the control mean,</claim-text>
<claim-text>the communication path passing through interfaces for linking of the calling and the called terminals and through the switching matrix, without passing through the interface for linking to the network, when said network addresses are identical and correspond to a network address of the gateway, and</claim-text>
<claim-text>the communication path passing through an interface for linking of the calling and the called terminals, through the interface for linking to the network and through the switching matrix, when one of said network addresses differs from the network address of the gateway.</claim-text>
</claim-text>
</claim>
</claims>
</us-patent-grant>
