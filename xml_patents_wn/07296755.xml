<us-patent-grant lang="EN" dtd-version="v4.2 2006-08-23" file="US07296755-20071120.XML" status="PRODUCTION" id="us-patent-grant" country="US" date-produced="20071106" date-publ="20071120">
<us-bibliographic-data-grant>
<publication-reference>
<document-id>
<country>US</country>
<doc-number>07296755</doc-number>
<kind>B2</kind>
<date>20071120</date>
</document-id>
</publication-reference>
<application-reference appl-type="utility">
<document-id>
<country>US</country>
<doc-number>11220580</doc-number>
<date>20050908</date>
</document-id>
</application-reference>
<us-application-series-code>11</us-application-series-code>
<us-term-of-grant>
<disclaimer>
<text>This patent is subject to a terminal disclaimer.</text>
</disclaimer>
</us-term-of-grant>
<classifications-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>G</section>
<class>06</class>
<subclass>K</subclass>
<main-group>19</main-group>
<subgroup>06</subgroup>
<symbol-position>F</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20071120</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>G</section>
<class>06</class>
<subclass>K</subclass>
<main-group>5</main-group>
<subgroup>00</subgroup>
<symbol-position>L</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20071120</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>G</section>
<class>08</class>
<subclass>C</subclass>
<main-group>1</main-group>
<subgroup>00</subgroup>
<symbol-position>L</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20071120</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>G</section>
<class>08</class>
<subclass>C</subclass>
<main-group>1</main-group>
<subgroup>065</subgroup>
<symbol-position>L</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20071120</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>G</section>
<class>07</class>
<subclass>B</subclass>
<main-group>15</main-group>
<subgroup>00</subgroup>
<symbol-position>L</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20071120</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>G</section>
<class>07</class>
<subclass>B</subclass>
<main-group>15</main-group>
<subgroup>02</subgroup>
<symbol-position>L</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20071120</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
</classifications-ipcr>
<classification-national>
<country>US</country>
<main-classification>235492</main-classification>
<further-classification>235380</further-classification>
<further-classification>340928</further-classification>
<further-classification>705 13</further-classification>
</classification-national>
<invention-title id="d0e51">Electronic payment system, payment apparatus and terminal thereof</invention-title>
<references-cited>
<citation>
<patcit num="00001">
<document-id>
<country>US</country>
<doc-number>5086389</doc-number>
<kind>A</kind>
<name>Hassett et al.</name>
<date>19920200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>705 13</main-classification></classification-national>
</citation>
<citation>
<patcit num="00002">
<document-id>
<country>US</country>
<doc-number>5144553</doc-number>
<kind>A</kind>
<name>Hassett et al.</name>
<date>19920900</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>705 13</main-classification></classification-national>
</citation>
<citation>
<patcit num="00003">
<document-id>
<country>US</country>
<doc-number>5204675</doc-number>
<kind>A</kind>
<name>Sekine</name>
<date>19930400</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>340933</main-classification></classification-national>
</citation>
<citation>
<patcit num="00004">
<document-id>
<country>US</country>
<doc-number>5283829</doc-number>
<kind>A</kind>
<name>Anderson</name>
<date>19940200</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00005">
<document-id>
<country>US</country>
<doc-number>5310999</doc-number>
<kind>A</kind>
<name>Claus et al.</name>
<date>19940500</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>235384</main-classification></classification-national>
</citation>
<citation>
<patcit num="00006">
<document-id>
<country>US</country>
<doc-number>5422473</doc-number>
<kind>A</kind>
<name>Kamata</name>
<date>19950600</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>235384</main-classification></classification-national>
</citation>
<citation>
<patcit num="00007">
<document-id>
<country>US</country>
<doc-number>5424727</doc-number>
<kind>A</kind>
<name>Shieh</name>
<date>19950600</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>340928</main-classification></classification-national>
</citation>
<citation>
<patcit num="00008">
<document-id>
<country>US</country>
<doc-number>5428353</doc-number>
<kind>A</kind>
<name>Bird</name>
<date>19950600</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>340933</main-classification></classification-national>
</citation>
<citation>
<patcit num="00009">
<document-id>
<country>US</country>
<doc-number>5461217</doc-number>
<kind>A</kind>
<name>Claus</name>
<date>19951000</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00010">
<document-id>
<country>US</country>
<doc-number>5485520</doc-number>
<kind>A</kind>
<name>Chaum et al.</name>
<date>19960100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>705 74</main-classification></classification-national>
</citation>
<citation>
<patcit num="00011">
<document-id>
<country>US</country>
<doc-number>5554984</doc-number>
<kind>A</kind>
<name>Shigenaga et al.</name>
<date>19960900</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>340937</main-classification></classification-national>
</citation>
<citation>
<patcit num="00012">
<document-id>
<country>US</country>
<doc-number>5565857</doc-number>
<kind>A</kind>
<name>Lee</name>
<date>19961000</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>340  542</main-classification></classification-national>
</citation>
<citation>
<patcit num="00013">
<document-id>
<country>US</country>
<doc-number>5602919</doc-number>
<kind>A</kind>
<name>Hurta et al.</name>
<date>19970200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>705 65</main-classification></classification-national>
</citation>
<citation>
<patcit num="00014">
<document-id>
<country>US</country>
<doc-number>5650604</doc-number>
<kind>A</kind>
<name>Marcous et al.</name>
<date>19970700</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>235379</main-classification></classification-national>
</citation>
<citation>
<patcit num="00015">
<document-id>
<country>US</country>
<doc-number>5659165</doc-number>
<kind>A</kind>
<name>Jennings et al.</name>
<date>19970800</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00016">
<document-id>
<country>US</country>
<doc-number>5663548</doc-number>
<kind>A</kind>
<name>Hayashi et al.</name>
<date>19970900</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>235384</main-classification></classification-national>
</citation>
<citation>
<patcit num="00017">
<document-id>
<country>US</country>
<doc-number>5696827</doc-number>
<kind>A</kind>
<name>Brands</name>
<date>19971200</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00018">
<document-id>
<country>US</country>
<doc-number>5745886</doc-number>
<kind>A</kind>
<name>Rosen</name>
<date>19980400</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00019">
<document-id>
<country>US</country>
<doc-number>5760709</doc-number>
<kind>A</kind>
<name>Hayashi</name>
<date>19980600</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>340923</main-classification></classification-national>
</citation>
<citation>
<patcit num="00020">
<document-id>
<country>US</country>
<doc-number>5777565</doc-number>
<kind>A</kind>
<name>Hayashi et al.</name>
<date>19980700</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>340928</main-classification></classification-national>
</citation>
<citation>
<patcit num="00021">
<document-id>
<country>US</country>
<doc-number>5805082</doc-number>
<kind>A</kind>
<name>Hassett</name>
<date>19980900</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>340928</main-classification></classification-national>
</citation>
<citation>
<patcit num="00022">
<document-id>
<country>US</country>
<doc-number>5809142</doc-number>
<kind>A</kind>
<name>Hurta et al.</name>
<date>19980900</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>705 68</main-classification></classification-national>
</citation>
<citation>
<patcit num="00023">
<document-id>
<country>US</country>
<doc-number>5809480</doc-number>
<kind>A</kind>
<name>Chasek</name>
<date>19980900</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>705 13</main-classification></classification-national>
</citation>
<citation>
<patcit num="00024">
<document-id>
<country>US</country>
<doc-number>5819234</doc-number>
<kind>A</kind>
<name>Slavin et al.</name>
<date>19981000</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>340 104</main-classification></classification-national>
</citation>
<citation>
<patcit num="00025">
<document-id>
<country>US</country>
<doc-number>5864831</doc-number>
<kind>A</kind>
<name>Schuessler</name>
<date>19990100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>705417</main-classification></classification-national>
</citation>
<citation>
<patcit num="00026">
<document-id>
<country>US</country>
<doc-number>5926546</doc-number>
<kind>A</kind>
<name>Maeda et al.</name>
<date>19990700</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>705 65</main-classification></classification-national>
</citation>
<citation>
<patcit num="00027">
<document-id>
<country>US</country>
<doc-number>5949044</doc-number>
<kind>A</kind>
<name>Walker et al.</name>
<date>19990900</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00028">
<document-id>
<country>US</country>
<doc-number>5955970</doc-number>
<kind>A</kind>
<name>Ando et al.</name>
<date>19990900</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>340928</main-classification></classification-national>
</citation>
<citation>
<patcit num="00029">
<document-id>
<country>US</country>
<doc-number>5962833</doc-number>
<kind>A</kind>
<name>Hayashi</name>
<date>19991000</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>235384</main-classification></classification-national>
</citation>
<citation>
<patcit num="00030">
<document-id>
<country>US</country>
<doc-number>5974397</doc-number>
<kind>A</kind>
<name>Olsson et al.</name>
<date>19991000</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>705 13</main-classification></classification-national>
</citation>
<citation>
<patcit num="00031">
<document-id>
<country>US</country>
<doc-number>5991749</doc-number>
<kind>A</kind>
<name>Morrill, Jr.</name>
<date>19991100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>705 44</main-classification></classification-national>
</citation>
<citation>
<patcit num="00032">
<document-id>
<country>US</country>
<doc-number>5995018</doc-number>
<kind>A</kind>
<name>Hane et al.</name>
<date>19991100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>340 1034</main-classification></classification-national>
</citation>
<citation>
<patcit num="00033">
<document-id>
<country>US</country>
<doc-number>5999625</doc-number>
<kind>A</kind>
<name>Bellare et al.</name>
<date>19991200</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00034">
<document-id>
<country>US</country>
<doc-number>6019285</doc-number>
<kind>A</kind>
<name>Isobe et al.</name>
<date>20000200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>235384</main-classification></classification-national>
</citation>
<citation>
<patcit num="00035">
<document-id>
<country>US</country>
<doc-number>6088680</doc-number>
<kind>A</kind>
<name>Hoshino et al.</name>
<date>20000700</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>705 13</main-classification></classification-national>
</citation>
<citation>
<patcit num="00036">
<document-id>
<country>US</country>
<doc-number>6127938</doc-number>
<kind>A</kind>
<name>Friedman</name>
<date>20001000</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>3406936</main-classification></classification-national>
</citation>
<citation>
<patcit num="00037">
<document-id>
<country>US</country>
<doc-number>6157824</doc-number>
<kind>A</kind>
<name>Bailey</name>
<date>20001200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>455409</main-classification></classification-national>
</citation>
<citation>
<patcit num="00038">
<document-id>
<country>US</country>
<doc-number>6172673</doc-number>
<kind>B1</kind>
<name>Lehtinen et al.</name>
<date>20010100</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00039">
<document-id>
<country>US</country>
<doc-number>6390365</doc-number>
<kind>B1</kind>
<name>Karasawa</name>
<date>20020500</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>235384</main-classification></classification-national>
</citation>
<citation>
<patcit num="00040">
<document-id>
<country>US</country>
<doc-number>6396418</doc-number>
<kind>B2</kind>
<name>Naito</name>
<date>20020500</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>340928</main-classification></classification-national>
</citation>
<citation>
<patcit num="00041">
<document-id>
<country>US</country>
<doc-number>6488203</doc-number>
<kind>B1</kind>
<name>Stoutenburg et al.</name>
<date>20021200</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00042">
<document-id>
<country>US</country>
<doc-number>6653946</doc-number>
<kind>B1</kind>
<name>Hassett</name>
<date>20031100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>340928</main-classification></classification-national>
</citation>
<citation>
<patcit num="00043">
<document-id>
<country>US</country>
<doc-number>6654883</doc-number>
<kind>B1</kind>
<name>Tatebayashi</name>
<date>20031100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>713168</main-classification></classification-national>
</citation>
<citation>
<patcit num="00044">
<document-id>
<country>US</country>
<doc-number>6658392</doc-number>
<kind>B2</kind>
<name>Yoshida</name>
<date>20031200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>705 13</main-classification></classification-national>
</citation>
<citation>
<patcit num="00045">
<document-id>
<country>US</country>
<doc-number>6661352</doc-number>
<kind>B2</kind>
<name>Tiernay et al.</name>
<date>20031200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>340928</main-classification></classification-national>
</citation>
<citation>
<patcit num="00046">
<document-id>
<country>US</country>
<doc-number>6690293</doc-number>
<kind>B2</kind>
<name>Amita</name>
<date>20040200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>340928</main-classification></classification-national>
</citation>
<citation>
<patcit num="00047">
<document-id>
<country>US</country>
<doc-number>6796491</doc-number>
<kind>B2</kind>
<name>Nakajima</name>
<date>20040900</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>235379</main-classification></classification-national>
</citation>
<citation>
<patcit num="00048">
<document-id>
<country>US</country>
<doc-number>6796499</doc-number>
<kind>B1</kind>
<name>Wang</name>
<date>20040900</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>235384</main-classification></classification-national>
</citation>
<citation>
<patcit num="00049">
<document-id>
<country>US</country>
<doc-number>6816707</doc-number>
<kind>B1</kind>
<name>Barker et al.</name>
<date>20041100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>455 412</main-classification></classification-national>
</citation>
<citation>
<patcit num="00050">
<document-id>
<country>US</country>
<doc-number>6834267</doc-number>
<kind>B1</kind>
<name>Fuyama</name>
<date>20041200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>705 13</main-classification></classification-national>
</citation>
<citation>
<patcit num="00051">
<document-id>
<country>US</country>
<doc-number>7012547</doc-number>
<kind>B2</kind>
<name>Hassett</name>
<date>20060300</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>340928</main-classification></classification-national>
</citation>
<citation>
<patcit num="00052">
<document-id>
<country>US</country>
<doc-number>7014106</doc-number>
<kind>B2</kind>
<name>Nakajima</name>
<date>20060300</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>235379</main-classification></classification-national>
</citation>
<citation>
<patcit num="00053">
<document-id>
<country>US</country>
<doc-number>7024385</doc-number>
<kind>B1</kind>
<name>Adcock et al.</name>
<date>20060400</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>705 37</main-classification></classification-national>
</citation>
<citation>
<patcit num="00054">
<document-id>
<country>US</country>
<doc-number>7053793</doc-number>
<kind>B2</kind>
<name>Tajima et al.</name>
<date>20060500</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>340928</main-classification></classification-national>
</citation>
<citation>
<patcit num="00055">
<document-id>
<country>US</country>
<doc-number>7114651</doc-number>
<kind>B2</kind>
<name>Hjelmvik</name>
<date>20061000</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>235384</main-classification></classification-national>
</citation>
<citation>
<patcit num="00056">
<document-id>
<country>US</country>
<doc-number>7127413</doc-number>
<kind>B1</kind>
<name>Yanagisawa et al.</name>
<date>20061000</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>705 13</main-classification></classification-national>
</citation>
<citation>
<patcit num="00057">
<document-id>
<country>US</country>
<doc-number>7212989</doc-number>
<kind>B1</kind>
<name>Taniguchi et al.</name>
<date>20070500</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>705 13</main-classification></classification-national>
</citation>
<citation>
<patcit num="00058">
<document-id>
<country>US</country>
<doc-number>2001/0040504</doc-number>
<kind>A1</kind>
<name>Gehlot</name>
<date>20011100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>340426</main-classification></classification-national>
</citation>
<citation>
<patcit num="00059">
<document-id>
<country>US</country>
<doc-number>2002/0049630</doc-number>
<kind>A1</kind>
<name>Furuta et al.</name>
<date>20020400</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>705 13</main-classification></classification-national>
</citation>
<citation>
<patcit num="00060">
<document-id>
<country>US</country>
<doc-number>2002/0130175</doc-number>
<kind>A1</kind>
<name>Nakajima</name>
<date>20020900</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>235379</main-classification></classification-national>
</citation>
<citation>
<patcit num="00061">
<document-id>
<country>US</country>
<doc-number>2003/0067396</doc-number>
<kind>A1</kind>
<name>Hassett</name>
<date>20030400</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>34082549</main-classification></classification-national>
</citation>
<citation>
<patcit num="00062">
<document-id>
<country>US</country>
<doc-number>2004/0174272</doc-number>
<kind>A1</kind>
<name>Lin</name>
<date>20040900</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>340928</main-classification></classification-national>
</citation>
<citation>
<patcit num="00063">
<document-id>
<country>US</country>
<doc-number>2004/0199474</doc-number>
<kind>A1</kind>
<name>Ritter</name>
<date>20041000</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00064">
<document-id>
<country>US</country>
<doc-number>2005/0006457</doc-number>
<kind>A1</kind>
<name>Nakajima</name>
<date>20050100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>235379</main-classification></classification-national>
</citation>
<citation>
<patcit num="00065">
<document-id>
<country>US</country>
<doc-number>2005/0086100</doc-number>
<kind>A1</kind>
<name>Yanagisawa et al.</name>
<date>20050400</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>705 13</main-classification></classification-national>
</citation>
<citation>
<patcit num="00066">
<document-id>
<country>US</country>
<doc-number>2006/0000890</doc-number>
<kind>A1</kind>
<name>Nakajima</name>
<date>20060100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>235379</main-classification></classification-national>
</citation>
<citation>
<patcit num="00067">
<document-id>
<country>US</country>
<doc-number>2006/0145893</doc-number>
<kind>A1</kind>
<name>Hassett</name>
<date>20060700</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>340928</main-classification></classification-national>
</citation>
<citation>
<patcit num="00068">
<document-id>
<country>US</country>
<doc-number>2006/0176153</doc-number>
<kind>A1</kind>
<name>Tang</name>
<date>20060800</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>340 104</main-classification></classification-national>
</citation>
<citation>
<patcit num="00069">
<document-id>
<country>JP</country>
<doc-number>62-67673</doc-number>
<kind>A</kind>
<date>19870300</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00070">
<document-id>
<country>JP</country>
<doc-number>9-116960</doc-number>
<date>19970500</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00071">
<document-id>
<country>JP</country>
<doc-number>10-98706</doc-number>
<date>19980400</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00072">
<document-id>
<country>JP</country>
<doc-number>10-508710</doc-number>
<kind>T</kind>
<date>19980800</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00073">
<document-id>
<country>JP</country>
<doc-number>10-240848</doc-number>
<kind>A</kind>
<date>19980900</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00074">
<document-id>
<country>JP</country>
<doc-number>11-501424</doc-number>
<kind>T</kind>
<date>19990200</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00075">
<document-id>
<country>WO</country>
<doc-number>96/9592</doc-number>
<kind>A1</kind>
<date>19960300</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00076">
<document-id>
<country>WO</country>
<doc-number>96/25828</doc-number>
<kind>A1</kind>
<date>19960800</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00077">
<document-id>
<country>WO</country>
<doc-number>98/37524</doc-number>
<kind>A1</kind>
<date>19980800</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00078">
<document-id>
<country>WO</country>
<doc-number>01/09806</doc-number>
<kind>A</kind>
<date>20010200</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<nplcit num="00079">
<othercit>Department of Justice Canada, Solicitor General Canada, “Electronic Money Laundering: An Environmental Scan,” pp. 1-3 and 19-20, (Oct. 1998).</othercit>
</nplcit>
<category>cited by other</category>
</citation>
<citation>
<nplcit num="00080">
<othercit>U.S. Appl. No. 09/630,563, filed Aug. 2, 2000, Nakajima.</othercit>
</nplcit>
<category>cited by other</category>
</citation>
<citation>
<nplcit num="00081">
<othercit>U.S. Appl. No. 09/630,557, filed Aug. 2, 2000, Nakajima.</othercit>
</nplcit>
<category>cited by other</category>
</citation>
<citation>
<nplcit num="00082">
<othercit>U.S. Appl. No. 09/786,208, filed May 8, 2001, Nakajima.</othercit>
</nplcit>
<category>cited by other</category>
</citation>
<citation>
<nplcit num="00083">
<othercit>U.S. Appl. No. 11/043,050, filed Jan. 27, 2005, Nakajima.</othercit>
</nplcit>
<category>cited by other</category>
</citation>
<citation>
<nplcit num="00084">
<othercit>U.S. Appl. No. 11/344,131, filed Feb. 1, 2006, Nakajima.</othercit>
</nplcit>
<category>cited by other</category>
</citation>
<citation>
<nplcit num="00085">
<othercit>Terauchi, et al. “Implementation and Evaluation of Electronic Payment System”, IPSJ Technical Reports, 96-DPS-76, pp. 97-102 (May 17, 1996) (w/ English translation).</othercit>
</nplcit>
<category>cited by other</category>
</citation>
<citation>
<nplcit num="00086">
<othercit>Office Action from Japanese patent appln. No. 2001-525632 (Jul. 10, 2007) (w/ English translation).</othercit>
</nplcit>
<category>cited by other</category>
</citation>
</references-cited>
<number-of-claims>14</number-of-claims>
<us-exemplary-claim>1</us-exemplary-claim>
<us-field-of-classification-search>
<classification-national>
<country>US</country>
<main-classification>235379</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>235380</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>235384</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>235492</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>705 13</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>705 39</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>705  6</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>340928</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>340931</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>34046216</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>3405391</main-classification>
</classification-national>
</us-field-of-classification-search>
<figures>
<number-of-drawing-sheets>30</number-of-drawing-sheets>
<number-of-figures>36</number-of-figures>
</figures>
<us-related-documents>
<division>
<relation>
<parent-doc>
<document-id>
<country>US</country>
<doc-number>10803056</doc-number>
<kind>00</kind>
<date>20040318</date>
</document-id>
<parent-grant-document>
<document-id>
<country>US</country>
<doc-number>7014106</doc-number>
<kind>A </kind>
</document-id>
</parent-grant-document>
</parent-doc>
<child-doc>
<document-id>
<country>US</country>
<doc-number>11220580</doc-number>
</document-id>
</child-doc>
</relation>
</division>
<division>
<relation>
<parent-doc>
<document-id>
<country>US</country>
<doc-number>10063102</doc-number>
<kind>00</kind>
<date>20020320</date>
</document-id>
<parent-grant-document>
<document-id>
<country>US</country>
<doc-number>6796491</doc-number>
<kind>A </kind>
</document-id>
</parent-grant-document>
</parent-doc>
<child-doc>
<document-id>
<country>US</country>
<doc-number>10803056</doc-number>
</document-id>
</child-doc>
</relation>
</division>
<continuation>
<relation>
<parent-doc>
<document-id>
<country>US</country>
<doc-number>PCT/JP99/05219</doc-number>
<kind>00</kind>
<date>19990922</date>
</document-id>
<parent-status>ABANDONED</parent-status>
</parent-doc>
<child-doc>
<document-id>
<country>US</country>
<doc-number>10063102</doc-number>
</document-id>
</child-doc>
</relation>
</continuation>
<related-publication>
<document-id>
<country>US</country>
<doc-number>20060000890</doc-number>
<kind>A1</kind>
<date>20060105</date>
</document-id>
</related-publication>
</us-related-documents>
<parties>
<applicants>
<applicant sequence="001" app-type="applicant-inventor" designation="us-only">
<addressbook>
<last-name>Nakajima</last-name>
<first-name>Keiichi</first-name>
<address>
<city>Tokyo</city>
<country>JP</country>
</address>
</addressbook>
<nationality>
<country>JP</country>
</nationality>
<residence>
<country>JP</country>
</residence>
</applicant>
</applicants>
<agents>
<agent sequence="01" rep-type="attorney">
<addressbook>
<orgname>Stroock &amp; Stroock &amp; Lavan LLP</orgname>
<address>
<country>unknown</country>
</address>
</addressbook>
</agent>
</agents>
</parties>
<assignees>
<assignee>
<addressbook>
<orgname>SOFTBANKBB Corporation</orgname>
<role>03</role>
<address>
<city>Tokyo</city>
<country>JP</country>
</address>
</addressbook>
</assignee>
</assignees>
<examiners>
<primary-examiner>
<last-name>Walsh</last-name>
<first-name>Daniel</first-name>
<department>2876</department>
</primary-examiner>
</examiners>
</us-bibliographic-data-grant>
<abstract id="abstract">
<p id="p-0001" num="0000">An electronic payment system for making electronic money payments for transactions. A payment terminal stores a balance of electronic money for payment on a dealing by electronic money. A demanding terminal communicates with the payment terminal to demand the payment and a payment apparatus communicates with the demanding terminal and stores a balance of electronic money to correspond to an identification number of the payment terminal for allowing settlement on the dealing. The demanding terminal receives from the payment terminal the balance stored in the payment terminal and transmits the balance to the payment apparatus. The payment apparatus detects an improper use by checking the balance stored in the payment terminal, which was received from the demanding terminal, with the balance stored in the payment apparatus. The system of the present invention provides secure and convenient electronic money payment for a user's transaction.</p>
</abstract>
<drawings id="DRAWINGS">
<figure id="Fig-EMI-D00000" num="00000">
<img id="EMI-D00000" he="116.84mm" wi="142.92mm" file="US07296755-20071120-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00001" num="00001">
<img id="EMI-D00001" he="139.11mm" wi="145.29mm" file="US07296755-20071120-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00002" num="00002">
<img id="EMI-D00002" he="223.69mm" wi="136.06mm" file="US07296755-20071120-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00003" num="00003">
<img id="EMI-D00003" he="105.92mm" wi="144.36mm" file="US07296755-20071120-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00004" num="00004">
<img id="EMI-D00004" he="209.63mm" wi="132.00mm" file="US07296755-20071120-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00005" num="00005">
<img id="EMI-D00005" he="215.14mm" wi="80.26mm" file="US07296755-20071120-D00005.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00006" num="00006">
<img id="EMI-D00006" he="218.86mm" wi="148.08mm" file="US07296755-20071120-D00006.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00007" num="00007">
<img id="EMI-D00007" he="177.55mm" wi="132.93mm" file="US07296755-20071120-D00007.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00008" num="00008">
<img id="EMI-D00008" he="189.40mm" wi="147.74mm" file="US07296755-20071120-D00008.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00009" num="00009">
<img id="EMI-D00009" he="168.74mm" wi="152.32mm" file="US07296755-20071120-D00009.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00010" num="00010">
<img id="EMI-D00010" he="102.62mm" wi="144.19mm" file="US07296755-20071120-D00010.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00011" num="00011">
<img id="EMI-D00011" he="163.32mm" wi="138.01mm" file="US07296755-20071120-D00011.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00012" num="00012">
<img id="EMI-D00012" he="219.20mm" wi="129.20mm" file="US07296755-20071120-D00012.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00013" num="00013">
<img id="EMI-D00013" he="152.99mm" wi="142.58mm" file="US07296755-20071120-D00013.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00014" num="00014">
<img id="EMI-D00014" he="149.10mm" wi="139.45mm" file="US07296755-20071120-D00014.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00015" num="00015">
<img id="EMI-D00015" he="221.23mm" wi="134.79mm" file="US07296755-20071120-D00015.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00016" num="00016">
<img id="EMI-D00016" he="201.68mm" wi="150.54mm" file="US07296755-20071120-D00016.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00017" num="00017">
<img id="EMI-D00017" he="174.50mm" wi="137.92mm" file="US07296755-20071120-D00017.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00018" num="00018">
<img id="EMI-D00018" he="113.03mm" wi="145.20mm" file="US07296755-20071120-D00018.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00019" num="00019">
<img id="EMI-D00019" he="165.10mm" wi="144.78mm" orientation="landscape" file="US07296755-20071120-D00019.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00020" num="00020">
<img id="EMI-D00020" he="171.62mm" wi="152.23mm" file="US07296755-20071120-D00020.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00021" num="00021">
<img id="EMI-D00021" he="185.42mm" wi="150.28mm" file="US07296755-20071120-D00021.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00022" num="00022">
<img id="EMI-D00022" he="190.67mm" wi="144.19mm" file="US07296755-20071120-D00022.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00023" num="00023">
<img id="EMI-D00023" he="180.59mm" wi="132.93mm" file="US07296755-20071120-D00023.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00024" num="00024">
<img id="EMI-D00024" he="126.24mm" wi="139.45mm" file="US07296755-20071120-D00024.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00025" num="00025">
<img id="EMI-D00025" he="191.43mm" wi="151.55mm" file="US07296755-20071120-D00025.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00026" num="00026">
<img id="EMI-D00026" he="210.14mm" wi="156.21mm" file="US07296755-20071120-D00026.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00027" num="00027">
<img id="EMI-D00027" he="202.27mm" wi="154.60mm" file="US07296755-20071120-D00027.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00028" num="00028">
<img id="EMI-D00028" he="193.89mm" wi="143.59mm" file="US07296755-20071120-D00028.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00029" num="00029">
<img id="EMI-D00029" he="182.12mm" wi="144.02mm" file="US07296755-20071120-D00029.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00030" num="00030">
<img id="EMI-D00030" he="218.02mm" wi="145.12mm" orientation="landscape" file="US07296755-20071120-D00030.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
</drawings>
<description id="description">
<?RELAPP description="Other Patent Relations" end="lead"?>
<heading id="h-0001" level="1">CROSS REFERENCE TO RELATED APPLICATIONS</heading>
<p id="p-0002" num="0001">This is a divisional application of U.S. patent application Ser. No. 10/803,056 filed Mar. 18, 2004 now U.S. Pat. No. 7,014,106 which is a divisional of U.S. patent application Ser. No. 10/063,102, filed Mar. 20, 2002, now U.S. Pat. No. 6,796,491 which is a continuation of PCT/JP99/05219 filed Sep. 22, 1999 now abandoned, the contents of which are incorporated herein by reference.</p>
<?RELAPP description="Other Patent Relations" end="tail"?>
<?BRFSUM description="Brief Summary" end="lead"?>
<heading id="h-0002" level="1">BACKGROUND OF THE INVENTION</heading>
<p id="p-0003" num="0002">1. Field of the Invention</p>
<p id="p-0004" num="0003">The present invention relates to an electronic payment system, a payment apparatus and terminals thereof for electronic money transactions or financial dealings. More particularly, the present invention relates to processing payments by electronic money by validating the payments to prevent improper and fraudulent use.</p>
<p id="p-0005" num="0004">2. Description of Related Art</p>
<p id="p-0006" num="0005">In a conventional electronic payment system in which the payments on dealings are made by electronic money, there are possibilities of falsification and unfair use of the electronic money. Thus, the system was configured to use an improved encryption technique in order to prevent the disclosure of information regarding the electronic money, or to record the information regarding the electronic money on an IC (integrated circuit) card so as to allow the use and deposit of the electronic money only via an exclusive IC card reader.</p>
<p id="p-0007" num="0006">The conventional electronic payment system using electronic money, described above, has a problem in that the exclusive IC card reader or a complicated authentication and encryption procedure is required so as to enhance security in order to prevent the falsification and unfair use of the electronic money, thus giving up the convenience of electronic money.</p>
<heading id="h-0003" level="1">SUMMARY OF THE INVENTION</heading>
<p id="p-0008" num="0007">Therefore, it is an object of the present invention to provide a safe and convenient electronic payment system using electronic money, which is capable of overcoming the above drawbacks accompanying the conventional art. The above and other objects can be achieved by combinations described in the independent claims. The dependent claims define further advantageous and exemplary combinations of the present invention.</p>
<p id="p-0009" num="0008">According to a first aspect of the present invention, an electronic payment system that makes electronic money payment relating to a dealing, comprises: a payment terminal operable to store a first balance of electronic money for the electronic money payment relating to the dealing; a demanding terminal operable to communicate with the payment terminal to demand the payment; and a payment apparatus operable to communicate with the demanding terminal and to store a second balance of electronic money to correspond to an identification number of the payment terminal for validating the payment, wherein the demanding terminal receives from the payment terminal the first balance stored in the payment terminal and transmits the first balance to the payment apparatus, and the payment apparatus detects unfair use of the electronic money by checking the first balance stored in the payment terminal, which was received from the demanding terminal, with the second balance stored in the payment apparatus.</p>
<p id="p-0010" num="0009">According to a second aspect of the present invention, an electronic payment system for making payment on a dealing by electronic money, comprises: a payment terminal operable to store a first reference number for electronic money for making payment on the dealing by the electronic money; a demanding terminal operable to communicate with the payment terminal to demand the payment; and a payment apparatus operable to communicate with the demanding terminal and to store a second reference number to correspond to an identification number of the payment terminal for allowing settlement of the payment on the dealing, wherein the payment apparatus updates the second reference number in accordance with a predetermined update rule, the payment terminal receives the update rule of the second reference number from the payment apparatus and updates the first reference number in accordance with the update rule, and in a case where the demanding terminal received from the payment terminal the first reference number stored in the payment terminal and then transmitted the first reference number to the payment apparatus, the payment apparatus checks the first reference number, received from the demanding terminal, with the second reference number stored in the payment apparatus to detect unfair use of the electronic money.</p>
<p id="p-0011" num="0010">According to a third aspect of the present invention, a payment apparatus that communicates with a payment terminal and a demanding terminal to make settlement on an electronic money payment for a dealing, the payment terminal being operable to store an electronic money balance for making payment on the dealing by the electronic money, the demanding terminal being operable to demand the payment on the dealing, the payment apparatus comprises: a memory unit operable to store a check balance of the electronic money to correspond to an identification number of the payment terminal; a communication unit operable to receive, from the demanding terminal, a payment amount of the electronic money to be paid by the payment terminal; and a processor operable to update the check balance of the electronic money stored in the memory unit based on the payment amount received from the demanding terminal.</p>
<p id="p-0012" num="0011">In a case where the communication unit received from the payment terminal a deposit-requested amount of the electronic money, the processor may update the check balance stored in the memory unit based on the deposit-requested amount, and the communication unit may transmit a new balance, obtained by the update, to the payment terminal.</p>
<p id="p-0013" num="0012">The communication unit may receive the electronic money balance for making payment on the dealing, when the deposit-requested amount of the electronic money is received from the payment terminal, and the processor may compare the electronic money balance the communication unit received from the payment terminal with the check balance stored in the memory unit, may transmit the new balance to the communication unit when the compared balances coincide, and may notify a manager of the payment apparatus of a warning indicating a possibility of unfair use when the compared balances do not coincide.</p>
<p id="p-0014" num="0013">The communication unit may receive from the demanding terminal the electronic money balance for making payment on the dealing, which is notified from the payment terminal, when the communication unit receives, from the demanding terminal, the payment amount to be paid by the payment terminal, and the processor may compare the electronic money balance the communication unit received from the demanding terminal with the check balance stored in the memory unit, may update the check balance stored in the memory unit when the compared balances coincide, and may notify a manager of the payment apparatus of a warning indicating a possibility of unfair use when the compared balances do not coincide.</p>
<p id="p-0015" num="0014">In a case where the communication unit received a balance inquiry request from the payment terminal together with the electronic money balance for making payment on the dealing, the processor may compare the electronic money balance the communication unit received from the payment terminal with the check balance stored in the memory unit, and may transmit a warning indicating a possibility of unfair use when the compared balances do not coincide.</p>
<p id="p-0016" num="0015">The communication unit may transmit a balance inquiry request to the payment terminal and may receive the electronic money balance for making payment on the dealing from the payment terminal, and the processor may compare the electronic money balance the communication unit received from the payment terminal with the check balance stored in the memory unit, and may notify a manager of the payment apparatus of a warning indicating a possibility of unfair use when the compared balances do not coincide.</p>
<p id="p-0017" num="0016">The memory unit may store a term of validity in relation to the electronic money, and in a case where the communication unit received the payment amount of the electronic money from the demanding terminal, the processor may not update the check balance of the electronic money stored in the memory unit based on the payment amount, and may notify a manager of the payment apparatus of a warning indicating a possibility of unfair use, when a time that has passed after a start time, at which the communication unit transmitted, to the payment terminal, the new balance of the electronic money based on the deposit-requested amount, has gone beyond the term of validity.</p>
<p id="p-0018" num="0017">The memory unit may store an update time in relation to the electronic money at which the check balance of the electronic money was last updated based on a previous payment amount, and in a case where the communication unit received the payment amount from the demanding terminal, the processor may not update the check balance of the electronic money when a predetermined time has not passed after the update time based on the previous payment amount.</p>
<p id="p-0019" num="0018">According to a fourth aspect of the present invention, a payment apparatus that communicates with a payment terminal and a demanding terminal to make settlement on an electronic money payment for a dealing, the payment terminal being operable to store a check reference number for the electronic money for making payment on the dealing, the demanding terminal being operable to demand the payment on the dealing, the payment apparatus comprises: a memory unit operable to store a reference number of the electronic money to correspond to an identification number of the payment terminal; an operation unit operable to update the reference number in accordance with a predetermined update rule; a communication unit operable to receive, from the demanding terminal, the check reference number of the electronic money, which the demanding terminal was notified from the payment terminal; and a processor operable to compare the reference number stored in the memory unit with the check reference number received from the demanding terminal to validate the electronic money.</p>
<p id="p-0020" num="0019">In a case where the communication unit received a deposit request for the electronic money from the payment terminal, the communication unit transmits the update rule for updating the reference number to the payment terminal. The update rule may uniquely determine the reference number based on an initial value and time information to provide different reference numbers for different initial values or different time information. The time information may be a time that has passed after a start time at which the communication unit transmitted the update rule to the payment terminal. The initial value may be an irrational number, and the update rule may select a number at a decimal place of the irrational number as the reference number, the decimal place being determined based on the time information.</p>
<p id="p-0021" num="0020">The memory unit may store a number corresponding to the number of times the payment terminal performed dealings using the electronic money, the number being stored to correspond to the identification number of the payment terminal, and the update rule may uniquely determine the reference number based on an initial number and the number of times the payment terminal performed dealings in such a manner that the reference number is different when the initial value or the number of times is changed.</p>
<p id="p-0022" num="0021">The memory unit may store a term of validity of the electronic money, and in a case where the term of validity has expired, the operation unit may change the update rule, the communication unit may transmit the changed update rule to the payment terminal, and the processor may update the term of validity stored in the memory unit.</p>
<p id="p-0023" num="0022">According to a fifth aspect of the present invention, a recording medium storing a computer program that enables communication with a payment terminal and a demanding terminal for making settlement on an electronic money payment for a dealing, the payment terminal being operable to store an electronic money balance for making payment on the dealing, the demanding terminal being operable to demand the payment on the dealing, the program comprises: a storing module that enables a computer to store a check balance of the electronic money to correspond to an identification number of the payment terminal; a communication module that enables the computer to receive, from the demanding terminal, a payment amount of the electronic money to be paid by the payment terminal; and a processing module that enables the computer to update the check balance of the electronic money based on the payment amount received from the demanding terminal, wherein the communication module enables the computer to receive the electronic money balance from the payment terminal when receiving a deposit-requested amount of the electronic money from the payment terminal, and the processing module enables the computer to compare the electronic money balance received from the payment terminal with the check balance, transmit a new balance obtained by the update when the compared balances coincide, and notify a manager of the computer of a warning indicating a possibility of unfair use of the electronic money.</p>
<p id="p-0024" num="0023">According to a sixth aspect of the present invention, a recording medium storing a computer program for enabling communication with a payment terminal and a demanding terminal to make settlement on an electronic money dealing, the payment terminal being operable to store a check reference number of electronic money for making payment on the dealing by the electronic money, the demanding terminal being operable to demand the payment on the dealing, the program comprises: a storing module that instructs a computer to store a reference number of the electronic money to correspond to an identification number of the payment terminal; an operation module that instructs the computer to update the stored reference number in accordance with a predetermined update rule; a communication module that instructs the computer to receive from the demanding terminal the check reference number of the electronic money, which the demanding terminal was notified from the payment terminal; and a processing module that instructs the computer to compare the stored reference number with the check reference number received from the demanding terminal to validate the electronic money, wherein the update rule uniquely determines the stored reference number based on an initial value and time information in such a manner that the stored reference number is changed when the initial value or the time information is changed.</p>
<p id="p-0025" num="0024">According to a seventh aspect of the present invention, a demanding terminal that communicates with a payment apparatus, which settles electronic money payment on a dealing, and a payment terminal, which makes electronic money payment on the dealing, the demanding terminal, which demands the payment on the dealing, comprises: a first communication unit operable to communicate with the payment terminal and to receive a check reference number of the electronic money from the payment terminal; a second communication unit operable to communicate with the payment apparatus, to transmit the check reference number of the electronic money to the payment apparatus, and to receive a result of a validation of the electronic money; and a processor operable to calculate a payment amount of the electronic money to be paid by the payment terminal and to make the second communication unit send the payment amount to the payment apparatus, in a case where the second communication unit received a signal indicating that the validation of the electronic money was successful.</p>
<p id="p-0026" num="0025">The processor may make the first communication unit send the payment amount to the payment terminal in a case where the second communication unit received the signal indicating that the validation of the electronic money was successful, and the processor may make the second communication unit send the payment amount to the payment apparatus in a case where the first communication unit received a confirmation signal for the payment amount from the payment terminal.</p>
<p id="p-0027" num="0026">The first communication unit may receive, from the payment terminal, an electronic money balance, for making electronic money payment on the dealing, stored in the payment terminal, and the second communication unit may send the electronic money balance stored in the payment terminal to the payment apparatus for validating the electronic money balance stored in the payment terminal with a check balance for the electronic money, stored in the payment apparatus.</p>
<p id="p-0028" num="0027">The first communication unit may communicate with the payment terminal by optical communication or short-distance communication to receive from the payment terminal an identification number for identifying the payment on the dealing, and the second communication unit may communicate with the payment apparatus via a telephone line or a private communication line to send the identification number to the payment apparatus.</p>
<p id="p-0029" num="0028">In a case where the first communication unit received from the payment terminal information regarding a start point, at which a user of the payment terminal started to use the electronic money, the processor may calculate the payment amount based on a distance moved by the user from the start point.</p>
<p id="p-0030" num="0029">According to an eighth aspect of the present invention, a payment terminal for communicating with a payment apparatus, which is operable to store a balance of electronic money for making settlement on a dealing by the electronic money, and a demanding terminal, which is operable to demand the payment on the dealing, the payment terminal, which makes the electronic money payment on the dealing, comprises: a first communication unit operable to communicate with the payment apparatus and to receive, from the payment apparatus, the balance of the electronic money stored in the payment apparatus; a memory unit operable to store the balance of the electronic money received by the first communication unit; a second communication unit operable to communicate with the demanding terminal and to receive a payment amount of the electronic money from the demanding terminal; and a processor operable to update the balance of the electronic money stored in the memory unit based on the payment amount.</p>
<p id="p-0031" num="0030">The first communication unit may receive the balance of the electronic money from the payment apparatus in a case where a deposit-requested amount of the electronic money was sent to the payment apparatus.</p>
<p id="p-0032" num="0031">The second communication unit may send the balance stored in the memory unit to the payment apparatus for validating the balance, when sending the deposit-requested amount of the electronic money to the payment apparatus, and may receive a new balance from the payment apparatus in a case where the validation of the balance was successful.</p>
<p id="p-0033" num="0032">The second communication unit may send the balance stored in the memory unit to the payment apparatus when a predetermined time has passed after a time at which the new balance was received from the payment apparatus, and may receive a result of the validation of the balance.</p>
<p id="p-0034" num="0033">The memory unit may store a term of validity of the electronic money, and the processor may notify a user of the payment terminal that the electronic money is unavailable in a case where a time that has passed after a start time, at which the second communication unit received the new balance from the payment apparatus, has gone beyond the term of validity.</p>
<p id="p-0035" num="0034">According to a ninth aspect of the present invention, a payment terminal that communicates with a payment apparatus and a demanding terminal to make payment on a dealing using electronic money, the payment apparatus stores a reference number of the electronic money for making settlement on the dealing by electronic money, the demanding terminal demands the payment on the dealing, the payment terminal comprises: a memory unit operable to store a check reference number of the electronic money; a first communication unit operable to communicate with the payment apparatus and to receive from the payment apparatus an update rule for updating the check reference number stored in the memory unit; an operation unit operable to update said check reference number stored in said memory unit in accordance with said update rule; and a second communication unit operable to communicate with the demanding terminal and to send the check reference number, after being updated by the operation unit, to the demanding terminal.</p>
<p id="p-0036" num="0035">The first communication unit may receive from the payment apparatus the update rule for updating the check reference number in a case where a deposit-requested amount of the electronic money is sent to the payment apparatus. The update rule may uniquely determine the check reference number based on an initial value and time information in such a manner that the check reference number is changed when the initial value or time information is changed. The time information may be a time period that has passed after a time at which the update rule was received by the first communication unit. The initial value may be an irrational number, and the update rule may select a number at a decimal place of the irrational number as the check reference number, the decimal place being determined based on the time information.</p>
<p id="p-0037" num="0036">The memory unit may store a number of times that dealings using the electronic money were performed, and the update rule may uniquely determine the check reference number based on an initial value and the number of times that dealings were performed in such a manner that the check reference number is changed when the initial value or the number of times is changed.</p>
<p id="p-0038" num="0037">The memory unit may store a term of validity of the electronic money, and in a case where the term of validity has expired, the first communication unit may send a change request for the update rule to the payment apparatus and may receive a changed update rule from the payment apparatus, while the operation unit updates the term of validity stored in the memory unit.</p>
<p id="p-0039" num="0038">The first communication unit may communicate with the payment apparatus by wireless telecommunication, and the second communication unit may communicate with the demanding terminal by optical communication or short-distance wireless communication to send an identification number for identifying the payment terminal to the demanding terminal.</p>
<p id="p-0040" num="0039">The second communication unit may receive from the demanding terminal start point information regarding a start point at which a user of the payment terminal starts to use the electronic money, the memory unit may store the start point information, and the second communication unit may send the start point information to the demanding terminal so that the payment amount is calculated based on a distance moved by the user from the start point, in a case where the user finishes using the electronic money.</p>
<p id="p-0041" num="0040">According to a tenth aspect of the present invention, a communication adapter, to which a payment terminal for making electronic money payment on a dealing is attached, whereby the payment terminal communicates with a charging system for a toll road, the communication adapter comprises: a detection unit operable to detect an electric wave signal transmitted from the charging system; and a control unit operable to make the payment terminal, attached to the communication adapter, communicate with the charging system by wireless communication to send the charging system a check reference number of electronic money stored in the payment terminal for validation of the electronic money, in a case where the electric signal from the charging system was detected.</p>
<p id="p-0042" num="0041">The communication adapter may further comprise a sound notification unit operable to generate a first sound for notifying a result of the validation of the electronic money, in a case where the result of the validation of the electronic money was received from the charging system.</p>
<p id="p-0043" num="0042">The payment terminal may send a balance of the electronic money to the charging system, and the sound notification unit may generate a second sound for notifying a shortage of the balance of the electronic money, in a case where the shortage of the balance was notified from the charging system.</p>
<p id="p-0044" num="0043">According to an eleventh aspect of the present invention, a payment terminal for communicating with a charging system of a toll road to pay toll by electronic money, comprises: a memory unit operable to store a check reference number of the electronic money; a detection unit operable to detect an electric wave signal transmitted from the charging system; and a communication unit operable to communicate with the charging system to send the check reference number, stored in the memory unit, to the charging system, in a case where the detection unit detected the electric wave signal.</p>
<p id="p-0045" num="0044">The summary of the invention does not necessarily describe all necessary features of the present invention. The present invention may also be a sub-combination of the features described above. The above and other features and advantages of the present invention will become more apparent from the following description of the embodiments taken in conjunction with the accompanying drawings.</p>
<?BRFSUM description="Brief Summary" end="tail"?>
<?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?>
<description-of-drawings>
<heading id="h-0004" level="1">BRIEF DESCRIPTION OF THE DRAWINGS</heading>
<p id="p-0046" num="0045">Referring now to the drawings which from a part of this original disclosure:</p>
<p id="p-0047" num="0046"><figref idref="DRAWINGS">FIG. 1</figref> is a block diagram of an electronic payment system according to a first embodiment of the present invention.</p>
<p id="p-0048" num="0047"><figref idref="DRAWINGS">FIG. 2</figref> shows an exemplary appearance of a register terminal <b>10</b> in <figref idref="DRAWINGS">FIG. 1</figref>.</p>
<p id="p-0049" num="0048"><figref idref="DRAWINGS">FIG. 3</figref> shows an appearance of a mobile phone as an example of a user's terminal <b>20</b> in <figref idref="DRAWINGS">FIG. 1</figref>.</p>
<p id="p-0050" num="0049"><figref idref="DRAWINGS">FIG. 4</figref> shows an appearance of a hand-held device with a communication function as another example of the user's terminal <b>20</b> in <figref idref="DRAWINGS">FIG. 1</figref>.</p>
<p id="p-0051" num="0050"><figref idref="DRAWINGS">FIG. 5</figref> is a functional block diagram of a synchro server <b>30</b> in <figref idref="DRAWINGS">FIG. 1</figref>.</p>
<p id="p-0052" num="0051"><figref idref="DRAWINGS">FIG. 6</figref> is a functional block diagram of the register terminal <b>10</b> in <figref idref="DRAWINGS">FIG. 1</figref>.</p>
<p id="p-0053" num="0052"><figref idref="DRAWINGS">FIG. 7</figref> is a functional block diagram of the user's terminal <b>20</b> in <figref idref="DRAWINGS">FIG. 1</figref>.</p>
<p id="p-0054" num="0053"><figref idref="DRAWINGS">FIG. 8</figref> is a flowchart of an electronic money deposit process of the electronic payment system according to the first embodiment.</p>
<p id="p-0055" num="0054"><figref idref="DRAWINGS">FIG. 9</figref> is a flowchart of a user information inquiry process <b>204</b> in <figref idref="DRAWINGS">FIG. 8</figref>.</p>
<p id="p-0056" num="0055"><figref idref="DRAWINGS">FIG. 10</figref> is a flowchart of a user authentication process <b>206</b> in <figref idref="DRAWINGS">FIG. 8</figref>.</p>
<p id="p-0057" num="0056"><figref idref="DRAWINGS">FIG. 11</figref> is a flowchart of a balance inquiry process <b>214</b> in <figref idref="DRAWINGS">FIG. 8</figref>.</p>
<p id="p-0058" num="0057"><figref idref="DRAWINGS">FIG. 12</figref> explains an exemplary update rule for a reference number according to one embodiment of the present invention.</p>
<p id="p-0059" num="0058"><figref idref="DRAWINGS">FIG. 13</figref> explains another exemplary update rule for the reference number according to the present invention.</p>
<p id="p-0060" num="0059"><figref idref="DRAWINGS">FIG. 14</figref> explains still another exemplary update rule for the reference number.</p>
<p id="p-0061" num="0060"><figref idref="DRAWINGS">FIG. 15</figref> is a flowchart of a balance inquiry by the user's terminal <b>20</b> in <figref idref="DRAWINGS">FIG. 1</figref>.</p>
<p id="p-0062" num="0061"><figref idref="DRAWINGS">FIG. 16</figref> is a flowchart of a balance inquiry by the synchro server <b>30</b> in <figref idref="DRAWINGS">FIG. 1</figref>.</p>
<p id="p-0063" num="0062"><figref idref="DRAWINGS">FIG. 17</figref> is a flowchart of an update process for electronic money having an expired term of validity by the synchro server <b>30</b> in <figref idref="DRAWINGS">FIG. 1</figref>.</p>
<p id="p-0064" num="0063"><figref idref="DRAWINGS">FIG. 18</figref> is a flowchart of an update process for electronic money having an expired term of validity by the user's terminal <b>20</b> in <figref idref="DRAWINGS">FIG. 1</figref>.</p>
<p id="p-0065" num="0064"><figref idref="DRAWINGS">FIGS. 19A-19G</figref> show exemplary screens of a display <b>802</b> of the user's terminal <b>20</b> in <figref idref="DRAWINGS">FIG. 1</figref>.</p>
<p id="p-0066" num="0065"><figref idref="DRAWINGS">FIG. 20</figref> is a flowchart of an electronic money payment process of the electronic payment system according to the first embodiment of the present invention.</p>
<p id="p-0067" num="0066"><figref idref="DRAWINGS">FIG. 21</figref> is a flowchart of an electronic money check process <b>110</b> in <figref idref="DRAWINGS">FIG. 20</figref>.</p>
<p id="p-0068" num="0067"><figref idref="DRAWINGS">FIG. 22</figref> is a flowchart of a process <b>114</b> in <figref idref="DRAWINGS">FIG. 20</figref> for checking a spent amount and balance.</p>
<p id="p-0069" num="0068"><figref idref="DRAWINGS">FIG. 23</figref> is a flowchart of a limit check process <b>118</b> in <figref idref="DRAWINGS">FIG. 20</figref>.</p>
<p id="p-0070" num="0069"><figref idref="DRAWINGS">FIG. 24</figref> is a flowchart of a paying amount confirmation process <b>124</b> in <figref idref="DRAWINGS">FIG. 20</figref>.</p>
<p id="p-0071" num="0070"><figref idref="DRAWINGS">FIGS. 25A-25F</figref> show further exemplary screens of the display <b>802</b> of the user's terminal <b>20</b> in <figref idref="DRAWINGS">FIG. 1</figref>.</p>
<p id="p-0072" num="0071"><figref idref="DRAWINGS">FIGS. 26A-26E</figref> show exemplary screens of a register-side display <b>702</b> of the register terminal <b>10</b> in <figref idref="DRAWINGS">FIG. 1</figref>.</p>
<p id="p-0073" num="0072"><figref idref="DRAWINGS">FIG. 27</figref> shows an appearance of a vending machine <b>16</b> in an electronic payment system according to a second embodiment of the present invention.</p>
<p id="p-0074" num="0073"><figref idref="DRAWINGS">FIG. 28</figref> shows an appearance of a parking fee collecting machine in an electronic payment system according to a third embodiment of the present invention.</p>
<p id="p-0075" num="0074"><figref idref="DRAWINGS">FIGS. 29A-29B</figref> show an appearance of a ticket inspector in an electronic payment system according to a fourth embodiment of the present invention.</p>
<p id="p-0076" num="0075"><figref idref="DRAWINGS">FIG. 30</figref> is a flowchart of an electronic money payment process at a ticket gate of a boarding station according to the present invention.</p>
<p id="p-0077" num="0076"><figref idref="DRAWINGS">FIG. 31</figref> is a flowchart of an electronic money payment process at a ticket gate of an exit station according to the present invention.</p>
<p id="p-0078" num="0077"><figref idref="DRAWINGS">FIGS. 32A-32F</figref> show further exemplary screens of the display <b>802</b> of the user's terminal <b>20</b> in <figref idref="DRAWINGS">FIG. 1</figref>.</p>
<p id="p-0079" num="0078"><figref idref="DRAWINGS">FIG. 33</figref> shows an appearance of a communication adapter in an electronic payment system according to a fifth embodiment of the present invention.</p>
<p id="p-0080" num="0079"><figref idref="DRAWINGS">FIG. 34</figref> shows an appearance of a tollbooth exclusive toll bar of a toll road in an electronic payment system according to the fifth embodiment of the present invention.</p>
<p id="p-0081" num="0080"><figref idref="DRAWINGS">FIG. 35</figref> shows a hardware configuration of a general computer <b>600</b> according to the present invention.</p>
</description-of-drawings>
<?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?>
<?DETDESC description="Detailed Description" end="lead"?>
<heading id="h-0005" level="1">DETAILED DESCRIPTION OF PREFERRED EMBODIMENTS</heading>
<p id="p-0082" num="0081">Exemplary embodiments of the present invention are described below, referring to the drawings.</p>
<heading id="h-0006" level="1">Embodiment 1</heading>
<p id="p-0083" num="0082">An electronic payment system according to a first embodiment of the present invention is described. In the electronic payment system of the present embodiment, when a consumer buys goods at a retail store, for example, the consumer can make payment electronically by using electronic money. Hereinafter, the customer is called a user. As used herein, electronic money is a generic term for digital currency.</p>
<p id="p-0084" num="0083"><figref idref="DRAWINGS">FIG. 1</figref> is a block diagram of the electronic payment system of the present embodiment. The electronic payment system of the present embodiment includes a register terminal <b>10</b> as an example of a demanding terminal, a user's terminal <b>20</b> as an example of a payment terminal, a synchro server <b>30</b> as an example of a payment apparatus, a carrier server <b>40</b>, an authentication center <b>42</b>, a user authentication database <b>44</b>, a register database <b>50</b>, a deposit management server <b>54</b>, a deposit database <b>56</b>, a user database <b>60</b> and a user's account database <b>70</b>.</p>
<p id="p-0085" num="0084">The register terminal <b>10</b> demands payment for dealings by electronic money, while the user's terminal <b>20</b> makes the payment by electronic money. The synchro server <b>30</b> communicates with the user's terminal <b>20</b> via the carrier server <b>40</b>, and communicates with the register terminal <b>10</b> so as to make settlement of the payments for dealings by electronic money.</p>
<p id="p-0086" num="0085">A communication line <b>18</b> connects the register terminal <b>10</b> and the synchro server <b>30</b>, and may be a telephone line or a private communication line. A wireless communication transmission path <b>28</b> is an example of a transmission path of wireless telephone communication between the user's terminal <b>20</b> and the carrier server <b>40</b>.</p>
<p id="p-0087" num="0086">A communication line <b>38</b> connects the carrier server <b>40</b> and the synchro server <b>30</b>, and may be a telephone line or a private line. A short-distance communication transmission path <b>68</b> is one example of a transmission path to be used when the register terminal <b>10</b> and the user's terminal <b>20</b> make short-distance communication with each other. As a short-distance communication technique, optical communication, such as infrared communication, or wireless short-distance communication, such as Bluetooth, may be used.</p>
<p id="p-0088" num="0087">The register terminal <b>10</b> calculates the price of the goods that the user bought at a retail store, for example, and charges the user for the goods. <figref idref="DRAWINGS">FIG. 2</figref> schematically shows an appearance of the register terminal <b>10</b>. The register terminal <b>10</b> includes a customer-side display <b>700</b>, a register-side display <b>702</b>, a register body <b>704</b>, a receipt lamp <b>706</b>, and an infrared communication unit <b>708</b> as an example of a short-distance communication unit. Moreover, the register terminal <b>10</b> has communication functionality by being connected to the synchro server <b>30</b> via a telephone line or a private line, although the function is not shown in <figref idref="DRAWINGS">FIG. 2</figref>. The register terminal <b>10</b> can access the synchro server <b>30</b> by dialup connection via the telephone line or by accessing a server gate via the private communication line.</p>
<p id="p-0089" num="0088">The customer-side display <b>700</b> has a display part, such as a liquid crystal display (LCD), for displaying character information, on the rear of the register terminal <b>10</b>, thereby displaying the total of the prices of the purchased goods and/or stages in the electronic payment process so as to notify the user. The register-side display <b>702</b> displays stages in calculation of the prices of the goods and/or the stages in the electronic payment process.</p>
<p id="p-0090" num="0089">The receipt lamp <b>706</b> is turned on in order to notify that communication from the user's terminal <b>20</b>, described later, is being performed. The infrared communication unit <b>708</b> performs infrared data communication with an infrared communication unit <b>808</b> (see <figref idref="DRAWINGS">FIG. 3</figref>) of the user's terminal <b>20</b> of the user. A wireless short-distance communication unit for performing wireless short-distance communication by Bluetooth, for example, may be provided in place of the infrared communication unit <b>708</b> so as to perform wireless short-distance data communication with a wireless short-distance communication unit of the user's terminal <b>20</b>.</p>
<p id="p-0091" num="0090">The user's terminal <b>20</b> stores electronic money and makes payments by electronic money on the goods purchased by the user. As an example of the user's terminal <b>20</b>, a wireless phone device, such as a mobile phone, can be considered. Another exemplary user's terminal <b>20</b> is a hand-held device such as a PDA (personal digital assistant) or a notebook computer, that can perform communication by being connected to a wireless communication device, such as the mobile phone.</p>
<p id="p-0092" num="0091"><figref idref="DRAWINGS">FIG. 3</figref> shows an appearance of a mobile phone that is an example of the user's terminal <b>20</b>. The user's terminal <b>20</b> includes an antenna <b>800</b>, a display <b>802</b>, operating buttons <b>804</b>, dial buttons <b>806</b>, an infrared communication unit <b>808</b>, and an electronic money button <b>810</b>. The user's terminal <b>20</b> communicates with the carrier server <b>40</b> by means of the antenna <b>800</b> via the wireless communication transmission path <b>28</b>. The user's terminal <b>20</b> has a data-packet communication function and can transmit/receive digital data. The display <b>802</b> displays character information and image information transmitted/received by the data-packet communication function.</p>
<p id="p-0093" num="0092">The operating unit <b>804</b> are buttons used for selection of a menu or buttons displayed on the display <b>802</b>. The dial buttons <b>806</b> are used for inputting a phone number, a password or the like. The infrared communication unit <b>808</b> performs data communication with the infrared communication unit <b>708</b> (note <figref idref="DRAWINGS">FIG. 2</figref>) of the register terminal <b>10</b>. The user's terminal <b>20</b> may include a wireless short-distance communication unit that performs wireless short-distance communication, for example, by Bluetooth, in place of the infrared communication unit <b>808</b>, so as to perform wireless short-distance data communication with a wireless short-distance communication unit of the register terminal <b>10</b>.</p>
<p id="p-0094" num="0093">The user's terminal <b>20</b> is connected to the carrier server <b>40</b> by the wireless communication transmission path <b>28</b>. The carrier server <b>40</b> is connected to the synchro server <b>30</b> by the communication line <b>38</b>. Therefore, the user's terminal <b>20</b> can perform data communication with the synchro server <b>30</b>.</p>
<p id="p-0095" num="0094"><figref idref="DRAWINGS">FIG. 4</figref> shows a hand-held device <b>90</b> having communication functionality that is another exemplary user's terminal <b>20</b> according to the present embodiment. The hand-held device <b>90</b> can perform wireless communication when connected to a mobile phone <b>92</b>. A CCD camera <b>94</b> can capture an image of the user's face or pupil or retina of an eye. A fingerprint detection pad <b>96</b> can capture an image of a fingerprint of the user.</p>
<p id="p-0096" num="0095">The synchro server <b>30</b> can communicate with the user's terminal <b>20</b> and the register terminal <b>10</b>, and manage and perform the payment operations of the dealings between a retail store and the user. The synchro server <b>30</b> is connected to the register database <b>50</b> in which information regarding various register terminals <b>10</b> is stored, the user database <b>60</b> in which information regarding various user's terminals <b>20</b> is stored, and the user's account database <b>70</b> in which information regarding a credit account or a bank account is stored for each user, and retrieves necessary information from the respective databases.</p>
<p id="p-0097" num="0096">Moreover, the synchro server <b>30</b> is connected to the deposit management server <b>54</b>, so as to instruct the deposit management server <b>54</b> to deposit electronic money, make payment by electronic money and the like. The deposit management server <b>54</b> is connected to the deposit database <b>56</b>, and can retrieve information such as a deposit amount of electronic money of the user, the balance, a reference number of the electronic money, the term of validity of the electronic money and the like.</p>
<p id="p-0098" num="0097">The synchro server <b>30</b>, the deposit management server <b>54</b>, the deposit database <b>56</b>, the register database <b>50</b>, the user database <b>60</b> and the user's account database <b>70</b> may be provided in a network of a credit card company or a bank. Moreover, only the user's account database <b>70</b> may be provided in the network of the credit card company or the bank, while the synchro server <b>30</b> is connected to the user's account database <b>70</b> via a private communication line.</p>
<p id="p-0099" num="0098">A part or all of the functions of the deposit management server <b>54</b> may be implemented in the synchro server <b>30</b>. In order to simplify the following description, it is assumed that the synchro server <b>30</b> performs all the functions of the deposit management server <b>54</b>.</p>
<p id="p-0100" num="0099">The synchro server <b>30</b> is connected to the register terminal <b>10</b> and the user's terminal <b>20</b> via a communication network, thereby performing data communication. The synchro server <b>30</b> acquires information regarding charging of the dealings by communicating with the register terminal <b>10</b>. The synchro server <b>30</b> also deposits electronic money, checks the balance and sets the term of validity for the electronic money, by communicating with the user's terminal <b>20</b>.</p>
<p id="p-0101" num="0100"><figref idref="DRAWINGS">FIG. 5</figref> is a functional block diagram of the synchro server <b>30</b>. The synchro server <b>30</b> includes a memory unit <b>80</b> for storing information regarding electronic money; an operation unit <b>81</b> for calculating a reference number of the electronic money; a payment processing unit <b>82</b> for processing a payment operation; the first communication unit <b>84</b> for handling data communication via the communication line <b>18</b>; the second communication unit <b>86</b> for handling data communication via the communication line <b>38</b> and the wireless communication transmission path <b>28</b>; and a database retrieving unit <b>88</b> for accessing the register database <b>50</b>, the user database <b>60</b>, the user's account database <b>70</b> and the deposit database <b>56</b> so as to retrieve information in the respective databases.</p>
<p id="p-0102" num="0101">The memory unit <b>80</b> stores information indicating the balance, the term of validity, or the like, of electronic money. However, the information regarding electronic money may be stored in the deposit database <b>56</b> so as to correspond to the user's terminal <b>20</b>. In this case, only information regarding electronic money corresponding to a certain user's terminal <b>20</b> may be retrieved from the deposit database <b>56</b> and temporarily stored in the memory unit <b>80</b>.</p>
<p id="p-0103" num="0102">In a case where the register terminal <b>10</b> is connected to the synchro server <b>30</b> by dialup connection, the synchro server <b>30</b> may detect a caller number of the register terminal <b>10</b> and refuse access from phone numbers other than specific caller numbers. Moreover, an apparatus that can recognize the caller number may be provided at a reception port of the synchro server <b>30</b> so as to refuse a connection request from phone numbers other than the numbers of specific member stores.</p>
<p id="p-0104" num="0103"><figref idref="DRAWINGS">FIG. 6</figref> is a functional block diagram of the register terminal <b>10</b>. The register terminal <b>10</b> includes a display <b>720</b> for displaying the status of the electronic-money payment operation, the balance of electronic money and the like; a processor <b>722</b> for performing the electronic-money charging process; the first communication unit <b>724</b> for handling data communication via the short-distance communication transmission path <b>68</b>; and the second communication unit <b>726</b> for handling data communication via the communication line <b>18</b>.</p>
<p id="p-0105" num="0104"><figref idref="DRAWINGS">FIG. 7</figref> is a functional block diagram of the user's terminal <b>20</b>. The user's terminal <b>20</b> includes a display <b>820</b> for displaying the status of the electronic-money payment process, the balance of electronic money and the like; a memory <b>822</b> for storing the balance, the term of validity, and the like of electronic money; an operation unit <b>824</b> for calculating the reference number of the electronic money; a processor <b>826</b> for performing the electronic-money payment process; the first communication unit <b>828</b> for handling data communication via the short-distance communication transmission path <b>68</b>; and the second communication unit <b>830</b> for handling data communication via the wireless communication transmission path <b>28</b>.</p>
<p id="p-0106" num="0105">In the electronic payment system using electronic money according to the present invention, in order to prevent falsification or unfair use of the electronic money, both the user's terminal <b>20</b> and the synchro server <b>30</b> store the balance and the reference number of the electronic money and check or validate the balance and the reference number between the user's terminal <b>20</b> and the synchro server <b>30</b>.</p>
<p id="p-0107" num="0106">Since the register terminal <b>10</b> receives the user's terminal number of the user's terminal <b>20</b> from the user's terminal <b>20</b> so as to know the balance of the electronic money thereof, the register terminal <b>10</b> can make improper or unauthorized use of the electronic money of the user's terminal <b>20</b> by using the user's terminal number even though the use of the electronic money is not requested from the user's terminal <b>20</b>. Therefore, measures for preventing all unfair use are necessary.</p>
<p id="p-0108" num="0107">Thus, by comparing the balance of electronic money stored in one of the user's terminal <b>20</b> and the synchro server <b>30</b> with that stored in the other so as to check whether or not the compared balances are coincident, unfair use can be detected because of a disagreement of the balances, even if the register terminal <b>10</b> uses the electronic money under a situation where the user has no concern with that use. Moreover, in a case where the register terminal <b>10</b> requests payment from the synchro server <b>30</b>, by transmitting a reference number of the electronic money and checking the transmitted reference number with the reference number stored in the synchro server <b>30</b>, unfair use can be found because of disagreement of the reference numbers, if the register terminal <b>10</b> unfairly uses the electronic money of the user without obtaining the correct reference number from the user's terminal <b>20</b>.</p>
<p id="p-0109" num="0108">As described above, by checking the balance and the reference number, unfair use can be found because of disagreement of the balance or reference number when the user's terminal <b>20</b> or the register terminal <b>10</b> uses the electronic money unfairly, or a person other than the user unfairly uses the user's electronic money.</p>
<p id="p-0110" num="0109">The electronic money payment system of the present invention is divided into a phase in which the user withdraws electronic money, a phase in which the user inquires the balance of electronic money, and a phase in which the user spends electronic money and makes payment by electronic money, and those phases are described one by one.</p>
<p id="p-0111" num="0110">First, referring to <figref idref="DRAWINGS">FIGS. 8-11</figref>, the deposit process of electronic money in the electronic money payment system of the present embodiment is described. <figref idref="DRAWINGS">FIG. 8</figref> is a flowchart of the electronic money deposit process in the electronic money payment system of the present embodiment. The processes by the user's terminal <b>20</b> and the synchro server <b>30</b> are shown in the flowchart in term of the passage of time, while data communication between the user's terminal <b>20</b> and the synchro server <b>30</b>, via the wireless communication transmission path <b>28</b> and the communication line <b>38</b>, are shown with horizontal arrows. <figref idref="DRAWINGS">FIGS. 9-11</figref> are flowcharts showing more details of the process in <figref idref="DRAWINGS">FIG. 8</figref>. Moreover, <figref idref="DRAWINGS">FIGS. 19A-19G</figref> show exemplary display screens of the display <b>802</b> of the user's terminal <b>20</b>.</p>
<p id="p-0112" num="0111">Referring to <figref idref="DRAWINGS">FIG. 8</figref>, the process in which the user withdraws electronic money and deposits electronic money in the user's terminal <b>20</b> is described. The user's terminal <b>20</b> can store the amount of the electronic money, and, when the electronic money has been newly withdrawn from the user's account database, add the newly withdrawn amount to the previously stored balance of the electronic money so as to update the stored balance of electronic money.</p>
<p id="p-0113" num="0112">The user selects “ELECTRONIC MONEY WITHDRAWAL” from the menu of the electronic money payment, which is exemplified in <figref idref="DRAWINGS">FIG. 19A</figref>, thereby starting the electronic money withdrawal process (Step <b>200</b>). The user's terminal <b>20</b> is connected to the synchro server <b>30</b>, so that it transmits the user's terminal number (Step S<b>202</b>). The user's terminal number is an identification number unique to the user's terminal <b>20</b>. In a case where the user's terminal <b>20</b> is a mobile phone, the user's terminal number may be a caller phone number. The synchro server <b>30</b> receives the user's terminal number from the user's terminal <b>20</b> and inquires information regarding the user of the user's terminal <b>20</b> based on the user's terminal number (Step <b>204</b>).</p>
<p id="p-0114" num="0113">Referring to <figref idref="DRAWINGS">FIG. 9</figref>, the process of inquiring the user information in Step <b>204</b> is described. The synchro server <b>30</b> detects the user's terminal number of the user's terminal <b>20</b> (Step <b>2040</b>). The synchro server <b>30</b> then accesses the user database <b>60</b> (Step <b>2042</b>), and checks whether or not user registration for that user's terminal <b>20</b> has been already done (Step <b>2044</b>). If the user's terminal <b>20</b> has not been registered, the synchro server <b>30</b> transmits a message of “NOT REGISTERED” to the user's terminal <b>20</b> (Step <b>2046</b>). On the user's terminal <b>20</b>, a display shown in <figref idref="DRAWINGS">FIG. 19B</figref> is displayed, that indicates that the user has not been registered. Then, the synchro server <b>30</b> disconnects the connection to the user's terminal <b>20</b> (Step <b>2048</b>), finishing the process.</p>
<p id="p-0115" num="0114">In a case where it was confirmed that the user registration had been done, user information is extracted from the user database <b>60</b> (Step <b>2050</b>). The user information is information describing the status of the use of electronic money by the user. Then, it is checked whether or not there is any problem with the using status (Step <b>2052</b>). If there is a problem, the synchro server <b>30</b> transmits a message of “YOU CANNOT USE THIS SERVICE.” to the user's terminal <b>20</b> (Step <b>2054</b>). On the user's terminal <b>20</b>, a display shown in <figref idref="DRAWINGS">FIG. 19C</figref> is displayed, indicating that the user cannot use the electronic payment system. The synchro server <b>30</b> then disconnects the connection to the user's terminal <b>20</b> (Step <b>2056</b>), finishing the process.</p>
<p id="p-0116" num="0115">Returning to <figref idref="DRAWINGS">FIG. 8</figref>, the synchro server <b>30</b> performs an authentication operation for the user of the user's terminal <b>20</b> (Step <b>206</b>). The synchro server <b>30</b> communicates with the authentication center <b>42</b> (note <figref idref="DRAWINGS">FIG. 1</figref>) and performs the authentication operation for the user. The authentication center <b>42</b> has a user authentication database <b>44</b>, and can retrieve and extract authentication information for the authentication operation for the user. A part or all of the functions of the authentication center <b>42</b> may be implemented in the synchro server <b>30</b>. For simplified description, it is assumed that the synchro server <b>30</b> performs the functions of the authentication center <b>42</b>.</p>
<p id="p-0117" num="0116">A mobile phone, as an example of the user's terminal <b>20</b>, has a caller phone number unique to each mobile phone. The unique caller phone number is used whenever the user calls someone. The caller phone number is uniquely assigned to the mobile phone and it is therefore impossible to make a telephone call from another mobile phone by using the same caller phone number. Therefore, as long as the mobile phone is used by an owner thereof, the caller phone number of the mobile phone can be used as an ID of the user.</p>
<p id="p-0118" num="0117">However, if the owner of the mobile phone loses the mobile phone and a person other than the owner uses that mobile phone, it is unclear whether the user of the mobile phone is the actual owner of the mobile phone, although the mobile phone can be specified uniquely. Thus, in the electronic payment system of the present embodiment, data that makes the caller phone number of the mobile phone correspond to the actual owner of the mobile phone is stored in the user database <b>60</b>, and it is confirmed whether or not the user of the mobile phone is the owner.</p>
<p id="p-0119" num="0118">The synchro server <b>30</b> detects the caller phone number of the user's terminal <b>20</b> when being connected to the user's terminal <b>20</b>, and retrieves and extracts information regarding the user in the user database <b>60</b> based on the caller phone number, thereby authenticating the user. As an authentication technique, a visual authentication, password authentication, sound authentication or the like can be considered. These authentication techniques can be used in combination.</p>
<p id="p-0120" num="0119">In the case of visual authentication, the synchro server <b>30</b> extracts photo data of the user's face from the user database <b>60</b> and transmits it to the register terminal <b>10</b> so that a clerk operating the register terminal <b>10</b> can confirm whether or not the user is a registered person. In the case of password authentication, the synchro server <b>30</b> extracts password information from the user database <b>60</b> and transmits a password request instruction to the user's terminal <b>20</b>, thereby making the user input the password and then making the user's terminal <b>20</b> transmit the input password.</p>
<p id="p-0121" num="0120">The synchro server <b>30</b> checks the password thus transmitted with the password registered in the user database <b>60</b>, and then transmits the result of the authentication to the register terminal <b>10</b>. In the case of sound authentication, audio data obtained when the user speaks a registration word is recorded onto the database in place of the password. In this case, the user is prompted to speak the registration word so as to input the audio data from the user's terminal <b>20</b>, so that the audio data is transmitted to the synchro server <b>30</b>.</p>
<p id="p-0122" num="0121">Moreover, in a case where visual authentication is insufficient, for example, the accuracy of the authentication can be improved by performing multiple authentication, for example, by combining the visual authentication with other authentication techniques, such as the password authentication.</p>
<p id="p-0123" num="0122">The process of the user authentication operation in Step <b>206</b> is described referring to <figref idref="DRAWINGS">FIG. 10</figref>. The synchro server <b>30</b> accesses the user authentication database <b>44</b> (note <figref idref="DRAWINGS">FIG. 1</figref>) in order to perform the authentication operation (Step <b>2060</b>), and then extracts information required for the authentication operation (Step <b>2062</b>). As the user authentication information, a password registered by the user, photo data of the face, audio data, image data of a fingerprint and image data of an eye pupil or retina of the user, and the like can be used. The synchro server <b>30</b> initializes a variable n that indicates how many times the authentication information is requested to zero (Step <b>2064</b>).</p>
<p id="p-0124" num="0123">The synchro server <b>30</b> then increments n by one (Step <b>2066</b>), and transmits the authentication information request message to the user's terminal <b>20</b> (Step <b>2068</b>). In the case where the authentication information is the password, the user's terminal <b>20</b> displays a screen shown in <figref idref="DRAWINGS">FIG. 19D</figref>, and the user then inputs the password as the authentication information (Step <b>2070</b>). In the case where the authentication information is the audio data, the user inputs sound to the user's terminal.</p>
<p id="p-0125" num="0124">In the case of inputting sound, a call is made to the authentication center <b>42</b>, via the carrier server <b>40</b>, so as to transmit the audio data thus input. In the case where the authentication information is image data, such as the photo of the face, fingerprint, eye pupil, retina and the like, the user transmits the image data of the face, fingerprint, eye pupil, retina and the like by using a CCD camera or a fingerprint input pad included in or connected to the hand-held device.</p>
<p id="p-0126" num="0125">The user's terminal <b>20</b> transmits the authentication information input by the user to the synchro server <b>30</b> (Step <b>2072</b>). The synchro server <b>30</b> receives the authentication information from the user's terminal <b>20</b> and then checks the received authentication information with that registered in the user authentication database <b>44</b> (Step <b>2074</b>).</p>
<p id="p-0127" num="0126">If the authentication information transmitted from the user's terminal <b>20</b> is not correct, it is checked whether or not the number of password requests is larger than two (Step <b>2076</b>). If n is not larger than two, the flow goes back to Step <b>2066</b> and repeats the request of the authentication information. If n is larger than two, the authentication operation is finished (Step <b>2078</b>) and a message indicating disapproval of authentication is transmitted to the user's terminal <b>20</b> (Step <b>2080</b>). The user's terminal <b>20</b> displays a screen shown in <figref idref="DRAWINGS">FIG. 19E</figref> that notifies that the user cannot use this service because of failure of authentication (Step <b>2082</b>).</p>
<p id="p-0128" num="0127">If the synchro server <b>30</b> confirms that the authentication information is correct in authentication information checking Step <b>2074</b>, the authentication operation in Step <b>206</b> is finished. Returning to <figref idref="DRAWINGS">FIG. 8</figref>, the synchro server <b>30</b> transmits a signal indicating the user has been successfully authenticated to the user's terminal <b>20</b> (Step <b>208</b>).</p>
<p id="p-0129" num="0128">Then, a screen shown in <figref idref="DRAWINGS">FIG. 19F</figref> for allowing the user to input the amount of withdrawal of electronic money is displayed on the user's terminal <b>20</b>, and the user inputs the amount of withdrawal (Step <b>210</b>). The user's terminal <b>20</b> transmits the amount of withdrawal input by the user and the present balance to the synchro server <b>30</b>.</p>
<p id="p-0130" num="0129">The synchro server <b>30</b> compares the balance of the electronic money received from the user's terminal <b>20</b>, which has been input to the user's terminal <b>20</b> already, with the balance of the electronic money recorded in the synchro server <b>30</b> so as to check whether or not the balances are coincident (Step <b>214</b>).</p>
<p id="p-0131" num="0130">The process of checking the balances in Step <b>214</b> is described referring to <figref idref="DRAWINGS">FIG. 11</figref>. The synchro server <b>30</b> extracts the balance of the electronic money that has been deposited in the user's terminal <b>20</b> from the deposit database <b>56</b> based on the user's terminal number of the user's terminal <b>20</b> (Step <b>2130</b>). It is determined whether or not the balance received from the user's terminal <b>20</b> is coincident with the balance stored in the deposit database <b>56</b> (Step <b>2132</b>). If the balances are not coincident with each other, there is a possibility of unfair use.</p>
<p id="p-0132" num="0131">In a case where the balance of the electronic money stored in the user's terminal <b>20</b> is larger than that stored in the deposit database <b>56</b>, there is a possibility that a person other than the user unfairly spent the electronic money and the user has not realized the unfair use. Also, there is a possibility that the user forged the balance of the electronic money. In such cases, the synchro server <b>30</b> transmits a warning message indicating the possibility of unfair use to the management center or a manager of the electronic payment system of the present embodiment (Step <b>2134</b>). The synchro server <b>30</b> transmits an instruction to stop the use to the user's terminal <b>20</b> (Step <b>2136</b>), and disconnects the connection to the user's terminal <b>20</b> (Step <b>2138</b>), finishing the process.</p>
<p id="p-0133" num="0132">Returning to <figref idref="DRAWINGS">FIG. 8</figref>, In a case where the check of the balance in Step <b>214</b> was successful, the synchro server <b>30</b> accesses the user's account database <b>70</b> so as to withdraw the amount of electronic money specified by the user in Step <b>210</b>, and then adds the withdrawn amount to the present balance of the electronic money, thereby updating the balance (Step <b>216</b>).</p>
<p id="p-0134" num="0133">The synchro server <b>30</b> transmits the new updated balance to the user's terminal <b>20</b> (Step <b>218</b>). The user's terminal <b>20</b> receives the new balance, and updates the electronic money balance stored in the user's terminal <b>20</b> to the new balance (Step <b>220</b>).</p>
<p id="p-0135" num="0134">The synchro server <b>30</b> then sets the term of validity of the electronic money (Step <b>222</b>). The electronic money is withdrawn from the user's account, then a time at which the new, updated balance was transmitted to the user's terminal <b>20</b> is set as a start time, and then the term of validity is set as a time period or days after the start time. For example, the term of validity is set to three days or ten days from the start time. The synchro server <b>30</b> transmits the start time and term of validity thus set to the user's terminal <b>20</b> (Step <b>224</b>). The user's terminal <b>20</b> records the start time and the term of validity that were received from the synchro server <b>30</b> so as to correspond to the newly deposited electronic money (Step <b>226</b>).</p>
<p id="p-0136" num="0135">The synchro server <b>30</b> then sets a new reference number of the electronic money, and stores the newly set reference number in the deposit database <b>56</b> so as to correspond to the electronic money (Step <b>228</b>). The reference number is calculated from an initial value of the reference number and an update rule for updating the reference number. The update rule of the reference number is described later. The synchro server <b>30</b> transmits the initial value and update rule of the reference number to the user's terminal <b>20</b> (Step <b>230</b>), thereby finishing the process.</p>
<p id="p-0137" num="0136">The user's terminal <b>20</b> records the initial value and update rule of the reference number that were received from the synchro server <b>30</b> so as to correspond to the electronic money (Step <b>232</b>). The user's terminal <b>20</b> displays the new balance of the electronic money by a screen shown in <figref idref="DRAWINGS">FIG. 19G</figref> (Step <b>234</b>), thereby finishing the process.</p>
<p id="p-0138" num="0137">In the above deposit process of the electronic money, the user information inquiry process <b>204</b>, the user authentication process <b>206</b>, the balance check process <b>214</b>, the balance update process <b>216</b>, the setting of the term of validity <b>222</b> and the setting of the reference number <b>228</b>, that are performed by the synchro server <b>30</b>, are performed by the payment processing unit <b>82</b> and the database retrieving unit <b>88</b> of the synchro server <b>30</b> (note <figref idref="DRAWINGS">FIG. 5</figref>).</p>
<p id="p-0139" num="0138">Moreover, the communication process, that is data communication the synchro server <b>30</b> performs with the user's terminal <b>20</b>, including the receipt in Step <b>202</b> of the user's terminal number from the user's terminal <b>20</b>, the transmission in Step <b>208</b> of the authentication-approval signal to the user's terminal <b>20</b>, the receipt in Step <b>212</b> of the withdrawn amount and the present balance from the user's terminal <b>20</b>, the balance update in Step <b>218</b> to the user's terminal <b>20</b>, the transmission in Step <b>224</b> of the start time and term of validity to the user's terminal <b>20</b>, and the transmission in Step <b>230</b> of the initial value and update rule of the reference number to the user's terminal <b>20</b> (note <figref idref="DRAWINGS">FIG. 8</figref>) is handled by the second communication unit <b>86</b> of the synchro server <b>30</b>.</p>
<p id="p-0140" num="0139">Next, the reference number of the electronic money is described. In order to prevent falsification or unfair use of the electronic money, both the user's terminal <b>20</b> and the synchro server <b>30</b> store and manage the reference number of the electronic money when the electronic money is deposited in the user's terminal <b>20</b>. The use of the electronic money is allowed only when the reference number of the electronic money used by the user's terminal <b>20</b> is coincident with that stored in the synchro serve <b>30</b> to correspond to the user's terminal <b>20</b>.</p>
<p id="p-0141" num="0140">The same number is not used continuously as the reference number. Instead, the reference number is updated at regular intervals. Each of the user's terminal <b>20</b> and the synchro server <b>30</b> stores the initial value of the reference number and the rule for updating the reference number, and updates the reference number at regular intervals. There is no transmission of the updated reference number between the user's terminal <b>20</b> and the synchro server <b>30</b>.</p>
<p id="p-0142" num="0141">The user's terminal <b>20</b> and the synchro server <b>30</b> repeatedly update the reference number from the initial value based on the update rule independently of each other. In a case where the update is performed, for example, every one minute, the reference number n minutes after the time at which the electronic money was deposited in the user's terminal <b>20</b> can be determined uniquely from the initial value and the update rule by storing the time of deposit as a start time in both the user's terminal <b>20</b> and the synchro server <b>30</b>.</p>
<p id="p-0143" num="0142">Without knowledge of the initial value and update rule of the reference number, a person other than the user cannot find the reference number that the user's terminal <b>20</b> and the synchro server <b>30</b> use. Therefore, it is possible to prevent unfair use of the electronic money by the register terminal <b>10</b> using the user's terminal number of the user's terminal <b>20</b>. Moreover, it is also possible to prevent the falsification and the use of the electronic money by another person who pretends to be the user of the user's terminal <b>20</b> by using the user's terminal number of the user's terminal <b>20</b>.</p>
<p id="p-0144" num="0143">An example of the update rule of the reference number is described. <figref idref="DRAWINGS">FIG. 12</figref> explains an exemplary update rule of the reference number. As the initial number, a square root that is an irrational number is used. In this update rule, the n-th decimal place number of the square root is used as the reference number n minutes after the start time. The calculation of decimal places may be cut at an appropriate decimal place so that the number used in the update rule goes back to the first decimal place. In <figref idref="DRAWINGS">FIG. 12</figref>, square roots of 2, 3, 5 and 6 are used and the reference number n minutes after the start time is expressed by the n-th decimal place number of the respective square root.</p>
<p id="p-0145" num="0144">In the above description, the reference number n minutes after the start time is determined while the time of deposit of the electronic money is considered as the start time. Instead of the time that has passed after the start time, the number of times of use of the electronic money may be used for updating the reference number. More specifically, in a case where the number of times the electronic money was used after the electronic money was deposited is n, the n-th decimal place number is used as the reference number.</p>
<p id="p-0146" num="0145">In the case of updating the reference number using the time that has passed after the time of deposit of the electronic money, it is necessary to synchronize the clocks between the user's terminal <b>20</b> and the synchro server <b>30</b>. However, in the case of updating the reference number in accordance with the number of times the electronic money is used, the clock synchronization is not necessary.</p>
<p id="p-0147" num="0146"><figref idref="DRAWINGS">FIG. 13</figref> explains another exemplary update rule. In this update rule, an algorithm for generating a random number sequence is used. A seed of the random number generation is given as the initial value, and the n-th number in the random number sequence continuously generated is used as the reference number n minutes after the start time or that in the n-th uses. As a generation routine of the random number sequence, a typical random number algorithm for generating normal random numbers or uniform random numbers can be used. Exemplary sequences of the reference numbers generated by using the random number generation algorithm are shown in <figref idref="DRAWINGS">FIG. 13</figref>. When the seed of the random number generation is changed, the series of generated random numbers is also changed. Therefore, without the initial value of the random value and the random number generation algorithm, the reference number cannot be estimated.</p>
<p id="p-0148" num="0147">By determining in advance a specific random number generation algorithm as the update rule in both the user's terminal <b>20</b> and the synchro server <b>30</b>, the n-th reference number can be calculated uniquely from the seed of the random number generation given as the initial value.</p>
<p id="p-0149" num="0148"><figref idref="DRAWINGS">FIG. 14</figref> explains still another example of the update rule. In this example, Hash function y=h(x) is used as the update rule. The initial value is given as the input of Hash function h(x), and then a Hash value y is obtained as the output. This output is used as the reference number one minute after the start time. Then, Hash value y is given as the input to Hash function, so as to obtain a new Hash value y. The new Hash value y is used as a two-minute-after reference number. By repeating these processes, Hash values are obtained one after another in accordance with Hash function and are then used as the reference numbers.</p>
<p id="p-0150" num="0149">As Hash function, unidirectional Hash function may be used. The unidirectional Hash function is Hash function for which it is difficult to obtain the value x that provides the function value y in accordance with h(x)=y from the function value y. By using the one directional Hash function, it becomes difficult to estimate the Hash function even if the sequence of the generated reference numbers is examined. Therefore, reference numbers with improved security can be generated.</p>
<p id="p-0151" num="0150">By determining in advance the specific Hash function as the update rule in both the user's terminal <b>20</b> and the synchro server <b>30</b>, a reference number n minutes after the start time can be calculated uniquely from the initial value.</p>
<p id="p-0152" num="0151">As described above, when the user newly withdraws electronic money from the user's bank account or credit card account and deposits the electronic money in the user's terminal <b>20</b>, it is checked whether or not the balance of the electronic money already stored in the user's terminal <b>20</b> is equal to the balance of the electronic money of the user that the synchro server <b>30</b> stored in the deposit database <b>56</b>. This enables the detection of unfair use by disagreement of the balances in a case where the electronic money was unfairly used.</p>
<p id="p-0153" num="0152">Next, the phase of checking the balance of the electronic money is described. When the user inquires the balance of the electronic money stored in the user's terminal <b>20</b>, the balance of the electronic money can be checked with the balance of the electronic money that the synchro server <b>30</b> stored in the deposit database <b>56</b>.</p>
<p id="p-0154" num="0153"><figref idref="DRAWINGS">FIG. 15</figref> is a flowchart of the balance inquiry by the user's terminal <b>20</b>. When the user selects the balance inquiry from the menu of the electronic money system of the user's terminal <b>20</b> (Step <b>240</b>), the user's terminal <b>20</b> transmits a request of the balance inquiry and the present balance of the electronic money stored in the user's terminal <b>20</b> to the synchro server <b>30</b>. The synchro server <b>30</b> checks the balance received from the user's terminal <b>20</b> with the balance of the electronic money of that user's terminal <b>20</b> that was stored by the synchro server <b>30</b> in the deposit database <b>56</b> (Step <b>244</b>).</p>
<p id="p-0155" num="0154">The process of the balance inquiry in Step <b>244</b> is the same as the process of the balance inquiry in Step <b>214</b> shown in <figref idref="DRAWINGS">FIG. 8</figref>. If the balances under check are not coincident, there is a possibility of unfair use of the electronic money. Therefore, the use of the electronic money is stopped. If the balances are coincident with each other, the synchro server <b>30</b> transmits the balance-check OK signal to the user's terminal <b>20</b> (Step <b>246</b>), and then the user's terminal <b>20</b> displays the balance of the electronic money stored in the user's terminal <b>20</b> (Step <b>248</b>).</p>
<p id="p-0156" num="0155">In a case where the user has inquired the balance of the electronic money, it is not always necessary for the user's terminal <b>20</b> to check the balance with the balance in the synchro server <b>30</b>. Because the check of the balance requires communication with the synchro server <b>30</b>, the times of the balance inquiry may be reduced in order to reduce the communication cost. For example, the balance inquiry may be performed only when a predetermined time, for example, three days have passed after the last balance inquiry by the user.</p>
<p id="p-0157" num="0156">By the function of checking the balance of the electronic money when the user has inquired the balance, it is possible to prevent unfair use of the electronic money in which the user did not use the electronic money, and it is also possible to prevent time passing before the user realizes the unfair use.</p>
<p id="p-0158" num="0157">In the above example, the balance is checked when the user inquired the balance. However, the balance may be checked by allowing the user's terminal <b>20</b> to voluntarily communicate with the synchro server <b>30</b> when the electronic money has not been used for a long time. As a trigger for causing the user's terminal <b>20</b> to check the balance, the fact that a predetermined number of days have passed after the time of deposit the electronic money may be used, for example.</p>
<p id="p-0159" num="0158"><figref idref="DRAWINGS">FIG. 16</figref> is a flowchart of the balance inquiry by the synchro server <b>30</b>. In the flowchart shown in <figref idref="DRAWINGS">FIG. 15</figref>, the balance check is performed when the user of the user's terminal <b>20</b> starts the balance inquiry. However, in the flowchart shown in <figref idref="DRAWINGS">FIG. 16</figref>, the balance check is started when the synchro server <b>30</b> starts the balance inquiry. The synchro server <b>30</b> voluntarily checks the balance of the electronic money of the specific user's terminal <b>20</b> with the balance of the electronic money managed by the synchro server <b>30</b> in a case where the term of validity of the electronic money has expired, a case where the electronic money is suspected to be unfairly used, or the like. In this way, the synchro server <b>30</b> can automatically make the examination of the electronic money that is suspected to be unfairly used to perform the balance check.</p>
<p id="p-0160" num="0159"><figref idref="DRAWINGS">FIG. 17</figref> is a flowchart of an update process of the electronic money for which the term of validity has expired, performed by the synchro server <b>30</b>. The synchro server <b>30</b> extracts the expired electronic money from the deposit database <b>56</b> (Step <b>260</b>).</p>
<p id="p-0161" num="0160">The synchro server <b>30</b> resets the reference number of the extracted electronic money (Step <b>262</b>). Then, the synchro server <b>30</b> newly determines the initial value of the reference number and also sets the update rule for updating the reference number. The synchro server <b>30</b> transmits the initial value and update rule of the reference number thus set to the user's terminal <b>20</b> for storing the electronic money (Step <b>264</b>).</p>
<p id="p-0162" num="0161">The user's terminal <b>20</b> sets the reference number based on the initial value and update rule that were received (Step <b>266</b>). The synchro server <b>30</b> resets the term of validity of the electronic money (Step <b>268</b>). Also, the start time and the term of validity of the electronic money are newly determined and then are recorded in the deposit database <b>56</b>. The synchro server <b>30</b> then transmits the start time and term of validity thus set to the user's terminal <b>20</b> (Step <b>270</b>). The user's terminal <b>20</b> sets the start time and term of validity that were received for the electronic money, and records them (Step <b>272</b>).</p>
<p id="p-0163" num="0162">As described above, the electronic money for which the term of validity has expired can be made valid again by resetting the reference number and using the reference number with the new initial value and update rule. This is more advantageous as compared with a case where the expired electronic money can be no longer be used and therefore the user has to deposit electronic money again, because the user's burden is reduced. Moreover, also in a case of using the electronic money while the term of validity is set to be relatively short and the update rule is changed in order to ensure the safety, this is advantageous in that the electronic money can be continuously used without burdening the user.</p>
<p id="p-0164" num="0163"><figref idref="DRAWINGS">FIG. 18</figref> is a flowchart of an update process of the expired electronic money by the user's terminal <b>20</b>. In the flowchart shown in <figref idref="DRAWINGS">FIG. 17</figref>, the synchro server <b>30</b> extracts the expired electronic money and performs the update process of the electronic money of the user's terminal <b>20</b> that stores the expired electronic money. On the other hand, the flowchart shown in <figref idref="DRAWINGS">FIG. 18</figref> is different from that shown in <figref idref="DRAWINGS">FIG. 17</figref> in that the user's terminal <b>20</b> detects the expiration of the electronic money stored therein, notifies the detection result and makes the synchro server <b>30</b> perform the update process of the electronic money.</p>
<p id="p-0165" num="0164">The user's terminal <b>20</b> checks whether or not the term of validity of the electronic money has expired (Step <b>280</b>), and then transmits expiration signal if the term of validity has expired (Step <b>282</b>). The synchro server <b>30</b> detects the user's terminal number of the user's terminal <b>20</b>, extracts information regarding the electronic money of the user's terminal <b>20</b> managed by the synchro server <b>30</b>, and then performs a change of the reference number and reset of the term of validity. The process of the change of the reference number and the process of resetting the term of validity (Steps <b>284</b> to <b>294</b>) are the same as those in Steps <b>262</b> to <b>272</b> in <figref idref="DRAWINGS">FIG. 17</figref> and therefore a description is omitted here.</p>
<p id="p-0166" num="0165">Next, the phase in which the user uses electronic money and pays by the electronic money is described. <figref idref="DRAWINGS">FIG. 20</figref> is a flowchart of an electronic money payment process of the electronic payment system of the present embodiment. <figref idref="DRAWINGS">FIGS. 21-24</figref> are flowcharts of details of the process in <figref idref="DRAWINGS">FIG. 20</figref>. <figref idref="DRAWINGS">FIG. 25</figref> shows an exemplary display screen of the display <b>802</b> of the user's terminal <b>20</b>. <figref idref="DRAWINGS">FIG. 26</figref> shows an exemplary display screen of the register-side display <b>702</b> of the register terminal <b>10</b>.</p>
<p id="p-0167" num="0166">Referring to <figref idref="DRAWINGS">FIG. 20</figref>, the electronic money payment process is described. At the retail store, the user buys the goods and pays for the goods at the register placed at the retail store. The clerk handling the register is requested to process the payment by electronic money from the user and then selects the electronic money payment menu on the register terminal <b>10</b>, thereby starting the electronic money payment process (Step <b>100</b>). The user selects the electronic money payment menu on the user's terminal <b>20</b>, thereby starting the electronic money payment (Step <b>101</b>). The user's terminal <b>20</b> checks whether or not the term of validity of the electronic money stored in the user's terminal <b>20</b> has expired (Step <b>102</b>).</p>
<p id="p-0168" num="0167">In a case where the term of validity of the electronic money has expired, a screen indicating the electronic money cannot be used is displayed on the user's terminal <b>20</b>. After confirming that the term of validity has not expire, the user's terminal <b>20</b> communicates with the register terminal <b>10</b> so as to transmit the user's terminal number and the reference number and balance of the electronic money (Step <b>103</b>). For the communication between the register terminal <b>10</b> and the user's terminal <b>20</b>, infrared communication or short-distance wireless communication can be used. The register terminal <b>10</b> turns on the receipt lamp in order to notify the user and the clerk of the start of the communication with the user's terminal <b>20</b> (Step <b>104</b>).</p>
<p id="p-0169" num="0168">The register <b>10</b> terminal accesses the synchro server <b>30</b> and transmits the user's terminal number and the reference number and balance of the electronic money that were received from the user's terminal <b>20</b> (Step <b>106</b>). When the register terminal <b>10</b> has accessed the synchro server <b>30</b>, the synchro server <b>30</b> may search the register database <b>50</b> for information such as a terminal number of the register terminal so as to confirm whether or not the register terminal <b>10</b> has been already registered and refuse access to a non-registered register terminal. Moreover, the synchro server <b>30</b> may refuse access from a phone number other than a specific caller number by checking the caller number when the register terminal <b>10</b> accesses the communication port.</p>
<p id="p-0170" num="0169">The synchro server <b>30</b> checks or validates the electronic money based on the user's terminal number and the reference number of the electronic money and balance of the electronic money that were received from the register terminal <b>10</b> (Step <b>110</b>). Referring to <figref idref="DRAWINGS">FIG. 21</figref>, the process of checking the electronic money in Step <b>110</b> is described. The synchro server <b>30</b> searches the deposit database <b>56</b> based on the user's terminal number and extracts the reference number and balance of the electronic money used by the user's terminal <b>20</b> (Step <b>1102</b>). The synchro server <b>30</b> compares the reference number received from the register terminal <b>10</b> with the reference number extracted from the deposit database <b>56</b> so as to check whether or not they are coincident with each other (Step <b>1106</b>).</p>
<p id="p-0171" num="0170">In a case where they are not coincident, the synchro server <b>30</b> transmits a check-failure signal to the register terminal <b>10</b> (Step <b>1108</b>). The register terminal <b>10</b> sends the check-failure signal to the user's terminal <b>20</b> (Step <b>1110</b>) and then displays a screen shown in <figref idref="DRAWINGS">FIG. 26A</figref> that indicates the electronic money cannot be used (Step <b>1112</b>), thereby finishing the process. The user's terminal <b>20</b> displays a screen shown in <figref idref="DRAWINGS">FIG. 25A</figref> that indicates that the electronic money cannot be used because of the failure in check, on the display of the user's terminal <b>20</b> (Step <b>1114</b>), thereby finishing the process.</p>
<p id="p-0172" num="0171">In a case where the check of the reference number was successful in Step <b>1106</b>, the synchro server <b>30</b> compares the balance received from the register terminal <b>10</b> with the balance extracted from the deposit database <b>56</b> so as to check whether or not they are coincident with each other (Step <b>1116</b>). In a case where they are not coincident, there is a possibility that the electronic money was unfairly used. Thus, a warning message indicating the possibility of unfair use is sent to the management center (Step <b>1118</b>). The synchro server <b>30</b> transmits the check-failure signal to the register terminal <b>10</b> (Step <b>1108</b>). In a case where the balance check was successful, the synchro server <b>30</b> starts the next process.</p>
<p id="p-0173" num="0172">Returning to <figref idref="DRAWINGS">FIG. 20</figref>, the synchro server <b>30</b> transmits a check-OK signal to the register terminal <b>10</b> when the process of checking the electronic money in Step <b>110</b> has been finished (Step <b>112</b>). The register terminal <b>10</b> checks the spent amount and balance of the electronic money when receiving the check-OK signal (Step <b>114</b>). Referring to <figref idref="DRAWINGS">FIG. 22</figref>, the process of Step <b>114</b> of checking the spent amount and balance of the electronic money is described. The clerk handling the register terminal <b>10</b> calculates the total of the purchase amount of the user by means of the register terminal <b>10</b> and calculates the spent amount of the electronic money.</p>
<p id="p-0174" num="0173">The register terminal <b>10</b> checks whether or not the balance received from the user's terminal <b>20</b> is larger than the spent amount (Step <b>1140</b>). When the balance does not cover the spent amount, the register terminal <b>10</b> displays a screen shown in <figref idref="DRAWINGS">FIG. 26B</figref> on the display of the register terminal <b>10</b> so as to notify the clerk of the shortage of the balance (Step <b>1142</b>). The register terminal <b>10</b> transmits a balance-shortage signal to the user's terminal <b>20</b> (Step <b>1144</b>). The user's terminal <b>20</b> displays a screen shown in <figref idref="DRAWINGS">FIG. 25B</figref> so as to notify the user of the shortage of the balance (Step <b>1146</b>).</p>
<p id="p-0175" num="0174">Returning to <figref idref="DRAWINGS">FIG. 20</figref>, the register terminal <b>10</b> transmits the spent amount to the synchro server <b>30</b> after confirming that the balance covers the spent amount (Step <b>116</b>). The synchro server <b>30</b> confirms any limitation on the use of the electronic money when receiving the spent amount (Step <b>118</b>).</p>
<p id="p-0176" num="0175">The limitation on the use of the electronic money is to limit the use of the electronic money during a predetermined time period after the last use of the electronic money, for example, for one minute after the last use, and to make the electronic money, for which the term of validity after the time of deposit of the electronic time has expired, unavailable.</p>
<p id="p-0177" num="0176">The reason why successive uses of the electronic money in a short period are limited is to prevent unfair use of the electronic money of the user's terminal <b>20</b> by the register terminal <b>10</b> immediately after the register terminal <b>10</b> processed the previous electronic money payment for the user's terminal <b>20</b>. In a case where the reference number is updated, for example, every one minute, the reference number is not updated for a next use within one minute after the previous use. Therefore, the register terminal <b>10</b> can process the payment by the electronic money by using the same reference number as that received from the user's terminal <b>20</b> without approval of the user's terminal <b>20</b>. Thus, even if the measure against unfair use that uses the reference number is done, the electronic money can be used unfairly. Thus, successive uses of the electronic money within a predetermined period has to be limited.</p>
<p id="p-0178" num="0177">Referring to <figref idref="DRAWINGS">FIG. 23</figref>, the process of Step <b>118</b> of checking the limitation on the use of the electronic money is described. The synchro server <b>30</b> searches the deposit database based on the user's terminal number and then extracts the start time, the last time at which the balance was updated, and the term of validity for the electronic money of the user's terminal <b>20</b> (Step <b>180</b>). The synchro server <b>30</b> checks whether or not a predetermined time, for example, one minute has passed after the last update time of the balance (Step <b>1182</b>), and transmits a not-available signal to the register terminal <b>10</b> when the predetermined time has not passed (Step <b>1184</b>).</p>
<p id="p-0179" num="0178">The register terminal <b>10</b> sends the not-available signal to the user's terminal <b>20</b> (Step <b>1186</b>) and displays a screen shown in <figref idref="DRAWINGS">FIG. 26C</figref> on the display of the register terminal <b>10</b>, indicating that the electronic money cannot be used (Step <b>1188</b>), thereby finishing the process. The user's terminal <b>20</b> displays a screen shown in <figref idref="DRAWINGS">FIG. 25C</figref> on the display of the user's terminal <b>20</b>, indicating that the electronic money cannot be used (Step <b>1190</b>), thereby finishing the process.</p>
<p id="p-0180" num="0179">In a case where the predetermined time has passed after the last update time of the balance, it is determined whether the time that has passed after the start time of the electronic money goes beyond the term of validity (Step <b>1192</b>). The user's terminal <b>20</b> checks whether or not the term of validity has expired when the electronic money is used in the process of Step <b>102</b> of checking the term of validity in <figref idref="DRAWINGS">FIG. 20</figref>, and then makes the expired electronic money unavailable. Thus, the synchro server <b>30</b> is sure to receive no request of payment by expired electronic money and therefore the detection of expired electronic money in this process (Step <b>1192</b>) indicates that the electronic money may be unfairly used. In this case, the synchro server <b>30</b> sends the warning message indicating the possibility of unfair use to the management center (Step <b>194</b>) and transmits the not-available signal to the register terminal <b>10</b> (Step <b>1184</b>).</p>
<p id="p-0181" num="0180">Returning to <figref idref="DRAWINGS">FIG. 20</figref>, when the synchro server <b>30</b> has finished the process of Step <b>118</b> of checking any limitation on the use of the electronic money and confirms that the use of the electronic money is not limited, the synchro server <b>30</b> transmits an available signal to the register terminal <b>10</b> (Step <b>120</b>). The register terminal <b>10</b> sends the spent amount of the electronic money to the user's terminal <b>20</b> (Step <b>122</b>). The user's terminal <b>20</b> then confirms the paying amount (Step <b>124</b>). Referring to <figref idref="DRAWINGS">FIG. 24</figref>, the process of Step <b>124</b> of confirming the paying amount is described. The user's terminal <b>20</b> displays the total amount of the purchase by a screen shown in <figref idref="DRAWINGS">FIG. 25D</figref> (Step <b>1242</b>).</p>
<p id="p-0182" num="0181">The user confirms the total amount of the purchase (Step <b>1244</b>), and selects an OK button in a case where the user proceeds with the payment by electronic money. In a case where the user wants to cancel the payment, a cancel button is selected. When the cancel button is selected, the cancel of the payment is shown by displaying a screen shown in <figref idref="DRAWINGS">FIG. 25E</figref> (Step <b>1246</b>). The user's terminal <b>20</b> then transmits a cancel signal to the register terminal <b>10</b> (Step <b>1248</b>), thereby finishing the process. When receiving the cancel signal, the register terminal <b>10</b> displays the cancel of the payment by a screen shown in <figref idref="DRAWINGS">FIG. 26D</figref> (Step <b>1250</b>), thereby finishing the process.</p>
<p id="p-0183" num="0182">Returning to <figref idref="DRAWINGS">FIG. 20</figref>, the user's terminal <b>20</b> subtracts the paying amount from the balance of the electronic money so as to update the balance, and then records the new balance (Step <b>126</b>). The user's terminal <b>20</b> transmits a payment confirming signal to the register terminal (Step <b>128</b>). The register terminal <b>10</b> transmits the payment conforming signal to the synchro server <b>30</b> (Step <b>130</b>) and also transmits a bill to the user's terminal <b>20</b> (Step <b>134</b>), thereby finishing the process. When receiving the payment confirming signal from the register terminal <b>10</b>, the synchro server <b>30</b> updates the balance of the electronic money stored in the deposit database <b>56</b> (Step <b>132</b>), thereby finishing the process. The user's terminal <b>20</b> receives the bill from the register terminal <b>10</b>, and displays the bill by a screen shown in <figref idref="DRAWINGS">FIG. 25F</figref> (Step <b>136</b>).</p>
<p id="p-0184" num="0183">In the above payment process, the term of validity is checked when the user's terminal <b>20</b> uses the electronic money, and therefore the user cannot use the electronic money in a case where the term of validity has expired. It is preferable that the user is notified that the term of validity has expired before the user uses the electronic money. The user's terminal <b>20</b> may be configured so that an alarm indicating the term of validity has expired is displayed on the display when the term of validity of the electronic money has expired. In this way, the user can update the electronic money before the use of the electronic money. Moreover, also in a case where the electronic money is short, a similar alarm may be displayed by the user's terminal <b>20</b>. In this way, the user can withdraw more electronic money before the user uses the electronic money.</p>
<p id="p-0185" num="0184">In the above payment process, the user's terminal <b>20</b> transmits the payment confirming signal after updating the balance of electronic money. At the time at which the payment confirming signal is further sent from the register terminal <b>10</b> to the deposit database <b>56</b>, the synchro server <b>30</b> updates the balance of electronic money in the deposit database <b>56</b>. However, in a case where the communication between the user's terminal <b>20</b> and the register terminal <b>10</b> is in a bad condition, the payment confirming signal cannot be set from the user's terminal <b>20</b> to the register terminal <b>10</b> after the user's terminal updated the balance of electronic money, so that the payment is likely to be cancelled.</p>
<p id="p-0186" num="0185">In such a case, there may arise an inconsistency in the balance of electronic money stored in the synchro server <b>30</b> with the balance of electronic money stored in the user's terminal <b>20</b>. Thus, before the user's terminal <b>20</b> updates the balance of electronic money, the user's terminal <b>20</b> transmits the payment confirming signal to the register terminal <b>10</b>, and the register terminal <b>10</b> sends back a confirming signal that confirms that the payment confirming signal from the user's terminal <b>20</b> was received. The user's terminal <b>20</b> updates the balance of electronic money in a case where the user's terminal <b>20</b> received the confirming signal from the register terminal <b>10</b>. In this way, it is possible to prevent disagreement of the balance of electronic money between the user's terminal <b>20</b> and the synchro server <b>30</b>.</p>
<p id="p-0187" num="0186">In the electronic money payment system of the present embodiment, it is possible to prevent unfair use by checking the balance and reference number of the electronic money stored in one of the user's terminal <b>20</b> and the synchro server <b>30</b> with those stored in the other when the deposit of electronic money, the balance inquiry and the payment are performed. Other than the above, a mechanism is provided for checking inconsistency of electronic money by an automated check of the electronic money by the synchro server <b>30</b>.</p>
<p id="p-0188" num="0187">The synchro server <b>30</b> may search the deposit database <b>56</b> so as to extract electronic money for which the term of validity has expired and may check up the payment records, the log of uses, records of deposits and withdrawals in the user's account database <b>70</b> so as to check the existence of any inconsistency. Moreover, the synchro server <b>30</b> may communicate with the user's terminal <b>20</b> that deposited electronic money if necessary, to inquire the balance recorded in that user's terminal <b>20</b>, so that the balance in that user's terminal <b>20</b> is compared with the balance recorded in the deposit database <b>56</b>.</p>
<p id="p-0189" num="0188">In the description of the above payment process, after receiving the payment confirming signal from the register terminal <b>10</b>, the synchro server <b>30</b> may extract a part of attribute information related to the user of the user's terminal <b>20</b> that made this payment from the user database <b>60</b> and transmit the extracted information to the register terminal <b>10</b>. The user's attribute information transmitted to the register terminal <b>10</b> is information regarding attributes of the user, such as sex or age. It is preferable that this attribute information not contain personal information such as name, address and a credit card number.</p>
<p id="p-0190" num="0189">The register terminal <b>10</b> may acquire the information related to the user who made this payment and accumulate the detail of the goods purchased and the user information as a purchase history in a database of the retail store. Therefore, the retail store can extract the purchase action of the user such as an age bracket of user's who purchase a certain item, from the purchase history information accumulated in the database, so that the retail store can use the extracted information for marketing.</p>
<p id="p-0191" num="0190">Although the synchro server <b>30</b> receives the spent amount of electronic money from the register terminal <b>10</b>, the synchro server <b>30</b> may receive detailed information regarding the purchased item such as the name or unit price together with the spent amount and record the received information in the user database <b>60</b> as the user's purchase history. In this manner, the user's terminal <b>20</b> can inquire the user's purchase history to the synchro server <b>30</b> and receive the purchase history from the synchro server <b>30</b>.</p>
<p id="p-0192" num="0191">The functions and operations of the payment process of the electronic money payment system of the present embodiment are described above. If any trouble of communication occurs in the transactions of the aforementioned payment, for example, the stop of communication, the information involved with all the processes, temporal data and the like are initialized, thereby finishing the process.</p>
<p id="p-0193" num="0192">In the above payment process of <figref idref="DRAWINGS">FIG. 20</figref>, the process of checking electronic money in Step <b>110</b>, the confirming process of the spent amount limit in Step <b>118</b> and the process of updating the balance of electronic money in Step <b>132</b>, that are performed by the synchro server <b>30</b>, are handled by the payment processing unit <b>82</b>, the operation unit <b>81</b> and the database retrieving unit <b>88</b> of the synchro server <b>30</b>.</p>
<p id="p-0194" num="0193">The communication such as the receipt in Step <b>106</b> of the user's terminal number, the reference number and the balance from the register terminal <b>10</b>, the transmission in Step <b>112</b> of the check-OK signal to the register terminal <b>10</b>, the receipt in Step <b>116</b> of the spent amount from the register terminal <b>10</b>, the transmission in Step <b>120</b> of the available signal to the register terminal <b>10</b> and the receipt in Step <b>130</b> of the payment confirming signal from the register terminal <b>10</b>, that are data communication performed by the synchro server <b>30</b> with the register terminal <b>10</b>, are handled by the first communication unit <b>84</b> of the synchro server <b>30</b>.</p>
<p id="p-0195" num="0194">In the electronic payment system of the present embodiment, both the user's terminal <b>20</b> and the synchro server <b>30</b> store the balance and reference number and check up the balances and reference numbers with each other. Therefore, it is possible to detect unfair use, thereby realizing the electronic payment process using electronic money with high reliability. Moreover, the mobile phone and the hand-held device that can perform communication by being connected to the mobile phone or the like have portability that the user can carry them everywhere and convenience that the communication can be performed by using wireless telecommunication everywhere. Thus, the electronic payment system of the present embodiment enables safe and convenient electronic payment with high reliability.</p>
<heading id="h-0007" level="1">Embodiment 2</heading>
<p id="p-0196" num="0195">The electronic payment system according to a second embodiment of the present invention is described. In the electronic payment system according to the present embodiment, the payment on the purchased goods can be made by electronic money when the user buys the goods from a vending machine.</p>
<p id="p-0197" num="0196">The electronic payment system of the present embodiment has the same structure as that in the first embodiment except that a vending machine is used as the claiming or demanding terminal in place of the register terminal <b>10</b> and therefore a detailed description is omitted here.</p>
<p id="p-0198" num="0197"><figref idref="DRAWINGS">FIG. 27</figref> shows an appearance of a vending machine <b>16</b> of the present embodiment. The vending machine <b>16</b> has buttons <b>900</b> for allowing selection of items, a short-distance communication unit <b>902</b>, a coin insertion part <b>904</b> through which a coin can be inserted, and a discharge opening <b>906</b> for the purchased item. The short-distance communication unit <b>902</b> performs communication by infrared communication or short-distance wireless communication with a short-distance communication unit of the user's terminal <b>20</b>. The vending machine <b>16</b> can communicate with the synchro server <b>30</b> via the communication line <b>18</b>. As the communication method from the vending machine <b>16</b> to the synchro server <b>30</b>, any communication technique of communication via a telephone line, communication via a private line and wireless telecommunication may be used.</p>
<p id="p-0199" num="0198">The electronic money payment process of the present embodiment is the same as the payment process of the first embodiment except that the purchased item is discharged through the discharge opening <b>906</b>, and therefore the detailed description thereof is omitted here.</p>
<heading id="h-0008" level="1">Embodiment 3</heading>
<p id="p-0200" num="0199">The electronic payment system according to a third embodiment of the present invention is described. In the electronic payment system according to the present embodiment, the user can pay for a parking fee by electronic money at a gate when entering a parking lot or exiting from the parking lot.</p>
<p id="p-0201" num="0200">The electronic payment system of the present embodiment has the same structure as that in the first embodiment except that a parking fee collecting machine is used as an exemplary claiming or demanding terminal and therefore a detailed description of the same structure is omitted here.</p>
<p id="p-0202" num="0201"><figref idref="DRAWINGS">FIG. 28</figref> shows an appearance of a parking fee collecting machine <b>22</b> of the present embodiment. The parking fee collecting machine <b>22</b> has a display <b>914</b> for displaying the parking fee, a short-distance communication unit <b>916</b> for communicating with the short-distance communication unit of the user's terminal <b>20</b>, a gate <b>910</b>, and a crossing gate <b>912</b>. In addition, the parking fee collecting machine <b>22</b> includes a part operable to communicate with the synchro server <b>30</b> via a telephone line, a private line or wireless communication.</p>
<p id="p-0203" num="0202">The electronic money payment process of the present embodiment is the same as the payment process of the first embodiment except that the gate opens after the payment by the electronic money has been finished, and therefore a detailed description is omitted here.</p>
<heading id="h-0009" level="1">Embodiment 4</heading>
<p id="p-0204" num="0203">The electronic payment system according to a fourth embodiment of the present invention is described. In the electronic payment system of the present embodiment, the user can pay for railway fare by electronic money at a ticket gate.</p>
<p id="p-0205" num="0204">In the electronic payment system of the present embodiment, a ticket inspector is used as an example of the claiming terminal. <figref idref="DRAWINGS">FIGS. 29A-29B</figref> show an appearance of the ticket inspector <b>12</b>. The ticket inspector <b>12</b> includes a wireless communication port <b>920</b> for communicating with a short-distance communication unit of the user's terminal <b>20</b> of the user, an on-receiving lamp <b>922</b> for indicating a status of the communication with the user's terminal <b>20</b>, a receipt-completion lamp <b>924</b>, the first sensor <b>926</b> for detecting that the user passes through the gate, the second sensor <b>928</b> and the gate <b>930</b>. It is assumed that the user passes through the ticket gate at Station A, gets on a train, gets off the train at Station B, passes through the ticket gate at station B and pays for the fare by electronic money.</p>
<p id="p-0206" num="0205"><figref idref="DRAWINGS">FIG. 30</figref> is a flowchart of the electronic money payment process at the ticket gate of the boarding station. The user pushes an electronic money button of the user's terminal <b>20</b> at the ticket gate of the boarding station, thereby starting wireless communication between the wireless communication port <b>920</b> of the ticket inspector <b>12</b> and the user's terminal <b>20</b> (Step <b>300</b>). The user's terminal <b>20</b> transmits the balance of electronic money to the ticket inspector <b>12</b> (Step <b>302</b>). The ticket inspector <b>12</b> confirms that the balance received from the user's terminal <b>20</b> is larger than the minimum fare (Step <b>306</b>). In a case where the balance does not cover the minimum fare, a signal indicating the shortage of the balance is transmitted to the user's terminal <b>20</b>.</p>
<p id="p-0207" num="0206">A screen shown in <figref idref="DRAWINGS">FIG. 32B</figref> is then displayed on the user's terminal <b>20</b> but the gate does not open. In a case where the balance covers the minimum fare, the ticket inspector <b>12</b> transmits information regarding the boarding station to the user's terminal <b>20</b> (Step <b>308</b>). The user's terminal <b>20</b> then displays the boarding station information by a screen shown in <figref idref="DRAWINGS">FIG. 32A</figref>. A train icon <b>932</b> on the display screen indicates that the user is on board the train and the payment has not been finished yet. The user's terminal <b>20</b> sends back the receipt-completion signal to the ticket inspector <b>12</b> after displaying the boarding station information (Step <b>312</b>). The ticket inspector <b>12</b> turns on the receipt-completion lamp <b>924</b> (Step <b>314</b>) and opens the gate (Step <b>316</b>).</p>
<p id="p-0208" num="0207"><figref idref="DRAWINGS">FIG. 31</figref> is a flowchart of the electronic money payment process at the ticket gate of the exit station. The user pushes the electronic money button on the user's terminal <b>20</b>, thereby staring communication with the wireless communication port <b>920</b> of the ticket inspector <b>12</b> (Step <b>320</b>). The user's terminal <b>20</b> transmits the balance and reference number of the electronic money and the boarding station information to the ticket inspector <b>12</b> (Step <b>322</b>). The ticket inspector <b>12</b> turns on the on-receiving lamp <b>922</b> (Step <b>324</b>). The ticket inspector <b>12</b> transmits the user's terminal number, the reference number and the balance received from the user's terminal <b>20</b> to the synchro server <b>30</b> (Step <b>326</b>). The synchro server <b>30</b> checks the balance of the electronic money (Step <b>328</b>).</p>
<p id="p-0209" num="0208">The process of checking the electronic money in Step <b>328</b> is the same as the process of Step <b>110</b> of checking the electronic money in the first embodiment and therefore a detailed description thereof is omitted here. In a case where the check of the electronic money was not successful, a screen shown in <figref idref="DRAWINGS">FIG. 32E</figref> is displayed on the user's terminal and the payment by electronic money cannot be done, so that the gate of the ticket inspector <b>12</b> does not open. In a case where the check of the electronic money was successful, the synchro server <b>30</b> transmits the check-OK signal to the ticket inspector <b>12</b> (Step <b>330</b>) and confirms the spent amount and the balance (Step <b>332</b>).</p>
<p id="p-0210" num="0209">The ticket inspector <b>12</b> calculates the fare from the boarding station to the exit station by using the information regarding the boarding station received from the user's terminal <b>20</b>, thereby calculating the spent amount. The process to check the spent amount and balance in Step <b>322</b> is the same as the process in Step <b>114</b> in the first embodiment shown in <figref idref="DRAWINGS">FIG. 20</figref>. In a case of shortage of the balance, a screen shown in <figref idref="DRAWINGS">FIG. 32F</figref> is displayed on the user's terminal <b>20</b>, the payment by electronic money cannot be done, and the gate of the ticket inspector <b>12</b> does not open.</p>
<p id="p-0211" num="0210">After the confirmation of the spent amount and balance, account information is sent to the user's terminal <b>20</b> (Step <b>334</b>). The user's terminal <b>20</b> displays the account information received from the ticket inspector <b>12</b> by a screen shown in <figref idref="DRAWINGS">FIG. 32D</figref> (Step <b>336</b>). On the display, the names of the boarding station and exit station, the fare from the boarding station to the exit station, and the balance of electronic money in a case of paying for the fare by electronic money are displayed.</p>
<p id="p-0212" num="0211">The user's terminal <b>20</b> updates the balance of electronic money (Step <b>337</b>) after displaying the account information, and then transmits an account-information receipt signal to the ticket inspector <b>12</b> (Step <b>338</b>). The ticket inspector <b>12</b> sends the spent amount to the synchro server <b>30</b> (Step <b>342</b>) after receiving the account-information receipt signal from the user's terminal <b>20</b>, and then opens the gate (Step <b>344</b>). The synchro server <b>30</b> updates the balance of electronic money stored in the deposit database <b>56</b> (Step <b>346</b>) when receiving the spent amount from the ticket inspector <b>12</b>.</p>
<heading id="h-0010" level="1">Embodiment 5</heading>
<p id="p-0213" num="0212">The electronic payment system according to a fifth embodiment of the present invention is described. In the electronic payment system of the present embodiment, the user can pay for toll of a toll road, such as a speedway, by electronic money.</p>
<p id="p-0214" num="0213">In the electronic payment system of the present embodiment, a communication adapter to which a mobile phone is attached, as an example of the claiming terminal, is used. <figref idref="DRAWINGS">FIG. 33</figref> shows an appearance of the communication adapter <b>14</b>. The communication adapter <b>14</b> includes an antenna <b>950</b> for detecting an electric wave signal, a speaker <b>952</b>, a hand-held device cradle <b>954</b>, a toll-booth signal detection lamp <b>956</b> and a pass-OK lamp <b>958</b>. The user provides the communication adapter <b>14</b> on a dashboard of a car and the like and places the user's terminal <b>20</b> on the cradle <b>954</b> to be connected to the cradle <b>954</b>.</p>
<p id="p-0215" num="0214"><figref idref="DRAWINGS">FIG. 34</figref> shows an appearance of a charging system for the toll road. The toll-road charging system includes a communication tower <b>960</b> and an exclusive tollgate <b>962</b> at a toll booth. The communication tower <b>960</b> is placed before the toll booth so as to transmit the electric wave signal. The exclusive tollgate is exclusive to the payment by electronic money, and has a sensor <b>964</b> and a monitor camera <b>966</b>.</p>
<p id="p-0216" num="0215">When the car the user is on board approaches the communication tower <b>960</b> and reaches a point several hundred meters away from the communication tower <b>960</b>, the communication adapter <b>14</b> detects the electric wave signal transmitted from the communication tower <b>960</b>, by means of the antenna <b>950</b>, and then automatically starts communication by the user's terminal <b>20</b>, so as to transmit the user's terminal number and the reference number and balance of the electronic money from the user's terminal <b>20</b> to the communication tower <b>960</b>. The electronic-money checking process performed by the communication tower <b>960</b> is the same as the electronic-money checking process by the register terminal <b>10</b> in the first embodiment, and therefore a detailed description thereof is omitted here.</p>
<p id="p-0217" num="0216">While the communication tower <b>960</b> is checking the electronic money, the tollbooth-signal detection lamp <b>956</b> of the communication adapter turns on and off, thereby notifying the user that the car approaches the toll booth and the electronic money payment process is being performed. This notification to the user may be made by an audio message by means of the speaker <b>952</b>.</p>
<p id="p-0218" num="0217">If the check of the electronic money was successful, the communication tower <b>960</b> transmits the check-OK signal to the communication adapter <b>14</b> or the user's terminal <b>20</b>. The communication adapter <b>14</b> then turns the pass-OK lamp <b>958</b> on, thereby notifying the user that the car has been permitted to pass through the exclusive tollgate <b>962</b> for the payment by electronic money at the toll booth. Moreover, the notification to the user may be simultaneously performed by an audio message by means of the speaker <b>952</b>, which is one example of a sound notification unit. In this way, the user can go into the exclusive toll bar <b>962</b> without interrupting the drive.</p>
<p id="p-0219" num="0218">In a case where the check of the electronic money was not successful, the communication tower <b>960</b> transmits the check-failure signal to the communication adapter <b>14</b> or the user's terminal <b>20</b>. The communication adapter <b>14</b> switches the state of the tollbooth signal detection lamp <b>956</b> so that the lamp <b>956</b> is lighted, thereby notifying the user that the car cannot pass through the exclusive tollgate <b>962</b>. Moreover, the notification to the user may be simultaneously made by an audio message by means of the speaker <b>952</b>. In this way, the user gives up the payment by electronic money and can go into a general tollgate at the toll booth without interrupting the drive.</p>
<p id="p-0220" num="0219">The communication tower <b>960</b> may compare the balance of the electronic money in the user's terminal <b>20</b> with the toll of the toll road so as to check whether or not the balance can cover the toll, and transmits a signal notifying the user of shortage of the balance to the user's terminal <b>20</b> in a case of shortage of the balance. In a case where the user's terminal <b>20</b> received the signal of shortage of the balance, the communication adapter <b>14</b> may switch the state of the tollbooth signal detection lamp <b>956</b> so that the lamp <b>956</b> is lighted, and notify the user by the audio message via the speaker <b>952</b> that the car cannot pass through the exclusive tollgate <b>962</b>. In this way, the user can go into the general tollgate without interrupting the drive.</p>
<p id="p-0221" num="0220">When the user's car enters the exclusive tollgate <b>962</b>, the sensor <b>964</b> provided at the entrance of the exclusive tollgate <b>962</b> detects a signal from the communication adapter <b>14</b> and receives the user's terminal number of the user's terminal <b>20</b> from the communication adapter <b>14</b>. The sensor <b>964</b> determines whether or not the communication adapter <b>14</b> of the user received permission to pass based on the user's terminal number, and allows the car to pass in a case where the communication adapter <b>14</b> received the passing permission.</p>
<p id="p-0222" num="0221">The communication tower <b>960</b> may communicate with the exclusive tollgate <b>962</b> by wireless communication or by connection by a private line, a telephone line or the like. Thus, the exclusive tollgate <b>962</b> may receive the user's terminal number of the user's terminal <b>20</b> of the communication adapter <b>14</b> that has been permitted to pass by the communication tower <b>960</b> and check the received user's terminal number with the user's terminal number that the sensor <b>964</b> received from the communication adapter <b>14</b>.</p>
<p id="p-0223" num="0222">In a case where there is no communication means between the communication tower <b>960</b> and the exclusive tollgate <b>962</b>, the communication tower <b>960</b> may transmit the user's terminal number of the communication adapter <b>14</b> that has been permitted to pass, to the synchro server <b>30</b> so as to make the synchro server <b>30</b> store the transmitted user's terminal number. The exclusive tollgate <b>962</b> may transmit to the synchro server <b>30</b> the user's terminal number the sensor <b>964</b> received from the communication adapter <b>14</b> so as to make the synchro server <b>30</b> check the transmitted user's terminal number with the user's terminal number that the synchro server <b>30</b> received from the communication tower <b>960</b>.</p>
<p id="p-0224" num="0223">When the car has passed through the gate, payment information is transmitted to the user's terminal <b>20</b> and the synchro server <b>30</b> and the balance of the electronic money stored in the deposit database <b>56</b>, thereby finishing the communication.</p>
<p id="p-0225" num="0224">In a case where a car with no permission to pass or a car that includes no electronic money payment apparatus has passed through the exclusive tollgate <b>962</b>, the sensor <b>964</b> detects the passing with no permission and the monitor camera <b>966</b> takes a picture of a car number or the drivers face, so that the penalty or toll can be demanded later.</p>
<p id="p-0226" num="0225">In the above example, the toll is constant. However, in a case where the toll is not constant but increases with the distance of the toll road on which the user drove the car, the user has to start the payment by electronic money at the tollgate on the start point of the toll road, to store the start point in the user's terminal <b>20</b>, and to pay the fee in accordance with the distance by electronic money at the tollgate on an exit point of the toll road. In this case, a payment process that is similar to that in the case of the ticket inspector in the fourth embodiment can be used.</p>
<p id="p-0227" num="0226">In the above example, the user's terminal <b>20</b> is attached to the communication adapter <b>14</b>. However, the user's terminal <b>20</b> may have a part or all of the functions of the communication adapter <b>14</b>. The user's terminal <b>20</b> may include a detection unit that detects the electric wave signal transmitted from the communication tower <b>960</b>, and may start to communicate with the communication tower <b>960</b> automatically in a case where the detection unit detected the electric wave signal from the communication tower <b>960</b>, so as to transmit the user's terminal number and the reference number and balance of the electronic money to the communication tower <b>960</b>.</p>
<p id="p-0228" num="0227">In the above example, the communication tower <b>960</b> checks the electronic money and the balance and gives the user's car the permission to pass; the exclusive tollgate <b>962</b> of the toll booth allows the user's car to which the permission has been given to pass; and the synchro server <b>30</b> updates the balance of the electronic money of the user who passed through the exclusive tollgate <b>962</b>. However, the embodiment of the charging system is not limited thereto. The exclusive tollgate <b>962</b> of the toll booth may perform a part of the functions of the communication tower <b>960</b>. For example, the exclusive tollgate <b>962</b> may communicate with the user's terminal <b>20</b> so as to check the electronic money and confirm the balance.</p>
<p id="p-0229" num="0228">In the fourth and fifth embodiments, the payment cannot be cancelled when the user confirms the paying amount, unlike the first embodiment. Instead, in the fourth and fifth embodiments, the accounting information is displayed on the user's terminal <b>20</b> and, immediately after this, the balance of electronic money is updated. In particular, in a case where the car passes through the expressway toll booth, when the payment is cancelled, the car cannot pass through the tollgate of the toll booth, causing some troubles. Thus, the cancel of the payment by the user is not preferable. In such a case, only the confirming process of the account information is performed and thereafter the payment process has to be made to progress.</p>
<p id="p-0230" num="0229">However, it is necessary to enable the user to contact the management center when the toll is wrong, so that the management center can deal with this fact later. Thus, it is desirable that the synchro server <b>30</b> record the logs of the user of electronic money in detail. Although only the information indicating the spent amount of the electronic money is sent from the ticket inspector <b>12</b> or the communication adapter <b>14</b> to the synchro server <b>30</b> in the flowchart of the payment by electronic money, information such as the date and time at which the user used electronic money, the name of the station, the name of the tollbooth may be sent in addition to the information indicating the spent amount so that the synchro server <b>30</b> records the history of the use of electronic money for the user. In this way, when the user contacts the management center with a complaint later, the management center can check the use history.</p>
<heading id="h-0011" level="1">Embodiment 6</heading>
<p id="p-0231" num="0230">The synchro server <b>30</b> as an example of the payment apparatus in the electronic payment system of the first, second, third, fourth and fifth embodiments may be implemented by a general computer. <figref idref="DRAWINGS">FIG. 35</figref> is a block diagram showing an exemplary hardware configuration of the general computer <b>600</b>. In the computer <b>600</b> shown in <figref idref="DRAWINGS">FIG. 35</figref>, a CPU <b>602</b> operates based on at least one program stored in ROM <b>604</b> and RAM <b>606</b>. Via an input device <b>608</b>, an administrator of the synchro server <b>30</b> can input data and commands. A hard disk drive <b>610</b> as an example of a storage device stores setting information and the program for the operation of the CPU <b>602</b>.</p>
<p id="p-0232" num="0231">A floppy disk drive <b>614</b> reads data or program from a floppy disk <b>624</b> to provide the read data or program to the CPU <b>602</b>. A CD-ROM drive <b>616</b> reads data or program from a CD-ROM <b>626</b> to provide the read data or program to the CPU <b>602</b>. The first communication interface <b>618</b> performs data transmission/receiving while being connected to the communication line <b>18</b>. The second communication interface <b>620</b> performs data transmission/receiving while being connected to the communication line <b>38</b>.</p>
<p id="p-0233" num="0232">A database interface <b>612</b> can be connected to various types of database <b>622</b> to perform data transmission and data receiving therewith. Moreover, the synchro server <b>30</b> has an interface for connecting the synchro server <b>30</b> to a display <b>628</b>. The administrator can monitor the operation status of the synchro server <b>30</b> and confirm the setting information of the synchro server <b>30</b> by means of the display <b>628</b>.</p>
<p id="p-0234" num="0233">The software executed by the CPU <b>602</b> is provided to the user while being stored in a recording medium such as the floppy disk <b>624</b> or the CD-ROM <b>626</b>. The software stored in the recording medium may be compressed or not-compressed. The software is installed from the recording medium into the hard disk drive <b>610</b> and is then read onto the RAM <b>606</b>, so that the CPU <b>602</b> executes the software.</p>
<p id="p-0235" num="0234">The program provided while being stored in the recording medium, that is the program to be installed into the hard disk drive <b>610</b>, functionally includes a storing module, an operation module, a payment processing module, the first communication module, the second communication module, and a database retrieving module.</p>
<p id="p-0236" num="0235">The processes that are to be performed by the CPU <b>602</b> in accordance with instructions to the computer <b>600</b> from the storing module, the operation module, the payment processing module, the first communication module, the second communication module and the database retrieving module are the same as the functions and operations of the memory unit <b>80</b>, the operation unit <b>81</b>, the payment processing unit <b>82</b>, the first communication unit <b>84</b>, the second communication unit <b>86</b> and the database retrieving unit <b>88</b> in the synchro server <b>30</b> in the first, second, third, fourth and fifth embodiments, respectively, and therefore a detailed description thereof is omitted here.</p>
<p id="p-0237" num="0236">A part or all of the functions and operations of the synchro server <b>30</b> as an example of the payment apparatus according to all the embodiment described in the present application can be stored in the floppy disk <b>624</b> or the CD-ROM <b>626</b> as an example of the recording medium shown in <figref idref="DRAWINGS">FIG. 35</figref>. Moreover, in a case where a part of the operations of the register terminal <b>10</b> described in the above embodiments is performed by the synchro server <b>30</b> in place of the register terminal <b>10</b>, the part of the operations of the register terminal <b>10</b> can also be stored in the floppy disk <b>624</b> or the D-ROM <b>626</b>.</p>
<p id="p-0238" num="0237">These programs may be read directly into the RAM from the recording medium so as to be executed, or read into the RAM after being installed into the hard disk drive from the recording medium, so as to be executed. Moreover, the above-mentioned programs may be stored in a single recording medium or a plurality of recording media. Furthermore, the programs may be stored while being encoded.</p>
<p id="p-0239" num="0238">As the recording medium, other than the floppy disk and the CD-ROM, an optical recording medium such as a DVD or a PD, a magneto-optical recording medium such as an MD, a tape-like medium, a magnetic recording medium, or a semiconductor memory such as an IC card or a miniature card can be used. Moreover, a storage device such as a hard disk or a RAM provided in a server system connected to an exclusive communication network or the Internet may be used as the recording medium, so that the program can be provided to the synchro server <b>30</b> through a communication network. Such a recording medium is used only for manufacturing the synchro server <b>30</b> and it is therefore apparent that the manufacture, sale and the like, of such a recording medium on business constitute infringement of a right based on the present application.</p>
<p id="p-0240" num="0239">As described above, according to the electronic payment system of the present invention, a user can store electronic money in a hand-held terminal and can make payments by electronic money with safety and convenience in various situations, for example, at the retail store, at a place where a vending machine is provided, at the parking fee collecting machine, at the railway ticket inspector, or at the toll booth of a toll road.</p>
<p id="p-0241" num="0240">The electronic payment system of the present invention provides the user with the following advantages. The user can make payment by electronic money anywhere and anytime the user buys something by carrying with the user a mobile phone, that is a communication device excellent in portability. Thus, it is unnecessary to carry cash, a credit card, a cash-card, an IC-money card or the like. Moreover, the user can confirm the status of direct debit or available balance of the user's account, shopping history or the like by using a data packet communication function of the mobile phone.</p>
<p id="p-0242" num="0241">In addition, the electronic payment system provides the retail store with the following advantage. The burden on the clerk who operates the register can be reduced because the payment can be made safely and conveniently by electronic money stored in the mobile phone without inquiry of the card number to the credit card company, like in the case of a credit-card payment. Moreover, no dedicated reader for the credit card or an IC card that stores electronic money is required, thus reducing the cost of placing such a reader.</p>
<p id="p-0243" num="0242">Furthermore, the electronic payment system of the present invention provides the credit card company with the following advantage. The electronic payment system using the mobile phone with high security can ensure that electronic money is withdrawn from the credit card account, thus preventing unfair use of the withdrawn electronic money. Moreover, the use of electronic money can make issue and management of the credit cart unnecessary, so that the cost can be reduced.</p>
<p id="p-0244" num="0243">As is apparent from the above, according to the present invention, payment on the dealings of goods can be made safely and conveniently by using electronic money.</p>
<p id="p-0245" num="0244">Although the present invention has been described by way of exemplary embodiments, it should be understood that those skilled in the art might make many changes and substitutions without departing from the spirit and the scope of the present invention which is defined only by the appended claims.</p>
<?DETDESC description="Detailed Description" end="tail"?>
</description>
<us-claim-statement>What is claimed is:</us-claim-statement>
<claims id="claims">
<claim id="CLM-00001" num="00001">
<claim-text>1. A communication terminal that can be attached to a vehicle and which communicates with a payment apparatus and a charging system for a toll road to make payment on a transaction using electronic money, the payment apparatus storing a reference number of the electronic money for making settlement on the transaction by electronic money, the charging system demanding the payment on the transaction, the communication terminal comprising:
<claim-text>a memory unit which stores a check reference number of the electronic money;</claim-text>
<claim-text>a first communication unit which communicates with said payment apparatus and receives from said payment apparatus an update rule for updating said check reference number stored in said memory unit;</claim-text>
<claim-text>an operation unit which updates said check reference number stored in said memory unit in accordance with said update rule,</claim-text>
<claim-text>a detection unit which detects an electric wave signal transmitted from said charging system; and</claim-text>
<claim-text>a second communication unit which communicates with said charging system and, after being updated by said operation unit, sends said check reference number to said charging system.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00002" num="00002">
<claim-text>2. The communication terminal as claimed in <claim-ref idref="CLM-00001">claim 1</claim-ref>, further comprising a sound notification unit operable to generate a first sound for notifying a result of a validation of said electronic money, in a case where a result of said validation of said electronic money was received from said charging system.</claim-text>
</claim>
<claim id="CLM-00003" num="00003">
<claim-text>3. The communication terminal as claimed in <claim-ref idref="CLM-00002">claim 2</claim-ref>, wherein said payment apparatus sends a balance of said electronic money to said charging system, and said sound notification unit generates a second sound for notifying a shortage of said balance of said electronic money, in a case where the shortage of said balance was notified from said charging system.</claim-text>
</claim>
<claim id="CLM-00004" num="00004">
<claim-text>4. A communication terminal that can be attached to a vehicle and which communicates with a payment apparatus and a charging system for a toll road to make a payment on a transaction using electronic money, the payment apparatus storing a balance of electronic money for making settlement on the transaction using the electronic money, the charging system demanding the payment on the transaction, the communication terminal comprising:
<claim-text>a first communication unit which communicates with said payment apparatus and receives, from said payment apparatus, said balance of said electronic money stored in said payment apparatus;</claim-text>
<claim-text>a memory unit which stores said balance of said electronic money received by said first communication unit;</claim-text>
<claim-text>a detection unit which detects an electric wave signal transmitted from said charging system;</claim-text>
<claim-text>a second communication unit which communicates with said charging system and receives a payment amount of said electronic money from said charging system; and</claim-text>
<claim-text>a processor which updates said balance of said electronic money stored in said memory unit based on said payment amount.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00005" num="00005">
<claim-text>5. A communication terminal as claimed in <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein said first communication unit receives from said payment apparatus said update rule for updating said check reference number in a case where a deposit-requested amount of said electronic money is sent to said payment apparatus.</claim-text>
</claim>
<claim id="CLM-00006" num="00006">
<claim-text>6. A communication terminal as claimed in <claim-ref idref="CLM-00005">claim 5</claim-ref>, wherein said update rule uniquely determines said check reference number based on an initial value and time information in such a manner that said check reference number is changed when at least one of said initial value and time information is changed.</claim-text>
</claim>
<claim id="CLM-00007" num="00007">
<claim-text>7. A communication terminal as claimed in <claim-ref idref="CLM-00006">claim 6</claim-ref>, wherein said time information is a time period that has passed after a time at which said update rule was received by said first communication unit.</claim-text>
</claim>
<claim id="CLM-00008" num="00008">
<claim-text>8. A communication terminal as claimed in <claim-ref idref="CLM-00007">claim 7</claim-ref>, wherein said initial value is an irrational number, and said update rule selects a number at a decimal place of said irrational number as said check reference number, said decimal place being determined based on said time information.</claim-text>
</claim>
<claim id="CLM-00009" num="00009">
<claim-text>9. A communication terminal as claimed in <claim-ref idref="CLM-00005">claim 5</claim-ref>, wherein said memory unit stores a number of times that transactions using said electronic money were performed, and said update rule uniquely determines said check reference number based on an initial value and said number of times that transactions were performed in such a manner that said check reference number is changed when at least one of said initial value and said number of times is changed.</claim-text>
</claim>
<claim id="CLM-00010" num="00010">
<claim-text>10. A communication terminal as claimed in <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein said memory unit stores a term of validity of said electronic money, and
<claim-text>in a case where said term of validity has expired, said first communication unit sends a change request for said update rule to said payment apparatus and receives a changed update rule from said payment apparatus, while said operation unit updates said term of validity stored in said memory unit.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00011" num="00011">
<claim-text>11. A communication terminal as claimed in <claim-ref idref="CLM-00004">claim 4</claim-ref>, wherein said first communication unit receives said balance of said electronic money from said payment apparatus in a case where a deposit-requested amount of said electronic money was sent to said payment apparatus.</claim-text>
</claim>
<claim id="CLM-00012" num="00012">
<claim-text>12. A communication terminal as claimed in <claim-ref idref="CLM-00011">claim 11</claim-ref>, wherein said second communication unit sends said balance stored in said memory unit to said payment apparatus for validating said balance, when sending said deposit-requested amount of said electronic money to said payment apparatus, and receives a new balance from said payment apparatus in a case where said validation of said balance was successful.</claim-text>
</claim>
<claim id="CLM-00013" num="00013">
<claim-text>13. A communication terminal as claimed in <claim-ref idref="CLM-00012">claim 12</claim-ref>, wherein said second communication unit sends said balance stored in said memory unit to said payment apparatus when a predetermined time has passed after a time at which said new balance was received from said payment apparatus, and receives a result of said validation of said balance.</claim-text>
</claim>
<claim id="CLM-00014" num="00014">
<claim-text>14. A communication terminal as claimed in <claim-ref idref="CLM-00012">claim 12</claim-ref>, wherein said memory unit stores a term of validity of said electronic money, and
<claim-text>said processor notifies a user of said payment apparatus that said electronic money is unavailable in a case where a time that has passed after a start time, at which said second communication unit received said new balance from said payment apparatus, has gone beyond said term of validity.</claim-text>
</claim-text>
</claim>
</claims>
</us-patent-grant>
