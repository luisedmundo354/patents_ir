<us-patent-grant lang="EN" dtd-version="v4.2 2006-08-23" file="US07298756-20071120.XML" status="PRODUCTION" id="us-patent-grant" country="US" date-produced="20071106" date-publ="20071120">
<us-bibliographic-data-grant>
<publication-reference>
<document-id>
<country>US</country>
<doc-number>07298756</doc-number>
<kind>B1</kind>
<date>20071120</date>
</document-id>
</publication-reference>
<application-reference appl-type="utility">
<document-id>
<country>US</country>
<doc-number>10403979</doc-number>
<date>20030331</date>
</document-id>
</application-reference>
<us-application-series-code>10</us-application-series-code>
<us-term-of-grant>
<us-term-extension>1075</us-term-extension>
</us-term-of-grant>
<classifications-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>H</section>
<class>04</class>
<subclass>B</subclass>
<main-group>7</main-group>
<subgroup>212</subgroup>
<symbol-position>F</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20071120</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
</classifications-ipcr>
<classification-national>
<country>US</country>
<main-classification>370422</main-classification>
<further-classification>370466</further-classification>
</classification-national>
<invention-title id="d0e53">System and method for programming cell packet headers</invention-title>
<references-cited>
<citation>
<patcit num="00001">
<document-id>
<country>US</country>
<doc-number>5838922</doc-number>
<kind>A</kind>
<name>Galand et al.</name>
<date>19981100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>709232</main-classification></classification-national>
</citation>
<citation>
<patcit num="00002">
<document-id>
<country>US</country>
<doc-number>5991297</doc-number>
<kind>A</kind>
<name>Palnati et al.</name>
<date>19991100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370389</main-classification></classification-national>
</citation>
<citation>
<patcit num="00003">
<document-id>
<country>US</country>
<doc-number>6621828</doc-number>
<kind>B1</kind>
<name>Field et al.</name>
<date>20030900</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370466</main-classification></classification-national>
</citation>
<citation>
<patcit num="00004">
<document-id>
<country>US</country>
<doc-number>6717956</doc-number>
<kind>B1</kind>
<name>Fan et al.</name>
<date>20040400</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370477</main-classification></classification-national>
</citation>
<citation>
<patcit num="00005">
<document-id>
<country>US</country>
<doc-number>6781992</doc-number>
<kind>B1</kind>
<name>Rana et al.</name>
<date>20040800</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370394</main-classification></classification-national>
</citation>
<citation>
<patcit num="00006">
<document-id>
<country>US</country>
<doc-number>7075990</doc-number>
<kind>B2</kind>
<name>Costa</name>
<date>20060700</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>37524024</main-classification></classification-national>
</citation>
<citation>
<patcit num="00007">
<document-id>
<country>US</country>
<doc-number>7079545</doc-number>
<kind>B1</kind>
<name>Yun et al.</name>
<date>20060700</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370412</main-classification></classification-national>
</citation>
<citation>
<patcit num="00008">
<document-id>
<country>US</country>
<doc-number>2002/0118692</doc-number>
<kind>A1</kind>
<name>Oberman et al.</name>
<date>20020800</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370419</main-classification></classification-national>
</citation>
<citation>
<patcit num="00009">
<document-id>
<country>US</country>
<doc-number>2003/0026206</doc-number>
<kind>A1</kind>
<name>Mullendore et al.</name>
<date>20030200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370230</main-classification></classification-national>
</citation>
<citation>
<patcit num="00010">
<document-id>
<country>US</country>
<doc-number>2003/0043847</doc-number>
<kind>A1</kind>
<name>Haddad</name>
<date>20030300</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370473</main-classification></classification-national>
</citation>
</references-cited>
<number-of-claims>8</number-of-claims>
<us-exemplary-claim>1</us-exemplary-claim>
<us-field-of-classification-search>
<classification-national>
<country>US</country>
<main-classification>370465</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>370466</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>370473</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>370474</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>370389</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>370413</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>370419</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>370429</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>370421-423</main-classification>
<additional-info>unstructured</additional-info>
</classification-national>
</us-field-of-classification-search>
<figures>
<number-of-drawing-sheets>23</number-of-drawing-sheets>
<number-of-figures>26</number-of-figures>
</figures>
<us-related-documents>
<continuation-in-part>
<relation>
<parent-doc>
<document-id>
<country>US</country>
<doc-number>10373139</doc-number>
<kind>00</kind>
<date>20030224</date>
</document-id>
<parent-status>PENDING</parent-status>
</parent-doc>
<child-doc>
<document-id>
<country>US</country>
<doc-number>10403979</doc-number>
</document-id>
</child-doc>
</relation>
</continuation-in-part>
<continuation-in-part>
<relation>
<parent-doc>
<document-id>
<country>US</country>
<doc-number>10035835</doc-number>
<kind>00</kind>
<date>20011224</date>
</document-id>
<parent-grant-document>
<document-id>
<country>US</country>
<doc-number>7020131</doc-number>
<kind>A </kind>
</document-id>
</parent-grant-document>
</parent-doc>
<child-doc>
<document-id>
<country>US</country>
<doc-number>10373139</doc-number>
</document-id>
</child-doc>
</relation>
</continuation-in-part>
<continuation-in-part>
<relation>
<parent-doc>
<document-id>
<country>US</country>
<doc-number>10029581</doc-number>
<kind>00</kind>
<date>20011220</date>
</document-id>
<parent-status>PENDING</parent-status>
</parent-doc>
<child-doc>
<document-id>
<country>US</country>
<doc-number>10035835</doc-number>
</document-id>
</child-doc>
</relation>
</continuation-in-part>
<continuation-in-part>
<relation>
<parent-doc>
<document-id>
<country>US</country>
<doc-number>10022673</doc-number>
<kind>00</kind>
<date>20011217</date>
</document-id>
<parent-grant-document>
<document-id>
<country>US</country>
<doc-number>7079545</doc-number>
<kind>A </kind>
</document-id>
</parent-grant-document>
</parent-doc>
<child-doc>
<document-id>
<country>US</country>
<doc-number>10029581</doc-number>
</document-id>
</child-doc>
</relation>
</continuation-in-part>
<continuation-in-part>
<relation>
<parent-doc>
<document-id>
<country>US</country>
<doc-number>10023266</doc-number>
<kind>00</kind>
<date>20011214</date>
</document-id>
<parent-status>ABANDONED</parent-status>
</parent-doc>
<child-doc>
<document-id>
<country>US</country>
<doc-number>10022673</doc-number>
</document-id>
</child-doc>
</relation>
</continuation-in-part>
</us-related-documents>
<parties>
<applicants>
<applicant sequence="001" app-type="applicant-inventor" designation="us-only">
<addressbook>
<last-name>Miller</last-name>
<first-name>Kirk Alvin</first-name>
<address>
<city>San Diego</city>
<state>CA</state>
<country>US</country>
</address>
</addressbook>
<nationality>
<country>omitted</country>
</nationality>
<residence>
<country>US</country>
</residence>
</applicant>
<applicant sequence="002" app-type="applicant-inventor" designation="us-only">
<addressbook>
<last-name>Patel</last-name>
<first-name>Prayag Bhanubhai</first-name>
<address>
<city>San Diego</city>
<state>CA</state>
<country>US</country>
</address>
</addressbook>
<nationality>
<country>omitted</country>
</nationality>
<residence>
<country>US</country>
</residence>
</applicant>
<applicant sequence="003" app-type="applicant-inventor" designation="us-only">
<addressbook>
<last-name>Holzer</last-name>
<first-name>Peter John</first-name>
<address>
<city>Fallbrook</city>
<state>CA</state>
<country>US</country>
</address>
</addressbook>
<nationality>
<country>omitted</country>
</nationality>
<residence>
<country>US</country>
</residence>
</applicant>
<applicant sequence="004" app-type="applicant-inventor" designation="us-only">
<addressbook>
<last-name>Leung</last-name>
<first-name>John Calvin</first-name>
<address>
<city>San Diego</city>
<state>CA</state>
<country>US</country>
</address>
</addressbook>
<nationality>
<country>omitted</country>
</nationality>
<residence>
<country>US</country>
</residence>
</applicant>
<applicant sequence="005" app-type="applicant-inventor" designation="us-only">
<addressbook>
<last-name>Bendak</last-name>
<first-name>George Beshara</first-name>
<address>
<city>San Diego</city>
<state>CA</state>
<country>US</country>
</address>
</addressbook>
<nationality>
<country>omitted</country>
</nationality>
<residence>
<country>US</country>
</residence>
</applicant>
<applicant sequence="006" app-type="applicant-inventor" designation="us-only">
<addressbook>
<last-name>Lew</last-name>
<first-name>Jim</first-name>
<address>
<city>San Diego</city>
<state>CA</state>
<country>US</country>
</address>
</addressbook>
<nationality>
<country>omitted</country>
</nationality>
<residence>
<country>US</country>
</residence>
</applicant>
</applicants>
<agents>
<agent sequence="01" rep-type="attorney">
<addressbook>
<orgname>Law Office of Gerald Maliszewski</orgname>
<address>
<country>unknown</country>
</address>
</addressbook>
</agent>
<agent sequence="02" rep-type="attorney">
<addressbook>
<last-name>Maliszewski</last-name>
<first-name>Gerald</first-name>
<address>
<country>unknown</country>
</address>
</addressbook>
</agent>
</agents>
</parties>
<assignees>
<assignee>
<addressbook>
<orgname>Applied Micro Circuits Corporation</orgname>
<role>02</role>
<address>
<city>San Diego</city>
<state>CA</state>
<country>US</country>
</address>
</addressbook>
</assignee>
</assignees>
<examiners>
<primary-examiner>
<last-name>Yao</last-name>
<first-name>Kwang Bin</first-name>
<department>2616</department>
</primary-examiner>
<assistant-examiner>
<last-name>Lu</last-name>
<first-name>Xiao Qin (Vincent)</first-name>
</assistant-examiner>
</examiners>
</us-bibliographic-data-grant>
<abstract id="abstract">
<p id="p-0001" num="0000">A system and method are provided for controlling packet header information in a packet communications switch fabric. The method comprises: programming the cell header overhead (OH) field definitions; accepting a packet including a plurality of cells and corresponding cell headers, each cell header including a plurality of overhead fields; defining the cell header OH fields; and, transmitting the packet. Defining the cell header OH fields includes defining cell header OH field location, position, meaning, structure, and length. In other aspects, the method comprises redefining the cell header overhead fields, once they are accepted. For example, the OH field information can be modified, relocated, or an OH field can be added to the cell header. In yet other aspects, the OH field information can be extracted and/or reformatted.</p>
</abstract>
<drawings id="DRAWINGS">
<figure id="Fig-EMI-D00000" num="00000">
<img id="EMI-D00000" he="150.03mm" wi="234.61mm" file="US07298756-20071120-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00001" num="00001">
<img id="EMI-D00001" he="234.61mm" wi="150.71mm" orientation="landscape" file="US07298756-20071120-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00002" num="00002">
<img id="EMI-D00002" he="247.65mm" wi="171.53mm" orientation="landscape" file="US07298756-20071120-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00003" num="00003">
<img id="EMI-D00003" he="237.83mm" wi="160.70mm" orientation="landscape" file="US07298756-20071120-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00004" num="00004">
<img id="EMI-D00004" he="203.88mm" wi="186.77mm" file="US07298756-20071120-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00005" num="00005">
<img id="EMI-D00005" he="235.97mm" wi="163.91mm" orientation="landscape" file="US07298756-20071120-D00005.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00006" num="00006">
<img id="EMI-D00006" he="234.36mm" wi="182.63mm" file="US07298756-20071120-D00006.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00007" num="00007">
<img id="EMI-D00007" he="235.71mm" wi="182.29mm" orientation="landscape" file="US07298756-20071120-D00007.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00008" num="00008">
<img id="EMI-D00008" he="238.17mm" wi="190.25mm" orientation="landscape" file="US07298756-20071120-D00008.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00009" num="00009">
<img id="EMI-D00009" he="242.32mm" wi="159.60mm" orientation="landscape" file="US07298756-20071120-D00009.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00010" num="00010">
<img id="EMI-D00010" he="247.65mm" wi="170.60mm" orientation="landscape" file="US07298756-20071120-D00010.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00011" num="00011">
<img id="EMI-D00011" he="238.51mm" wi="179.15mm" orientation="landscape" file="US07298756-20071120-D00011.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00012" num="00012">
<img id="EMI-D00012" he="246.04mm" wi="173.48mm" orientation="landscape" file="US07298756-20071120-D00012.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00013" num="00013">
<img id="EMI-D00013" he="238.51mm" wi="114.47mm" orientation="landscape" file="US07298756-20071120-D00013.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00014" num="00014">
<img id="EMI-D00014" he="239.44mm" wi="141.73mm" orientation="landscape" file="US07298756-20071120-D00014.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00015" num="00015">
<img id="EMI-D00015" he="241.30mm" wi="182.96mm" orientation="landscape" file="US07298756-20071120-D00015.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00016" num="00016">
<img id="EMI-D00016" he="236.14mm" wi="161.97mm" orientation="landscape" file="US07298756-20071120-D00016.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00017" num="00017">
<img id="EMI-D00017" he="242.23mm" wi="158.92mm" orientation="landscape" file="US07298756-20071120-D00017.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00018" num="00018">
<img id="EMI-D00018" he="253.41mm" wi="192.45mm" orientation="landscape" file="US07298756-20071120-D00018.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00019" num="00019">
<img id="EMI-D00019" he="245.11mm" wi="175.68mm" orientation="landscape" file="US07298756-20071120-D00019.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00020" num="00020">
<img id="EMI-D00020" he="242.91mm" wi="150.62mm" orientation="landscape" file="US07298756-20071120-D00020.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00021" num="00021">
<img id="EMI-D00021" he="247.65mm" wi="168.66mm" orientation="landscape" file="US07298756-20071120-D00021.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00022" num="00022">
<img id="EMI-D00022" he="190.08mm" wi="162.39mm" file="US07298756-20071120-D00022.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00023" num="00023">
<img id="EMI-D00023" he="175.01mm" wi="182.37mm" file="US07298756-20071120-D00023.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
</drawings>
<description id="description">
<?RELAPP description="Other Patent Relations" end="lead"?>
<heading id="h-0001" level="1">RELATED APPLICATIONS</heading>
<p id="p-0002" num="0001">This application is a continuation-in-part of a pending application entitled, SYSTEM AND METHOD FOR SWITCHING VARIABLY SIZED INFORMATION GROUPS, invented by Yun et al., Ser. No. 10/023,266, filed Dec. 14, 2001 now abandoned.</p>
<p id="p-0003" num="0002">This application is a continuation-in-part of a pending application entitled, SYSTEM AND METHOD FOR SIMULTANEOUS DEFICIT ROUND ROBIN PRIORITIZATION, invented by Yun et al., Ser. No. 10/022,673, filed Dec. 17, 2001 now U.S. Pat. No. 7,079,545.</p>
<p id="p-0004" num="0003">This application is a continuation-in-part of a pending application entitled, SYSTEM AND METHOD FOR GRANTING ARBITRATED BIDS IN THE SWITCHING OF INFORMATION, invented by Yun et al., Ser. No. 10/029,581, filed Dec. 20, 2001.</p>
<p id="p-0005" num="0004">This application is a continuation-in-part of a pending application entitled, SYSTEM AND METHOD FOR HIERARCHIAL SWITCHING, invented by Yun et al., Ser. No. 10/035,835, filed Dec. 24, 2001 now U.S. Pat. No. 7,020,131.</p>
<p id="p-0006" num="0005">This application is a continuation-in-part of a pending application entitled, SYSTEM AND METHOD FOR TOLERATING DATA LINK FAULTS IN A PACKET COMMUNICATIONS SWITCH FABRIC, invented by Clovis et al., Ser. No. 10/373,139, filed Feb. 24, 2003, which is incorporated herein by reference.</p>
<?RELAPP description="Other Patent Relations" end="tail"?>
<?BRFSUM description="Brief Summary" end="lead"?>
<heading id="h-0002" level="1">BACKGROUND OF THE INVENTION</heading>
<p id="p-0007" num="0006">1. Field of the Invention</p>
<p id="p-0008" num="0007">This invention generally relates to packet communications switching and, more particularly, to a system and method for programming and redefining information in a packet cell header in passage through a switch fabric.</p>
<p id="p-0009" num="0008">2. Description of the Related Art</p>
<p id="p-0010" num="0009">There is industry demand for integrated circuits (ICs) switching systems that can be easily scaled for Network Access, the Network Edge, or a Core Switch Router, at the high end. SCSA (Signal Computing System Architecture) defines a switch fabric to be the facility for connecting any two (or more) transmitting or receiving Service Providers.</p>
<p id="p-0011" num="0010"><figref idref="DRAWINGS">FIG. 24</figref> is a schematic block diagram of a general switch fabric system (prior art). Traffic enters the system on the ingress side (the left side of the figure). Traffic exits the system on the egress side (the right side of the figure). The port card ingress and egress structures are sometimes subdivided into channels and subchannels. The packet headers specify a required destination port card, channel, and subchannel. The system must synchronously route each ingress packet to the correct egress destination.</p>
<p id="p-0012" num="0011">Packets are converted into frames by ingress traffic managers (iTMs). A frame is a logical unit of data, which is often a small piece of a much larger data set such as a file or image. The iTMs feed the ingress side of the fabric. The switch fabric might convert the frame format to a “native” format, and then on egress, convert the data back into the TM frame format before sending the data to the egress traffic managers (eTMs). If the frames are fixed size (for example: 53 bytes, 64 bytes, or 80 bytes), the frames are often called cells.</p>
<heading id="h-0003" level="1">Protocol Specific vs. Protocol Agnostic</heading>
<p id="p-0013" num="0012">A switch fabric can be protocol specific or protocol agnostic. An example of a protocol specific switch fabric would be a system designed and optimized specifically for asynchronous transfer mode (ATM) traffic. Another example would be a switch that handles only TCP/IP traffic. The obvious disadvantage of a switch fabric hardwired to handle a specific protocol is lack of flexibility. Service providers want to sell services to a variety of customers in various industries. Protocols vary from industry to industry.</p>
<p id="p-0014" num="0013">Even within one protocol type, there can be protocol upgrades. For example, TCP/IP, the machine language of Internet routers, now runs primarily “IPv4.” This protocol, successful as it has been, has a lack of available addresses, poor security features, and no “quality of service” (QoS) provisions. The next generation Internet protocol is “IPv6.” It provides solutions to these limitations.</p>
<p id="p-0015" num="0014">A protocol agnostic switch fabric works equally well with all protocol types, however, the traffic manager must be responsible for recognizing specific protocol types. The disadvantage of a protocol agnostic switch fabric is that it may be more complicated, and perhaps slower than a switch fabric dedicated to a particular protocol.</p>
<heading id="h-0004" level="1">Packet Striping vs. Single Link Per Packet</heading>
<p id="p-0016" num="0015">The simplest way for a traffic manager to transmit a packet into a switch fabric is to transmit the packet serially along one line. Striping is a way of achieving higher bandwidth by transmitting a single packet across multiple ingress/egress lines. For example, a TM can transmit a packet into a switch fabric eight times as fast if the packet is sliced into eight pieces (stripes) by the TM, and conveyed into the fabric along 8 parallel lines simultaneously. The fabric captures the packet in memory, routes it to the required egress destination, and slices the packet into 8 parallel lines before transmitting the packet to the egress TM.</p>
<p id="p-0017" num="0016">The upside to packet striping is the potential for lower latency. There are several negative aspects of packet striping:</p>
<p id="p-0018" num="0017">if one of the links is damaged (1 of 8 in the example above), the entire channel is out of service, degrading fault tolerance; and,</p>
<p id="p-0019" num="0018">the interface between the TM and switch fabric is more complicated. Circuitry must be used to slice the packet into stripes and reassemble it into packets.</p>
<heading id="h-0005" level="1">Single-Cell Packet vs. Multi-Cell Packets</heading>
<p id="p-0020" num="0019">Many switch fabrics now deployed and passing revenue traffic, especially in wide area networks (WANs), use asynchronous transfer mode (ATM) packets. ATM packets are single-cell packets, with a fixed cell size of 53 bytes, 48 bytes of which is the information payload. The ATM specification evolved in the 1980s and early 1990s. It was then believed that variable length (multi-cell) packets would be too difficult to implement at rates needed for wire-speed traffic. The single-cell solution was a compromise that would work for voice data, video data, multimedia data, email data, file data, etc. With a fixed frame size, switch designs are simplified and ultimately faster.</p>
<p id="p-0021" num="0020">However, files are better sent in large frames. Voice switching performs better with small bursts of data, corresponding to analog-to-digital converter time slots. Large frames and concomitant switching latencies can render a switch useless for most 2-way voice applications. Voice communications require low latency (time delay). Since ATM had to work for all network data, the small payload (voice) requirements prevailed at the expense of the large frame applications.</p>
<p id="p-0022" num="0021">For large frames or packets it is much more efficient to establish a path from an ingress port card to the required egress destination, and then leave this path undisturbed until the packet is completed. With single cell packets, the ingress port card must bid for, accept grants, and then schedule each cell of a multi-cell packet.</p>
<p id="p-0023" num="0022">There are also Frame Relay switch fabrics. Frame Relay is a single-cell protocol, albeit with frame size ranging from 6 to 4096 bytes. Such switch fabrics have been deployed and passing revenue traffic since the early 1990s. These switch fabrics have generally not been used for voice data because of the large latency. Only high compressed voice traffic works well over frame relay. Voice-over-frame relay was added as an afterthought by network engineers. Frame relay excels at data communications such as local area network internetworking (LAN-to-LAN). Such communications are very high speed and bursty, with non-critical latency constraints.</p>
<heading id="h-0006" level="1">Cut-Through vs. Store-and-Forward</heading>
<p id="p-0024" num="0023">The conventional method of switch fabric packet routing is called Store-and-Forward. In this method, the switch fabric accepts an input packet and buffers the packet on the ingress side of the fabric, making sure the packet was received intact, knowing the exact number of cells in the packet. The problem with the store-and-forward method is the added latency of buffering the packet. In Cut-through Packet Routing (CPR), a switch fabric is able to send the incoming packet cells to the correct egress port as soon as the destination address is known.</p>
<heading id="h-0007" level="1">Memory-Based vs. Arbitrated Crossbar</heading>
<p id="p-0025" num="0024">A switch fabric can use memory-based crossbars or arbitrated crossbars. A memory-based crossbar is sometimes called a “shared memory switch.” Ingress packets flow from the port cards into a huge memory bank, which serve as the switch. From the memory bank, the destination address is determined from egress port destination information in the cell headers. The problem with these switch fabrics is that they become prohibitively expensive and large from all the required high-speed memory. Such fabrics cannot be used to reach terabit total switching speeds with technology available today.</p>
<p id="p-0026" num="0025">It would be advantageous if a switch fabric cell header structure could be programmed and defined with respect to interfacing traffic managers.</p>
<heading id="h-0008" level="1">SUMMARY OF THE INVENTION</heading>
<p id="p-0027" num="0026">The present invention describes a switch fabric with programmable cell header information. This programmability permits the switch fabric to be adapted to the characteristics of the interfacing networks. The flexibility in definition, and redefinition, of the overhead information permits the cell header to be used in switch fabric and network control communications.</p>
<p id="p-0028" num="0027">Accordingly, a method is provided for controlling packet header information in a packet communications switch fabric. The method comprises: programming the cell header overhead (OH) field definitions; accepting a packet including a plurality of cells and corresponding cell headers, each cell header including a plurality of overhead fields; defining the cell header OH fields; and, transmitting the packet. Defining the cell header OH fields includes defining cell header OH field location, position, meaning, structure, and length.</p>
<p id="p-0029" num="0028">In other aspects, the method comprises redefining the cell header overhead fields, once they are accepted. For example, the OH field information can be modified, relocated, or an OH field can be added to the cell header. In yet other aspects, the OH field information can be extracted and/or reformatted.</p>
<p id="p-0030" num="0029">A system is also provided for controlling packet header information in a packet communications switch fabric. The system comprises a port card having an input interface to accept a packet including a plurality of cells and corresponding cell headers, where each cell header including a plurality of overhead fields. The port card defines the cell header OH fields and transmits the packet from an output interface. As mentioned above, the cell header OH fields are defined to interface the switch fabric to a network, typically a network of traffic managers.</p>
<p id="p-0031" num="0030">More specifically, the port card can either be an input port card (IPC) having ingress ports to accept packets and ingress backplane data links to transmit packets, or an output port card (OPC) having egress backplane data links to accept packets and egress ports to transmit packets.</p>
<p id="p-0032" num="0031">Additional details of the above-described system and method are provided below.</p>
<?BRFSUM description="Brief Summary" end="tail"?>
<?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?>
<description-of-drawings>
<heading id="h-0009" level="1">BRIEF DESCRIPTION OF THE DRAWINGS</heading>
<p id="p-0033" num="0032"><figref idref="DRAWINGS">FIG. 1</figref> is a schematic block diagram of the present invention system for controlling packet header information in a packet communications switch fabric.</p>
<p id="p-0034" num="0033"><figref idref="DRAWINGS">FIG. 2</figref> is a diagram illustrating exemplary configurations of Ingress Cell Headers.</p>
<p id="p-0035" num="0034"><figref idref="DRAWINGS">FIG. 3</figref> is a diagram illustrating exemplary configurations of Egress Cell Headers.</p>
<p id="p-0036" num="0035"><figref idref="DRAWINGS">FIG. 4</figref> is a diagram depicting the Cyclone switch fabric system.</p>
<p id="p-0037" num="0036"><figref idref="DRAWINGS">FIG. 5</figref> depicts the Channel Interface using eight OC-24 links.</p>
<p id="p-0038" num="0037"><figref idref="DRAWINGS">FIG. 6</figref> is a diagram illustrating the Channel Interface using four OC-48 Subchannels.</p>
<p id="p-0039" num="0038"><figref idref="DRAWINGS">FIG. 7</figref> depicts the Channel Interface using an OC-192 Channel.</p>
<p id="p-0040" num="0039"><figref idref="DRAWINGS">FIG. 8</figref> depicts ViX-v3 Interface Bus Connectivity.</p>
<p id="p-0041" num="0040"><figref idref="DRAWINGS">FIG. 9</figref> illustrates an exemplary configuration of the Cyclone Input Cell Format, without Subchannels.</p>
<p id="p-0042" num="0041"><figref idref="DRAWINGS">FIG. 10</figref> is a table illustrating an exemplary configuration of the Incoming Unicast Cell Header Contents without Subchannels.</p>
<p id="p-0043" num="0042"><figref idref="DRAWINGS">FIG. 11</figref> is a table illustrating an exemplary configuration of the Incoming Multicast Cell Header Contents without Subchannels.</p>
<p id="p-0044" num="0043"><figref idref="DRAWINGS">FIG. 12</figref> depicts an exemplary configuration of the Cyclone Input Cell Format, with Subchannels.</p>
<p id="p-0045" num="0044"><figref idref="DRAWINGS">FIG. 13</figref> is a table illustrating an exemplary configuration of the Incoming Unicast Cell Header Contents with Subchannels.</p>
<p id="p-0046" num="0045"><figref idref="DRAWINGS">FIG. 14</figref> is a table illustrating an exemplary configuration of the Incoming Multicast Cell Header Contents with Subchannels.</p>
<p id="p-0047" num="0046"><figref idref="DRAWINGS">FIG. 15</figref> illustrates an exemplary configuration of the Cyclone Output Cell Format.</p>
<p id="p-0048" num="0047"><figref idref="DRAWINGS">FIG. 16</figref> is a table illustrating an exemplary configuration of the Outgoing Cell Header Contents, without Subchannels.</p>
<p id="p-0049" num="0048"><figref idref="DRAWINGS">FIG. 17</figref> is a table illustrating an exemplary configuration of the Outgoing Cell Header Contents, with Subchannels.</p>
<p id="p-0050" num="0049"><figref idref="DRAWINGS">FIG. 18</figref> depicts an exemplary configuration of the Cyclone Flow Control Field Format FC[15:0].</p>
<p id="p-0051" num="0050"><figref idref="DRAWINGS">FIG. 19</figref> is a Link Synchronization (Deskew Logic) Block Diagram.</p>
<p id="p-0052" num="0051"><figref idref="DRAWINGS">FIG. 20</figref> depicts an exemplary configuration of the backplane cell format.</p>
<p id="p-0053" num="0052"><figref idref="DRAWINGS">FIG. 21</figref> is a table illustrating an exemplary configuration of the Backplane Unicast Cell Header Contents.</p>
<p id="p-0054" num="0053"><figref idref="DRAWINGS">FIG. 22</figref> is a table illustrating an exemplary configuration of the Backplane Multicast Cell Header Contents.</p>
<p id="p-0055" num="0054"><figref idref="DRAWINGS">FIG. 23</figref> is a flowchart illustrating the present invention method for controlling packet header information in a packet communications switch fabric.</p>
<p id="p-0056" num="0055"><figref idref="DRAWINGS">FIG. 24</figref> is a schematic block diagram of a general switch fabric system (prior art).</p>
</description-of-drawings>
<?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?>
<?DETDESC description="Detailed Description" end="lead"?>
<heading id="h-0010" level="1">DETAILED DESCRIPTION OF THE PREFERRED EMBODIMENTS</heading>
<p id="p-0057" num="0056"><figref idref="DRAWINGS">FIG. 1</figref> is a schematic block diagram of the present invention system for controlling packet header information in a packet communications switch fabric. At the most fundamental level, the system <b>100</b> comprises a port card having an input interface to accept a packet including a plurality of cells and corresponding cell headers, where each cell header including a plurality of overhead fields. The port card defines the cell header overhead (OH) fields and transmits the packet from an output interface. The port card chiefly defines the cell header OH fields so that it can communicate with an interfacing ingress traffic manager <b>102</b> (iTM) and/or egress TM <b>104</b> (eTM). As explained in more detail below, the port card defines cell header OH field location, position, meaning, structure, and/or length.</p>
<p id="p-0058" num="0057">More specifically, the port card can either be an input port card <b>106</b> (IPC) or an output port card <b>108</b> (OPC). The IPC <b>106</b> has ingress ports <b>1</b> through a on lines <b>110</b> through <b>112</b> to accept packets. The IPC <b>106</b> transmits packets on ingress backplane data links <b>1</b> through b on lines <b>114</b> through <b>116</b>. The OPC <b>108</b> accepts packets on egress backplane data links <b>1</b> through c on lines <b>118</b> through <b>120</b> and uses egress ports <b>1</b> through d on lines <b>122</b> through <b>124</b> to transmit packets. The values of a, b, c, and d are not limited to any particular value.</p>
<p id="p-0059" num="0058">The port cards <b>106</b>/<b>108</b> have inputs on lines <b>126</b> and <b>128</b>, respectively, to accept programming instructions for defining cell header OH field. Further, either the IPC <b>106</b> and/or the OPC may act to redefine the cell header OH fields. For example, either port card <b>106</b>/<b>108</b> may redefine the cell header overhead fields by: modifying OH field information; relocating OH fields in the cell header; and/or adding OH fields to the cell header. Further, either port card <b>106</b>/<b>108</b> may extract OH field information from the cell header, or reformat the OH fields in the cell header.</p>
<p id="p-0060" num="0059">The system <b>100</b> further comprises a switch card (SC) <b>130</b> with a crossbar <b>132</b> having crossbar inputs <b>1</b> through f on lines <b>114</b> through <b>136</b> that are selectively connectable to crossbar outputs <b>1</b> through g on lines <b>138</b> through <b>140</b>. The values of f and g are not limited to any particular value. The crossbar <b>132</b> (Xbar) transfers packets between the IPC and the OPC. The IPC <b>106</b> has ingress backplane data links connected to the crossbar inputs. Likewise, the OPC <b>108</b> has egress backplane data links connected to the crossbar outputs. Typically, the system would include a plurality of IPCs, OPCs, and crossbars (not shown). A single crossbar might be connected to a number, or perhaps all of the IPCs and OPCs. Likewise, a single IPC (or OPC) may be connected to a number of crossbars. In other aspects, each port card performs IPC and OPC functions.</p>
<p id="p-0061" num="0060">The IPC <b>106</b> includes an ingress memory subsystem <b>142</b> (iMS) having inputs connected to the ingress ports <b>1</b> through a for buffering the accepted packets. The iMS <b>142</b> has outputs for transmitting buffered packets on the egress backplane data links <b>1</b> through b. The IPC <b>106</b> may redefine the cell header OH fields buffered in the iMS. The IPC <b>106</b> can also be said to define the cell header OH fields that are buffered in the iMS <b>142</b>, in the sense that IPC communicates and/or operates on the packets using the OH programmed definitions.</p>
<p id="p-0062" num="0061">Likewise, the OPC <b>108</b> includes an egress MS <b>144</b> (eMS) having inputs connected to the egress backplane data links <b>1</b> through c for buffering accepted packets from the crossbar <b>132</b>. The eMS <b>144</b> has outputs for transmitting the buffered packets on the OPC egress ports <b>1</b> through d. The OPC <b>108</b> redefines (and/or defines) the cell header OH fields buffered in the eMS.</p>
<p id="p-0063" num="0062">Typically, the IPC <b>106</b> includes an ingress priority queue <b>146</b> (iPQ), or other type of scheduling/queuing device, connected to the iMS <b>142</b> on line <b>148</b>, and the crossbar <b>132</b> on line <b>150</b> for managing the backplane data links. The OPC <b>108</b> includes an egress PQ <b>152</b> (oPQ) connected to the eMS <b>144</b> on line <b>154</b> for managing the OPC egress ports. The OPC <b>108</b> may also include an iPQ <b>156</b>, or other scheduling device, connected to the eMS <b>144</b> on line <b>158</b> for relaying backplane control information to the IPC iPQ <b>146</b> on line <b>160</b>, through the crossbar <b>132</b>.</p>
<p id="p-0064" num="0063">The IPC iMS <b>142</b> may redefine cell header OH fields by extracting and accepting information from a cell header OH field. For example, the information can be extracted as a function of control communications. The iMS <b>142</b> may exchange the information in one OH field from the cell header with information from another OH field. The iMS <b>142</b> may also move the position of an OH field in the cell header. In one aspect, the iMS <b>142</b> reformats the OH field structure. For example, the iMS <b>142</b> may change to formatting from one that is suitable for unicasting (transmitting to a single destination), to one suitable for multicasting. The iMS <b>142</b> may add an OH field to the cell header and populate the added OH field with information. In other aspects, the iMS <b>142</b> replaces information in an OH field with alternate information. In at least one aspect, the iMS <b>142</b> defines a field that is embedded in another field.</p>
<p id="p-0065" num="0064">Likewise, the OPC eMS <b>144</b> redefines the cell header OH fields by extracting information from an OH field and sending the information to the OPC iPQ <b>156</b>. For example, credit information used in the management of the backplane data links can be extracted and relayed through the iPQ <b>156</b>. The eMS <b>144</b> can extract information from an OH field and sending the information to the OPC oPQ <b>152</b>. Further, the eMS <b>144</b> can redefine cell header OH fields by: exchanging the information in one OH field with information from another OH field; moving the position of an OH field in the cell header; reformatting the OH field structure; adding an OH field to the cell header and populating the added OH field with information; replacing information in an OH field with alternate information; and, extracting information from a field embedded in another field.</p>
<p id="p-0066" num="0065">In one aspect, the IPC iMS <b>142</b> embeds a field of secondary class of service (COS) information inside another field. The OPC eMS <b>144</b> extracts the secondary COS information and transmits the packet in response to the secondary COS information. In another aspect, IPC iMS <b>142</b> embeds dummy port information in the OH fields associated with unused (unconnected) OPC egress ports. The OPC eMS <b>144</b> extracts the dummy port information and transfers the information to the iPQ <b>156</b>. The OPC iPQ <b>156</b> sends the dummy port information to the IPC iPQ <b>146</b>, and iPQ <b>146</b> uses the dummy port information in the management of the backplane data links.</p>
<heading id="h-0011" level="1">FUNCTIONAL DESCRIPTION</heading>
<p id="p-0067" num="0066"><figref idref="DRAWINGS">FIG. 2</figref> is a diagram illustrating exemplary configurations of Ingress Cell Headers.</p>
<p id="p-0068" num="0067"><figref idref="DRAWINGS">FIG. 3</figref> is a diagram illustrating exemplary configurations of Egress Cell Headers.</p>
<p id="p-0069" num="0068">The below information is stored for each cell in the cell buffer of the iMS. An asterisk indicates that the MS derives the field, based upon the ingress subchannel/channel.</p>
<p id="p-0070" num="0069">SOP—start of packet</p>
<p id="p-0071" num="0070">EOP—end of packet</p>
<p id="p-0072" num="0071">COS[2:0]—class of service</p>
<p id="p-0073" num="0072">Flow_id[9:0]</p>
<p id="p-0074" num="0073">Length[7:0]—packet length</p>
<p id="p-0075" num="0074">os[1:0]—output subchannel</p>
<p id="p-0076" num="0075">oc[1:0]—output channel</p>
<p id="p-0077" num="0076">is[1:0]—input subchannel*</p>
<p id="p-0078" num="0077">ic[1:0]—input channel*</p>
<p id="p-0079" num="0078">ip[4:0]—input port*</p>
<p id="p-0080" num="0079">op[4:0]—output port</p>
<p id="p-0081" num="0080">credit state—credit state (for TM credits, not BP credits)</p>
<p id="p-0082" num="0081">op_m[31:0]—output port mask</p>
<p id="p-0083" num="0082">os_m[3:0]—output subchannel mask</p>
<p id="p-0084" num="0083">oc_m[3:0]—output channel mask</p>
<p id="p-0085" num="0084">Payload—bytes of cell payload.</p>
<p id="p-0086" num="0085">The present invention is exemplified, in one embodiment, as the S8005 Cyclone chip set series; a high-capacity switching fabric that seamlessly handles both packet and TDM (Time Division Multiplexed) traffic. The switch fabric can process all types of packet traffic (ATM, MPLS, IP, etc.) equally well. The AMCC Cyclone switch fabric is based on a set of four highly integrated ICs which contain SERDES and memory in order to reduce the overall system power, routing complexity, and required board area. The chip set consists of the following chips:
<ul id="ul0001" list-style="none">
    <li id="ul0001-0001" num="0000">
    <ul id="ul0002" list-style="none">
        <li id="ul0002-0001" num="0086">S8505 Priority Queue (PQ)</li>
        <li id="ul0002-0002" num="0087">S8605 Arbiter/Crossbar</li>
        <li id="ul0002-0003" num="0088">S8805 Earliest Deadline First Queue (EDFQ)</li>
        <li id="ul0002-0004" num="0089">S8905 Memory Subsystem (MS).</li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0087" num="0090">Traffic management is integrated into the switch fabric and occurs at the ingress, switching and egress in order to guarantee Quality of Service (QoS). The switch fabric is scalable and can terminate up to 128 OC-192's (1.28 Tbps). It can be organized as a 32×32 port switch where each port consists of four OC-192 channels, in effect implementing a 128×128 switch. The OC-192's can be either channelized or concatenated. The fabric can also be thoughT of as a 512×512 switch since each channel an be treated as four OC-48 subchannels. In addition to the port cards, there are up to sixteen switching cards (depending on the chosen architecture and organization), which consist of Arbiters and Crossbars. Each switching card has connectionS to all the port cards.</p>
<p id="p-0088" num="0091"><figref idref="DRAWINGS">FIG. 4</figref> is a diagram depicting the Cyclone switch fabric system. The interface into and out of the switch fabric passes cells over 2.5 Gbps serial links, which include 8B/10B encoding. Each channel of the switch fabric consists of up to ten serial links, providing up to 20 Gbps data rate throughput. This the following logical cell formats can be used:
<ul id="ul0003" list-style="none">
    <li id="ul0003-0001" num="0000">
    <ul id="ul0004" list-style="none">
        <li id="ul0004-0001" num="0092">Cyclone (64 or 80 byte cells)</li>
        <li id="ul0004-0002" num="0093">ViX-v3 OC-48</li>
        <li id="ul0004-0003" num="0094">ViX-v3 OC-192</li>
    </ul>
    </li>
</ul>
</p>
<heading id="h-0012" level="1">Link Allocation</heading>
<p id="p-0089" num="0095"><figref idref="DRAWINGS">FIG. 5</figref> depicts the Channel Interface using eight OC-24 links. All data sent to or from the Cyclone switch fabric must be in a cellularized format. The Cyclone fabric supports a number of different cell formats. The number of links used to transfer the cells depends on the cell format selected. The three primary cell formats are Cyclone native, ViX-v3 OC-48, and ViX-v3 OC-192. Any given cell must be carried on 1, 2 or 8 links depending on which of the three primary cell formats is used. Desired cell format(s) are selected upon initialization. Each MS supports up to four OC-192 input channels and four OC-192 output channels, with each channel containing up to 10 links. Each channel can also be set to support a different cell format. Cell format cannot be changed without shutting down the traffic on the affected channel.</p>
<p id="p-0090" num="0096"><figref idref="DRAWINGS">FIG. 6</figref> is a diagram illustrating the Channel Interface using four OC-48 Subchannels. The Cyclone native cell format uses a one physical link for cell and packet transfer. This link is referred to as an OC-24 link, with cell overhead and 8B/10B encoding implied.</p>
<p id="p-0091" num="0097"><figref idref="DRAWINGS">FIG. 7</figref> depicts the Channel Interface using an OC-192 Channel. The ViX-v3 OC-48 cell format stripes across two physical links for cell and packet transfer.</p>
<p id="p-0092" num="0098"><figref idref="DRAWINGS">FIG. 8</figref> depicts ViX-v3 Interface Bus Connectivity. The ViX-v3 OC-192 cell format stripes across eight physical links for cell and packet transfer.</p>
<heading id="h-0013" level="1">Cyclone Cell Format</heading>
<p id="p-0093" num="0099">In Cyclone mode, each cell arrives on only one serial link. The cell size can be either 64 or 80 bytes which is programmable, but must be uniform throughout the fabric. The first byte in the cell is the synchronization character which is used for synchronizing and determining the beginning of each cell.</p>
<heading id="h-0014" level="1">Cyclone Input Cell Format, without Subchannels</heading>
<p id="p-0094" num="0100"><figref idref="DRAWINGS">FIG. 9</figref> illustrates an exemplary configuration of the Cyclone Input Cell Format, without Subchannels. As can be seen from the figure, a unicast cell has six bytes of header information and a multicast cell has nine bytes. Two additional overhead bytes are available to configure as a queue level flow control field. A unicast cell can contain a data payload of either 56 or 72 bytes for a 64-byte or 80-byte cell respectively. A multicast cell contains a data payload of either 53 or 69 bytes for a 64-byte or 80-byte cell respectively. These numbers assume the two optional queue level flow control bytes are in use; if not, the payload space available is increased by two bytes.</p>
<p id="p-0095" num="0101"><figref idref="DRAWINGS">FIG. 10</figref> is a table illustrating an exemplary configuration of the Incoming Unicast Cell Header Contents without Subchannels. Note that the example cell formats <figref idref="DRAWINGS">FIG. 9</figref> and <figref idref="DRAWINGS">FIG. 10</figref> assume a system with 32 port cards. In a smaller switch fabric with 8 port cards, the output port mask in <figref idref="DRAWINGS">FIG. 9</figref> could be reduced from 32 bits to 8 bits, thereby adding 3 bytes per cell to the payload for multicast cells, improving efficiency of the system. For the unicast cells, the 5-bit Output Port field could be reduced from 5 bits to 3 bits, allowing other user-defined flags to be placed in theses spare bits.</p>
<p id="p-0096" num="0102"><figref idref="DRAWINGS">FIG. 11</figref> is a table illustrating an exemplary configuration of the Incoming Multicast Cell Header Contents without Subchannels.</p>
<heading id="h-0015" level="1">Cyclone Input Cell Format with Subchannels</heading>
<p id="p-0097" num="0103"><figref idref="DRAWINGS">FIG. 12</figref> depicts an exemplary configuration of the Cyclone Input Cell Format, with Subchannels. Within an OC-192 channel the user may choose to designate four OC-48 subchannels as logically separate destinations. A subchannel field (and mask for multicast) are added to the cell format to support this. The increased switching granularity of subchannels restricts the FID field to eight bits, therefore the two MSBs of the 10-bit field in the cell header are dropped from the cell format. The RDY bit is moved into the freed space. Note that if an oPQ is used as the egress scheduler instead of the EDFQ, the FID field might not be needed, again removing cell header overhead and adding to payload.</p>
<p id="p-0098" num="0104"><figref idref="DRAWINGS">FIG. 13</figref> is a table illustrating an exemplary configuration of the Incoming Unicast Cell Header Contents with Subchannels.</p>
<p id="p-0099" num="0105"><figref idref="DRAWINGS">FIG. 14</figref> is a table illustrating an exemplary configuration of the Incoming Multicast Cell Header Contents with Subchannels.</p>
<heading id="h-0016" level="1">Cyclone Output Cell Format</heading>
<p id="p-0100" num="0106"><figref idref="DRAWINGS">FIG. 15</figref> illustrates an exemplary configuration of the Cyclone Output Cell Format. Outgoing cells contain all the information necessary to identify packets and the flow of traffic to which they belong. SOP, EOP, MC, COS, FID, and LEN are all transported through the switch fabric. A flow control message is inserted in bytes <b>4</b> and <b>5</b>. The output cell format is typically tailored to the needs of the eTM, which in turn depend on the types of traffic being switched.</p>
<p id="p-0101" num="0107"><figref idref="DRAWINGS">FIG. 16</figref> is a table illustrating an exemplary configuration of the Outgoing Cell Header Contents, without Subchannels.</p>
<p id="p-0102" num="0108"><figref idref="DRAWINGS">FIG. 17</figref> is a table illustrating an exemplary configuration of the Outgoing Cell Header Contents, with Subchannels. Note when subchannels are in use, the Flow ID parameter is reduced to eight bits.</p>
<heading id="h-0017" level="1">Cyclone Flow Control Field</heading>
<p id="p-0103" num="0109"><figref idref="DRAWINGS">FIG. 18</figref> depicts an exemplary configuration of the Cyclone Flow Control Field Format FC[15:0]. Credit information transmitted by the Cyclone switch fabric is embedded in the outgoing cell headers. Each cell carries a single credit. The figure and associated tables show where the 16-bit flow control field reside.</p>
<heading id="h-0018" level="1">Cyclone Packet Structure</heading>
<p id="p-0104" num="0110">Packets Consist of groups of cells. A Cyclone packet can have a length of 1 cell up to 192 cells. Packets, as with cells, must arrive on one and only one serial link. The switch fabric always manages traffic at the packet level and not the cell level. All cells in a packet will be transferred out of the switch fabric continuously on one and only one serial link.</p>
<p id="p-0105" num="0111">The MC, LEN[7:0], and FID[9/7:0] fields are only inspected at the start of a packet and are applied to the whole packet.</p>
<p id="p-0106" num="0112">The following remarks summarize how cell fields are used:</p>
<p id="p-0107" num="0113">Idle cells are ignored by the fabric. An idle cell is defined as start of packet (SOP) and end of packet (EOP) fields set to ‘1’, and the length field set to ‘0’. Flow control fields are valid in idle cells.</p>
<p id="p-0108" num="0114">The RDY bit is inspected every cell.</p>
<p id="p-0109" num="0115">The combination of Output Port, Output Channel, and Output Subchannel (optional) completely describe the physical destination for unicast packets.</p>
<p id="p-0110" num="0116">The combination of Output Port Mask, Output Channel Mask, and Output Subchannel Mask (optional) completely describe the physical destination(s) for multicast packets.</p>
<p id="p-0111" num="0117">The COS bits are used by the PQ for ingress priority queueing.</p>
<p id="p-0112" num="0118">The COS bits and Flow ID bits are presented to the EDFQ and used for scheduling.</p>
<p id="p-0113" num="0119">Multiple packets belonging to the same flow that are being transmitted to the switch fabric using multiple links should have their transmission times staggered such that they arrive at the fabric in the correct order. Ordering will be maintained through the fabric.</p>
<p id="p-0114" num="0120">Each serial link is capable of receiving an OC-24 channel with cellularization and 8B/10B encoding (a net line rate of 1,244.16 Mbps×10/9×10/8=1728 Mbps, for 80-byte cells without subchannels). Each serial link stays well within the 2.5 Gbps bandwidth limit, with cell overhead considered.</p>
<p id="p-0115" num="0121">There are exception conditions for treating incoming cells that do not meet the classification requirements:</p>
<p id="p-0116" num="0122">If a link is idle and a cell that is not the start of a new packet is received, it will be ignored.</p>
<p id="p-0117" num="0123">If a link is currently receiving cells for a packet and a “new packet” cell arrives before an end of packet has arrived, the new cell will be marked as the end of the previous packet. The content of this new cell will be ignored along with any further cells belonging to the “new packet”. The next packet, however, will be treated as normal.</p>
<p id="p-0118" num="0124">Flows, which contain multiple packets, are guaranteed to maintain order as long as the following is met:</p>
<p id="p-0119" num="0125">Packets arrive and exit on links of the same subchannel (or channel if there are not subchannels).</p>
<p id="p-0120" num="0126">Packets contain the same COS and Flow ID.</p>
<heading id="h-0019" level="1">Link Synchronization</heading>
<p id="p-0121" num="0127"><figref idref="DRAWINGS">FIG. 19</figref> is a Link Synchronization (Deskew Logic) Block Diagram. Following the 8B/10B decoder on serial receiver links is the link synchronization mechanism. The link synchronizer is responsible for finding the beginning of cells based on the synchronization character. After finding the beginnings of all the incoming cells from the different serial links, it deskews them so that they are all aligned with each other. This function is only used with ViX-v3 cell formats. In OC-48, 2 links are paired together to pass cell information that must be deskewed. In OC-192, 8 links are paired together to pass cell information that must be deskewed. The link deskew mechanism can calibrate out up to 6 clock cycles of skew. The nominal point can be set such that it can calibrate out between 0 to 6 or −3 to +3 cycles based on the “Sync_Delay” bits as shown in Figure. If a variation in skew is detected during steady-state operation for any of the links, the synchronizer will recalibrate that link. Since there is a FIFO buffer before the deskew, only a FIFO overflow or underflow situation would trigger a recalibration of the deskew mechanism once in steady-state operation. The link synchronization status is reported to the microprocessor interface. After the link deskew mechanism, data is passed to the Memory Subsystem core.</p>
<heading id="h-0020" level="1">Backplane Cell Structure</heading>
<p id="p-0122" num="0128"><figref idref="DRAWINGS">FIG. 20</figref> depicts an exemplary configuration of the backplane cell format. Cell traffic across the backplane identifies input and output designations for channel and subchannel. It also replaces the output port designation with the input port. The addition of a State bit is used for the purpose of resynchronizing backplane flow control credits. The RDY bit is removed since it serves no purpose across the backplane. All other fields including the payload are passed without modifications.</p>
<p id="p-0123" num="0129"><figref idref="DRAWINGS">FIG. 21</figref> is a table illustrating an exemplary configuration of the Backplane Unicast Cell Header Contents.</p>
<p id="p-0124" num="0130"><figref idref="DRAWINGS">FIG. 22</figref> is a table illustrating an exemplary configuration of the Backplane Multicast Cell Header Contents. The backplane cells are again fully programmable. All cell formats can be programmed to one configuration for unicast and a different configuration for multicast cells. Finally, it should be realized that cells can be 64 byte or 80 byte cells.</p>
<p id="p-0125" num="0131"><figref idref="DRAWINGS">FIG. 23</figref> is a flowchart illustrating the present invention method for controlling packet header information in a packet communications switch fabric. Although the method is depicted as a sequence of numbered steps for clarity, no order should be inferred from the numbering unless explicitly stated. It should be understood that some of these steps may be skipped, performed in parallel, or performed without the requirement of maintaining a strict order of sequence. The method starts at Step <b>200</b>.</p>
<p id="p-0126" num="0132">Step <b>202</b> programs cell header overhead (OH) field definitions. Step <b>204</b> accepts a packet including a plurality of cells and corresponding cell headers, each cell header including a plurality of overhead fields. Step <b>206</b> defines the cell header OH fields (in the accepted packets). For example, Step <b>206</b> may define cell header OH field location, position, meaning, structure, and/or length. In some aspects, Step <b>208</b> redefines the cell header overhead fields by: modifying OH field information; relocating OH fields in the cell header; and/or adding OH fields to the cell header. In other aspects, Step <b>210</b> extracts OH field information. In some aspects, Step <b>212</b> reformats the OH fields. In other aspects, Steps <b>210</b> and <b>212</b> may be considered special cases of Step <b>208</b>. Step <b>214</b> transmits the packet.</p>
<p id="p-0127" num="0133">In some aspects of the method, accepting a packet including a plurality of cells and corresponding cell headers in Step <b>204</b> includes substeps. Step <b>204</b><i>a </i>accepts the packets at input port card (IPC) ingress ports. Step <b>204</b><i>b </i>accepts the packets at output port card (OPC) egress backplane data links. Then, transmitting the packet in Step <b>214</b> includes substeps. Step <b>214</b><i>a </i>transmits the packet at IPC ingress backplane data links. Step <b>214</b><i>b </i>routes packets between the input port card and the output port card on backplane data links, through an intervening crossbar. Step <b>214</b><i>c </i>transmits the packet from OPC egress ports.</p>
<p id="p-0128" num="0134">In some aspects, accepting packets at an input port card ingress port in Step <b>204</b><i>a </i>includes buffering the packets in an ingress memory subsystem (iMS). Then, redefining the cell header OH fields in Step <b>208</b> includes redefining the cell header OH fields buffered in the iMS.</p>
<p id="p-0129" num="0135">In other aspects, routing information packets between the input port card on backplane data links through an intervening crossbar in Step <b>214</b><i>b </i>includes substeps (not shown). In Step <b>214</b><i>b</i><b>1</b> the iMS transmits buffered packets on a selected backplane data link. Step <b>214</b><i>b</i><b>2</b> buffers the packets in an output port card egress memory subsystem (eMS). Then, redefining the cell header OH fields in Step <b>208</b> includes redefining the cell header OH fields buffered in the eMS.</p>
<p id="p-0130" num="0136">Typically, routing information packets between the input port card on backplane data links through an intervening crossbar in Step <b>214</b><i>b </i>includes an IPC ingress priority queue (iPQ) managing the backplane data links. Then, there may be additional substeps (not shown). In Step <b>214</b><i>d </i>an OPC egress PQ (oPQ) manages output port card egress ports. In Step <b>214</b><i>e </i>an OPC iPQ relays backplane control information from the eMS to the IPC iPQ.</p>
<p id="p-0131" num="0137">In some aspects, redefining the cell header OH fields buffered in the iMS (Step <b>208</b>) includes: the iMS extracting information from a first OH field from the cell header, and sending the information to the iPQ; the iMS exchanging the information in second OH field from the cell header with information from a third OH field; the iMS moving the position of a fourth OH field in the cell header; the iMS reformatting the OH field structure; the iMS adding a fifth OH field to the cell header and populating the fifth OH field with information; the iMS replacing information in a sixth OH field with alternate information; and/or the iMS defining a seventh field embedded in an eighth field.</p>
<p id="p-0132" num="0138">Likewise, redefining the cell header OH fields buffered in the eMS (Step <b>208</b>) includes: the eMS extracting information from the first OH field from the cell header, and sending the information to the OPC iPQ; the eMS extracting information from the first OH field from the cell header, and sending the information to the OPC oPQ; the eMS exchanging the information in second OH field from the cell header with information from a third OH field; the eMS moving the position of a fourth OH field in the cell header; the eMS formatting the OH field structure; the eMS adding a fifth OH field to the cell header and populating the fifth OH field with information; the eMS replacing information in a sixth OH field with alternate information; and/or the eMS extracting information from a seventh field embedded in an eighth field.</p>
<p id="p-0133" num="0139">In some aspects, the iMS defining a seventh field embedded in an eighth field (Step <b>208</b>) includes the iMS embedding a seventh field of secondary class of service (COS) information. The eMS extracting information from a seventh field embedded in an eighth field includes the eMS extracting the secondary COS information. Then, transmitting the packet in Step <b>214</b> includes transmitting the packet in response to the secondary COS information.</p>
<p id="p-0134" num="0140">In other aspects, the iMS defining a seventh field embedded in an eighth field (Step <b>208</b>) includes the iMS embedding dummy port information, selected from a plurality of unused OPC egress ports, in the OH fields, and the eMS extracting the dummy port information. Then, the OPC iPQ relaying backplane control information from the eMS to the IPC iPQ (Step <b>214</b><i>e</i>) includes the eMS sending the dummy port information. Routing information packets between the input port card on backplane data links through an intervening crossbar in Step <b>214</b><i>b </i>includes the IPC iPQ using the dummy port information in the management of the backplane data links.</p>
<p id="p-0135" num="0141">A system and method of programmably controlling the definition of cell header OH fields, for use in a switch fabric, has been provided. A few examples have been presented to illustrate the invention. However, the invention is not limited to merely these examples. Other variations and embodiments of the invention will occur to those skilled in the art.</p>
<?DETDESC description="Detailed Description" end="tail"?>
</description>
<us-claim-statement>We claim:</us-claim-statement>
<claims id="claims">
<claim id="CLM-00001" num="00001">
<claim-text>1. In a packet communications switch fabric, a method for controlling packet header information, the method comprising:
<claim-text>accepting a packet including a plurality of cells and corresponding cell headers, each cell header including a plurality of overhead fields;</claim-text>
<claim-text>defining the cell header overhead (OH) fields;</claim-text>
<claim-text>redefining the cell header overhead fields as follows:</claim-text>
<claim-text>modifying OH field information;</claim-text>
<claim-text>relocating OH fields in the cell header;</claim-text>
<claim-text>adding OH fields to the cell header;</claim-text>
<claim-text>extracting OH field information;</claim-text>
<claim-text>reformatting the OH fields;</claim-text>
<claim-text>transmitting the packet;</claim-text>
<claim-text>wherein accepting a packet including a plurality of cells and corresponding cell headers includes:
<claim-text>accepting the packets at input port card (IPC) ingress ports; and,</claim-text>
<claim-text>accepting the packets at output port card (OPC) egress backplane data links;</claim-text>
</claim-text>
<claim-text>wherein transmitting the packet includes:
<claim-text>transmitting the packet at IPC ingress backplane data links;</claim-text>
<claim-text>routing packets between the input port card and the output port card on backplane data links, through an intervening crossbar; and,</claim-text>
<claim-text>transmitting the packet from OPC egress ports;</claim-text>
</claim-text>
<claim-text>wherein accepting packets at an input port card ingress port includes buffering the packets in an ingress memory subsystem (iMS);</claim-text>
<claim-text>wherein redefining the cell header OH fields includes redefining the cell header OH fields buffered in the iMS;</claim-text>
<claim-text>wherein routing information packets between the input port card on backplane data links through an intervening crossbar includes;
<claim-text>the iMS transmitting buffered packets on a selected backplane data link; and,</claim-text>
<claim-text>buffering the packets in an output port card egress memory subsystem (eMS);</claim-text>
</claim-text>
<claim-text>wherein redefining the cell header OH fields includes redefining the cell header OH fields buffered in the eMS;</claim-text>
<claim-text>wherein routing information packets between the input port card on backplane data links through an intervening crossbar includes an IPC ingress priority queue (iPQ) managing the backplane data links; and,</claim-text>
<claim-text>wherein transmitting the packet includes:
<claim-text>an OPC egress PQ (oPQ) managing output port card egress ports; and,</claim-text>
<claim-text>an OPC iPQ relaying backplane control information from the eMS to the IPC iPQ;</claim-text>
</claim-text>
<claim-text>wherein redefining the cell header OH fields buffered in the iMS includes;
<claim-text>the iMS extracting information from a first OH field from the cell header, and sending the information to the iPQ;</claim-text>
<claim-text>the iMS exchanging the information in second OH field from the cell header with information from a third OH field;</claim-text>
<claim-text>the iMS moving the position of a fourth OH field in the cell header;</claim-text>
<claim-text>the iMS reformatting the OH field structure;</claim-text>
<claim-text>the iMS adding a fifth OH field to the cell header and populating the fifth OH field with information;</claim-text>
<claim-text>the iMS replacing information in a sixth OH field with alternate information; and,</claim-text>
<claim-text>the iMS defining a seventh field embedded in an eighth field;</claim-text>
</claim-text>
<claim-text>wherein redefining the cell header OH fields buffered in the eMS includes:
<claim-text>the eMS extracting information from the first OH field from the cell header, and sending the information to the OPC iPQ;</claim-text>
<claim-text>the eMS extracting information from the first OH field from the cell header, and sending the information to the OPC oPQ;</claim-text>
<claim-text>the eMS extracting the information in second OH field from the cell header with information from a third OH field;</claim-text>
<claim-text>the eMS moving the position of a fourth OH field in the cell header;</claim-text>
<claim-text>the eMS reformatting the OH field structure;</claim-text>
<claim-text>the eMS adding a fifth OH field to the cell header and populating the fifth OH field with information;</claim-text>
<claim-text>the eMS replacing information in a sixth OH field with alternate information; and,</claim-text>
<claim-text>the eMS extracting information from a seventh field embedded in an eighth field;</claim-text>
</claim-text>
<claim-text>wherein the iMS defining a seventh field embedded in an eighth field includes the iMS embedding dummy port information, selected from a plurality of unused OPC egress ports, in the OH fields; and,</claim-text>
<claim-text>wherein the eMS extracting information from a seventh field embedded in an eighth field includes the eMS extracting the dummy port information;</claim-text>
<claim-text>wherein an OPC iPQ relaying backplate control information from the eMS to the IPC iPQ includes the eMS sending the dummy port information; and,</claim-text>
<claim-text>wherein routing packets between the input port card and the output port card on backplate data links, through an intervening crossbar includes the IPC iPQ using the dummy port information in the management of the backplane data links.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00002" num="00002">
<claim-text>2. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref> wherein the iMS defining a seventh field embedded in an eighth field includes the iMS embedding a seventh field of secondary class of service (COS) information; and,
<claim-text>wherein the eMS extracting information from a seventh field embedded in an eighth field includes the eMS extracting the secondary COS information; and,</claim-text>
<claim-text>wherein transmitting the packet includes transmitting the packet in response to the secondary COS information.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00003" num="00003">
<claim-text>3. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref> further comprising:
<claim-text>programming the cell header OH field definitions.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00004" num="00004">
<claim-text>4. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref> wherein defining the cell header overhead (OH) fields includes defining a cell header OH field location, position, meaning, structure, and length.</claim-text>
</claim>
<claim id="CLM-00005" num="00005">
<claim-text>5. In a packet communications switch fabric, a system for controlling packet header information, the system comprising:
<claim-text>a port card having an input interface to accept a packet including a plurality of cells and corresponding cell headers, each cell header including a plurality of overhead fields, the port card defining the cell header overhead (OH) fields and transmitting the packet from an output interface, the port card including:
<claim-text>an input port card (IPC) that redefines the cell header OH fields, having ingress ports to accept packets and ingress backplane data links to transmit packets; and,</claim-text>
<claim-text>an output port card (OPC) that redefines the cell header OH fields, having egress backplate data links to accept packets and egress ports to transmit packets;</claim-text>
</claim-text>
<claim-text>a switch card crossbar having crossbar inputs selectively connectable to crossbar outputs for transferring packets between the IPC the OPC with the crossbar inputs connected to the IPC ingress backplane data links, and the crossbar outputs connected to the OPC egress backplane data links;</claim-text>
<claim-text>wherein the port card extracts OH field information from the cell header and reformats the OH fields in the cell header, and the port card redefining the cell header overhead fields by:
<claim-text>modifying OH field information;</claim-text>
<claim-text>relocating OH fields in the cell header; and,</claim-text>
<claim-text>adding OH fields to the cell header;</claim-text>
</claim-text>
<claim-text>wherein the IPC includes an ingress memory subsystem (iMS) having inputs connected to the ingress ports for buffering the accepted packets and outputs transmitting buffered packets on the egress backplane data links, the IPC redefining the cell header OH fields buffered in the iMS;</claim-text>
<claim-text>wherein the OPC includes an egress MS (eMS) having inputs connected to the egress backplane data links for buffing accepted packets and outputs for transmitting the buffered packets on the OPC egress ports, the OPC redefining the cell header OH fields buffered in the eMS;</claim-text>
<claim-text>wherein the IPC includes an ingress priority queue (iPQ) connected to the iMS and the crossbar for managing the backplane data links;</claim-text>
<claim-text>wherein the OPC includes;
<claim-text>an egress PQ (oPQ) connected to the eMS for managing the OPC egress ports; and,</claim-text>
<claim-text>an iPQ connected to the eMS for relaying backplane control information to the IPC iPQ;</claim-text>
</claim-text>
<claim-text>wherein the IPC iMS redefines cell header OH fields as follows:
<claim-text>extracting and accepting information from a first OH field from the cell header;</claim-text>
<claim-text>exchanging the information in second OH field from the cell header with information from a third OH field;</claim-text>
<claim-text>moving the position of a fourth OH field in the cell header;</claim-text>
<claim-text>reformatting the OH field structure;</claim-text>
<claim-text>adding a fifth OH field to the cell header and populating the fifth OH field with information;</claim-text>
<claim-text>replacing information in a sixth OH field with alternate information; and,</claim-text>
<claim-text>defining a seventh field embedded in an eighth field;</claim-text>
</claim-text>
<claim-text>wherein the OPC eMS redefines the cell header OH fields as follows:
<claim-text>extracting information from the first OH field from the cell header, and sending the information to the OPC iPQ;</claim-text>
<claim-text>extracting information from the first OH field from the cell header, and sending the information to the OPC oPQ;</claim-text>
<claim-text>exchanging he information in second OH field from the cell header with information from a third OH field;</claim-text>
<claim-text>moving the position of a fourth OH field in the cell header;</claim-text>
<claim-text>reformatting the OH field structure;</claim-text>
<claim-text>adding a fifth OH field to the cell header and populating the fifth OH field with information;</claim-text>
<claim-text>replacing information in a sixth OH field with alternate information; and,</claim-text>
<claim-text>extracting information from a seventh field embedded in an eighth field;</claim-text>
</claim-text>
<claim-text>wherein the IPC iMS embeds dummy port information, selected from a plurality of unused OPC egress ports, in cell header OH fields; and,</claim-text>
<claim-text>wherein the OPC eMS extracts the dummy port information; and,</claim-text>
<claim-text>wherein an OPC iPQ sends the dummy port information to the IPC iPQ; and,</claim-text>
<claim-text>wherein the IPC iPQ uses the dummy port information in the management of the backplane data links.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00006" num="00006">
<claim-text>6. The system of <claim-ref idref="CLM-00005">claim 5</claim-ref> wherein the IPC iMS embeds a seventh field of secondary class of service (COS) information; and,
<claim-text>wherein the OPC emS extracts the secondary COS information and transmits the packet in response to the secondary COS information.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00007" num="00007">
<claim-text>7. The system of <claim-ref idref="CLM-00005">claim 5</claim-ref> wherein the port card defines cell header OH field location, position, meaning, structure, and length.</claim-text>
</claim>
<claim id="CLM-00008" num="00008">
<claim-text>8. The system of <claim-ref idref="CLM-00005">claim 5</claim-ref> wherein the port card has an input to accept programming instructions for defining cell header OH fields.</claim-text>
</claim>
</claims>
</us-patent-grant>
