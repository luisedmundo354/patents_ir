<us-patent-grant lang="EN" dtd-version="v4.2 2006-08-23" file="US07299404-20071120.XML" status="PRODUCTION" id="us-patent-grant" country="US" date-produced="20071106" date-publ="20071120">
<us-bibliographic-data-grant>
<publication-reference>
<document-id>
<country>US</country>
<doc-number>07299404</doc-number>
<kind>B2</kind>
<date>20071120</date>
</document-id>
</publication-reference>
<application-reference appl-type="utility">
<document-id>
<country>US</country>
<doc-number>10430049</doc-number>
<date>20030506</date>
</document-id>
</application-reference>
<us-application-series-code>10</us-application-series-code>
<us-term-of-grant>
<us-term-extension>347</us-term-extension>
</us-term-of-grant>
<classifications-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>G</section>
<class>06</class>
<subclass>F</subclass>
<main-group>15</main-group>
<subgroup>00</subgroup>
<symbol-position>F</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20071120</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
</classifications-ipcr>
<classification-national>
<country>US</country>
<main-classification>715500</main-classification>
<further-classification>715539</further-classification>
<further-classification>715530</further-classification>
</classification-national>
<invention-title id="d0e53">Dynamic maintenance of web indices using landmarks</invention-title>
<references-cited>
<citation>
<patcit num="00001">
<document-id>
<country>US</country>
<doc-number>5812999</doc-number>
<kind>A</kind>
<name>Tateno</name>
<date>19980900</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>707  3</main-classification></classification-national>
</citation>
<citation>
<patcit num="00002">
<document-id>
<country>US</country>
<doc-number>6055544</doc-number>
<kind>A</kind>
<name>DeRose et al.</name>
<date>20000400</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>7071041</main-classification></classification-national>
</citation>
<citation>
<patcit num="00003">
<document-id>
<country>US</country>
<doc-number>6185591</doc-number>
<kind>B1</kind>
<name>Baker et al.</name>
<date>20010200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>715531</main-classification></classification-national>
</citation>
<citation>
<nplcit num="00004">
<othercit>Bertino et al., “Query Processing in a Multimedia Document System,” ACM Transactions on Office Informtion Systems, vol. 6, No. 1, Jan. 1988, p. 1-41.</othercit>
</nplcit>
<category>cited by examiner</category>
</citation>
<citation>
<nplcit num="00005">
<othercit>Yoshikawa et al., “Xrel: A Path-Based Approach to Storage and Retrieval of XML Documents Using Relational Databases,” ACM Transactions on Internet Technology, vol. 1, No. 1, Aug. 2001, p. 110-141.</othercit>
</nplcit>
<category>cited by examiner</category>
</citation>
</references-cited>
<number-of-claims>12</number-of-claims>
<us-exemplary-claim>1</us-exemplary-claim>
<us-field-of-classification-search>
<classification-national>
<country>US</country>
<main-classification>715500</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>715539</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>715530</main-classification>
</classification-national>
</us-field-of-classification-search>
<figures>
<number-of-drawing-sheets>5</number-of-drawing-sheets>
<number-of-figures>7</number-of-figures>
</figures>
<us-related-documents>
<related-publication>
<document-id>
<country>US</country>
<doc-number>20040225963</doc-number>
<kind>A1</kind>
<date>20041111</date>
</document-id>
</related-publication>
</us-related-documents>
<parties>
<applicants>
<applicant sequence="001" app-type="applicant-inventor" designation="us-only">
<addressbook>
<last-name>Agarwal</last-name>
<first-name>Ramesh C.</first-name>
<address>
<city>Saratoga</city>
<state>CA</state>
<country>US</country>
</address>
</addressbook>
<nationality>
<country>omitted</country>
</nationality>
<residence>
<country>US</country>
</residence>
</applicant>
<applicant sequence="002" app-type="applicant-inventor" designation="us-only">
<addressbook>
<last-name>Lim</last-name>
<first-name>Lipyeow</first-name>
<address>
<city>Durham</city>
<state>NC</state>
<country>US</country>
</address>
</addressbook>
<nationality>
<country>omitted</country>
</nationality>
<residence>
<country>US</country>
</residence>
</applicant>
<applicant sequence="003" app-type="applicant-inventor" designation="us-only">
<addressbook>
<last-name>Padmanabhan</last-name>
<first-name>Sriram K.</first-name>
<address>
<city>Briarcliff Manor</city>
<state>NY</state>
<country>US</country>
</address>
</addressbook>
<nationality>
<country>omitted</country>
</nationality>
<residence>
<country>US</country>
</residence>
</applicant>
<applicant sequence="004" app-type="applicant-inventor" designation="us-only">
<addressbook>
<last-name>Wang</last-name>
<first-name>Min</first-name>
<address>
<city>Cortlandt Manor</city>
<state>NY</state>
<country>US</country>
</address>
</addressbook>
<nationality>
<country>omitted</country>
</nationality>
<residence>
<country>US</country>
</residence>
</applicant>
</applicants>
<agents>
<agent sequence="01" rep-type="attorney">
<addressbook>
<last-name>Tuchman</last-name>
<first-name>Ido</first-name>
<address>
<country>unknown</country>
</address>
</addressbook>
</agent>
<agent sequence="02" rep-type="attorney">
<addressbook>
<last-name>Dougherty</last-name>
<first-name>Anne V.</first-name>
<address>
<country>unknown</country>
</address>
</addressbook>
</agent>
</agents>
</parties>
<assignees>
<assignee>
<addressbook>
<orgname>International Business Machines Corporation</orgname>
<role>02</role>
<address>
<city>Armonk</city>
<state>NY</state>
<country>US</country>
</address>
</addressbook>
</assignee>
</assignees>
<examiners>
<primary-examiner>
<last-name>Bashore</last-name>
<first-name>William</first-name>
<department>2176</department>
</primary-examiner>
<assistant-examiner>
<last-name>Rutledge</last-name>
<first-name>Amelia</first-name>
</assistant-examiner>
</examiners>
</us-bibliographic-data-grant>
<abstract id="abstract">
<p id="p-0001" num="0000">A repository index records the position of document entries relative to landmark entries within the document. Landmark entries are selecting using a landmarking policy and their position relative to the document are stored in a landmark directory. During index updates, an edit transcript is generated describing the difference between old and new document versions, and both the document repository index and the landmark directory are updated as needed. Thus, the number of update operations preformed as compared with conventional indexing techniques may be substantially reduced when small, localized changes are made to the document. This is due to fact that the positions of document entries are recorded relative to the landmark entries rather than the document itself. By doing so, the document index becomes more shift-invariant, requiring fewer update operations when entries are added or inserted in localized areas of the document.</p>
</abstract>
<drawings id="DRAWINGS">
<figure id="Fig-EMI-D00000" num="00000">
<img id="EMI-D00000" he="206.42mm" wi="161.04mm" file="US07299404-20071120-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00001" num="00001">
<img id="EMI-D00001" he="149.78mm" wi="143.43mm" file="US07299404-20071120-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00002" num="00002">
<img id="EMI-D00002" he="227.67mm" wi="167.39mm" file="US07299404-20071120-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00003" num="00003">
<img id="EMI-D00003" he="168.32mm" wi="69.00mm" file="US07299404-20071120-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00004" num="00004">
<img id="EMI-D00004" he="206.59mm" wi="161.04mm" file="US07299404-20071120-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00005" num="00005">
<img id="EMI-D00005" he="211.16mm" wi="108.54mm" file="US07299404-20071120-D00005.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
</drawings>
<description id="description">
<?BRFSUM description="Brief Summary" end="lead"?>
<heading id="h-0001" level="1">FIELD OF THE INVENTION</heading>
<p id="p-0002" num="0001">The present invention relates generally to document indexing, and, more specifically, to document indexing using landmark entries and edit transcripts to improve updating performance.</p>
<heading id="h-0002" level="1">BACKGROUND</heading>
<p id="p-0003" num="0002">As the amount of information stored in computer memory continues to grow, the ability to efficiently search through and find relevant documents becomes more and more important. The World Wide Web, for example, provides access to millions of documents covering just about every topic imaginable. Thus, when searching the Web for information, a challenge in computer science is to efficiently find those documents that the searcher is interested in.</p>
<p id="p-0004" num="0003">Many of the most popular search techniques utilize indexing to keep track of documents on a network (such as the World Wide Web). Indexing is the process by which search engines extract information from a document repository so that its content can later be searched. In effect, a document repository index is a local snapshot in time of the repository's content. The index can then be quickly searched to find the most relevant documents in the repository for a given search query. Since the information in the document repository may be constantly changing, it is important to frequently update the index so that the snapshot is as current and accurate as possible.</p>
<p id="p-0005" num="0004">There are many indexing techniques known in the art. An inverted index is the indexing technique of choice for most web documents. Search engines use an inverted index for HyperText Markup Language (HTML) documents, and Database Management Systems (DBMS) use it to support containment queries in eXtensible Markup Language (XML) documents. An inverted index is a collection of inverted lists, where each list is associated with a particular word. An inverted list for a given word is a collection of document IDs of those documents that contain the word. If the position of a word occurrence in a document is needed, each document ID entry in the inverted list also contains a list of location IDs. Positional information of words relative to the document is usually stored because it is needed for proximity queries and query result ranking. Omitting positional information in the inverted index is therefore a serious limitation. Positional information is usually stored in the form of location IDs. The location ID of a word is the position in the document where the word occurs. An entry in an inverted file is also called a posting, and it encodes the information in a tuple (word_id, doc_id, loc_id).</p>
<p id="p-0006" num="0005">Since web documents change frequently, keeping inverted indexes up-to-date is crucial in making the most recently indexed documents searchable. A crawler (also referred to as a spider) is a program that collects web documents to be indexed. It has been shown that an in-place, incremental crawler can improve the freshness of the inverted index. However, the index rebuild method commonly used to update the inverted index cannot take advantage of an incremental crawler because the updated documents crawled in between rebuilds have to wait until the next index rebuild before they are searchable.</p>
<p id="p-0007" num="0006">One solution known in the art for keeping document repositories up-to-date is to rebuild the index more frequently. As the interval between rebuilds gets smaller, the magnitude of change between the two snapshots of the indexed collection also becomes smaller. A large portion of the inverted index will remain unchanged, and a large portion of the work done by the rebuild is redundant. A frequent rebuild solution, however, is inefficient because it rebuilds portions of the index that did not change.</p>
<p id="p-0008" num="0007">Another approach known in the art is to store the updates in between rebuilds in a searchable update log. This is similar to a ‘stop-press’ technique used to store the postings of documents that need to be inserted into the indexed collection. Each entry in this update log will either be a delete posting or an insert posting operation. Query processing requires searching both the inverted index and the update log and merging the results of both. If positional information is stored in each posting, which is often the case, the size of the update log can become prohibitively large. Thus, the update log technique is generally unsatisfactory because it is too large and affects query response time.</p>
<heading id="h-0003" level="1">SUMMARY OF THE INVENTION</heading>
<p id="p-0009" num="0008">The present invention addresses the above-mentioned limitations and other shortcomings of conventional document indexing techniques by providing an efficient technique for indexing document repositories based on landmark entries. While a small document change could result in updates to all the postings for that document in an index using existing indexing techniques, the present invention uses landmarks together with an edit transcript to significantly reduce the number of postings in the document index that need to be updated. Landmarks maintain positional information for each word while simultaneously allowing fast dynamic updating of the indexes.</p>
<p id="p-0010" num="0009">Thus, an exemplary aspect of the present invention involves a method for indexing a document. The method includes a dividing operation and a recording operation. The dividing operation divides the document into a plurality of blocks, and each block is associated with a landmark entry. The recoding operation records the position of at least one document entry relative to the landmark entry of the block containing the document entry.</p>
<p id="p-0011" num="0010">Another exemplary aspect of the invention is a computer readable data structure for indexing documents in a document repository. Each document includes a plurality of document entries, and the data structure includes a landmark directory and a repository index. The landmark directory is configured to store the location of landmarks in the documents. The repository index is configured to store the location of document entries relative to the landmarks.</p>
<p id="p-0012" num="0011">A further exemplary aspect of the invention is a method for maintaining a document index for a document which is changed from an old document version to a new document version. The method includes a generating operation to generate an edit transcript. The edit transcript describes the difference between the old document version and the new document version. An updating operation updates a landmark directory such that the positions of landmark entries with respect to the new document version are maintained. Another updating operation updates a repository index such that the positions of document entries in the new document version with respect to the landmark entries are maintained.</p>
<p id="p-0013" num="0012">Yet another exemplary aspect of the invention is a system for maintaining a document index for a document which is changed from an old document version to a new document version. The system includes a difference module configured to generate an edit transcript describing the difference between the old document version and the new document version. A landmark update module is configured to update a landmark directory such that the positions of landmark entries with respect to the new document version are maintained. An index update module is configured to update a repository index such that the positions of document entries in the new document version with respect to the landmark entries are maintained.</p>
<p id="p-0014" num="0013">The foregoing and other features, utilities and advantages of the invention will be apparent from the following more particular description of various embodiments of the invention as illustrated in the accompanying drawings.</p>
<?BRFSUM description="Brief Summary" end="tail"?>
<?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?>
<description-of-drawings>
<heading id="h-0004" level="1">BRIEF DESCRIPTION OF THE DRAWINGS</heading>
<p id="p-0015" num="0014"><figref idref="DRAWINGS">FIG. 1</figref> shows an exemplary network environment embodying the present invention.</p>
<p id="p-0016" num="0015"><figref idref="DRAWINGS">FIG. 2A</figref> shows exemplary documents in a document repository.</p>
<p id="p-0017" num="0016"><figref idref="DRAWINGS">FIG. 2B</figref> shows an exemplary landmark directory, as contemplated by the present invention.</p>
<p id="p-0018" num="0017"><figref idref="DRAWINGS">FIG. 2C</figref> shows an exemplary repository index, as contemplated by the present invention.</p>
<p id="p-0019" num="0018"><figref idref="DRAWINGS">FIG. 3</figref> shows a flowchart for indexing a document in accordance with one embodiment of the invention.</p>
<p id="p-0020" num="0019"><figref idref="DRAWINGS">FIG. 4</figref> shows an exemplary system for updating the landmark directory and repository index of present invention.</p>
<p id="p-0021" num="0020"><figref idref="DRAWINGS">FIG. 5</figref> shows an exemplary flowchart for updating the landmark directory and repository index.</p>
</description-of-drawings>
<?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?>
<?DETDESC description="Detailed Description" end="lead"?>
<heading id="h-0005" level="1">DETAILED DESCRIPTION OF THE INVENTION</heading>
<p id="p-0022" num="0021">The following description details how the present invention is employed to efficiently index documents using landmark entries. Throughout the description of the invention reference is made to <figref idref="DRAWINGS">FIGS. 1-5</figref>. When referring to the figures, like structures and elements shown throughout are indicated with like reference numerals.</p>
<p id="p-0023" num="0022">In <figref idref="DRAWINGS">FIG. 1</figref>, an exemplary computer environment <b>102</b> embodying the present invention is shown. It is initially noted that the computer environment <b>102</b> is presented for illustration purposes only, and is representative of countless configurations in which the invention may be implemented. Thus, the present invention should not be considered limited to the system configuration shown in the figure.</p>
<p id="p-0024" num="0023">Generally, the computer environment <b>102</b> includes a document repository <b>104</b> coupled to a computer network <b>106</b>. The document repository <b>104</b> represents a collection of computer readable information accessible through the computer network <b>106</b>. The document repository <b>104</b> may contain documents in various formats, such as, but not limited to HTML pages, Portable Document Format (PDF) documents, and various other formats known to those skilled in the art. Documents in the document repository <b>104</b> may be stored at one location on the network <b>106</b>, such as a Network-Attached Storage (NAS) server, or the documents may be distributed over various network locations. For example, the document repository <b>104</b> may represent the constantly changing documents available over the World Wide Web. Data analysis of Web documents shows that changes to most documents are small and that these changes are spatially localized within the document. The present invention provides an indexing scheme that exploits these properties.</p>
<p id="p-0025" num="0024">The computer network <b>106</b> may be any network known in the art for effectuating communications between the various devices in the computer environment <b>102</b>. Thus, the network <b>106</b> can be a local area network (LAN), a wide area network (WAN), or a combination thereof. It is contemplated that the network <b>106</b> may be configured as a public network, such as the Internet, and/or a private network, and may include various topologies and protocols know to those skilled in the art.</p>
<p id="p-0026" num="0025">A client <b>108</b> is also coupled to the computer network <b>106</b> and represents an entity searching for relevant documents in the document repository <b>104</b>. Typically, the client <b>108</b> conducts a search using a search engine server <b>110</b>. As discussed below, the search engine server <b>110</b> is configured to index documents in the document repository <b>104</b> according to the present invention. In one embodiment of the invention, the search engine server <b>110</b> utilizes a crawler (not shown) to automatically find documents in the document repository <b>104</b> and update the search engine's records. The client <b>108</b> submits a search query to the search engine server <b>110</b> and the search engine server <b>110</b> returns search results back to the client <b>108</b>.</p>
<p id="p-0027" num="0026">In <figref idref="DRAWINGS">FIG. 2A</figref>, two exemplary documents <b>202</b>, <b>204</b> in the document repository <b>104</b> are shown. The first document <b>202</b> is identified as doc# <b>12</b>, and contains the text, “Mary had a little lamb.” The second document <b>204</b> is identified as doc# <b>13</b>, and contains the text, “The wolf ate the lamb.” Each document contains a plurality of document entries. In the present example, the document entries are individual words. In other configurations of the invention, document entries may include tags, strings, letters, numbers, audio blocks, video blocks, and other types of information entries.</p>
<p id="p-0028" num="0027">The documents <b>202</b>, <b>204</b> are indexed according to the present invention by choosing landmark entries within each document. Selecting landmark entries in a document is based on a landmarking policy, and is described in more detail below. In the first document <b>202</b>, the landmark entries selected are “Mary”, “a”, and “lamb”, denoted by L<b>0</b>, L<b>1</b>, and L<b>2</b> respectively. In the second document <b>204</b>, the landmark entries selected are “The”, “ate”, and “lamb”, also denoted by L<b>0</b>, L<b>1</b>, and L<b>2</b> respectively.</p>
<p id="p-0029" num="0028">Once the landmark entries are selected, a landmark directory <b>206</b> is constructed, as shown in <figref idref="DRAWINGS">FIG. 2B</figref>. The landmark directory <b>206</b> is configured to record each landmark's location within the indexed documents <b>202</b>, <b>204</b>. The landmark directory <b>206</b> includes a document listing <b>208</b> and a plurality of landmark position listings <b>210</b>.</p>
<p id="p-0030" num="0029">The document listing <b>208</b> contains entries uniquely identifying each indexed document <b>202</b>, <b>204</b>. For example, the document listing <b>208</b> may store the network file locations of the indexed documents <b>202</b>, <b>204</b>. Alternatively, each document may be assigned a numerical value and a lookup table (not shown) can be used to find the document. Each entry in the document listing <b>208</b> is associated with a landmark position listing <b>210</b>.</p>
<p id="p-0031" num="0030">The landmark position listing <b>210</b> is configured to identify the location of each landmark in a document. In one embodiment, the locations of landmarks are calculated with respect to the beginning of the document. For example, in the first document <b>202</b>, the initial landmark L<b>0</b> (“Mary”) is the first word of the document and is therefore recorded as position <b>0</b>. The second landmark L<b>1</b> (“a”) of the document <b>202</b> is the third word and is recorded as being in position <b>2</b>, and so on. Other embodiments of the invention may calculate the position of landmarks using various alternative techniques known to those skilled in the art.</p>
<p id="p-0032" num="0031">Once the landmark directory <b>206</b> is constructed, a repository index <b>212</b> is created. The repository index <b>212</b> is configured to store the location of the document entries (i.e., words) relative to landmarks. In one embodiment of the invention, for each repository index entry, the repository index <b>212</b> includes an entry identifier <b>214</b>, a document identifier <b>216</b>, and a location identifier <b>218</b>.</p>
<p id="p-0033" num="0032">The entry identifier <b>214</b> is configured to store the various document entries in the documents <b>202</b>, <b>204</b>. The entry identifier <b>214</b> may not necessarily uniquely identify each document entry. For example, the entry identifier <b>214</b> may ignore upper case letters, such that the words “The” and “the” are mapped to the same entry. It is contemplated that other entry filtering/mapping may be performed on document entries before they are recorded in the entry identifier <b>214</b>.</p>
<p id="p-0034" num="0033">The entry identifier <b>214</b> is coupled to the document identifier <b>216</b>. The document identifier <b>216</b> lists the document or documents containing the document entry referred to by the entry identifier <b>214</b>. For example, the word “lamb” is used in both the first document <b>202</b> and the second document <b>204</b>. Therefore, the document identifier <b>216</b> for this entry contains both documents <b>202</b>, <b>204</b>.</p>
<p id="p-0035" num="0034">The location identifier <b>218</b> uses a landmark identifier <b>220</b> and a position offset <b>222</b> to form a landmark-offset pair. The landmark identifier <b>220</b> contains an identification of a landmark entry within the document. The position offset <b>222</b> contains the distance between the document entry and the landmark entry referred to by the landmark identifier <b>220</b>. Thus, the landmark-offset pairs, along with the landmark directory <b>206</b>, can be used to locate the exact position of document entries within documents. For example, using the repository index <b>212</b>, document entry “little” is present in doc #<b>12</b> (the first document <b>202</b>) and is offset by one entry from landmark L<b>1</b>. Referring to the landmark directory <b>206</b>, landmark L<b>1</b> in doc #<b>12</b> is located at position <b>2</b> from the beginning of the document. Therefore, document entry “little” is located at position <b>3</b> from the beginning of doc# <b>12</b>.</p>
<p id="p-0036" num="0035">Because the location identifier <b>218</b> describes the location of document entries relative to landmark entries, each landmark entry acts as a reference point within a document. In other words, the landmark entries in a document can be thought of as document partitions dividing the document into blocks. The beginning of each block corresponds to a landmark entry and the location of every document entry in a block is encoded as an offset from the beginning of that block. Each landmark entry corresponds to a block and vice-versa.</p>
<p id="p-0037" num="0036">In many circumstances, using landmark-offset pairs to encode the positions of document entries beneficially reduces the number of update operations required when indexing documents that have changed. As described in detail below, landmark entries help localize changes to the repository index <b>212</b> by only requiring those document entries within the modified block to be updated, along with the relatively small landmark directory <b>206</b>. Thus, utilizing the data structure of the present invention makes document indexing more “shift-invariant” in many cases.</p>
<p id="p-0038" num="0037">Turning now to <figref idref="DRAWINGS">FIG. 3</figref>, a flowchart for indexing a document in accordance with one embodiment of the invention is shown. It should be remarked that the logical operations shown may be implemented (1) as a sequence of computer executed steps running on a computing system and/or (2) as interconnected machine modules within the computing system. The implementation is a matter of choice dependent on the performance requirements of the system implementing the invention. Accordingly, the logical operations making up the embodiments of the present invention described herein are referred to alternatively as operations, steps, or modules.</p>
<p id="p-0039" num="0038">Operation flow begins with opening operation <b>302</b>. During this operation, the system accesses a document in the document repository. Selection of which document to open can be made using various automated techniques known in the art, such as network crawlers. Document selection may also be accomplished manually using, for example, a document submission form. As mentioned above, documents opened by the present may contain text, audio clips, images, video clips, program code or any combination thereof. After the opening operation <b>302</b> is completed, control passes to dividing operation <b>304</b>.</p>
<p id="p-0040" num="0039">At dividing operation <b>304</b>, the opened document is divided into a plurality of blocks, and each block is associated with a landmark entry. In one embodiment of the invention, a document block begins at its associated landmark entry and ends just prior to the next landmark entry.</p>
<p id="p-0041" num="0040">Landmark entries are selected using a landmarking policy. Some examples of landmarking policies are fixed size partitioning, HTML/XML tags, metadata, and semantic structure of document. In a fixed size partitioning policy, the size of every block is fixed when the documents are first indexed. HTML tags such as the paragraph tag (&lt;p&gt;) can also be used as landmarks. In contrast to the fixed size policy, the landmarks in this case are inherent in the document. It is contemplated that other landmarking policies may be used without departing from the scope of present invention. Once the dividing operation <b>304</b> is completed, control continues to recording operation <b>306</b>.</p>
<p id="p-0042" num="0041">At recording operation <b>306</b>, the position of each landmark entry relative to the document is recorded in the landmark directory. This operation may include storing a document identification entry in a document listing and a plurality of entries in a landmark position listing. It is contemplated that various data structure configurations may be used to store landmark information, including data arrays, trees, and linked lists. After recording operation <b>306</b> is completed, control passes to recording operation <b>308</b>.</p>
<p id="p-0043" num="0042">At recording operation <b>308</b>, the position of at least one document entry relative to the landmark entry of the block containing the document entry is recorded. This operation involves reading a document entry and keeping track of which document block it belongs to. The position of the document entry relative to the landmark associated with the block is then recorded in a repository index. For example, if the associated landmark entry is at the beginning of each document block, the position of document entries are recorded relative to the beginning of the block containing the document entry.</p>
<p id="p-0044" num="0043">In one embodiment of the invention, an inverted index of the document entries is created. In this embodiment, each document entry is recorded as a tuple containing an entry identifier, a document identifier, and a location identifier &lt;word_id,doc id,loc_id&gt;, with each location identifier containing a landmark identifier and a position offset pair &lt;ldmk_id,offset&gt;. It is contemplated that other document indexing structures may be used with the invention. Recording operation <b>308</b> may further include filtering, reformatting, or ignoring various document entries before their positions are recorded. After recording operation <b>308</b> is finished, the indexing process for the document is completed.</p>
<p id="p-0045" num="0044">Once a document is indexed, the present invention beneficially provides an efficient system to update the index for documents whose contents have changed. The invention uses the idea of landmarks together with an edit transcript to significantly reduce the number of entries in the index that need to be updated. Landmarks maintain positional information for each document entry while simultaneously allowing fast dynamic updating of the indexes.</p>
<p id="p-0046" num="0045">To illustrate the index updating process of the present invention, an old document version <b>204</b> and a new document version <b>402</b> are shown in <figref idref="DRAWINGS">FIG. 4</figref>. The old document version <b>204</b> has been indexed, and includes an old landmark directory <b>404</b> and old repository index <b>406</b>. As shown, the old document version <b>204</b> contains the sentence “The wolf ate the lamb”, and the new document version <b>402</b> contains the sentence “Today the wolf ate the lamb”.</p>
<p id="p-0047" num="0046">In order to update the repository index such that the contents of the new document version <b>402</b> are recorded, the old document version <b>204</b> and the new document version <b>402</b> are first compared using a difference module <b>408</b>. The difference module <b>408</b> is configured to generate an edit transcript <b>410</b> that describes the difference between the old document version <b>204</b> and the new document version <b>402</b>. In the example shown, the difference module <b>408</b> outputs, “Ins, 0, today”. Thus, the edit transcript <b>410</b> indicates that the word “today” was inserted at position 0 in new document version <b>204</b>.</p>
<p id="p-0048" num="0047">In one embodiment of the invention, the diff program found in the UNIX(r) operating system is utilized to generate the edit transcript <b>410</b>. UNIX is a registered trademark of UNIX Systems Laboratories, Inc. It is contemplated that other programs and solutions known in the art for generating the edit transcript <b>410</b> may be employed by the present invention.</p>
<p id="p-0049" num="0048">The invention may include a transform module <b>412</b> that receives the edit transcript <b>410</b>. The transform module <b>412</b> is configured to transform the edit transcript <b>410</b> into corresponding instructions for updating the landmark directory <b>404</b> and repository index <b>406</b>. The instructions generated by the transform module <b>412</b> are stored in an update transcript <b>414</b>. For example, the entries in the update transcript <b>414</b> instruct the system to insert a new landmark entry (“L<b>3</b>”) with a position 0. The update transcript <b>414</b> also instructs the system to shift the landmarks starting at landmark entry L<b>0</b> by adding 1 to their position, and insert a “today” posting to the repository index. It is noted that only the old document version <b>204</b>, the old landmark directory <b>404</b>, and the new document version <b>402</b> are needed to create the update transcript <b>414</b>. Thus, the procedures for generating the update transcript <b>414</b> lend themselves to parallel processing.</p>
<p id="p-0050" num="0049">It is contemplated that the update transcript <b>414</b> can contain various commands to update the landmark directory. Such commands may include Insert, Delete, DeleteRange, Shift, Find_Pos, Find_Ldmk, and Find_All_Ldmk. A brief summary of these commands is provided in Table 1. Depending on the landmarking policy chosen, not all of these commands will be required.</p>
<p id="p-0051" num="0050">
<tables id="TABLE-US-00001" num="00001">
<table frame="none" colsep="0" rowsep="0">
<tgroup align="left" colsep="0" rowsep="0" cols="1">
<colspec colname="1" colwidth="217pt" align="center"/>
<thead>
<row>
<entry namest="1" nameend="1" rowsep="1">TABLE 1</entry>
</row>
</thead>
<tbody valign="top">
<row>
<entry namest="1" nameend="1" align="center" rowsep="1"/>
</row>
<row>
<entry>Landmark directory update commands</entry>
</row>
</tbody>
</tgroup>
<tgroup align="left" colsep="0" rowsep="0" cols="2">
<colspec colname="1" colwidth="98pt" align="left"/>
<colspec colname="2" colwidth="119pt" align="left"/>
<tbody valign="top">
<row>
<entry>Command</entry>
<entry>Description</entry>
</row>
<row>
<entry namest="1" nameend="2" align="center" rowsep="1"/>
</row>
<row>
<entry>Insert(pos)</entry>
<entry>Inserts a new landmark at position pos</entry>
</row>
<row>
<entry/>
<entry>(possibly because of an insertion of a</entry>
</row>
<row>
<entry/>
<entry>piece of text in the document).</entry>
</row>
<row>
<entry>Delete(landmark_id)</entry>
<entry>Deletes the landmark landmark_id</entry>
</row>
<row>
<entry/>
<entry>(possibly because of a deletion of a</entry>
</row>
<row>
<entry/>
<entry>piece of text in the document).</entry>
</row>
<row>
<entry>DeleteRange</entry>
<entry>Deletes all landmarks occurring</entry>
</row>
<row>
<entry>(landmark_id<sub>1</sub>, landmark_id<sub>2</sub>)</entry>
<entry>between landmark_id<sub>1 </sub>and</entry>
</row>
<row>
<entry/>
<entry>landmark_id<sub>2</sub>. This is used</entry>
</row>
<row>
<entry/>
<entry>when a piece of text spanning several</entry>
</row>
<row>
<entry/>
<entry>landmarks is deleted.</entry>
</row>
<row>
<entry>Shift(landmark_id, value)</entry>
<entry>Adds value to the position of all the</entry>
</row>
<row>
<entry/>
<entry>landmarks that occur after</entry>
</row>
<row>
<entry/>
<entry>landmark_id.</entry>
</row>
<row>
<entry>Find_Pos(landmark_id)</entry>
<entry>Returns the position of the landmark</entry>
</row>
<row>
<entry/>
<entry>landmark_id. This is used during query</entry>
</row>
<row>
<entry/>
<entry>processing, when we want to know the</entry>
</row>
<row>
<entry/>
<entry>actual position corresponding to the</entry>
</row>
<row>
<entry/>
<entry>tuple &lt;word_id, doc_id,</entry>
</row>
<row>
<entry/>
<entry>loc_id&gt; that we obtain from</entry>
</row>
<row>
<entry/>
<entry>the inverted file.</entry>
</row>
<row>
<entry>Find_Ldmk(pos)</entry>
<entry>Returns the landmark corresponding</entry>
</row>
<row>
<entry/>
<entry>to the position pos. This is used when</entry>
</row>
<row>
<entry/>
<entry>we generate the edit operations for the</entry>
</row>
<row>
<entry/>
<entry>inverted file given the edit transcript of</entry>
</row>
<row>
<entry/>
<entry>the document.</entry>
</row>
<row>
<entry>Find_All_Ldmk(pos_range)</entry>
<entry>Returns all the landmarks correspond-</entry>
</row>
<row>
<entry/>
<entry>ing to the positions in the range</entry>
</row>
<row>
<entry/>
<entry>pos_range. This operation is</entry>
</row>
<row>
<entry/>
<entry>not required if HTML tags are used as</entry>
</row>
<row>
<entry/>
<entry>landmarking policy and brute force diff</entry>
</row>
<row>
<entry/>
<entry>is not used to obtain the edit transcript.</entry>
</row>
<row>
<entry namest="1" nameend="2" align="center" rowsep="1"/>
</row>
</tbody>
</tgroup>
</table>
</tables>
</p>
<p id="p-0052" num="0051">Before applying the list of update commands generated by the difference module <b>408</b> and transform module <b>412</b>, commands in the update transcript <b>414</b> can be batched in various ways for optimization. The batched entries can be further optimized by removing redundant entries that have been superseded by merging operations that undo one another, such as deleting and inserting the same word in the same position, and by grouping together operations on the same document entry in order to improve locality.</p>
<p id="p-0053" num="0052">After the update transcript <b>414</b> is generated, an updated landmark directory <b>416</b> is generated at a landmark update module <b>418</b>, and an updated repository index <b>420</b> is generated at an index update module <b>422</b>. The landmark update module <b>418</b> is configured to update the landmark directory <b>416</b> such that the positions of landmark entries with respect to the new document version <b>402</b> are maintained. Similarly, the index update module <b>422</b> is configured to update the repository index <b>420</b> such that the positions of document entries in the new document version <b>402</b> with respect to the landmark entries are maintained.</p>
<p id="p-0054" num="0053">In the example shown, landmark directory <b>416</b> is revised by adding one to the position of landmark entries L<b>0</b>, L<b>1</b>, and L<b>2</b>. Furthermore, a new landmark entry (L<b>3</b>) is inserted into the landmark directory <b>416</b>. The repository index <b>420</b> is updated by inserting document entry for “today”. Note that none of the other document entries in the repository index <b>420</b> change because their positions are recorded relative the landmark entries rather than the document itself. Thus, as the example demonstrates, the overhead incurred in storing and maintaining landmark directory <b>416</b> is generally insignificant compared to the reduction in the number of repository index update operations and in the faster update time.</p>
<p id="p-0055" num="0054">In <figref idref="DRAWINGS">FIG. 5</figref>, an exemplary flowchart for updating the landmark directory and repository index is shown. The flowchart begins at comparing operation <b>502</b>. During this operation, the old document version and the new document version are compared to one another. Generally, the new document version is received from the document repository, while the old document version is represented using the exiting landmark directory and repository index entries for that document. Once the old and new document versions are compared, control passes to query operation <b>504</b>.</p>
<p id="p-0056" num="0055">At query operation <b>504</b>, it is determined whether there is change between the old document version and the new document version. If no change occurred between versions, there is no need to update the document index and the process is ended. If, however, there is a difference between the old and new document versions, control passes to generating operation <b>506</b>.</p>
<p id="p-0057" num="0056">At generating operation <b>506</b>, an edit transcript is produced. The edit transcript identifies what changes were made to the old document version. For example, the edit transcript identifies which document entries were deleted, added, or modified since the old document version. Once the generating operation <b>506</b> is completed, control passes to translating operation <b>508</b>.</p>
<p id="p-0058" num="0057">At translating operation <b>508</b>, the edit transcript is translated to an update transcript. During this operation, the landmark directory for the document is checked against the edit transcript to determine the exact modification needed to the document indexing structure. These modifications are stored in the update transcript. After the translating operation <b>508</b> is completed, control passes to optimizing operation <b>510</b>.</p>
<p id="p-0059" num="0058">At optimizing operation <b>510</b>, the update transcript is inspected to eliminate any updating inefficiencies that may exist. As mentioned above, the optimizing operation <b>510</b> may, for example, delete updating operations that cancel each other out (such as deleting and inserting the same word), or group operations together to improve updating speed. Once the optimizing operation <b>510</b> is completed, control passes to updating operation <b>512</b>.</p>
<p id="p-0060" num="0059">At updating operation <b>512</b>, the process updates the landmark directory and repository index according to the optimized and update transcript. This operation may include adding, deleting or modifying entries in the landmark directory and repository index. As discussed above, the present invention can substantially reduce the number of update operations preformed as compared with conventional indexing techniques when small, localized changes are made to the document. This is due to fact that the positions of document entries are recorded relative to landmark entries rather than the document itself. By doing so, the document index becomes more shift-invariant, requiring fewer update operations when entries are added or inserted in localized areas of the document. Once the updating operation <b>512</b> is completed, the process is ended.</p>
<p id="p-0061" num="0060">The foregoing description of the invention has been presented for purposes of illustration and description. It is not intended to be exhaustive or to limit the invention to the precise form disclosed, and other modifications and variations may be possible in light of the above teachings. For example, the transform module <b>412</b> and the landmark update module <b>418</b> in <figref idref="DRAWINGS">FIG. 4</figref> may be combined into a single module that both creates an update transcript <b>414</b> and updates the landmark directory <b>416</b>. Thus, the embodiments disclosed were chosen and described in order to best explain the principles of the invention and its practical application to thereby enable others skilled in the art to best utilize the invention in various embodiments and various modifications as are suited to the particular use contemplated. It is intended that the appended claims be construed to include other alternative embodiments of the invention except insofar as limited by the prior art.</p>
<?DETDESC description="Detailed Description" end="tail"?>
</description>
<us-claim-statement>The invention claimed is:</us-claim-statement>
<claims id="claims">
<claim id="CLM-00001" num="00001">
<claim-text>1. A method for updating a repository index such that contents of a new document version are recorded, the method embodied in computer readable medium, the method comprising:
<claim-text>dividing a previous document version into a plurality of blocks, wherein each block is associated with a landmark entry;</claim-text>
<claim-text>storing the location of landmark entries in the previous document version in a landmark directory;</claim-text>
<claim-text>recording the position of at least one document entry relative to the landmark entry of the block containing the document entry in a repository index;</claim-text>
<claim-text>comparing the new document version with the previous document version;</claim-text>
<claim-text>generating an edit transcript describing the difference between the previous document version and the new document version;</claim-text>
<claim-text>transforming the edit transcript into corresponding instructions for updating the landmark directory and repository index;</claim-text>
<claim-text>updating the landmark directory such that the positions of landmark entries with respect to the new document version are maintained;</claim-text>
<claim-text>updating the repository index such that the positions of document entries in the new document version with respect to the landmark entries are maintained; and</claim-text>
<claim-text>batching commands in an update transcript before updating the landmark directory and repository index.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00002" num="00002">
<claim-text>2. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, further comprising recording the position of each landmark entry relative to the previous document version.</claim-text>
</claim>
<claim id="CLM-00003" num="00003">
<claim-text>3. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, further comprising selecting the landmark entries according to a landmarking policy.</claim-text>
</claim>
<claim id="CLM-00004" num="00004">
<claim-text>4. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, further comprising:
<claim-text>wherein the beginning of each block corresponds to the associated landmark entry; and</claim-text>
<claim-text>wherein recording the position of the at least one document entry includes recording the position of the document entry in the block as an offset from the beginning of the block.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00005" num="00005">
<claim-text>5. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein recording the position of the document entry includes recording a landmark identifier and a position offset for the document entry.</claim-text>
</claim>
<claim id="CLM-00006" num="00006">
<claim-text>6. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein recording the position of the document entry includes recording an entry identifier, the entry identifier configured to include an indicia of the document entry and to be associated to the position of the document entry.</claim-text>
</claim>
<claim id="CLM-00007" num="00007">
<claim-text>7. The method of <claim-ref idref="CLM-00006">claim 6</claim-ref>, wherein recording the entry identifier includes filtering the document entry.</claim-text>
</claim>
<claim id="CLM-00008" num="00008">
<claim-text>8. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, configured as a computer program product embodied in a computer readable medium.</claim-text>
</claim>
<claim id="CLM-00009" num="00009">
<claim-text>9. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the landmark directory includes, for each document, a landmark position listing configured to store the position of each landmark in the document.</claim-text>
</claim>
<claim id="CLM-00010" num="00010">
<claim-text>10. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein for each document entry, the repository index includes at least one location entry configured to store a landmark identifier and a position offset.</claim-text>
</claim>
<claim id="CLM-00011" num="00011">
<claim-text>11. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, further comprising transforming the edit instructions in an update transcript, the update transcript including instructions for updating the landmark directory and repository index.</claim-text>
</claim>
<claim id="CLM-00012" num="00012">
<claim-text>12. The method of <claim-ref idref="CLM-00003">claim 3</claim-ref>, wherein the landmark policy includes a fixed size partitioning of the document.</claim-text>
</claim>
</claims>
</us-patent-grant>
