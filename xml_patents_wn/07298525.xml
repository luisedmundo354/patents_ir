<us-patent-grant lang="EN" dtd-version="v4.2 2006-08-23" file="US07298525-20071120.XML" status="PRODUCTION" id="us-patent-grant" country="US" date-produced="20071106" date-publ="20071120">
<us-bibliographic-data-grant>
<publication-reference>
<document-id>
<country>US</country>
<doc-number>07298525</doc-number>
<kind>B2</kind>
<date>20071120</date>
</document-id>
</publication-reference>
<application-reference appl-type="utility">
<document-id>
<country>US</country>
<doc-number>10244382</doc-number>
<date>20020917</date>
</document-id>
</application-reference>
<us-application-series-code>10</us-application-series-code>
<priority-claims>
<priority-claim sequence="01" kind="national">
<country>JP</country>
<doc-number>2001-282601</doc-number>
<date>20010918</date>
</priority-claim>
</priority-claims>
<us-term-of-grant>
<us-term-extension>960</us-term-extension>
</us-term-of-grant>
<classifications-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>G</section>
<class>06</class>
<subclass>F</subclass>
<main-group>15</main-group>
<subgroup>00</subgroup>
<symbol-position>F</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20071120</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
</classifications-ipcr>
<classification-national>
<country>US</country>
<main-classification>358  19</main-classification>
<further-classification>358  316</further-classification>
<further-classification>358  319</further-classification>
<further-classification>358  303</further-classification>
<further-classification>358  313</further-classification>
<further-classification>358  322</further-classification>
<further-classification>382270</further-classification>
<further-classification>382252</further-classification>
<further-classification>382251</further-classification>
<further-classification>382266</further-classification>
</classification-national>
<invention-title id="d0e71">Image processing device and image processing program for processing a plurality of color signals formed of a plurality of color components</invention-title>
<references-cited>
<citation>
<patcit num="00001">
<document-id>
<country>US</country>
<doc-number>5387987</doc-number>
<kind>A</kind>
<name>Ino</name>
<date>19950200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>358  303</main-classification></classification-national>
</citation>
<citation>
<patcit num="00002">
<document-id>
<country>US</country>
<doc-number>6089691</doc-number>
<kind>A</kind>
<name>Kakutani</name>
<date>20000700</date>
</document-id>
</patcit>
<category>cited by other</category>
<classification-national><country>US</country><main-classification>347 15</main-classification></classification-national>
</citation>
<citation>
<patcit num="00003">
<document-id>
<country>US</country>
<doc-number>6099105</doc-number>
<kind>A</kind>
<name>Kakutani</name>
<date>20000800</date>
</document-id>
</patcit>
<category>cited by other</category>
<classification-national><country>US</country><main-classification>347 15</main-classification></classification-national>
</citation>
<citation>
<patcit num="00004">
<document-id>
<country>US</country>
<doc-number>6195468</doc-number>
<kind>B1</kind>
<name>Yoshida</name>
<date>20010200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>382270</main-classification></classification-national>
</citation>
<citation>
<patcit num="00005">
<document-id>
<country>US</country>
<doc-number>6215561</doc-number>
<kind>B1</kind>
<name>Kakutani</name>
<date>20010400</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>358  19</main-classification></classification-national>
</citation>
<citation>
<patcit num="00006">
<document-id>
<country>US</country>
<doc-number>6625327</doc-number>
<kind>B1</kind>
<name>Ohshima et al.</name>
<date>20030900</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>382270</main-classification></classification-national>
</citation>
<citation>
<patcit num="00007">
<document-id>
<country>JP</country>
<doc-number>A 59-201864</doc-number>
<date>19841100</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
</references-cited>
<number-of-claims>30</number-of-claims>
<us-exemplary-claim>1</us-exemplary-claim>
<us-field-of-classification-search>
<classification-national>
<country>US</country>
<main-classification>358  19</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>358  316</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>358  319</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>358  313</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>358  322</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>358  303</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>382270</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>382252</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>382251</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>382266</main-classification>
</classification-national>
</us-field-of-classification-search>
<figures>
<number-of-drawing-sheets>22</number-of-drawing-sheets>
<number-of-figures>30</number-of-figures>
</figures>
<us-related-documents>
<related-publication>
<document-id>
<country>US</country>
<doc-number>20030053098</doc-number>
<kind>A1</kind>
<date>20030320</date>
</document-id>
</related-publication>
</us-related-documents>
<parties>
<applicants>
<applicant sequence="001" app-type="applicant-inventor" designation="us-only">
<addressbook>
<last-name>Hagai</last-name>
<first-name>Naoki</first-name>
<address>
<city>Komaki</city>
<country>JP</country>
</address>
</addressbook>
<nationality>
<country>JP</country>
</nationality>
<residence>
<country>JP</country>
</residence>
</applicant>
<applicant sequence="002" app-type="applicant-inventor" designation="us-only">
<addressbook>
<last-name>Kuno</last-name>
<first-name>Masashi</first-name>
<address>
<city>Ohbu</city>
<country>JP</country>
</address>
</addressbook>
<nationality>
<country>JP</country>
</nationality>
<residence>
<country>JP</country>
</residence>
</applicant>
<applicant sequence="003" app-type="applicant-inventor" designation="us-only">
<addressbook>
<last-name>Kondo</last-name>
<first-name>Masaki</first-name>
<address>
<city>Toyoake</city>
<country>JP</country>
</address>
</addressbook>
<nationality>
<country>JP</country>
</nationality>
<residence>
<country>JP</country>
</residence>
</applicant>
<applicant sequence="004" app-type="applicant-inventor" designation="us-only">
<addressbook>
<last-name>Ueda</last-name>
<first-name>Masashi</first-name>
<address>
<city>Nagoya</city>
<country>JP</country>
</address>
</addressbook>
<nationality>
<country>JP</country>
</nationality>
<residence>
<country>JP</country>
</residence>
</applicant>
<applicant sequence="005" app-type="applicant-inventor" designation="us-only">
<addressbook>
<last-name>Nishihara</last-name>
<first-name>Masahiro</first-name>
<address>
<city>Nagoya</city>
<country>JP</country>
</address>
</addressbook>
<nationality>
<country>JP</country>
</nationality>
<residence>
<country>JP</country>
</residence>
</applicant>
</applicants>
<agents>
<agent sequence="01" rep-type="attorney">
<addressbook>
<orgname>Oliff &amp; Berridge, PLC</orgname>
<address>
<country>unknown</country>
</address>
</addressbook>
</agent>
</agents>
</parties>
<assignees>
<assignee>
<addressbook>
<orgname>Brother Kogyo Kabushiki Kaisha</orgname>
<role>03</role>
<address>
<city>Nagoya</city>
<country>JP</country>
</address>
</addressbook>
</assignee>
</assignees>
<examiners>
<primary-examiner>
<last-name>Lamb</last-name>
<first-name>Twyler</first-name>
<department>2625</department>
</primary-examiner>
<assistant-examiner>
<last-name>Zheng</last-name>
<first-name>Jacky X.</first-name>
</assistant-examiner>
</examiners>
</us-bibliographic-data-grant>
<abstract id="abstract">
<p id="p-0001" num="0000">In a halftone module, it is judged whether or not the value “rate” for each pixel is greater than zero (0). In other words, it is judged whether or not the eight-bit input data Iin of each pixel is around a half of the relative density value for a small dot of a corresponding color. If the eight-bit input data Iin of the subject pixel is near to a half of the relative density value for a small dot, noise is added to the threshold values Ta, Tb, and Tc. The noise-added threshold values Ta′, Tb′, and Tc′ are used in the comparing process.</p>
</abstract>
<drawings id="DRAWINGS">
<figure id="Fig-EMI-D00000" num="00000">
<img id="EMI-D00000" he="173.65mm" wi="217.68mm" file="US07298525-20071120-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00001" num="00001">
<img id="EMI-D00001" he="219.63mm" wi="154.52mm" orientation="landscape" file="US07298525-20071120-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00002" num="00002">
<img id="EMI-D00002" he="231.90mm" wi="173.65mm" orientation="landscape" file="US07298525-20071120-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00003" num="00003">
<img id="EMI-D00003" he="199.47mm" wi="110.24mm" file="US07298525-20071120-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00004" num="00004">
<img id="EMI-D00004" he="259.67mm" wi="182.63mm" file="US07298525-20071120-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00005" num="00005">
<img id="EMI-D00005" he="215.48mm" wi="153.75mm" file="US07298525-20071120-D00005.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00006" num="00006">
<img id="EMI-D00006" he="186.61mm" wi="109.30mm" file="US07298525-20071120-D00006.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00007" num="00007">
<img id="EMI-D00007" he="208.20mm" wi="118.45mm" file="US07298525-20071120-D00007.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00008" num="00008">
<img id="EMI-D00008" he="258.49mm" wi="195.50mm" file="US07298525-20071120-D00008.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00009" num="00009">
<img id="EMI-D00009" he="139.11mm" wi="175.01mm" file="US07298525-20071120-D00009.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00010" num="00010">
<img id="EMI-D00010" he="212.26mm" wi="109.56mm" orientation="landscape" file="US07298525-20071120-D00010.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00011" num="00011">
<img id="EMI-D00011" he="140.29mm" wi="134.62mm" file="US07298525-20071120-D00011.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00012" num="00012">
<img id="EMI-D00012" he="256.54mm" wi="182.96mm" file="US07298525-20071120-D00012.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00013" num="00013">
<img id="EMI-D00013" he="219.96mm" wi="178.31mm" orientation="landscape" file="US07298525-20071120-D00013.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00014" num="00014">
<img id="EMI-D00014" he="272.97mm" wi="187.96mm" file="US07298525-20071120-D00014.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00015" num="00015">
<img id="EMI-D00015" he="128.78mm" wi="133.86mm" file="US07298525-20071120-D00015.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00016" num="00016">
<img id="EMI-D00016" he="257.64mm" wi="172.13mm" file="US07298525-20071120-D00016.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00017" num="00017">
<img id="EMI-D00017" he="252.31mm" wi="152.99mm" orientation="landscape" file="US07298525-20071120-D00017.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00018" num="00018">
<img id="EMI-D00018" he="222.17mm" wi="171.03mm" orientation="landscape" file="US07298525-20071120-D00018.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00019" num="00019">
<img id="EMI-D00019" he="273.30mm" wi="186.61mm" file="US07298525-20071120-D00019.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00020" num="00020">
<img id="EMI-D00020" he="136.91mm" wi="89.83mm" file="US07298525-20071120-D00020.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00021" num="00021">
<img id="EMI-D00021" he="263.06mm" wi="188.89mm" file="US07298525-20071120-D00021.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00022" num="00022">
<img id="EMI-D00022" he="277.11mm" wi="186.52mm" file="US07298525-20071120-D00022.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
</drawings>
<description id="description">
<?BRFSUM description="Brief Summary" end="lead"?>
<heading id="h-0001" level="1">BACKGROUND OF THE INVENTION</heading>
<p id="p-0002" num="0001">1. Field of the Invention</p>
<p id="p-0003" num="0002">The present invention relates to an image processing device and an image processing program for processing a plurality of color signals formed of a plurality of color components to produce image signals for a prescribed image.</p>
<p id="p-0004" num="0003">2. Description of Related Art</p>
<p id="p-0005" num="0004">In recent years, color printers of the type that eject multiple colors of ink from the print head, commonly known as inkjet printers, have become widely popularized as a computer output device. These inkjet printers are widely used to print images that have been processed by a computer or the like in multiple colors and multiple gradations. Gradations corresponding to inputted density data are rendered by controlling the rate of dot generation within a particular region.</p>
<p id="p-0006" num="0005">One method based on this line of thinking is called a bi-level error-diffusion halftone method. This method controls the generation of dots for each pixel such that the density error generated over the entire image is drastically reduced. To accomplish this, error generated at each pixel caused by a disparity between the intended tone represented by the inputted density data and the actual density represented by the existence of dots is spread to neighboring unprocessed pixels. In this method, whether or not to form a dot at each pixel is determined based on correction data that incorporates the error diffused in the inputted density data.</p>
<p id="p-0007" num="0006">In recent years, various technologies other than the error-diffusion method have been proposed for enhancing the gradient depiction of inkjet printers. One such technology is a printing device and method employing light and dark ink, such as those disclosed in U.S. Pat. Nos. 6,089,691 and 6,099,105. This printing device uses high- and low-density inks for the same colors and controls the ejection of both shades of ink to achieve excellent gradation in the printing process.</p>
<p id="p-0008" num="0007">Another printing device described in Japanese Unexamined Patent Application Publication No. SHO-59-201864 has been proposed as a method for rendering multiple gradations. This device can vary the density per unit surface area in multiple gradations by forming two types of dots differing in ink concentration and dot diameter. This printing device forms one pixel using four dots and is capable of printing images in multiple levels of density by varying the generated frequency of high- and low-density dots within each pixel.</p>
<p id="p-0009" num="0008">Both of the methods proposed in the U.S. Pat. Nos. 6,089,691 and 6,099,105 and in the Japanese Unexamined Patent Application Publication No. SHO-59-201864 render multiple tones of each color hue not by bi-level method of specifying whether each color dot is on or off, but by a three-level or multi-level method using light and dark dots (variable-density dots).</p>
<p id="p-0010" num="0009"><figref idref="DRAWINGS">FIG. 1</figref> is a block diagram showing an outline of the processes in the conventional bi-level error-diffusion halftone method. In this conventional method, an output value Iout is a binary number indicating whether a dot is to be outputted or not. When an input value Iin for one pixel is inputted, values are read from an error buffer <b>109</b>. The values are errors, which have been obtained at pixels that have been processed previously and that are located near to the subject pixel. A distribution matrix <b>103</b> is used to calculate the amount of the portion of the errors, which should be diffused to the present pixel. A corrected input value Iin′ is obtained by adding the portion of the errors to the input value Iin. A comparator <b>107</b> compares the corrected input value Iin′ to a threshold read from a threshold memory <b>105</b>. A dot is outputted when the corrected input value Iin′ is larger than the threshold and not outputted when the corrected input value Iin′ is smaller than the threshold. Next a converter <b>102</b> converts the value to 255 when a dot is outputted and to 0 when a dot is not outputted. Next, the difference between the corrected input value Iin′ and the determined value 255 or 0 is stored in the error buffer <b>109</b>. Because this error diffusion method determines only two levels of gradation per pixel, this method is referred to as a bi-level error-diffusion halftone process.</p>
<p id="p-0011" num="0010"><figref idref="DRAWINGS">FIG. 2</figref> is a block diagram showing an overview of processes performed in a multilevel error-diffusion halftone method that determines three or more levels of gradations per pixel by using an error-diffusion process. The multilevel error-diffusion halftone method is employed when a printer used has n levels of gradation per pixel, where n is an integer greater than or equal to three (3). The method shown in this block diagram is for determining four levels per pixel. In order from the level of greatest density, these four levels include large dots, medium dots, small dots, and non-dots. Accordingly, the output Iout obtained by this method will be one of four values: that is, values indicative of “output large dot”, “output medium dot”, “output small dot”, and “output no dot”.</p>
<p id="p-0012" num="0011">As shown in <figref idref="DRAWINGS">FIG. 2</figref>, the multilevel error-diffusion halftone method is different from the bi-level error-diffusion halftone method in the two points described below:</p>
<p id="p-0013" num="0012">First, the threshold memory <b>105</b> stores therein three thresholds Ta, Tb, and Tc (where Ta&gt;Tb&gt;Tc).</p>
<p id="p-0014" num="0013">Secondly, a relative density table <b>112</b> is additionally provided. The relative density table <b>112</b> stores therein four different relative density values in correspondence with the four different values of outputs Iout (values indicative of “output large dot”, “Output medium dot”, “output small dot”, and “output no dot”).</p>
<p id="p-0015" num="0014">When the input value Iin for one pixel is inputted, the error value's, obtained at the previously processed pixels, are read from the error buffer <b>109</b>, and the distribution matrix <b>103</b> is used to calculate the error for the present pixel. A corrected input value Iin′ is then obtained by adding the error to the input value Iin. The comparator <b>107</b> compares the corrected input value Iin′ to each of the three thresholds Ta, Tb, and Tc, which are read from the threshold memory <b>105</b>. When comparing the corrected input value Iin′ to the three thresholds Ta, Th, Tc, the comparator <b>107</b> outputs: an output value Iout indicative of “output large dot” when the corrected input value Iin′ is greater than the threshold Ta; an output value Iout indicative of “output medium dot” when the corrected input value Iin′ is greater than threshold Tb but smaller than threshold Ta; an output value Iout indicative of “output small dot” when the corrected input value Iin′ is greater than threshold Tc but smaller than threshold Tb; and an output value Iout indicative of “output no dot” when the corrected input value Iin′ is smaller than threshold Tc. Next, the converter <b>102</b> selects one relative value from the relative value table <b>112</b>, based on whether the output is a large dot, medium dot, small dot, or no dot. The converter <b>102</b> then converts the output value Iout into the selected relative value R. The difference between the corrected input value Iin′ and the relative value R is recorded in the error buffer <b>109</b> as an error for the present pixel.</p>
<heading id="h-0002" level="1">SUMMARY OF THE INVENTION</heading>
<p id="p-0016" num="0015">It is noted that if a six-ink printer having the inks of C: cyan (normal cyan), M: magenta (normal magenta), Y: yellow, K: black, Lc: light cyan, and Lm: light magenta is used, a color correction process has to be executed before the multilevel error diffusion halftone process is executed. The color correction process is for converting original CMYK color data (C<sub>color </sub>(cyan), M<sub>color </sub>(magenta), Y<sub>color </sub>(yellow), K<sub>color </sub>(black)) into CMYKLcLm six-ink data (C<sub>in </sub>(normal cyan), M<sub>in </sub>(normal magenta), Y<sub>in </sub>(yellow), K<sub>in </sub>(black), Lc<sub>in</sub>, (light cyan), Lm<sub>in </sub>(light magenta)). The multilevel error-diffusion halftone process receives data C<sub>in</sub>, M<sub>in</sub>, Y<sub>in</sub>, K<sub>in</sub>, Lc<sub>in</sub>, or Lm<sub>in </sub>as the input value Iin, and converts the data into two-bit CMYKLcLm six-ink data (C<sub>out</sub>, M<sub>out</sub>, Y<sub>out</sub>, K<sub>out</sub>, Lc<sub>out</sub>, or Lm<sub>out</sub>) as the output value Iout.</p>
<p id="p-0017" num="0016">It is noted that normal cyan has the same color as the light cyan, but has darker or greater density than the light cyan. Similarly, normal magenta has the same color as the light magenta, but has darker or greater density than the light magenta.</p>
<p id="p-0018" num="0017">During the color correction process, in order to convert the cyan color data C<sub>color </sub>into normal cyan ink data C<sub>in </sub>and light cyan ink data Lc<sub>in</sub>, the color correction process employs a distribution curve DC as shown in <figref idref="DRAWINGS">FIG. 3(A)</figref>, wherein the dotted line is for normal ink and the solid line is for light ink. Similarly, in order to convert the magenta color data M<sub>color </sub>into normal magenta ink data M<sub>in </sub>and light magenta ink data Lm<sub>in</sub>, the color correction process employs another distribution curve DC similar to as shown in <figref idref="DRAWINGS">FIG. 3(A)</figref>. The thus obtained ink data (C<sub>in</sub>, M<sub>in</sub>, Lc<sub>in</sub>, or Lm<sub>in</sub>) is subjected, as the input value Iin, to the multilevel error-diffusion halftone process. It is noted that a distribution curve DC of another type shown in <figref idref="DRAWINGS">FIG. 3(B)</figref> can be used to convert each of cyan and magenta color data into normal ink data and light ink data.</p>
<p id="p-0019" num="0018">Compared to other methods for controlling dot formation, the bi-level error-diffusion halftone method of <figref idref="DRAWINGS">FIG. 1</figref> is superior as a bi-level method in greatly reducing errors in the overall image and improving image quality.</p>
<p id="p-0020" num="0019">When performing the multilevel error-diffusion halftone method, however, a problem known as false contours occurs in images having continuous-tone sections.</p>
<p id="p-0021" num="0020">Especially, when using the six-color printer, the cyan and magenta colors use both a normal (dark) ink and a light ink. False contours occur when switching between these two shades, and results in degraded image quality.</p>
<p id="p-0022" num="0021">In view of the foregoing, it is an object of the present invention to provide an improved image processing device and image processing program capable of rapidly and effectively preventing such false contours.</p>
<p id="p-0023" num="0022">In order to solve this and other objects, the present invention provides an image processing device, comprising: an inputting portion receiving input data indicative of a density value of one color component for one pixel in a desired image; a judging unit judging whether or not the density value of the input data is near to a reference value; a threshold storing portion previously storing therein a predetermined threshold; a noise adding portion adding a noise to either one of the density value of the input data and the threshold when it is judged that the density value of the input data is near to the reference value; a correcting portion correcting the input data by a correction amount that is determined dependently on an error value which is determined at at least one pixel that has been already-processed and that is located near to the subject pixel, thereby converting the input data into corrected data; a comparing portion comparing the corrected data with the threshold; an outputting portion outputting output data based on the compared results, thereby converting the corrected data into the output data; a relative density setting portion setting a relative density value that corresponds to the output data; and an error calculating portion calculating an error value for the subject pixel based on a difference between the corrected data and the relative density value.</p>
<p id="p-0024" num="0023">According to another aspect, the present invention provides an image processing device for producing image signals indicative of a desired image by processing a plurality of color signals for a plurality of color components, the image processing device comprising: a storage device storing a plurality of relative values in correspondence with a plurality of different parameters; an input device receiving, as a color signal, an input value indicative of color density at one color component for one pixel constituting a desired image; an extracting portion extracting one relative value from the relative value storage device based on a parameter that corresponds to the input value; a judging portion judging whether or not the input value is near to a one-half of the extracted relative value; an adding portion adding a noise signal to either one of the input value and a threshold when the input value is near to the one-half of the extracted relative value; and a converting portion converting the input value into an output value by comparing the input value with the threshold, and outputting the output value as an image signal.</p>
<p id="p-0025" num="0024">According to a further aspect, the present invention provides an image processing device for producing image signals indicative of a desired image by processing a plurality of color signals for a plurality of color components, the image processing device comprising: an input portion receiving an input value of a first color component of a desired image and an input value of a second color component of the desired image; a judging portion performing at least one of: a first judging operation judging whether or not the input value of the first color component indicates a density level near to a predetermined mixing-start-point density level where the first color component starts being mixed with the second color component, and a second judging operation judging whether or not the input value of the second color component indicates a density level near to the predetermined mixing-start-point density level; an adding portion performing a first noise-adding operation when the judging portion determines that the input value of the first color component indicates a density level near to the predetermined mixing-start-point density level and performing a second noise-adding operation when the judging portion determines that the input value of the second color component indicates a density level near to the predetermined mixing-start-point density level, the first noise-adding operation being for adding a first noise signal to either one of a threshold for the first color component and the input value for the first color component, the second noise-adding operation being for adding a second noise signal to either one of a threshold for the second color component and the input value for the second color component; and a converting portion comparing the input value of the first color component with the corresponding threshold, thereby converting the input value of the first color component into an output value of the first color component, and comparing the input value of the second color component with the corresponding threshold, thereby converting the input value of the second color component into an output value of the second color component.</p>
<p id="p-0026" num="0025">According to still another aspect, the present invention provides an image processing device for producing image signals indicative of a desired image by processing a plurality of color signals for a plurality of color components, the image processing device comprising: an input portion receiving an input value of a first color component of a desired image; a judging portion judging whether or not the input value of the first color component indicates a density level around a predetermined uniform density level, at which the input value of the first color component becomes approximately uniform; an adding portion adding a first noise signal to either one of the input value of the first color component and a threshold for the input value of the first color component when the judging portion determines that the input value of the first color component indicates a density level near to the predetermined uniform density level; and a converting portion comparing the input value of the first color component with the threshold, thereby converting the input value of the first color component into an output value of the first color component.</p>
<p id="p-0027" num="0026">According to another aspect, the present invention provides an image processing device for producing image signals indicative of a desired image by processing a plurality of color signals for a plurality of color components, the image processing device comprising: an input portion receiving an input value of a first color component of a desired image and an input value of a second color component of the desired image; a judging portion judging whether or not the input value of the second color component indicates that the input value of the first color component has a density level around a predetermined uniform density level, at which the input value of the first color component becomes approximately uniform; an adding portion adding a second noise signal to either one of the input value of the second color component and a threshold for the input value of the second color component when the judging portion determines that the input value of the second color component indicates that the input value of the first color component has the density level near to the predetermined uniform density level; and a converting portion comparing the input value of the second color component with the corresponding threshold, thereby converting the input value of the second color component into an output value of the second color component.</p>
<p id="p-0028" num="0027">According to another aspect, the present invention provides a program for being executed by a computer to process an image, the program comprising: a program of receiving input data indicative of a density value of one color component for one pixel in a desired image; a program of judging whether or not the density value of the input data is near to a reference value; a program of adding a noise to either one of the density value of the input data and a threshold when it is judged that the density value of the input data is near to the reference value; a program of correcting the input data by a correction amount that is determined dependently on an error value which is determined at at least one pixel that has been already-processed and that is located near to the subject pixel, thereby converting the input data into corrected data; a program of comparing the corrected data with the threshold; a program of outputting output data based on the compared results, thereby converting the corrected data into the output data; a program of setting a relative density value that corresponds to the output data; and a program of calculating an error value for the subject pixel based on a difference between the corrected data and the relative density value.</p>
<?BRFSUM description="Brief Summary" end="tail"?>
<?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?>
<description-of-drawings>
<heading id="h-0003" level="1">BRIEF DESCRIPTION OF THE DRAWINGS</heading>
<p id="p-0029" num="0028">The above and other objects, features and advantages of the invention will become more apparent from reading the following description of the preferred embodiments taken in connection with the accompanying drawings in which:</p>
<p id="p-0030" num="0029"><figref idref="DRAWINGS">FIG. 1</figref> is a block diagram showing an outline of the processes in the conventional bi-level error-diffusion halftone method;</p>
<p id="p-0031" num="0030"><figref idref="DRAWINGS">FIG. 2</figref> is a block diagram showing an outline of the processes in the conventional multilevel error-diffusion halftone method;</p>
<p id="p-0032" num="0031"><figref idref="DRAWINGS">FIGS. 3(A) and 3(B)</figref> are explanatory diagrams showing examples of distribution curves DC used to convert each of cyan and magenta color components into light ink and normal ink;</p>
<p id="p-0033" num="0032"><figref idref="DRAWINGS">FIG. 4</figref> is a block diagram showing the general configuration of an image processing system employing a personal computer as an image processing device according to a first embodiment of the present invention;</p>
<p id="p-0034" num="0033"><figref idref="DRAWINGS">FIG. 5</figref> shows the general construction of a printer provided in the image processing system of <figref idref="DRAWINGS">FIG. 4</figref>;</p>
<p id="p-0035" num="0034"><figref idref="DRAWINGS">FIG. 6(A)</figref> is an explanatory diagram showing the general internal structure of an inkjet print head provided in the printer of <figref idref="DRAWINGS">FIG. 5</figref>;</p>
<p id="p-0036" num="0035"><figref idref="DRAWINGS">FIG. 6(B)</figref> is an explanatory diagram showing nozzles formed on the inkjet print head;</p>
<p id="p-0037" num="0036"><figref idref="DRAWINGS">FIG. 7(A)</figref> is an explanatory diagram showing the construction of a piezoelectric element PE and a nozzle Nz provided in the inkjet print head of <figref idref="DRAWINGS">FIG. 6(B)</figref>;</p>
<p id="p-0038" num="0037"><figref idref="DRAWINGS">FIG. 7(B)</figref> shows how the piezoelectric element FE is actuated to eject an ink particle through the nozzle Nz;</p>
<p id="p-0039" num="0038"><figref idref="DRAWINGS">FIG. 8</figref> is a block diagram showing the internal construction of a control circuit in the printer of <figref idref="DRAWINGS">FIG. 5</figref>;</p>
<p id="p-0040" num="0039"><figref idref="DRAWINGS">FIG. 9</figref> is a block diagram showing the internal construction of the personal computer of <figref idref="DRAWINGS">FIG. 4</figref>;</p>
<p id="p-0041" num="0040"><figref idref="DRAWINGS">FIG. 10</figref> is an explanatory view illustrating an operation of a printer driver in the personal computer of <figref idref="DRAWINGS">FIG. 4</figref>;</p>
<p id="p-0042" num="0041"><figref idref="DRAWINGS">FIG. 11</figref> is an explanatory diagram showing an example of a distribution curve DC used to convert each of cyan and magenta color components into light ink and normal ink according to the embodiment;</p>
<p id="p-0043" num="0042"><figref idref="DRAWINGS">FIG. 12(A)</figref> is an explanatory diagram showing an example of a threshold table Th used in the multilevel error-diffusion halftone process of the present embodiment;</p>
<p id="p-0044" num="0043"><figref idref="DRAWINGS">FIG. 12(B)</figref> is an explanatory diagram showing an example of a relative density table RT used in the multilevel error-diffusion halftone process of the present embodiment;</p>
<p id="p-0045" num="0044"><figref idref="DRAWINGS">FIG. 12(C)</figref> is an explanatory diagram showing an example of a distribution matrix, used in the multilevel error-diffusion halftone process of the present embodiment;</p>
<p id="p-0046" num="0045"><figref idref="DRAWINGS">FIG. 13(A)</figref> is a functional block diagram showing the multilevel error-diffusion halftone process according to the first embodiment;</p>
<p id="p-0047" num="0046"><figref idref="DRAWINGS">FIG. 13(B)</figref> is a flowchart illustrating the error-diffusion multilevel halftone process according to the first embodiment;</p>
<p id="p-0048" num="0047"><figref idref="DRAWINGS">FIG. 14</figref> shows an example of a normal cyan image represented by eight-bit normal-cyan input data Cin;</p>
<p id="p-0049" num="0048"><figref idref="DRAWINGS">FIG. 15(A)</figref> shows the relationship between the normal cyan input data (smoothly-decreasing line C) and the normal-cyan output average (rapidly-vibrating, decreasing line C′) obtained by the conventional multilevel error-diffusion halftone process;</p>
<p id="p-0050" num="0049"><figref idref="DRAWINGS">FIG. 15(B)</figref> shows the relationship between the normal cyan input data (smoothly-decreasing line C) and the normal cyan output value average (rapidly-vibrating, decreasing line C′) obtained by the multilevel error-diffusion halftone process of the first embodiment;</p>
<p id="p-0051" num="0050"><figref idref="DRAWINGS">FIG. 15(C)</figref> shows a print sample obtained by the conventional multilevel error-diffusion halftone process;</p>
<p id="p-0052" num="0051"><figref idref="DRAWINGS">FIG. 15(D)</figref> shows a print sample obtained by the multilevel error-diffusion halftone process of the present embodiment;</p>
<p id="p-0053" num="0052"><figref idref="DRAWINGS">FIG. 16(A)</figref> is a functional block diagram showing the multilevel error-diffusion halftone process according to a second embodiment;</p>
<p id="p-0054" num="0053"><figref idref="DRAWINGS">FIG. 16(B)</figref> is a flowchart illustrating the error-diffusion multilevel halftone process according to the second embodiment;</p>
<p id="p-0055" num="0054"><figref idref="DRAWINGS">FIG. 17</figref> shows an example of a cyan image represented by eight-bit cyan color data C<sub>color </sub>inputted to the color correction module;</p>
<p id="p-0056" num="0055"><figref idref="DRAWINGS">FIG. 18(A)</figref> shows the relationship among the light cyan input data (smooth line Lc), and the light cyan output average (rapidly-vibrating line Lc′), the normal cyan input data (smooth line C), and the normal cyan output average (rapidly-vibrating line C′) according to the conventional multilevel error-diffusion halftone process;</p>
<p id="p-0057" num="0056"><figref idref="DRAWINGS">FIG. 18(B)</figref> shows the relationship among the light cyan input data (smooth line Lc), and the light cyan output average (rapidly-vibrating line Lc′), the normal cyan input data (smooth line C), and the normal cyan output average (rapidly-vibrating line C′) according to the multilevel error-diffusion halftone process of the second embodiment; and</p>
<p id="p-0058" num="0057"><figref idref="DRAWINGS">FIG. 19</figref> is a flowchart illustrating the error-diffusion multilevel halftone process according to a first modification of the second embodiment.</p>
</description-of-drawings>
<?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?>
<?DETDESC description="Detailed Description" end="lead"?>
<heading id="h-0004" level="1">DETAILED DESCRIPTION OF THE PREFERRED EMBODIMENTS</heading>
<p id="p-0059" num="0058">An image processing device according to preferred embodiments of the present invention will be described while referring to the accompanying drawings.</p>
<heading id="h-0005" level="1">First Embodiment</heading>
<p id="p-0060" num="0059"><figref idref="DRAWINGS">FIG. 4</figref> shows the configuration of an image processing system <b>1</b> according to a first embodiment of the present invention. The image processing system <b>1</b> is constructed from: a personal computer <b>90</b>, which is the image processing device of the present embodiment; and a color printer <b>22</b> which is an image forming device outputting an image processed by the personal computer <b>90</b>.</p>
<p id="p-0061" num="0060">As shown in <figref idref="DRAWINGS">FIG. 4</figref>, the image forming system <b>1</b> includes the personal computer <b>90</b> and, provided external to the personal computer <b>90</b>, a scanner <b>20</b>, the color printer <b>22</b>, a color display <b>21</b>, and an input device <b>19</b> such as a keyboard, mouse, and the like.</p>
<p id="p-0062" num="0061">The external scanner <b>20</b> reads color image data from an original color print and supplies original color image data ORG to the personal computer <b>90</b>. The original color image data ORG includes three color components: red (R), green (G), and blue (B).</p>
<p id="p-0063" num="0062">When desiring to print images, the personal computer <b>90</b> generates, based on the original color image data ORG or the like, two-bit CMYKLcLm output data (C<sub>out</sub>, M<sub>out</sub>, Y<sub>out</sub>, K<sub>out</sub>, Lc<sub>out</sub>, Lm<sub>out</sub>) required for printing, and supplies the CMYKLcLm output data as final color image data FNL to the color printer <b>22</b> so that the color printer <b>22</b> records the image data on a recording paper.</p>
<p id="p-0064" num="0063">First, the general construction of the printer <b>22</b> will be described with reference to <figref idref="DRAWINGS">FIG. 5</figref>.</p>
<p id="p-0065" num="0064">As shown in <figref idref="DRAWINGS">FIG. 5</figref>, the printer <b>22</b> includes: a carriage <b>31</b>, a platen <b>26</b>, a carriage motor <b>24</b> for is reciprocally moving the carriage <b>31</b> along the axial direction of the platen <b>26</b>, a print head <b>28</b> mounted on the carriage <b>31</b>, a mechanism (not shown) for driving the print head <b>28</b> and controlling ink ejection from the print head <b>28</b> to form dots, a paper feed motor <b>23</b>, a control panel <b>32</b>, and a control circuit <b>40</b> for controlling the exchange of signals between the control panel <b>32</b> and the paper feed motor <b>23</b>, carriage motor <b>24</b>, and print head <b>28</b>.</p>
<p id="p-0066" num="0065">A black ink cartridge <b>71</b> for black ink (K) and a color ink cartridge <b>72</b> for storing five ink colors, including normal cyan (C), normal magenta (M), yellow (Y), light cyan (Lc), and light magenta (Lm) are mounted in the carriage <b>31</b> of the printer <b>22</b>. A total of six ink ejection heads <b>61</b> through <b>66</b> are formed in the print head <b>28</b> on the bottom of the carriage <b>31</b>. As shown in <figref idref="DRAWINGS">FIG. 6(A)</figref>, a guiding tube <b>67</b> is formed on the bottom of the carriage <b>31</b> for guiding ink from each ink tank to the corresponding ink ejection head. When the black ink cartridge <b>71</b> and the color ink cartridge <b>72</b> are mounted on top of the carriage <b>31</b>, each guiding tube <b>67</b> is inserted through a connecting hole provided in each cartridge, allowing ink to be supplied from each ink cartridge to the ink ejection heads <b>61</b> through <b>66</b>.</p>
<p id="p-0067" num="0066">Here, the mechanism for ejecting ink will be briefly described. <figref idref="DRAWINGS">FIGS. 6(A) and 6(B)</figref> are explanatory diagrams showing the general internal structure of the print head <b>28</b>. When the black ink cartridge <b>71</b> and the color ink cartridges <b>72</b> are mounted on the carriage <b>31</b>, ink is drawn out of the ink cartridges by the capillary effect, as shown in <figref idref="DRAWINGS">FIG. 6(A)</figref>, and introduced into the ink ejection heads <b>61</b> through <b>66</b> of the print head <b>29</b> provided on the bottom of the carriage <b>31</b>. It is noted that when the ink cartridge is first mounted on the carriage <b>31</b>, a special pump device performs an operation to draw ink into each of the ink ejection heads <b>61</b> through <b>66</b>.</p>
<p id="p-0068" num="0067">As shown in <figref idref="DRAWINGS">FIG. 6(B)</figref>, <b>32</b> nozzles Nz are provided on each of the ink ejection heads <b>61</b> through <b>66</b>. Highly responsive piezoelectric elements PE are disposed one on each nozzle as an electrostrictive element. <figref idref="DRAWINGS">FIG. 7(A)</figref> shows a detailed configuration of the piezoelectric element PE and the nozzle Nz. As shown in <figref idref="DRAWINGS">FIG. 7(A)</figref>, each piezoelectric element PE is disposed adjacent to an ink channel <b>68</b> provided for guiding ink to the nozzle Nz. As is well known in the art, the piezoelectric element PE is a device capable of converting electricity to mechanical energy at an extremely high speed wherein a crystalline structure is deformed when a voltage is applied to the element. In the present embodiment, a voltage is applied across electrodes provided on either side of the piezoelectric element PE for a prescribed time interval, causing the element to expand only while the voltage is being applied. The expanded piezoelectric element PE deforms one side wall of the ink channel <b>68</b>, as shown in <figref idref="DRAWINGS">FIG. 7(B)</figref>. As a result, the capacity or volume of the ink channel <b>68</b> is constricted by the expansion of the piezoelectric element PE, and ink corresponding to the constricted portion becomes an ink particle Ip and is ejected at a high rate of speed via the end of the nozzle Nz. Printing is achieved by these ink particles Ip to form dots by permeating a paper P mounted on the platen <b>26</b>.</p>
<p id="p-0069" num="0068">According to the present embodiment, the piezoelectric element PE attains four levels of gradation for one dot. In order from the level of greatest density, these four levels include large dots, medium dots, small dots, and non-dots. The piezoelectric element PE is controlled to eject: a small droplet with a droplet amount of 6 pl for a small dot, a medium droplet with a droplet amount of 10 pl for a medium dot, and a large droplet with a droplet amount of 20 pl for a large dot.</p>
<p id="p-0070" num="0069">With the printer <b>22</b> having the hardware construction described above, the carriage motor <b>24</b> moves the carriage <b>31</b> reciprocally (that is, in the main scanning direction X), while the paper feed motor <b>23</b> rotates the platen <b>26</b> and other rollers to convey the paper P in the sub scanning direction Y. At the same time the printer <b>22</b> drives the piezoelectric elements PE for each of the ink ejection heads <b>61</b> through <b>66</b> on the print head <b>28</b> to eject each color of ink, forming dots on the paper P that combine to form multicolor images.</p>
<p id="p-0071" num="0070">The mechanism for conveying the paper P includes a gear train (not shown) for transferring the rotations of the paper feed motor <b>23</b> not only to the platen <b>26</b>, but also to paper conveying rollers. The mechanism for reciprocally moving the carriage <b>31</b> includes: a sliding shaft <b>34</b> that supports the carriage <b>31</b> parallel to the axis of the platen <b>26</b> such that the carriage <b>31</b> can slide along the sliding shaft <b>34</b>; a pulley <b>38</b> disposed near the opposite end of the sliding shaft <b>34</b> from the carriage motor <b>24</b>; an endless drive belt <b>36</b> stretched between the carriage motor <b>24</b> and pulley <b>38</b>; a positional sensor <b>39</b> for detecting the origin position of the carriage <b>31</b>; and the like.</p>
<p id="p-0072" num="0071">Next, the internal structure of the control circuit <b>40</b> will be described.</p>
<p id="p-0073" num="0072"><figref idref="DRAWINGS">FIG. 8</figref> is an explanatory diagram showing the internal construction of the control circuit <b>40</b>.</p>
<p id="p-0074" num="0073">As shown in <figref idref="DRAWINGS">FIG. 8</figref>, the control circuit <b>40</b> includes: a CPU <b>41</b>; a PROM <b>42</b>; a RAM <b>43</b>; a computer interface <b>44</b> for exchanging data with the personal computer <b>90</b>; a peripheral I/O unit <b>45</b> for exchanging signals with the paper feed motor <b>23</b>, carriage motor <b>24</b>, control panel <b>32</b>, positional sensor <b>39</b> and the like; a timer <b>46</b>; a forwarding buffer <b>47</b> for is outputting a dot on/off signal (two-bit CMYKLcLm output data) to the ink ejection heads <b>61</b> through <b>66</b>; and the like. The above elements and circuits are connected to one another via a bus. The control circuit <b>40</b> also includes a transmitter <b>51</b> for outputting driving waves at a prescribed frequency and a distributor <b>55</b> for distributing output from the transmitter <b>51</b> to the ink ejection heads <b>61</b> through <b>66</b> at a prescribed timing.</p>
<p id="p-0075" num="0074">After receiving the two-bit CMYKLcLm output data processed by the personal computer <b>90</b>, the control circuit <b>40</b> stores the two-bit CMYKLcLm output data temporarily in the RAM <b>43</b>, and subsequently outputs the two-bit CMYKLcLm output data to the forwarding buffer <b>47</b> at a prescribed timing.</p>
<p id="p-0076" num="0075">Next, the personal computer <b>90</b>, which serves as the image processing device of the present embodiment, will be described.</p>
<p id="p-0077" num="0076">As shown in <figref idref="DRAWINGS">FIG. 9</figref>, the personal computer <b>90</b> is internally provided with a CPU <b>2</b>, a RAM <b>4</b>, a ROM <b>6</b>, a CD-ROM device <b>8</b>, a hard disk device <b>10</b>, an input/output interface (I/O) <b>12</b>, and a network control unit <b>14</b>, all of which are connected with one another via a bus <b>16</b>.</p>
<p id="p-0078" num="0077">The input/output interface <b>12</b> is connected to the scanner <b>20</b>, the input device <b>19</b>, the color display <b>21</b>, and the color printer <b>22</b> (<figref idref="DRAWINGS">FIG. 4</figref>).</p>
<p id="p-0079" num="0078">The network control unit <b>14</b> is connected to a predetermined network such as the Internet.</p>
<p id="p-0080" num="0079">The hard disk device <b>10</b> previously stores therein data of an operating system program <b>91</b>, an application program <b>95</b>, a video driver program <b>92</b>, and a printer driver program <b>96</b> (<figref idref="DRAWINGS">FIG. 4</figref>). It is noted that the data of the programs <b>91</b>, <b>92</b>, <b>95</b>, and <b>96</b> may be stored originally in a CD-ROM and read via the CD-ROM device <b>8</b> into the hard disk device <b>10</b>. Or, the data of the programs <b>91</b>, <b>92</b>, <b>95</b>, and <b>96</b> may be transferred from the Internet via the NCU <b>14</b> into the hard disk device <b>10</b>. The hard disk device <b>10</b> also stores therein: a color correction memory <b>10</b><i>a</i>, a threshold memory <b>10</b><i>b</i>, a relative density value memory <b>10</b><i>c</i>, and a distribution matrix memory <b>10</b><i>d</i>. As will be described later, the color correction memory <b>10</b><i>a </i>stores therein a color correction table CT (<figref idref="DRAWINGS">FIG. 4</figref>). The color correction table CT contains a distribution curve DC (<figref idref="DRAWINGS">FIG. 11</figref>). The threshold memory <b>10</b><i>b </i>stores therein a threshold table ThT (<figref idref="DRAWINGS">FIG. 12(A)</figref>). The relative density value memory <b>10</b><i>c </i>stores therein a plurality of relative density tables RT (<figref idref="DRAWINGS">FIG. 12(B)</figref>). The distribution matrix memory <b>10</b><i>d </i>stores therein a distribution matrix DM (<figref idref="DRAWINGS">FIG. 12(C)</figref>).</p>
<p id="p-0081" num="0080">The ROM <b>6</b> previously stores therein various data. The ROM <b>6</b> may store therein data of the programs <b>91</b>, <b>92</b>, <b>95</b>, and <b>96</b>, the color correction memory <b>10</b><i>a</i>, the threshold memory <b>10</b><i>b</i>, the relative density value memory <b>10</b><i>c</i>, and the distribution matrix memory <b>10</b><i>d. </i></p>
<p id="p-0082" num="0081">The RAM <b>4</b> is used for temporarily storing various types of data. As will be described later, an error buffer <b>4</b><i>a </i>is prepared in the RAM <b>4</b>.</p>
<p id="p-0083" num="0082">The CPU <b>2</b> is for controlling the entire device of the personal computer <b>90</b>. The CPU <b>2</b> executes the programs <b>91</b>, <b>92</b>, <b>95</b>, and <b>96</b>, whose data is read into the RAM <b>4</b> from the hard disk device <b>10</b>.</p>
<p id="p-0084" num="0083">As shown in <figref idref="DRAWINGS">FIG. 4</figref>, the application program <b>95</b> operates under the operating system <b>91</b>. The video driver <b>92</b> and the printer driver <b>96</b> are integrated with the operating system <b>91</b>. The application program <b>95</b> is used to perform image retouching or the like, and reads an image from the external scanner <b>20</b> and displays this image on the color display <b>21</b> via the video driver <b>92</b> while performing various processes on the image.</p>
<p id="p-0085" num="0084">When the application program <b>95</b> issues a print command, the printer driver <b>96</b> receives image data from the application program <b>95</b>, and converts the image data into two-bit CMYKLcLM signals (final color image data FNL) that can be printed by the printer <b>22</b>.</p>
<p id="p-0086" num="0085">As shown in <figref idref="DRAWINGS">FIG. 4</figref>, the printer driver <b>96</b> includes: a rasterizer <b>97</b>, a color correction module <b>98</b>, and a halftone module <b>99</b>. The color correction module <b>98</b> uses the color correction table CT. The halftone module <b>99</b> uses the threshold table ThT, the relative density table RT, and the distribution matrix DM. The halftone module <b>99</b> prepares the error buffer <b>4</b><i>a </i>in the RAM <b>4</b>.</p>
<p id="p-0087" num="0086">As shown in <figref idref="DRAWINGS">FIG. 10</figref>, the rasterizer <b>97</b> is for converting color image data handled by the application program <b>95</b> into color component data per dot unit. The color component data is in the form of eight-bit CMYK color data (C<sub>color</sub>, M<sub>color</sub>, Y<sub>color</sub>, K<sub>color</sub>) for cyan, magenta, yellow, and black color components. Each data C<sub>color</sub>, M<sub>color</sub>, Y<sub>color</sub>, or K<sub>color </sub>has a value in the range of 0 to 255.</p>
<p id="p-0088" num="0087">The color correction module <b>98</b> is for performing color correction on the eight-bit CMYK color data (C<sub>color</sub>, M<sub>color</sub>, Y<sub>color</sub>, K<sub>color</sub>) according to the colors and coloring properties of ink used by the printer <b>22</b>. Because the printer <b>22</b> creates images by using ink of six colors C: cyan, M: magenta, Y: yellow, K: black, Lc: light cyan, and Lm: light magenta, the color correction module <b>98</b> converts the eight-bit CMYK color data (C<sub>color</sub>, M<sub>color</sub>, Y<sub>color</sub>, K<sub>color</sub>) into eight-bit CMYKLcLm ink data (C<sub>in</sub>, M<sub>in</sub>, Y<sub>in</sub>, K<sub>in</sub>, Lc<sub>in</sub>, Lm<sub>in</sub>) while referring to the color correction table CT. Each data C<sub>in</sub>, M<sub>in</sub>, Y<sub>in</sub>, K<sub>in</sub>, Lc<sub>in</sub>, or Lm<sub>in</sub>, has a value also in the range of 0 to 255.</p>
<p id="p-0089" num="0088">The color correction table CT includes data indicative of the distribution curve DC shown in <figref idref="DRAWINGS">FIG. 11</figref> for each of cyan and magenta components. In this graph, the dotted line is for normal ink and the solid line is for light ink. While referring to the distribution curve DC for cyan color, the color correction module <b>98</b> prepares eight-bit normal cyan ink data C<sub>in </sub>and eight-bit light cyan ink data Lc<sub>in</sub>. based on the original eight-bit cyan color data C<sub>color</sub>.</p>
<p id="p-0090" num="0089">More specifically, the color correction module <b>98</b> determines the level C<sub>in </sub>of normal cyan ink and the level Lc<sub>in </sub>of light cyan ink, while referring to the distribution curve DC and based on the original color value C <sub>color</sub>. For example, when the original value C<sub>color </sub>is 30, the level Lc<sub>in </sub>of light cyan is set to 51 and the level C<sub>in </sub>of normal cyan is set to 1. In this way, the color correction module <b>98</b> converts eight-bit cyan color data C<sub>color </sub>into eight-bit normal cyan ink data C<sub>in </sub>and eight-bit light cyan ink data Lc<sub>in</sub>.</p>
<p id="p-0091" num="0090">Similarly, while referring to the distribution curve DC for magenta color, the color correction module <b>98</b> prepares eight-bit normal magenta ink data M<sub>in </sub>and eight-bit light magenta ink data Lm<sub>in </sub>based on the original eight-bit magenta color data M<sub>color</sub>. Thus, the color correction module <b>98</b> converts eight-bit magenta color data M<sub>color </sub>into eight-bit normal magenta ink data M<sub>in </sub>and eight-bit light magenta ink data Lm<sub>in</sub>.</p>
<p id="p-0092" num="0091">As shown in <figref idref="DRAWINGS">FIG. 10</figref>, the thus obtained eight-bit CMYKLcLm ink data (C<sub>in</sub>, M<sub>in</sub>, Y<sub>in</sub>, K<sub>in</sub>, Lc<sub>in</sub>, Lm<sub>in</sub>) is then outputted to the halftone module <b>99</b>.</p>
<p id="p-0093" num="0092">The halftone module <b>99</b> is for receiving the eight-bit CMYKLcLm ink data (C<sub>in</sub>, M<sub>in</sub>, Y<sub>in</sub>, K<sub>in</sub>, Lc<sub>in</sub>, Lm<sub>in</sub>) as input data Iin, converting the input data Iin into two-bit CMYKLcLm ink data (C<sub>in</sub>, M<sub>in</sub>, Y<sub>in</sub>, K<sub>in</sub>, Lc<sub>in</sub>, Lm<sub>in</sub>), and outputting the resultant two-bit CMYKLcLm ink data (C<sub>out</sub>, M<sub>out</sub>, Y<sub>out</sub>, K<sub>out</sub>, Lc<sub>out</sub>, Lm<sub>out</sub>) as output data Iout to the printer <b>22</b>. Each output data Iout (=C<sub>out</sub>, M<sub>out</sub>, Y<sub>out</sub>, K<sub>out</sub>, Lc<sub>out</sub>, or Lm<sub>out</sub>) has a multi-level (two-bit) value of 0, 1, 2, or 3. The thus obtained multi-level halftone image data renders density for a certain surface area according to the existence of ink in dot units. As described already, the printer <b>22</b> has four levels of gradation per pixel by ejecting a large dot, a medium dot, a small dot, and a non-dot. Accordingly, the halftone module <b>99</b> determines four levels of gradation per pixel such that output data Iout with a value of 0 is indicative of “output no dot”, output data Tout with a value of 1 is indicative of “output small dot”, output data Iout with a value of <b>2</b> is indicative of “output medium dot”, and output data Iout with a value of 3 is indicative of “output large dot”.</p>
<p id="p-0094" num="0093">In this way, by the CPU <b>2</b> executing the halftone module <b>99</b>, the personal computer <b>90</b> serves as an error-diffusion multilevel halftone processor of the present embodiment to convert eight-bit CMYKLcLm input data Iin into two-bit CMYKLcLm output data Iout.</p>
<p id="p-0095" num="0094">Next will be described in greater detail how the halftone module <b>99</b> executes the error-diffusion multilevel halftone process.</p>
<p id="p-0096" num="0095">It is noted that as described above, the threshold memory <b>10</b><i>a </i>stores therein the threshold table ThT as shown in <figref idref="DRAWINGS">FIG. 12(A)</figref>. The threshold table ThT stores therein three thresholds Ta, Tb, and Tc (where Ta&gt;Tb&gt;Tc) for each of the six ink colors. The thresholds Ta, Tb, and Tc are used for determining whether or not to form large dots, medium dots, and small dots, respectively.</p>
<p id="p-0097" num="0096">When a print command is issued from the application program <b>95</b>, the halftone module <b>99</b> retrieves the threshold table ThT from the threshold memory <b>10</b><i>a</i>, and sets the threshold table ThT in the RAM <b>4</b>.</p>
<p id="p-0098" num="0097">The relative density value memory <b>10</b><i>b </i>stores therein a plurality of relative density tables RT. As shown in <figref idref="DRAWINGS">FIG. 12(B)</figref>, each relative density table RT stores therein relative density values R in correspondence with each of the six ink colors and in correspondence with each of the four dot-gradations.</p>
<p id="p-0099" num="0098">It is noted that relative density values R for each ink color are defined as indicative of the density ratios of large, medium, small, and non dots relative to the large dot, wherein the density of the large dot is set to the value of 255.</p>
<p id="p-0100" num="0099">It is further noted that the relative density values R differ according to printing conditions such as ink type, printing medium, and resolution. Hence, the plurality of relative density tables RT are prepared in advance in correspondence with the plurality of different conditions, and are stored in the relative density value memory <b>10</b><i>b</i>. When a print command is issued from the application program <b>95</b>, the halftone module <b>99</b> retrieves, from the relative density value memory <b>10</b><i>b</i>, one relative density table RT that corresponds to the condition of the present printing operation, and sets the retrieved relative density table RT in the RAM <b>4</b>.</p>
<p id="p-0101" num="0100">The distribution matrix memory <b>10</b><i>c </i>stores therein the distribution matrix DM shown in <figref idref="DRAWINGS">FIG. 12(C)</figref>. The distribution matrix DM lists up weight coefficients, which are used to distribute, to a pixel that is being presently processed and that is indicated by a mark (*), portions of errors which are obtained at nearby pixels, which are located adjacent to the subject pixel and which have been processed previously.</p>
<p id="p-0102" num="0101"><figref idref="DRAWINGS">FIG. 13(A)</figref> is a functional block diagram showing an overview of the error-diffusion multilevel halftone process that is executed by the halftone module <b>99</b> for eight-bit input data Iin (=C<sub>in</sub>, M<sub>in</sub>, Y<sub>in</sub>, K<sub>in</sub>, Lc<sub>in</sub>, or Lm<sub>in</sub>).</p>
<p id="p-0103" num="0102">It is noted that when the halftone module <b>99</b> starts performing the error-diffusion multilevel halftone process for input data Iin indicative of a desired image, pixels (x, y) of the image are successively processed from the upper left corner (original position (0, 0)) of the subject image in the main scanning direction X and the sub scanning direction Y.</p>
<p id="p-0104" num="0103">In the following description, it is assumed that the error-diffusion multilevel halftone process is executed for the successive pixels to convert their eight-bit normal cyan data C<sub>in </sub>(input value I<sub>in</sub>) into two-bit normal cyan data C<sub>out </sub>(output value Iout).</p>
<p id="p-0105" num="0104">As shown in <figref idref="DRAWINGS">FIG. 13(A)</figref>, the halftone module <b>99</b> includes: an adding section <b>99</b><i>a</i>, a comparing section <b>99</b><i>b</i>, a converting section <b>99</b><i>c</i>, a subtracting section <b>99</b><i>d</i>, a judging section <b>99</b><i>e</i>, and a calculating section <b>99</b><i>f. </i></p>
<p id="p-0106" num="0105">When an eight-bit input value C<sub>in </sub>(Iin) for one pixel (x, y) is inputted to the halftone module <b>99</b> from the color correction module <b>98</b>, the judging section <b>99</b><i>e </i>searches the relative density table RT (FIG. <b>12</b>(B)), and retrieves one relative density value R<sub>small </sub>that corresponds to the ink color (parameter) of the input data Iin and to the “small size dots”. In this example, because the ink color of the input data Iin is normal cyan, the judging section <b>99</b><i>e </i>retrieves relative density value R<sub>small </sub>of “60” from the relative density value table RT.</p>
<p id="p-0107" num="0106">Then, the judging section <b>99</b><i>e </i>uses the following equation (1) to determine the value of “rate”:
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?>“rate”=1<i>−{abs</i>[“input value”−(“relative density value for small dot”)/2]“range”}  (1)<?in-line-formulae description="In-line Formulae" end="tail"?>
</p>
<p id="p-0108" num="0107">wherein “abs [ ]” is an operator for calculating an absolute value of a value in brackets [ ], the value of “range” is fixed to 10, and the value of “relative density value for small dot” is set to 60 in this example. It is noted that when the input data Iin is for magenta, yellow, black, light cyan, or light magenta, the value of “relative density value for small dot” is set to 100, 120, 115, 102, and 101, respectively, as apparent from <figref idref="DRAWINGS">FIG. 12(B)</figref>.</p>
<p id="p-0109" num="0108">The judging section <b>99</b><i>e </i>executes a judgment to determine whether or not the value of “rate” is greater than zero (0).</p>
<p id="p-0110" num="0109">The calculating portion <b>99</b><i>f </i>then retrieves the thresholds Ta, Tb, and Tc for the color of the input value Iin from the threshold table ThT (<figref idref="DRAWINGS">FIG. 12(A)</figref>. In this example, Ta=176, Th=96, and Tc=0 because the input data Iin is for normal cyan. The calculating portion <b>99</b><i>f </i>then modifies the thresholds Ta, Tb, and Tc into modified thresholds Ta′, Tb′, and Tc′ by selectively adding noise to the thresholds Ta, Tb, and Tc dependently on the judgment results.</p>
<p id="p-0111" num="0110">More specifically, if the “rate” is greater than zero (0), the calculating portion <b>99</b><i>f </i>uses the following equations (2) and (3) to modify the thresholds Ta, Tb, and Tc into the modified thresholds Ta′, Tb′, and Tc′, respectively:
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?>“modified threshold”=“threshold”+“noise”  (2)<?in-line-formulae description="In-line Formulae" end="tail"?>
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?>“noise”=“rate”×“coefficient”×“white noise”  (3),<?in-line-formulae description="In-line Formulae" end="tail"?>
</p>
<p id="p-0112" num="0111">wherein the value of “threshold” is the value of threshold Ta, Tb, or Tc, the value of “coefficient” is fixed to 0.2, and the value of “white noise” is a random number that varies in a range of −255 to 255. In this way, the thresholds Ta, Tb, and Tc, which have the values of “threshold” are modified into the modified thresholds Ta′, Tb′, and Tc′, which have the values of “modified threshold”. Thus, the equation (2) can be expressed as Ta′=Ta+“noise”, Tb′−Tb+“noise”, and Tc′=Tc+“noise”. The modified thresholds Ta′, Tb′, and Tc′ also satisfy the relationship of Ta′&gt;Tb′&gt;Tc′.</p>
<p id="p-0113" num="0112">On the other hand, when the “rate” is smaller than or equal to zero (0), the calculating section <b>99</b><i>f </i>uses the following equation (4) to modify the thresholds Ta, Tb, and Tc into the modified thresholds Ta′, Tb′, Tc′, respectively:
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?>“modified threshold”−“threshold”  (4)<?in-line-formulae description="In-line Formulae" end="tail"?>
</p>
<p id="p-0114" num="0113">The equation (4) can be expressed as Ta′=Ta, Tb′=Tb, and Tc′=Tc.</p>
<p id="p-0115" num="0114">In this way, the calculating portion <b>99</b><i>f </i>adds noise to the thresholds Ta, Th, and Tc when the “rate” is greater than 0, but adds no noise to the thresholds Ta, Tb, and Tc when the “rate” is smaller than or equal to 0.</p>
<p id="p-0116" num="0115">The adding section <b>99</b><i>a </i>adds, to the input value Iin (Cin, in this example) for the subject pixel (x, y), with portions of errors distributed from the already-processed nearby pixels (x−2, y−2), (x−1, y−2), (x, y−2), (x+1, y−2), (x+2, y−2), (x−2, y−1), (x−1, y−1), (x, y−1), (x+1, y−1), (x+2, y−1), (x−2, y), and (x−1, y). More specifically, the adding section <b>99</b><i>a </i>retrieves, from the error buffer <b>4</b><i>a</i>, error values, which have been obtained at those nearby pixels, and calculates a distribution error DE by multiplying the error values with the weight coefficients listed in the distribution matrix DM (<figref idref="DRAWINGS">FIG. 12(C)</figref>) by using the following equation (5):</p>
<p id="p-0117" num="0116">
<maths id="MATH-US-00001" num="00001">
<math overflow="scroll">
<mtable>
  <mtr>
    <mtd>
      <mrow>
        <mrow>
          <mstyle>
            <mtext>"distribution  error"</mtext>
          </mstyle>
          <mo>⁢</mo>
          <mstyle>
            <mspace width="0.8em" height="0.8ex"/>
          </mstyle>
          <mo>⁢</mo>
          <mi>DE</mi>
        </mrow>
        <mo>=</mo>
        <mrow>
          <mrow>
            <mrow>
              <mn>1</mn>
              <mo>/</mo>
              <mn>48</mn>
            </mrow>
            <mo>×</mo>
            <mrow>
              <mi>E</mi>
              <mo>⁡</mo>
              <mrow>
                <mo>(</mo>
                <mrow>
                  <mrow>
                    <mi>x</mi>
                    <mo>-</mo>
                    <mn>2</mn>
                  </mrow>
                  <mo>,</mo>
                  <mrow>
                    <mi>y</mi>
                    <mo>-</mo>
                    <mn>2</mn>
                  </mrow>
                </mrow>
                <mo>)</mo>
              </mrow>
            </mrow>
          </mrow>
          <mo>+</mo>
          <mrow>
            <mrow>
              <mn>3</mn>
              <mo>/</mo>
              <mn>48</mn>
            </mrow>
            <mo>×</mo>
            <mrow>
              <mi>E</mi>
              <mo>⁡</mo>
              <mrow>
                <mo>(</mo>
                <mrow>
                  <mrow>
                    <mi>x</mi>
                    <mo>-</mo>
                    <mn>1</mn>
                  </mrow>
                  <mo>,</mo>
                  <mrow>
                    <mi>y</mi>
                    <mo>-</mo>
                    <mn>2</mn>
                  </mrow>
                </mrow>
                <mo>)</mo>
              </mrow>
            </mrow>
          </mrow>
          <mo>+</mo>
          <mrow>
            <mrow>
              <mn>5</mn>
              <mo>/</mo>
              <mn>48</mn>
            </mrow>
            <mo>×</mo>
            <mrow>
              <mi>E</mi>
              <mo>⁡</mo>
              <mrow>
                <mo>(</mo>
                <mrow>
                  <mi>x</mi>
                  <mo>,</mo>
                  <mrow>
                    <mi>y</mi>
                    <mo>-</mo>
                    <mn>2</mn>
                  </mrow>
                </mrow>
                <mo>)</mo>
              </mrow>
            </mrow>
          </mrow>
          <mo>+</mo>
          <mrow>
            <mrow>
              <mn>3</mn>
              <mo>/</mo>
              <mn>48</mn>
            </mrow>
            <mo>×</mo>
            <mrow>
              <mi>E</mi>
              <mo>⁡</mo>
              <mrow>
                <mo>(</mo>
                <mrow>
                  <mrow>
                    <mi>x</mi>
                    <mo>+</mo>
                    <mn>1</mn>
                  </mrow>
                  <mo>,</mo>
                  <mrow>
                    <mi>y</mi>
                    <mo>-</mo>
                    <mn>2</mn>
                  </mrow>
                </mrow>
                <mo>)</mo>
              </mrow>
            </mrow>
          </mrow>
          <mo>+</mo>
          <mrow>
            <mrow>
              <mn>1</mn>
              <mo>/</mo>
              <mn>48</mn>
            </mrow>
            <mo>×</mo>
            <mrow>
              <mi>E</mi>
              <mo>⁡</mo>
              <mrow>
                <mo>(</mo>
                <mrow>
                  <mrow>
                    <mi>x</mi>
                    <mo>+</mo>
                    <mn>2</mn>
                  </mrow>
                  <mo>,</mo>
                  <mrow>
                    <mi>y</mi>
                    <mo>-</mo>
                    <mn>2</mn>
                  </mrow>
                </mrow>
                <mo>)</mo>
              </mrow>
            </mrow>
          </mrow>
          <mo>+</mo>
          <mrow>
            <mrow>
              <mn>3</mn>
              <mo>/</mo>
              <mn>48</mn>
            </mrow>
            <mo>×</mo>
            <mrow>
              <mi>E</mi>
              <mo>⁡</mo>
              <mrow>
                <mo>(</mo>
                <mrow>
                  <mrow>
                    <mi>x</mi>
                    <mo>-</mo>
                    <mn>2</mn>
                  </mrow>
                  <mo>,</mo>
                  <mrow>
                    <mi>y</mi>
                    <mo>-</mo>
                    <mn>1</mn>
                  </mrow>
                </mrow>
                <mo>)</mo>
              </mrow>
            </mrow>
          </mrow>
          <mo>+</mo>
          <mrow>
            <mrow>
              <mn>5</mn>
              <mo>/</mo>
              <mn>48</mn>
            </mrow>
            <mo>×</mo>
            <mrow>
              <mi>E</mi>
              <mo>⁡</mo>
              <mrow>
                <mo>(</mo>
                <mrow>
                  <mrow>
                    <mi>x</mi>
                    <mo>-</mo>
                    <mn>1</mn>
                  </mrow>
                  <mo>,</mo>
                  <mrow>
                    <mi>y</mi>
                    <mo>-</mo>
                    <mn>1</mn>
                  </mrow>
                </mrow>
                <mo>)</mo>
              </mrow>
            </mrow>
          </mrow>
          <mo>+</mo>
          <mrow>
            <mrow>
              <mn>7</mn>
              <mo>/</mo>
              <mn>48</mn>
            </mrow>
            <mo>×</mo>
            <mrow>
              <mi>E</mi>
              <mo>⁡</mo>
              <mrow>
                <mo>(</mo>
                <mrow>
                  <mi>x</mi>
                  <mo>,</mo>
                  <mrow>
                    <mi>y</mi>
                    <mo>-</mo>
                    <mn>1</mn>
                  </mrow>
                </mrow>
                <mo>)</mo>
              </mrow>
            </mrow>
          </mrow>
          <mo>+</mo>
          <mrow>
            <mrow>
              <mn>5</mn>
              <mo>/</mo>
              <mn>48</mn>
            </mrow>
            <mo>×</mo>
            <mrow>
              <mi>E</mi>
              <mo>⁡</mo>
              <mrow>
                <mo>(</mo>
                <mrow>
                  <mrow>
                    <mi>x</mi>
                    <mo>+</mo>
                    <mn>1</mn>
                  </mrow>
                  <mo>,</mo>
                  <mrow>
                    <mi>y</mi>
                    <mo>-</mo>
                    <mn>1</mn>
                  </mrow>
                </mrow>
                <mo>)</mo>
              </mrow>
            </mrow>
          </mrow>
          <mo>+</mo>
          <mrow>
            <mrow>
              <mn>3</mn>
              <mo>/</mo>
              <mn>48</mn>
            </mrow>
            <mo>×</mo>
            <mrow>
              <mi>E</mi>
              <mo>⁡</mo>
              <mrow>
                <mo>(</mo>
                <mrow>
                  <mrow>
                    <mi>x</mi>
                    <mo>+</mo>
                    <mn>2</mn>
                  </mrow>
                  <mo>,</mo>
                  <mrow>
                    <mi>y</mi>
                    <mo>-</mo>
                    <mn>1</mn>
                  </mrow>
                </mrow>
                <mo>)</mo>
              </mrow>
            </mrow>
          </mrow>
          <mo>+</mo>
          <mrow>
            <mrow>
              <mn>5</mn>
              <mo>/</mo>
              <mn>48</mn>
            </mrow>
            <mo>×</mo>
            <mrow>
              <mi>E</mi>
              <mo>⁡</mo>
              <mrow>
                <mo>(</mo>
                <mrow>
                  <mrow>
                    <mi>x</mi>
                    <mo>-</mo>
                    <mn>2</mn>
                  </mrow>
                  <mo>,</mo>
                  <mi>y</mi>
                </mrow>
                <mo>)</mo>
              </mrow>
            </mrow>
          </mrow>
          <mo>+</mo>
          <mrow>
            <mrow>
              <mn>7</mn>
              <mo>/</mo>
              <mn>48</mn>
            </mrow>
            <mo>×</mo>
            <mrow>
              <mi>E</mi>
              <mo>⁡</mo>
              <mrow>
                <mo>(</mo>
                <mrow>
                  <mrow>
                    <mi>x</mi>
                    <mo>-</mo>
                    <mn>1</mn>
                  </mrow>
                  <mo>,</mo>
                  <mi>y</mi>
                </mrow>
                <mo>)</mo>
              </mrow>
            </mrow>
          </mrow>
        </mrow>
      </mrow>
    </mtd>
    <mtd>
      <mrow>
        <mo>(</mo>
        <mn>5</mn>
        <mo>)</mo>
      </mrow>
    </mtd>
  </mtr>
</mtable>
</math>
</maths>
</p>
<p id="p-0118" num="0117">wherein E(x+i, y+k) is an error obtained at a nearby pixel (x+i, y+k), wherein i is an integer greater than or equal to −2 and smaller than or equal to +2, and k is an integer greater than or equal to −2 and smaller than or equal to zero (0).</p>
<p id="p-0119" num="0118">In this way, the adding section <b>99</b><i>a </i>determines a corrected input value Iin′ by adding the distribution error DE to the input value Iin.</p>
<p id="p-0120" num="0119">The comparing section <b>99</b><i>b </i>compares the corrected input value Iin′ with each of the three modified thresholds Ta′, Tb′, and Tc′.</p>
<p id="p-0121" num="0120">When comparing the corrected input value Iin′ with the three thresholds Ta′, Tb′, and Tc′, the comparator <b>99</b><i>b </i>outputs: an output value Iout of a value (3) indicative of “output large dot” when the corrected input value, Iin′ is greater than the threshold Ta′; an output value Iout of a value (2) indicative of “output medium dot” when the corrected input value Iin′ is greater than threshold Tb′ but smaller than threshold Ta′; an output value Iout of a value (1) indicative of “output small dot” when the corrected input value Iin′ is greater than threshold Tc′ but smaller than threshold Tc′; and an output value Iout of a value (0) indicative of “output no dot” when the corrected input value Iin′ is smaller than threshold Tc′. The thus obtained output data Iout will be outputted as two-bit output data (final data FNL) to the printer <b>22</b>.</p>
<p id="p-0122" num="0121">The converting section <b>99</b><i>c </i>searches the relative is density table RT, and retrieves one relative density R dependently on the ink color of the subject input data Iin (normal cyan, in this example) and on whether the output value Iout is indicative of a large dot, medium dot, small dot, or no dot. For example, when the normal cyan input data Cin is converted into normal cyan output data Cout indicative of output of a large dot, the converter <b>99</b><i>c </i>retrieves the relative density value R of “255” from the relative density table RT (<figref idref="DRAWINGS">FIG. 12(B)</figref>). When the normal cyan input data Cin is converted into normal cyan output data Cout indicative of output of a medium dot, the converter <b>99</b><i>c </i>retrieves the relative density value R of “176” from the relative density table RT. When the normal cyan input data Cin is converted into normal cyan output data Cout indicative of output of a small dot, the converter <b>99</b><i>c </i>retrieves the relative density value R of “60” from the relative density table RT. When the normal cyan input data Cin is converted into normal cyan output, data Cout indicative of output of a non dot, the converter <b>99</b><i>c </i>retrieves the relative density value R of “0” from the relative density table RT. The converter <b>99</b><i>c </i>converts the output data Cout into the thus retrieved relative density value R.</p>
<p id="p-0123" num="0122">The subtracting portion <b>99</b><i>d </i>determines an error for the present pixel (x, y) by calculating the difference between the corrected input value Iin′ and the converted relative density value R. The subtracting portion <b>99</b><i>d </i>records the error in the error buffer <b>4</b><i>a. </i></p>
<p id="p-0124" num="0123">The adding section <b>99</b><i>a</i>, comparing section <b>99</b><i>b</i>, converting section <b>99</b><i>c</i>, subtracting section <b>99</b><i>d</i>, judging section <b>99</b><i>e</i>, and the calculating section <b>99</b><i>f </i>perform the same processes as described above repeatedly until all the pixels are completely processed.</p>
<p id="p-0125" num="0124">The judging section <b>99</b><i>e </i>calculates the value “rate” and judges whether the value “rate” is greater than zero (0) every time when the halftone module <b>99</b> receives CMYKLcLm input data in (=Cin, Min, Yin, Kin, Lcin, or Lmin) from the color correction module <b>98</b>. The calculating section <b>99</b><i>f </i>modifies the thresholds Ta, Tb, and Tc based on the judgment results.</p>
<p id="p-0126" num="0125"><figref idref="DRAWINGS">FIG. 13(</figref><i>b</i>) is a flowchart illustrating the error-diffusion multilevel halftone process executed by the halftone module <b>99</b> of the present embodiment.</p>
<p id="p-0127" num="0126">First, in S<b>10</b>, data for one pixel (present pixel (x, y)) is received from the color correction module <b>98</b>, and is set as an input value Iin.</p>
<p id="p-0128" num="0127">In S<b>20</b>, the relative density value for a small dot of a corresponding ink color is retrieved from the relative density table RT.</p>
<p id="p-0129" num="0128">In S<b>30</b>, the equation (1) is used to calculate the value “rate”, and it is judged whether or not the value “rate” is greater than zero (0).</p>
<p id="p-0130" num="0129">If the value “rate” is greater than zero (0) (yes in s<b>30</b>), the equations (2) and (3) are used to convert the thresholds Ta−Tc into modified thresholds Ta′−Tc′ in S<b>40</b>. On the other hand, if the value “rate” is smaller than or equal to zero (0) (no in S<b>30</b>), the equation (4) is used to convert the thresholds Ta−Tc into modified thresholds Ta′−Tc′ in S<b>50</b>.</p>
<p id="p-0131" num="0130">In S<b>60</b>, errors generated for the same color of the input value Iin at already-processed pixels adjacent to the present pixel (x, y) are read from the error buffer <b>4</b><i>a </i>and collected as a distribution error DE by using the distribution matrix DM and by using equation (5).</p>
<p id="p-0132" num="0131">In S<b>70</b>, the input value Iin is added with the distribution error DE to produce the corrected input value Iin′.</p>
<p id="p-0133" num="0132">In S<b>80</b>, the corrected input value Iin′ is then compared with the modified thresholds Ta′, Tb′, and Tc′ (Ta′&gt;Tb′&gt;Tc′). Based on the relationship of the corrected input value Iin′ with the thresholds Ta′, Th′, and Tc′, the value of 0, 1, 2, or 3 is outputted as an output value Iout.</p>
<p id="p-0134" num="0133">The output value Iout is stored in the RAM <b>4</b> in S<b>90</b>. Also in S<b>90</b>, a relative density value R is extracted from the relative density table RT based on the output value Iout and the color of the processed input value Iin.</p>
<p id="p-0135" num="0134">When the output value Iout is ON (Yes in S<b>100</b>), that is, when the output value is either one of 3 (output large dot), 2 (output medium dot), or 1 (output small dot), an error is calculated by subtracting the relative density value R from the corrected input value Iin′ in S<b>110</b>.</p>
<p id="p-0136" num="0135">On the other hand, when the output value Iout is OFF, that is, when the output value Iout is 0 (output no dot) (No in S<b>100</b>), the corrected input value Iin′ is set as the error in S<b>120</b>.</p>
<p id="p-0137" num="0136">In S<b>130</b>, the calculated error is inputted into the error buffer <b>4</b><i>a. </i></p>
<p id="p-0138" num="0137">In S<b>140</b>, it is determined whether or not input data Iin for the entire image has been processed.</p>
<p id="p-0139" num="0138">If the processing is not complete for all the pixels (No in S<b>140</b>), the program proceeds to the next pixel in S<b>150</b>, and the process from S<b>10</b> is repeated for the next pixel.</p>
<p id="p-0140" num="0139">On the other hand, if all the pixels have been processed completely (yes in S<b>140</b>), the output values Iout stored in the RAM <b>4</b> are outputted to the printer <b>22</b> in S<b>160</b>.</p>
<p id="p-0141" num="0140">It is now assumed that the color correction module <b>98</b> supplies the halftone module <b>99</b> with eight-bit normal-cyan data Cin (Iin) indicative of a normal cyan image shown in <figref idref="DRAWINGS">FIG. 14</figref>. This image is elongated in the sheet conveying direction Y from a specified uppermost row (y=0) to a specified lowermost row (y=400). In such a case, the pixels are successively subjected to the halftone process from the uppermost row (y=0) to the lowermost row (y=400). In each row, pixels are subjected to the halftone process successively from left to right, that is, in the direction in which the x-coordinate value increases. Every time the eight-bit normal-cyan data Cin for one pixel is received, the halftone module <b>99</b> judges whether “rate” is greater than zero, and modifies the thresholds Ta−Tc into the modified thresholds Ta′−Tc′ based on the judgment results. The halftone module <b>99</b> corrects the eight-bit normal-cyan data Cin by adding portions of errors distributed from the already-processed nearby pixels, and compares the corrected eight-bit normal-cyan data Cin′(Iin′) with the modified thresholds Ta′−Tc′ and converts the corrected eight-bit normal-cyan data Cin′ into two-bit normal-cyan data Cout (Iout). The halftone module <b>99</b> then converts the two-bit normal-cyan data Cout into a corresponding relative density value R (=255, 176, 60, or 0). The difference between the converted relative density value R and the error-added (corrected) eight-bit normal-cyan data Cin′ is stored as an error in the error buffer <b>4</b><i>a. </i></p>
<p id="p-0142" num="0141">Next will be described how the error-diffusion multilevel halftone process of the present embodiment removes false contours.</p>
<p id="p-0143" num="0142">The present inventors conducted a first experiment to subject the eight-bit normal-cyan data Cin of <figref idref="DRAWINGS">FIG. 14</figref> into the conventional error-diffusion multilevel halftone process shown in <figref idref="DRAWINGS">FIG. 2</figref>. The present inventors subjected the same eight-bit normal-cyan data Cin of <figref idref="DRAWINGS">FIG. 14</figref> also into the error-diffusion multilevel halftone process of the present embodiment shown in <figref idref="DRAWINGS">FIG. 13(A)</figref>.</p>
<p id="p-0144" num="0143">It is noted that in the image of <figref idref="DRAWINGS">FIG. 14</figref>, the eight-bit normal-cyan values Cin for all the pixels in each row (0≦y≦400) are equal to one another, and therefore the normal cyan density is uniform at each row. The cyan density represented by the eight-bit normal-cyan data Cin is kept almost unchanged from the uppermost row (y=0) to around a first medium row (y=50), then gradually decreases from around the first medium row to around a second medium row (y=340), and then kept unchanged from around the second medium row (y=340) to the lowermost row (y=400). The cyan density between the uppermost row (y=0) and around the first medium row (y=50) has a value slightly smaller than 100. The cyan density between the second medium row (y=340) and the lowermost row (y=400) has a value of zero (0) During each of the conventional process and the process of the present embodiment, every time after the eight-bit data Cin for all the pixels in one row is halftone processed into two-bit data Cout and converted into relative density values R (=255, 176, 60, or 0), an average is calculated for the relative density values R converted for all the pixels in that row.</p>
<p id="p-0145" num="0144"><figref idref="DRAWINGS">FIG. 15(</figref><i>a</i>) shows the results obtained by the conventional process, and <figref idref="DRAWINGS">FIG. 15(B)</figref> shows the results obtained by the process of the present embodiment. In both of the graphs of <figref idref="DRAWINGS">FIGS. 15(A) and 15(B)</figref>, the horizontal axis denotes the positions (rows) on the image of <figref idref="DRAWINGS">FIG. 14</figref> along the sheet conveying direction Y, while the vertical axis denotes the magnitudes of the input values (eight-bit normal cyan data Cin) and of the output value averages (averages of the converted relative densities R).</p>
<p id="p-0146" num="0145">In each graph, the input values (eight-bit normal-cyan values Cin) were plotted from the position (y=0) to the position (y=400), thereby forming a smoothly-decreasing line C. The output value averages (averages of the converted relative densities R) were plotted also from position (y=0) to position (y=400), thereby forming a rapidly-vibrating, decreasing line C′.</p>
<p id="p-0147" num="0146">As apparent from <figref idref="DRAWINGS">FIG. 15(A)</figref>, the output value average C′ drops from a level state abruptly at the positions y=240 to 250, generating a vertical separation from the input value C. This separation is found to result in a false contour. Hence, it is found out that a false contour is generated at a point around the eight-bit normal cyan input data Cin of “30”, which is a half of the relative density value R<sub>small </sub>of “60” that is listed for the normal cyan small dot in the relative density table RT (<figref idref="DRAWINGS">FIG. 12(B)</figref>). It is therefore confirmed that false contours are generated in normal cyan gradation areas that are formed by small dots of normal cyan ink.</p>
<p id="p-0148" num="0147">Contrarily, <figref idref="DRAWINGS">FIG. 15(B)</figref> confirms that the vertical separation shown in <figref idref="DRAWINGS">FIG. 15(A)</figref> is eliminated. According to the present embodiment, it is judged in S<b>30</b> (<figref idref="DRAWINGS">FIG. 13(B)</figref>) whether or not the value “rate” for each pixel is greater than zero (0). In other words, the halftone module <b>99</b> of the present embodiment judges whether or not the eight-bit normal cyan input data Cin of each pixel is around a half of the relative density value “60” for a small dot. If the eight-bit normal cyan input data Cin of the subject pixel is near to a half of the relative density value “60” for a small dot, the halftone module <b>99</b> adds noise to the threshold values Ta, Tb, and Tc in S<b>40</b>. The halftone module <b>99</b> uses the noise-added threshold values Ta′, Tb′, and Tc′ in the comparing process of S<b>80</b>. As a result, the vertical separation portion is eliminated, thereby eliminating the false contour.</p>
<p id="p-0149" num="0148"><figref idref="DRAWINGS">FIG. 15(C)</figref> shows a print sample obtained by the above-described first experiment using the conventional halftone process, while <figref idref="DRAWINGS">FIG. 1(D)</figref> shows a print sample obtained by the first experiment using the halftone process of the present embodiment. As apparent from <figref idref="DRAWINGS">FIG. 15(C)</figref>, a false contour was generated in the form of a vertical border line when the conventional halftone method was used. Contrarily, according to the present embodiment, no false contour was generated.</p>
<p id="p-0150" num="0149">In this way, according to the present embodiment, noise is added to the input value Iin when the input value Iin is around the specific value (one-half of the relative value of a small dot). It is possible to effectively prevent the generation of false contours. In this example, a false contour is effectively removed by adding noise to input values Cin around 30.</p>
<p id="p-0151" num="0150">Additionally, according to the present embodiment, it is possible to quickly determine whether a noise signal should be added to the thresholds simply by extracting one of the relative values from the relative density table RT based on the ink color of the input data Iin and judging whether the input data Iin is around approximately a one-half of the extracted relative density value. It is therefore possible to effectively prevent false contours.</p>
<p id="p-0152" num="0151">The “rate” is calculated by the equation (1) and the “noise” is in proportion to the value of “rate” as indicated by equation (3). Accordingly, it is possible to add maximum noise signal to thresholds when the input data Iin is exactly equal to the half of the relative density value for a small dot and to gradually decrease this noise signal as the difference, between the input data Iin and the half of the relative density value, increases. Accordingly, the false contour can be eliminated more effectively.</p>
<p id="p-0153" num="0152">The experimental results of <figref idref="DRAWINGS">FIGS. 15(A) and 15(B)</figref> confirm that the process of the present embodiment can eliminate false contours at gradation portions formed by small dots of normal cyan ink. However, the present embodiment is not limited to elimination of false contours formed in such cyan small-dot gradation regions. The present inventors performed additional experiments by substituting the relative density value “176” (for medium dots) for the “relative density value for small dot” in formula (1), and confirmed that the process of the present embodiment can eliminate false contours in gradation regions by cyan medium dots. The present inventors performed further additional experiments by substituting the relative density value “255” (for large dots) for the “relative density value for small dot” in formula (1), and confirmed that the process of the present embodiment can eliminate false contours in gradation regions by cyan large dots.</p>
<p id="p-0154" num="0153">Additionally, the present embodiment is not limited to elimination of false contours for normal cyan images. The present inventors performed additional experiments by substituting the relative density values for other various ink colors for the “relative density value for small dot” in formula (1), and confirmed that the process of the present embodiment can eliminate false contours formed in other ink images. By executing these experiments, it is confirmed that the process of the present embodiment can eliminate false contours for combinations of any ink colors (cyan, black, magenta, yellow, light cyan, and light magenta) and any dot-sized gradations (small-dot gradations, large-dot gradations, and medium-dot gradations). For example, if light magenta input data Lmin is inputted from the color correction module <b>98</b> to the halftone module <b>99</b>, relative density value “183” may be substituted for the “relative density value for small dot” in formula (1) when desiring to eliminate false contours occurring in light-magenta medium-dot gradations.</p>
<heading id="h-0006" level="1">Second Embodiment</heading>
<p id="p-0155" num="0154">Next will be described a second embodiment of the present invention.</p>
<p id="p-0156" num="0155">The halftone module <b>99</b> according to the second embodiment is for preventing false contours in cyan continuous tone images. The halftone module <b>99</b> according to the second embodiment performs judgment operation only when the halftone module <b>99</b> receives normal-cyan input data Cin from the color correction module <b>98</b>. The halftone module <b>99</b> of the present embodiment modifies the thresholds for normal cyan based on the judged results.</p>
<p id="p-0157" num="0156"><figref idref="DRAWINGS">FIG. 16(A)</figref> is a functional block diagram showing an overview of the error-diffusion multilevel halftone process that is executed by the halftone module <b>99</b> of the present embodiment for normal cyan ink data Cin.</p>
<p id="p-0158" num="0157">The judgment operation by the judgment section <b>99</b><i>e </i>is different from that of the first embodiment in the points described below.</p>
<p id="p-0159" num="0158">According to the present embodiment, when the halftone module <b>99</b> receives the eight-bit normal cyan input data Cin as an input value Iin, the judging section <b>99</b><i>e </i>uses the following equation (6) to calculate the value of “rate” instead of using the equation (1):
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?>“rate”=1−{[“input value”−(“normal-cyan minimum value in distribution curve”+1)]/range}  (6)<?in-line-formulae description="In-line Formulae" end="tail"?>
</p>
<p id="p-0160" num="0159">wherein the value “range” is fixed to 10, and the “normal-cyan minimum value in distribution curve” is the minimum value in the normal-cyan-ink value varying range in the distribution Curve DC of <figref idref="DRAWINGS">FIG. 11</figref>. Accordingly, the judging section <b>99</b><i>e </i>determines the value of “rate” while referring to the distribution curve DC in the color correction table CT. In this example, as apparent from <figref idref="DRAWINGS">FIG. 11</figref>, the distribution curve DC indicates that the normal-cyan value varies in the range of 0 to 153, and therefore the normal-cyan minimum value in “distribution curve” in equation (6) is set to 0. Accordingly, the equation (6) can be expressed as “rate”=1−{[“input value”−1]/range}.</p>
<p id="p-0161" num="0160">The judging section <b>99</b><i>e </i>then judges whether or not the value of “rate” is greater than zero (0) and smaller than or equal to one (1).</p>
<p id="p-0162" num="0161">When the “rate” is greater than zero (0) and smaller than or equal to one (1), the calculating section <b>99</b><i>f </i>modifies thresholds Ta, Tb, and To into modified thresholds Ta′, Tb′, and Tc′ by using the above-described equations (2) and (3). On the other hand, when the “rate” is smaller than or equal to zero (0) or greater than one (1), the calculating section <b>99</b><i>f </i>calculates the modified thresholds Ta′, Tb′, and Tc′ as being equal to the original thresholds Ta, Tb, and Tc by using the equation (4).</p>
<p id="p-0163" num="0162"><figref idref="DRAWINGS">FIG. 16(</figref><i>b</i>) is a flowchart illustrating the error-diffusion multilevel halftone process executed by the halftone module <b>99</b> of the present embodiment.</p>
<p id="p-0164" num="0163">The error-diffusion multilevel halftone process of the present embodiment differs from that of the first embodiment in that the processes of S<b>20</b> and S<b>30</b> in the first embodiment (<figref idref="DRAWINGS">FIG. 13(</figref><i>b</i>)) is replaced with processes of S<b>22</b> and S<b>32</b>.</p>
<p id="p-0165" num="0164">In S<b>22</b>, the distribution curve DC (<figref idref="DRAWINGS">FIG. 11</figref>) in the color correction table CT is searched, and the minimum value in the normal cyan ink varying range is retrieved. In this example, the minimum value “0” is retrieved.</p>
<p id="p-0166" num="0165">Then, in S<b>32</b>, the equation (6) is used to calculate the value “rate”, and it is judged whether or not the value “rate” is greater than zero (0) and smaller than or equal to 1.</p>
<p id="p-0167" num="0166">If the value “rate” is greater than zero (0) and smaller than or equal to 1 (yes in S<b>32</b>), the equations (2) and (3) are used to convert the thresholds Ta−Tc into modified thresholds Ta′−Tc′ in S<b>40</b>. On the other hand, if the value “rate” is smaller than or equal to zero (0) or greater than 1 (no in S<b>32</b>), the equation (4) is used to convert the thresholds Ta−Tc into modified thresholds Ta′−Tc′ in S<b>50</b>.</p>
<p id="p-0168" num="0167">Next will be described how the halftone module <b>99</b> of the present embodiment removes false contours.</p>
<p id="p-0169" num="0168">It is now assumed that the color correction module <b>98</b> receives eight-bit cyan-color data C<sub>color </sub>indicative of a cyan color image shown in <figref idref="DRAWINGS">FIG. 17</figref>. This image is elongated in a direction parallel to the sheet conveying direction y from a specified uppermost row (y=1) to a specified lowermost row (y=2501). Also in this image, the values of the eight-bit cyan-color input data C<sub>color </sub>for all the pixels in each row are equal to one another, and therefore the cyan density is uniform at each row. The cyan density is gradually increased from position (0) (uppermost row) to position (2501) (lowermost row). In this case, the color correction module <b>98</b> converts the eight-bit cyan-color data C<sub>color </sub>into eight-bit normal-cyan-ink data Cin and eight-bit light-cyan-ink data Lcin. The halftone module <b>99</b> halftone processes the eight-bit normal-cyan-ink data Cin into two-bit normal-cyan-ink data Cout, and halftone processes the eight-bit light-cyan-ink data Lcin into two-bit light-cyan-ink data Lcout.</p>
<p id="p-0170" num="0169">The present inventors conducted a second experiment to subject the eight-bit cyan-color data C<sub>color </sub>of <figref idref="DRAWINGS">FIG. 17</figref> to the color correction module <b>98</b> to convert the eight-bit cyan-color data C<sub>color </sub>or into eight-bit normal-cyan-ink data Cin and eight-bit light-cyan-ink data Lcin while referring to the distribution curve DC of <figref idref="DRAWINGS">FIG. 11</figref> The present inventors subjected the thus obtained eight-bit normal-cyan-ink data Cin and eight-bit light-cyan-ink data Lcin into the conventional error-diffusion multilevel halftone process shown in <figref idref="DRAWINGS">FIG. 2</figref>. The present inventors subjected the same eight-bit normal-cyan-ink data Cin and eight-bit light-cyan-ink data Lcin also into the error-diffusion multilevel halftone process of the present embodiment shown in <figref idref="DRAWINGS">FIG. 16(A)</figref>.</p>
<p id="p-0171" num="0170">During each of the conventional process and the process of the present embodiment, every time after eight-bit normal-cyan data Cin for all the pixels in one row is haftone processed into two-bit normal-cyan data Cout and then converted into relative density values R (=255, 176, 60, or 0), an average is calculated for the relative density values R for all the pixels in that row. Similarly, every time after eight-bit light-cyan data Lcin for all the pixels in one row is haftone processed into two-bit light-cyan data Lcout and then converted into relative density values R (=255, 207, 102, or 0), an average is calculated for the relative density values R for all the pixels in that row.</p>
<p id="p-0172" num="0171"><figref idref="DRAWINGS">FIG. 18(A)</figref> shows the results obtained by the conventional process, and <figref idref="DRAWINGS">FIG. 18(B)</figref> show the results obtained by the process of the present embodiment.</p>
<p id="p-0173" num="0172">In both of the graphs of <figref idref="DRAWINGS">FIGS. 18(A) and 18(B)</figref>, the horizontal axis denotes the positions on the image of <figref idref="DRAWINGS">FIG. 17</figref> along the sheet conveying direction Y. The vertical axis denotes the magnitudes of: the light-cyan input values (eight-bit light-cyan data Lcin), the light-cyan output value averages (averages of the relative densities R converted for light-cyan), the normal-cyan input values (eight-bit normal-cyan data Cin), and the output value averages (averages of the relative densities R converted for normal-cyan).</p>
<p id="p-0174" num="0173">In each graph, the light-cyan input values (eight-bit light-cyan data Lcin), which are outputted from the color correction module <b>98</b>, were plotted from the position (y=1) to the position (y=2501), thereby forming a smoothly-extending line Lc. The light-cyan output value averages (averages of the converted light-cyan relative densities R) were plotted also from the position (y−1) to the position (y=2501), thereby forming another line Lc′. The line Lc′ extends along the line Lc while rapidly vibrating. Similarly, the normal-line input values (eight-bit normal-cyan data Cin), which are outputted from the color correction module <b>98</b>, were plotted, thereby forming a smooth-extending line C. The normal-line output value averages (averages of the converted normal-cyan relative densities R) were also plotted, thereby forming another line C′. The line C′ extends along the line C while rapidly vibrating.</p>
<p id="p-0175" num="0174">It is noted that a vertical line is added in the middle of each graph in the horizontal direction. The vertical line extends vertically, and indicates the position y, at which the normal-cyan output value average C′ starts increasing from zero (0), thereby starting output of normal-cyan ink dots.</p>
<p id="p-0176" num="0175">It is noted that as shown in <figref idref="DRAWINGS">FIG. 11</figref>, the normal ink level starts increasing at the position immediately after the light ink level becomes unchanged. Accordingly, the error-diffusion multilevel halftone process has to start outputting normal-cyan ink dots immediately after the light-cyan-ink data Lcin from the color correction module <b>98</b> becomes unchanged and the normal-cyan-ink data Cin from the color correction module <b>98</b> starts increasing from zero (0). However, as apparent from <figref idref="DRAWINGS">FIG. 18(A)</figref>, the normal-cyan output value average line C′ starts increasing from zero (0) at a position that is delayed from the position where the normal-cyan input value line C starts increasing. It is therefore found that the conventional halftone process starts outputting normal-cyan ink dots at a position that is delayed from the position where the eight-bit light cyan data Lcin from the color correction module <b>98</b> becomes leveled or unchanged and the normal-cyan data Cin from the color-correction module <b>98</b> starts increasing from zero (0).</p>
<p id="p-0177" num="0176">After the light-cyan output value average line Lc′ becomes in a substantially level state and before the normal-cyan output value average line C′ starts increasing from zero (0), the printer <b>22</b> will output a fixed maximum amount of light-cyan ink continuously while outputting no normal-cyan ink Accordingly, a fixed density region is generated. This fixed density region is found in a false contour. Hence, it is found out that a false contour is generated around at a point where normal-cyan ink is started being mixed with light-cyan ink in the region of cyan gradation regions. In this way, it is confirmed that false contours are generated in a cyan gradation area at its is border between the region where only light-cyan ink is used and the other region where both of the light-cyan ink and the normal-cyan ink are used.</p>
<p id="p-0178" num="0177">Contrarily, <figref idref="DRAWINGS">FIG. 18(B)</figref> confirms that the normal-cyan output value average line C′ starts increasing from zero (0) approximately simultaneously when the normal-cyan input value line C starts increasing from zero (0) and the light-cyan output value average line Lc′ becomes leveled. In other words, output value of normal cyan starts increasing approximately at the same time as the input value starts increasing. The output value of the light cyan is just starting to plateau when the output value of normal cyan starts increasing.</p>
<p id="p-0179" num="0178">According to the present embodiment, the halftone module <b>99</b> judges in S<b>22</b> (<figref idref="DRAWINGS">FIG. 16(B)</figref>) whether or not the value “rate” of equation (6) is greater than zero (0) and smaller than or equal to one (1). In this example, the equation (6) is expressed as “rate”=1−{[“input value”−1]/10} because the value “range” in the equation (6) is set to 10 and because the “normal-cyan minimum value in distribution curve” is set to 0 based on the distribution curve DC of <figref idref="DRAWINGS">FIG. 11</figref>. Accordingly, the halftone module <b>99</b> determines in S<b>32</b> whether or not the normal cyan input value Cin is 1 through 10. As apparent from <figref idref="DRAWINGS">FIG. 11</figref>, the level of normal cyan ink data becomes 1 when normal cyan ink is started being mixed with light cyan ink. Accordingly, by judging whether or not the normal cyan input value is 1 through 10, the halftone module <b>99</b> can know whether the normal cyan input value is near to the value, at which normal cyan ink is started being mixed with light cyan ink. According to the present embodiment, when the value of the normal cyan input data Cin is near to the value, at which normal cyan ink is started being mixed with light cyan ink, the halftone module <b>99</b> adds noise to the threshold values Ta, Tb, and Tc in S<b>40</b>. The noise-added thresholds are used in the comparing process of S<b>80</b>. Accordingly, the halftone module <b>99</b> can start increasing its two-bit normal-cyan output value Cout approximately at the same time when its two-bit light-cyan output value Lcout starts being leveled, thereby eliminating the false contour.</p>
<p id="p-0180" num="0179">In this way, it is confirmed that a false contour can be reduced by adding a noise signal to the thresholds for the normal cyan ink when the normal-cyan input value Cin is around the value, at which normal cyan ink starts being mixed with light cyan ink.</p>
<p id="p-0181" num="0180">It is additionally confirmed that it is possible to prevent occurrence of false contour quickly and effectively by simply judging whether the value of the normal-cyan input value Cin is near the value, at which normal cyan ink is started being mixed with light cyan ink, and by adding a noise signal to the thresholds for normal cyan when it is judged that the normal-cyan input value Cin is around this value.</p>
<p id="p-0182" num="0181">Additionally, according to the present embodiment, the “rate” is calculated by the equation (6) and the “noise” is in proportion to the value of “rate” as indicated by equation (3). Accordingly, it is possible to add maximum noise signal to thresholds when the input value Cin is exactly equal to the value “1”, at which normal cyan ink starts being mixed with light cyan ink, and to gradually decrease the amount of the noise signal as the value of the normal cyan input value Cin increases.</p>
<p id="p-0183" num="0182">It was confirmed that false contour is more effectively prevented by adding a maximum noise signal to thresholds when the normal cyan input value Cin is around the value “1”, at which normal cyan ink starts being mixed with light cyan ink, and by gradually reducing the noise signal as the value of normal cyan ink Cin increases.</p>
<p id="h-0007" num="0000">&lt;First Modification of Second Embodiment&gt;</p>
<p id="p-0184" num="0183">Next will be described a modification of the second embodiment.</p>
<p id="p-0185" num="0184">According to the present modification, in order to prevent false contours in cyan continuous tone images, the halftone module <b>99</b> performs judgment operation only when the halftone module <b>99</b> receives light-cyan input data Lcin from the color correction module <b>98</b>. The halftone module <b>99</b> modifies the thresholds for light cyan based on the judged results.</p>
<p id="p-0186" num="0185">According to this modification, as shown in <figref idref="DRAWINGS">FIG. 16(A)</figref>, when the halftone module <b>99</b> receives the eight-bit light cyan input data Lcin as an input value Iin, the judging section <b>99</b><i>e </i>uses the following equation (7) to calculate the value of “rate” instead of using the equation (6):
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?>“rate”=1−{[(“light-cyan maximum value in distribution curve”−1)−“input value”]/“range”}  (7)<?in-line-formulae description="In-line Formulae" end="tail"?>
</p>
<p id="p-0187" num="0186">wherein the value “range” is fixed to 10, and the “light-cyan maximum value in distribution curve” is the maximum value in the light-cyan-ink value varying range in the distribution curve DC of <figref idref="DRAWINGS">FIG. 11</figref>. Accordingly, the judging section <b>99</b><i>e </i>determines the value of “rate” while referring to the distribution curve DC in the color correction table CT. In this example, as apparent from <figref idref="DRAWINGS">FIG. 11</figref>, the distribution curve DC indicates that the light-cyan value varies in the range of 0 to 51, and therefore the “light-cyan maximum value in distribution curve” in equation (7) is set to 51.</p>
<p id="p-0188" num="0187">The judging section <b>99</b><i>e </i>then judges whether or not the value of “rate” is greater than zero (0) and smaller than or equal to one (1). When the “rate” is greater than zero (0) and smaller than or equal to one (1), the calculating section <b>99</b><i>f </i>modifies the thresholds Ta, Tb, and Tc into the modified thresholds Ta′, Tb′, and Tc′ by using the above-described equations (2) and (3). On the other hand, when the “rate” is smaller than or equal to zero (0) or greater than one (1), the calculating section <b>99</b><i>f </i>determines the modified thresholds Ta′, Tb′, and Tc′ as being equal to the original thresholds Ta, Tb, and Tc by the equation (4).</p>
<p id="p-0189" num="0188">In this way, according to the present embodiment, the judgment section <b>99</b><i>e </i>performs judgment for each light-cyan input value Lcin by judging whether the value “rate” of formula (7) is greater than zero (0) and smaller than or equal to one (1). In this example, the above-described equation (7) is expressed as “rate”=1−{(50−“input value”)/10} because the value “range” in the equation (7) is set to 10 and because the “maximum value” is set to 51 based on the distribution curve DC of <figref idref="DRAWINGS">FIG. 11</figref>. Accordingly, the halftone module <b>99</b> determines whether or not the light cyan input value Lcin is 41 through 50. As apparent from <figref idref="DRAWINGS">FIG. 11</figref>, the level of light cyan ink data Lcin becomes 51 when normal cyan ink is started being mixed with light cyan ink. Accordingly, by judging whether or not the light cyan input value Lcin is 41 through 50, the judging section <b>99</b><i>e </i>can know whether the light cyan input value Lcin is near to the value, at which normal cyan ink is started being mixed with light cyan ink. According to the present modification, when is the value of the light cyan input data Lcin is near to the value, at which normal cyan ink is started being mixed with light cyan ink, the calculating section <b>99</b><i>f </i>adds noise to the threshold values Ta, Tb, and Tc The noise-added thresholds are used in the comparing process. As a result, the halftone module <b>99</b> can allow the two-bit light-cyan output value Lcout to start being leveled approximately at the same time when the two-bit normal-cyan output value Cout starts increasing from zero, thereby eliminating the false contour.</p>
<p id="p-0190" num="0189"><figref idref="DRAWINGS">FIG. 19</figref> is a flowchart illustrating the error-diffusion multilevel halftone process executed by the halftone module <b>99</b> of the present modification.</p>
<p id="p-0191" num="0190">The error-diffusion multilevel halftone process of the present modification differs from that of the second embodiment in that the processes of S<b>22</b> and S<b>32</b> in the second embodiment (<figref idref="DRAWINGS">FIG. 16(</figref><i>b</i>)) are replaced with processes of S<b>24</b> and <b>534</b>.</p>
<p id="p-0192" num="0191">In S<b>24</b>, the distribution curve DC (<figref idref="DRAWINGS">FIG. 11</figref>) in the color correction table CT is searched, and retrieve the maximum value in the light cyan ink varying range is retrieved. In this example, the maximum value “51” is retrieved.</p>
<p id="p-0193" num="0192">Then, in S<b>34</b>, the equation (7) is used to calculate the value “rate”, and it is judged whether the value “rate” is greater than zero (0) and smaller than or equal to 1.</p>
<p id="p-0194" num="0193">If the value “rate” is greater than zero (0) and smaller than or equal to 1 (yes in S<b>34</b>), the equations (2) and (3) are used to convert the thresholds Ta−Tc into modified thresholds Ta′−Tc′ in S<b>40</b>. On the other hand, if the value “rate” is smaller than or equal to zero (0) or greater than 1 (no in S<b>34</b>), the equation (4) is used to convert the thresholds Ta−Tc into modified thresholds Ta′−Tc′ in S<b>50</b>.</p>
<p id="p-0195" num="0194">The present inventors conducted additional experiments similarly as the second experiments described in the second embodiment. It was confirmed that the false contour can be reduced by adding noise signal to the thresholds for light cyan ink when the light-cyan input value Lcin is around the value, at which normal cyan ink is started being mixed to light cyan ink.</p>
<p id="p-0196" num="0195">According to the present embodiment, the “rate” is calculated by the formula (7) and the “noise” is in proportion to the value of “rate” as indicated by formula (3). Accordingly, it is possible to add maximum noise signal to thresholds when the light-cyan input value Lcin is exactly equal to the value of “50”, at which normal cyan ink starts being mixed with light cyan ink, and to gradually decrease the amount of the noise signal as the value of the light cyan input value Lcin decreases.</p>
<p id="p-0197" num="0196">It was confirmed that false contour is more effectively prevented by adding a maximum noise signal to thresholds when the light cyan input value Lcin is around the value, at which normal cyan ink starts mixing with light cyan ink, and by gradually reducing the noise signal as the value of light cyan ink Lcin decreases.</p>
<p id="h-0008" num="0000">&lt;Second Modification of the Second Embodiment&gt;</p>
<p id="p-0198" num="0197">Nest will be described a second modification of the second embodiment.</p>
<p id="p-0199" num="0198">According to the present modification, in order to prevent false contours in cyan continuous tone images, the halftone module <b>99</b> performs judgment operation both when the halftone module <b>99</b> receives normal-cyan input data Cin from the color correction module <b>98</b> and when the halftone module <b>99</b> receives light-cyan input data Lcin from the color correction module <b>98</b>. The halftone module <b>99</b> modifies the thresholds for normal cyan based on the results judged for normal-cyan input data Cin, and modifies the thresholds for light cyan based on the results judged for light-cyan input data Lcin.</p>
<p id="p-0200" num="0199">The halftone module <b>99</b> of the present modification performs the judgment operation and the threshold-modification operation for normal cyan in the same manner as in the second embodiment, and performs the judgment operation and the threshold-modification operation for light is cyan in the same manner as in the first modification of the second embodiment.</p>
<p id="p-0201" num="0200">The present inventors executed the experiments similarly as the second experiments described in the second embodiment. It was confirmed that false contour can be reduced by adding noise signals to thresholds for both of light cyan and normal cyan at the point where normal cyan ink is started being mixed with light cyan ink.</p>
<p id="p-0202" num="0201">Prevention of false contours gas confirmed to be even more remarkable by adding a maximum noise signal to thresholds for both cyan ink and light cyan ink around the point that normal cyan ink starts being mixed with light cyan ink and gradually reducing the noise signal for normal cyan as the value of normal cyan increases, while gradually reducing the noise signal for light cyan as the value of light cyan decreases.</p>
<heading id="h-0009" level="1">Third Embodiment</heading>
<p id="p-0203" num="0202">Next will be described a third embodiment of the present invention.</p>
<p id="p-0204" num="0203">As described already, after the light cyan input value Lcin becomes in a substantially level state and before the normal cyan ink starts increasing from zero (0), the printer <b>22</b> will output a fixed maximum amount of light cyan ink continuously without outputting normal cyan ink, thereby generating a false contour. Generally, a false contour is generated around a point where the light cyan input value Lcin becomes substantially uniform.</p>
<p id="p-0205" num="0204">According to the present embodiment, in order to prevent such a false contour, the halftone module <b>99</b> in the first modification of the second embodiment (<figref idref="DRAWINGS">FIG. 16(A)</figref> and <figref idref="DRAWINGS">FIG. 19</figref>) is modified in a manner described below.</p>
<p id="p-0206" num="0205">When the halftone module <b>99</b> receives light-cyan input data Lcin from the color correction module <b>98</b> as shown in <figref idref="DRAWINGS">FIG. 16(A)</figref>, the judging section <b>99</b><i>e </i>judges whether or not the light-cyan input value Lcin is near to a value, at which the light cyan input value Lcin becomes substantially uniform. The judging section <b>99</b><i>e </i>performs this judgment, while referring to the distribution curve DC of <figref idref="DRAWINGS">FIG. 11</figref>.</p>
<p id="p-0207" num="0206">More specifically, the judging section <b>99</b> uses the following equation (8) to calculate the value of “rate” instead of using equation (7):
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?>“rate”1−{[(“light-cyan uniform value in distribution curve”−1)−“input value”]/“range”}  (8)<?in-line-formulae description="In-line Formulae" end="tail"?>
</p>
<p id="p-0208" num="0207">wherein the value of “range” is set to 10, and the value of “light-cyan uniform value in distribution curve” is a value of light cyan input value, at which the light cyan input value becomes substantially uniform. In this example, as apparent from the distribution curve DC of <figref idref="DRAWINGS">FIG. 11</figref>, when the light cyan input value reaches “51”, the light cyan input value starts being substantially uniform at the value of “51”. Accordingly, “light-cyan uniform value in distribution curve” in equation (8) is set to 51. The equation (8) is therefore expressed as “rate”1−{(50−“input value”)/10}.</p>
<p id="p-0209" num="0208">In order to calculate the equation (8), the process of S<b>24</b> in <figref idref="DRAWINGS">FIG. 19</figref> is modified to retrieve, from the color correction table CT, the value of light cyan input value (“51” in this example), at which the light cyan input value becomes substantially uniform.</p>
<p id="p-0210" num="0209">The judging section <b>99</b><i>e </i>then judges in S<b>34</b> whether or not the “rate” is greater than zero and smaller than or equal to 1. When the value of “rate” is greater than zero and smaller than or equal to 1, it is known that the light-cyan input value Lcin is near to the value, at which the light cyan input value becomes substantially uniform. When 0&lt;“rate”≦1, therefore, the calculating section <b>99</b><i>f </i>converts, in S<b>40</b>, the thresholds Ta, Th, and Tc for light cyan into the modified thresholds Ta′, Tb′, and Tc′ by using the equations (2) and (3). On the other hand, when the value of “rate” is smaller than or equal to zero and greater than 1, the calculating section <b>99</b><i>f </i>converts, in S<b>50</b>, the thresholds Ta, Tb, and Tc for light cyan into the modified thresholds Ta′, Tb′, and Tc′ by using the equation (4).</p>
<p id="p-0211" num="0210">In this way, according to the present embodiment, when the judging section <b>99</b><i>e </i>determines that the light cyan input value Lcin is around the value, at which the light cyan input value Lcin starts being substantially leveled, the calculating section <b>99</b><i>f </i>adds a noise to the thresholds for light cyan.</p>
<p id="p-0212" num="0211">The present inventors confirmed that by adding a noise signal to the thresholds for light cyan around a point at which the light cyan input value becomes substantially uniform, the boundaries between the region formed by light cyan ink only and the region formed by both of light cyan ink and normal cyan ink become difficult to perceive. As a result false contour is reduced.</p>
<p id="h-0010" num="0000">&lt;Modification of Third Embodiment&gt;</p>
<p id="p-0213" num="0212">According to the present modification, in order to prevent a false contour that is generated around a point where the light cyan input value becomes substantially uniform, the halftone module <b>99</b> in the second embodiment (<figref idref="DRAWINGS">FIGS. 16(A) and 16(B)</figref>) is modified in a manner described below.</p>
<p id="p-0214" num="0213">When the halftone module <b>99</b> receives normal-cyan input data Cin from the color correction module <b>98</b> as shown in <figref idref="DRAWINGS">FIG. 26(A)</figref>, the judging, section <b>99</b><i>e </i>judges whether or not the normal-cyan input value Cin is near to a value, at which the corresponding light cyan input value Lcin becomes substantially uniform. The judging section <b>99</b><i>e </i>performs this judgment, while referring to the distribution curve DC of <figref idref="DRAWINGS">FIG. 11</figref>.</p>
<p id="p-0215" num="0214">More specifically, the judging section <b>99</b> uses the following equation (9) to calculate the value of “rate” instead of using equation (6):
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?>“rate”1−{[“input value”−(“normal-cyan value for light-cyan uniform value in distribution curve”)]/“range”}  (9)<?in-line-formulae description="In-line Formulae" end="tail"?>
</p>
<p id="p-0216" num="0215">wherein the value of “range” is set to 10, and the value of “normal-cyan for light-cyan uniform value in distribution curve” is a value of normal cyan input value, at which the corresponding normal cyan input value becomes substantially uniform. In this example, as apparent from the distribution curve DC of <figref idref="DRAWINGS">FIG. 11</figref>, when the normal cyan input value reaches “1”, the corresponding light cyan input value starts being substantially uniform at the value of “51”. Accordingly, “normal-cyan value for light-cyan uniform value in distribution curve” in equation (9) is set to 1. The equation (9) is therefore expressed as “rate”=1−{(“input value”−1)/10}.</p>
<p id="p-0217" num="0216">In order to calculate the equation (9), the process of S<b>22</b> in <figref idref="DRAWINGS">FIG. 16(B)</figref> is modified to retrieve, from the color correction table CT, the value of normal cyan input value (“1” in this example), at which the corresponding light cyan input value becomes substantially uniform.</p>
<p id="p-0218" num="0217">The judging section <b>99</b><i>e </i>then judges in S<b>32</b> whether or not the “rate” is greater than zero and smaller than or equal to 1. When the value of “rate” is greater than zero and smaller than or equal to 1, it is known that the normal-cyan input value Cin is near to the value, at which the corresponding light cyan input value becomes substantially uniform. When 0&lt;“rate”≦1, therefore, the calculating section <b>99</b><i>f </i>converts, in S<b>40</b>, the thresholds Ta, Tb, and Tc for normal cyan into the modified thresholds Ta′, Tb′, and Tc′ by using the equations (2) and (3). On the other hand, when the value of “rate” is smaller than or equal to zero and greater than 1, the calculating section <b>99</b><i>f </i>converts, in S<b>50</b>, the thresholds Ta, Tb, and Tc for normal cyan into the modified thresholds Ta′, Tb′, and Tc′ by using the equation (4).</p>
<p id="p-0219" num="0218">In this way, according to the present embodiment, when the judging section <b>99</b><i>e </i>determines that the normal cyan input value Cin is around the value, at which the corresponding light cyan input value starts being substantially leveled, the calculating section <b>99</b><i>f </i>adds a noise to the thresholds for normal cyan.</p>
<p id="p-0220" num="0219">The present inventors confirmed that by adding a noise signal for normal cyan in this manner, the normal cyan output value Cout starts increasing at approximately the same position as the normal cyan input value Cin starts increasing, thereby reducing false contours.</p>
<p id="p-0221" num="0220">While the invention has been described in detail with reference to specific embodiments thereof, it would be apparent to those skilled in the art that many modifications and variations may be made therein without departing from the spirit of the invention, the scope of which is defined by the attached claims.</p>
<p id="p-0222" num="0221">For example, in the embodiments described above, the thresholds Ta, Tb, and Tc are selectively added with noise. However, the noise, defined by the equations (2) and (3) may be multiplied by a value (−1) and then added to the input value Iin. The thus modified input value Iin is corrected by portions of errors distributed from already-processed pixels, and is then compared with the original thresholds Ta, Tb, and Tc. The same effects as those obtained in the embodiments will be obtained.</p>
<p id="p-0223" num="0222">In the second through third embodiments, the halftone module <b>99</b> performs judgment and threshold-modification for light-cyan and/or normal cyan. However, the halftone module <b>99</b> may perform the judgment and threshold-modification for light-magenta and/or normal magenta in similar manners as in the second through third embodiments.</p>
<p id="p-0224" num="0223">In the second through third embodiments, two types of ink, which have the same hue but different densities, are mixed together. However, three or more types of ink, which have the same hue but different densities, may be mixed together. Also in such a case, similarly to the second embodiment, the judgment section <b>99</b><i>e </i>may judge whether input data of at least one ink is near to a point where the at least one ink is mixed with another ink, and add noise to the threshold for the at least one ink dependently on the judged results. Similarly to the third embodiment, the judgment section <b>99</b><i>e </i>may judge whether input data of at least one ink is near to a point where the at least one ink becomes leveled, and add noise to the threshold for the at least one ink dependently on the judged results. Similarly to the modification of the third embodiment, the judgment section <b>99</b><i>e </i>may judge whether input data of at least one ink is near to a point where another ink becomes leveled, and add noise to the threshold for the at least one ink dependently on the judged results.</p>
<p id="p-0225" num="0224">The first embodiment may be combined with the second through third embodiments. For example, when receiving the input value Iin for yellow and black, the halftone module <b>99</b> performs the halftone process as in the first embodiment. When receiving the input value Iin for normal cyan, light cyan, normal magenta, or light magenta, the halftone module <b>99</b> performs the halftone process as in the second through third embodiments.</p>
<p id="p-0226" num="0225">In the above-described embodiments, the halftone module <b>99</b> executes the multilevel halftone process by using the plurality of thresholds Ta, Tb, and Tc. However, the halftone module <b>99</b> may be modified to execute the bi-level halftone process. In this case, the threshold table ThT stores therein only one threshold T for each of six ink colors. The threshold T is selectively modified according to the results judged by the judging section <b>99</b><i>e</i>. The relative density table RT stores therein only two relative density values “255” (forming-dot) and “0” (forming-no-dot) for each of six ink colors. If the corrected input value Iin′ is greater than or equal to the modified threshold value T′, the output value Iout is turned ON to have a value of one (1) indicative of an output of a dot. The output value Iout is converted into the relative density value “255”. If the corrected input value Iin′ is smaller than the modified threshold value T′, the output value Iout is turned OFF to have a value of zero (0) indicative of an output of no dot. The output value Iout is converted into the relative density value of “0”.</p>
<p id="p-0227" num="0226">In the embodiments described above, the halftone process (halftone module <b>99</b>) is executed by the CPU <b>2</b> provided in the personal computer <b>90</b>. In this way, the functions for executing the halftone process are implemented as the image processing program <b>99</b>. The image processing program <b>99</b> can be originally stored in a storage medium, such as a CD-ROM, and read into the RAM <b>4</b> via the CD-ROM device <b>8</b> and executed by the CPU <b>2</b>. The image processing program <b>99</b> can be downloaded from the Internet via the NCU <b>14</b> into the hard disk device <b>10</b>.</p>
<?DETDESC description="Detailed Description" end="tail"?>
</description>
<us-math idrefs="MATH-US-00001" nb-file="US07298525-20071120-M00001.NB">
<img id="EMI-M00001" he="26.08mm" wi="76.20mm" file="US07298525-20071120-M00001.TIF" alt="embedded image " img-content="math" img-format="tif"/>
</us-math>
<us-claim-statement>What is claimed is:</us-claim-statement>
<claims id="claims">
<claim id="CLM-00001" num="00001">
<claim-text>1. An image processing device, comprising:
<claim-text>an inputting portion receiving input data indicative of a density value of one color component for one pixel in a desired image;</claim-text>
<claim-text>a judging unit judging whether or not the density value of the input data is near to a reference value, wherein the density value of the input data is judged to be near to the reference value when a difference between the density value and the reference value is within a predetermined range;</claim-text>
<claim-text>a threshold storing portion previously storing therein a predetermined threshold;</claim-text>
<claim-text>a noise adding portion adding a noise to either one of the density value of the input data and the threshold when it is judged that the density value of the input data is near to the reference value;</claim-text>
<claim-text>a correcting portion correcting the input data by a correction amount that is determined dependently on an error value which is determined at at least one pixel that has been already-processed and that is located adjacent to the subject pixel, thereby converting the input data into corrected data;</claim-text>
<claim-text>a comparing portion comparing the corrected data with the threshold;</claim-text>
<claim-text>an outputting portion outputting output data based on the compared results, thereby converting the corrected data into the output data;</claim-text>
<claim-text>a relative density setting portion setting a relative density value that corresponds to the output data; and</claim-text>
<claim-text>an error calculating portion calculating an error value for the subject pixel based on a difference between the corrected data and the relative density value.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00002" num="00002">
<claim-text>2. An image processing device as claimed in <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the noise adding portion adds the noise to the input data, the correcting portion correcting the noise-added input data by the correction amount, the comparing portion comparing the corrected data with the threshold.</claim-text>
</claim>
<claim id="CLM-00003" num="00003">
<claim-text>3. An image processing device as claimed in <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the noise adding portion adds a noise to the threshold, the correcting portion correcting the input data by the correction amount, the comparing portion comparing the corrected data with the noise-added threshold.</claim-text>
</claim>
<claim id="CLM-00004" num="00004">
<claim-text>4. An image processing device as claimed in <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the amount of the noise is the largest when the density value of the input data is equal to the reference value, the amount of the noise decreasing as a difference between the density value of the input data and the reference value increases.</claim-text>
</claim>
<claim id="CLM-00005" num="00005">
<claim-text>5. An image processing device as claimed in <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the threshold storing portion previously stores a plurality of different thresholds, the noise adding portion performing, when it is judged that the density value of the input data is near to the reference value, either one of a first noise-adding operation to add a noise to the density value of the input data and a second noise-adding operation to add a noise to each of the plural thresholds, the comparing portion comparing the corrected data with each of the plural thresholds, the outputting portion outputting multilevel output data based on the compared results.</claim-text>
</claim>
<claim id="CLM-00006" num="00006">
<claim-text>6. An image processing device as claimed in <claim-ref idref="CLM-00001">claim 1</claim-ref>, further comprising a relative density storage device previously storing a plurality of relative density values in correspondence with a plurality of different color components and with a plurality of different dot-forming states, the relative density setting portion extracting, from the relative density storage device, one relative density value that corresponds to the color component of the input data and to a dot-forming state that corresponds to the output data.</claim-text>
</claim>
<claim id="CLM-00007" num="00007">
<claim-text>7. An image processing device as claimed in <claim-ref idref="CLM-00006">claim 6</claim-ref>, wherein the reference value is equal to one-half of a relative density value that corresponds to the color component of the input data and to a predetermined dot-forming state.</claim-text>
</claim>
<claim id="CLM-00008" num="00008">
<claim-text>8. An image processing device as claimed in <claim-ref idref="CLM-00007">claim 7</claim-ref>, wherein the judging unit includes:
<claim-text>an extracting portion extracting, from the relative density storage device, one relative density value that corresponds to the color component of the input data and to the predetermined dot-forming state; and</claim-text>
<claim-text>a judging portion judging whether or not a difference between the density value of the input data and a one-half of the extracted relative density value is in a predetermined range,</claim-text>
<claim-text>wherein she noise adding portion adds a noise signal to either one of the density value of the input data and the threshold when the difference is in the predetermined range.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00009" num="00009">
<claim-text>9. An image processing device as claimed in <claim-ref idref="CLM-00007">claim 7</claim-ref>, wherein the amount of the noise is the largest when the density value of the input data is equal to the one-half of the extracted relative density value, the amount of the noise decreasing as a difference between the density value of the input data and the one-half of the extracted relative density value increases.</claim-text>
</claim>
<claim id="CLM-00010" num="00010">
<claim-text>10. An image processing device as claimed in <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the inputting portion is capable of receiving both of first input data and second input data for the one pixel, the first input data being indicative of a density value of a first color component and the second input data being indicative of a density value of a second color component, and
<claim-text>wherein the density value of the second input data is maintained as being equal to a minimum value of zero (0) while the density value of the first input data is smaller than a predetermined maximum value, thereby indicating that only the first color component is to be outputted, the density value of the second input data becoming greater than the minimum value of zero when the density value of the first input data reaching the predetermined maximum value, thereby indicating that the first and second color components start being mixed with each other.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00011" num="00011">
<claim-text>11. An image processing device as claimed in <claim-ref idref="CLM-00010">claim 10</claim-ref>, wherein the density value of the first input data is maintained as being equal to the predetermined maximum value while the density value of the second input data is greater than the minimum value of zero (0).</claim-text>
</claim>
<claim id="CLM-00012" num="00012">
<claim-text>12. An image processing device as claimed in <claim-ref idref="CLM-00010">claim 10</claim-ref>, wherein the first color component is defined by light ink of a predetermined color, and the second color component is defined by normal ink, whose color is the same as that of the light ink and whose density is greater than that of the light ink.</claim-text>
</claim>
<claim id="CLM-00013" num="00013">
<claim-text>13. An image processing device as claimed in <claim-ref idref="CLM-00012">claim 12</claim-ref>, wherein the judging unit judges whether or not a difference between the density value of the first input data and the reference value for the first color component is within a predetermined range, the reference value for the first color component being equal to a value obtained by subtracting the value of one (1) from the predetermined maximum value, the noise adding portion adding the noise to either one of the first input data and the threshold for the first input data when the difference between the density value of the first input data and the reference value for the first color component is within the predetermined range.</claim-text>
</claim>
<claim id="CLM-00014" num="00014">
<claim-text>14. An image processing device as claimed in <claim-ref idref="CLM-00013">claim 13</claim-ref>, wherein the amount of the noise is the largest when the density value of the first input data is equal to the reference value, the amount of the noise decreasing as the density value of the first input data decreases from the reference value.</claim-text>
</claim>
<claim id="CLM-00015" num="00015">
<claim-text>15. An image processing device as claimed in <claim-ref idref="CLM-00012">claim 12</claim-ref>, wherein the judging unit judges whether or not a difference between the density value of the second input data and the reference value for the second color component is within a predetermined range, the reference value for the second color component being equal to a sum of the predetermined minimum value of zero (0) and a value of one (1), the noise adding portion adding the noise to either one of the second input data and the threshold for the second input data when the difference between the density value of the second input data and the reference value for the second color component is within the predetermined range.</claim-text>
</claim>
<claim id="CLM-00016" num="00016">
<claim-text>16. An image processing device as claimed in <claim-ref idref="CLM-00015">claim 15</claim-ref>, wherein the amount of the noise is the largest when the density value of the second input data is equal to the reference value, the amount of the noise decreasing as the density value of the second input data increases from the reference value.</claim-text>
</claim>
<claim id="CLM-00017" num="00017">
<claim-text>17. An image processing device as claimed in <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the inputting portion is capable of receiving both of first input data and second input data for the one pixel, the first input data being indicative of a density value of a first color component and the second input data being indicative of a density value of a second color component, and
<claim-text>wherein the density value of the first input data is maintained as being equal to a predetermined first value while the density value of the second input data is equal to or greater than a predetermined second value.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00018" num="00018">
<claim-text>18. An image processing device as claimed in <claim-ref idref="CLM-00017">claim 17</claim-ref>, wherein the judging unit judges whether or not a difference between the density value of the first input data and the reference value for the first color component is within a predetermined range, the reference value for the first color component being equal to a value obtained by subtracting the value of one (1) from the predetermined first value, the noise adding portion adding the noise to either one of the first input data and the threshold for the first input data when the difference between the density value of the first input data and the reference value for the first color component is within the predetermined range.</claim-text>
</claim>
<claim id="CLM-00019" num="00019">
<claim-text>19. Am image processing device as claimed in <claim-ref idref="CLM-00017">claim 17</claim-ref>, wherein the judging unit judges whether or not a difference between the density value of the second input data and the reference value for the second color component is within a predetermined range, the reference value for the second color component being equal to the predetermined second value, the noise adding portion adding the noise to either one of the second input data and the threshold for the second input data when the difference between the density value of the second input data and the reference value for the second color component is within the predetermined range.</claim-text>
</claim>
<claim id="CLM-00020" num="00020">
<claim-text>20. An image processing device as claimed in <claim-ref idref="CLM-00017">claim 17</claim-ref>, wherein the first color component is defined by light ink of a predetermined color, and the second color component is defined by normal ink, whose color is the same as that of the light ink and whose density is greater than that of the light ink.</claim-text>
</claim>
<claim id="CLM-00021" num="00021">
<claim-text>21. An image processing device for producing image signals indicative of a desired image by processing a plurality of color signals for a plurality of color components, the image processing device comprising:
<claim-text>a storage device storing a plurality of relative values in correspondence with a plurality of different parameters, the plurality of different parameters including a plurality of color components;</claim-text>
<claim-text>an input device receiving, as a color signal, an input value indicative of color density at one color component for one pixel constituting a desired image;</claim-text>
<claim-text>an extracting portion extracting one relative value from the relative value storage device based on a parameter that corresponds to the input value;</claim-text>
<claim-text>a judging portion judging whether or not the input value is near to a one-half of the extracted relative value, wherein the input value is judged to be near to the one-half of the extracted relative value when a difference between the input value and the one-half of the extracted relative value is within a predetermined range;</claim-text>
<claim-text>an adding portion adding a noise signal to either one of the input value and a threshold when the input value is near to the one-half of the extracted relative value so as to generate a corrected input data and a modified threshold; and</claim-text>
<claim-text>a converting portion converting the input value into an output value by comparing the corrected input value with the threshold, and outputting the output value as an image signal.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00022" num="00022">
<claim-text>22. An image processing device as claimed in <claim-ref idref="CLM-00021">claim 21</claim-ref>, wherein the extracting portion extracting the one relative value that correspond to the color components of the input value.</claim-text>
</claim>
<claim id="CLM-00023" num="00023">
<claim-text>23. An image processing device for producing image signals indicative of a desired image by processing a plurality of color signals for a plurality of color components, the image processing device comprising:
<claim-text>an input portion receiving an input value of a first color component of a desired image and an input value of a second color component of the desired image;</claim-text>
<claim-text>a judging portion performing at least one of: a first judging operation judging whether or not the input value of the first color component indicates a density level near to a predetermined mixing-start-point density level where the first color component starts being mixed with the second color component, and a second judging operation judging whether or not the input value of the second color component indicates a density level near to the predetermined mixing-start-point density level, wherein a density level is indicated as being near to the predetermined mixing-start-point density level when a difference between the density level and the predetermined mixing-start-point density level is within a predetermined range;</claim-text>
<claim-text>an adding portion performing a first noise-adding operation when the judging portion determines that the input value of the first color component indicates a density level near to the predetermined mixing-start-point density level and performing a second noise-adding operation when the judging portion determines that the input value of the second color component indicates a density level near to the predetermined mixing-start-point density level, the first noise-adding operation being for adding a first noise signal to either one of a threshold for the first color component and the input value for the first color component so as to generate a first modified threshold and a corrected input value for the first color component, the second noise-adding operation being for adding a second noise signal to either one of a threshold for the second color component and the input value for the second color component so as to generate a second modified threshold and a corrected input value for the second color component; and</claim-text>
<claim-text>a converting portion comparing the corrected input value of the first color component with the first modified threshold, thereby converting the corrected input value of the first color component into an output value of the first color component, and comparing the corrected input value of the second color component with the second modified threshold, thereby converting the corrected input value of the second color component into an output value of the second color component.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00024" num="00024">
<claim-text>24. An image processing device as claimed in <claim-ref idref="CLM-00023">claim 23</claim-ref>, wherein the first color component has a density smaller then the second color component.</claim-text>
</claim>
<claim id="CLM-00025" num="00025">
<claim-text>25. An image processing device as claimed in <claim-ref idref="CLM-00023">claim 23</claim-ref>, wherein the first noise signal is at the maximum when the input value of the first color component is equal to the mixing-start-point density level, and gradually decreases as the input value of the first color component decreases.</claim-text>
</claim>
<claim id="CLM-00026" num="00026">
<claim-text>26. An image processing device as claimed in <claim-ref idref="CLM-00023">claim 23</claim-ref>, wherein the second noise signal is at the maximum when the input value of the second color component is equal to the mixing-start-point density level, and gradually decreases as the input value of the second color component increases.</claim-text>
</claim>
<claim id="CLM-00027" num="00027">
<claim-text>27. An image processing device for producing image signals indicative of a desired image by processing a plurality of color signals for a plurality of color components, the image processing device comprising:
<claim-text>an input portion receiving an input value of a first color component of a desired image;</claim-text>
<claim-text>a judging portion judging whether or not the input value of the first color component indicates a density level near to a predetermined uniform density level, at which the input value of the first color component becomes substantially uniform, wherein the density level is indicated as being near to the predetermined uniform density level when a difference between the density level and the predetermined uniform density level is within a predetermined range, and the input value of the first color component becomes substantially uniform when the input value of the first color component reaches a constant value;</claim-text>
<claim-text>an adding portion adding a first noise signal to either one of the input value of the first color component and a threshold for the input value of the first color component when the judging portion determines that the input value of the first color component indicates a density level near to the predetermined uniform density level; and</claim-text>
<claim-text>a converting portion comparing the input value of the first color component with the threshold, thereby converting the input value of the first color component into an output value of the first color component.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00028" num="00028">
<claim-text>28. An image processing device for producing image signals indicative of a desired image by processing a plurality of color signals for a plurality of color components, the image processing device comprising:
<claim-text>an input portion receiving an input value of a first color component of a desired image and an input value of a second color component of the desired image;</claim-text>
<claim-text>a judging portion judging whether or not the input value of the second color component indicates that the input value of the first color component has a density level near to a predetermined uniform density level, at which the input value of the first color component becomes substantially uniform, wherein the density level is indicated as being near to the predetermined uniform density level when a difference between the density level and the predetermined uniform density level is within a predetermined range, and the input value of the first color component becomes substantially uniform when the input value of the first color component reaches a constant value;</claim-text>
<claim-text>an adding portion adding a noise signal to either one of the input value of the second color component and a threshold for the input value of the second color component when the judging portion determines that the input value of the second color component indicates that the input value of the first color component has the density level near to the predetermined uniform density level; and</claim-text>
<claim-text>a converting portion comparing the input value of the second color component with the corresponding threshold, thereby converting the input value of the second color component into an output value of the second color component.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00029" num="00029">
<claim-text>29. An image processing device as claimed in <claim-ref idref="CLM-00028">claim 28</claim-ref>, wherein the first color component has a density smaller than the second color component.</claim-text>
</claim>
<claim id="CLM-00030" num="00030">
<claim-text>30. A computer-readable medium encoded with a computer program for being executed by a computer to process an image, the program comprising:
<claim-text>instructions for receiving input data indicative of a density value of one color component for one pixel in a desired image;</claim-text>
<claim-text>instructions for judging whether or not the density value of the input data is near to a reference value, wherein the density value of the input data is judged to be near to the reference value when a difference between the density value and the reference value is within a predetermined range;</claim-text>
<claim-text>instructions for adding a noise to either one of the density value of the input data and a threshold when it is judged that the density value of the input data is near to the reference value;</claim-text>
<claim-text>instructions for correcting the input data by a correction amount that is determined dependently on an error value which is determined at at least one pixel that has been already-processed and that is located near to the subject pixel, thereby converting the input data into corrected data;</claim-text>
<claim-text>instructions for comparing the corrected data with the threshold;</claim-text>
<claim-text>instructions for outputting output data based on the compared results, thereby converting the corrected data into the output data;</claim-text>
<claim-text>instructions for setting a relative density value that corresponds to the output data; and</claim-text>
<claim-text>instructions for calculating an error value for the subject pixel based on a difference between the corrected data and the relative density value.</claim-text>
</claim-text>
</claim>
</claims>
</us-patent-grant>
