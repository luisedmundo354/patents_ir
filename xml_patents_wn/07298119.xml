<us-patent-grant lang="EN" dtd-version="v4.2 2006-08-23" file="US07298119-20071120.XML" status="PRODUCTION" id="us-patent-grant" country="US" date-produced="20071106" date-publ="20071120">
<us-bibliographic-data-grant>
<publication-reference>
<document-id>
<country>US</country>
<doc-number>07298119</doc-number>
<kind>B1</kind>
<date>20071120</date>
</document-id>
</publication-reference>
<application-reference appl-type="utility">
<document-id>
<country>US</country>
<doc-number>11145269</doc-number>
<date>20050603</date>
</document-id>
</application-reference>
<us-application-series-code>11</us-application-series-code>
<us-term-of-grant>
<us-term-extension>175</us-term-extension>
</us-term-of-grant>
<classifications-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>G</section>
<class>05</class>
<subclass>F</subclass>
<main-group>3</main-group>
<subgroup>16</subgroup>
<symbol-position>F</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20071120</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
</classifications-ipcr>
<classification-national>
<country>US</country>
<main-classification>323225</main-classification>
<further-classification>323284</further-classification>
<further-classification>323285</further-classification>
</classification-national>
<invention-title id="d0e53">Step-up/step-down (buck/boost) switching regulator control methods</invention-title>
<references-cited>
<citation>
<patcit num="00001">
<document-id>
<country>US</country>
<doc-number>6087816</doc-number>
<kind>A</kind>
<name>Volk</name>
<date>20000700</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00002">
<document-id>
<country>US</country>
<doc-number>6166527</doc-number>
<kind>A</kind>
<name>Dwelley et al.</name>
<date>20001200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>323222</main-classification></classification-national>
</citation>
<citation>
<patcit num="00003">
<document-id>
<country>US</country>
<doc-number>6275016</doc-number>
<kind>B1</kind>
<name>Ivanov</name>
<date>20010800</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00004">
<document-id>
<country>US</country>
<doc-number>6831448</doc-number>
<kind>B2</kind>
<name>Ishii et al.</name>
<date>20041200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>323282</main-classification></classification-national>
</citation>
<citation>
<patcit num="00005">
<document-id>
<country>US</country>
<doc-number>2006/0055384</doc-number>
<kind>A1</kind>
<name>Jordan et al.</name>
<date>20060300</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>323282</main-classification></classification-national>
</citation>
</references-cited>
<number-of-claims>34</number-of-claims>
<us-exemplary-claim>1</us-exemplary-claim>
<us-field-of-classification-search>
<classification-national>
<country>US</country>
<main-classification>323222</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>323224</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>323225</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>323282</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>323283</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>323284</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>323285</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>323286</main-classification>
</classification-national>
</us-field-of-classification-search>
<figures>
<number-of-drawing-sheets>9</number-of-drawing-sheets>
<number-of-figures>15</number-of-figures>
</figures>
<parties>
<applicants>
<applicant sequence="001" app-type="applicant-inventor" designation="us-only">
<addressbook>
<last-name>Amram Summit</last-name>
<first-name>Jeffrey Lewis</first-name>
<address>
<city>Jefferson</city>
<state>MA</state>
<country>US</country>
</address>
</addressbook>
<nationality>
<country>omitted</country>
</nationality>
<residence>
<country>US</country>
</residence>
</applicant>
<applicant sequence="002" app-type="applicant-inventor" designation="us-only">
<addressbook>
<last-name>Miwa</last-name>
<first-name>Brett A.</first-name>
<address>
<city>Wellesley</city>
<state>MA</state>
<country>US</country>
</address>
</addressbook>
<nationality>
<country>omitted</country>
</nationality>
<residence>
<country>US</country>
</residence>
</applicant>
<applicant sequence="003" app-type="applicant-inventor" designation="us-only">
<addressbook>
<last-name>Volk</last-name>
<first-name>Karl Richard</first-name>
<address>
<city>Scotts Valley</city>
<state>CA</state>
<country>US</country>
</address>
</addressbook>
<nationality>
<country>omitted</country>
</nationality>
<residence>
<country>US</country>
</residence>
</applicant>
</applicants>
<agents>
<agent sequence="01" rep-type="attorney">
<addressbook>
<orgname>Blakely, Sokoloff, Taylor &amp; Zafman LLP</orgname>
<address>
<country>unknown</country>
</address>
</addressbook>
</agent>
</agents>
</parties>
<assignees>
<assignee>
<addressbook>
<orgname>Maxim Integrated Products, Inc.</orgname>
<role>02</role>
<address>
<city>Sunnyvale</city>
<state>CA</state>
<country>US</country>
</address>
</addressbook>
</assignee>
</assignees>
<examiners>
<primary-examiner>
<last-name>Han</last-name>
<first-name>Jessica</first-name>
<department>2838</department>
</primary-examiner>
</examiners>
</us-bibliographic-data-grant>
<abstract id="abstract">
<p id="p-0001" num="0000">A step-up/step-down switching regulator control method for a regulator having an inductor with first and second leads, a first switch for controllably coupling the first lead to a source of power, a first device between the first lead and a circuit ground, a second switch for controllably coupling the second lead to the circuit ground, and a second device between the second lead and a regulator, the method comprising operating the switches in a sequence of phases when the source of power has a voltage exceeding the regulator output and in the same sequence of phases when the source of power has a voltage less than the regulator output, the phases being phase <b>1</b> with the first and second switches closed, phase <b>2</b> with the first switch closed and the second switch open, and phase <b>3</b> with both switches open. The first and second devices may be switches or diodes. Various embodiments are disclosed.</p>
</abstract>
<drawings id="DRAWINGS">
<figure id="Fig-EMI-D00000" num="00000">
<img id="EMI-D00000" he="93.56mm" wi="207.09mm" file="US07298119-20071120-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00001" num="00001">
<img id="EMI-D00001" he="229.53mm" wi="174.07mm" orientation="landscape" file="US07298119-20071120-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00002" num="00002">
<img id="EMI-D00002" he="241.13mm" wi="171.45mm" file="US07298119-20071120-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00003" num="00003">
<img id="EMI-D00003" he="153.25mm" wi="150.28mm" file="US07298119-20071120-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00004" num="00004">
<img id="EMI-D00004" he="205.74mm" wi="171.03mm" file="US07298119-20071120-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00005" num="00005">
<img id="EMI-D00005" he="186.52mm" wi="151.89mm" file="US07298119-20071120-D00005.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00006" num="00006">
<img id="EMI-D00006" he="184.32mm" wi="155.79mm" file="US07298119-20071120-D00006.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00007" num="00007">
<img id="EMI-D00007" he="156.04mm" wi="145.03mm" file="US07298119-20071120-D00007.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00008" num="00008">
<img id="EMI-D00008" he="177.63mm" wi="160.02mm" file="US07298119-20071120-D00008.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00009" num="00009">
<img id="EMI-D00009" he="204.64mm" wi="177.55mm" file="US07298119-20071120-D00009.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
</drawings>
<description id="description">
<?BRFSUM description="Brief Summary" end="lead"?>
<heading id="h-0001" level="1">BACKGROUND OF THE INVENTION</heading>
<p id="p-0002" num="0001">1. Field of the Invention</p>
<p id="p-0003" num="0002">The present invention relates to the field of step-up/step-down switching regulators.</p>
<p id="p-0004" num="0003">2. Prior Art</p>
<p id="p-0005" num="0004">Step-up/step-down switching regulators use pulse width modulation techniques to control the transfer of energy from a power source to a load. When the voltage ranges of the power source and the load overlap, a common condition in battery powered portable equipment, this control function becomes more complicated. Existing techniques exhibit such undesirable behaviors as frequency subharmonics, increased voltage and current ripple, mode hunting, reduced conversion efficiency and increased component stress. By way of example, an H-bridge circuit such as that shown in <figref idref="DRAWINGS">FIG. 1</figref> can be used as a buck-boost DC to DC converter. Such a converter and method of operation of such a converter is disclosed in U.S. Pat. No. 6,087,816. This system has a large current ripple. The inductor, capacitors and power switches must be rated at a much larger current than the load current.</p>
<?BRFSUM description="Brief Summary" end="tail"?>
<?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?>
<description-of-drawings>
<heading id="h-0002" level="1">BRIEF DESCRIPTION OF THE DRAWINGS</heading>
<p id="p-0006" num="0005"><figref idref="DRAWINGS">FIG. 1</figref> presents a generic H-bridge circuit that can be used as a buck-boost DC to DC converter.</p>
<p id="p-0007" num="0006"><figref idref="DRAWINGS">FIG. 2</figref> is a block diagram of the present invention.</p>
<p id="p-0008" num="0007"><figref idref="DRAWINGS">FIG. 3</figref><i>a </i>is a state diagram for one embodiment of the present invention.</p>
<p id="p-0009" num="0008"><figref idref="DRAWINGS">FIG. 3</figref><i>b </i>is a diagram illustrating the delivery of charge to the regulator output for one cycle of operation in accordance with the state diagram of <figref idref="DRAWINGS">FIG. 3</figref><i>a </i>operating with the input voltage equal to the output voltage.</p>
<p id="p-0010" num="0009"><figref idref="DRAWINGS">FIG. 4</figref><i>a </i>is a state diagram for another embodiment of the present invention.</p>
<p id="p-0011" num="0010"><figref idref="DRAWINGS">FIG. 4</figref><i>b </i>is a diagram illustrating the delivery of charge to the regulator output for one cycle of operation in accordance with the state diagram of <figref idref="DRAWINGS">FIG. 4</figref><i>a </i>operating with the input voltage equal to the output voltage.</p>
<p id="p-0012" num="0011"><figref idref="DRAWINGS">FIG. 5</figref><i>a </i>is a state diagram for still another embodiment of the present invention.</p>
<p id="p-0013" num="0012"><figref idref="DRAWINGS">FIG. 5</figref><i>b </i>is a diagram illustrating the delivery of charge to the regulator output for one cycle of operation in accordance with the state diagram of <figref idref="DRAWINGS">FIG. 5</figref><i>a </i>operating with the input voltage equal to the output voltage.</p>
<p id="p-0014" num="0013"><figref idref="DRAWINGS">FIG. 6</figref> is a block diagram of the current control used with the preferred embodiments of the present invention.</p>
<p id="p-0015" num="0014"><figref idref="DRAWINGS">FIG. 7</figref> is a circuit diagram for the filter used in the current control of <figref idref="DRAWINGS">FIG. 6</figref>.</p>
<p id="p-0016" num="0015"><figref idref="DRAWINGS">FIG. 8</figref> illustrates the operation of the embodiment of <figref idref="DRAWINGS">FIG. 4</figref><i>a </i>when the input voltage exceeds the output voltage.</p>
<p id="p-0017" num="0016"><figref idref="DRAWINGS">FIG. 9</figref> illustrates the operation of the embodiment of <figref idref="DRAWINGS">FIG. 4</figref><i>a </i>when the input voltage is less than the output voltage.</p>
<p id="p-0018" num="0017"><figref idref="DRAWINGS">FIG. 10</figref> illustrates the entry of the skip mode.</p>
<p id="p-0019" num="0018"><figref idref="DRAWINGS">FIG. 11</figref> illustrates the exiting of the skip mode.</p>
<p id="p-0020" num="0019"><figref idref="DRAWINGS">FIG. 12</figref> is a more complete state diagram for the embodiment of <figref idref="DRAWINGS">FIG. 4</figref><i>a. </i></p>
</description-of-drawings>
<?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?>
<?DETDESC description="Detailed Description" end="lead"?>
<heading id="h-0003" level="1">DETAILED DESCRIPTION OF THE PREFERRED EMBODIMENTS</heading>
<p id="p-0021" num="0020">A converter in accordance with the present invention is shown in <figref idref="DRAWINGS">FIG. 2</figref>. In such a converter, switches <b>1</b> and <b>4</b> may be P-channel devices and switches <b>2</b> and <b>3</b> may be N-channel devices as shown. In that regard, in such converters generally, switches <b>2</b> (N<b>1</b>) and <b>4</b> (P<b>2</b>) may serve a rectifying function as opposed to a control function, and accordingly, may be realized as conventional diodes, as Schottky diodes or as synchronous rectifiers. Techniques for controlling synchronous rectifiers are well known in the prior art, and accordingly, in order to not obscure the present invention, details of the control of switches <b>2</b> (N<b>1</b>) and <b>4</b> (P<b>2</b>), if synchronous rectifiers are used, are not repeated herein. Similarly, if on the other hand, diodes such as Schottky diodes are used for switches <b>2</b> and <b>4</b>, the following disclosure will usually ignore the voltage drops across the diodes for circuit analysis purposes. The explanation of the operation of the present invention is still applicable, however, though resulting current waveform slopes will differ somewhat and other minor variations will occur which are non-essential to the understanding of the invention. It should be noted however, that if diodes or synchronous rectifiers prohibiting negative currents are used, then the converters of the present invention will need a minimum load to maintain regulation.</p>
<p id="p-0022" num="0021"><figref idref="DRAWINGS">FIGS. 1 and 2</figref> illustrate the four switches, P<b>1</b>, P<b>2</b> and N<b>1</b> and N<b>2</b>, as in a synchronous rectifier embodiment. In normal PWM operation of certain preferred embodiments of the invention, switch N<b>1</b> is ON when switch P<b>1</b> is OFF, and switch N<b>1</b> is OFF when switch P<b>1</b> is ON, or N<b>1</b>= <o ostyle="single">P<b>1</b></o>. Similarly, switch P<b>2</b> is ON when switch N<b>2</b> is OFF, and switch P<b>2</b> is OFF when switch N<b>2</b> is ON, or P<b>2</b>= <o ostyle="single">N<b>2</b></o>. Accordingly, the present invention method will be described with respect to the control of switches P<b>1</b> and N<b>2</b>, it being recognized that unless noted otherwise, N<b>1</b>= <o ostyle="single">P<b>1</b></o> and P<b>2</b>= <o ostyle="single">N<b>2</b></o>. However the present invention is responsive to the current through switches N<b>1</b> and N<b>2</b>, and accordingly in the preferred embodiment, each of these switches has a current sense circuit CSN<b>1</b> and CSN<b>2</b> providing currents to the controller that are proportional (typically much less) than the current through the respective switch. In the preferred embodiment, the current sense circuits are each a form of current mirror, so that the current sense signal to the controller is substantially proportional to the current through the respective switch, even though the voltage across a switch will be a nonlinear function of the current through the switch. Also shown in <figref idref="DRAWINGS">FIG. 2</figref> as additional inputs to the controller are the feedback FB of the output voltage as divided down by the voltage divider R<b>1</b> and R<b>2</b>, and a reference voltage Vref.</p>
<p id="p-0023" num="0022"><figref idref="DRAWINGS">FIG. 1</figref> illustrates three combinations of switch settings for switches P<b>1</b> and N<b>2</b> of <figref idref="DRAWINGS">FIGS. 1 and 2</figref>, referred to herein as Φ<b>1</b>, Φ<b>2</b> and Φ<b>3</b>, or phases <b>1</b>, <b>2</b> and <b>3</b>. Φ<b>1</b> is identified as Charge L Fast, meaning to increase the current through the inductor L at a fast rate. For this current path, switches P<b>1</b> and N<b>2</b> are closed or conducting, subsequently indicated by simply P<b>1</b> N<b>2</b>. Here the charging rate di/dt=V<sub>IN</sub>/L (neglecting switch voltage drops). Since neither switches N<b>1</b> nor P<b>2</b> are in series with this current path, the use of diodes for switches N<b>1</b> and P<b>2</b> will not alter this rate of increase in current in inductor L.</p>
<p id="p-0024" num="0023">Current path Φ<b>2</b> is identified as a Charge Inductor Slow current path. In this current path, switch P<b>1</b> is closed and switch N<b>2</b> is open, denoted hereafter as P<b>1</b> <o ostyle="single">N<b>2</b></o>. In this case, the rate of buildup of current in inductor L is di/dt=</p>
<p id="p-0025" num="0024">
<maths id="MATH-US-00001" num="00001">
<math overflow="scroll">
<mrow>
  <mfrac>
    <mrow>
      <msub>
        <mi>V</mi>
        <mi>in</mi>
      </msub>
      <mo>-</mo>
      <msub>
        <mi>V</mi>
        <mi>out</mi>
      </msub>
    </mrow>
    <mi>L</mi>
  </mfrac>
  <mo>.</mo>
</mrow>
</math>
</maths>
<br/>
Note that while this conduction path is labeled Charge L Slow, when V<sub>IN</sub>=V<sub>OUT</sub>, di/dt through the inductor L will be zero, and when V<sub>IN</sub>&lt;V<sub>OUT</sub>, di/dt will actually be negative, and in the preferred embodiments, may go negative. If diodes or equivalent synchronous rectifiers are used, the current cannot go negative, being blocked by the turning off of the respective synchronous rectifier or blocked by the respective diode. Also, of course, if switch P<b>2</b> is in fact a diode, di/dt through the inductor L will be zero when V<sub>IN </sub>minus the diode voltage drop equals V<sub>OUT</sub>.
</p>
<p id="p-0026" num="0025">The third path, labeled Φ<sub>3</sub>, is labeled Discharge L Fast. This current path is characterized by switches P<b>1</b> and N<b>2</b> both being open, or <o ostyle="single">P<b>1</b></o> <o ostyle="single">N<b>2</b></o>. Here the rate of change of current through the inductor L is di/dt=−V<sub>OUT</sub>/L, and in the preferred embodiments, may go negative. Again diodes or equivalent synchronous rectifiers, if used, will prevent reverse current flow. In that regard, if switch P<b>2</b> is a diode, then di/dt=−(V<sub>OUT </sub>plus the forward voltage diode drop)/L. In the description to follow, the forward conduction voltage drop of diodes, synchronous rectifiers or even switches N<b>1</b> and P<b>2</b> will not be further considered (except for current sense purposes) for purposes of clarity, though their effect may readily be evaluated by one skilled in the art, given the disclosure to follow.</p>
<p id="p-0027" num="0026">One aspect of the present invention is that the circuit operates in the same mode, independent of whether the input voltage is greater than the output voltage (buck) or the input voltage is less than the output voltage (boost). Three such possible operating modes are illustrated in the state diagrams of <figref idref="DRAWINGS">FIGS. 3</figref><i>a</i>, <b>4</b><i>a </i>and <b>5</b><i>a</i>. In <figref idref="DRAWINGS">FIG. 3</figref><i>a</i>, the controller cycles in the order Φ<b>1</b>, Φ<b>2</b>, Φ<b>3</b>, Φ<b>2</b>, Φ<b>1</b>, Φ<b>2</b>, Φ<b>3</b>, Φ<b>2</b> . . . . The transitions from Φ<b>2</b> to Φ<b>1</b>, and Φ<b>3</b> to Φ<b>2</b> are clocked, while the transition from Φ<b>1</b> to Φ<b>2</b> occurs when the current IN<b>2</b> is greater than the output of the current control filter (<figref idref="DRAWINGS">FIG. 6</figref>), or after a minimum time if already greater than the current control filter output, and the transition from Φ<b>3</b> to Φ<b>2</b> and Φ<b>3</b> occurs when the current IN<b>1</b> is less than the output of the current control filter, or after a minimum time if the current IN<b>1</b> is already less than the output of the current control feeder. In these Figures, “ <o ostyle="single">tmin</o> and” means that the minimum time has expired and the second condition is or becomes met. In that regard, when currents are referred to as equal, larger than or less than, it is to be understood that such relative measures are usually applicable after scaling. By way of example, the comparators Comp A and Comp B in the current control circuit of <figref idref="DRAWINGS">FIG. 5</figref> are comparing the current sense outputs of CSN<b>1</b> and CSN<b>2</b>, which are proportional to the magnitude of, but much less than the actual currents in N<b>1</b> and N<b>2</b>.</p>
<p id="p-0028" num="0027">In <figref idref="DRAWINGS">FIG. 4</figref><i>a</i>, the controller cycles in the order Φ<b>1</b>, Φ<b>2</b>, Φ<b>3</b>, Φ<b>1</b>, Φ<b>2</b>, Φ<b>3</b>, Φ<b>1</b> . . . and in <figref idref="DRAWINGS">FIG. 5</figref><i>a</i>, the controller cycles in the order Φ<b>3</b>, Φ<b>2</b>, Φ<b>1</b>, Φ<b>3</b>, Φ<b>2</b>, Φ<b>1</b> . . . . It will be shown that the control algorithm of <figref idref="DRAWINGS">FIG. 4</figref><i>a </i>is more efficient in the transfer of regulated power to the output for the same peak currents, and accordingly, that embodiment will be used as the exemplary embodiment for the following detailed description of operation of the invention. In all three cases however, the algorithm used is fixed, independent of whether the output voltage is less than or greater than the supply voltage.</p>
<p id="p-0029" num="0028">The various embodiments of the present invention use current mode compensation or current control. A block diagram of the current control used with the preferred embodiments of the present invention is shown in <figref idref="DRAWINGS">FIG. 5</figref>. As shown therein, the feedback voltage FB from the voltage divider R<b>1</b> and R<b>2</b> of <figref idref="DRAWINGS">FIG. 2</figref> is compared with the reference voltage REF (<figref idref="DRAWINGS">FIG. 6</figref>) by transconductance amplifier E-AMP, with the current output of the transconductance amplifier E-AMP being filtered by the Filter and then coupled to compensation circuits COMP A and COMP B. These compensation circuits are responsive to the phase <b>3</b> (Φ<b>3</b>) current in N<b>1</b> and the phase <b>1</b> (Φ<b>1</b>) current in N<b>2</b>, respectively, with the output of comparators COMP A and COMP B being provided to the phase control logic. The filter circuit for the filter in <figref idref="DRAWINGS">FIG. 6</figref> is shown in <figref idref="DRAWINGS">FIG. 7</figref>.</p>
<p id="p-0030" num="0029">The operation of the circuit of <figref idref="DRAWINGS">FIG. 2</figref> using the state diagram of <figref idref="DRAWINGS">FIG. 4</figref><i>a </i>is illustrated in <figref idref="DRAWINGS">FIGS. 8 through 11</figref>. <figref idref="DRAWINGS">FIGS. 8 and 9</figref> illustrate the operation when the input voltage exceeds the output voltage and when the input voltage is less than the output voltage, respectively. <figref idref="DRAWINGS">FIGS. 10</figref> and <b>11</b> illustrate the skip capability of the preferred embodiments. Specifically, the entry of the skip mode is illustrated in <figref idref="DRAWINGS">FIG. 10</figref> and the exiting of the skip mode is illustrated in <figref idref="DRAWINGS">FIG. 11</figref>. Before describing these Figures in detail, however, it should be noted from <figref idref="DRAWINGS">FIG. 1</figref> that the current in switch N<b>1</b> will be non-zero only during Φ<b>3</b>, and the current in switch N<b>2</b> will be non-zero only during Φ<b>1</b>. Further, as a matter of convenience, in the explanation to follow, currents in the directions indicated for Φ<b>1</b> and Φ<b>3</b> are considered positive.</p>
<p id="p-0031" num="0030">Now referring to <figref idref="DRAWINGS">FIGS. 4 and 8</figref>, operation of the circuit of <figref idref="DRAWINGS">FIG. 2</figref> in accordance with the embodiment of <figref idref="DRAWINGS">FIG. 4</figref><i>a </i>will be described. For the operating condition wherein the input voltage exceeds the output voltage of the converter, assume for the moment that the circuit has been running and is in the Φ<b>2</b> state. In this state, because the input voltage exceeds the output voltage, the current through the inductor L is increasing in the slow charge condition. On the occurrence of the Φ<b>3</b> clock for a time period referred to herein as tmin, the controller will change to the Φ<b>3</b> mode by turning off switch P<b>1</b>. This causes conduction through switch N<b>1</b>, with the current through the inductor relatively rapidly decreasing until the current through the inductor is less than the filter current output, changing the output of comparator COMP A, at which time the controller switches to the Φ<b>1</b> mode by turning on both switches P<b>1</b> and N<b>2</b>. As shall subsequently be seen, if the current in switch N<b>1</b> is already less than the filter output current, the switching from Φ<b>3</b> to Φ<b>1</b> will occur after the minimum time tmin. In that regard, preferably tmin is selected to be as short as reasonably possible while still allowing the circuit to settle in the new state for accurate sensing purposes.</p>
<p id="p-0032" num="0031">The Φ<b>1</b> state will continue until the current through switch N<b>2</b> exceeds the current through the filter, changing the output of comparator COMP B, or if the current through switch N<b>2</b> exceeds the current through the filter in less than tmin, then for the duration of the Φ<b>1</b> pulse (tmin), after which the controller will switch to the Φ<b>2</b> mode again by turning off switch N<b>2</b>. Again, current in the inductor L increases at the slow charge rate until the next Φ<b>3</b> clock pulse, at which time the cycle repeats. Thus there are two decision points, decision A when the current in switch N<b>1</b> falls to less than the filter output current, and decision B when the current in switch N<b>2</b> increases to exceed the filter output current.</p>
<p id="p-0033" num="0032"><figref idref="DRAWINGS">FIG. 9</figref> illustrates the operation of the controller when the input voltage is less than the output voltage. It will be noted that the operation is the same, in the sense that the phases are sequenced the same, namely, Φ<b>1</b>, Φ<b>2</b>, Φ<b>3</b>, Φ<b>1</b>, Φ<b>2</b>, Φ<b>3</b>, Φ<b>1</b>, etc. The main difference is in the wave shapes and time durations of Φ<b>3</b> and Φ<b>1</b>. In particular, during Φ<b>2</b> the current through the inductor L actually decreases, so that on switching from Φ<b>2</b> to Φ<b>3</b>, the current in switch N<b>1</b> will go to less than the filter output current. Thus the time duration of Φ<b>3</b> will be held to tmin, with the time duration of the subsequent Φ<b>1</b> operation exceeding tmin to allow the current in switch N<b>2</b> to increase to the filter output current.</p>
<p id="p-0034" num="0033">For light loads on the converter, it is possible for the current in switch N<b>1</b> to go to zero during Φ<b>3</b>, yet the output voltage of the converter remain above the intended regulation voltage (over voltage), as shown in <figref idref="DRAWINGS">FIG. 10</figref>. For light loads or no load, the feedback FB (<figref idref="DRAWINGS">FIG. 6</figref>) can exceed the reference voltage REF, leading to a negative current out of the Filter. Thus the current in switch N<b>1</b> will still exceed the output of the Filter when the current in switch N<b>1</b> goes to zero. This “zero cross” is sensed by the controller, and the clocking oscillator shut down and the circuit otherwise put in a sleep mode (see the Discont signal waveform). In the sleep mode, in the preferred embodiments, switches N<b>1</b> and N<b>2</b> are ON and switch P<b>2</b> is off, blocking current flow back from the load. When the output voltage decreases to less than the regulation voltage, eliminating the over voltage condition, the clock restarts, initiating another Φ<b>1</b> pulse. However this pulse is for a fixed time, after which the following Φ<b>2</b> phase remains until the clock changes the phase to Φ<b>3</b>. As illustrated in <figref idref="DRAWINGS">FIG. 10</figref>, the next Φ<b>1</b>, Φ<b>2</b>, Φ<b>3</b> sequence again drives the output above the reference voltage REF, the controller sensing the over voltage condition part way through the sequence and the Discont signal again shutting the oscillator down at the end of the sequence and putting the circuit in sleep mode until the over voltage no longer exists.</p>
<p id="p-0035" num="0034">In <figref idref="DRAWINGS">FIG. 10</figref> for light load or no load conditions, each Φ<b>1</b>, Φ<b>2</b>, Φ<b>3</b> sequence is initiated from a zero inductor current. When the converter is operating with a low or zero inductor current, the controller is responsive to the output voltage to force initial operation. For instance, if a substantial load is suddenly applied to the converter (see <figref idref="DRAWINGS">FIG. 11</figref>) when in the light load (skip) operation, an over voltage condition will be cleared. If this occurs between Φ<b>1</b>, Φ<b>2</b>, Φ<b>3</b> sequences, a new sequence will be initiated. When a Φ<b>1</b>, Φ<b>2</b>, Φ<b>3</b> sequence is initiated from a zero inductor current condition, the Φ<b>1</b> phase is forced for a predetermined duration, followed by the Φ<b>2</b> phase until the next clock pulse. When a threshold inductor current is established, control reverts to that explained with respect to <figref idref="DRAWINGS">FIGS. 8 and 9</figref>.</p>
<p id="p-0036" num="0035">In the case of the output voltage exceeding the input voltage, when an over voltage condition is cleared after a skip mode, operation is similar, though a longer Φ<b>1</b> and a tmin Φ<b>3</b> are initially imposed, after which control reverts to that explained with respect to <figref idref="DRAWINGS">FIGS. 8 and 9</figref>. In all cases however, the sequence of operation is the same, namely Φ<b>1</b>, Φ<b>2</b>, Φ<b>3</b>, Φ<b>1</b>, Φ<b>2</b>, Φ<b>3</b>, Φ<b>1</b> . . . . In that regard, the foregoing represents the preferred method of ending skip, though other methods are also possible.</p>
<p id="p-0037" num="0036">The overall operation of the converter of <figref idref="DRAWINGS">FIG. 4</figref><i>a </i>is shown by the more detailed state diagram of <figref idref="DRAWINGS">FIG. 12</figref>. In this diagram, an ON signal in the form of a logic high (LH or TRUE) signal causes the converter to power up. Once the bias voltages and reference voltage are stable, the fast charge or phase <b>1</b> cycle is initiated. The fast charge will last until the COMP B output switches (<figref idref="DRAWINGS">FIG. 7</figref>), after which the converter switches to the slow charge or phase <b>2</b> until the clock signal switches the converter to phase <b>3</b>. If, on the other hand, that clock signal occurs before the fast charge causes the COMP B output to change state, the clock signal will cause a change directly from phase <b>1</b> to phase <b>3</b>. Phase <b>3</b>, in turn, will last until COMP A (<figref idref="DRAWINGS">FIG. 6</figref>) changes state, returning the converter to the fast charge or phase <b>1</b>. If, on the other hand, an over voltage exists at the end of phase <b>3</b>, a hold is initiated until such time as the over voltage condition is cleared, after which the fast charge or phase <b>1</b> is reinitiated. When emerging from a hold condition, the fast charge or phase <b>1</b> state is forced for a fixed or predetermined time period, followed by a phase <b>2</b> state, also for a predetermined time before the clock initiates the phase <b>3</b> state. Exiting the skip or hold mode is the same whether operating with the input voltage exceeding the output voltage or the input voltage being less than the output voltage. However, in the case of the input voltage being less than the output voltage, the fast charge or phase <b>1</b> is held for a longer predetermined time before switching to phase <b>2</b>, which of course would be shortened by the occurrence of the clock pulse. The goal here is to keep the waveshape similar to that of a conventional PWM controller operating under the same conditions.</p>
<p id="p-0038" num="0037">The converter also preferably has a peak current limit for the switching from fast charge or phase <b>1</b> to the slow charge or phase <b>2</b>. Normally this peak current is set outside the normal operating range of the converter, but in the case of an extraordinary load such as a short circuit, this peak current limit can be attained. In a preferred embodiment, the attainment of that peak current initiates a timer, which in essence gives the system a fixed time to reach regulation, after which the system will be shut down until a new start signal is received. Thus, by way of example, in the case of a short circuit, on power up this peak current will be reached, soon after which the circuit will be shut down again, repeating that sequence on each successive power up signal until being powered up after the short circuit has been corrected. This is merely one example of how such extraordinary loads may be handled without damage to the converter components.</p>
<p id="p-0039" num="0038">In circuits of the foregoing type there are practical limits regarding how much the input voltage may be below the output voltage. In battery powered systems a particularly low input voltage would mean that the battery is nearing complete discharge and doesn't have significant available energy left. Also, when the input voltage falls way below the output voltage, the converter would have to stay in the fast charge or phase <b>1</b> state a large percentage of the time, raising the ratio of peak currents to average output current to the detriment of efficiency, and limiting the average output current of the converter if predetermined peak currents are not to be exceeded. Accordingly, preferred embodiments include input voltage sensing and provide an under voltage lockout (UVLO) to prohibit the power up if the supply voltage is too low. Also preferred embodiments include a soft start capability by limiting the current in switch P<b>1</b> to a start up ramp, in the preferred embodiment the ramp being comprised of smaller steps up to the operating current levels.</p>
<p id="p-0040" num="0039">Having now described the operation of the state diagram of <figref idref="DRAWINGS">FIG. 4</figref><i>a</i>, that of <figref idref="DRAWINGS">FIGS. 3</figref><i>a </i>and <b>5</b><i>a </i>will become apparent. In that regard, the soft start, the under voltage lockout, the entering and exiting of the sleep mode when an over voltage condition exists after the inductor current goes to zero during phase <b>3</b> and the automatic shutdown if the regulator does not reach regulation a predetermined time after an inductor current limit is reached may be the same for all three embodiments. Also, while clocking between specific phases is shown, in some cases clocking between other phases (other decision points) can be used instead.</p>
<p id="p-0041" num="0040">With respect to a comparison of the three methods of operation, <figref idref="DRAWINGS">FIGS. 3</figref><i>b</i>, <b>4</b><i>b </i>and <b>5</b><i>b </i>give comparisons for Vout=Vin. This is a convenient comparison point, as the present invention frequently operates around this condition. In all three cases, of course, the current during phase <b>2</b> is constant. However, because the method of <figref idref="DRAWINGS">FIG. 3</figref><i>a </i>goes from phase <b>3</b> to phase <b>2</b>, the current during one of the phase <b>2</b> operations is less than during the single phase <b>2</b> of the method of <figref idref="DRAWINGS">FIG. 4</figref><i>a</i>. With the same inductance, frequency, peak current and gate drives, the embodiment of <figref idref="DRAWINGS">FIG. 4</figref><i>a </i>delivers approximately 16% greater average current to a load. In the embodiment of <figref idref="DRAWINGS">FIG. 5</figref><i>a</i>, the converter goes directly from phase <b>1</b> to phase <b>3</b>, eliminating the second phase <b>2</b> operation, a highly efficient phase for delivery of current to a load, of the embodiment of <figref idref="DRAWINGS">FIGS. 3</figref><i>a </i>and <b>3</b><i>b</i>. Thus with the same inductance, frequency, peak current and gate drives, the embodiment of <figref idref="DRAWINGS">FIGS. 5</figref><i>a </i>and <b>5</b><i>b </i>delivers even less average current to a load than the embodiment of <figref idref="DRAWINGS">FIGS. 3</figref><i>a </i>and <b>3</b><i>b</i>. However it still preserves certain advantages of the present invention, including but not limited to operation with an input voltage both above and below the output voltage without a mode change.</p>
<p id="p-0042" num="0041">Thus the present invention has no mode changes, yet provides good transient response, has low current ripple over the entire Vin/Vout range and provides low component stress over the entire Vin/Vout using a simple control algorithm. While certain preferred embodiments of the present invention have been disclosed and described herein for purposes of illustration and not for purposes of limitation, it will be understood by those skilled in the art that various changes in form and detail may be made therein without departing from the spirit and scope of the invention.</p>
<?DETDESC description="Detailed Description" end="tail"?>
</description>
<us-math idrefs="MATH-US-00001" nb-file="US07298119-20071120-M00001.NB">
<img id="EMI-M00001" he="6.01mm" wi="76.20mm" file="US07298119-20071120-M00001.TIF" alt="embedded image " img-content="math" img-format="tif"/>
</us-math>
<us-claim-statement>What is claimed is:</us-claim-statement>
<claims id="claims">
<claim id="CLM-00001" num="00001">
<claim-text>1. A step-up/step-down switching regulator control method, the regulator having an inductor with first and second leads, a first switch for controllably coupling the first lead to a source of power, a first device between the first lead and a circuit ground, for conducting current from the circuit ground to the first lead, a second switch for controllably coupling the second lead to the circuit ground, and a second device between the second lead and a regulator output for conducting current from the second lead to the regulator output, the method comprising:
<claim-text>operating the switches in a sequence of phases when the source of power has a voltage exceeding the regulator output and in the same sequence of phases when the source of power has a voltage less than the regulator output;</claim-text>
<claim-text>the phases being;
<claim-text>phase <b>1</b> with the first and second switches closed;</claim-text>
<claim-text>phase <b>2</b> with the first switch closed and the second switch open;</claim-text>
<claim-text>phase <b>3</b> with both switches open.</claim-text>
</claim-text>
</claim-text>
</claim>
<claim id="CLM-00002" num="00002">
<claim-text>2. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref> wherein the first and second devices are third and fourth switches, respectively, the third switch being on when the first switch is off and being off when the first switch is on, and the fourth switch being on when the second switch is off and off when the second switch is on.</claim-text>
</claim>
<claim id="CLM-00003" num="00003">
<claim-text>3. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref> wherein the first device comprises a first diode for conducting current from the circuit ground to the first lead, and the second device comprises a second diode for conducting current from the second lead to the regulator output.</claim-text>
</claim>
<claim id="CLM-00004" num="00004">
<claim-text>4. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref> wherein current mode compensation is used.</claim-text>
</claim>
<claim id="CLM-00005" num="00005">
<claim-text>5. The method of <claim-ref idref="CLM-00004">claim 4</claim-ref> wherein the sequence of phases is phase <b>1</b>, phase <b>2</b>, phase <b>3</b>, phase <b>2</b>, then back to phase <b>1</b> to repeat the sequence.</claim-text>
</claim>
<claim id="CLM-00006" num="00006">
<claim-text>6. The method of <claim-ref idref="CLM-00005">claim 5</claim-ref> wherein the transition from phase <b>2</b> to phase <b>3</b> and the transition from phase <b>2</b> to phase <b>1</b> are clocked transitions.</claim-text>
</claim>
<claim id="CLM-00007" num="00007">
<claim-text>7. The method of <claim-ref idref="CLM-00006">claim 6</claim-ref> wherein the transition from phase <b>1</b> to phase <b>2</b> occurs when the current through the second switch goes above an output of a current mode filter, or after a minimum time if the current through the second switch is or goes above the output of the current mode filter before the minimum time, and the transition from phase <b>3</b> to phase <b>2</b> occurs when the current through the first device goes below an output of a current mode filter, or after a minimum time if the current through the first device is or goes below the output of the current mode filter before the minimum time.</claim-text>
</claim>
<claim id="CLM-00008" num="00008">
<claim-text>8. The method of <claim-ref idref="CLM-00004">claim 4</claim-ref> wherein the sequence of phases is phase <b>1</b>, phase <b>3</b>, phase <b>2</b>, then back to phase <b>1</b> to repeat the sequence.</claim-text>
</claim>
<claim id="CLM-00009" num="00009">
<claim-text>9. The method of <claim-ref idref="CLM-00008">claim 8</claim-ref> wherein the transition from phase <b>2</b> to phase <b>1</b> is a clocked transition.</claim-text>
</claim>
<claim id="CLM-00010" num="00010">
<claim-text>10. The method of <claim-ref idref="CLM-00009">claim 9</claim-ref> wherein the transition from phase <b>1</b> to phase <b>3</b> occurs when the current through the second switch goes above an output of a current mode filter, or after a minimum time if the current through the second switch is or goes above the output of the current mode filter before the minimum time, and the transition from phase <b>3</b> to phase <b>2</b> occurs when the current through the first device goes below an output of a current mode filter, or after a minimum time if the current through the first device is or goes below the output of the current mode filter before the minimum time.</claim-text>
</claim>
<claim id="CLM-00011" num="00011">
<claim-text>11. The method of <claim-ref idref="CLM-00004">claim 4</claim-ref> wherein the sequence of phases is phase <b>1</b>, phase <b>2</b>, phase <b>3</b>, then back to phase <b>1</b> to repeat the sequence.</claim-text>
</claim>
<claim id="CLM-00012" num="00012">
<claim-text>12. The method of <claim-ref idref="CLM-00011">claim 11</claim-ref> wherein the transition from phase <b>2</b> to phase <b>3</b> is a clocked transition.</claim-text>
</claim>
<claim id="CLM-00013" num="00013">
<claim-text>13. The method of <claim-ref idref="CLM-00012">claim 12</claim-ref> wherein the transition from phase <b>1</b> to phase <b>2</b> occurs when the current through the second switch goes above an output of a current mode filter, or after a minimum time if the current through the second switch is or goes above the output of the current mode filter before the minimum time, and the transition from phase <b>3</b> to phase <b>1</b> occurs when the current through the first device goes below an output of a current mode filter, or after a minimum time if the current through the first device is or goes below the output of the current mode filter before the minimum time.</claim-text>
</claim>
<claim id="CLM-00014" num="00014">
<claim-text>14. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref> wherein if the current in the inductor goes to zero during phase <b>3</b> and the regulator output is above regulation, the regulator is put in a sleep mode until the regulator output falls below regulation.</claim-text>
</claim>
<claim id="CLM-00015" num="00015">
<claim-text>15. The method of <claim-ref idref="CLM-00014">claim 14</claim-ref> wherein the regulator output falls below regulation while in the sleep mode, phase <b>1</b> operation is initiated for a predetermined length of time before changing to phase <b>2</b>.</claim-text>
</claim>
<claim id="CLM-00016" num="00016">
<claim-text>16. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref> wherein the method further comprises shutting down the regulator if the regulator output fails to reach a regulated voltage within a predetermined time after a current limit for the current through the inductor is reached.</claim-text>
</claim>
<claim id="CLM-00017" num="00017">
<claim-text>17. The method of <claim-ref idref="CLM-00016">claim 16</claim-ref> further comprised of preventing the operation of the regulator if the voltage of the source of power is less than a predetermined voltage.</claim-text>
</claim>
<claim id="CLM-00018" num="00018">
<claim-text>18. A step-up/step-down switching regulator control method comprising:
<claim-text>providing an inductor with first and second leads;</claim-text>
<claim-text>providing a first switch for controllably coupling the first lead to a source of power;</claim-text>
<claim-text>providing a first device between the first lead and a circuit ground for conducting current from the circuit ground to the first lead;</claim-text>
<claim-text>providing a second switch for controllably coupling the second lead to the circuit ground;</claim-text>
<claim-text>providing a second device between the second lead and a regulator output for conducting current from the second lead to the regulator output;</claim-text>
<claim-text>operating the switches in a sequence of phases when the source of power has a voltage exceeding the regulator output and in the same sequence of phases when the source of power has a voltage less than the regulator output;</claim-text>
<claim-text>the phases being;
<claim-text>phase <b>1</b> with the first and second switches closed;</claim-text>
<claim-text>phase <b>2</b> with the first switch closed and the second switch open;</claim-text>
<claim-text>phase <b>3</b> with both switches open.</claim-text>
</claim-text>
</claim-text>
</claim>
<claim id="CLM-00019" num="00019">
<claim-text>19. The method of <claim-ref idref="CLM-00018">claim 18</claim-ref> wherein the first and second devices are third and fourth switches, respectively, the third switch being on when the first switch is off and being off when the first switch is on, and the fourth switch being on when the second switch is off and off when the second switch is on.</claim-text>
</claim>
<claim id="CLM-00020" num="00020">
<claim-text>20. The method of <claim-ref idref="CLM-00018">claim 18</claim-ref> wherein the first device comprises a first diode for conducting current from the circuit ground to the first lead, and the second device comprises a second diode for conducting current from the second lead to the regulator output.</claim-text>
</claim>
<claim id="CLM-00021" num="00021">
<claim-text>21. The method of <claim-ref idref="CLM-00018">claim 18</claim-ref> wherein current mode compensation is used.</claim-text>
</claim>
<claim id="CLM-00022" num="00022">
<claim-text>22. The method of <claim-ref idref="CLM-00021">claim 21</claim-ref> wherein the sequence of phases is phase <b>1</b>, phase <b>2</b>, phase <b>3</b>, phase <b>2</b>, then back to phase <b>1</b> to repeat the sequence.</claim-text>
</claim>
<claim id="CLM-00023" num="00023">
<claim-text>23. The method of <claim-ref idref="CLM-00022">claim 22</claim-ref> wherein the transition from phase <b>2</b> to phase <b>3</b> and the transition from phase <b>2</b> to phase <b>1</b> are clocked transitions.</claim-text>
</claim>
<claim id="CLM-00024" num="00024">
<claim-text>24. The method of <claim-ref idref="CLM-00023">claim 23</claim-ref> wherein the transition from phase <b>1</b> to phase <b>2</b> occurs when the current through the second switch goes above an output of a current mode filter, or after a minimum time if the current through the second switch is or goes above the output of the current mode filter before the minimum time, and the transition from phase <b>3</b> to phase <b>2</b> occurs when the current through the first device goes below an output of a current mode filter, or after a minimum time if the current through the first device is or goes below the output of the current mode filter before the minimum time.</claim-text>
</claim>
<claim id="CLM-00025" num="00025">
<claim-text>25. The method of <claim-ref idref="CLM-00021">claim 21</claim-ref> wherein the sequence of phases is phase <b>1</b>, phase <b>3</b>, phase <b>2</b>, then back to phase <b>1</b> to repeat the sequence.</claim-text>
</claim>
<claim id="CLM-00026" num="00026">
<claim-text>26. The method of <claim-ref idref="CLM-00025">claim 25</claim-ref> wherein the transition from phase <b>2</b> to phase <b>1</b> is a clocked transition.</claim-text>
</claim>
<claim id="CLM-00027" num="00027">
<claim-text>27. The method of <claim-ref idref="CLM-00026">claim 26</claim-ref> wherein the transition from phase <b>1</b> to phase <b>3</b> occurs when the current through the second switch goes above an output of a current mode filter, or after a minimum time if the current through the second switch is or goes above the output of the current mode filter before the minimum time, and the transition from phase <b>3</b> to phase <b>2</b> occurs when the current through the first device goes below an output of a current mode filter, or after a minimum time if the current through the first device is or goes below the output of the current mode filter before the minimum time.</claim-text>
</claim>
<claim id="CLM-00028" num="00028">
<claim-text>28. The method of <claim-ref idref="CLM-00021">claim 21</claim-ref> wherein the sequence of phases is phase <b>1</b>, phase <b>2</b>, phase <b>3</b>, then back to phase <b>1</b> to repeat the sequence.</claim-text>
</claim>
<claim id="CLM-00029" num="00029">
<claim-text>29. The method of <claim-ref idref="CLM-00028">claim 28</claim-ref> wherein the transition from phase <b>2</b> to phase <b>3</b> is a clocked transition.</claim-text>
</claim>
<claim id="CLM-00030" num="00030">
<claim-text>30. The method of <claim-ref idref="CLM-00029">claim 29</claim-ref> wherein the transition from phase <b>1</b> to phase <b>2</b> occurs when the current through the second switch goes above an output of a current mode filter, or after a minimum time if the current through the second switch is or goes above the output of the current mode filter before the minimum time, and the transition from phase <b>3</b> to phase <b>1</b> occurs when the current through the first device goes below an output of a current mode filter, or after a minimum time if the current through the first device is or goes below the output of the current mode filter before the minimum time.</claim-text>
</claim>
<claim id="CLM-00031" num="00031">
<claim-text>31. The method of <claim-ref idref="CLM-00018">claim 18</claim-ref> wherein if the current in the inductor goes to zero during phase <b>3</b> and the regulator output is above regulation, the regulator is put in a sleep mode until the regulator output fails below regulation.</claim-text>
</claim>
<claim id="CLM-00032" num="00032">
<claim-text>32. The method of <claim-ref idref="CLM-00031">claim 31</claim-ref> wherein the regulator output falls below regulation while in the sleep mode, phase <b>1</b> operation is initiated for a predetermined length of time before changing to phase <b>2</b>.</claim-text>
</claim>
<claim id="CLM-00033" num="00033">
<claim-text>33. The method of <claim-ref idref="CLM-00018">claim 18</claim-ref> wherein the method further comprises shutting down the regulator if the regulator output fails to reach a regulated voltage within a predetermined time after a current limit for the current through the inductor is reached.</claim-text>
</claim>
<claim id="CLM-00034" num="00034">
<claim-text>34. The method of <claim-ref idref="CLM-00033">claim 33</claim-ref> further comprised of preventing the operation of the regulator if the voltage of the source of power is less than a predetermined voltage.</claim-text>
</claim>
</claims>
</us-patent-grant>
