<us-patent-grant lang="EN" dtd-version="v4.2 2006-08-23" file="US07299146-20071120.XML" status="PRODUCTION" id="us-patent-grant" country="US" date-produced="20071106" date-publ="20071120">
<us-bibliographic-data-grant>
<publication-reference>
<document-id>
<country>US</country>
<doc-number>07299146</doc-number>
<kind>B2</kind>
<date>20071120</date>
</document-id>
</publication-reference>
<application-reference appl-type="utility">
<document-id>
<country>US</country>
<doc-number>11029050</doc-number>
<date>20050104</date>
</document-id>
</application-reference>
<us-application-series-code>11</us-application-series-code>
<us-term-of-grant>
<us-term-extension>10</us-term-extension>
</us-term-of-grant>
<classifications-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>G</section>
<class>06</class>
<subclass>F</subclass>
<main-group>19</main-group>
<subgroup>00</subgroup>
<symbol-position>F</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20071120</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
</classifications-ipcr>
<classification-national>
<country>US</country>
<main-classification>702106</main-classification>
<further-classification>702 66</further-classification>
<further-classification>702 67</further-classification>
<further-classification>702189</further-classification>
</classification-national>
<invention-title id="d0e53">Apparatus and method to calibrate a system having an input signal and an output signal</invention-title>
<references-cited>
<citation>
<patcit num="00001">
<document-id>
<country>US</country>
<doc-number>4677505</doc-number>
<kind>A</kind>
<name>Nukada et al.</name>
<date>19870600</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00002">
<document-id>
<country>US</country>
<doc-number>5294791</doc-number>
<kind>A</kind>
<name>Pahr et al.</name>
<date>19940300</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00003">
<document-id>
<country>US</country>
<doc-number>5379165</doc-number>
<kind>A</kind>
<name>Pahr et al.</name>
<date>19950100</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00004">
<document-id>
<country>US</country>
<doc-number>5457586</doc-number>
<kind>A</kind>
<name>Solhjell</name>
<date>19951000</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00005">
<document-id>
<country>US</country>
<doc-number>5574602</doc-number>
<kind>A</kind>
<name>Baca et al.</name>
<date>19961100</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00006">
<document-id>
<country>US</country>
<doc-number>5583784</doc-number>
<kind>A</kind>
<name>Kapust et al.</name>
<date>19961200</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00007">
<document-id>
<country>US</country>
<doc-number>5617269</doc-number>
<kind>A</kind>
<name>Gordenker et al.</name>
<date>19970400</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00008">
<document-id>
<country>US</country>
<doc-number>5844814</doc-number>
<kind>A</kind>
<name>Chliwnyj et al.</name>
<date>19981200</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00009">
<document-id>
<country>US</country>
<doc-number>5901008</doc-number>
<kind>A</kind>
<name>Nayak et al.</name>
<date>19990500</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00010">
<document-id>
<country>US</country>
<doc-number>5923494</doc-number>
<kind>A</kind>
<name>Arisaka et al.</name>
<date>19990700</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00011">
<document-id>
<country>US</country>
<doc-number>5946159</doc-number>
<kind>A</kind>
<name>Chliwnyj et al.</name>
<date>19990800</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00012">
<document-id>
<country>US</country>
<doc-number>5956199</doc-number>
<kind>A</kind>
<name>Husky et al.</name>
<date>19990900</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00013">
<document-id>
<country>US</country>
<doc-number>5999359</doc-number>
<kind>A</kind>
<name>Fasen</name>
<date>19991200</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00014">
<document-id>
<country>US</country>
<doc-number>6462899</doc-number>
<kind>B1</kind>
<name>Chliwnyj et al.</name>
<date>20021000</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00015">
<document-id>
<country>US</country>
<doc-number>6525898</doc-number>
<kind>B1</kind>
<name>Chliwnyj et al.</name>
<date>20030200</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00016">
<document-id>
<country>US</country>
<doc-number>6606583</doc-number>
<kind>B1</kind>
<name>Sternberg et al.</name>
<date>20030800</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>702191</main-classification></classification-national>
</citation>
<citation>
<patcit num="00017">
<document-id>
<country>US</country>
<doc-number>6661600</doc-number>
<kind>B1</kind>
<name>Chliwnyj et al.</name>
<date>20031200</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00018">
<document-id>
<country>US</country>
<doc-number>6674603</doc-number>
<kind>B2</kind>
<name>Basham et al.</name>
<date>20040100</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00019">
<document-id>
<country>US</country>
<doc-number>6839197</doc-number>
<kind>B2</kind>
<name>Chliwnyj et al.</name>
<date>20050100</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00020">
<document-id>
<country>US</country>
<doc-number>2005/0228604</doc-number>
<kind>A1</kind>
<name>Niedzwiecki et al.</name>
<date>20051000</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>702106</main-classification></classification-national>
</citation>
</references-cited>
<number-of-claims>19</number-of-claims>
<us-exemplary-claim>1</us-exemplary-claim>
<us-field-of-classification-search>
<classification-national>
<country>US</country>
<main-classification>702106</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>702 66- 70</main-classification>
<additional-info>unstructured</additional-info>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>702109</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>702116</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>702 33</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>702 57</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>702 62</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>702 71</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>702 72</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>702 74</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>702 84</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>702189</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>342174</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>700109</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>324601</main-classification>
</classification-national>
</us-field-of-classification-search>
<figures>
<number-of-drawing-sheets>20</number-of-drawing-sheets>
<number-of-figures>20</number-of-figures>
</figures>
<us-related-documents>
<continuation-in-part>
<relation>
<parent-doc>
<document-id>
<country>US</country>
<doc-number>10185125</doc-number>
<kind>00</kind>
<date>20020627</date>
</document-id>
<parent-grant-document>
<document-id>
<country>US</country>
<doc-number>6839197</doc-number>
<kind>A </kind>
</document-id>
</parent-grant-document>
</parent-doc>
<child-doc>
<document-id>
<country>US</country>
<doc-number>11029050</doc-number>
</document-id>
</child-doc>
</relation>
</continuation-in-part>
<related-publication>
<document-id>
<country>US</country>
<doc-number>20050134995</doc-number>
<kind>A1</kind>
<date>20050623</date>
</document-id>
</related-publication>
</us-related-documents>
<parties>
<applicants>
<applicant sequence="001" app-type="applicant-inventor" designation="us-only">
<addressbook>
<last-name>Chliwnyj</last-name>
<first-name>Alex</first-name>
<address>
<city>Tucson</city>
<state>AZ</state>
<country>US</country>
</address>
</addressbook>
<nationality>
<country>omitted</country>
</nationality>
<residence>
<country>US</country>
</residence>
</applicant>
</applicants>
<agents>
<agent sequence="01" rep-type="attorney">
<addressbook>
<orgname>Chandler &amp; Udall, LLP</orgname>
<address>
<country>unknown</country>
</address>
</addressbook>
</agent>
<agent sequence="02" rep-type="attorney">
<addressbook>
<last-name>Regelman</last-name>
<first-name>Dale F.</first-name>
<address>
<country>unknown</country>
</address>
</addressbook>
</agent>
</agents>
</parties>
<assignees>
<assignee>
<addressbook>
<orgname>International Business Machines Corporation</orgname>
<role>02</role>
<address>
<city>Armonk</city>
<state>NY</state>
<country>US</country>
</address>
</addressbook>
</assignee>
</assignees>
<examiners>
<primary-examiner>
<last-name>Ramos-Feliciano</last-name>
<first-name>Eliseo</first-name>
<department>2857</department>
</primary-examiner>
<assistant-examiner>
<last-name>Huynh</last-name>
<first-name>Phuong</first-name>
</assistant-examiner>
</examiners>
</us-bibliographic-data-grant>
<abstract id="abstract">
<p id="p-0001" num="0000">A method is disclosed to calibrate a system receiving an input signal and generating an output signal. The method provides an input signal, and generates an output signal. The method establishes a sampling rate comprising a reference frequency, samples the input signal at said sampling rate, and samples the output signal at the sampling rate. The method then forms a measured input signal waveform, forms a measured output signal waveform, determines at (P) harmonics of the reference frequency the real components and the imaginary components of the measured input signal waveform, forms a filtered input signal waveform, determines at (P) harmonics of the reference frequency the real components and imaginary components of the measured output signal waveform, and forms a filtered output signal waveform. The method then calculates a transfer function comprising the mathematical relationship between the filtered output signal waveform and the filtered input signal waveform, and forms a calibration curve using that transfer function.</p>
</abstract>
<drawings id="DRAWINGS">
<figure id="Fig-EMI-D00000" num="00000">
<img id="EMI-D00000" he="247.23mm" wi="162.56mm" file="US07299146-20071120-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00001" num="00001">
<img id="EMI-D00001" he="247.23mm" wi="188.21mm" orientation="landscape" file="US07299146-20071120-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00002" num="00002">
<img id="EMI-D00002" he="218.95mm" wi="169.59mm" orientation="landscape" file="US07299146-20071120-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00003" num="00003">
<img id="EMI-D00003" he="261.20mm" wi="141.99mm" file="US07299146-20071120-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00004" num="00004">
<img id="EMI-D00004" he="218.10mm" wi="141.14mm" orientation="landscape" file="US07299146-20071120-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00005" num="00005">
<img id="EMI-D00005" he="257.56mm" wi="127.59mm" orientation="landscape" file="US07299146-20071120-D00005.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00006" num="00006">
<img id="EMI-D00006" he="108.80mm" wi="110.07mm" file="US07299146-20071120-D00006.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00007" num="00007">
<img id="EMI-D00007" he="184.57mm" wi="133.18mm" orientation="landscape" file="US07299146-20071120-D00007.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00008" num="00008">
<img id="EMI-D00008" he="180.93mm" wi="145.97mm" orientation="landscape" file="US07299146-20071120-D00008.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00009" num="00009">
<img id="EMI-D00009" he="260.86mm" wi="188.38mm" file="US07299146-20071120-D00009.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00010" num="00010">
<img id="EMI-D00010" he="275.76mm" wi="188.38mm" file="US07299146-20071120-D00010.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00011" num="00011">
<img id="EMI-D00011" he="219.29mm" wi="178.22mm" orientation="landscape" file="US07299146-20071120-D00011.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00012" num="00012">
<img id="EMI-D00012" he="196.77mm" wi="172.80mm" orientation="landscape" file="US07299146-20071120-D00012.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00013" num="00013">
<img id="EMI-D00013" he="200.66mm" wi="179.92mm" orientation="landscape" file="US07299146-20071120-D00013.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00014" num="00014">
<img id="EMI-D00014" he="223.94mm" wi="161.21mm" orientation="landscape" file="US07299146-20071120-D00014.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00015" num="00015">
<img id="EMI-D00015" he="222.00mm" wi="162.48mm" orientation="landscape" file="US07299146-20071120-D00015.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00016" num="00016">
<img id="EMI-D00016" he="272.20mm" wi="175.43mm" file="US07299146-20071120-D00016.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00017" num="00017">
<img id="EMI-D00017" he="139.53mm" wi="149.01mm" file="US07299146-20071120-D00017.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00018" num="00018">
<img id="EMI-D00018" he="161.54mm" wi="150.79mm" file="US07299146-20071120-D00018.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00019" num="00019">
<img id="EMI-D00019" he="238.08mm" wi="103.72mm" file="US07299146-20071120-D00019.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00020" num="00020">
<img id="EMI-D00020" he="138.94mm" wi="156.63mm" file="US07299146-20071120-D00020.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
</drawings>
<description id="description">
<?RELAPP description="Other Patent Relations" end="lead"?>
<heading id="h-0001" level="1">CROSS REFERENCE TO RELATED APPLICATIONS</heading>
<p id="p-0002" num="0001">This application is a Continuation-In-Part of Ser. No. 10/185,125 filed Jun. 27, 2002 now U.S. Pat No. 6,839,197.</p>
<?RELAPP description="Other Patent Relations" end="tail"?>
<?BRFSUM description="Brief Summary" end="lead"?>
<heading id="h-0002" level="1">FIELD OF THE INVENTION</heading>
<p id="p-0003" num="0002">This invention relates to an apparatus and method to calibrate one or more transducers in a “noisy” environment. In certain embodiments, this invention relates to servo track following a moving magnetic tape having one or more servo edges of dissimilar recorded servo signals, and, more particularly, to calibrating one or more servo sensors.</p>
<heading id="h-0003" level="1">BACKGROUND OF THE INVENTION</heading>
<p id="p-0004" num="0003">Automated media storage libraries are known for providing cost effective access to large quantities of stored media. Tape cartridges containing a moveable magnetic tape are often used in automated data storage libraries. Tape media, such a magnetic tape, is a common medium for the storage of data to be utilized by a computer. Magnetic tape has found widespread use as a data storage medium because it provides a relatively inexpensive solution for storing large amounts of data.</p>
<p id="p-0005" num="0004">Magnetic tape data storage typically provides one or more prerecorded servo tracks to allow precise positioning of a tape head with respect to those prerecorded servo tracks. Servo sensors disposed on the tape head are used to track the recorded servo tracks. The tape head comprises one or more read/write elements precisely positioned with respect to those servo sensors. One example of a magnetic tape system is the IBM 3590, which employs magnetic tape having prerecorded servo patterns that include three parallel sets of servo edges, each servo edge being an interface between two dissimilar recorded servo signals, each set of servo edges comprising one servo edge on each of opposite lateral sides of a middle recorded servo signal.</p>
<p id="p-0006" num="0005">In certain embodiments, the tape head includes a plurality of servo sensors for each servo edge, with the result that the tape head may be stepped between those servo sensors, each positioning the read/write elements at different interleaved groups of data tracks. Typically, for a given servo pattern of a set of two servo edges, the outer servo signals are recorded first, and the center servo signal is recorded last, to provide the servo edges. The nominal separation distance between the servo edges of each set of servo edges is a certain distance, but there is variation in the magnetic separation between the servo edges, for example, due to the variation of the width of the physical write element which prerecords the servo pattern, due to variation in the magnetic characteristics of the physical write element, etc. The variation may occur between servo tracks in a single magnetic tape, and may occur between prerecording devices and therefore between magnetic tapes.</p>
<p id="p-0007" num="0006">To reduce the apparent difference of the edge separation distance of the prerecorded servo tracks from nominal, the prerecording of the servo tracks is conducted at different amplitudes so as to attempt to compensate for the physical difference and provide a magnetic pattern that is closer to nominal. Thus, the difference in physical distance and the amplitude compensation may tend to offset each other with respect to the apparent distance between the servo tracks. These actions may provide an adequate signal for track following at the servo edges.</p>
<p id="p-0008" num="0007">However, to increase track density, a servo sensor may be indexed to positions laterally offset from the linear servo edges to provide further interleaved groups of data tracks. The indexed positions are determined by measuring the ratio between the amplitudes of the two dissimilar recorded servo signals. Thus, when the amplitudes of the recorded servo signals are varied to compensate for physical distance variations, track following the prerecorded servo edges at the offset indexed positions becomes less precise. As the result, the data tracks may vary from the desired positions, i.e. be “squeezed” together, such that writing on one track with a write element that is subject to track misregistration (TMR) may cause a data error on the immediately adjacent data track.</p>
<p id="p-0009" num="0008">The tape path of the above IBM 3590 is a guided tape path. In such a guided tape path embodiment, the magnetic tape can be moved in a first direction and an opposing second direction along a first axis, i.e. along the longitudinal axis of the tape. Movement of that tape along a second axis orthogonal to the first axis, i.e. the lateral axis of the tape, is minimized. Limiting the lateral movement of the magnetic tape results in generating minimal guiding noise, and therefore, the step from a first ratio of servo signals to a second ratio is readily discernible.</p>
<p id="p-0010" num="0009">Another approach, however, is required for open channel guiding in which the magnetic tape can move laterally a distance which is substantially greater than the separation between index positions, thereby introducing substantial noise into the calibration process. The guiding signal to noise ratio thus becomes negative, with the guiding noise being far larger than the step from one ratio to another, making it difficult to gather data points with a monotonically increasing or decreasing slope to conduct a calibration of the servo ratios.</p>
<heading id="h-0004" level="1">SUMMARY OF THE INVENTION</heading>
<p id="p-0011" num="0010">Applicants' invention includes an apparatus and method to calibrate a system receiving an input signal and generating an output signal. The method provides an input signal to the system, and generates an output signal by the system. The method establishes a sampling rate comprising a reference frequency, samples the input signal at said sampling rate, and samples the output signal at the sampling rate.</p>
<p id="p-0012" num="0011">The method then forms a measured input signal waveform, forms a measured output signal waveform, determines at (P) harmonics of the reference frequency the real components and the imaginary components of the measured input signal waveform, forms a filtered input signal waveform, determines at (P) harmonics of the reference frequency the real components and imaginary components of the measured output signal waveform, and forms a filtered output signal waveform.</p>
<p id="p-0013" num="0012">The method then calculates a transfer function comprising the mathematical relationship between the filtered output signal waveform and the filtered input signal waveform, and forms a calibration curve using that transfer function.</p>
<?BRFSUM description="Brief Summary" end="tail"?>
<?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?>
<description-of-drawings>
<heading id="h-0005" level="1">BRIEF DESCRIPTION OF THE DRAWINGS</heading>
<p id="p-0014" num="0013">The invention will be better understood from a reading of the following detailed description taken in conjunction with the drawings in which like reference designators are used to designate like elements, and in which:</p>
<p id="p-0015" num="0014"><figref idref="DRAWINGS">FIG. 1</figref> is a block diagram of an embodiment of a magnetic tape system employing the present invention for calibration of servo index positions;</p>
<p id="p-0016" num="0015"><figref idref="DRAWINGS">FIG. 2A</figref> is a diagrammatic illustration of a magnetic tape having three parallel sets of linear servo edges, each servo edge comprising an interface between two dissimilar recorded servo signals;</p>
<p id="p-0017" num="0016"><figref idref="DRAWINGS">FIG. 2B</figref> is a block diagram showing one embodiment of a magnetic tape head;</p>
<p id="p-0018" num="0017"><figref idref="DRAWINGS">FIG. 3A</figref> is a detailed diagrammatic representation of a magnetic tape format providing four servo index positions in one set of two linear servo edges of the magnetic tape of <figref idref="DRAWINGS">FIG. 2A</figref>;</p>
<p id="p-0019" num="0018"><figref idref="DRAWINGS">FIG. 3B</figref> is a detailed diagrammatic representation of a magnetic tape format providing six servo index positions in one set of two linear servo edges of the magnetic tape of <figref idref="DRAWINGS">FIG. 2A</figref>;</p>
<p id="p-0020" num="0019"><figref idref="DRAWINGS">FIG. 4A</figref> is a diagrammatic representation of the relationships between ratios of the sensed servo signals of a servo edge of <figref idref="DRAWINGS">FIG. 2A</figref> and their corresponding lateral positions, where the recorded servo signals generating the edge are of three different amplitudes;</p>
<p id="p-0021" num="0020"><figref idref="DRAWINGS">FIG. 4B</figref> shows analog servo signals detected at a first index position;</p>
<p id="p-0022" num="0021"><figref idref="DRAWINGS">FIG. 4C</figref> shows analog servo signals detected at a second index position;</p>
<p id="p-0023" num="0022"><figref idref="DRAWINGS">FIG. 5A</figref> is a flow chart summarizing the initials steps of Applicants' method;</p>
<p id="p-0024" num="0023"><figref idref="DRAWINGS">FIG. 5B</figref> is a flow chart summarizing additional steps of Applicants' method;</p>
<p id="p-0025" num="0024"><figref idref="DRAWINGS">FIG. 6</figref> is a graph showing a measured independent sensor waveform and three sampled servo signal waveforms;</p>
<p id="p-0026" num="0025"><figref idref="DRAWINGS">FIG. 7</figref> shows a filtered independent sensor waveform graphed against three different filtered servo signal ratio waveforms;</p>
<p id="p-0027" num="0026"><figref idref="DRAWINGS">FIG. 8</figref> three sets of datapoints representing the position of an independent position sensor as a function of the servo signal ratio values detected by three servo sensors;</p>
<p id="p-0028" num="0027"><figref idref="DRAWINGS">FIG. 9</figref> shows a first periodic function graphed against an identical second periodic function;</p>
<p id="p-0029" num="0028"><figref idref="DRAWINGS">FIG. 10</figref> shows a first periodic function graphed against a differing second periodic function;</p>
<p id="p-0030" num="0029"><figref idref="DRAWINGS">FIG. 11</figref> is a flow chart summarizing the steps of Applicants' method to calibrate a transducer;</p>
<p id="p-0031" num="0030"><figref idref="DRAWINGS">FIG. 12</figref> is a block diagram of a system having an input signal, an output signal, and noise;</p>
<p id="p-0032" num="0031"><figref idref="DRAWINGS">FIG. 13</figref> is a block diagram of a system having an input signal, an output signal, a feedback loop, and noise;</p>
<p id="p-0033" num="0032"><figref idref="DRAWINGS">FIG. 14</figref> is a flow chart summarizing Applicant's method to calibrate the system of either <figref idref="DRAWINGS">FIG. 12</figref> or <figref idref="DRAWINGS">FIG. 13</figref>.</p>
<p id="p-0034" num="0033"><figref idref="DRAWINGS">FIG. 15</figref> is a circuit diagram for a second order recursive Goertzel filter.</p>
</description-of-drawings>
<?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?>
<?DETDESC description="Detailed Description" end="lead"?>
<heading id="h-0006" level="1">DETAILED DESCRIPTION OF THE PREFERRED EMBODIMENTS</heading>
<p id="p-0035" num="0034">This invention is described in preferred embodiments in the following description with reference to the Figures, in which like numbers represent the same or similar elements. The invention will be described as embodied in an apparatus and method to calibrate servo sensors tracking servo signals recorded on a magnetic tape. The following description of Applicant's apparatus and method is not meant, however, to limit Applicant's invention to magnetic tapes or to data processing applications, as the invention herein can be applied generally to calibrating transducers in an electrically noisy environment.</p>
<p id="p-0036" num="0035"><figref idref="DRAWINGS">FIG. 1</figref> shows magnetic tape data storage system <b>100</b>. Control unit <b>110</b> receives and transmits data and control signals to and from a host device <b>102</b> via an interface <b>105</b>. The control unit <b>110</b> is coupled to a memory device <b>107</b>, such as a random access memory for storing information and computer programs. An example of a host device <b>102</b> comprises an IBM RS/6000 processor.</p>
<p id="p-0037" num="0036">A multi-element tape head <b>190</b> includes a plurality of read/write elements to record and read information onto and from a magnetic tape <b>197</b>, and servo sensors to detect servo signals comprising prerecorded linear servo edges on the magnetic tape <b>197</b>. In certain embodiments, magnetic tape head <b>190</b> comprises a thin-film magneto-resistive transducer. In an illustrative embodiment, tape head <b>190</b> may be constructed as shown in <figref idref="DRAWINGS">FIG. 2B</figref>. The length of the tape head <b>190</b> substantially corresponds to the width of the tape <b>197</b>. In certain embodiments tape head <b>190</b> includes thirty-two read/write element pairs (labeled “RD” and “WR”) and three sets of servo read elements (e.g. LS<b>1</b> <b>272</b>, RS<b>6</b> <b>298</b>) corresponding to the three servo areas AB (<figref idref="DRAWINGS">FIG. 2A</figref>), BC (<figref idref="DRAWINGS">FIG. 2A</figref>), and CD (<figref idref="DRAWINGS">FIG. 2A</figref>). In the illustrated embodiment, the thirty-two read/write element pairs are divided into groups of eight, adjacent groups being separated by two tracks occupied by a group of four servo sensors. Each group of four servo sensors may be referred to as a “servo group”, e.g. servo group <b>255</b>, servo group <b>265</b>, and servo group <b>275</b>.</p>
<p id="p-0038" num="0037">In the illustrated embodiments, tape head <b>190</b> includes left and right modules separately fabricated, then bonded together. Write and read elements alternate transversely down the length of each module (i.e., across the width of the tape), beginning with a write element in position on the left module and a read element in the corresponding position on the right module. Thus, each write element in the left module is paired with a read element in the corresponding position on the right module and each read element in the left module is paired with a write element in the corresponding position on the right module such that write/read element pairs alternate transversely with read/write element pairs.</p>
<p id="p-0039" num="0038">A tape reel motor system (not shown in <figref idref="DRAWINGS">FIG. 1</figref>) moves the tape <b>197</b> along a tape path <b>195</b> in a first direction, and optionally in an opposing second direction, along a first axis, i.e. the longitudinal axis of the tape, while it is supported by a tape deck for reading and writing. The tape deck does not precisely hold the tape in position laterally. Rather, open channel guiding may be employed in which the magnetic tape can move laterally a distance which is substantially greater than that between index positions, thereby introducing substantial guiding noise into the calibration process. The guiding signal to noise ratio thus becomes negative, with the guiding noise being far larger than the step from one ratio to another, making it difficult to gather data points with a monotonically increasing or decreasing slope to conduct a calibration of the detected servo signal ratios.</p>
<p id="p-0040" num="0039">A servo track follower <b>150</b> directs the motion of the magnetic tape head <b>190</b> in a lateral or transverse direction relative to the longitudinal direction of tape motion. The control unit <b>110</b> is coupled to one or more tape reel motors and controls the direction, velocity and acceleration of the tape <b>197</b> in the longitudinal direction.</p>
<p id="p-0041" num="0040">The data tracks on the tape <b>197</b> are arranged in parallel and are parallel to the linear servo edges. Thus, as the servo track follower <b>150</b> causes the servo sensors of the magnetic tape head to track follow a linear servo edge or a servo index position laterally offset from a servo edge, the read/write elements track a parallel group of the data tracks. If it is desired to track another parallel group of data tracks, the magnetic tape head <b>190</b> is indexed laterally to another servo edge or to another servo index position, or a different servo sensor is aligned with the same or a different servo edge or servo index position.</p>
<p id="p-0042" num="0041">When the magnetic tape head <b>190</b> is to be moved to a selected index position, an index controller <b>170</b> is enabled by the control unit <b>110</b>, receiving a lateral position signal from an independent position sensor <b>180</b> and transmits an appropriate signal to servo logic <b>160</b> to select the appropriate servo track, while the control unit <b>110</b> transmits an appropriate signal to a servo gap selector <b>130</b> to select the appropriate servo sensor. The independent position sensor <b>180</b> is discussed in the incorporated U.S. Pat. No. 5,9316,159, where it is called a non-servo position sensor, and indicates the lateral mechanical position of the tape head <b>190</b> with respect to the tape path <b>195</b>.</p>
<p id="p-0043" num="0042">Over the course of longer distances of longitudinal tape movement, the open channel guiding system will allow the tape to move laterally with respect to the tape deck. In accordance with the present invention, the independent position sensor <b>180</b>, in limited distances of tape movement, accurately tracks the lateral mechanical position of the tape head <b>190</b>, and therefore of the servo sensor(s), with respect to the magnetic tape <b>197</b> and of the servo edges. The logic <b>160</b> operates the servo track follower <b>150</b> in accordance with the present invention to calibrate the servo index positions as sensed by the servo sensor with respect to the parallel sets of linear servo edges, as will be explained. The logic <b>160</b> may comprise a programmed PROM, ASIC or microprocessor.</p>
<p id="p-0044" num="0043">The tape system <b>100</b> may be bidirectional, in which ones of the read/write elements are selected for one direction of longitudinal tape movement, and others of the read/write elements are selected for the opposite direction of movement. The control unit <b>110</b> additionally selects the appropriate ones of the read/write elements by transmitting a signal to a read/write gap select unit <b>120</b>.</p>
<p id="p-0045" num="0044">Once a servo edge or edges are selected, the servo gap selector <b>130</b> provides the servo signals to a servo detector <b>140</b>, which information is employed by servo logic <b>160</b> to position the tape head <b>190</b> to track follow the detected edges. In accordance with the present invention, servo logic <b>160</b> employs the servo information sensed by the servo detector <b>140</b> and the mechanical positioning information from the independent position sensor <b>180</b> to calibrate the track following servo. The track following servo logic is also implemented in the servo logic <b>160</b> employing the sensed servo signals to determine the ratios of the sensed servo signals, which are employed in accordance with the present invention to calibrate the servo index positions of the track following servo <b>150</b>.</p>
<p id="p-0046" num="0045">Referring to <figref idref="DRAWINGS">FIG. 2A</figref>, a plurality, for example, three, parallel sets of linear servo edges <b>250</b>, <b>260</b> and <b>270</b> are illustrated, each servo edge comprising an interface between two dissimilar recorded servo signals, each set of servo edges comprising one of the servo edges on each of opposite lateral sides of a middle recorded servo signal. As an example, a corresponding plurality of laterally offset servo sensors, i.e. servo sensor groups <b>255</b> (<figref idref="DRAWINGS">FIG. 2B</figref>), <b>265</b> (<figref idref="DRAWINGS">FIG. 2B</figref>), <b>275</b> (<figref idref="DRAWINGS">FIG. 2B</figref>), are disposed on tape head <b>190</b> to sense the servo signals at each corresponding edge. Additional pluralities of servo sensors, i.e. sensors <b>272</b>, <b>274</b>, <b>276</b>, <b>278</b>, may be provided to allow positioning of the tape head at additional data tracks.</p>
<p id="p-0047" num="0046">Referring to <figref idref="DRAWINGS">FIG. 3A</figref>, the typical magnetic tape format of servo signals to form linear servo edges <b>312</b> and <b>314</b> comprising an interface between two dissimilar recorded servo signals is illustrated. One set of servo edges comprises outer bands <b>320</b> and <b>322</b>, having a recorded pattern of a constant amplitude signal of a single first frequency, on either side of an inner band <b>310</b> of the other servo signal, having a recorded pattern alternating between a constant amplitude burst signal <b>318</b> of a single second frequency and a zero amplitude null signal <b>316</b>.</p>
<p id="h-0007" num="0000">Typically, the servo signals <b>320</b>, <b>310</b> and <b>322</b> are provided with servo guard bands <b>324</b> and <b>326</b> to protect the outer bands <b>320</b> and <b>322</b> from noise resulting from the data track areas <b>302</b> and <b>304</b>.</p>
<p id="p-0048" num="0047">It is desirable that the servo edges are separated by a predetermined nominal distance <b>350</b> employed for prerecording the servo signals. Typically, the outer servo signals <b>320</b>, <b>322</b> are recorded first, and the center servo signal <b>310</b> is recorded last, to provide the servo edges <b>312</b>, <b>314</b>. There is, typically, variation in the magnetic separation <b>350</b> between the servo edges, for example, due to the variation of the width of the physical write element which prerecords the servo pattern, due to variation in the magnetic characteristics of the physical write element, etc. The variation may occur between servo tracks in a single magnetic tape, and may occur between prerecording devices and therefore between magnetic tapes.</p>
<p id="p-0049" num="0048">To reduce the apparent difference of the edge separation <b>350</b> distance of the prerecorded servo tracks from nominal, the prerecording of the servo signals is conducted at different amplitudes so as to attempt to compensate for the physical difference and provide a magnetic pattern that is closer to nominal. Additionally, three servo sensors are employed to simultaneously sense the three servo tracks. Thus, the difference in physical distance and the amplitude compensation may tend to offset each other with respect to the resultant apparent distance between the servo tracks. These actions may provide an adequate signal for track following at the servo edges.</p>
<p id="p-0050" num="0049">However, to increase data track density, in the embodiment of <figref idref="DRAWINGS">FIG. 3A</figref> four servo index positions, i.e. index positions <b>0</b>, <b>1</b>, <b>2</b>, and <b>3</b>, are calibrated. These index positions are laterally offset with respect to the sensed servo edges of the set of linear servo edges. Index position <b>0</b> corresponds to sensor placement <b>330</b> over tape track position <b>340</b>. Similarly, index positions <b>1</b>, <b>2</b>, and <b>3</b>, respectively, correspond to sensor placements <b>332</b>, <b>334</b>, and <b>336</b>, respectively, over tape track positions <b>342</b>, <b>344</b>, and <b>346</b>, respectively. The relative positions of these four index positions are: <b>0</b>, <b>2</b>, <b>1</b>, <b>3</b>.</p>
<p id="p-0051" num="0050">As an example, the servo index positions may be offset laterally about one quarter the width of the inner band <b>310</b> away from the servo edge in either direction, providing four index positions. The indexed positions are determined by measuring the ratios between the amplitudes of the two dissimilar recorded servo signals, e.g., as measured by the servo detector <b>140</b> of <figref idref="DRAWINGS">FIG. 1</figref>, and mapping those ratios into physical distances in microns. The servo logic <b>160</b> operates the servo track follower <b>150</b> to track follow at the desired measured ratio. For example, the measured ratio will be the ratio between the sum of the sensed outer band signal <b>320</b> plus the inner band signal <b>318</b>, and the sensed outer band signal <b>320</b>, giving effect to the null <b>316</b>. The illustrations and descriptions herein employ this ratio.</p>
<p id="p-0052" num="0051">Alternatively, the measured ratio may be the ratio between the outer band signal <b>320</b> at frequency F<b>1</b> and the inner band signal <b>318</b> at frequency F<b>2</b>. In order to center the data read/write elements at each of the servo index positions, the ratios must be measured precisely. Thus, when the amplitudes of the recorded servo signals are varied to compensate for physical distance variations, the measured ratios are distorted and track following the prerecorded servo edges at the offset indexed positions becomes less precise. As the result, the data tracks may vary from the desired positions, for example, squeezed together, such that writing on one track with a write element that is subject to track misregistration (TMR) may cause a data error on the immediately adjacent data track.</p>
<p id="p-0053" num="0052"><figref idref="DRAWINGS">FIG. 3B</figref> illustrates another embodiment of displaced index positions that may be employed with the present invention. This embodiment includes six index positions, i.e. index positions <b>0</b>, <b>1</b>, <b>2</b>, <b>3</b>, <b>4</b>, and <b>5</b>. At the “0” or “1” index positions, the servo element is located at position <b>360</b> centered on servo edge <b>312</b> or at position <b>361</b> centered on servo edge <b>314</b>. Additional index positions are provided which are aligned such that a servo element is displaced from an edge <b>312</b> or <b>314</b> in either direction. As the result, the number of index positions becomes six. The relative positions of these six index positions are: <b>2</b>, <b>0</b>, <b>4</b>, <b>3</b>, <b>1</b>, <b>5</b>.</p>
<p id="p-0054" num="0053">In order to center the data read/write elements in the “2” and “5” index positions, the servo read element must be located at position <b>362</b> or at position <b>365</b>, and will read a minimum signal that has an amplitude ratio of about 5/6 of the maximum signal, and to center the data read/write elements in the “3” and “4” index positions, the servo read element must be located at position <b>363</b> or at position <b>364</b>, and will read a minimum signal that has an amplitude ratio of about 1/6 of the maximum signal.</p>
<p id="p-0055" num="0054">To track follow an edge or edges, once a servo edge or edges are selected, the servo gap selector <b>130</b> of <figref idref="DRAWINGS">FIG. 1</figref> provides the servo signals to a servo detector <b>140</b>, which digitally detects the servo signals at a predetermined sample rate, and provides servo signal ratios of each of the selected servo sensors. The servo logic <b>160</b> employs the servo signal ratios to determine the displacement from the edges and operates the servo loop servo track follower <b>150</b> to position the tape head <b>190</b> to track follow at the desired displacement from the edges.</p>
<p id="p-0056" num="0055"><figref idref="DRAWINGS">FIG. 4A</figref> illustrates examples of distortion of the measured ratios between the sensed servo signals of one linear servo edge, at various lateral positions of the servo sensors, in a guided tape system. Referring additionally to <figref idref="DRAWINGS">FIGS. 3A and 3B</figref> regarding servo sensor placement, in an ideal relationship, the ratio of signals varies linearly from a value of “1” when the servo sensor is at position P<sub>(A)</sub>, which is centered on and senses only the outer band <b>320</b> or outer band <b>322</b>, to a value of “0” when the servo sensor is at position P<sub>(B)</sub>, which is centered on and senses only the inner band <b>310</b>. Straight line <b>410</b> graphically illustrates such an ideal relationship.</p>
<p id="p-0057" num="0056">Curve <b>420</b> comprises a graphical representation of more typical ratio of servo signals, measured in a guided system, where the center recorded servo signal <b>310</b> generating the edges is of a relatively weak amplitude. <figref idref="DRAWINGS">FIGS. 4B and 4C</figref> illustrate wave forms of the analog signal from the servo transducer at, respectively, positions <b>332</b> and <b>336</b> of <figref idref="DRAWINGS">FIG. 3A</figref>. Thus, in <figref idref="DRAWINGS">FIG. 4B</figref>, the bursts <b>440</b> and <b>460</b> formed while the servo transducer is at position <b>332</b> of <figref idref="DRAWINGS">FIG. 3A</figref> from the combination of the first frequency and the second frequency burst is at a high amplitude, but the burst <b>450</b> formed from the combination of the first frequency and the null signal is at a very low amplitude because only a small portion of the servo transducer is positioned over the first frequency. In <figref idref="DRAWINGS">FIG. 4C</figref>, the bursts <b>470</b> and <b>490</b> formed while the servo transducer is at position <b>336</b> of <figref idref="DRAWINGS">FIG. 3A</figref> from the combination of the first frequency and the second frequency burst is at a high amplitude, as is the burst <b>480</b> formed from the combination of the first frequency and the null signal, because the servo transducer is positioned primarily over the first frequency.</p>
<p id="p-0058" num="0057">Referring again to <figref idref="DRAWINGS">FIG. 4A</figref>, curve <b>430</b> comprises a graphical representation of more typical ratio of servo signals as a function of servo sensor location, measured in a guided system, where the center recorded servo signal <b>310</b> generating the edges is of a relatively strong amplitude. As those skilled in the art will appreciate, curves <b>420</b> and <b>430</b> do not define linear relationships between the ratios of measured servo signals and servo sensor placement. In light of the differing, and complex, relationship between the ratio of measured servo signals as a function of servo sensor location, employing the same ratio setting to position the tape head at various servo index positions for each of the linear edges may result in track misregistration.</p>
<p id="p-0059" num="0058">As discussed above, the tape deck does not precisely hold the tape in position laterally. Rather, open channel guiding may be employed whereunder the magnetic tape can move laterally a distance which is substantially greater than that between index positions, e.g., index positions <b>340</b>-<b>346</b> of <figref idref="DRAWINGS">FIG. 3A</figref> and index positions <b>370</b>, <b>312</b>, <b>372</b>, <b>374</b>, <b>314</b>, and <b>376</b> of <figref idref="DRAWINGS">FIG. 3B</figref>, thereby introducing substantial noise into the calibration process. The guiding signal to noise ratio thus becomes negative, with the guiding noise being far larger than the step from one ratio to another, making it difficult to gather data points with a monotonically increasing or decreasing slope to conduct a calibration of the detected servo signal ratios.</p>
<p id="p-0060" num="0059">In one embodiment of the present invention, servo logic <b>160</b> is provided with digital signal processor <b>165</b>, and is coupled to the servo detector <b>140</b>, the servo track follower <b>150</b>, and the independent position sensor <b>180</b>, all of <figref idref="DRAWINGS">FIG. 1</figref>. The logic <b>160</b> operates the servo loop, comprising servo gap selector <b>130</b>, servo detector <b>140</b>, and servo track follower <b>150</b>, to inject a defined signal to modulate the lateral position of the head and, thereby, a plurality of servo sensors.</p>
<p id="p-0061" num="0060">Referring now to <figref idref="DRAWINGS">FIG. 5A</figref>, Applicants' method to calibrate one or more servo sensors begins at step <b>505</b>. In step <b>510</b>, Applicants' method operates the servo loop to move off-track to begin calibration of the servo sensor(s). In certain embodiments, step <b>510</b> is performed by logic <b>160</b>. In certain embodiments, Applicants' method calibrates one or more servo sensors across a range which includes four servo index positions, i.e., positions <b>340</b>-<b>346</b> of <figref idref="DRAWINGS">FIG. 3A</figref>. In certain embodiments, Applicants' method calibrates one or more servo sensors across a range which includes six index positions, i.e. positions <b>370</b>, <b>312</b>, <b>372</b>, <b>374</b>, <b>314</b>, and <b>376</b> of <figref idref="DRAWINGS">FIG. 3B</figref>. In certain embodiments, Applicants' method calibrates one or more servo sensors across a range which includes more than six servo index positions.</p>
<p id="p-0062" num="0061">In step <b>512</b>, Applicants' method operates the servo loop to move in the direction of the servo pattern, such as pattern <b>250</b> (<figref idref="DRAWINGS">FIG. 2A</figref>), or <b>260</b> (<figref idref="DRAWINGS">FIG. 2A</figref>), or <b>270</b> (<figref idref="DRAWINGS">FIG. 2A</figref>), in order to find and lock to the pattern. In certain embodiments, step <b>512</b> is performed by logic <b>160</b>. Applicants' method transitions from step <b>512</b> to step <b>514</b> wherein Applicants' method determines whether the servo pattern has been found. In certain embodiments, step <b>514</b> is performed by logic <b>160</b>. If Applicants' method determines in step <b>514</b> that the servo pattern has not been found, then Applicants' method transitions from step <b>514</b> to step <b>510</b> to repeat the movement off-track.</p>
<p id="p-0063" num="0062">Alternatively, if Applicants' method determines in step <b>514</b> that the servo pattern has been located, Applicants' method transitions from step <b>514</b> to step <b>516</b> wherein Applicants' method follows the servo pattern on the moving tape by causing the servo loop to laterally position the servo sensor to detect the servo signals at continually altered digital set points of the ratios of the sensed servo signals. In certain embodiments, step <b>516</b> is performed by logic <b>160</b>. The set points are altered at a predetermined sampling rate, and are altered to inject a predetermined positioning signal, whereby the servo loop track follows the linear servo edges, e.g., edges <b>312</b> or <b>314</b> of <figref idref="DRAWINGS">FIGS. 3A and 3B</figref> at each of the parallel sets of linear servo edges <b>250</b> (<figref idref="DRAWINGS">FIG. 2A</figref>), <b>260</b> (<figref idref="DRAWINGS">FIG. 2A</figref>), <b>270</b> (<figref idref="DRAWINGS">FIG. 2A</figref>), with the corresponding plurality of laterally offset servo sensors, i.e. sensor groups <b>255</b> (<figref idref="DRAWINGS">FIG. 2B</figref>), <b>265</b> (<figref idref="DRAWINGS">FIG. 2B</figref>), <b>275</b> (<figref idref="DRAWINGS">FIG. 2B</figref>), at the continually altered digital set points.</p>
<p id="p-0064" num="0063">In certain embodiments, this predetermined positioning signal comprises a sinusoidal pattern having a known reference frequency. In certain embodiments, the positioning signal is recorded in firmware disposed in logic <b>160</b>. In certain embodiments, the positioning signal comprises a sinusoidal pattern having a varying frequency. In certain embodiments, the positioning signal is varied according to an algorithm disposed in logic <b>160</b>.</p>
<p id="p-0065" num="0064">In certain embodiments, the reference frequency is set in “firmware” disposed in DSP <b>165</b>. In certain embodiments, the reference frequency is set by the user during system initialization. In certain embodiments, the reference frequency is set by field service personnel during system initialization. In certain embodiments, the reference frequency is modified by Applicants' method in order to further refine the calibration of the servo sensors disposed in the system.</p>
<p id="p-0066" num="0065">In certain embodiments, the positioning signal comprises a reference frequency selected such that the reference frequency, and major harmonics thereof, each differs from intrinsic operational frequencies of the track following servo system and/or of the tape drive. As examples, the positioning signal is selected so that the reference frequency and major harmonics thereof differ from the frequencies of the tape reels <b>197</b> of <figref idref="DRAWINGS">FIG. 1</figref>, the tape motor(s), and the cooling, fans, and any resonant frequencies of the servo system.</p>
<p id="p-0067" num="0066">In certain embodiments, the positioning signal is modulated such that the ratio of servo signals detected by the one or more servo sensors being calibrated, i.e. the ratio of the detected amplitudes of F<b>1</b> and F<b>2</b>, varies from about 0.1 to a ratio of about 0.9. Those detected servo signals are dominated by the sinusoidal pattern and not by the tape movement. The frequency of the positioning signal, i.e. the reference frequency, is known precisely, and signals not having that reference frequency, or harmonics of that reference frequency, comprise noise in the measurement.</p>
<p id="p-0068" num="0067">Independent position sensor (“IPS”) <b>180</b> measures the position of tape head <b>190</b> with respect to the tape path <b>195</b>. In step <b>520</b>, Applicants' method samples the analog IPS signal at the selected sample rate. In certain embodiments, step <b>525</b> is performed by servo logic, such as logic <b>160</b>. Applicants' method transitions from step <b>520</b> to step <b>525</b> wherein Applicants' method digitally forms a measured IPS waveform using the data of step <b>520</b>. In certain embodiments, step <b>525</b> is performed by servo logic, such as logic <b>160</b>.</p>
<p id="p-0069" num="0068">Referring now to <figref idref="DRAWINGS">FIG. 6</figref>, waveform <b>640</b> comprises the measured IPS signal waveform formed in step <b>525</b>. The Y axis corresponding to curve <b>640</b> is found at the right side of graph <b>600</b>. The digitized measured IPS signal waveform of step <b>525</b> is dominated by the sinusoidal pattern having the reference frequency, and not by the tape movement. The frequency of the reference frequency is known precisely, and anything that is not at that reference frequency, or its harmonics, comprises noise in the measurement.</p>
<p id="p-0070" num="0069">Applicant's method transitions from step <b>525</b> to step <b>530</b> wherein Applicants' method determines the real and imaginary components, at selected frequencies, of the measured IPS waveform of step <b>525</b>. In certain embodiments of Applicants' invention, those real and imaginary components are formed using a Goertzel algorithm. In certain embodiments, Applicants' method uses a Goertzel algorithm defined by equation (1)
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>Hf</i><sub>i</sub>(<i>z</i>)=[1<i>−e</i><sup>(2πfi/fs)z−1</sup>]/1−2 cos [2<i>πf</i><sub>i</sub><i>/f</i><sub>s</sub><i>]z</i><sup>−1</sup><i>+z</i><sup>−2</sup>  (1)<?in-line-formulae description="In-line Formulae" end="tail"?>
<br/>
where f<sub>i </sub>is the frequency of interest, and f<sub>s </sub>is the sampling frequency. In certain embodiments, Applicants' method includes second order recursive Goertzel filter <b>1500</b> as shown in <figref idref="DRAWINGS">FIG. 15</figref>. In certain embodiments, DSP component <b>165</b> includes a Goertzel filter.
</p>
<p id="p-0071" num="0070"><chemistry id="CHEM-US-00001" num="00001">
<img id="EMI-C00001" he="60.45mm" wi="69.93mm" file="US07299146-20071120-C00001.TIF" alt="embedded image" img-content="chem" img-format="tif"/>
</chemistry>
<br/>
In certain embodiments, DSP component <b>165</b> includes a Goertzel filter.
</p>
<p id="p-0072" num="0071">In certain embodiments, the measured IPS waveform of step <b>525</b> comprises the input to a Goertzel filter, and the real and imaginary components of step <b>530</b> comprise the output of that Goertzel filter. In certain embodiments, servo logic <b>160</b> (<figref idref="DRAWINGS">FIG. 1</figref>) provides the waveform of step <b>525</b> to a Goertzel filter in DSP component <b>165</b> (<figref idref="DRAWINGS">FIG. 1</figref>).</p>
<p id="p-0073" num="0072">In certain embodiments, the selected frequencies comprise (P) harmonics of the reference frequency. As (P) increases, Applicants' method can identify more complex distortions of the detected servo signal ratios as a function of IPS location. In certain embodiments, Applicants' method utilizes as many of 6 harmonics of the reference frequency, i.e. (P) equals 6. On the other hand, in certain embodiments Applicants' have found an insubstantial increase in useful information beyond the fourth harmonic.</p>
<p id="p-0074" num="0073">In step <b>535</b>, Applicants' method uses the real and imaginary components of step <b>530</b> to form a filtered IPS signal waveform. The real components of the measured IPS waveform determined in step <b>530</b> are used in step <b>535</b> to determine the magnitudes M(i) for that IPS waveform at the selected frequencies, where (i) is an integer between 1 and (P). The imaginary components of the measured IPS waveform are used in step <b>535</b> to determine the phase φ(i) of that IPS waveform at the selected frequencies, wherein (i) is as described above.</p>
<p id="p-0075" num="0074">For example, in embodiments wherein Applicants' method uses the first four harmonics of the reference frequency, (i) is an integer greater than or equal to 1 and less than or equal to 4. M<sub>(1) </sub>comprises the magnitude of the measured IPS waveform at the reference frequency. As those skilled in the art will appreciate, the first harmonic is identical to the fundamental frequency, i.e. the reference frequency. M<sub>(2) </sub>comprises the magnitude of the measured IPS waveform at the second harmonic of the reference frequency, M<sub>(3) </sub>comprises the magnitude of the measured IPS waveform at the third harmonic of the reference frequency, and M<sub>(4) </sub>comprises the magnitude of the measured IPS waveform at the fourth harmonic of the reference frequency.</p>
<p id="p-0076" num="0075">Similarly, φ<sub>(1) </sub>comprises the phase of the measured IPS waveform at the reference frequency, φ<sub>(2) </sub>comprises the phase of the measured IPS waveform at the second harmonic of the reference frequency, φ<sub>(3) </sub>comprises the phase of the measured IPS waveform at the third harmonic of the reference frequency, and φ<sub>(4) </sub>comprises the phase of the measured IPS waveform at the fourth harmonic of the reference frequency.</p>
<p id="p-0077" num="0076">In step <b>535</b>, Applicants' method forms a filtered IPS signal waveform using the magnitudes M<sub>(i)</sub>, phases φ<sub>(i)</sub>, and the equation:
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?>Filtered IPS Signal Waveform=<i>M</i><sub>(1)</sub>*cos[φ<sub>(1)</sub>+(2)(π)(<i>t</i>)/<i>x]+M</i><sub>(2)</sub>*cos[φ<sub>(2)</sub>+(4)(π)(<i>t</i>)/<i>x]+M</i><sub>(3)</sub>*cos[φ<sub>(3)</sub>+(6)(π)(<i>t</i>)/<i>x]+M</i><sub>(4)</sub>*cos[φ<sub>(4)</sub>+(8)(π)(<i>t</i>)/<i>x]</i><?in-line-formulae description="In-line Formulae" end="tail"?>
<br/>
where (t)/x comprises a fraction having a value greater than or equal to 0 and less than or equal to 1, where multiplying that fraction by (n)π gives a point within the (n)π period.
</p>
<p id="p-0078" num="0077">Thus, Applicants' method in steps <b>520</b>, <b>525</b>, <b>530</b>, and <b>535</b>, processes the measured IPS signal wherein the tape guiding noise is dominant, to form a filtered IPS signal waveform wherein the signal of interest comprise a sinusoidal pattern at a known reference frequency. In this filtered waveform, the noise, not only the tape guiding noise, but also noise resulting from tape defects, has been effectively removed.</p>
<p id="p-0079" num="0078">In step <b>540</b>, Applicants' method samples, at the selected sampling rate, one or more servo signals. The sampling of step <b>540</b> is performed concurrently with the sampling of step <b>520</b>. In certain embodiments, the one or more servo sensors each provide an analog signal to a servo detector, such as servo detector <b>140</b> (<figref idref="DRAWINGS">FIG. 1</figref>), and the servo detector forms one or more servo signals comprising ratios of the detected first frequency and detected second frequency. The servo detector then provides those one or more servo signals to the servo logic, such as logic <b>160</b> (<figref idref="DRAWINGS">FIG. 1</figref>). In certain embodiments, the servo sensors provide the servo signals comprising the ratios of detected signals.</p>
<p id="p-0080" num="0079">Applicants' method transitions from step <b>540</b> to step <b>545</b> wherein Applicants' method digitally forms one or more measured servo signal waveforms using the data obtained in step <b>540</b>. Referring again to <figref idref="DRAWINGS">FIG. 6</figref>, waveforms <b>610</b>, <b>620</b>, and <b>630</b> comprise the measured servo signal waveforms formed in step <b>545</b>. The Y axis corresponding to curves <b>610</b>, <b>620</b>, and <b>630</b>, is found at the left side of graph <b>600</b>. As those skilled in the art will appreciate, in the embodiment of <figref idref="DRAWINGS">FIG. 6</figref> Applicants' method includes using three servo sensors and one IPS sensor.</p>
<p id="p-0081" num="0080">Applicants' method transitions from step <b>545</b> to step <b>550</b> wherein Applicants' method determines the real and imaginary components of each of the measured servo signal waveforms of step <b>545</b>. In certain embodiments, step <b>550</b> includes using a Goertzel algorithm as described above. In certain embodiments, step <b>550</b> includes using a Goertzel filter as described above.</p>
<p id="p-0082" num="0081">Applicants' method transitions from step <b>550</b> to step <b>555</b> wherein Applicants' method forms one or more filtered servo signal waveforms using the real and imaginary components determined in step <b>550</b>. When forming, for example, the (j)th filtered servo signal waveform using the real and imaginary components of the (j)th measured servo signal waveform at the (P) harmonics of the reference frequency, Applicants' method in step <b>555</b> uses the magnitude M<sub>(i)(j) </sub>determined from real components of the (j)th measured servo signal waveform at the (i)th harmonic of the reference frequency, and the phase φ<sub>(i)(j) </sub>determined from the imaginary components of that (j)th measured waveform at the (i)th harmonic of the reference frequency, wherein (i) is an integer greater than or equal to 1 and less than or equal to (P).</p>
<p id="p-0083" num="0082">The DC component of the measured servo signal waveforms is also kept so as to provide an offset between the plurality of servo sensor channels. M<sub>(0)(j) </sub>comprises that DC component for the (j)th measured servo signal waveform. Further in step <b>555</b>, Applicants' forms the (j)th filtered servo signal waveform using the equation:
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?>(<i>j</i>)th filtered servo signal waveform=<i>M</i><sub>(0)(j)</sub><i>+M</i><sub>(1)(j)</sub>*cos[φ<sub>(1)(j)</sub>+(2)(π)(<i>t</i>)/<i>x]+M</i><sub>(2)(j)</sub>*cos[φ<sub>(2)(j)</sub>+(4)(π)(<i>t</i>)/<i>x]+M</i><sub>(3)(j)</sub>*cos[φ<sub>(3)(j)</sub>+(6)(π)(<i>t</i>)/<i>x]+M</i><sub>(4)(j)</sub>*cos[φ<sub>(4)(j)</sub>+(8)(π)(<i>t</i>)/<i>x]</i><?in-line-formulae description="In-line Formulae" end="tail"?>
<br/>
where (t)/x comprises a fraction having a value greater than or equal to 0 and less than or equal to 1, where multiplying that fraction by (n)π gives a point within the (n)π period.
</p>
<p id="p-0084" num="0083">Thus, Applicants' method in steps <b>540</b>, <b>545</b>, <b>550</b>, and <b>555</b>, processes the detected servo signals wherein the tape guiding noise is dominant, to form one or more filtered servo signal waveforms wherein the signal(s) of interest comprise a sinusoidal pattern at a known reference frequency. In these filtered waveforms, the noise, not only the tape guiding noise, but also noise resulting from tape defects, has been effectively removed.</p>
<p id="p-0085" num="0084">Applicants' method transitions from step <b>555</b> to step <b>560</b>. Referring now to <figref idref="DRAWINGS">FIG. 5B</figref>, in step <b>560</b>, Applicants' method correlates each of the one or more filtered servo signal waveforms of step <b>555</b> with the filtered IPS signal waveform of step <b>535</b>. As those skilled in the art will appreciate, one such correlation comprises graphing the one or more filtered servo signal waveforms against the filtered IPS signal waveform. Such a correlation comprises graphing a first sinusoidal function against a second sinusoidal function.</p>
<p id="p-0086" num="0085">As those skilled in the art will appreciate, a Lissajous pattern comprises a graph of a first sinusoidal function having a first frequency plotted on the y axis combined with a second sinusoidal function having a second frequency plotted on the x axis, i.e. Y and X are both periodic functions of time t given by equations such as X=sin (w*n*t+c) and Y=sin w*t. Different patterns may be generated for different values of n (period shift) and c (phase shift).</p>
<p id="p-0087" num="0086">If a linear relationship exists between sampled servo signals and measured IPS positions, then graphing the filtered IPS waveform formed in step <b>535</b> against the one of the filtered servo signal ratio waveforms of step <b>555</b> would give a straight line Lissajous pattern. For example referring to <figref idref="DRAWINGS">FIG. 9</figref>, if curve <b>910</b> comprises the filtered IPS waveform, and curve <b>920</b> comprises one of the filtered servo signal ratio waveforms, and graphing curve <b>910</b> against curve <b>920</b> gives straight line curve <b>930</b>, then a linear relationship exists between the detected servo signal ratios and the measured IPS location. As those skilled in the art will appreciate, curve <b>910</b> and <b>920</b> have the same frequency, but are phase shifted by 180 degrees. Graphing sinusoidal functions having identical frequencies and phase shifted by 0 degrees similarly gives a straight line curve.</p>
<p id="p-0088" num="0087">Graphing differing periodic functions against one another gives more complex curves. Referring to <figref idref="DRAWINGS">FIG. 10</figref>, waveform <b>1010</b> differs from waveform <b>1020</b>. Graphing waveform <b>1010</b> and against waveform <b>1020</b> gives curve <b>1030</b>. As those skilled in the art will appreciate, the mathematical relationship between curve <b>1010</b> and curve <b>1020</b> cannot be accurately expressed as a linear function. On the other hand, a more complex function such as a quadratic function might adequately define the relationship between curves <b>1010</b> and <b>1020</b>.</p>
<p id="p-0089" num="0088"><figref idref="DRAWINGS">FIG. 7</figref> comprises graph <b>700</b> wherein the filtered servo signal waveforms of step <b>550</b>, wherein (P) equals 3, are plotted against the filtered IPS waveform. Curve <b>710</b> comprises the filtered servo signal waveform derived from measured servo signal waveform <b>610</b> (<figref idref="DRAWINGS">FIG. 6</figref>) plotted against the filtered IPS waveform derived from measured IPS signal waveform <b>640</b> (<figref idref="DRAWINGS">FIG. 6</figref>). Similarly, curves <b>720</b> and <b>730</b>, respectively, comprise the filtered servo signal waveforms derived from measured servo signal waveforms <b>620</b> (<figref idref="DRAWINGS">FIG. 6) and 630</figref> (<figref idref="DRAWINGS">FIG. 6</figref>), respectively, plotted against the filtered IPS waveform.</p>
<p id="p-0090" num="0089">As those skilled in the art will appreciate, curves <b>710</b>, <b>720</b>, and <b>730</b>, are more complex than curve <b>930</b> or curve <b>1030</b>. In certain embodiments, Applicants' method utilizes a second order curve fitting algorithm to model curves <b>710</b>, <b>720</b>, and <b>730</b>. In other embodiments, Applicants' method utilizes a third order curve fitting algorithm to model curves <b>710</b>, <b>720</b>, and <b>730</b>. In yet other embodiments, Applicants' method uses an (n)th order data analysis algorithm to model curves <b>710</b>, <b>720</b>, and <b>730</b>, wherein (n) is 4, 5, or 6.</p>
<p id="p-0091" num="0090">In step <b>562</b>, Applicants' method forms (N) X/Y datapoint arrays using the correlation of step <b>560</b>. Each X/Y array comprises a plurality of measured datapoints DP<sub>ACT(i)</sub>. Each such datapoint DP<sub>ACT(i) </sub>comprises the IPS signal actually measured for a given measured servo signal. In certain embodiments, step <b>562</b> is performed by servo logic <b>160</b> (<figref idref="DRAWINGS">FIG. 1</figref>).</p>
<p id="p-0092" num="0091">In step <b>566</b>, Applicants' method forms (N) transfer functions using, where each of those (N) transfer functions is formed using one of X/Y data arrays of step <b>562</b> and an (n)th order regression algorithm. In step <b>564</b>, that (n)th order is selected. In certain embodiments, step <b>564</b> further includes establishing a highest order curve fitting algorithm, i.e. (n)<sub>MAX</sub>. In certain embodiments, a second order curve fitting algorithm is used. In certain embodiments, a third order curve fitting algorithm is used. In certain embodiments, one or more higher order curve fitting algorithms are used wherein (n) is 4, 5, or 6.</p>
<p id="p-0093" num="0092">Applicants' method transitions from step <b>566</b> to step <b>568</b> wherein Applicants' method forms (N) calibration curves using the (N) transfer functions of step <b>566</b>. As those skilled in the art will appreciate, a calibration curve is formed for each servo sensor being calibrated. Each of those (N) calibration curves includes a plurality of calculated datapoints DP<sub>CAL(i)</sub>. Referring now to <figref idref="DRAWINGS">FIG. 8</figref>, curves <b>815</b>, <b>825</b>, and <b>835</b>, are derived using the transfer functions of step <b>566</b>. <figref idref="DRAWINGS">FIG. 8</figref> further recites three sets of measured datapoints <b>810</b>, <b>820</b>, and <b>830</b>.</p>
<p id="p-0094" num="0093">Applicants' method transitions from step <b>568</b> to step <b>570</b> wherein Applicants' method compares the measured datapoints DP<sub>ACT(i) </sub>for a given servo sensor with the calculated datapoints DP<sub>CAL(i) </sub>for that servo sensor. In certain embodiments, Applicants' method determines the residual error RE<sub>(i) </sub>for each actual datapoint by computing the difference between DP<sub>ACT(i) </sub>and DP<sub>CAL(i)</sub>. In certain embodiments, Applicants' method establishes a maximum residual error RE<sub>MAX</sub>, and compares each RE<sub>(i) </sub>to that RE<sub>MAX</sub>. In certain embodiments, Applicants' method determines an average residual error RE<sub>AVG </sub>using the values for RE<sub>(i)</sub>, and compares RE<sub>AVG </sub>to RE<sub>MAX</sub>.</p>
<p id="p-0095" num="0094">Applicants' method transitions from step <b>570</b> to step <b>572</b> wherein Applicants' method, based upon the comparison of step <b>570</b>, determines if the transfer function of step <b>566</b> models the actual data measured, i.e. determines if the calibration curves formed using that transfer function adequately match the actual datapoints DP<sub>ACT(i)</sub>. If Applicants' method determines in step <b>572</b> that the transfer function does not model the measured datapoints, then Applicants' method transitions from step <b>572</b> to step <b>574</b>. For example, in certain embodiments Applicants' method determines that the transfer function of step <b>566</b> models the measured datapoints if the RE<sub>AVG </sub>is less than or equal to RE<sub>MAX</sub>.</p>
<p id="p-0096" num="0095">In step <b>574</b> Applicants' method determines if (n) equals (n)<sub>MAX</sub>. If Applicants' method determines in step <b>574</b> that (n)<sub>MAX </sub>has not been reached, then Applicants' method transitions to step <b>576</b> wherein (n) is incremented. Thereafter, Applicants' method transitions from step <b>576</b> to step <b>566</b> wherein a new transfer function is determined using a higher order data regression analysis. In the event no value for (n)<sub>MAX </sub>is established in step <b>564</b>, then Applicants' method returns a finding of “YES” in step <b>574</b> and transitions to step <b>578</b>.</p>
<p id="p-0097" num="0096">In certain embodiments, Applicants' method includes establishing a maximum number (M) of calibration attempts. If Applicants' method determines in step <b>574</b> that (n)<sub>MAX </sub>has been reached or has not been established, then Applicants' method transitions from step <b>574</b> to step <b>578</b> wherein Applicants' method determines if (M) calibration attempts have been made. If Applicants' method determines in step <b>578</b> that the maximum number of calibration attempts have not been made, then Applicants' method transitions from step <b>578</b> to step <b>516</b> (<figref idref="DRAWINGS">FIG. 5A</figref>).</p>
<p id="p-0098" num="0097">If Applicants' method determines in step <b>578</b> that (M) calibration attempts have already been made, then Applicants' method transitions from step <b>578</b> to step <b>580</b> wherein an error message is provided. In the event no value for (M) has been established, then Applicants' method returns a finding of “YES” for step <b>578</b>.</p>
<p id="p-0099" num="0098">If Applicants' method determines in step <b>572</b> that the transfer function of step <b>566</b> adequately models the measured datapoints, then Applicants' method transitions to step <b>582</b> wherein that transfer function is saved for subsequent use. In certain embodiments, the transfer function is saved in a memory device, such as memory <b>107</b> (<figref idref="DRAWINGS">FIG. 1</figref>).</p>
<p id="p-0100" num="0099">Applicants' method transitions from step <b>582</b> to step <b>584</b> wherein Applicants' method determines if the one or more sensors require calibration using a different servo pattern. If Applicants' method determines in step <b>584</b> that the one or more sensors requires calibration using a different servo pattern, then Applicants' method transitions from step <b>584</b> to step <b>510</b>. Alternatively, if no further calibration is required, then Applicants' method transitions from step <b>584</b> to step <b>590</b> and ends.</p>
<p id="p-0101" num="0100">As those skilled in the art will appreciate, the transfer function saved in step <b>582</b> is subsequently used to calculate one or more expected position error signals (“PES”) for the servo loop at the laterally offset servo index positions with respect to the sensed first set of linear servo edges. These calculated PES signals are used to track follow during, for example, a read operation, a write operation, and erase operation, and the like.</p>
<p id="p-0102" num="0101">In certain embodiments, one or more individual steps of Applicants' method summarized in <figref idref="DRAWINGS">FIGS. 5A and 5B</figref> may be combined, eliminated, or reordered.</p>
<p id="p-0103" num="0102">Applicants' method has been described above in embodiments wherein one or more servo sensors are calibrated. Applicants' method, however, is not limited to calibrating servo sensors. Rather, Applicants' method can be used to calibrate transducers in an electrically noisy environment.</p>
<p id="p-0104" num="0103">Referring to <figref idref="DRAWINGS">FIG. 11</figref>, in step <b>1105</b> Applicants' method calibrates a transducer with respect to a reference signal, where that transducer produces a first signal. In step <b>1110</b>, the transducer provides that first signal. In step <b>1115</b>, the reference provides the reference signal. In step <b>1120</b>, Applicants' method establishes a sampling rate at a reference frequency.</p>
<p id="p-0105" num="0104">In step <b>1125</b>, Applicants' method samples the first signal at the sampling rate. In step <b>1130</b>, Applicants' method samples the reference signal at the reference frequency. In step <b>1135</b>, Applicants' method digitally forms a measured first signal waveform using the data of step <b>1125</b>. In step <b>1140</b>, Applicants' method digitally forms a measured reference signal waveform using the data of step <b>1130</b>.</p>
<p id="p-0106" num="0105">In step <b>1145</b>, Applicants' method determines at (P) harmonics of the reference frequency the real and imaginary components of the measured first signal waveform using the embodiments described above with respect to steps <b>530</b> (<figref idref="DRAWINGS">FIG. 5A) and 550</figref> (<figref idref="DRAWINGS">FIG. 5A</figref>). In step <b>1150</b>, Applicants' method forms a filtered first signal waveform using the embodiments described above with respect to steps <b>535</b> (<figref idref="DRAWINGS">FIG. 5A) and 555</figref> (<figref idref="DRAWINGS">FIG. 5A</figref>).</p>
<p id="p-0107" num="0106">In step <b>1155</b>, Applicants' method determines at (P) harmonics of the reference frequency the real and imaginary components of the measured reference signal waveform using the embodiments described above with respect to steps <b>530</b> (<figref idref="DRAWINGS">FIG. 5A) and 550</figref> (<figref idref="DRAWINGS">FIG. 5A</figref>). In step <b>1160</b>, Applicants' method forms a filtered reference signal waveform using the embodiments described above with respect to steps <b>535</b> (<figref idref="DRAWINGS">FIG. 5A) and 555</figref> (<figref idref="DRAWINGS">FIG. 5A</figref>).</p>
<p id="p-0108" num="0107">In step <b>1165</b>, Applicants' method correlates the filtered reference signal waveform of step <b>1160</b> with the filtered first signal waveform of step <b>1150</b> to form a transfer function using the embodiments described above with respect to steps <b>560</b> (<figref idref="DRAWINGS">FIG. 5B</figref>), <b>562</b> (<figref idref="DRAWINGS">FIG. 5B</figref>), <b>564</b> (<figref idref="DRAWINGS">FIG. 5B</figref>), and <b>566</b> (<figref idref="DRAWINGS">FIG. 5B</figref>). In step <b>1170</b>, Applicants' method forms a calibration curve for the transducer using the transfer function of step <b>1165</b>. In certain embodiments, one or more individual steps of Applicants' method summarized in <figref idref="DRAWINGS">FIG. 11</figref> may be combined, eliminated, or reordered.</p>
<p id="p-0109" num="0108">Applicants' invention further includes an article of manufacture comprising a computer useable medium having computer readable program code disposed therein for calibrating a transducer in an electrically noisy environment. Applicants' invention further includes a computer program product usable with a programmable computer processor having computer readable program code embodied therein for calibrating a transducer in an electrically noisy environment.</p>
<p id="p-0110" num="0109">Applicants' method has been described above in embodiments wherein one or more servo sensors are calibrated, and in embodiments wherein a transducer is calibrated. Referring now to <figref idref="DRAWINGS">FIG. 12</figref>, Applicant has found that the method described above can also be used to eliminate noise from a system, such as system <b>1200</b>, comprising a single input <b>1210</b> and a single output <b>1240</b>. Applicant's method applies a driving sinusoid to the input signal, and then measures the output signal. Any output signal component not at the same frequency of, or a harmonic of, the driving sinsusoid comprises noise <b>1220</b> which results from some external influence.</p>
<p id="p-0111" num="0110">To calculate a transfer function <b>1230</b> for system <b>1200</b>, one generates and applies an input signal <b>1210</b> to the system and measures the output <b>1240</b> of the system. An example is a semiconductor curve tracer. A sinusoidal signal of voltage or current is applied to the circuit to be characterized, and the resulting output voltage or current is measured at the output of the circuit. In the simplest of systems the input is applied to the X axis of an XY oscilloscope, and the output is applied to the Y axis of the oscilloscope. The resultant curve comprises the transfer function of the device under test. There are many different applications in sensors and transfer functions of systems where this methodology can be practiced.</p>
<p id="p-0112" num="0111">Such a method can also be more complex in systems where the inputs and outputs are digitized and the computations are all performed in a digital processor or computer. The method, however, remains the same, namely, apply a signal and measure the output that results from the application of the input signal. In the cases where the data is digitized the mathematical relationship of the output to the input can be calculated.</p>
<p id="p-0113" num="0112">This is all well and good when the signal to noise of the system is positive. But prior art calibration methods quickly break down in the presence of noise because it is difficult to remove the noise from the measurement of the output signal. Noise destroys the correlation between the input and output signals. Therefore in the presence of noise, prior art calibration curves are very wide and/or very noisy because the relationship of input to output is not a one to one relationship. By “noise,” Applicant means any external influence in the system being measured.</p>
<p id="p-0114" num="0113">Such noise could change the system output, such as output <b>1240</b>, where that noise is not be related to the input in any way. Applicant's method eliminates the noise portion of the output signal by using a sinusoid as the input signal and sampling both the input and output at the same frequency and phase. The component of the output signal due to the input signal can be almost completely isolated free of any noise using Applicant's methodology.</p>
<p id="p-0115" num="0114"><figref idref="DRAWINGS">FIG. 12</figref> is a generalized block diagram of a transfer function of a non-feedback system <b>1200</b>. As a general matter, this embodiment of Applicant's method uses a known driving frequency and only looks at the resultant output frequency and harmonics to eliminate noise, where noise is defined as anything not caused by the input frequency. Applicant has found that using digital Goertzel filters blocks out anything not caused by the input signal.</p>
<p id="p-0116" num="0115">Applicant's method can be applied to a single input, single output system, as well as being applicable to a single input, multiple output system. One application of Applicant's method comprises checking or refining the calibration of a sensor, and/or checking the overall transfer function of a system, in a working servo system, by applying a sinusoidal input signal to the summing junction during the normal operation of the system.</p>
<p id="p-0117" num="0116"><figref idref="DRAWINGS">FIG. 13</figref> is a block diagram of a digital servo loop <b>1300</b>. Applicant's method provides system <b>1360</b> with a reference signal <b>1310</b>, also known as the set point, and controls the output signal <b>1340</b>. Applicant's method injects a sinusoidal signal <b>1320</b> at the virtual summing junction <b>1330</b> in the digital servo loop. Applicant's method performs the calibration on the output signal of the controlled system.</p>
<p id="p-0118" num="0117">In <figref idref="DRAWINGS">FIG. 13</figref> feedback loop <b>1370</b> utilizes calibration constants and/or information abstracted from a lookup table. Using Applicant's method, the operation of the servo system may be continued while the system is calibrated. For example in the case of a robotic system, the system can be piecewise calibrated during normal operation. As the sensor is exercised throughout the total working range, Applicant's method adds in a sinusoid at a specific frequency into the servo loop and measures the resultant output using the methodology described herein above to capture only the frequencies and harmonics of interest. Applicant's method facilitates calibration of the sensor or system in piecewise increments depending on where the system is at a given time.</p>
<p id="p-0119" num="0118">For example, a robotic arm that extends outwardly comprises a constantly changing moment or center of gravity. As the system is operating, the transfer function can be determined in portions, and those portions can later be subsequently aggregated. In certain embodiments, Applicant's method generates a plurality of transfer functions for a system, wherein the differing transfer functions are used for different “positions” of the system with an automatic switching of the transfer function as the system moves from one region to another.</p>
<p id="p-0120" num="0119">Applicant's method selects the frequency of the injected signal to differ from any frequency or harmonic present in the system at the time of calibration. Moreover, in certain embodiments of Applicant's method the system can be re-calibrated during normal operation of the system without stopping operation of the system, providing that the system remains in the linear operating mode during the entire calibration interval. This capability allows control systems that have a variable mass or a variable moment arm to be re-calibrated or the calibration could be checked during the operation of the system without having to stop the operation of the system to perform a calibration or checkout.</p>
<p id="p-0121" num="0120">In addition, the ability to calibrate a servo system while that system is operating allows the closing of a servo loop with less than optimal calibration constants and refinement of the calibration while the system is working, providing that the gain is held low and the addition of the sinusoid to the system keeps the system operating in the linear region. Applications in robotics or control systems where the load is unknown, or moment is unknown at power up time, Applicant's method operates the system with default calibration settings while using Applicant's methodology to refine the system calibration, thereby continuously optimizing the operation of the system.</p>
<p id="p-0122" num="0121">Using this embodiment of Applicant's method, a system can be started in slow motion mode, automatically calibrate itself during operation, and then operate faster and faster as the calibration is refined. Applicant has discovered that the longer the Goertzel filter is allowed to run, the narrower the frequency window. Therefore the longer the system is operated, and the more calibration points are generated, the more selective the filters become. This allows Applicant's method to run in a system where the frequency used as the input frequency may occasionally be present in the “noise.”</p>
<p id="p-0123" num="0122"><figref idref="DRAWINGS">FIG. 14</figref> summarizes the steps of Applicant's method to generate a calibration function for an output signal generated by a system receiving an input signal. Referring now to <figref idref="DRAWINGS">FIG. 14</figref>, in step <b>1405</b> Applicants' method provides a system which generates an output signal using an input signal. In step <b>1410</b>, Applicant's method provides an input signal to the system. In step <b>1415</b>, the method measures an output signal. In step <b>1420</b>, Applicants' method establishes a sampling rate at a reference frequency.</p>
<p id="p-0124" num="0123">In step <b>1425</b>, Applicants' method samples the input signal at the sampling rate. In step <b>1430</b>, Applicants' method samples the output signal at the reference frequency. In step <b>1435</b>, Applicants' method digitally forms a measured input signal waveform using the data of step <b>1425</b>. In step <b>1440</b>, Applicants' method digitally forms a measured output signal waveform using the data of step <b>1430</b>.</p>
<p id="p-0125" num="0124">In step <b>1445</b>, Applicants' method determines at (P) harmonics of the reference frequency the real and imaginary components of the measured input signal waveform. In certain embodiments, step <b>1445</b> uses the embodiments described above with respect to step <b>530</b> (<figref idref="DRAWINGS">FIG. 5A</figref>). In other embodiments, step <b>1445</b> comprises using a Fast Fourier Transform to determine at (P) harmonics of the reference frequency the real and imaginary components of the measured input signal waveform.</p>
<p id="p-0126" num="0125">In step <b>1450</b>, Applicants' method forms a filtered input signal waveform using the embodiments described above with respect to step <b>535</b> (<figref idref="DRAWINGS">FIG. 5A</figref>). In step <b>1455</b>, Applicants' method determines at (P) harmonics of the reference frequency the real and imaginary components of the measured output signal waveform. In certain embodiments, step <b>1455</b> comprises using the embodiments described above with respect to step <b>530</b> (<figref idref="DRAWINGS">FIG. 5A</figref>). In other embodiments, step <b>1455</b> comprises using a Fast Fourier Transform to determine at (P) harmonics of the reference frequency the real and imaginary components of the measured output signal waveform.</p>
<p id="p-0127" num="0126">In step <b>1460</b>, Applicants' method forms a filtered output signal waveform using the embodiments described above with respect to step <b>535</b>. In step <b>1465</b>, Applicants' method correlates the filtered output signal waveform of step <b>1460</b> with the filtered input signal waveform of step <b>1450</b> to form a transfer function using the embodiments described above with respect to steps <b>560</b> (<figref idref="DRAWINGS">FIG. 5B</figref>), <b>562</b> (<figref idref="DRAWINGS">FIG. 5B</figref>), <b>564</b> (<figref idref="DRAWINGS">FIG. 5B</figref>), and <b>566</b> (<figref idref="DRAWINGS">FIG. 5B</figref>). In step <b>1470</b>, Applicants' method forms a calibration curve for the system using the transfer function of step <b>1465</b>. In certain embodiments, one or more individual steps of Applicants' method summarized in <figref idref="DRAWINGS">FIG. 14</figref> may be combined, eliminated, or reordered.</p>
<p id="p-0128" num="0127">Applicants' invention further comprises instructions, where those instructions are executed by a processor to perform steps <b>1410</b>, <b>1415</b>, <b>1420</b>, <b>1425</b>, <b>1430</b>, <b>1435</b>, <b>1440</b>, <b>1445</b>, <b>1450</b>, <b>1455</b>, <b>1460</b>, <b>1465</b>, and/or <b>1470</b>, recited in <figref idref="DRAWINGS">FIG. 14</figref>.</p>
<p id="p-0129" num="0128">In other embodiments, Applicants' invention includes instructions residing in a computer program product, where those instructions are executed by a computer external to, or internal to, Applicant's system <b>1200</b> (<figref idref="DRAWINGS">FIG. 12</figref>) and/or <b>1300</b> (<figref idref="DRAWINGS">FIG. 13</figref>), to perform steps <b>1410</b>, <b>1415</b>, <b>1420</b>, <b>1425</b>, <b>1430</b>, <b>1435</b>, <b>1440</b>, <b>1445</b>, <b>1450</b>, <b>1455</b>, <b>1460</b>, <b>1465</b>, and/or <b>1470</b>, recited in <figref idref="DRAWINGS">FIG. 14</figref>. In either case, the instructions may be encoded in an information storage medium comprising, for example, a magnetic information storage medium, an optical information storage medium, an electronic information storage medium, and the like. By “electronic storage media,” Applicants mean, for example, a device such as a PROM, EPROM, EEPROM, Flash PROM, compactflash, smartmedia, and the like.</p>
<p id="p-0130" num="0129">While the preferred embodiments of the present invention have been illustrated in detail, it should be apparent that modifications and adaptations to those embodiments may occur to one skilled in the art without departing from the scope of the present invention as set forth in the following claims.</p>
<?DETDESC description="Detailed Description" end="tail"?>
</description>
<us-chemistry idref="CHEM-US-00001" cdx-file="US07299146-20071120-C00001.CDX" mol-file="US07299146-20071120-C00001.MOL"/>
<us-math idrefs="MATH-US-00001" nb-file="US07299146-20071120-M00001.NB">
<img id="EMI-M00001" he="6.69mm" wi="76.20mm" file="US07299146-20071120-M00001.TIF" alt="embedded image " img-content="math" img-format="tif"/>
</us-math>
<us-math idrefs="MATH-US-00002" nb-file="US07299146-20071120-M00002.NB">
<img id="EMI-M00002" he="6.69mm" wi="76.20mm" file="US07299146-20071120-M00002.TIF" alt="embedded image " img-content="math" img-format="tif"/>
</us-math>
<us-math idrefs="MATH-US-00003" nb-file="US07299146-20071120-M00003.NB">
<img id="EMI-M00003" he="6.69mm" wi="76.20mm" file="US07299146-20071120-M00003.TIF" alt="embedded image " img-content="math" img-format="tif"/>
</us-math>
<us-math idrefs="MATH-US-00004" nb-file="US07299146-20071120-M00004.NB">
<img id="EMI-M00004" he="6.69mm" wi="76.20mm" file="US07299146-20071120-M00004.TIF" alt="embedded image " img-content="math" img-format="tif"/>
</us-math>
<us-claim-statement>I claim:</us-claim-statement>
<claims id="claims">
<claim id="CLM-00001" num="00001">
<claim-text>1. A method to calibrate a transducer receiving an input signal and generating an output signal, comprising the steps of:
<claim-text>providing an input signal to said transducer;</claim-text>
<claim-text>generating an output signal by said transducer, wherein said output signal comprises noise;</claim-text>
<claim-text>establishing a sampling rate comprising a reference frequency;</claim-text>
<claim-text>sampling said input signal at said sampling rate;</claim-text>
<claim-text>sampling said output signal at said sampling rate;</claim-text>
<claim-text>forming a measured input signal waveform;</claim-text>
<claim-text>forming a measured output signal waveform;</claim-text>
<claim-text>determining at (P) harmonics of said reference frequency the real components and the imaginary components of said measured input signal waveform;</claim-text>
<claim-text>forming a filtered input signal waveform;</claim-text>
<claim-text>determining at (P) harmonics of said reference frequency the real components and imaginary components of said measured output signal waveform;</claim-text>
<claim-text>forming a filtered output signal waveform;</claim-text>
<claim-text>calculating a transfer function comprising a mathematical relationship between said filtered output signal waveform and said filtered input signal waveform;</claim-text>
<claim-text>forming a calibration curve using said transfer function, wherein said calibration curve comprises a relationship between said input signal and said output signal minus said noise;</claim-text>
<claim-text>calibrating said transducer.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00002" num="00002">
<claim-text>2. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein said determining steps further comprise using a Fast Fourier Transform.</claim-text>
</claim>
<claim id="CLM-00003" num="00003">
<claim-text>3. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein said determining steps further comprise using a Goertzel algorithm.</claim-text>
</claim>
<claim id="CLM-00004" num="00004">
<claim-text>4. The method of <claim-ref idref="CLM-00003">claim 3</claim-ref>, further comprising the steps of:
<claim-text>correlating said filtered output signal waveform with said filtered input signal waveform;</claim-text>
<claim-text>determining a plurality of actual datapoints; and</claim-text>
<claim-text>forming an X/Y array comprising said plurality of actual datapoints.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00005" num="00005">
<claim-text>5. The method of <claim-ref idref="CLM-00004">claim 4</claim-ref>, further comprising the steps of:
<claim-text>determining a plurality of calculated datapoints using said transfer function; and</claim-text>
<claim-text>comparing said plurality of actual datapoints with said plurality of calculated datapoints.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00006" num="00006">
<claim-text>6. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, further comprising the steps of:
<claim-text>determining at each of (P) harmonics of said reference frequency the real components and the imaginary components of said measured input signal waveform, wherein (P) is an integer equal to or greater than 1 and equal to or less than about 6; and</claim-text>
<claim-text>determining at each of said (P) harmonics of said reference frequency the real components and the imaginary components of said measured output signal waveform.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00007" num="00007">
<claim-text>7. The method of <claim-ref idref="CLM-00006">claim 6</claim-ref>, wherein said determining steps are performed using a Goertzel filter.</claim-text>
</claim>
<claim id="CLM-00008" num="00008">
<claim-text>8. The method of <claim-ref idref="CLM-00006">claim 6</claim-ref>, further comprising the steps of:
<claim-text>calculating the magnitude M(i) of said measured output signal waveform at each of said (P) harmonics of said reference frequency;</claim-text>
<claim-text>calculating the phase φ(i) of said measured output signal waveform at each of said (P) harmonics of said reference frequency; and</claim-text>
<claim-text>forming said filtered output signal waveform using the equation</claim-text>
</claim-text>
<claim-text>
<maths id="MATH-US-00001" num="00001">
<math overflow="scroll">
<mrow>
  <mrow>
    <mover>
      <msub>
        <mo>∑</mo>
        <msub>
          <mi>M</mi>
          <mrow>
            <mo>(</mo>
            <mi>i</mi>
            <mo>)</mo>
          </mrow>
        </msub>
      </msub>
      <mstyle>
        <mspace width="0.3em" height="0.3ex"/>
      </mstyle>
    </mover>
    <mo>⁢</mo>
    <mstyle>
      <mspace width="0.3em" height="0.3ex"/>
    </mstyle>
    <mo>⁢</mo>
    <mrow>
      <mo>*</mo>
      <mrow>
        <mi>cos</mi>
        <mo>⁡</mo>
        <mrow>
          <mo>[</mo>
          <mrow>
            <msub>
              <mi>ϕ</mi>
              <mrow>
                <mo>(</mo>
                <mi>i</mi>
                <mo>)</mo>
              </mrow>
            </msub>
            <mo>+</mo>
            <mrow>
              <mrow>
                <mo>(</mo>
                <mrow>
                  <mn>2</mn>
                  <mo>⁢</mo>
                  <mi>i</mi>
                </mrow>
                <mo>)</mo>
              </mrow>
              <mo>⁢</mo>
              <mrow>
                <mo>(</mo>
                <mi>π</mi>
                <mo>)</mo>
              </mrow>
              <mo>⁢</mo>
              <mrow>
                <mrow>
                  <mo>(</mo>
                  <mi>t</mi>
                  <mo>)</mo>
                </mrow>
                <mo>/</mo>
                <mi>x</mi>
              </mrow>
            </mrow>
          </mrow>
          <mo>]</mo>
        </mrow>
      </mrow>
    </mrow>
  </mrow>
  <mo>;</mo>
</mrow>
</math>
</maths>
<claim-text>wherein (i) is an integer greater than or equal to 1 and less than or equal to (P), and wherein (t)/x is greater than or equal to 0 and less than or equal to 1.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00009" num="00009">
<claim-text>9. The method of <claim-ref idref="CLM-00006">claim 6</claim-ref>, further comprising the steps of:
<claim-text>calculating the magnitude M(i) of said measured input signal waveform at each of said (P) harmonics of said reference frequency;</claim-text>
<claim-text>calculating the phase φ(i) of said measured input signal waveform at each of said (P) harmonics of said reference frequency; and</claim-text>
<claim-text>forming said filtered input signal waveform using the equation</claim-text>
</claim-text>
<claim-text>
<maths id="MATH-US-00002" num="00002">
<math overflow="scroll">
<mrow>
  <mrow>
    <mover>
      <msub>
        <mo>∑</mo>
        <msub>
          <mi>M</mi>
          <mrow>
            <mo>(</mo>
            <mi>i</mi>
            <mo>)</mo>
          </mrow>
        </msub>
      </msub>
      <mstyle>
        <mspace width="0.3em" height="0.3ex"/>
      </mstyle>
    </mover>
    <mo>⁢</mo>
    <mstyle>
      <mspace width="0.3em" height="0.3ex"/>
    </mstyle>
    <mo>⁢</mo>
    <mrow>
      <mo>*</mo>
      <mrow>
        <mi>cos</mi>
        <mo>⁡</mo>
        <mrow>
          <mo>[</mo>
          <mrow>
            <msub>
              <mi>ϕ</mi>
              <mrow>
                <mo>(</mo>
                <mi>i</mi>
                <mo>)</mo>
              </mrow>
            </msub>
            <mo>+</mo>
            <mrow>
              <mrow>
                <mo>(</mo>
                <mrow>
                  <mn>2</mn>
                  <mo>⁢</mo>
                  <mi>i</mi>
                </mrow>
                <mo>)</mo>
              </mrow>
              <mo>⁢</mo>
              <mrow>
                <mo>(</mo>
                <mi>π</mi>
                <mo>)</mo>
              </mrow>
              <mo>⁢</mo>
              <mrow>
                <mrow>
                  <mo>(</mo>
                  <mi>t</mi>
                  <mo>)</mo>
                </mrow>
                <mo>/</mo>
                <mi>x</mi>
              </mrow>
            </mrow>
          </mrow>
          <mo>]</mo>
        </mrow>
      </mrow>
    </mrow>
  </mrow>
  <mo>;</mo>
</mrow>
</math>
</maths>
<claim-text>wherein (i) is an integer greater than or equal to 0 and less than or equal to (P), and wherein (t)/x is greater than or equal to 0 and less than or equal to 1.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00010" num="00010">
<claim-text>10. A computer program product encoded in an information storage medium, said computer program product being useable with a programmable computer processor having computer readable program code embodied therein to calibrate a transducer receiving an input signal and generating an output signal, comprising:
<claim-text>computer readable program code which causes said programmable computer processor to receive an input signal;</claim-text>
<claim-text>computer readable program code which causes said programmable computer processor to generate an output signal, wherein said output signal comprises noise;</claim-text>
<claim-text>computer readable program code which causes said programmable computer processor to retrieve a pre-determined sampling rate comprising a reference frequency;</claim-text>
<claim-text>computer readable program code which causes said programmable computer processor to sample said input signal at said sampling rate;</claim-text>
<claim-text>computer readable program code which causes said programmable computer processor to sample said output signal at said sampling rate;</claim-text>
<claim-text>computer readable program code which causes said programmable computer processor to generate a measured input signal waveform;</claim-text>
<claim-text>computer readable program code which causes said programmable computer processor to generate a measured output signal waveform;</claim-text>
<claim-text>computer readable program code which causes said programmable computer processor to determine at (P) harmonics of said reference frequency the real components and the imaginary components of said measured input signal waveform;</claim-text>
<claim-text>computer readable program code which causes said programmable computer processor to form a filtered input signal waveform;</claim-text>
<claim-text>computer readable program code which causes said programmable computer processor to determine at (P) harmonics of said reference frequency the real components and imaginary components of said measured output signal waveform;</claim-text>
<claim-text>computer readable program code which causes said programmable computer processor to form a filtered output signal waveform;</claim-text>
<claim-text>computer readable program code which causes said programmable computer processor to calculate a transfer function comprising a mathematical relationship between said filtered output signal waveform and said filtered input signal waveform; and</claim-text>
<claim-text>computer readable program code which causes said programmable computer processor to form a calibration curve using said transfer function wherein said calibration curve comprises a relationship between said input signal and said output signal minus said noise;</claim-text>
<claim-text>computer readable program code which causes said programmable computer processor to calibrate said transducer.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00011" num="00011">
<claim-text>11. The computer program product of <claim-ref idref="CLM-00010">claim 10</claim-ref>, wherein said computer readable program code which causes said programmable computer processor to determine at (P) harmonics of said reference frequency the real components and the imaginary components of said measured input signal waveform further comprises computer readable program code which causes said programmable computer processor to use a Goertzel algorithm.</claim-text>
</claim>
<claim id="CLM-00012" num="00012">
<claim-text>12. The computer program product of <claim-ref idref="CLM-00011">claim 11</claim-ref>, wherein said computer readable program code which causes said programmable computer processor to determine at (P) harmonics of said reference frequency the real components and the imaginary components of said measured output signal waveform further comprises computer readable program code which causes said programmable computer processor to use a Goertzel algorithm.</claim-text>
</claim>
<claim id="CLM-00013" num="00013">
<claim-text>13. The computer program product of <claim-ref idref="CLM-00010">claim 10</claim-ref>, wherein said computer readable program code which causes said programmable computer processor to determine at (P) harmonics of said reference frequency the real components and the imaginary components of said measured input signal waveform further comprises computer readable program code which causes said programmable computer processor to use a Fast Fourier Transform.</claim-text>
</claim>
<claim id="CLM-00014" num="00014">
<claim-text>14. The computer program product of <claim-ref idref="CLM-00013">claim 13</claim-ref>, wherein said computer readable program code which causes said programmable computer processor to determine at (P) harmonics of said reference frequency the real components and the imaginary components of said measured output signal waveform further comprises computer readable program code which causes said programmable computer processor to use a Fast Fourier Transform.</claim-text>
</claim>
<claim id="CLM-00015" num="00015">
<claim-text>15. The computer program product of <claim-ref idref="CLM-00010">claim 10</claim-ref>, further comprising:
<claim-text>computer readable program code which causes said programmable computer processor to correlate said filtered output signal waveform with said filtered input signal waveform;</claim-text>
<claim-text>computer readable program code which causes said programmable computer processor to determine a plurality of actual datapoints; and</claim-text>
<claim-text>computer readable program code which causes said programmable computer processor to form an X/Y array comprising said plurality of actual datapoints.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00016" num="00016">
<claim-text>16. The computer program product of <claim-ref idref="CLM-00015">claim 15</claim-ref>, further comprising:
<claim-text>computer readable program code which causes said programmable computer processor to determine a plurality of calculated datapoints using said transfer function; and</claim-text>
<claim-text>computer readable program code which causes said programmable computer processor to compare said plurality of actual datapoints with said plurality of calculated datapoints.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00017" num="00017">
<claim-text>17. The computer program product of <claim-ref idref="CLM-00010">claim 10</claim-ref>, further comprising:
<claim-text>computer readable program code which causes said programmable computer processor to determine at each of (P) harmonics of said reference frequency the real components and the imaginary components of said measured input signal waveform, wherein (P) is an integer equal to or greater than 1 and equal to or less than about 6; and</claim-text>
<claim-text>computer readable program code which causes said programmable computer processor to determine at each of said (P) harmonics of said reference frequency the real components and the imaginary components of said measured output signal waveform.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00018" num="00018">
<claim-text>18. The computer program product of <claim-ref idref="CLM-00017">claim 17</claim-ref>, further comprising:
<claim-text>computer readable program code which causes said programmable computer processor to calculate the magnitude M(i) of said measured output signal waveform at each of said (P) harmonics of said reference frequency;</claim-text>
<claim-text>computer readable program code which causes said programmable computer processor to calculate the phase φ(i) of said measured output signal waveform at each of said (P) harmonics of said reference frequency; and</claim-text>
<claim-text>computer readable program code which causes said programmable computer processor to form said filtered output signal waveform using the equation</claim-text>
</claim-text>
<claim-text>
<maths id="MATH-US-00003" num="00003">
<math overflow="scroll">
<mrow>
  <mrow>
    <mover>
      <msub>
        <mo>∑</mo>
        <msub>
          <mi>M</mi>
          <mrow>
            <mo>(</mo>
            <mi>i</mi>
            <mo>)</mo>
          </mrow>
        </msub>
      </msub>
      <mstyle>
        <mspace width="0.3em" height="0.3ex"/>
      </mstyle>
    </mover>
    <mo>⁢</mo>
    <mstyle>
      <mspace width="0.3em" height="0.3ex"/>
    </mstyle>
    <mo>⁢</mo>
    <mrow>
      <mo>*</mo>
      <mrow>
        <mi>cos</mi>
        <mo>⁡</mo>
        <mrow>
          <mo>[</mo>
          <mrow>
            <msub>
              <mi>ϕ</mi>
              <mrow>
                <mo>(</mo>
                <mi>i</mi>
                <mo>)</mo>
              </mrow>
            </msub>
            <mo>+</mo>
            <mrow>
              <mrow>
                <mo>(</mo>
                <mrow>
                  <mn>2</mn>
                  <mo>⁢</mo>
                  <mi>i</mi>
                </mrow>
                <mo>)</mo>
              </mrow>
              <mo>⁢</mo>
              <mrow>
                <mo>(</mo>
                <mi>π</mi>
                <mo>)</mo>
              </mrow>
              <mo>⁢</mo>
              <mrow>
                <mrow>
                  <mo>(</mo>
                  <mi>t</mi>
                  <mo>)</mo>
                </mrow>
                <mo>/</mo>
                <mi>x</mi>
              </mrow>
            </mrow>
          </mrow>
          <mo>]</mo>
        </mrow>
      </mrow>
    </mrow>
  </mrow>
  <mo>;</mo>
</mrow>
</math>
</maths>
<claim-text>wherein (i) is an integer greater than or equal to 1 and less than or equal to (P), and wherein (t)/x is greater than or equal to 0 and less than or equal to 1.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00019" num="00019">
<claim-text>19. The computer program product of <claim-ref idref="CLM-00017">claim 17</claim-ref>, further comprising:
<claim-text>computer readable program code which causes said programmable computer processor to calculate the magnitude M(i) of said measured input signal waveform at each of said (P) harmonics of said reference frequency;</claim-text>
<claim-text>computer readable program code which causes said programmable computer processor to calculate the phase φ(i) of said measured input signal waveform at each of said (P) harmonics of said reference frequency; and</claim-text>
<claim-text>computer readable program code which causes said programmable computer processor to form said filtered input signal waveform using the equation</claim-text>
</claim-text>
<claim-text>
<maths id="MATH-US-00004" num="00004">
<math overflow="scroll">
<mrow>
  <mrow>
    <mover>
      <msub>
        <mo>∑</mo>
        <msub>
          <mi>M</mi>
          <mrow>
            <mo>(</mo>
            <mi>i</mi>
            <mo>)</mo>
          </mrow>
        </msub>
      </msub>
      <mstyle>
        <mspace width="0.3em" height="0.3ex"/>
      </mstyle>
    </mover>
    <mo>⁢</mo>
    <mstyle>
      <mspace width="0.3em" height="0.3ex"/>
    </mstyle>
    <mo>⁢</mo>
    <mrow>
      <mo>*</mo>
      <mrow>
        <mi>cos</mi>
        <mo>⁡</mo>
        <mrow>
          <mo>[</mo>
          <mrow>
            <msub>
              <mi>ϕ</mi>
              <mrow>
                <mo>(</mo>
                <mi>i</mi>
                <mo>)</mo>
              </mrow>
            </msub>
            <mo>+</mo>
            <mrow>
              <mrow>
                <mo>(</mo>
                <mrow>
                  <mn>2</mn>
                  <mo>⁢</mo>
                  <mi>i</mi>
                </mrow>
                <mo>)</mo>
              </mrow>
              <mo>⁢</mo>
              <mrow>
                <mo>(</mo>
                <mi>π</mi>
                <mo>)</mo>
              </mrow>
              <mo>⁢</mo>
              <mrow>
                <mrow>
                  <mo>(</mo>
                  <mi>t</mi>
                  <mo>)</mo>
                </mrow>
                <mo>/</mo>
                <mi>x</mi>
              </mrow>
            </mrow>
          </mrow>
          <mo>]</mo>
        </mrow>
      </mrow>
    </mrow>
  </mrow>
  <mo>;</mo>
</mrow>
</math>
</maths>
<claim-text>wherein (i) is an integer greater than or equal to 0 and less than or equal to (P), and wherein (t)/x is greater than or equal to 0 and less than or equal to 1.</claim-text>
</claim-text>
</claim>
</claims>
</us-patent-grant>
