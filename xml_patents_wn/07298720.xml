<us-patent-grant lang="EN" dtd-version="v4.2 2006-08-23" file="US07298720-20071120.XML" status="PRODUCTION" id="us-patent-grant" country="US" date-produced="20071106" date-publ="20071120">
<us-bibliographic-data-grant>
<publication-reference>
<document-id>
<country>US</country>
<doc-number>07298720</doc-number>
<kind>B2</kind>
<date>20071120</date>
</document-id>
</publication-reference>
<application-reference appl-type="utility">
<document-id>
<country>US</country>
<doc-number>10611855</doc-number>
<date>20030703</date>
</document-id>
</application-reference>
<us-application-series-code>10</us-application-series-code>
<priority-claims>
<priority-claim sequence="01" kind="national">
<country>JP</country>
<doc-number>2003-055694</doc-number>
<date>20030303</date>
</priority-claim>
</priority-claims>
<us-term-of-grant>
<us-term-extension>762</us-term-extension>
</us-term-of-grant>
<classifications-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>H</section>
<class>04</class>
<subclass>Q</subclass>
<main-group>7</main-group>
<subgroup>20</subgroup>
<symbol-position>F</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20071120</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
</classifications-ipcr>
<classification-national>
<country>US</country>
<main-classification>370331</main-classification>
<further-classification>370345</further-classification>
<further-classification>370349</further-classification>
<further-classification>455445</further-classification>
</classification-national>
<invention-title id="d0e71">Packet communication system, communication network, and method for selecting IP address in mobile node</invention-title>
<references-cited>
<citation>
<patcit num="00001">
<document-id>
<country>US</country>
<doc-number>6578085</doc-number>
<kind>B1</kind>
<name>Khalil et al.</name>
<date>20030600</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>709241</main-classification></classification-national>
</citation>
<citation>
<patcit num="00002">
<document-id>
<country>US</country>
<doc-number>6917605</doc-number>
<kind>B2</kind>
<name>Kakemizu et al.</name>
<date>20050700</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370338</main-classification></classification-national>
</citation>
<citation>
<patcit num="00003">
<document-id>
<country>US</country>
<doc-number>7031709</doc-number>
<kind>B2</kind>
<name>Watanabe et al.</name>
<date>20060400</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>455436</main-classification></classification-national>
</citation>
<citation>
<patcit num="00004">
<document-id>
<country>US</country>
<doc-number>7092986</doc-number>
<kind>B2</kind>
<name>Wang</name>
<date>20060800</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>709202</main-classification></classification-national>
</citation>
<citation>
<patcit num="00005">
<document-id>
<country>US</country>
<doc-number>7103023</doc-number>
<kind>B2</kind>
<name>Sakakura</name>
<date>20060900</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370331</main-classification></classification-national>
</citation>
<citation>
<patcit num="00006">
<document-id>
<country>US</country>
<doc-number>2002/0009066</doc-number>
<kind>A1</kind>
<name>Shimizu et al.</name>
<date>20020100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370338</main-classification></classification-national>
</citation>
<citation>
<patcit num="00007">
<document-id>
<country>US</country>
<doc-number>2002/0191576</doc-number>
<kind>A1</kind>
<name>Inoue et al.</name>
<date>20021200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370338</main-classification></classification-national>
</citation>
<citation>
<patcit num="00008">
<document-id>
<country>US</country>
<doc-number>2003/0026241</doc-number>
<kind>A1</kind>
<name>Ono et al.</name>
<date>20030200</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00009">
<document-id>
<country>US</country>
<doc-number>2003/0158938</doc-number>
<kind>A1</kind>
<name>Adatrao et al.</name>
<date>20030800</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>709225</main-classification></classification-national>
</citation>
<citation>
<patcit num="00010">
<document-id>
<country>US</country>
<doc-number>2003/0224788</doc-number>
<kind>A1</kind>
<name>Leung et al.</name>
<date>20031200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>4554351</main-classification></classification-national>
</citation>
<citation>
<patcit num="00011">
<document-id>
<country>US</country>
<doc-number>2003/0229697</doc-number>
<kind>A1</kind>
<name>Borella</name>
<date>20031200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>709226</main-classification></classification-national>
</citation>
<citation>
<patcit num="00012">
<document-id>
<country>US</country>
<doc-number>2004/0029555</doc-number>
<kind>A1</kind>
<name>Tsai et al.</name>
<date>20040200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>455403</main-classification></classification-national>
</citation>
<citation>
<patcit num="00013">
<document-id>
<country>US</country>
<doc-number>2004/0081118</doc-number>
<kind>A1</kind>
<name>Mukherjee et al.</name>
<date>20040400</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370328</main-classification></classification-national>
</citation>
<citation>
<patcit num="00014">
<document-id>
<country>US</country>
<doc-number>2004/0202183</doc-number>
<kind>A1</kind>
<name>Thubert et al.</name>
<date>20041000</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>37039531</main-classification></classification-national>
</citation>
<citation>
<patcit num="00015">
<document-id>
<country>US</country>
<doc-number>2005/0020265</doc-number>
<kind>A1</kind>
<name>Funabiki et al.</name>
<date>20050100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>455436</main-classification></classification-national>
</citation>
<citation>
<patcit num="00016">
<document-id>
<country>JP</country>
<doc-number>2003-18192</doc-number>
<date>20010600</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<nplcit num="00017">
<othercit>D. Johnson, C. Perkins, and J. Arkko, “Mobility Support in IPv6”, IETF Mobile IP Working Group, Jan. 20, 2003, pp. 1-126.</othercit>
</nplcit>
<category>cited by other</category>
</citation>
</references-cited>
<number-of-claims>9</number-of-claims>
<us-exemplary-claim>1</us-exemplary-claim>
<us-field-of-classification-search>
<classification-national>
<country>US</country>
<main-classification>4554321</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>455433</main-classification>
</classification-national>
</us-field-of-classification-search>
<figures>
<number-of-drawing-sheets>12</number-of-drawing-sheets>
<number-of-figures>12</number-of-figures>
</figures>
<us-related-documents>
<related-publication>
<document-id>
<country>US</country>
<doc-number>20040176095</doc-number>
<kind>A1</kind>
<date>20040909</date>
</document-id>
</related-publication>
</us-related-documents>
<parties>
<applicants>
<applicant sequence="001" app-type="applicant-inventor" designation="us-only">
<addressbook>
<last-name>Yamada</last-name>
<first-name>Mariko</first-name>
<address>
<city>Tokyo</city>
<country>JP</country>
</address>
</addressbook>
<nationality>
<country>JP</country>
</nationality>
<residence>
<country>JP</country>
</residence>
</applicant>
<applicant sequence="002" app-type="applicant-inventor" designation="us-only">
<addressbook>
<last-name>Yano</last-name>
<first-name>Masashi</first-name>
<address>
<city>Yokohama</city>
<country>JP</country>
</address>
</addressbook>
<nationality>
<country>JP</country>
</nationality>
<residence>
<country>JP</country>
</residence>
</applicant>
<applicant sequence="003" app-type="applicant-inventor" designation="us-only">
<addressbook>
<last-name>Date</last-name>
<first-name>Akira</first-name>
<address>
<city>Kunitachi</city>
<country>JP</country>
</address>
</addressbook>
<nationality>
<country>JP</country>
</nationality>
<residence>
<country>JP</country>
</residence>
</applicant>
<applicant sequence="004" app-type="applicant-inventor" designation="us-only">
<addressbook>
<last-name>Oishi</last-name>
<first-name>Takumi</first-name>
<address>
<city>Kokubunji</city>
<country>JP</country>
</address>
</addressbook>
<nationality>
<country>JP</country>
</nationality>
<residence>
<country>JP</country>
</residence>
</applicant>
</applicants>
<agents>
<agent sequence="01" rep-type="attorney">
<addressbook>
<orgname>Reed Smith LLP</orgname>
<address>
<country>unknown</country>
</address>
</addressbook>
</agent>
<agent sequence="02" rep-type="attorney">
<addressbook>
<last-name>Fisher, Esq.</last-name>
<first-name>Stanley P.</first-name>
<address>
<country>unknown</country>
</address>
</addressbook>
</agent>
<agent sequence="03" rep-type="attorney">
<addressbook>
<last-name>Marquez, Esq.</last-name>
<first-name>Juan Carlos A.</first-name>
<address>
<country>unknown</country>
</address>
</addressbook>
</agent>
</agents>
</parties>
<assignees>
<assignee>
<addressbook>
<orgname>Hitachi, Ltd.</orgname>
<role>03</role>
<address>
<city>Tokyo</city>
<country>JP</country>
</address>
</addressbook>
</assignee>
</assignees>
<examiners>
<primary-examiner>
<last-name>Eng</last-name>
<first-name>George</first-name>
<department>2617</department>
</primary-examiner>
<assistant-examiner>
<last-name>Miller</last-name>
<first-name>Brandon J.</first-name>
</assistant-examiner>
</examiners>
</us-bibliographic-data-grant>
<abstract id="abstract">
<p id="p-0001" num="0000">The invention provides a method for selecting a communication IP address whereby traffic of a network can be reduced and a session with the partner of communication can be maintained even when the mobile node has moved. The method prescribes provision of means for judging a state of a foreign network to which the mobile node is connected, and means of monitoring an IP address that an application having been started by the mobile node is using for communication, and enables selection of the mobile IP address so that the mobile node can maintain the session surely even in a visited foreign network.</p>
</abstract>
<drawings id="DRAWINGS">
<figure id="Fig-EMI-D00000" num="00000">
<img id="EMI-D00000" he="102.53mm" wi="178.31mm" file="US07298720-20071120-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00001" num="00001">
<img id="EMI-D00001" he="191.26mm" wi="129.12mm" orientation="landscape" file="US07298720-20071120-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00002" num="00002">
<img id="EMI-D00002" he="203.79mm" wi="159.17mm" orientation="landscape" file="US07298720-20071120-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00003" num="00003">
<img id="EMI-D00003" he="249.60mm" wi="168.49mm" file="US07298720-20071120-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00004" num="00004">
<img id="EMI-D00004" he="173.48mm" wi="148.42mm" file="US07298720-20071120-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00005" num="00005">
<img id="EMI-D00005" he="125.14mm" wi="136.06mm" file="US07298720-20071120-D00005.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00006" num="00006">
<img id="EMI-D00006" he="132.33mm" wi="157.06mm" file="US07298720-20071120-D00006.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00007" num="00007">
<img id="EMI-D00007" he="151.13mm" wi="146.30mm" file="US07298720-20071120-D00007.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00008" num="00008">
<img id="EMI-D00008" he="214.38mm" wi="165.52mm" file="US07298720-20071120-D00008.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00009" num="00009">
<img id="EMI-D00009" he="177.12mm" wi="129.12mm" orientation="landscape" file="US07298720-20071120-D00009.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00010" num="00010">
<img id="EMI-D00010" he="116.92mm" wi="89.75mm" file="US07298720-20071120-D00010.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00011" num="00011">
<img id="EMI-D00011" he="220.13mm" wi="173.40mm" file="US07298720-20071120-D00011.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00012" num="00012">
<img id="EMI-D00012" he="207.94mm" wi="171.37mm" orientation="landscape" file="US07298720-20071120-D00012.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
</drawings>
<description id="description">
<?BRFSUM description="Brief Summary" end="lead"?>
<heading id="h-0001" level="1">BACKGROUND OF THE INVENTION</heading>
<p id="p-0002" num="0001">1. Field of the Invention</p>
<p id="p-0003" num="0002">This invention relates to a communication system that uses mobile IP, and especially relates to a method for selecting a communication IP address in a mobile node that moved from its home network to a foreign network.</p>
<p id="p-0004" num="0003">2. Description of the Related Art</p>
<p id="p-0005" num="0004">In the Internet, it is common that when a mobile node moved among networks, the mobile node newly acquires an IP address in a network to which it moved (hereinafter sometimes referred to as “visited”) and performs communication with it.</p>
<p id="p-0006" num="0005">On the other hand, IETF is now standardizing a method whereby a mobile node performs communication in a visited network to which it moved (hereinafter a network being referred to as a “foreign network”) without altering the IP address of the mobile node by using the IP address that has been assigned to the mobile node (hereinafter referred to as a “home address”) in a network to which the mobile node is usually attached (hereinafter referred to as a “home network”).</p>
<p id="p-0007" num="0006">In “Mobility Support in IPv6” (David B. Johnson, draft-ietf-mobileip-ipv6-20.txt, Jan/2003) that is being examined in IETF (hereinafter referred to as a “mobile IP”), a terminal that wishes to communicate with a mobile node sets a destination IP address as the mobile node's home address and sends an IP packet. The IP packet that was routed to the mobile node's home address is captured by the mobile node's home agent and is transferred after being encapsulated to a foreign network visited by the mobile node.</p>
<p id="p-0008" num="0007">In order to encapsulate and forward the IP packet that was received, the home agent receives a binding update from the mobile node and manages association between the mobile node's home address and the IP address that the mobile node acquired in the foreign network (hereinafter referred to as a “care-of address”). This procedure makes it possible for the mobile node to receive the IP packet addressed to its home address in the foreign network. When communication starts between the mobile node and the terminal, the binding update will be sent to the terminal of a partner of communication from the mobile node; therefore, it is also possible for the mobile node and the terminal to communicate directly between each other henceforth not via the home agent but by using a routing header that is an extension header of IPv6. Moreover, if a home agent exists on a first foreign network that is a network visited by the mobile node, after the mobile node has moved to a second foreign network, it is also possible to forward a packet addressed to the mobile node to the mobile node residing in the second foreign network by sending the binding update to the first foreign network's home agent.</p>
<p id="h-0002" num="0000">[Non-Patent Literature 1]</p>
<p id="p-0009" num="0008">David D. Johnson et al. “Mobility Support in IPv6 draft-ietf-mobileip-ipv6-20.txt,” obtained online from IETF on Jan. 20, 2003, also available from the Internet &lt;http://www.ietf.org/internet-drafts/draft-ietf-mobileip-ipv6-20.txt&gt; [searched on Feb. 5, 2003]</p>
<p id="p-0010" num="0009">With the technology described above, the mobile node will be able to communicate with the terminal using its home address even when it has moved among networks. Moreover, the mobile node in a foreign network can select either its home address or the care-of address that was acquired in the foreign network as a communication address.</p>
<p id="p-0011" num="0010">For example, if the communication address is set to the mobile node's home address, the mobile node can receive a packet surely even when it moves from one network to another. However, in this case, since the IP packets are encapsulated and forwarded by the home agent to reach the mobile node, an overhead of communication is created. After the start of the communication, it is possible to eliminate the overhead of communication by sending the binding update to a partner of the communication and hence setting up route optimization. However, it is impossible to set up the route optimization from the time of start of the communication.</p>
<p id="p-0012" num="0011">On the other hand, in the case where the communication address is set to a care-of address, since the mobile node can directly communicate with the partner of communication, the overhead of communication can be eliminated. However, when the mobile node has left the first foreign network and moved to the second foreign network, IP packets addressed to the mobile node that have reached the first foreign network may not be forwarded to the second foreign network, and so there is the possibility that the mobile node may not be able to maintain a session with the partner of communication.</p>
<heading id="h-0003" level="1">SUMMARY OF THE INVENTION</heading>
<p id="p-0013" num="0012">It is the object of this invention to provide a communication system that uses a mobile IP, a communication network, and a method for selecting an IP address in a mobile node whereby a route can be optimized as much as possible and a session can be maintained even when the mobile node has moved from a foreign network to which the mobile node is currently attached to another foreign network,</p>
<p id="p-0014" num="0013">In order to achieve the above-mentioned object, the communication system is configured to have first and second packet communication devices that are arranged in at least first and second foreign networks, respectively, selected from among a plurality of foreign networks existing as networks visited by the mobile node, wherein when the mobile node has moved to the first foreign network, a first care-of address is given to the mobile node, when the mobile node has moved to the second foreign network, a second care-of address is given to the mobile node, respectively, and after the mobile node has moved from the first foreign network to the second foreign network, when a packet addressed to the first care-of address is transmitted, the first packet communication device forwards the packet to the second packet communication device.</p>
<p id="p-0015" num="0014">According to this invention, it becomes possible for the mobile node to select such a mobile IP address, as the communication address for communication with a terminal, that enables route optimization to be set up as much as possible while a communication session is maintained even when moving from the first foreign network to the second foreign network.</p>
<p id="p-0016" num="0015">Thereby, the overhead of communication that increases by processing of encapsulation can be reduced. Moreover, while the mobile node is staying at a foreign network where a temporarily available home agent exists, the mobile node can use that home agent as a temporary home agent, and the mobile node can receive packets that are not encapsulated. Therefore, the communication system can suppress increase of the load that accompanies processing encapsulated packets. Furthermore, even when the mobile node moves to another foreign network, it becomes possible for the mobile node to maintain a session with the partner of communication.</p>
<p id="p-0017" num="0016">In addition, when the mobile node moves among a plurality of foreign networks, a hand-over time can be kept constant by changing a home agent that is used temporarily and the overhead of communication can be reduced.</p>
<?BRFSUM description="Brief Summary" end="tail"?>
<?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?>
<description-of-drawings>
<heading id="h-0004" level="1">BRIEF DESCRIPTION OF THE DRAWINGS</heading>
<p id="p-0018" num="0017"><figref idref="DRAWINGS">FIG. 1</figref> is an illustration conceptually showing a network to which this invention is applied;</p>
<p id="p-0019" num="0018"><figref idref="DRAWINGS">FIG. 2</figref> is a block diagram showing an internal composition of the mobile node used in this invention;</p>
<p id="p-0020" num="0019"><figref idref="DRAWINGS">FIG. 3</figref> is a flowchart showing a processing flow from foreign network movement detection to address selection that is performed in the mobile node;</p>
<p id="p-0021" num="0020"><figref idref="DRAWINGS">FIG. 4</figref> is a flowchart showing a processing flow of binding management performed in the mobile node;</p>
<p id="p-0022" num="0021"><figref idref="DRAWINGS">FIG. 5</figref> is a conceptual diagram explaining the composition of a home agent list;</p>
<p id="p-0023" num="0022"><figref idref="DRAWINGS">FIG. 6</figref> is a conceptual diagram explaining the composition of a binding list;</p>
<p id="p-0024" num="0023"><figref idref="DRAWINGS">FIG. 7</figref> is a conceptual diagram explaining the composition of an on-communication address table;</p>
<p id="p-0025" num="0024"><figref idref="DRAWINGS">FIG. 8</figref> is a sequence diagram explaining a process in which a communication path in a foreign network is optimized;</p>
<p id="p-0026" num="0025"><figref idref="DRAWINGS">FIG. 9</figref> is a conceptual diagram for explaining a process in which a home agent is changed over;</p>
<p id="p-0027" num="0026"><figref idref="DRAWINGS">FIG. 10</figref> is a conceptual diagram explaining the composition of a home-agent change conditions setting table;</p>
<p id="p-0028" num="0027"><figref idref="DRAWINGS">FIG. 11</figref> is a flowchart showing a processing flow of changing a home agent that is performed in the mobile node; and</p>
<p id="p-0029" num="0028"><figref idref="DRAWINGS">FIG. 12</figref> is a view showing an example in which this invention is applied to a network such that a temporary home agent does not exist on a foreign network to which the mobile node is directly connected.</p>
</description-of-drawings>
<?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?>
<?DETDESC description="Detailed Description" end="lead"?>
<heading id="h-0005" level="1">DETAILED DESCRIPTION OF THE PREFERRED EMBODIMENTS</heading>
<p id="p-0030" num="0029">Hereafter, embodiments according to this invention will be described.</p>
<heading id="h-0006" level="1">First Embodiment</heading>
<p id="p-0031" num="0030">This invention will be described by giving an example where the mobile node registers the communication IP address dynamically at an IP address management server.</p>
<p id="p-0032" num="0031"><figref idref="DRAWINGS">FIG. 1</figref> is a view showing an example of the composition of a mobile IP communication system in which this invention is put into practice. The mobile IP communication system is composed of: a home agent (<b>102</b>), a terminal A (<b>109</b>) that communicates with a mobile node (<b>103</b>), an IP address management server that enables the terminal to resolve an address of the mobile node (<b>103</b>), a home network (<b>101</b>) to which the mobile node (<b>103</b>) is attached and that the home agent (<b>102</b>) of the mobile node (<b>103</b>) belongs to, a foreign network <b>1</b> (<b>104</b>) and a foreign network <b>2</b> (<b>106</b>) that are networks visited by the mobile node (<b>103</b>), etc.</p>
<p id="p-0033" num="0032">The home network (<b>101</b>), the foreign network <b>1</b> (<b>104</b>), the foreign network <b>2</b> (<b>106</b>), and a network that the terminal A (<b>109</b>) belongs to are connected with one another via the Internet (<b>110</b>). The terminal A (<b>109</b>) is assumed as a correspondent node of a mobile IP.</p>
<p id="p-0034" num="0033">First, the mobile node (<b>103</b>) registers its IP address at an IP address management server (<b>108</b>) in the home network (<b>101</b>). The terminal A (<b>109</b>) inquiries the IP address of the mobile node (<b>103</b>) to the IP address management server (<b>108</b>) and resolves the IP address of the mobile node (<b>103</b>). The communication terminal A (<b>109</b>) starts to communicate with the mobile node (<b>103</b>) using the IP address acquired from the IP address management server (<b>108</b>) as the destination IP address. As will be described below, the IP address management server (<b>108</b>) is capable of dynamically changing an association between an identifier of the mobile node (<b>103</b>) and an IP address based on notification from the mobile node (<b>103</b>).</p>
<p id="p-0035" num="0034"><figref idref="DRAWINGS">FIG. 2</figref> is a view showing the internal composition of the mobile node (<b>103</b>). The mobile node (<b>103</b>) has an OS (<b>403</b>) on its hardware (<b>402</b>). The OS (<b>403</b>) is assumed to have a packet transmission/reception processing part for transmitting/receiving IP packets (<b>407</b>) and a tunneling and routing header processing part for performing decapsulation of IP packets and the like (<b>406</b>) as well as basic OS functions (<b>405</b>).</p>
<p id="p-0036" num="0035">The mobile node (<b>103</b>) has also a mobile IP processing part (<b>404</b>) in addition to the hardware (<b>402</b>) and the OS (<b>403</b>).</p>
<p id="p-0037" num="0036">The mobile IP processing part (<b>404</b>) comprises: a movement detection processing part (<b>408</b>), a mobile IP message processing part (<b>409</b>), a binding management part (<b>410</b>), a home agent list (<b>411</b>), a binding list (<b>412</b>), and a mobile node information table (<b>413</b>).</p>
<p id="p-0038" num="0037">The mobile IP processing part (<b>404</b>) further comprises: an address selection processing part (<b>501</b>), a communication address management processing part (<b>502</b>), an on-communication address management table (<b>503</b>), a network status table (<b>504</b>), and a home-agent change processing part (<b>505</b>).</p>
<p id="p-0039" num="0038">The movement detection processing part (<b>408</b>) analyzes a router advertisement that is notified in a network to which the mobile node (<b>103</b>) is currently attached and judges whether the mobile node (<b>103</b>) has moved from a network. The movement detection processing part (<b>408</b>) further judges whether the first foreign network to which the mobile node (<b>103</b>) is currently connected can forward IP packets to a second foreign network in which the mobile node (<b>103</b>) is going to reside next. That is, when a home agent flag is on in a prefix information option of a router advertisement received from the second foreign network, a packet communication device capable of forwarding IP packets addressed to a care-of address, namely a home agent exists, and hence the movement detection processing part (<b>408</b>) judges that forwarding is possible; when the home agent flag is not on, it judges that the forwarding is impossible. The movement detection processing part (<b>408</b>) makes the network state table (<b>504</b>) reflect the judgment result.</p>
<p id="p-0040" num="0039">When the movement detection processing part (<b>408</b>) receives router advertisements sent from a plurality of routers or home agents, it specifies the routers or home agents that sent out the router advertisement based on link local addresses of source addresses of the respective router advertisements. If a home agent that set a home agent flag on and sent a router advertisement previously sends a router advertisement without setting the flag on, the movement detection processing part (<b>408</b>) judges that a network situation has changed and the home agent has become incapable of the forwarding. Note that in this specification a packet communication device capable of forwarding IP packets addressed to a care-of address is called a home agent, whereas a packet communication device incapable of the forwarding is called a router.</p>
<p id="p-0041" num="0040">The mobile IP message processing part (<b>409</b>) processes mobile IP messages, such as binding updates and binding acknowledgements.</p>
<p id="p-0042" num="0041">The binding management part (<b>410</b>) manages information as to which is a terminal under the binding with the mobile node (<b>103</b>). The home agent list (<b>411</b>) is a list of home agents each capable of providing a home agent function to the mobile node (<b>103</b>). As is illustrated in <figref idref="DRAWINGS">FIG. 5</figref>, the home agent list (<b>411</b>) contains at least a home agent's global IP address (<b>4111</b>), a home agent's link local address (<b>4112</b>), a home agent's priority (<b>4113</b>), and a home agent's lifetime (<b>4115</b>). The contents of the home agent list (<b>411</b>) are updated by analyzing the router advertisement in the movement detection processing part (<b>408</b>). For example, in the case where, as was described above, a home agent that notified a router advertisement with a home agent flag being on up to now notifies a router advertisement with the home agent flag not being on, it is judged that a network situation has changed and the home agent has become incapable of the forwarding, and thus the contents of the home agent list (<b>411</b>) are updated.</p>
<p id="p-0043" num="0042">The binding list (<b>412</b>) is a table for managing destinations to which the mobile node (<b>103</b>) sent the binding updates. As is illustrated in <figref idref="DRAWINGS">FIG. 6</figref>, the binding list (<b>412</b>) contains: a destination of the binding update (<b>4121</b>); a care-of address acquired in the current foreign network (<b>4122</b>); a home address (<b>4123</b>) of the mobile node (<b>103</b>); and a lifetime of the binding list (<b>4124</b>).</p>
<p id="p-0044" num="0043">The binding list (<b>412</b>) is updated by the mobile IP message processing part (<b>409</b>) and is managed by the binding management part (<b>410</b>). For example, the binding management part (<b>410</b>) judges whether it expired the life time recorded in the binding list (<b>412</b>) (timeout), and if the time is judged to be up, the binding management part (<b>410</b>) further judges whether the binding needs to be updated (continued) based on information of the on-communication address table.</p>
<p id="p-0045" num="0044">The mobile node information table (<b>413</b>) holds setting information of the mobile node (<b>103</b>), such as the home address of the mobile node (<b>103</b>) and the home agent address.</p>
<p id="p-0046" num="0045">The address selection processing part (<b>501</b>) selects an IP address to be used for communication by knowing the state of a network to which the mobile node (<b>103</b>) is connected.</p>
<p id="p-0047" num="0046">The communication address management processing part (<b>502</b>) manages the IP address that an application having been started in the mobile node (<b>103</b>) is using for communication.</p>
<p id="p-0048" num="0047">The on-communication address management table (<b>503</b>) is a list of IP addresses that applications having been started in the mobile node (<b>103</b>) are using for communication. The on-communication address management part (<b>503</b>) manages kinds of applications (<b>5031</b>) having been started by the mobile node (<b>103</b>) and the IP addresses that the applications (<b>5031</b>) use for IP communication (<b>5032</b>) in cooperation with the OS (<b>403</b>), as is illustrated in <figref idref="DRAWINGS">FIG. 7</figref>. The on-communication address management table (<b>503</b>) also contains an address attribute (<b>5033</b>) that indicates whether the IP address being used for communication is the home address of the mobile node (<b>103</b>) or a care-of address that the mobile node (<b>103</b>) acquired in a foreign network to which the mobile node (<b>103</b>) was previously attached.</p>
<p id="p-0049" num="0048"><figref idref="DRAWINGS">FIG. 3</figref> is a flowchart that shows a processing flow from movement detection to address selection processing that is executed in the mobile node (<b>103</b>).</p>
<p id="p-0050" num="0049">The mobile node (<b>103</b>) receives the router advertisement sent by either a router or a home agent in a subnet to which the mobile node (<b>103</b>) is currently attached (step <b>601</b>).</p>
<p id="p-0051" num="0050">The mobile node (<b>103</b>) acquires a prefix of the foreign network from a prefix information option contained in the router advertisement and compares it with a prefix of the home network of the mobile node (<b>103</b>). The mobile node (<b>103</b>) detects whether the mobile node (<b>103</b>) has moved between subnets from a result of this comparison result (step <b>602</b>).</p>
<p id="p-0052" num="0051">The mobile node (<b>103</b>) that detected the movement judges whether it is necessary to send the binding update to the foreign network to which the mobile node (<b>103</b>) was previously attached (step <b>603</b>). The judgment on the necessity of sending the binding update is performed by the use of the address attribute (<b>5033</b>) of the on-communication address management table (<b>503</b>). If the address attribute (<b>5033</b>) is the care-of address, the mobile node (<b>103</b>) judges that there is a necessity of sending it.</p>
<p id="p-0053" num="0052">If it is judged that it is necessary to send the binding update, the mobile node (<b>103</b>) specifies a network to which the binding update must be sent from the use IP address (<b>5032</b>) of the on-communication address management table. The mobile node (<b>103</b>) further specifies a home agent to which the binding update is sent based on a home agent address (HA address) (<b>411</b>) and a priority (<b>4113</b>) in the home agent list (<b>411</b>), and sends the binding update to the home agent of a foreign network in which the mobile node (<b>103</b>) previously resided (step <b>604</b>). If it is not necessary to send the binding update, the mobile node (<b>103</b>) does not send it.</p>
<p id="p-0054" num="0053">The mobile node (<b>103</b>) sends the binding update to the home agent (<b>102</b>) of the mobile node (<b>103</b>) (step <b>605</b>).</p>
<p id="p-0055" num="0054">The mobile node (<b>103</b>) judges whether a home agent (<b>105</b>) on the foreign network <b>1</b> (<b>104</b>) to which the mobile node is currently connected has a function of forwarding a packet that was delivered to the current care-of address to the foreign network <b>2</b> (<b>107</b>) based on information in the network status table (<b>504</b>) (step <b>606</b>).</p>
<p id="p-0056" num="0055">If the judgment is that the forwarding is impossible, the mobile node (<b>103</b>) selects the home address as the communication address (step <b>607</b>); if the judgment is that the forwarding is possible, the mobile node (<b>103</b>) selects a current care-of address as the communication address (step <b>608</b>).</p>
<p id="p-0057" num="0056"><figref idref="DRAWINGS">FIG. 4</figref> is a flowchart showing a processing flow of the binding management performed in the mobile node (<b>103</b>).</p>
<p id="p-0058" num="0057">When lifetime of an IP address (<b>4124</b>) registered in the binding list (<b>412</b>) runs out (step <b>701</b>), the mobile node (<b>103</b>) searches the on-communication address management table (<b>503</b>) to detect a use IP address whose address attribute is a care-of address (step <b>702</b>).</p>
<p id="p-0059" num="0058">The mobile node (<b>103</b>) judges whether it is necessary to send the binding update to a destination whose binding time runs-out (<b>4121</b>) (step <b>703</b>). If a network part of a destination (<b>4121</b>) whose binding time runs out agrees with a network of the IP address detected at step <b>702</b>, an application is performing communication using a care-of address that designates a destination whose binding time runs out as the home agent. In this case, the mobile node (<b>103</b>) sends the binding update to an address of the binding list (step <b>704</b>). If the agreement is not obtained, the mobile node (<b>103</b>) does not send the binding update.</p>
<p id="p-0060" num="0059">The mobile node (<b>103</b>) updates the binding list (step <b>705</b>). In the case where the binding update was not sent, the corresponding binding list is deleted; in the case where the binding update is sent, the lifetime of the corresponding binding list is updated in conformity to the lifetime of the sent binding update. The above processing flow will be explained referring to <figref idref="DRAWINGS">FIG. 1</figref> again. Here it is assumed that the mobile node (<b>103</b>) has already moved from the home network (<b>104</b>) to the foreign network <b>1</b> and is moving from there to the foreign network <b>2</b>.</p>
<p id="p-0061" num="0060">The mobile node (<b>103</b>) selects the care-of address as the communication address in the foreign network <b>1</b> (<b>104</b>). Moreover, the mobile node (<b>103</b>) registers the care-of address at the IP address management server (<b>108</b>), and this procedure makes it possible for the terminal A (<b>109</b>) that communicates with the mobile address (<b>103</b>) to communicate with the mobile node (<b>103</b>) residing in the foreign network <b>1</b> (<b>104</b>) using a communication path that has been optimized from the start of the communication (Path <b>111</b>).</p>
<p id="p-0062" num="0061">Moreover, when the mobile node (<b>103</b>) has moved to the foreign network <b>2</b> (<b>106</b>), this mobile node (<b>103</b>) sends the binding update to the home agent (<b>105</b>) on the foreign network <b>1</b> (<b>104</b>). Thereby, the home agent (<b>105</b>) belonging to the foreign network <b>1</b> (<b>104</b>) is enabled to capture IP packets sent to the mobile node's care-of address (Path <b>112</b>) and forward it to the mobile node in the foreign network <b>2</b> (<b>106</b>) (Path <b>113</b>); therefore a communication session can be maintained. <figref idref="DRAWINGS">FIG. 8</figref> shows a communication sequence in which the mobile node (<b>103</b>) communicates with the terminal A (<b>109</b>) by the method for selecting an IP address according to this invention. Here, the above-mentioned communication sequence will be explained referring to <figref idref="DRAWINGS">FIG. 1</figref> and <figref idref="DRAWINGS">FIG. 8</figref>. The mobile node (<b>103</b>) receives the router advertisement in the foreign network <b>1</b> (<b>104</b>), detects that it has moved between the networks (Event <b>1101</b>), and sends the binding update to the home agent (<b>102</b>) of the mobile node (<b>103</b>) (Event <b>1102</b>).</p>
<p id="p-0063" num="0062">The mobile node (<b>103</b>) judges from the received router advertisement that the home agent (<b>105</b>) exists on the foreign network <b>1</b> (<b>104</b>), and packets addressed to the care-of address can be forwarded to another network. Then the mobile node (<b>103</b>) selects the care-of address as the communication address. The mobile node (<b>103</b>) registers the selected communication address at the IP address management server (Event <b>1103</b>). The terminal A (<b>109</b>) that is going to start communication with the mobile node (<b>103</b>) inquires the mobile node's address at the IP address management server (<b>108</b>) (Event <b>1104</b>) and resolves the address (Event <b>1105</b>). The terminal A (<b>109</b>) sends IP packets to the care-of address of the mobile node acquired from the IP address management server (Event <b>111</b>).</p>
<p id="p-0064" num="0063">Here, the mobile node (<b>103</b>) moves to the foreign network <b>2</b> (<b>106</b>) from the foreign network <b>1</b> (<b>104</b>). The mobile node (<b>103</b>) receives the router advertisement in the visited foreign network <b>2</b> (<b>106</b>) (Event <b>1106</b>) and detects the movement.</p>
<p id="p-0065" num="0064">The mobile node (<b>103</b>) sends the binding update to the home agent (<b>102</b>) existing on the home network (<b>101</b>) of the mobile node (<b>103</b>) and the home agent (<b>105</b>) on the foreign network <b>1</b> (<b>104</b>) (Events <b>1107</b>, <b>1108</b>), and registers the current care-of address at the home agents (<b>102</b>, <b>105</b>).</p>
<p id="p-0066" num="0065">The IP packet sent to the care-of address of the foreign network <b>1</b> (<b>104</b>) from the communication terminal A (<b>109</b>) is captured (Event <b>112</b>) and encapsulated by the home agent (<b>105</b>) on the foreign network <b>1</b> (<b>104</b>), and is forwarded to the mobile node (<b>103</b>) existing on the foreign network <b>2</b> (<b>106</b>) (Event <b>113</b>).</p>
<heading id="h-0007" level="1">Second Embodiment</heading>
<p id="p-0067" num="0066">This invention will be described by taking an example where the mobile node (<b>103</b>) moves among a plurality of foreign networks one by one. <figref idref="DRAWINGS">FIG. 9</figref> illustrates how the mobile node (<b>103</b>) is moving among the plurality of networks. When the mobile node (<b>103</b>) moved from a foreign network <b>1</b> in which exists a home agent (<b>105</b>) that the mobile node is using temporarily to the plurality of networks, and reached a foreign networks N (<b>1201</b>), namely an N-th foreign network (N: an integer more than 2, as counted from the foreign network <b>1</b>) in which the mobile node (<b>103</b>) resides, in order to eliminate the overhead of communication caused by packets passing through the temporary home agent (<b>105</b>) (Path <b>1203</b>) it is also possible for the mobile node (<b>103</b>) to perform communication by changing the temporary home agent to a neighboring home agent (<b>1202</b>) (Path <b>1204</b>). Hereafter, this example will be explained.</p>
<p id="p-0068" num="0067">Home agent change is done by the mobile node (<b>103</b>) sending the binding update message (Path <b>1205</b>). A user of the mobile node can set up conditions for changing a temporary home agent as will be described below.</p>
<p id="p-0069" num="0068"><figref idref="DRAWINGS">FIG. 10</figref> shows an example of the condition that the user of the mobile node sets up in advance. For home-agent change judgment conditions (<b>1301</b>), conditions for performing home-agent change judgment processing (<b>1302</b>) and values of the number of hops made with temporary home agents (<b>1303</b>), delay (<b>1304</b>), etc. are specified as conditions when the change is performed. Note that defaults values of these conditions may have been set in advance and the user may be allowed to change them according to the user's preference.</p>
<p id="p-0070" num="0069"><figref idref="DRAWINGS">FIG. 11</figref> shows a processing flow of changing a home agent performed in the mobile node (<b>103</b>). The mobile node (<b>103</b>) judges whether a temporary communication path between the home agent (<b>105</b>) and the mobile node (<b>103</b>) that is currently being used satisfies the conditions under which the home-agent change is performed based on the change judgment conditions that have been set in advance (<b>1301</b>) (step <b>1401</b>). If the conditions are not satisfied, the home-agent change processing is not performed.</p>
<p id="p-0071" num="0070">If the conditions are satisfied, the mobile node (<b>103</b>) judges from the router advertisement whether a temporarily available home agent exists on the foreign network to which the mobile node (<b>103</b>) is currently attached (step <b>1402</b>). If the temporary home agent can be used, a communication path with the terminal A is changed to the temporary home agent (<b>1202</b>) existing on the foreign network to which the mobile node (<b>103</b>) is currently attached (step <b>1403</b>).</p>
<p id="p-0072" num="0071">If a temporarily available home agent does not exist, the mobile node (<b>103</b>) compares which is prioritized, communication via the temporary home agent (<b>105</b>) that is currently being used or communication via the home agent belonging to the home network (<b>101</b>) of the mobile node (<b>103</b>) (step <b>1404</b>).</p>
<p id="p-0073" num="0072">If the communication via the home agent (<b>102</b>) belonging to the home network (<b>101</b>) of the mobile node (<b>103</b>) is judged to be prioritized (step <b>1405</b>), the communication path is changed to a path via the home agent (<b>102</b>) belonging to the home network (<b>101</b>) of the mobile node (<b>103</b>) (step <b>1406</b>). If the communication via the home agent that is currently being used (<b>102</b>) is judged to be prioritized, home-agent change processing is not performed.</p>
<p id="p-0074" num="0073">When the home agent that is currently being used is changed to the temporary home agent (<b>1202</b>) of a foreign network N (<b>1201</b>) to which the mobile node (<b>103</b>) is currently attached, a normal binding update message is sent to the terminal A (<b>109</b>). When that home agent is changed to the home agent (<b>102</b>) belonging to the home network (<b>101</b>) of the mobile node (<b>103</b>), a binding update message of an alternate care-of address added with the home address of the mobile node (<b>103</b>) is sent to the home agent (<b>102</b>) belonging to the home network (<b>101</b>) of the mobile node (<b>103</b>).</p>
<heading id="h-0008" level="1">Third Embodiment</heading>
<p id="p-0075" num="0074">An example in which this invention is applied in the case where a home agent does not exist on a foreign network to which the mobile node (<b>103</b>) is directly connected but a home agent exists on a foreign network that is upstream from that foreign network.</p>
<p id="p-0076" num="0075"><figref idref="DRAWINGS">FIG. 12</figref> shows an example where the temporary home agent (<b>105</b>) exists upstream from a foreign network <b>1</b>-<b>1</b> (<b>1501</b>) to which the mobile node (<b>103</b>) is directly connected. The foreign network <b>1</b>-<b>1</b> (<b>1501</b>) and a foreign network <b>1</b>-<b>2</b> (<b>1502</b>) have a hierarchical structure of connection such that the two are connected to a lower layer of the foreign network <b>1</b> (<b>104</b>).</p>
<p id="p-0077" num="0076">The temporary home agent (<b>105</b>) is arranged in the foreign network <b>1</b> (<b>104</b>) that is located in the upper level of the foreign network <b>1</b>-<b>1</b> (<b>1501</b>) and the foreign network <b>1</b>-<b>2</b> (<b>1502</b>). Thereby, the data addressed to the mobile node (<b>103</b>) reaches the mobile node (<b>103</b>) surely via the foreign network <b>1</b> (<b>104</b>) where the temporary home agent (<b>105</b>) exists, and consequently it becomes possible to capture packets sent to the mobile node (<b>103</b>) from the terminal A (<b>109</b>) as in the case of the temporary home agent (<b>105</b>) described in the first embodiment.</p>
<p id="p-0078" num="0077">Moreover, for the router advertisement sent out in the foreign network <b>1</b>-<b>1</b> (<b>1501</b>), a router advertisement of mobile IP extension, and an address of the temporary home agent (<b>105</b>) existing on the foreign network <b>1</b> (<b>104</b>) is set as a prefix information option. Thereby, the mobile node (<b>103</b>) can recognize existence of the temporary home agent (<b>105</b>) arranged upstream from the foreign network <b>1</b>-<b>1</b> (<b>1501</b>). In this way, the mobile node (<b>103</b>) can communicate with the terminal A (<b>109</b>) using the same method as was described in the first embodiment.</p>
<?DETDESC description="Detailed Description" end="tail"?>
</description>
<us-claim-statement>What is claimed is:</us-claim-statement>
<claims id="claims">
<claim id="CLM-00001" num="00001">
<claim-text>1. A packet communication system comprising packet communication devices that are arranged in a plurality of foreign networks, respectively, and that are at least part of foreign networks existing as networks visited by a mobile node, wherein
<claim-text>when the mobile node moved among the plurality of foreign networks, if a packet communication device is arranged in a visited foreign network, the mobile node is given by the packet communication device a care-of address that corresponds to the visited foreign network in a one to one manner,</claim-text>
<claim-text>the mobile node continuously sends information pertinent to an updated care-of address given in the most recently visited foreign network, after moving through at least three foreign networks, to at least one of the packet communication devices arranged in the at least three foreign networks in which the mobile node visited previously, and</claim-text>
<claim-text>a packet that is sent from a corresponding node designated to the mobile node at a care-of-address given in a respective previously visited foreign network is transferred from the packet communication device of the respective previously visited foreign network directly to the updated care-of-address.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00002" num="00002">
<claim-text>2. The packet communication system according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein
<claim-text>at at least one point of time selected from a group consisting of points of time when applications are started in the mobile node and points of time when the applications having been started in the mobile node start to exchange packets via the Internet, the mobile node sends continuously information pertinent to its care-of address that is acquired when, after residence in one foreign network, the mobile node has moved to another foreign network to a packet communication device that was in service at the start of the application and is a packet communication device existing on the foreign network in which the mobile node resided.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00003" num="00003">
<claim-text>3. The packet communication system according to <claim-ref idref="CLM-00002">claim 2</claim-ref>, wherein the mobile node stops continuation of sending of the information to the packet communication device that was in service at the start of the application after the application is ended.</claim-text>
</claim>
<claim id="CLM-00004" num="00004">
<claim-text>4. The packet communication system according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the packet communication device that will be a target to which the information is sent continuously is selected in correspondence with at least either a state of or a communication purpose of the foreign network in which the moved mobile node resides.</claim-text>
</claim>
<claim id="CLM-00005" num="00005">
<claim-text>5. The packet communication system according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein when the number of hops between the packet communication device when the information started to be transmitted and the packet communication device existing on the foreign network in which the mobile node resides exceeds a predetermined value, continuation of sending of the information is stopped.</claim-text>
</claim>
<claim id="CLM-00006" num="00006">
<claim-text>6. The packet communication system according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, further comprising conditions setting means that allows the user of the mobile node to set conditions in advance, wherein when the conditions being set by the condition setting means are satisfied, continuation of sending of the information is stopped.</claim-text>
</claim>
<claim id="CLM-00007" num="00007">
<claim-text>7. A communication network comprising packet communication devices that are arranged in a plurality of foreign networks, respectively, and that are at least part of foreign networks existing as networks visited by a mobile node, wherein
<claim-text>when the mobile node moved among the plurality of foreign networks, if the packet communication devices are arranged in the visited foreign networks, the mobile node is given by the packet communication device a care-of address corresponding to each of the visited foreign networks in a one to one manner,</claim-text>
<claim-text>after moving through at least three foreign networks, information pertinent to an updated care-of address given by the most recently visited foreign network is continuously sent from the mobile node to at least one of the packet communication devices arranged on each the at least three foreign networks in which the mobile node visited previously, and</claim-text>
<claim-text>a packet that is sent from a corresponding node designated to the mobile node at a care-of-address given in a respective previously visited foreign network is transferred from the packet communication device of the respective previously visited foreign network directly to the updated care-of-address.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00008" num="00008">
<claim-text>8. A method for selecting an IP address in a mobile node comprising the steps of:
<claim-text>arranging packet communication devices in a plurality of foreign networks that are at least part of foreign networks existing as networks visited by the mobile node, respectively;</claim-text>
<claim-text>when the mobile node moves among the plurality of foreign networks, if a packet communication device is arranged in a visited foreign network, giving the mobile node a care-of address that corresponds to the visited foreign network in a one to one manner;</claim-text>
<claim-text>after the mobile node moved through at least three foreign networks, sending information pertinent of an updated care-of address given in the most recently visited foreign network continuously from the mobile node to at least one of the packet communication devices arranged in the at least three foreign networks in which the mobile node visited previously, and</claim-text>
<claim-text>transferring a packet that is sent from a corresponding node designated to the mobile node at a care-of-address given in a respective previously visited foreign network from the packet communication device of the respective previously visited foreign network directly to the updated care-of-address.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00009" num="00009">
<claim-text>9. The packet communication system according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the mobile node sends the updated care-of-address given in the most recently visited foreign network to packet communication devices of all previously visited foreign networks.</claim-text>
</claim>
</claims>
</us-patent-grant>
