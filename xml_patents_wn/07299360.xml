<us-patent-grant lang="EN" dtd-version="v4.2 2006-08-23" file="US07299360-20071120.XML" status="PRODUCTION" id="us-patent-grant" country="US" date-produced="20071106" date-publ="20071120">
<us-bibliographic-data-grant>
<publication-reference>
<document-id>
<country>US</country>
<doc-number>07299360</doc-number>
<kind>B2</kind>
<date>20071120</date>
</document-id>
</publication-reference>
<application-reference appl-type="utility">
<document-id>
<country>US</country>
<doc-number>10735898</doc-number>
<date>20031216</date>
</document-id>
</application-reference>
<us-application-series-code>10</us-application-series-code>
<us-term-of-grant>
<us-term-extension>789</us-term-extension>
<disclaimer>
<text>This patent is subject to a terminal disclaimer.</text>
</disclaimer>
</us-term-of-grant>
<classifications-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>H</section>
<class>04</class>
<subclass>L</subclass>
<main-group>9</main-group>
<subgroup>00</subgroup>
<symbol-position>F</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20071120</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>H</section>
<class>04</class>
<subclass>L</subclass>
<main-group>9</main-group>
<subgroup>32</subgroup>
<symbol-position>L</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20071120</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>G</section>
<class>06</class>
<subclass>K</subclass>
<main-group>9</main-group>
<subgroup>00</subgroup>
<symbol-position>L</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20071120</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
</classifications-ipcr>
<classification-national>
<country>US</country>
<main-classification>713182</main-classification>
<further-classification>713186</further-classification>
<further-classification>713192</further-classification>
<further-classification>382125</further-classification>
</classification-national>
<invention-title id="d0e55">Method and system for fingerprint template matching</invention-title>
<references-cited>
<citation>
<patcit num="00001">
<document-id>
<country>US</country>
<doc-number>4135147</doc-number>
<kind>A</kind>
<name>Riganati et al.</name>
<date>19790100</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00002">
<document-id>
<country>US</country>
<doc-number>4151512</doc-number>
<kind>A</kind>
<name>Riganati et al.</name>
<date>19790400</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00003">
<document-id>
<country>US</country>
<doc-number>4185270</doc-number>
<kind>A</kind>
<name>Fischer II et al.</name>
<date>19800100</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00004">
<document-id>
<country>US</country>
<doc-number>4438824</doc-number>
<kind>A</kind>
<name>Mueller-Schloer</name>
<date>19840300</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00005">
<document-id>
<country>US</country>
<doc-number>4532508</doc-number>
<kind>A</kind>
<name>Ruell</name>
<date>19850700</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00006">
<document-id>
<country>US</country>
<doc-number>4582985</doc-number>
<kind>A</kind>
<name>LÃ¶fberg</name>
<date>19860400</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00007">
<document-id>
<country>US</country>
<doc-number>4646352</doc-number>
<kind>A</kind>
<name>Asai et al.</name>
<date>19870200</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00008">
<document-id>
<country>US</country>
<doc-number>4783823</doc-number>
<kind>A</kind>
<name>Tasaki et al.</name>
<date>19881100</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00009">
<document-id>
<country>US</country>
<doc-number>4993068</doc-number>
<kind>A</kind>
<name>Piosenka et al.</name>
<date>19910200</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00010">
<document-id>
<country>US</country>
<doc-number>5144680</doc-number>
<kind>A</kind>
<name>Kobayashi et al.</name>
<date>19920900</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00011">
<document-id>
<country>US</country>
<doc-number>5268963</doc-number>
<kind>A</kind>
<name>Monroe et al.</name>
<date>19931200</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00012">
<document-id>
<country>US</country>
<doc-number>5280527</doc-number>
<kind>A</kind>
<name>Gullman et al.</name>
<date>19940100</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00013">
<document-id>
<country>US</country>
<doc-number>5363453</doc-number>
<kind>A</kind>
<name>Gagne et al.</name>
<date>19941100</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00014">
<document-id>
<country>US</country>
<doc-number>5384846</doc-number>
<kind>A</kind>
<name>Berson et al.</name>
<date>19950100</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00015">
<document-id>
<country>US</country>
<doc-number>5448045</doc-number>
<kind>A</kind>
<name>Clark</name>
<date>19950900</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>235382</main-classification></classification-national>
</citation>
<citation>
<patcit num="00016">
<document-id>
<country>US</country>
<doc-number>5450491</doc-number>
<kind>A</kind>
<name>McNair</name>
<date>19950900</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00017">
<document-id>
<country>US</country>
<doc-number>5469506</doc-number>
<kind>A</kind>
<name>Berson et al.</name>
<date>19951100</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00018">
<document-id>
<country>US</country>
<doc-number>5509083</doc-number>
<kind>A</kind>
<name>Abtahi et al.</name>
<date>19960400</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00019">
<document-id>
<country>US</country>
<doc-number>5541994</doc-number>
<kind>A</kind>
<name>Tomko et al.</name>
<date>19960700</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00020">
<document-id>
<country>US</country>
<doc-number>5546463</doc-number>
<kind>A</kind>
<name>Caputo et al.</name>
<date>19960800</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>713159</main-classification></classification-national>
</citation>
<citation>
<patcit num="00021">
<document-id>
<country>US</country>
<doc-number>5559504</doc-number>
<kind>A</kind>
<name>Itsumi et al.</name>
<date>19960900</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00022">
<document-id>
<country>US</country>
<doc-number>5581630</doc-number>
<kind>A</kind>
<name>Bonneau, Jr.</name>
<date>19961200</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00023">
<document-id>
<country>US</country>
<doc-number>5613012</doc-number>
<kind>A</kind>
<name>Hoffman et al.</name>
<date>19970300</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00024">
<document-id>
<country>US</country>
<doc-number>5613014</doc-number>
<kind>A</kind>
<name>Eshera et al.</name>
<date>19970300</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00025">
<document-id>
<country>EP</country>
<doc-number>0 050 842</doc-number>
<date>19820500</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00026">
<document-id>
<country>EP</country>
<doc-number>0 159 037</doc-number>
<date>19851000</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00027">
<document-id>
<country>EP</country>
<doc-number>0 507 319</doc-number>
<date>19921000</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00028">
<document-id>
<country>EP</country>
<doc-number>0 513 612</doc-number>
<date>19921100</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00029">
<document-id>
<country>EP</country>
<doc-number>0 791 899</doc-number>
<date>19970800</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00030">
<document-id>
<country>GB</country>
<doc-number>2 256 170</doc-number>
<date>19921200</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00031">
<document-id>
<country>WO</country>
<doc-number>WO 93/17388</doc-number>
<date>19930900</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00032">
<document-id>
<country>WO</country>
<doc-number>WO 99/26184</doc-number>
<date>19990500</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<nplcit num="00033">
<othercit>Kim et al., âAutomatic Fingerprint Verification System Digital Image Processing Algorithmâ, <i>Proceedings Tencom 87, 1987 IEEE Region 10 Conference</i>, vol. 1: 66-70 (1987).</othercit>
</nplcit>
<category>cited by other</category>
</citation>
<citation>
<nplcit num="00034">
<othercit>Nishiyama, âExclusive Use Equipmentâ, <i>NEC Res. and Develop. NI. 96</i>, 143-159 (1990).</othercit>
</nplcit>
<category>cited by other</category>
</citation>
<citation>
<nplcit num="00035">
<othercit>S. Anderson et al. âA Single Chip Sensor and Image Processor for Fingerprinting Verificationâ, IEEE Custom Integrated Circuits Conference, pp. 12.1.1-12.1.4.</othercit>
</nplcit>
<category>cited by other</category>
</citation>
<citation>
<nplcit num="00036">
<othercit>âBiometric Access Control in a Personal Computer Systemâ, IBM Technical Disclosure Bulletin, vol. 41, No. 1, Jan. 1, 1998, pp. 753-756.</othercit>
</nplcit>
<category>cited by other</category>
</citation>
<citation>
<nplcit num="00037">
<othercit>S. Pankanti et al., âBiometrics: The Future of Identificationâ, <i>Computer</i>, Feb. 2000, vol. 33, No. 2, pp. 46-49.</othercit>
</nplcit>
<category>cited by other</category>
</citation>
<citation>
<nplcit num="00038">
<othercit>P. Phillips et al., âAn Introduction to Evaluating Biometric Systemsâ, <i>Computer</i>, Feb. 2000, vol. 33, No. 2, pp. 56-63.</othercit>
</nplcit>
<category>cited by other</category>
</citation>
<citation>
<nplcit num="00039">
<othercit>L. O'Gorman, âPractical Systems for Personal Fingerprint Authenticationâ, <i>Computer</i>, Feb. 2000, vol. 33, No. 2, pp. 58-59.</othercit>
</nplcit>
<category>cited by other</category>
</citation>
<citation>
<nplcit num="00040">
<othercit>National Semiconductor Corporation, CMOS Databook, 1984, pp. 2-3 &amp; 9-3.</othercit>
</nplcit>
<category>cited by other</category>
</citation>
</references-cited>
<number-of-claims>26</number-of-claims>
<us-exemplary-claim>1</us-exemplary-claim>
<us-field-of-classification-search>
<classification-national>
<country>US</country>
<main-classification>713182</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>713184</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>713186</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>713192</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>382115-118</main-classification>
<additional-info>unstructured</additional-info>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>382124-125</main-classification>
<additional-info>unstructured</additional-info>
</classification-national>
</us-field-of-classification-search>
<figures>
<number-of-drawing-sheets>15</number-of-drawing-sheets>
<number-of-figures>24</number-of-figures>
</figures>
<us-related-documents>
<continuation>
<relation>
<parent-doc>
<document-id>
<country>US</country>
<doc-number>09354929</doc-number>
<kind>00</kind>
<date>19990715</date>
</document-id>
<parent-grant-document>
<document-id>
<country>US</country>
<doc-number>6681034</doc-number>
<kind>A </kind>
</document-id>
</parent-grant-document>
</parent-doc>
<child-doc>
<document-id>
<country>US</country>
<doc-number>10735898</doc-number>
</document-id>
</child-doc>
</relation>
</continuation>
<related-publication>
<document-id>
<country>US</country>
<doc-number>20040128521</doc-number>
<kind>A1</kind>
<date>20040701</date>
</document-id>
</related-publication>
</us-related-documents>
<parties>
<applicants>
<applicant sequence="001" app-type="applicant-inventor" designation="us-only">
<addressbook>
<last-name>Russo</last-name>
<first-name>Anthony P.</first-name>
<address>
<city>New York</city>
<state>NY</state>
<country>US</country>
</address>
</addressbook>
<nationality>
<country>omitted</country>
</nationality>
<residence>
<country>US</country>
</residence>
</applicant>
</applicants>
<agents>
<agent sequence="01" rep-type="attorney">
<addressbook>
<orgname>Buchanan Ingersoll &amp; Rooney PC</orgname>
<address>
<country>unknown</country>
</address>
</addressbook>
</agent>
</agents>
</parties>
<assignees>
<assignee>
<addressbook>
<orgname>Precise Biometrics</orgname>
<role>03</role>
<address>
<city>Lund</city>
<country>SE</country>
</address>
</addressbook>
</assignee>
</assignees>
<examiners>
<primary-examiner>
<last-name>Song</last-name>
<first-name>Hosuk</first-name>
<department>2135</department>
</primary-examiner>
</examiners>
</us-bibliographic-data-grant>
<abstract id="abstract">
<p id="p-0001" num="0000">A method for matching templates and a system thereof. Each template includes a plurality of data chunks, each data chunk representing a minutia and comprising a location, a minutia angle and a neighborhood. The location is represented by two coordinates. In one embodiment, each coordinate and the minutia angle are quantized. The neighborhood includes positional parameters with respect to a selected minutia for a predetermined number of neighbor minutiae. In one embodiment, a neighborhood boundary is drawn around the selected minutia and neighbor minutiae are selected from the enclosed area. A reference template is compared to a measured template on a chunk-by-chunk basis. A chunk from each of the template is loaded into a random access memory (RAM). The location, minutia angle and neighborhood of the reference data chunk are compared with the location, minutia angle and neighborhood of the measured data chunk, respectively.</p>
</abstract>
<drawings id="DRAWINGS">
<figure id="Fig-EMI-D00000" num="00000">
<img id="EMI-D00000" he="105.75mm" wi="164.00mm" file="US07299360-20071120-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00001" num="00001">
<img id="EMI-D00001" he="235.46mm" wi="165.27mm" file="US07299360-20071120-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00002" num="00002">
<img id="EMI-D00002" he="240.71mm" wi="156.80mm" file="US07299360-20071120-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00003" num="00003">
<img id="EMI-D00003" he="231.39mm" wi="143.51mm" file="US07299360-20071120-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00004" num="00004">
<img id="EMI-D00004" he="225.47mm" wi="113.37mm" file="US07299360-20071120-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00005" num="00005">
<img id="EMI-D00005" he="242.15mm" wi="147.57mm" file="US07299360-20071120-D00005.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00006" num="00006">
<img id="EMI-D00006" he="242.06mm" wi="161.37mm" file="US07299360-20071120-D00006.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00007" num="00007">
<img id="EMI-D00007" he="234.87mm" wi="169.93mm" file="US07299360-20071120-D00007.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00008" num="00008">
<img id="EMI-D00008" he="215.14mm" wi="168.06mm" file="US07299360-20071120-D00008.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00009" num="00009">
<img id="EMI-D00009" he="245.96mm" wi="161.37mm" file="US07299360-20071120-D00009.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00010" num="00010">
<img id="EMI-D00010" he="242.40mm" wi="169.93mm" file="US07299360-20071120-D00010.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00011" num="00011">
<img id="EMI-D00011" he="244.26mm" wi="164.00mm" file="US07299360-20071120-D00011.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00012" num="00012">
<img id="EMI-D00012" he="214.04mm" wi="168.40mm" file="US07299360-20071120-D00012.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00013" num="00013">
<img id="EMI-D00013" he="221.40mm" wi="139.19mm" file="US07299360-20071120-D00013.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00014" num="00014">
<img id="EMI-D00014" he="226.48mm" wi="130.98mm" file="US07299360-20071120-D00014.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00015" num="00015">
<img id="EMI-D00015" he="171.79mm" wi="148.67mm" file="US07299360-20071120-D00015.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
</drawings>
<description id="description">
<?RELAPP description="Other Patent Relations" end="lead"?>
<p id="p-0002" num="0001">This application is a continuation of application Ser. No. 09/354,929, filed on Jul. 15, 1999 now U.S. Pat. No. 6,681,034.</p>
<?RELAPP description="Other Patent Relations" end="tail"?>
<?BRFSUM description="Brief Summary" end="lead"?>
<heading id="h-0001" level="1">CROSS REFERENCE TO APPENDIX</heading>
<p id="p-0003" num="0002">Appendix A, which is a part of the present disclosure, is a listing of software code for embodiments of components of this invention, which are described more completely below.</p>
<p id="p-0004" num="0003">A portion of the disclosure of this patent document contains material which is subject to copyright protection. The copyright owner has no objection to the facsimile reproduction by anyone of the patent document or the patent disclosure, as it appears in the Patent and Trademark Office patent files or records, but otherwise reserves all copyright rights whatsoever.</p>
<heading id="h-0002" level="1">FIELD OF THE INVENTION</heading>
<p id="p-0005" num="0004">This invention relates to fingerprint verification. More particularly, this invention relates to methods for matching fingerprint templates and structures thereof.</p>
<heading id="h-0003" level="1">BACKGROUND OF THE INVENTION.</heading>
<p id="p-0006" num="0005">Biometric identification is used to verify the identity of a person by digitally measuring selected features of some physical characteristic and comparing those measurements with those filed for the person in a reference database, or sometimes on a smart card carried by the person. Physical characteristics that are being used include fingerprints, voiceprints, the geometry of the hand, the pattern of blood vessels on the wrist and on the retina of the eye, the topography of the iris of the eye, facial patterns and the dynamics of writing a signature and typing on a keyboard.</p>
<p id="p-0007" num="0006">The fingerprint is one of the most widely used physical characteristics in biometric identification. Fingerprints are utilized as the most reliable means to identify individuals because of two outstanding characteristics; namely that they remain unchanged all through life and differ from individual to individual. Fingerprints consist of raised friction ridges of skin separated by recessed valleys of skin. Fingerprint âminutiaeâ are conventionally defined as ridge endings or ridge bifurcations where a ridge splits into two ridges.</p>
<p id="p-0008" num="0007">Since the matching of a fingerprint as an image can require large file capacity to store the measured and referenced features and complex computation to match measured features with reference features, fingerprint identification is carried out using the positional relationship of features or minutiae that are extracted from the fingerprint image. The minutiae representing a fingerprint image are digitized and stored in a digital memory, which may be a readonly memory, magnetic tape, or the like. A fingerprint digitized in this manner may be compared with reference fingerprints stored in the memory. For the comparison to work, the reference fingerprint and the measured fingerprint must be extracted, characterized, and digitized so that the fingerprint templates contain the same information and have the same format.</p>
<p id="p-0009" num="0008">One application of fingerprint identification is to use the fingerprint to unlock a smart card which often contains encrypted information. Presently, a PIN (personal identification number) is required to be entered by the user before the encrypted information can be extracted from the smart card and used. The use of a PIN has many drawbacks. For example, the accounting or card issuing organization faces significant administrative cost in handling the secret codes and the card holders have to memorize the secret codes.</p>
<p id="p-0010" num="0009">Some privacy laws, for example, the privacy laws in Europe, require sensitive information such as a reference fingerprint template to be stored on the smart card in a way that it cannot leave the card without first unlocking the card with a PIN. Therefore, for a fingerprint matching scheme to be practical in Europe, the fingerprint template matching algorithm must be executed by a microprocessor in the smart card. Otherwise, the smart card must be unlocked by some other mechanism, such as a PIN, before the reference fingerprint template can be read. The difficulty of executing conventional fingerprint template matching algorithm on a smart card is mainly due to the limited computational capabilities and memory of a conventional smart card. For example, a conventional smart card typically has less than 512 bytes of RAM (with 256 bytes being typical) and between 1 Kilobyte and 16 Kilobytes of memory. An 8-bit RISC (reduced instruction set computer) microprocessor has a speed between 1 MegaHertz to 10 MegaHertz which is quite slow given the magnitude of the computations required to complete a comparison between a measured fingerprint and a reference fingerprint. In effect, the hardware constraints prevent the use of fingerprint to unlock data from smart cards.</p>
<p id="p-0011" num="0010">In addition to hardware constraints, another important design criterion is cost. U.S. Pat. No. 4,582,985 (hereinafter, the '985 patent) entitled âData Carrierâ, issued Apr. 15, 1986, to Bo LÃ¶fberg and hereby incorporated by reference in its entirety, describes a data carrier of a card type. According to the '985 patent, the data carrier includes a fingerprint verification device for carrying out the verification process. The verification device includes a sensor device for sensing a finger tip of the owner and obtaining the corresponding finger print line information. A specialized smart card must be used to accommodate the sensor device since a conventional smart card does not provide such accommodations. In addition, since the fingerprint template generation, storage, and comparison are done at the data carrier, the microprocessor of a conventional smart card is not adequate. Hence, a specialized smart card having a more capable processor must be used, thereby increasing cost.</p>
<p id="p-0012" num="0011">Therefore, what is needed are systems and fingerprint template matching algorithms that can be executed by a microprocessor with low memory and low computational capacities, thereby keeping the cost of the smart card at an acceptable level.</p>
<heading id="h-0004" level="1">SUMMARY OF THE INVENTION</heading>
<p id="p-0013" num="0012">In accordance with the present invention, a smart card verification system and a fingerprint template matching algorithm are provided. The fingerprint template matching algorithm is capable of being executed by a microprocessor with low memory and low computational capacities.</p>
<p id="p-0014" num="0013">In one embodiment of this invention, a reference fingerprint template and a measured fingerprint template are generated from a reference fingerprint image and a fingerprint image to be verified, respectively. Each template comprises a plurality of data chunks, each data chunk representing a minutia and comprising a location, a minutia angle and a neighborhood. In one embodiment, the location is represented by two coordinates (x<sub>j</sub>, y<sub>j</sub>), the coordinates having a center point (0,0) at the upper left hand corner. The minutia angle Î¸<sub>j </sub>is the angle between the x-axis and a line tangential to the ridge line at the minutia. In one embodiment, each coordinate and the minutia angle are quantized to a selected number of bits. In general, the amount of quantization is a function of the available memory and the degree of accuracy desired.</p>
<p id="p-0015" num="0014">The neighborhood is made up of a predetermined number of neighbor minutiae which are selected for every minutia extracted from a fingerprint image. Each neighbor minutia is characterized by three positional parameters with respect to the selected minutia. The positional parameters include a distance and two angles.</p>
<p id="p-0016" num="0015">In one embodiment, an optional neighborhood boundary is drawn around a randomly-selected minutia. In one embodiment, if the number of neighbor minutiae within the neighborhood boundary is less than the predetermined number, all neighbor minutiae within the neighborhood boundary are selected. In another embodiment, a predetermined number of the closest neighboring minutiae are selected. In yet another embodiment, a predetermined number of neighbor minutiae giving the best spread around the randomly selected minutia are selected. In one embodiment, the minutiae having the farthest distance from each other are selected. In another embodiment, minutiae that are very close, e.g., less than approximately 10 pixels, to each other are not selected. In another embodiment, an arbitrary one of the very close minutiae is selected. In one embodiment, a quadrant is arbitrarily drawn using the randomly-selected minutia as the center point and a predetermined number of minutiae are selected from each quadrant.</p>
<p id="p-0017" num="0016">An x-axis is drawn in the direction of the line tangential to the ridge at the randomly selected minutia. A y-axis, perpendicular to the x-axis, is drawn. The x-axis and the y-axis intersect at the randomly-selected minutia. Hence, the randomly-selected minutia now has a position of (0,0) and is designated as the âcenter minutia.â A first line is drawn between the center minutia and one of its neighbor minutiae. The first line has a distance di which is one of the positional parameters representing the neighbor minutia. An angle Ï<sub>i </sub>between the first line and the x-axis is the second positional parameter representing the neighbor minutia. A second line is then drawn from the neighbor minutia to intersect the x-axis, in the direction of the line tangential to the ridge of neighbor minutia. The angle Ï<sub>i </sub>between the x-axis and the second line is the third positional parameter representing the neighbor minutia.</p>
<p id="p-0018" num="0017">In one embodiment, each positional parameter is quantized to a selected number of bits. For example, each angle Ï<sub>i </sub>and Ï<sub>i </sub>is quantized to six bits and the distance d<sub>i </sub>is quantized to five bits.</p>
<p id="p-0019" num="0018">A data chunk from each fingerprint template is loaded into a random access memory (RAM) to be compared. In one embodiment, the data chunks are sorted, but such sorting is optional. In one embodiment, the data chunks are sorted in accordance to their x-coordinates. In another embodiment, the data chunks are sorted in accordance to their y-coordinates. In one embodiment, the data chunks in the reference template are sorted. In another embodiment, the data chunks in the measured template are sorted. In yet another embodiment, both the measured template and the reference template are sorted.</p>
<p id="p-0020" num="0019">Each of the characterization parameters, i.e., location, minutia angle, and neighborhood, of the measured data chunk to be compared is compared with its respective counterpart in the reference data chunk. The order of the comparison may be varied. For example, the location parameter in the x-coordinates of the.measured minutiae are compared first to the corresponding x-coordinates of the reference minutiae. In another embodiment, location parameter in the y-coordinates of the measured minutiae are compared first to the corresponding y-coordinates of the reference minutiae. In one embodiment, the comparison is straight subtraction. If the difference for a parameter pair is equal to or is less than a respective predetermined tolerance, the parameters match. If all of the parameters match, the data chunks match. On the other hand, if one of the parameters fail to match, the data chunks do not match and the next set of data chunks are compared.</p>
<p id="p-0021" num="0020">The data chunk comparison begins with the first reference data chunk and the first measured data chunk and terminates if the predetermined number of data chunk matches have been reached (i.e., the templates match) or if all of the data chunk combinations have been compared. In one embodiment, if the first reference data chunk and the first measured data chunk do not match, the next measured data chunk is loaded into the RAM to be compared with the first reference data chunk. The process continues until all the measured data chunks in the measured fingerprint template have been compared. The next reference data chunk and the first measured data chunk are then loaded into the RAM to be compared. The process continues until all the reference data chunks have been compared. In another embodiment, if the first reference data chunk does not match the first measured data chunk, the second reference data chunk is loaded into the RAM to be compared with the first measured data chunk. The process continues until all of the reference chunks have been compared. The second measured data chunk and the first reference data chunk are then loaded into the RAM to be compared. The process continues until all of the measured data chunks have been compared.</p>
<p id="p-0022" num="0021">In one embodiment, where the data chunks are sorted, the comparison between a reference data chunk and the remaining uncompared measured data chunks is terminated if the difference between the reference data chunk and the measured data chunk exceeds the tolerance. In one embodiment, the next comparison starts with the next reference data chunk and the first matching measured data chunk.</p>
<p id="p-0023" num="0022">In the alternative embodiment, the comparison between a measured data chunk and the remaining uncompared reference data chunks is terminated if the difference between the measured data chunk and the reference data chunk exceeds the tolerance. In one embodiment, the next comparison starts with the next reference data chunk and the first matching measured data chunk.</p>
<p id="p-0024" num="0023">In one embodiment, the neighbor minutiae in a neighborhood are sorted by distance d<sub>i</sub>. The neighborhood comparison starts with the first neighbor in the reference neighborhood and the first neighbor in the measured neighborhood and terminates when the predetermined neighbor matches are reached (i.e., the neighborhoods match) or when all of the neighbor combinations have been compared. Each reference's positional parameter is compared with its corresponding measured positional parameter. In one embodiment, the comparison is done with straight subtraction. If the difference meets a predetermined tolerance, the parameters match. If all of the positional parameters in the neighbor minutia match, the neighbor minutiae match. If one of the positional parameters does not match, the neighbor minutiae do not match.</p>
<p id="p-0025" num="0024">In one embodiment, the reference fingerprint template is stored in a static memory in a smart card and the fingerprint template matching algorithm is executed in a microprocessor in the smart card. In one embodiment, the reference fingerprint template is generated and stored at a smart card reader.</p>
<p id="p-0026" num="0025">The above-described fingerprint template matching algorithm may be executed by a microprocessor with low memory and low computational capacities because the matching algorithm does not require.computational intensive operations and does not require comparisons that exceeds 8 bits.</p>
<?BRFSUM description="Brief Summary" end="tail"?>
<?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?>
<description-of-drawings>
<heading id="h-0005" level="1">BRIEF DESCRIPTION OF THE DRAWINGS</heading>
<p id="p-0027" num="0026"><figref idref="DRAWINGS">FIG. 1</figref> shows a smart card system having a smart card reader for reading a smart card.</p>
<p id="p-0028" num="0027"><figref idref="DRAWINGS">FIG. 2A</figref> shows a reference fingerprint template divided into data chunks.</p>
<p id="p-0029" num="0028"><figref idref="DRAWINGS">FIG. 2B</figref> shows a measured-fingerprint template to be compared divided into data chunks.</p>
<p id="p-0030" num="0029"><figref idref="DRAWINGS">FIG. 3</figref> shows how a minutia is represented.</p>
<p id="p-0031" num="0030"><figref idref="DRAWINGS">FIG. 4A</figref> shows a circular neighborhood boundary.</p>
<p id="p-0032" num="0031"><figref idref="DRAWINGS">FIG. 4B</figref> shows a square neighborhood boundary.</p>
<p id="p-0033" num="0032"><figref idref="DRAWINGS">FIG. 4C</figref> shows a method of neighbor selection. <figref idref="DRAWINGS">FIG. 4D</figref> shows an angle to be represented in complex domain.</p>
<p id="p-0034" num="0033"><figref idref="DRAWINGS">FIG. 4E</figref> shows an embodiment of a method of neighbor selection.</p>
<p id="p-0035" num="0034"><figref idref="DRAWINGS">FIG. 5</figref> shows construction of positional parameters for a neighbor minutia.</p>
<p id="p-0036" num="0035"><figref idref="DRAWINGS">FIG. 6</figref> shows two neighborhoods with errors between them.</p>
<p id="p-0037" num="0036"><figref idref="DRAWINGS">FIG. 7A</figref> shows a reference data chunk comprising location, minutia angle and neighborhood parameters.</p>
<p id="p-0038" num="0037"><figref idref="DRAWINGS">FIG. 7B</figref> shows a measured data chunk comprising location, minutia angle and neighborhood parameters.</p>
<p id="p-0039" num="0038"><figref idref="DRAWINGS">FIG. 7C</figref> shows a reference neighborhood having various positional parameters.</p>
<p id="p-0040" num="0039"><figref idref="DRAWINGS">FIG. 7D</figref> shows a measured neighborhood having various positional parameters.</p>
<p id="p-0041" num="0040"><figref idref="DRAWINGS">FIG. 8A</figref> shows a flowchart of a method of template comparison.</p>
<p id="p-0042" num="0041"><figref idref="DRAWINGS">FIG. 8B</figref> shows a flowchart of another method of template comparison.</p>
<p id="p-0043" num="0042"><figref idref="DRAWINGS">FIG. 9A</figref> shows a flowchart of a method of detailed data chunk comparison.</p>
<p id="p-0044" num="0043"><figref idref="DRAWINGS">FIG. 9B</figref> shows a flowchart of a method of detailed data chunk comparison.</p>
<p id="p-0045" num="0044"><figref idref="DRAWINGS">FIG. 9C</figref> shows a flowchart of a method of detailed data chunk comparison.</p>
<p id="p-0046" num="0045"><figref idref="DRAWINGS">FIG. 10</figref> shows a flowchart of a method of detailed neighborhood comparison.</p>
<p id="p-0047" num="0046"><figref idref="DRAWINGS">FIG. 11A</figref> shows a flowchart of a method of detailed neighbor comparison.</p>
<p id="p-0048" num="0047"><figref idref="DRAWINGS">FIG. 11B</figref> shows a flowchart of a method of detailed neighbor comparison, with the neighbors sorted.</p>
<p id="p-0049" num="0048"><figref idref="DRAWINGS">FIG. 12</figref> shows a flowchart of a method of fingerprint template comparison in a multiple user situation.</p>
<p id="p-0050" num="0049">Use of the same reference numbers in different figures indicates similar or like elements.</p>
</description-of-drawings>
<?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?>
<?DETDESC description="Detailed Description" end="lead"?>
<heading id="h-0006" level="1">DETAILED DESCRIPTION</heading>
<p id="p-0051" num="0050">The following description is meant to be illustrative only and not limiting. Other embodiments of this invention will be obvious in view of the following description to those skilled in the semiconductor processing arts.</p>
<p id="p-0052" num="0051"><figref idref="DRAWINGS">FIG. 1</figref> shows one implementation of the present invention. <figref idref="DRAWINGS">FIG. 1</figref> shows a smart card reader system having a smart card <b>100</b> and a smart card reader <b>110</b>. Smart card <b>100</b> comprises a static memory <b>102</b> for storing a reference fingerprint template, a microprocessor <b>104</b> for executing a fingerprint template matching algorithm, and RAM (random access memory) <b>106</b>. Smart card reader <b>110</b> has a RAM <b>112</b> for storing a measured fingerprint template, a microprocessor <b>114</b>, and a fingerprint sensor <b>116</b>. In one embodiment, fingerprint sensor <b>116</b> is a capacitive fingerprint sensor of the kind described in U.S. patent application Ser. No. 08/735,100 filed Dec. 15, 1995, and assigned to the same assignee as the present invention, which is hereby incorporated by reference in its entirety. Smart card reader <b>110</b> can be a stand-alone unit at a point-of-sale or can be embedded in an ATM, for example.</p>
<p id="p-0053" num="0052">When a user wishes to gain access to smart card <b>100</b>, he/she inserts smart card <b>100</b> into smart card reader <b>110</b>. Smart card reader <b>110</b> then prompts the user to place his/her finger on fingerprint sensor <b>116</b>. The prompt can be either visual or audible. Microprocessor <b>114</b> on smart card reader <b>110</b> then digitizes the electrical signal measured at fingerprint sensor <b>116</b>, creates a fingerprint image, extracts minutiae from the fingerprint image, characterizes each minutia, creates a neighborhood for each minutia, and generates a measured fingerprint template from the characterization parameters and the neighborhood. The measured fingerprint template is then stored in RAM <b>112</b>. Template construction is discussed in detail below.</p>
<p id="p-0054" num="0053">Minutiae can be extracted from a fingerprint using any known methods. For example, ridge skeletonization technique can be used. This technique uses an iterative process to thin a ridge line by discarding pixels that do not affect the continuity of the ridge line until a single pixel line is remaining, the end point of which is the minutia. Other types of minutia extraction technique are described in, for example, U.S. Pat. No. 4,646,352 entitled âMethod and Device for Matching Fingerprints with Precise Minutia Pairs Selected From Coarse Pairsâ issued Feb. 24, 1987 to Asai et al. and U.S. Pat. No. 4,135,147 entitled âMinutiae Pattern Matcherâ issued Jan. 16, 1979 to Riganati et al. The minutia extraction technique is not described in detail in this application because it is not part of the invention.</p>
<p id="p-0055" num="0054">Smart card reader <b>110</b> then sends the measured fingerprint template to smart card <b>100</b> through a communication channel <b>120</b> at a selected speed, typically 9.6 Kilobits/second, or 9600 baud. Microprocessor <b>104</b> in smart card <b>100</b> receives the measured fingerprint template from smart card reader <b>110</b>, reads the reference fingerprint template from static memory <b>102</b> into RAM <b>106</b> chunk by chunk as needed, and executes a fingerprint template matching algorithm to compare the two fingerprint templates.</p>
<p id="p-0056" num="0055">A collection of data chunks representing a fingerprint, either reference or measured is referred to herein as a fingerprint template. A data chunk consists information of an extracted minutia it corresponds to, including location, minutia angle and neighborhood, which will be discussed below. <figref idref="DRAWINGS">FIGS. 2A</figref>, <b>2</b>B, <b>3</b>, <b>4</b>A-<b>4</b>E, <b>5</b>, <b>6</b> and <b>7</b>A-<b>7</b>D show in detail how a fingerprint template is constructed. <figref idref="DRAWINGS">FIG. 2A</figref> shows a reference fingerprint template <b>200</b> having a plurality of data chunks <b>201</b>, <b>202</b>, <b>203</b>, etc. Typically, reference fingerprint template <b>200</b> comprises 50 chunks, i.e., typically, 50 minutiae are extracted from a fingerprint image. In one embodiment, the minimum number of minutiae required is 10. The minimum number of minutiae is generally determined by the required matching accuracy. In one embodiment, the maximum number of minutiae allowed is 128. Number 128 is chosen as the maximum number of minutiae allowed because with a typical number of 50, 128 gives a sufficient range of the number of minutiae that may be extracted from a fingerprint image. Of course, the minimum and the maximum numbers of minutiae extracted may be modified to suit a particular application. Reference fingerprint template <b>200</b> is stored, for example, in static memory <b>102</b> on smart card <b>100</b>.</p>
<p id="p-0057" num="0056"><figref idref="DRAWINGS">FIG. 2B</figref> shows a measured fingerprint template <b>210</b> having a plurality of data chunks <b>211</b>, <b>212</b>, <b>213</b>, etc. Similarly, measured fingerprint template <b>210</b> typically comprises 50 data chunks. Measured fingerprint template <b>210</b> is generated, for example, by smart card reader <b>110</b> and is stored in RAM <b>112</b> in smart card reader <b>110</b>. The number of data chunks extracted from a measured fingerprint may be different from the number of data chunks extracted from a reference fingerprint due to possible false minutiae. In addition, the number of data chunks extracted from a measured fingerprint may be different from the number of data chunks extracted from a reference fingerprint because only a partial fingerprint is read. However, a match can nevertheless be had if the number of fingerprint data chunk matches satisfies a predetermined number of fingerprint data chunk matches. Therefore, the number of fingerprint data chunks in the measured fingerprint template does not need to be the same as the number of fingerprint data chunks in the reference fingerprint template.</p>
<p id="p-0058" num="0057">In one embodiment, all the data chunks in both reference fingerprint template <b>200</b> and measured fingerprint template <b>210</b> contain the same number of bits. A data chunk is constructed for each and every minutia extracted from a fingerprint image. Therefore, the number of data chunks making up each fingerprint template is equal to the number of minutiae extracted from a fingerprint image. For example, if eighty minutiae are extracted from a fingerprint image, the fingerprint template will contain eighty data chunks.</p>
<p id="p-0059" num="0058"><figref idref="DRAWINGS">FIG. 3</figref> shows how each minutia is represented. An x-axis and a y-axis are constructed so that the point (0,0) is at the upper left hand corner of a fingerprint image. The x-axis and the y-axis are drawn regardless of the rotation or the translation of the fingerprint, as will be discussed later. Each minutia in a fingerprint image is characterized by location (x<sub>j</sub>, y<sub>j</sub>) and a minutia angle Î¸<sub>j</sub>, where j is the number of minutiae extracted from a fingerprint image. Location (x<sub>j</sub>, y<sub>j</sub>) is the location of minutia j with respect to x- and y-axis. Minutia angle Î¸<sub>j </sub>is the angle between the x-axis and a line tangential to a ridge <b>301</b> where minutia j is extracted. Of importance, the minutiae of both the reference fingerprint and the measured fingerprint must contain the same characterization parameters.</p>
<p id="p-0060" num="0059">A neighborhood NH<sub>j </sub>is constructed for each minutia j, as described below. <figref idref="DRAWINGS">FIGS. 4A-4E</figref> illustrate various ways of selecting neighbor minutiae in constructing a neighborhood NH<sub>j </sub>for minutia j. A neighborhood is constructed for each and every minutia extracted from a fingerprint image. In one embodiment, a neighborhood boundary is drawn around minutia j. For example, a circle <b>300</b> of a fixed radius r, e.g., 90 pixels, is drawn using minutia j as the center point, as shown in <figref idref="DRAWINGS">FIG. 4A</figref>, to provide a neighborhood boundary. In an alternative embodiment, a box <b>310</b>, representing the neighborhood boundary, is drawn using minutia j as the center point, as shown in <figref idref="DRAWINGS">FIG. 4B</figref>. Of course, any predetermined neighborhood boundary of any shape or size can be drawn.</p>
<p id="p-0061" num="0060">A predetermined number of neighbor minutiae are selected from the enclosed area. In one embodiment, fifteen (15) minutiae (excluding minutia j) within the neighborhood boundary are selected as the neighbor minutiae for neighborhood NH<sub>j</sub>. If the enclosed area contains less than the predetermined number of neighbor minutiae, all of the neighbor minutiae contained in the enclosed area are selected. It is noted that neighborhood NH<sub>j </sub>contains multiple neighbor minutiae N<sub>l</sub>-N<sub>i </sub>where i is a predetermined number, so that there is enough information to make the neighborhood NH<sub>j </sub>unique enough to meet the accuracy requirement. The number of the neighbors, in general, depends on the uniqueness of the neighborhood NH<sub>j </sub>desired. For example, if only four neighbors N<sub>l</sub>-N<sub>4 </sub>are selected for a neighborhood, the probability of having equivalent or matching neighborhoods is much higher than the corresponding probability associated with a neighborhood of fifteen neighbors. Similarly, a neighborhood having thirty neighbors would have a lower probability of being equivalent to other neighborhoods. The uniqueness of the neighborhood determines how often a good fingerprint is rejected (i.e., false rejection rate) and how often a bad fingerprint is accepted (i.e., false acceptance rate). The number of the neighbor minutiae also depends on the acceptable computational complexity or speed that can be satisfactorily performed by a microprocessor.</p>
<p id="p-0062" num="0061">In one embodiment, the neighbor minutiae are selected such as to maximize the spread around the center point, i.e., minutia j. Referring to <figref idref="DRAWINGS">FIG. 4C</figref>, an x-axis is drawn in the direction of the line tangential to a ridge line at minutia j. A line is drawn from minutia j to a minutia N<sub>l</sub>, forming an angle Ï<sub>l</sub>, between the x-axis and the line. Similarly, a line is drawn from minutia j to each of the remaining minutiae within the enclosed area, each forming an angle Ï<sub>k </sub>with the x-axis, where k is the number of the minutiae within the enclosed area. A mean is calculated from all the angles Ï<sub>k</sub>.</p>
<p id="p-0063" num="0062">In one embodiment, the mean is calculated in a complex domain since mean calculation in a degree domain would be more complicated due to the cyclical nature of the angles. A complex number C can be described as a sum of its real and imaginary parts a and b, respectively, i.e., C=a+ib where i is the square root of â1.</p>
<p id="p-0064" num="0063">Referring to <figref idref="DRAWINGS">FIG. 4D</figref>, angles can be expressed in terms of complex numbers by the following equality:
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>C</i><sub>k</sub>=cos(Ï<sub>k</sub>)â<i>i </i>sin (Ï<sub>k</sub>)<?in-line-formulae description="In-line Formulae" end="tail"?>
<br/>
where
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?>Ï<sub>k</sub>=tan<sup>â1 </sup>(<i>b</i><sub>k</sub><i>/a</i><sub>k</sub>)<?in-line-formulae description="In-line Formulae" end="tail"?>
<br/>
Thus, the real part of angle Ï<sub>k </sub>is a<sub>k</sub>=cos (Ï<sub>k</sub>) and the imaginary part of angle Ï<sub>k </sub>is b<sub>k </sub>=sin (Ï<sub>k</sub>). To get an average of all the angles Ï<sub>k</sub>, each angle Ï<sub>k </sub>is converted to its complex equivalent. The real part Ï<sub>k </sub>and the imaginary part b<sub>k </sub>are then averaged separately. The averaged real part a<sub>avg </sub>and the averaged imaginary part b<sub>avg </sub>are then converted back to a real number representation Ï<sub>avg</sub>, for example,
</p>
<p id="p-0065" num="0064">
<maths id="MATH-US-00001" num="00001">
<math overflow="scroll">
<mrow>
  <mrow>
    <msub>
      <mi>a</mi>
      <mi>avg</mi>
    </msub>
    <mo>=</mo>
    <mfrac>
      <mrow>
        <munder>
          <mo>â</mo>
          <mi>k</mi>
        </munder>
        <mo>â¢</mo>
        <mstyle>
          <mspace width="0.3em" height="0.3ex"/>
        </mstyle>
        <mo>â¢</mo>
        <mrow>
          <mo>(</mo>
          <msub>
            <mi>a</mi>
            <mi>k</mi>
          </msub>
          <mo>)</mo>
        </mrow>
      </mrow>
      <mi>k</mi>
    </mfrac>
  </mrow>
  <mo>,</mo>
  <mstyle>
    <mspace width="0.8em" height="0.8ex"/>
  </mstyle>
  <mo>â¢</mo>
  <mrow>
    <msub>
      <mi>b</mi>
      <mi>avg</mi>
    </msub>
    <mo>=</mo>
    <mfrac>
      <mrow>
        <munder>
          <mo>â</mo>
          <mi>k</mi>
        </munder>
        <mo>â¢</mo>
        <mstyle>
          <mspace width="0.3em" height="0.3ex"/>
        </mstyle>
        <mo>â¢</mo>
        <mrow>
          <mo>(</mo>
          <msub>
            <mi>b</mi>
            <mi>k</mi>
          </msub>
          <mo>)</mo>
        </mrow>
      </mrow>
      <mi>k</mi>
    </mfrac>
  </mrow>
  <mo>,</mo>
</mrow>
</math>
</maths>
<br/>
and
<br/>
Ï<sub>avg</sub>=tan<sup>â1</sup>(b<sub>avg</sub>/a<sub>avg</sub>).
</p>
<p id="p-0066" num="0065">In one embodiment, each angle Ï<sub>k </sub>is examined to determine how close it is to the average angle Ï<sub>avg </sub>by subtracting angle Ï<sub>k </sub>from average angle Ï<sub>avg </sub>to get a difference Ï<sub>kdiff</sub>. A predetermined number of minutiae that have the largest difference Ï<sub>kdiff </sub>are selected so that the entire neighborhood has maximum standard angular deviation. It is noted that if there is a cluster of minutiae such as cluster <b>301</b> shown in <figref idref="DRAWINGS">FIG. 4C</figref>, the average would be closer to cluster <b>301</b>. Thus the minutiae that are within cluster <b>301</b> would be closer to the mean. In one embodiment, if the number of minutiae within the boundary is more than the predetermined number of neighbor minutiae, the minutiae within cluster <b>301</b> would not be selected. If one or more minutiae must be selected from cluster <b>301</b> to meet the predetermined number of neighbor minutiae, the minutiae are selected randomly. In other words, the minutiae within cluster <b>301</b> are less likely to be selected than the minutiae outside of cluster <b>301</b>.</p>
<p id="p-0067" num="0066">In one embodiment, if multiple minutiae, such as minutiae N<sub>5 </sub>and N<sub>6</sub>, have the same angles, the distances between minutia N<sub>5 </sub>and minutia j and between minutia N<sub>6 </sub>and minutia j are used for a tie breaker, e.g., the shorter the distance, the more likely the minutia would be selected. In another embodiment, if a minutia, i.e., minutia N<sub>3</sub>, is too close to minutia j, e.g., 10 pixels, the minutia is not selected. In yet another embodiment, the neighbor minutiae that are furthest away (in distance) from each other are selected. In one embodiment, if two or more neighbor minutiae are very close to each other, e.g., 10 pixels, such as neighbor minutia N<sub>5 </sub>and neighbor minutia N<sub>7</sub>, either both neighbor minutiae N<sub>5 </sub>and N<sub>7 </sub>are eliminated or one of neighbor minutiae N<sub>5 </sub>and N<sub>7 </sub>is arbitrarily selected.</p>
<p id="p-0068" num="0067">The neighborhood boundary is optional in selecting neighbor minutiae for a neighborhood. For example, the neighbor minutiae are selected such as to maximize the spread around the center point, i.e., minutia j, as described above. However, in this embodiment, all of the minutiae extracted from the fingerprint are used to calculate the mean. All the other embodiments described above are also applicable to neighbor minutiae selection without a boundary. In an additional embodiment, a quadrant is arbitrarily drawn with minutia j as the center point and a predetermined number of neighbor minutiae are then selected from each quadrant, as shown in <figref idref="DRAWINGS">FIG. 4E</figref>. In general, any neighbor minutiae extraction method may be used to extract the predetermined number i of neighbor minutiae for constructing a neighborhood NH<sub>j</sub>.</p>
<p id="p-0069" num="0068">After the neighbor minutiae are selected, a neighborhood NH<sub>j </sub>is constructed by deriving three positional parameters for each neighbor minutia. The positional parameters are derived in reference to minutia j. These positional parameters include a distance d<sub>i </sub>and two angles Ï<sub>i </sub>and Î¦<sub>i</sub>, where i is the number of neighbor minutiae.</p>
<p id="p-0070" num="0069"><figref idref="DRAWINGS">FIG. 5</figref> shows how the positional parameters are derived. An x-axis is drawn in the direction of the line tangential to a ridge line at minutia j. A y-axis perpendicular to the x-axis is then drawn, intersecting the x-axis at minutia j. Hence, minutia j has a position of (0,0) and will be designated as the âcenter minutia N<sub>0</sub>.â A line <b>500</b> is drawn from center minutia N<sub>0 </sub>to a neighbor minutia N<sub>i</sub>. Line <b>500</b> has a distance d<sub>i</sub>. An angle Ï<sub>i </sub>is created between the x-axis and line <b>500</b>. Another line <b>501</b> is drawn from neighbor N<sub>i </sub>in the direction of a line tangential to a ridge line for neighbor minutia N<sub>i </sub>to intersect and extend through the x-axis. The angle between the extended line <b>501</b> and the x-axis is angle Î¦<sub>i</sub>. Hence, neighbor minutia N<sub>i </sub>may be represented by (d<sub>i</sub>, Ï<sub>i</sub>, Î¦<sub>i</sub>). Similarly, neighbor minutia N<sub>1 </sub>is at a distance d<sub>1 </sub>from center minutia N<sub>0</sub>. An angle Ï<sub>1 </sub>is created between line <b>502</b> and the x-axis. Angle Î¦<sub>1 </sub>is created between line <b>503</b> and the x-axis. Neighbor minutia N<sub>2 </sub>is at a distance d<sub>2 </sub>from center minutia N<sub>0</sub>. An angle Ï<sub>2 </sub>is created between line <b>504</b> and the x-axis. An angle Î¦<sub>2 </sub>is created between line <b>505</b> and the x-axis. The process is repeated for all i neighbor minutiae of center minutia N<sub>0</sub>. Hence, for a neighborhood having 15 neighbors (i.e., i=15) each of the 15 neighbors N<sub>1</sub>, N<sub>2</sub>, N<sub>3</sub>, . . . , N<sub>15 </sub>is represented by (d<sub>i</sub>, Ï<sub>i</sub>, Î¦<sub>i</sub>) Importantly, distance d<sub>i </sub>and angles Ï<sub>i </sub>and Î¦<sub>i </sub>are independent of any rotation or translation of a fingerprint image because these are relative positions with respect to center minutia N<sub>0</sub>. Hence, when a fingerprint image is rotated or translated, all the minutiae associated with that center minutia N<sub>0 </sub>are translated and rotated in the same fashion and amount and their relative positions with respect to the center minutia N<sub>0 </sub>remain the same.</p>
<p id="p-0071" num="0070">In one embodiment, each of the parameters d<sub>i</sub>, Ï<sub>i</sub>, and Î¦<sub>i </sub>are quantized to a selected number of bits. Quantization allows the reduction of the number of bits to represent a value. More specifically, during quantization, all the numbers that fall between two boundary values are discretized to a quantization value between the boundary numbers.</p>
<p id="p-0072" num="0071">There are several approaches to derive the quantization value. In linear quantization, a quantization value can be derived by, e.g., a practical approach or a centroid approach. In the practical approach, the quantization value can be calculated by rounding the quotient of an equation, e.g., x/N, where x is the unquantized value and N is the quantization interval, to the closest integer number. For example, if the unquantized value is 5 and the quantization interval is 2, the quantization value is obtained by rounding 5/2=2.5, or 3. Similarly, if the unquantized value is 5 and the quantization interval is 4, then quantization value is obtained by rounding 5/4=1.25 or 1. In a centroid approach, the quantization value is computed as</p>
<p id="p-0073" num="0072">
<maths id="MATH-US-00002" num="00002">
<math overflow="scroll">
<mrow>
  <mrow>
    <mi>C</mi>
    <mo>=</mo>
    <mfrac>
      <mrow>
        <msubsup>
          <mo>â«</mo>
          <mi>i</mi>
          <mi>j</mi>
        </msubsup>
        <mo>â¢</mo>
        <mrow>
          <mrow>
            <mi>xp</mi>
            <mo>â¡</mo>
            <mrow>
              <mo>(</mo>
              <mi>x</mi>
              <mo>)</mo>
            </mrow>
          </mrow>
          <mo>â¢</mo>
          <mstyle>
            <mspace width="0.2em" height="0.2ex"/>
          </mstyle>
          <mo>â¢</mo>
          <mrow>
            <mo>â</mo>
            <mi>x</mi>
          </mrow>
        </mrow>
      </mrow>
      <mrow>
        <msubsup>
          <mo>â«</mo>
          <mi>i</mi>
          <mi>j</mi>
        </msubsup>
        <mo>â¢</mo>
        <mrow>
          <mrow>
            <mi>p</mi>
            <mo>â¡</mo>
            <mrow>
              <mo>(</mo>
              <mi>x</mi>
              <mo>)</mo>
            </mrow>
          </mrow>
          <mo>â¢</mo>
          <mstyle>
            <mspace width="0.2em" height="0.2ex"/>
          </mstyle>
          <mo>â¢</mo>
          <mrow>
            <mo>â</mo>
            <mi>x</mi>
          </mrow>
        </mrow>
      </mrow>
    </mfrac>
  </mrow>
  <mo>,</mo>
</mrow>
</math>
</maths>
<br/>
where C is the quantization value; i and j are the boundary numbers of the interval to be quantized; and p is the probability of occurrence of each number x.
</p>
<p id="p-0074" num="0073">In non-linear quantization, a look-up table may be created to specify the quantization value for each unquantized value. For example, the lookup table may specify for unquantized values from 0 to 1, the quantization value is 1; for unquantized valued from 1 to 3, the quantization value is 2; for unquantized values from 3 to 6, the quantization value is 5; and so on. Non-linear quantization has the advantage of setting the quantization value in accordance to the errors associated with each minutia. For example, for a given minutia, the closer the-neighbor minutia is to the given minutia, the smaller the error. Similarly, the further the neighbor minutia, the larger the error. Therefore, for neighbor minutiae closer to the given minutia, the parameters associated with the neighbor minutia needs to be quantized more finely than the neighbor minutiae that are further away.</p>
<p id="p-0075" num="0074">Although any amount of quantization may be used, the amount of quantization depends on the preciseness of the match desired and the memory space available. As is well known in the art, the more the quantization, the less the preciseness of the representation and the less the storage space is required. For example, for a set of unquantized values 1 through 10, 4 bits are required to represent each number. If the quantization interval is 2, then the largest quantization value needs to be represented is 10/2 or 5. Hence, all 10 numbers can be represented by 3 bits, requiring less storage space. Similarly, if the quantization interval is 5, the largest quantization value needs to be represented.is 10/5 or 2. Hence, unquantized values 1 through 10 can now be represented by 2 bits, requiring even less storage space. However, the largest error in the first example would be 1 and the largest error in the second example would be 2.5. Hence, the more the quantization, the less the storage requirement and the larger the error.</p>
<p id="p-0076" num="0075">In one embodiment, distance d<sub>i </sub>is quantized to five bits. In another embodiment, angles Ï<sub>i </sub>and Î¦<sub>i </sub>are quantized to six bits each.</p>
<p id="p-0077" num="0076"><figref idref="DRAWINGS">FIG. 6</figref> illustrates two neighborhoods with slight errors, both rotational and translational. Reference neighborhood <b>510</b> is constructed with a center minutia N<sub>0 </sub>and two neighbor minutiae N<sub>1 </sub>and N<sub>2</sub>. Measured neighborhood <b>512</b> is constructed with a center minutia N<sub>0</sub>â² and two neighbor minutiae N<sub>1</sub>â² and N<sub>2</sub>â². As can be seen, reference neighborhood <b>510</b> and measured neighborhood <b>512</b> show some resemblance, i.e., neighbor minutiae N<sub>1 </sub>and N<sub>2 </sub>and N<sub>1</sub>â² and N<sub>2</sub>â², respectively, have similar positional relationships with respect to their center minutiae N<sub>0 </sub>and N<sub>0</sub>â², respectively. However, there are errors between the two neighborhoods. For example, there are slight differences in the distances as well as the angles. The slight differences may be due to the fact that a finger has a fluid surface, thus the surface of the finger stretches and varies under different conditions. Hence, these two slightly varied neighborhoods may be the fingerprint from the same finger, but created at different times. The fingerprint matching algorithm, therefore, must take these slight variations into account because if a perfect match is required, the numerous erroneous rejections will render fingerprint identification impractical.</p>
<p id="p-0078" num="0077">Because matching tolerances must be accepted, the errors caused by a certain amount of quantization becomes unimportant in the resulting accuracy of the comparison. For example, if the tolerance of distance d<sub>i </sub>is set to 1 and the maximum error caused by quantization of distance d<sub>i </sub>is also 1, if both the reference distance and the measured distance falls into the same quanta, the distances match even though the actual distances may be different. The acceptable tolerance, therefore, determines how much quantization can be done for each parameter.</p>
<p id="p-0079" num="0078">Another advantage for quantization is to increase the data transmission speed because the size of the data packets becomes smaller after quantization. In one embodiment, the quantized values are compressed using well-known compression method such as, but not limited to, run-length encoding or L-Z-W (Lemtel-Ziv-Welch) compression. In the run-length encoding, for example, if there are five number zero in a row, instead of storing the numbers as â0 0 0 0 0,â the numbers are stored as â5 0.â In the L-Z-W compression, a dictionary of frequently repeated groups of (8-bit) characters is built on a per-file basis in order to represents frequent character-strings as shorter bit patterns. Hence, compression allows the data to be represented by fewer bits, thus allowing the data transmission to be faster and data storage to be smaller. In one embodiment, the compressed values are transmitted from smart card reader <b>110</b> into smart card <b>100</b> and are decompressed at smart card <b>100</b>.</p>
<p id="p-0080" num="0079">In one embodiment, the location information, i.e., (x<sub>j</sub>, y<sub>j</sub>) and the minutia angle Î¸<sub>j </sub>are quantized to a selected number of bits. For example, each of the position measurements x<sub>j </sub>and y<sub>j </sub>is quantized to four bits and the minutia angle Î¸<sub>j </sub>is quantized to six bits.</p>
<p id="p-0081" num="0080">The size of a data chunk is determined by the size of the parameters representing the location of the minutia, the minutia angle, and its neighborhood. In one embodiment, each data chunk in the fingerprint template is 34 bytes in size. In this embodiment, the fingerprint template is made of 1-byte location information (i.e., two 4-bit measurements x<sub>j </sub>and y<sub>j</sub>), 6-bit minutia angle Î¸<sub>j </sub>information, and fifteen 17-bit (5 bits for d<sub>i</sub>, 6 bits each for angles Ï<sub>i </sub>and Î¦<sub>i</sub>) neighborhood information.</p>
<p id="p-0082" num="0081">As will be seen later, the fingerprint template matching algorithm compares the fingerprint templates on a chunk-by-chunk basis. Hence, the fingerprint template matching algorithm requires RAM <b>106</b> to be of a size large enough to store at least two data chunks, e.g., 68 bytes of data. In a conventional smart card where the typical RAM is 256 bytes in size, no additional memory is required because the required memory in accordance with this invention is within, in fact, well under, the memory confinement of a conventional smart card.</p>
<p id="p-0083" num="0082"><figref idref="DRAWINGS">FIG. 7A</figref> shows reference data chunk <b>201</b> of reference fingerprint template <b>200</b> in detail. Reference data chunk <b>201</b> includes three parameters: location <b>702</b>, minutia angle <b>704</b>, and neighborhood <b>706</b>. Location <b>702</b> includes x- and y- coordinates. Neighborhood <b>706</b>, in one embodiment, includes 15 neighbor minutiae N<sub>1 </sub>through N<sub>15</sub>. Each neighbor N<sub>1 </sub>through N<sub>15</sub>, further includes positional parameters such as distance d<sub>i </sub>between the center minutia N<sub>0 </sub>and the neighbor minutia N<sub>i </sub>and two related angles Ï<sub>i</sub>, Î¦<sub>i</sub>, where i is 1 through 15, as shown in <figref idref="DRAWINGS">FIG. 7C</figref>.</p>
<p id="p-0084" num="0083">Similarly, <figref idref="DRAWINGS">FIG. 7B</figref> shows data chunk <b>211</b> of measured fingerprint template <b>210</b> in detail. Measured data chunk <b>211</b> includes three parameters: location <b>752</b>, minutia angle <b>754</b>, and neighborhood <b>756</b>. Location <b>752</b> includes x- and y-coordinates x<sub>j</sub>â² and y<sub>j</sub>â². Neighborhood <b>756</b>, in one embodiment, includes 15 neighbors N<sub>l</sub>â² through N<sub>15</sub>â². Each neighbor N<sub>1</sub>â² through N<sub>15</sub>â² further includes positional parameters such as distance d<sub>i</sub>â² between the center minutia N<sub>0</sub>â² and a neighbor N<sub>i</sub>â² and two related angles Ï<sub>i</sub>â², Î¦<sub>i</sub>â², where i is 1 through 15, as shown in <figref idref="DRAWINGS">FIG. 7D</figref>. Although <figref idref="DRAWINGS">FIGS. 7A and 7B</figref> show the same number of neighbors in reference fingerprint data chunk <b>201</b> and measured fingerprint data chunk <b>211</b>, it is not necessary because a neighborhood match may be found if the number of neighbor minutia matches satisfies the predetermined number of neighbor minutia matches. For example, for a certain neighborhood boundary drawn, the enclosed area at the reference fingerprint contains enough minutiae to select the predetermined number of neighbor minutiae, e.g., 15 minutiae. However, the enclosed area at the measured fingerprint only contains less than the predetermined number of neighbor minutiae, e.g., 12 minutiae. If the predetermined neighbor minutia match is 7 and there are 7 matches between the measured neighbor minutiae and the reference neighbor minutiae, there is a match between the reference neighborhood and the measured neighborhood even though neighborhood <b>706</b> contains different number of neighbors from neighborhood <b>756</b>.</p>
<p id="p-0085" num="0084"><figref idref="DRAWINGS">FIG. 8A</figref> illustrates the fingerprint template matching process in a smart card application. It is noted that although a fingerprint template matching algorithm is described with respect to a smart card and a smart card reader, the fingerprint template matching algorithm described hereinafter can also be executed by, for example, a personal computer, a microprocessor system, or a palm computer.</p>
<p id="p-0086" num="0085">The template matching process starts with step <b>600</b>. In one embodiment, the reference data chunks and the measured data chunks are sorted (step <b>601</b>), but the sorting is not required. In one embodiment, the data chunks are sorted according to its location information which is represented by the x- and y-coordinates. For example, the data chunks are sorted according to increasing x-coordinate x<sub>j </sub>followed by increasing y-coordinate y<sub>j</sub>. Of course, any sorting technique can be used to sort the data chunks. In general, minutia angle Î¸<sub>j </sub>is not used for sorting due to the cyclical nature of angle measurements. In one embodiment, either the reference data chunks or the measured data chunks are sorted. In another embodiment, both the reference data chunks and the measured data chunks are sorted. The data chunks are sorted for efficiency purpose, as will be explained below.</p>
<p id="p-0087" num="0086">Because the fingerprint templates are compared on a chunk-by-chunk basis and the fingerprint templates are serialized, no random access to the fingerprint templates is needed. In other words, once a data chunk has been used, that data chunk is discarded from RAM <b>106</b> and a new data chunk is read in. This allows the storage of only one data chunk from each template in RAN <b>106</b> during the comparison process.</p>
<p id="p-0088" num="0087">The first data chunk of measured fingerprint template <b>210</b>, e.g., measured chunk <b>211</b>, is loaded from, for example, RAM <b>112</b> in smart card reader <b>110</b> into RAM <b>106</b> (step <b>602</b>) through communication channel <b>120</b> (also refer to <figref idref="DRAWINGS">FIG. 1</figref>). Also in step <b>602</b>, the first data chunk of reference fingerprint template <b>200</b>, e.g., reference chunk <b>201</b>, is loaded from static memory <b>102</b> into RAM <b>106</b> of smart card <b>100</b>. Microprocessor <b>104</b> compares the two data chunks, i.e. measured chunk <b>211</b> and reference chunk <b>201</b> in RAM <b>106</b> (step <b>604</b>). How the data chunks are compared in step <b>604</b> is discussed in detail later with reference to <figref idref="DRAWINGS">FIGS. 9A</figref>, <b>9</b>B and <b>9</b>C.</p>
<p id="p-0089" num="0088">If the two fingerprint template data chunks, e.g., reference chunk <b>201</b> and measured chunk <b>211</b>, match (step <b>606</b>), a counter is incremented in step <b>608</b>. If the number of fingerprint data chunk matches is equal to or greater than a predetermined number (step <b>610</b>), measured fingerprint template <b>210</b> is considered to match reference fingerprint template <b>200</b> (step <b>612</b>) and the fingerprint template matching process terminates in step <b>614</b>. In one embodiment, more than four data chunk matches is considered a match.</p>
<p id="p-0090" num="0089">If the two fingerprint template data chunks, e.g., reference chunk <b>201</b> and measured chunk <b>211</b>, do not match (step <b>606</b>) or if the number of data chunk matches is less than the predetermined number (step <b>610</b>), it is determined whether the measured chunk used for the comparison, e.g., measured chunk <b>211</b>, is the last measured chunk in measured fingerprint template <b>200</b> (step <b>616</b>).</p>
<p id="p-0091" num="0090">If the measured chunk, e.g. measured chunk <b>211</b>, is not the last measured chunk in measured fingerprint template <b>210</b>, the next measured chunk, e.g., measured chunk <b>212</b>, in measured fingerprint template <b>210</b> is loaded into RAM <b>106</b> from RAM <b>112</b> via communication channel <b>120</b> (step <b>618</b>). The newly loaded measured chunk, e.g., measured chunk <b>212</b>, is compared with the reference chunk in RAM <b>106</b>, e.g., reference chunk <b>201</b> (step <b>604</b>). The process continues until all measured chunks in measured fingerprint template <b>210</b> have been compared or until a predetermined number of data chunk matches have been found.</p>
<p id="p-0092" num="0091">If the measured chunk, e.g., measured chunk <b>201</b>, is the last reference chunk in measured fingerprint template <b>210</b>, then it is determined whether the reference chunk in RAM <b>106</b> used for comparison, e.g., reference chunk <b>201</b>, is the last data chunk in reference fingerprint template <b>210</b> (step <b>620</b>).</p>
<p id="p-0093" num="0092">If the reference chunk, e.g., reference chunk <b>201</b>, is not the last reference chunk in reference fingerprint template <b>200</b>, the next reference chunk in reference fingerprint template <b>200</b>, e.g., reference chunk <b>202</b>, is loaded, for example, from static memory <b>102</b> into RAM <b>106</b> (step <b>622</b>). Also in step <b>622</b>, the first measured chunk in fingerprint template <b>210</b>, e.g., measured chunk <b>211</b>, is loaded into RAM <b>106</b>. The newly loaded reference chunk, e.g., reference chunk <b>202</b>, and first measured chunk, e.g., measured chunk <b>211</b>, are then compared in step <b>604</b>. The process is continued until all reference chunks in reference fingerprint template <b>200</b> are compared or until the number of data chunk matches exceeds the predetermined number.</p>
<p id="p-0094" num="0093">If the reference chunk, e.g., reference chunk <b>201</b>, is the last reference chunk in reference fingerprint template <b>200</b>, reference fingerprint template <b>200</b> and measured fingerprint template <b>210</b> do not match (step <b>624</b>) and the fingerprint template matching process terminates in step <b>614</b>.</p>
<p id="p-0095" num="0094">Alternatively, the fingerprint template matching process can be carried out in accordance with <figref idref="DRAWINGS">FIG. 8B</figref>. In <figref idref="DRAWINGS">FIG. 8B</figref>, the optional sorting is eliminated; the reference chunks are rotated first; the measured chunks are then rotated. In particular, the fingerprint template matching process starts at step <b>650</b>. The first data chunk of measured fingerprint template <b>210</b>, e.g., measured chunk <b>211</b>, is loaded from smart card reader <b>110</b> into RAM <b>106</b> (step <b>652</b>) through communication channel <b>120</b>. Also in step <b>652</b>, the first data chunk of reference fingerprint template <b>200</b>, e.g., reference chunk <b>201</b>, is loaded from static memory <b>102</b> into RAM <b>106</b> of smart card <b>100</b>. Microprocessor <b>104</b> compares the two fingerprint template data chunks, e.g., measured chunk <b>211</b> and reference chunk <b>201</b> in RAM <b>106</b> (step <b>654</b>). How the data chunks are compared in step <b>654</b> is discussed in detail below with reference to <figref idref="DRAWINGS">FIG. 9C</figref>.</p>
<p id="p-0096" num="0095">If the two data chunks, e.g., chunks <b>201</b> and <b>211</b>, match (step <b>656</b>), a counter is incremented in step <b>658</b>. If the number of data chunk matches is equal to or is greater than a predetermined number (step <b>660</b>), measured fingerprint template <b>210</b> matches reference fingerprint template <b>200</b> (step <b>662</b>) and the process ends in step <b>664</b>.</p>
<p id="p-0097" num="0096">On the other hand, if the two data chunks, e.g., data chunks <b>201</b> and <b>211</b> do not match (step <b>656</b>) or if the number of matches of the data chunks is less than the predetermined number (step <b>660</b>), it is determined whether the measured chunk used for comparison, e.g., reference chunk <b>201</b>, is the last reference chunk in reference fingerprint template <b>20</b>G (step <b>666</b>).</p>
<p id="p-0098" num="0097">If the reference chunk, e.g., reference chunk <b>201</b>, is not the last data chunk in reference fingerprint template <b>200</b>, the next reference chunk, e.g., reference chunk <b>202</b>, in reference fingerprint template <b>200</b> is loaded from static memory <b>102</b> into RAM <b>106</b> (step <b>668</b>). The newly loaded reference chunk, e.g., reference chunk <b>202</b>, is compared with the measured chunk in RAM <b>106</b>, e.g., measured chunk <b>211</b>, in step <b>654</b>. The process continues.</p>
<p id="p-0099" num="0098">If the reference chunk, e.g., reference chunk <b>201</b>, is the last reference chunk in reference fingerprint template <b>200</b>, it is determined whether the measured chunk in RAM <b>106</b> used for comparison, e.g., measured chunk <b>211</b>, is the last measured chunk in measured fingerprint template <b>210</b> (step <b>670</b>).</p>
<p id="p-0100" num="0099">If the measured chunk, e.g., measured chunk <b>211</b>, is not the last data chunk in measured fingerprint template <b>210</b>, the next measured chunk in measured fingerprint template <b>210</b>, e.g., measured chunk <b>212</b>, is loaded from RAM <b>112</b> into RAM <b>106</b> of smart card <b>100</b> via communication channel <b>120</b> (step <b>672</b>). The first reference chunk in fingerprint template <b>200</b>, e.g., reference chunk <b>201</b>, is also loaded into RAM <b>106</b> (step <b>672</b>). The newly loaded measured chunk, e.g., measured chunk <b>212</b>, and the first reference chunk, e.g., reference chunk <b>201</b>, are then compared (step <b>654</b>).</p>
<p id="p-0101" num="0100">If the measured chunk, e.g., measured chunk <b>211</b>, is the last measured chunk in measured fingerprint template <b>210</b>, measured fingerprint template <b>210</b> and reference fingerprint template <b>200</b> do not match (step <b>674</b>) and the fingerprint template matching process terminates at step <b>664</b>.</p>
<p id="p-0102" num="0101"><figref idref="DRAWINGS">FIG. 9A</figref> illustrates a flowchart of step <b>604</b> of how the fingerprint template data chunks are compared in detail. A reference chunk includes a positional parameter (x<sub>j</sub>, y<sub>j</sub>) where x<sub>j </sub>is the x-coordinate and y<sub>j </sub>is the y-coordinate of a reference minutia. A measured chunk includes a positional parameter of (x<sub>j</sub>â², y<sub>j</sub>â²) where x<sub>j</sub>â² is the x-coordinate and y<sub>j</sub>â² is the y-coordinate of a measured minutia. In this embodiment, the measured data chunks are sorted in accordance with x-coordinates x<sub>j </sub>followed by y-coordinates y<sub>j</sub>. In one embodiment, the x-coordinates are compared by subtracting measured x-coordinate x<sub>j</sub>â² from reference x-coordinate x<sub>j</sub>, i.e. x<sub>j</sub>âx<sub>j</sub>â²=x<sub>jdiff </sub>(step <b>850</b>). If the absolute value of difference x<sub>jdiff </sub>is greater than the predetermined tolerance x<sub>jtolerance </sub>(step <b>852</b>), then it is determined whether the raw difference x<sub>jdiff </sub>is less than the predetermined tolerance x<sub>jtolerance </sub>(step <b>868</b>). If difference x<sub>jdiff </sub>is less than x<sub>jtolerance</sub>, the rest of the measured data chunks will not be compared against the reference data chunk and it is determined whether the reference chunk used is the last reference chunk (step <b>620</b> in <figref idref="DRAWINGS">FIG. 8A</figref>) and the process continues. If the difference x<sub>jdiff </sub>is greater than x<sub>jtolerance</sub>, the chunks do not match (step <b>872</b>) and the process continues at step <b>606</b> (<figref idref="DRAWINGS">FIG. 8A</figref>).</p>
<p id="p-0103" num="0102">If the absolute value of the difference x<sub>jdiff </sub>is less than or equal to a predetermined tolerance x<sub>jtolerance </sub>(step <b>852</b>), i.e., the x-coordinates match, the y-coordinates are compared. Measured y-coordinate y<sub>j</sub>â² is subtracted from reference y-coordinate y<sub>j</sub>, i.e. y<sub>j</sub>ây<sub>j</sub>â²=y<sub>jdiff </sub>(step <b>854</b>). If the absolute value of the difference y<sub>jdiff </sub>is greater than the predetermined tolerance y<sub>jtolerance </sub>(step <b>856</b>), it is determined whether the raw difference y<sub>jdiff </sub>is less than y<sub>jtolerance</sub>. If difference y<sub>jdiff </sub>is less than y<sub>jtolerance</sub>, the remaining measured data chunks will not be compared against the reference data chunk and it is determined whether the reference chunk used for comparison is the last reference chunk (step <b>620</b> in <figref idref="DRAWINGS">FIG. 8A</figref>). If difference y<sub>jdiff </sub>is greater than y<sub>jtolerance</sub>, the chunks do not match (step <b>872</b>) and the process continues at step <b>606</b> (<figref idref="DRAWINGS">FIG. 8A</figref>). If the absolute value of the difference y<sub>jdiff </sub>is less than or equal to a predetermined tolerance y<sub>jtolerance </sub>(step <b>856</b>), i.e., the y-coordinates match, the minutia angles Î¸<sub>j </sub>and Î¸<sub>j</sub>â² are compared.</p>
<p id="p-0104" num="0103">It is noted that a straight subtraction in degree domain does not work well with angles due to their cyclical nature. Measured minutia angle Î¸<sub>j</sub>â² is subtracted from reference minutia angle Î¸<sub>j</sub>, i.e. Î¸<sub>j</sub>âÎ¸<sub>j</sub>â²=Î¸<sub>jdiff </sub>(step <b>858</b>). If the absolute value of the difference Î¸<sub>jdiff </sub>is less than or equal to a predetermined tolerance Î¸<sub>jtolerance </sub>(step <b>860</b>), i.e., the minutia angles match. If the absolute value of the difference Î¸<sub>jdiff </sub>is greater than the predetermined tolerance Î¸<sub>jtolerance</sub>, it is determined whether the absolute value of the difference Î¸<sub>jdiff </sub>is greater than or equal to the difference between the maximum allowable quantized minutia angle Î¸<sub>jmax </sub>and the predetermined tolerance Î¸<sub>jtolerance </sub>(step <b>861</b>). If value |Î¸<sub>jdiff</sub>| is greater than or equal to the difference between values Î¸<sub>jmax </sub>and Î¸<sub>jtolerance</sub>, the minutia angles match.</p>
<p id="p-0105" num="0104">An example for angle comparison is described below. In the embodiment where the angles are quantized to 6 bits, thus having values 0 to 63, 0 is the minimum value for Î¸<sub>j </sub>(Î¸<sub>jmin</sub>) and 63 is the maximum value for Î¸<sub>j </sub>(Î¸<sub>jmax</sub>). The quantized values are then subtracted, e.g., |Î¸<sub>j</sub>âÎ¸<sub>j</sub>â²|=Î¸<sub>jdiff</sub>, if minutia angle Î¸<sub>j </sub>has a quantized value of 61 while minutia angle Î¸<sub>j</sub>â² has a quantized value of 63, and the match tolerance is 2. Then |61â63|=2, which is within the tolerance range. Thus, there is a match between minutia angles Î¸<sub>j </sub>and Î¸<sub>j</sub>â². In a situation where angle Î¸<sub>j </sub>has a quantized value of 0 while minutia angle Î¸<sub>j</sub>â² has a quantized value of 63, and the match tolerance is 2. Then |0â63|=63, which is out of the tolerance range. However, due to the cyclical nature, the difference between 63 and 0 is actually only 1, which is within the tolerance. Therefore, in addition to checking whether |Î¸<sub>j</sub>âÎ¸<sub>j</sub>â²|â¦Î¸<sub>jtolerance</sub>, whether Î¸<sub>jdiff</sub>â§Î¸<sub>jmax</sub>âÎ¸<sub>tolerance </sub>is also checked. In the above example, Î¸<sub>jdiff</sub>â§Î¸<sub>jmax</sub>âÎ¸<sub>jtolerance </sub>(63â§63â2) is true. Therefore, minutia angles Î¸<sub>j </sub>and Î¸<sub>j</sub>â² match.</p>
<p id="p-0106" num="0105">If the minutia angles Î¸<sub>j </sub>and Î¸<sub>j</sub>â² match, neighborhood NH<sub>j </sub>is compared with neighborhood NH<sub>j</sub>â² in step <b>862</b>, which is described in detail in reference to <figref idref="DRAWINGS">FIG. 10</figref>.</p>
<p id="p-0107" num="0106">If the neighborhood NH<sub>j </sub>from the reference chunk matches neighborhood NH<sub>j</sub>â² from the measured chunk (step <b>864</b>), the data chunks match (step <b>866</b>). Conversely, if any of the parameters, i.e. x-coordinates, y-coordinates, minutia angles and neighborhoods, fail to match, the data chunks do not match (step <b>872</b>). The typical value for x<sub>jtolerance </sub>and y<sub>jtolerance </sub>is 4 and the typical value for Î¸<sub>jtolerance </sub>is 7. These typical values are derived from experimentation.</p>
<p id="p-0108" num="0107">Since the measured data chunks are sorted in accordance with the x-coordinates x<sub>j</sub>, the comparisons for the remaining measured data chunks can be eliminated because the remaining measured data chunks will also have x-coordinates x<sub>j</sub>â² exceeding the tolerance. Hence, sorting cuts down the number of comparisons. The number of comparisons can be further reduced by sorting the data chunks by y-coordinates y<sub>j</sub>.</p>
<p id="p-0109" num="0108">A flag can be set so that only a subset of the measured data chunks is used for further comparisons. <figref idref="DRAWINGS">FIG. 9B</figref> illustrates a flowchart of step <b>604</b> of how the fingerprint template data chunks are compared in detail. The x-coordinates are compared by subtracting measured x-coordinate x<sub>j</sub>â² from reference x-coordinate x<sub>j</sub>, i.e. x<sub>j</sub>âx<sub>j</sub>â²=x<sub>jdiff </sub>(step <b>880</b>). If the absolute value of the difference x<sub>jdiff </sub>is less than or equal to a predetermined tolerance x<sub>jtolerance </sub>(step <b>881</b>), it is determined whether this is the first match between reference x-coordinate x<sub>j </sub>and measured x-coordinate x<sub>j</sub>â² (step <b>885</b>). If the match is the first match, a flag is set for the measured chunk containing the first matching x-coordinate x<sub>j</sub>â² (step <b>886</b>).</p>
<p id="p-0110" num="0109">If the absolute value of the difference x<sub>jdiff </sub>is greater than the predetermined tolerance x<sub>jtolerance </sub>(step <b>881</b>), then it is determined whether the difference x<sub>jdiff </sub>is less than the predetermined tolerance x<sub>jtolerance </sub>(step <b>882</b>). If difference x<sub>jdiff </sub>is less than x<sub>jtolerance</sub>, the rest of the measured data chunks will not be compared against the reference data chunk and it is determined whether the reference chunk used is the last reference chunk (step <b>883</b>). If the reference chunk is not the last chunk in the reference fingerprint template, the next reference chunk and the start chunk is loaded into the RAM for comparison (step <b>884</b>) and the process continues with step <b>880</b>. If the reference chunk is the last chunk in the reference fingerprint template, the fingerprint templates do not match (step <b>624</b> in <figref idref="DRAWINGS">FIG. 8A</figref>).</p>
<p id="p-0111" num="0110">If the match is not the first match (step <b>885</b>) or after the start chunk has been flagged (step <b>886</b>), the y-coordinates are compared. Measured y-coordinate y<sub>j</sub>â² is subtracted from reference y-coordinate y<sub>j</sub>, i.e. y<sub>j</sub>ây<sub>j</sub>â²=y<sub>jdiff </sub>(step <b>887</b>). If the absolute value of the difference y<sub>jdiff </sub>is greater than the predetermined tolerance y<sub>jtoleracne </sub>(step <b>888</b>), it is determined whether the difference y<sub>jdiff </sub>is less than y<sub>jtolerance </sub>(step <b>889</b>). If difference y<sub>jdiff </sub>is less than y<sub>jtolerance</sub>, the remaining measured data chunks will not be compared against the reference data chunk and it is determined whether the reference chunk used for comparison is the last reference chunk (step <b>883</b>). If difference y<sub>jdiff </sub>is greater than y<sub>jtolerance</sub>, the chunks do not match (step <b>896</b>) and the process continues at step <b>606</b> (<figref idref="DRAWINGS">FIG. 8A</figref>).</p>
<p id="p-0112" num="0111">If the absolute value of the difference y<sub>jdiff </sub>is less than or equal to a predetermined tolerance y<sub>jtolerance </sub>(step <b>888</b>), the remaining steps <b>890</b> through <b>896</b> are similar to steps <b>858</b>-<b>866</b> described in reference to <figref idref="DRAWINGS">FIG. 9A</figref>.</p>
<p id="p-0113" num="0112">As can be seen from <figref idref="DRAWINGS">FIGS. 9A and 9B</figref>, x-coordinates and y-coordinates comparison filters the number of comparisons. Although the fingerprint template matching algorithm is capable of comparing a fingerprint with a rotated and/or translated same fingerprint, the algorithm can execute faster if the finger is constrained in a certain orientation. By allowing translation and rotation, none, or very few values can be eliminated because the tolerance must be sufficiently large so as not to eliminate everything during the comparison and thus generating a false rejection.</p>
<p id="p-0114" num="0113"><figref idref="DRAWINGS">FIG. 9C</figref> illustrates a flowchart of step <b>654</b> of how the fingerprint template data chunks are compared in detail, where every chunk is compared. Parameters x<sub>j </sub>and x<sub>j</sub>â² are compared (step <b>806</b>), e.g., by straight subtractions. If value x<sub>jdiff</sub>, i.e., |x<sub>j</sub>âx<sub>j</sub>â²|=x<sub>jdiff</sub>, is greater than a tunable, predetermined tolerance x<sub>jtolerance</sub>, parameter x<sub>j </sub>does not match parameter x<sub>j</sub>â². Therefore, the data chunks do not match (step <b>824</b>) and the next data chunk is read (refer to <figref idref="DRAWINGS">FIG. 8B</figref>). When value x<sub>jdiff </sub>is equal to or is less than the tolerance x<sub>jtolerance </sub>(step <b>812</b>), parameter x<sub>j </sub>matches parameter x<sub>j</sub>â² (step <b>808</b>) and parameter y<sub>j </sub>is compared with parameter y<sub>j</sub>â² in step <b>810</b> with a straight subtraction.</p>
<p id="p-0115" num="0114">If value y<sub>jdiff</sub>, i.e. |y<sub>j</sub>â²ây<sub>j</sub>|=y<sub>jdiff</sub>, is greater than a tunable, predetermined tolerance y<sub>jtolerance</sub>, parameter y<sub>j </sub>does not match parameter y<sub>j</sub>â² (step <b>812</b>) and the data chunks do not match (step <b>824</b>). The next data chunk is read (see <figref idref="DRAWINGS">FIG. 8B</figref>). When value y<sub>jdiff </sub>is equal to or is less than the tolerance y<sub>jtolerance</sub>, parameter y<sub>j </sub>matches parameter y<sub>j</sub>â² (step <b>812</b>) and parameter Î¸<sub>j </sub>is compared with parameter Î¸<sub>j</sub>â² in step <b>814</b>.</p>
<p id="p-0116" num="0115">If minutia angle difference Î¸<sub>jdiff </sub>is greater than a tunable, predetermined minutia angle tolerance Î¸<sub>tolerance</sub>, parameter Î¸<sub>j </sub>does not match parameter Î¸<sub>j</sub>â² (step <b>816</b>) and the data chunks do not match (step <b>824</b>) and the next data chunk is read (see <figref idref="DRAWINGS">FIGS. 8A and 8B</figref>). When minutia angle difference Î¸<sub>jdiff </sub>is equal to or is less than the minutia angle tolerance <sub>jtolerance </sub>or when difference Î¸<sub>jdiff </sub>is greater than or equal to the maximum allowable quantized minutia angle minus the predetermined tolerance Î¸<sub>tolerance</sub>, parameter Î¸<sub>j </sub>matches parameter Î¸<sub>j</sub>â² (step <b>816</b>) and neighborhood NH<sub>j </sub>is compared with neighborhood NH<sub>j</sub>â² in step <b>818</b>, which is described in detail in reference to <figref idref="DRAWINGS">FIG. 10</figref>. If the neighborhood NH<sub>j </sub>from the reference chunk matches neighborhood NH<sub>j</sub>â² from the measured chunk (step <b>820</b>)., the data chunks match (step <b>822</b>). Conversely, if the neighborhood NH<sub>j </sub>and neighborhood NH<sub>j</sub>â² do not match, the data chunks do not match. The sequence of comparison may vary. For example, parameter y<sub>j </sub>maybe compared before comparing parameter x<sub>j</sub>; angle Î¸<sub>j </sub>maybe compared before comparing parameter y<sub>j</sub>; and so on.</p>
<p id="p-0117" num="0116"><figref idref="DRAWINGS">FIG. 10</figref> shows a flowchart of the neighborhood matching algorithm of steps <b>862</b>, <b>893</b> and <b>818</b>. In step <b>900</b>, the first neighbor in an reference chunk (hereinafter reference neighbor), e.g., N<sub>1 </sub>(<figref idref="DRAWINGS">FIG. 7A</figref>), and the first neighbor in a measured chunk (hereinafter measured neighbor), e.g., N<sub>1</sub>â² (<figref idref="DRAWINGS">FIG. 7B</figref>), are compared. Step <b>900</b> is described in detail below.</p>
<p id="p-0118" num="0117">If the neighbors match (step <b>902</b>), a neighbor counter is incremented in step <b>904</b>. If the counter value is equal to or is greater than a predetermined number of neighbor matches (step <b>906</b>), the neighborhoods match (step <b>918</b>). For example, 7 neighbor matches for a 15-neighbor neighborhood can be considered a match of the neighborhoods.</p>
<p id="p-0119" num="0118">If the neighbors do not match (step <b>902</b>) or if the number of neighbor matches is less than the predetermined number of neighbor matches (step <b>906</b>), it is determined whether the measured neighbor used in comparison is the last neighbor in the measured chunk (step <b>908</b>).</p>
<p id="p-0120" num="0119">If the measured neighbor is not the last measured neighbor in the measured chunk, the next measured neighbor is read (step <b>910</b>) and the new measured neighbor is compared with the reference neighbor already in use. If the measured neighbor is the last measured neighbor in the measured chunk, it is determined whether the reference neighbor is the last reference neighbor in the reference chunk (step <b>912</b>). If the reference neighbor is not the last reference neighbor in the reference chunk, the next reference neighbor and the first measured neighbor are read (step <b>914</b>) and compared (step <b>900</b>). If, however, the reference neighbor is the last reference neighbor in the reference chunk, the neighborhoods do not match (step <b>916</b>).</p>
<p id="p-0121" num="0120"><figref idref="DRAWINGS">FIG. 11A</figref> illustrates step <b>900</b> in <figref idref="DRAWINGS">FIG. 10</figref> in detail and shows a neighbor to neighbor comparison. The distances d<sub>i </sub>of an reference neighbor is compared with a distance d<sub>i</sub>â² of a measured neighbor in step <b>1000</b>. This distance comparison is done with straight subtractions, i.e. |d<sub>i</sub>âd<sub>i</sub>â²|=d<sub>idiff</sub>. If the distance difference d<sub>idiff </sub>meets the distance tolerance d<sub>itolerance </sub>(step <b>1002</b>), angle Ï<sub>i </sub>is compared with angle Ï<sub>i</sub>â² (step <b>1004</b>).</p>
<p id="p-0122" num="0121">Angle comparison is again done in a similar manner as minutia angle comparison described above. Specifically, angle Ï<sub>i </sub>matches angle Ï<sub>i</sub>â² if |Ï<sub>j</sub>âÏ<sub>j</sub>â²|â¦Ï<sub>jtolerance </sub>and Ï<sub>j</sub>âÏ<sub>j</sub>â²â§Ï<sub>jmax</sub>âÏ<sub>jtolerance </sub>(step <b>1006</b>).</p>
<p id="p-0123" num="0122">Angles Î¦<sub>i </sub>and Î¦<sub>i</sub>â² are then compared in step <b>1008</b>. Similarly, angle Î¦<sub>i </sub>matches angle Î¦<sub>i</sub>â² if |Î¦<sub>j</sub>âÎ¦<sub>j</sub>â²|â¦Î¦<sub>jtolerance </sub>and Î¦<sub>j</sub>âÎ¦<sub>j</sub>â²â§Î¦<sub>jmax</sub>âÎ¦<sub>jtolerance </sub>(step <b>1010</b>). The neighbors match (step <b>1012</b>) if all parameters for a neighbor, e.g., distance d<sub>i </sub>and angles Î¦<sub>i </sub>and Î¦<sub>j</sub>, match. The typical value for d<sub>itolerance </sub>is l and the typical value for Î¦<sub>itolerance </sub>and Î¦<sub>itolerance </sub>is 6. These typical values are derived from experimentation.</p>
<p id="p-0124" num="0123">If any of the parameters, i.e., distance d<sub>i </sub>or angle Ï<sub>i </sub>or Î¦<sub>i</sub>, do not match, the neighbors do not match (step <b>1014</b>). Again, the sequence of comparison, i.e., d<sub>i</sub>, Ï<sub>i </sub>and Î¦<sub>i</sub>, may be modified.</p>
<p id="p-0125" num="0124"><figref idref="DRAWINGS">FIG. 11B</figref> shows an alternative embodiment of neighbor comparison process in step <b>900</b>. In this embodiment, the measured chunks are sorted in accordance with distance d<sub>i</sub>â². Measured distances d<sub>i</sub>â² is subtracted from reference distance d<sub>i </sub>to derive a difference d<sub>idiff </sub>(step <b>1050</b>). If the distance difference d<sub>idiff </sub>meets a predetermined distance tolerance d<sub>itolerance </sub>(step <b>1052</b>), angle Ï<sub>i </sub>is compared with angle Ï<sub>i</sub>â² (step <b>1054</b>). If angles Ï<sub>i </sub>and Ï<sub>j</sub>â² match (step <b>1056</b>), Î¦<sub>i </sub>and Î¦<sub>i</sub>â² are compared in step <b>1058</b>. If angles Î¦<sub>i </sub>and Î¦<sub>i</sub>â² match (step <b>1060</b>), the neighbors match (step <b>1062</b>).</p>
<p id="p-0126" num="0125">If measured distance d<sub>i </sub>does not match reference distance d<sub>i</sub>â², it is determined whether the difference d<sub>idiff </sub>is less than the predetermined tolerance d<sub>itolerance </sub>(step <b>1053</b>). If the difference d<sub>idiff </sub>is less than the predetermined tolerance d<sub>itolerance</sub>, the neighbors do not match and the remaining measured neighbors are not compared. The process continues with step <b>912</b> in <figref idref="DRAWINGS">FIG. 10</figref>. If any of the parameters, i.e., distance d<sub>i </sub>or angle Ï<sub>i </sub>or Î¦<sub>i</sub>, do not match, the neighbors do not match (Step <b>1064</b>).</p>
<p id="p-0127" num="0126">In one embodiment, for multiple users where multiple reference fingerprints are stored in a database, if the measured fingerprint template does not match the first reference fingerprint template, the next reference fingerprint template is compared with the measured fingerprint template, as shown in <figref idref="DRAWINGS">FIG. 12</figref>. Multiple reference fingerprint template comparison starts with step <b>680</b>. The first reference fingerprint template and the measured fingerprint template are loaded into the RAM (one chunk at a time) (step <b>682</b>). The fingerprint.templates are compared in step <b>684</b>, in accordance with the template comparison algorithm described above, with reference to <figref idref="DRAWINGS">FIGS. 8A and 8B</figref>. Whether there is a match between the fingerprint templates is determined in step <b>686</b>. If there is a match (step <b>688</b>), the process ends in step <b>696</b>. If there is no match, it is determined whether the last reference fingerprint template has been used (step <b>690</b>). If the last reference fingerprint template has been used, there is no match (step <b>692</b>) and the process ends in step <b>696</b>. However, if the last reference fingerprint template has not been used (step <b>690</b>), the next reference fingerprint template is loaded to be compared with the measured fingerprint template (step <b>694</b>). In general, the number of reference templates can be stored is limited by the memory capacity. For example, in a conventional smart card, the typical static memory available is 1 Kilobytes to 16 Kilobytes. Therefore, the number of reference templates can be stored is limited by that memory capacity.</p>
<p id="p-0128" num="0127">In another embodiment for a multi-user system, the measured fingerprint template is compared with all the reference templates in a similar manner as described above. However, in this embodiment, for each template comparison, all data chunks in both the measured fingerprint template and the reference template are compared. For example, even when a match is found for a pair of fingerprint templates, e.g., more than four data chunk matches, the remaining combinations of data chunks are compared. The number of data chunk matches for each reference fingerprint template is stored. If the measured fingerprint template matches more than one reference fingerprint templates, then the user producing the reference fingerprint template that gives the highest number of data chunk matches is identified as the user.</p>
<p id="p-0129" num="0128">The algorithm in accordance with the present invention may be executed in a microprocessor having minimal capabilities, such as an 8-bit microprocessor on a conventional smart card because every parameter used in the algorithm is less than 8 bits. For example, location parameters x<sub>j </sub>and y<sub>j </sub>are quantized to four bits each; minutia angle Î¸<sub>j </sub>and angles Ï<sub>i </sub>and Î¦<sub>i </sub>are quantized to six bits each; and distance d<sub>i </sub>is quantized to five bits. In addition, the fingerprint template matching algorithm in accordance with the present invention does not involve computational intensive processes involving for example, floating points, multiplications, and divisions. Instead, the algorithm in accordance with the present invention only uses subtractions. Hence, the algorithm can be executed by a weak microprocessor having very low speed, e.g., between 1 and 10 MegaHertz, such as a microprocessor in a conventional smart card.</p>
<p id="p-0130" num="0129">Although the invention has been described with reference to particular embodiments, the description is only an example of the invention's application and should not be taken as a limitation. Various other adaptations and combinations of features of the embodiments disclosed are within the scope of the invention as defined by the following claims.</p>
<?DETDESC description="Detailed Description" end="tail"?>
</description>
<us-math idrefs="MATH-US-00001" nb-file="US07299360-20071120-M00001.NB">
<img id="EMI-M00001" he="9.57mm" wi="76.20mm" file="US07299360-20071120-M00001.TIF" alt="embedded image " img-content="math" img-format="tif"/>
</us-math>
<us-math idrefs="MATH-US-00002" nb-file="US07299360-20071120-M00002.NB">
<img id="EMI-M00002" he="11.26mm" wi="76.20mm" file="US07299360-20071120-M00002.TIF" alt="embedded image " img-content="math" img-format="tif"/>
</us-math>
<us-claim-statement>I claim:</us-claim-statement>
<claims id="claims">
<claim id="CLM-00001" num="00001">
<claim-text>1. A fingerprint verification system, comprising:
<claim-text>a smart card reader including
<claim-text>a fingerprint sensor, and</claim-text>
<claim-text>a first microprocessor generating by minutia extraction a measured template having a plurality of measured data chunks from data read by said fingerprint sensor, each measured data chunk representing a fingerprint minutia;</claim-text>
</claim-text>
<claim-text>a smart card including
<claim-text>a static memory storing a reference template having a plurality of reference data chunks,</claim-text>
<claim-text>a second microprocessor executing a matching algorithm for determining whether said measured template matches said reference template, and</claim-text>
<claim-text>a random access memory (RAM) storing a subset of said reference data chunks and a subset of said measured data chunks during execution of said matching algorithm; and</claim-text>
<claim-text>a communication channel between said smart card and said smart card reader,</claim-text>
</claim-text>
<claim-text>wherein each of said measured data chunks and each of said reference data chunks comprise:
<claim-text>a location of a minutia;</claim-text>
<claim-text>a minutia angle of said minutia; and</claim-text>
<claim-text>a neighborhood of said minutia.</claim-text>
</claim-text>
</claim-text>
</claim>
<claim id="CLM-00002" num="00002">
<claim-text>2. The system of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein said subset of said reference data chunks constitutes a substantially reduced version of said reference template.</claim-text>
</claim>
<claim id="CLM-00003" num="00003">
<claim-text>3. The system of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein said subset of said measured data chunks constitutes a substantially reduced version of said measured template.</claim-text>
</claim>
<claim id="CLM-00004" num="00004">
<claim-text>4. The system of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein a measured data chunk is loaded into said RAM of said smart card through said Communication channel.</claim-text>
</claim>
<claim id="CLM-00005" num="00005">
<claim-text>5. The system of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein said location comprises: a first coordinate; and a second coordinate.</claim-text>
</claim>
<claim id="CLM-00006" num="00006">
<claim-text>6. The system of <claim-ref idref="CLM-00005">claim 5</claim-ref>, wherein said first coordinate is quantized.</claim-text>
</claim>
<claim id="CLM-00007" num="00007">
<claim-text>7. The system of <claim-ref idref="CLM-00006">claim 6</claim-ref>, wherein said first coordinate is quantized to equal to or less than eight bits.</claim-text>
</claim>
<claim id="CLM-00008" num="00008">
<claim-text>8. The system of <claim-ref idref="CLM-00005">claim 5</claim-ref>, wherein said second coordinate is quantized.</claim-text>
</claim>
<claim id="CLM-00009" num="00009">
<claim-text>9. The system of <claim-ref idref="CLM-00008">claim 8</claim-ref>, wherein said second coordinate is quantized to equal to or less than eight bits.</claim-text>
</claim>
<claim id="CLM-00010" num="00010">
<claim-text>10. The system of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein said minutia angle is quantized.</claim-text>
</claim>
<claim id="CLM-00011" num="00011">
<claim-text>11. The system of <claim-ref idref="CLM-00010">claim 10</claim-ref>, wherein said minutia angle is quantized to equal to or less than eight bits.</claim-text>
</claim>
<claim id="CLM-00012" num="00012">
<claim-text>12. The system of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein said neighborhood comprises positional parameters of a plurality of a predetermined number of neighbors.</claim-text>
</claim>
<claim id="CLM-00013" num="00013">
<claim-text>13. The system of <claim-ref idref="CLM-00012">claim 12</claim-ref>, wherein said positional parameters comprises:
<claim-text>a distance between said minutia and a neighbor minutia;</claim-text>
<claim-text>a first angle between a first coordinate in a direction tangential to a ridge where said minutia is extracted and a line drawn between said minutia and said neighbor minutia; and</claim-text>
<claim-text>a second angle between said first coordinate and a second coordinate in a direction tangential to a ridge where said neighbor minutia is extracted.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00014" num="00014">
<claim-text>14. The system of <claim-ref idref="CLM-00013">claim 13</claim-ref>, wherein said distance is quantized.</claim-text>
</claim>
<claim id="CLM-00015" num="00015">
<claim-text>15. The system of <claim-ref idref="CLM-00014">claim 14</claim-ref>, wherein said distance is quantized to equal to or less than eight bits.</claim-text>
</claim>
<claim id="CLM-00016" num="00016">
<claim-text>16. The system of <claim-ref idref="CLM-00013">claim 13</claim-ref>, wherein said first angle is quantized.</claim-text>
</claim>
<claim id="CLM-00017" num="00017">
<claim-text>17. The system of <claim-ref idref="CLM-00016">claim 16</claim-ref>, wherein said first angle is quantized to equal to or less than eight bits.</claim-text>
</claim>
<claim id="CLM-00018" num="00018">
<claim-text>18. The system of <claim-ref idref="CLM-00013">claim 13</claim-ref>, wherein said second angle is quantized.</claim-text>
</claim>
<claim id="CLM-00019" num="00019">
<claim-text>19. The system of <claim-ref idref="CLM-00018">claim 18</claim-ref>, wherein said second angle is quantized to equal to or less than eight bits.</claim-text>
</claim>
<claim id="CLM-00020" num="00020">
<claim-text>20. The system of <claim-ref idref="CLM-00012">claim 12</claim-ref>, wherein said neighbors are sorted.</claim-text>
</claim>
<claim id="CLM-00021" num="00021">
<claim-text>21. The system of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein said second microprocessor is an 8-bit microprocessor.</claim-text>
</claim>
<claim id="CLM-00022" num="00022">
<claim-text>22. The system of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein said second microprocessor has a speed between approximately 1 megahertz and approximately 10 megahertz.</claim-text>
</claim>
<claim id="CLM-00023" num="00023">
<claim-text>23. The system of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein said RAM is approximately 256 kilobyte in size.</claim-text>
</claim>
<claim id="CLM-00024" num="00024">
<claim-text>24. The system of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein said reference data chunks are sorted.</claim-text>
</claim>
<claim id="CLM-00025" num="00025">
<claim-text>25. The system of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein said measured data chunks are sorted.</claim-text>
</claim>
<claim id="CLM-00026" num="00026">
<claim-text>26. The system of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein said RAM stores only one reference data chunk and only one measured data chunk during execution of said matching algorithm.</claim-text>
</claim>
</claims>
</us-patent-grant>
