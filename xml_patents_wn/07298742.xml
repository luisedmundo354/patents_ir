<us-patent-grant lang="EN" dtd-version="v4.2 2006-08-23" file="US07298742-20071120.XML" status="PRODUCTION" id="us-patent-grant" country="US" date-produced="20071106" date-publ="20071120">
<us-bibliographic-data-grant>
<publication-reference>
<document-id>
<country>US</country>
<doc-number>07298742</doc-number>
<kind>B2</kind>
<date>20071120</date>
</document-id>
</publication-reference>
<application-reference appl-type="utility">
<document-id>
<country>US</country>
<doc-number>10444273</doc-number>
<date>20030523</date>
</document-id>
</application-reference>
<us-application-series-code>10</us-application-series-code>
<priority-claims>
<priority-claim sequence="01" kind="national">
<country>TW</country>
<doc-number>91116678 A</doc-number>
<date>20020725</date>
</priority-claim>
</priority-claims>
<us-term-of-grant>
<us-term-extension>921</us-term-extension>
</us-term-of-grant>
<classifications-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>H</section>
<class>04</class>
<subclass>L</subclass>
<main-group>12</main-group>
<subgroup>28</subgroup>
<symbol-position>F</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20071120</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
</classifications-ipcr>
<classification-national>
<country>US</country>
<main-classification>370389</main-classification>
<further-classification>370475</further-classification>
</classification-national>
<invention-title id="d0e71">Network address conversion system and the method thereof</invention-title>
<references-cited>
<citation>
<patcit num="00001">
<document-id>
<country>US</country>
<doc-number>6944167</doc-number>
<kind>B1</kind>
<name>McPherson</name>
<date>20050900</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370401</main-classification></classification-national>
</citation>
<citation>
<patcit num="00002">
<document-id>
<country>US</country>
<doc-number>7139841</doc-number>
<kind>B1</kind>
<name>Somasundaram et al.</name>
<date>20061100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370392</main-classification></classification-national>
</citation>
<citation>
<patcit num="00003">
<document-id>
<country>US</country>
<doc-number>2002/0042832</doc-number>
<kind>A1</kind>
<name>Fallentine et al.</name>
<date>20020400</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>709230</main-classification></classification-national>
</citation>
<citation>
<patcit num="00004">
<document-id>
<country>US</country>
<doc-number>2003/0065785</doc-number>
<kind>A1</kind>
<name>Jain</name>
<date>20030400</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>709227</main-classification></classification-national>
</citation>
<citation>
<patcit num="00005">
<document-id>
<country>US</country>
<doc-number>2004/0028035</doc-number>
<kind>A1</kind>
<name>Read</name>
<date>20040200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370352</main-classification></classification-national>
</citation>
<citation>
<patcit num="00006">
<document-id>
<country>US</country>
<doc-number>2004/0037268</doc-number>
<kind>A1</kind>
<name>Read</name>
<date>20040200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370352</main-classification></classification-national>
</citation>
<citation>
<patcit num="00007">
<document-id>
<country>US</country>
<doc-number>2004/0210672</doc-number>
<kind>A1</kind>
<name>Pulleyn et al.</name>
<date>20041000</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>709245</main-classification></classification-national>
</citation>
</references-cited>
<number-of-claims>10</number-of-claims>
<us-exemplary-claim>1</us-exemplary-claim>
<us-field-of-classification-search>
<classification-national>
<country>US</country>
<main-classification>None</main-classification>
</classification-national>
</us-field-of-classification-search>
<figures>
<number-of-drawing-sheets>5</number-of-drawing-sheets>
<number-of-figures>5</number-of-figures>
</figures>
<us-related-documents>
<related-publication>
<document-id>
<country>US</country>
<doc-number>20040017818</doc-number>
<kind>A1</kind>
<date>20040129</date>
</document-id>
</related-publication>
</us-related-documents>
<parties>
<applicants>
<applicant sequence="001" app-type="applicant-inventor" designation="us-only">
<addressbook>
<last-name>Chuang</last-name>
<first-name>Chenming</first-name>
<address>
<city>Chung-Ho</city>
<country>TW</country>
</address>
</addressbook>
<nationality>
<country>TW</country>
</nationality>
<residence>
<country>TW</country>
</residence>
</applicant>
</applicants>
<agents>
<agent sequence="01" rep-type="attorney">
<addressbook>
<orgname>Seyfarth Shaw LLP</orgname>
<address>
<country>unknown</country>
</address>
</addressbook>
</agent>
</agents>
</parties>
<assignees>
<assignee>
<addressbook>
<orgname>Leadtek Research Inc.</orgname>
<role>03</role>
<address>
<city>Taipei Hsien</city>
<country>TW</country>
</address>
</addressbook>
</assignee>
</assignees>
<examiners>
<primary-examiner>
<last-name>Pham</last-name>
<first-name>Chi</first-name>
<department>2616</department>
</primary-examiner>
<assistant-examiner>
<last-name>Ly</last-name>
<first-name>Anh-Vu</first-name>
</assistant-examiner>
</examiners>
</us-bibliographic-data-grant>
<abstract id="abstract">
<p id="p-0001" num="0000">The present invention discloses a network address conversion system and the method thereof, which applies to products of VoIP and is compliant with Q.931 and H.245 protocols used by the videophone. The network address conversion system according to the present invention comprises a private network, a public network, a NAT router and a network server. The NAT router is used to convert the private IP address of the data packet from the private network into a public IP address for entering the public network, and to convert the public IP address of the data packet from the public network into a private IP address for entering the private network. The network server is connected to the public network to execute a public IP address query program, and then transmits the public IP address back to the node in the private network.</p>
</abstract>
<drawings id="DRAWINGS">
<figure id="Fig-EMI-D00000" num="00000">
<img id="EMI-D00000" he="110.32mm" wi="214.88mm" file="US07298742-20071120-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00001" num="00001">
<img id="EMI-D00001" he="183.05mm" wi="186.69mm" file="US07298742-20071120-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00002" num="00002">
<img id="EMI-D00002" he="242.74mm" wi="127.42mm" orientation="landscape" file="US07298742-20071120-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00003" num="00003">
<img id="EMI-D00003" he="215.90mm" wi="131.06mm" orientation="landscape" file="US07298742-20071120-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00004" num="00004">
<img id="EMI-D00004" he="249.60mm" wi="155.87mm" file="US07298742-20071120-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00005" num="00005">
<img id="EMI-D00005" he="219.12mm" wi="153.08mm" orientation="landscape" file="US07298742-20071120-D00005.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
</drawings>
<description id="description">
<?BRFSUM description="Brief Summary" end="lead"?>
<heading id="h-0001" level="1">BACKGROUND OF THE INVENTION</heading>
<p id="p-0002" num="0001">1. Field of the Invention</p>
<p id="p-0003" num="0002">The present invention relates to a network address conversion system and the method thereof, more particularly to a system using a network server for performing network address conversion and the method thereof.</p>
<p id="p-0004" num="0003">2. Background of the Invention</p>
<p id="p-0005" num="0004">In order to solve the problem of increasingly insufficient public IP addresses, RFC1918 defines three domains for private IP addresses, 10.0.0.0 to 10.255.255.255, 172.16.0.0 to 172.31.255.255, and 192.168.0.0 to 192.168.255.255, respectively. The private IP addresses may be used to connect computers in an enterprise in view of not needing to additionally apply for more public IP addresses. However, because a plurality of private IP addresses will be converted into the same public IP address when they connect to the external public network, the object of saving IP addresses needs to be achieved. Nevertheless, because the plurality of private IP addresses share the same public IP address, the data packets should be performed in an IP address conversion through a router between the public network and the private network within an enterprise.</p>
<p id="p-0006" num="0005">A common conversion method between the private IP address and the public IP address is the Network Address Translation (NAT) defined by RFC1631. The conventional network address conversion system <b>10</b>, as shown in <figref idref="DRAWINGS">FIG. 1</figref>, uses a NAT router <b>12</b> to convert the source address included in the IP header of the data packet from the private network <b>11</b> into the public IP address of the public network <b>13</b>, and convert the source address included in the IP header of the data packet from the public network <b>13</b> into the private IP address of the private network <b>11</b>. For example, a node in a private network <b>11</b> having a private IP address of 192.168.1.1 can be converted to a public IP address 202.132.2.2 through a routing table of the NAT router <b>12</b>, and then communicate with a remote node in the public network <b>13</b>.</p>
<p id="p-0007" num="0006">For the application of transmitting high quality voice over IP (VoIP), such as the Q.931 and H.245 protocols used by the videophone, the Information of IP address in the IP header is not only included in the data packet, but also in the payload. However, the conventional NAT router <b>12</b> only handles the convertion of the private IP address in the IP header into a public IP address, and not the IP address conversion in the payload. Because the IP address in the payload has not been converted, the user of the videophone in the public network <b>13</b> cannot transmit his voice and image to the user of the videophone in the private network <b>11</b>.</p>
<p id="p-0008" num="0007">A conventional method for solving the above problem is to add A/P gateways <b>21</b> and <b>22</b> at both ends of the NAT router <b>12</b> in cooperation with the system service provider, as shown in <figref idref="DRAWINGS">FIG. 2</figref>, which is responsible for the IP address conversion in the payload. However, this method increases the cost burden of the manufacturing company. For individual users, because there are no system service providers that cooperates the A/P gateways <b>21</b> and <b>22</b>, the above-mentioned solution cannot be used. Another solution is to use a specific NAT router having the function of converting the IP address in the payload, but this also results in high cost burden, which is difficult to be accepted in the market. Moreover, when using ADSL or cable modem, the public IP address dynamically changes, and is not fixed, so the difficulty of the design increases.</p>
<p id="p-0009" num="0008">As described above, because the current VoIP applications in the market are concerned practical requirements of the user, effectively completing the communication and reducing the cost becomes very important issues.</p>
<heading id="h-0002" level="1">SUMMARY OF THE INVENTION</heading>
<p id="p-0010" num="0009">The main object of the present invention is to provide a network address conversion system and the method thereof, which can make the VoIP product application compliant with the Q.931 and H.245 protocols.</p>
<p id="p-0011" num="0010">The second object of the present invention is to provide a network address conversion system and the method thereof, which does not need to further increase expensive hardware equipments and setup complicated configuration.</p>
<p id="p-0012" num="0011">To this end, the network address conversion system according to the present invention comprises a private network, a public network, a NAT router and a network server. The NAT router is used to convert the private IP address of the data packet from the private network into a public IP address for entering the public network, and to convert the public IP address of the data packet from the public network into a private IP address for entering the private network. The network server is connected to the public network to execute a public IP address query program, and then transmits the public IP address back to the node in the private network.</p>
<p id="p-0013" num="0012">The network address conversion method according to the present invention includes steps (a) to (c). In step (a), a node in the private network is connected to a network server through a NAT router. In step (b), the network server executes a public IP address query program. In step (c), the network server transmits the public IP address back to the node in the private network.</p>
<p id="p-0014" num="0013">The network address conversion system according to the present invention and the method thereof can provide at least the following advantages:
<ul id="ul0001" list-style="none">
    <li id="ul0001-0001" num="0014">1. The user need not further purchase an expensive A/P gateway or NAT router with special application.</li>
    <li id="ul0001-0002" num="0015">2. Solves the design difficulties for the ADSL or cable modem resulting from the dynamic change of the public IP address.</li>
    <li id="ul0001-0003" num="0016">3. Simple and easy to use, without any complicated configuration setup.</li>
</ul>
</p>
<?BRFSUM description="Brief Summary" end="tail"?>
<?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?>
<description-of-drawings>
<heading id="h-0003" level="1">BRIEF DESCRIPTION OF THE DRAWINGS</heading>
<p id="p-0015" num="0017">The present invention will be described according to the appended drawings in which:</p>
<p id="p-0016" num="0018"><figref idref="DRAWINGS">FIG. 1</figref> shows a conventional network address conversion system;</p>
<p id="p-0017" num="0019"><figref idref="DRAWINGS">FIG. 2</figref> shows another conventional network address conversion system;</p>
<p id="p-0018" num="0020"><figref idref="DRAWINGS">FIG. 3</figref> shows a structural view of the network address conversion system according to the present invention;</p>
<p id="p-0019" num="0021"><figref idref="DRAWINGS">FIG. 4</figref> shows a network address conversion method according to the present invention; and</p>
<p id="p-0020" num="0022"><figref idref="DRAWINGS">FIG. 5</figref> shows an embodiment of the network address conversion method according to the present invention.</p>
</description-of-drawings>
<?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?>
<?DETDESC description="Detailed Description" end="lead"?>
<heading id="h-0004" level="1">PREFERRED EMBODIMENT OF THE PRESENT INVENTION</heading>
<p id="p-0021" num="0023"><figref idref="DRAWINGS">FIG. 3</figref> is a structural view of the network address conversion system according to the present invention. The network address conversion system <b>30</b> according to the present invention adds a network server <b>34</b> at one end of the public network <b>33</b> which has a specific public IP address and accepts the user's query through a special I/O port.</p>
<p id="p-0022" num="0024">The network address conversion method according to the present invention is described in the flowchart of <figref idref="DRAWINGS">FIG. 4</figref>.
<ul id="ul0002" list-style="none">
    <li id="ul0002-0001" num="0000">
    <ul id="ul0003" list-style="none">
        <li id="ul0003-0001" num="0025">STEP <b>41</b>: A data packet is sent to request connection from a node (representing the user) in the private network <b>31</b> to the network server <b>34</b>.</li>
        <li id="ul0003-0002" num="0026">STEP <b>42</b>: The private IP address in the IP header of the data packet is converted into a public IP address by the NAT router <b>32</b>, and connects to the I/O port of the network server <b>34</b>.</li>
        <li id="ul0003-0003" num="0027">STEP <b>43</b>: The network server <b>34</b> executes a getip.asp program, and transmits the public IP address back to the node.</li>
        <li id="ul0003-0004" num="0028">STEP <b>44</b>: When the node receives the public IP address sent from the network server <b>34</b>, the connection to the network server <b>34</b> is terminated, and then the node stores the public IP address.</li>
        <li id="ul0003-0005" num="0029">STEP <b>45</b>: In compliance with the characteristic of periodically changing the public IP address in ADSL or DHCP connections, the operation for querying the public IP address will be processed once within a certain time period, such as 5 minutes, so as to prevent disconnection during transmission causing the defect of poor communication.</li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0023" num="0030"><figref idref="DRAWINGS">FIG. 5</figref> is an embodiment of the network address conversion method according to the present invention. For example, a node <b>51</b> in the private network <b>31</b> has a private address 192.168.1.1, and uses a videophone for video conferencing. In addition, the IP address of the network server <b>34</b> is 202.132.71.2, and accepts the query for the public IP address by the user through a specific I/O port. First, the node <b>51</b> accesses http://202.132.71.2/getip.asp to transmit the data packet for querying the public IP address to the network server <b>34</b>. The NAT router <b>32</b> converts the private IP address 192.168.1.1 in the IP header of the data packet into a public IP address 202.132.2.2, and connects to the I/O port on the network server <b>34</b>. The network server <b>34</b> executes the getip.asp program, and transmits the public IP address 202.132.2.2 back to the node <b>51</b> in HTML format <b>52</b>. When the node <b>51</b> receives the public IP address sent by the network server <b>34</b>, it will parse the HTML format <b>52</b>, store the public IP address, and terminate the connection to the network server <b>34</b>. After that, the videophone at the node <b>51</b> will add the public IP address into the payload during data packet transmission each time, in order to be compliant with the Q.931 and H.245 protocols. Furthermore, in compliance with the characteristic of periodically changing the public IP address in ADSL or DHCP connections, the operation for querying the public IP address will be processed once within a certain time period, such as 5 minutes, by the videophone at the node <b>51</b>, so as to prevent disconnection during the transmission causing the defect of poor communication.</p>
<p id="p-0024" num="0031">The above-described embodiments of the present invention are intended to be illustrative only. Numerous alternative embodiments may be devised by those skilled in the art without departing from the scope of the following claims.</p>
<?DETDESC description="Detailed Description" end="tail"?>
</description>
<us-claim-statement>What is claimed is:</us-claim-statement>
<claims id="claims">
<claim id="CLM-00001" num="00001">
<claim-text>1. A network address conversion system, comprising:
<claim-text>a private network;</claim-text>
<claim-text>a public network;</claim-text>
<claim-text>a Network Address Translation (NAT) router for converting private IP addresses of data packets from the private network into public IP addresses entering the public network and converting public IP addresses of data packets from the public network into private IP addresses entering the private network; and</claim-text>
<claim-text>a network server connected to the public network for executing a public IP address query program, wherein the public IP address query program does not need nodes in the private network to be registered in the network server.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00002" num="00002">
<claim-text>2. The network address conversion system of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the network server connects to the public network through a special Input/Output (I/O) port.</claim-text>
</claim>
<claim id="CLM-00003" num="00003">
<claim-text>3. The network address conversion system of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the network server executes a getip.asp program and transmits the public IP addresses back in Hyper Text Markup Language format.</claim-text>
</claim>
<claim id="CLM-00004" num="00004">
<claim-text>4. A network address conversion method, comprising the steps of:
<claim-text>connecting a node in a private network to a network server through a Network Address Translation (NAT) router;</claim-text>
<claim-text>executing a public IP address query program by the network server; and</claim-text>
<claim-text>transmitting a public IP address to the node in the private network by the network server, wherein the public IP address query program does not need nodes in the private network to be registered in the network server.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00005" num="00005">
<claim-text>5. The network address conversion method of <claim-ref idref="CLM-00004">claim 4</claim-ref>, wherein the node of the private network queries the public IP address once within a time period.</claim-text>
</claim>
<claim id="CLM-00006" num="00006">
<claim-text>6. The network address conversion method of <claim-ref idref="CLM-00004">claim 4</claim-ref>, wherein the network server executes a getip.asp program and transmits the public IP addresses back in Hyper Text Markup Language format.</claim-text>
</claim>
<claim id="CLM-00007" num="00007">
<claim-text>7. The network address conversion method of <claim-ref idref="CLM-00004">claim 4</claim-ref>, wherein the node of the private network performs a VoIP application.</claim-text>
</claim>
<claim id="CLM-00008" num="00008">
<claim-text>8. The network address conversion method of <claim-ref idref="CLM-00004">claim 4</claim-ref>, wherein the node of the private network performs a videophone application.</claim-text>
</claim>
<claim id="CLM-00009" num="00009">
<claim-text>9. The network address conversion method of <claim-ref idref="CLM-00004">claim 4</claim-ref>, wherein the public IP address received by the node of the private network is stored in payloads of data packets.</claim-text>
</claim>
<claim id="CLM-00010" num="00010">
<claim-text>10. The network address conversion method of <claim-ref idref="CLM-00004">claim 4</claim-ref>, wherein the network server connects to a public network through a special Input/Output (I/O) port.</claim-text>
</claim>
</claims>
</us-patent-grant>
