<us-patent-grant lang="EN" dtd-version="v4.2 2006-08-23" file="US07298844-20071120.XML" status="PRODUCTION" id="us-patent-grant" country="US" date-produced="20071106" date-publ="20071120">
<us-bibliographic-data-grant>
<publication-reference>
<document-id>
<country>US</country>
<doc-number>07298844</doc-number>
<kind>B2</kind>
<date>20071120</date>
</document-id>
</publication-reference>
<application-reference appl-type="utility">
<document-id>
<country>US</country>
<doc-number>10115405</doc-number>
<date>20020403</date>
</document-id>
</application-reference>
<us-application-series-code>10</us-application-series-code>
<priority-claims>
<priority-claim sequence="01" kind="national">
<country>JP</country>
<doc-number>2001-112325</doc-number>
<date>20010411</date>
</priority-claim>
</priority-claims>
<us-term-of-grant>
<us-term-extension>826</us-term-extension>
</us-term-of-grant>
<classifications-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>H</section>
<class>04</class>
<subclass>N</subclass>
<main-group>7</main-group>
<subgroup>167</subgroup>
<symbol-position>F</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20071120</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>G</section>
<class>06</class>
<subclass>K</subclass>
<main-group>9</main-group>
<subgroup>00</subgroup>
<symbol-position>L</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20071120</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>H</section>
<class>04</class>
<subclass>K</subclass>
<main-group>1</main-group>
<subgroup>00</subgroup>
<symbol-position>L</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20071120</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>H</section>
<class>04</class>
<subclass>L</subclass>
<main-group>9</main-group>
<subgroup>00</subgroup>
<symbol-position>L</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20071120</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
</classifications-ipcr>
<classification-national>
<country>US</country>
<main-classification>380201</main-classification>
<further-classification>726 26</further-classification>
<further-classification>713189</further-classification>
<further-classification>713193</further-classification>
<further-classification>705 57</further-classification>
</classification-national>
<invention-title id="d0e71">Recording/reproducing apparatus, data moving method, and data deletion method</invention-title>
<references-cited>
<citation>
<patcit num="00001">
<document-id>
<country>US</country>
<doc-number>5646993</doc-number>
<kind>A</kind>
<name>Aizawa</name>
<date>19970700</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00002">
<document-id>
<country>US</country>
<doc-number>6134660</doc-number>
<kind>A</kind>
<name>Boneh et al.</name>
<date>20001000</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>713193</main-classification></classification-national>
</citation>
<citation>
<patcit num="00003">
<document-id>
<country>US</country>
<doc-number>6745166</doc-number>
<kind>B1</kind>
<name>Sugahara et al.</name>
<date>20040600</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>380285</main-classification></classification-national>
</citation>
<citation>
<patcit num="00004">
<document-id>
<country>US</country>
<doc-number>7093128</doc-number>
<kind>B2</kind>
<name>Asano et al.</name>
<date>20060800</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>713171</main-classification></classification-national>
</citation>
<citation>
<patcit num="00005">
<document-id>
<country>US</country>
<doc-number>2002/0150251</doc-number>
<kind>A1</kind>
<name>Asano et al.</name>
<date>20021000</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>380277</main-classification></classification-national>
</citation>
<citation>
<patcit num="00006">
<document-id>
<country>EP</country>
<doc-number>1 037 460</doc-number>
<date>20000900</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00007">
<document-id>
<country>EP</country>
<doc-number>1 047 062</doc-number>
<date>20001000</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00008">
<document-id>
<country>JP</country>
<doc-number>10-064187</doc-number>
<date>19980600</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00009">
<document-id>
<country>JP</country>
<doc-number>2001-119386</doc-number>
<date>20010400</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<nplcit num="00010">
<othercit>European Search Report regarding Application No. 02007378.9-2202 dated Aug. 16, 2002.</othercit>
</nplcit>
<category>cited by other</category>
</citation>
</references-cited>
<number-of-claims>17</number-of-claims>
<us-exemplary-claim>1</us-exemplary-claim>
<us-field-of-classification-search>
<classification-national>
<country>US</country>
<main-classification>380201</main-classification>
</classification-national>
</us-field-of-classification-search>
<figures>
<number-of-drawing-sheets>22</number-of-drawing-sheets>
<number-of-figures>22</number-of-figures>
</figures>
<us-related-documents>
<related-publication>
<document-id>
<country>US</country>
<doc-number>20020150245</doc-number>
<kind>A1</kind>
<date>20021017</date>
</document-id>
</related-publication>
</us-related-documents>
<parties>
<applicants>
<applicant sequence="001" app-type="applicant-inventor" designation="us-only">
<addressbook>
<last-name>Sugimoto</last-name>
<first-name>Hiroshi</first-name>
<address>
<city>Osaka</city>
<country>JP</country>
</address>
</addressbook>
<nationality>
<country>JP</country>
</nationality>
<residence>
<country>JP</country>
</residence>
</applicant>
<applicant sequence="002" app-type="applicant-inventor" designation="us-only">
<addressbook>
<last-name>Ishihara</last-name>
<first-name>Hideshi</first-name>
<address>
<city>Osaka</city>
<country>JP</country>
</address>
</addressbook>
<nationality>
<country>JP</country>
</nationality>
<residence>
<country>JP</country>
</residence>
</applicant>
<applicant sequence="003" app-type="applicant-inventor" designation="us-only">
<addressbook>
<last-name>Nagai</last-name>
<first-name>Takahiro</first-name>
<address>
<city>Osaka</city>
<country>JP</country>
</address>
</addressbook>
<nationality>
<country>JP</country>
</nationality>
<residence>
<country>JP</country>
</residence>
</applicant>
<applicant sequence="004" app-type="applicant-inventor" designation="us-only">
<addressbook>
<last-name>Ide</last-name>
<first-name>Hirofumi</first-name>
<address>
<city>Hyogo</city>
<country>JP</country>
</address>
</addressbook>
<nationality>
<country>JP</country>
</nationality>
<residence>
<country>JP</country>
</residence>
</applicant>
</applicants>
<agents>
<agent sequence="01" rep-type="attorney">
<addressbook>
<orgname>Renner, Otto, Boisselle &amp; Sklar, LLP</orgname>
<address>
<country>unknown</country>
</address>
</addressbook>
</agent>
</agents>
</parties>
<assignees>
<assignee>
<addressbook>
<orgname>Matsushita Electric Industrial Co., Ltd.</orgname>
<role>03</role>
<address>
<city>Kasoma</city>
<country>JP</country>
</address>
</addressbook>
</assignee>
</assignees>
<examiners>
<primary-examiner>
<last-name>Barrón, Jr.</last-name>
<first-name>Gilberto</first-name>
<department>2132</department>
</primary-examiner>
<assistant-examiner>
<last-name>Nobahar</last-name>
<first-name>Abdulhakim</first-name>
</assistant-examiner>
</examiners>
</us-bibliographic-data-grant>
<abstract id="abstract">
<p id="p-0001" num="0000">A recording/reproducing apparatus includes: a first storage section for storing data structure information which includes encrypted data; a special information holding section for holding special information associated with the data structure information; and a controller for controlling the first storage section and the special information holding section. The data structure information is associated with the special information such that the special information is updated in response to an update of the data structure information, or such that the data structure information is updated in response to an update of the special information. The controller controls movement of the encrypted data from the first storage section to a second storage section, and the controller updates the special information such that a mismatch occurs between the special information obtained before the movement of the encrypted data and the special information obtained after the movement of the encrypted data.</p>
</abstract>
<drawings id="DRAWINGS">
<figure id="Fig-EMI-D00000" num="00000">
<img id="EMI-D00000" he="180.17mm" wi="160.61mm" file="US07298844-20071120-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00001" num="00001">
<img id="EMI-D00001" he="203.88mm" wi="150.88mm" orientation="landscape" file="US07298844-20071120-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00002" num="00002">
<img id="EMI-D00002" he="92.71mm" wi="118.87mm" file="US07298844-20071120-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00003" num="00003">
<img id="EMI-D00003" he="149.35mm" wi="109.90mm" file="US07298844-20071120-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00004" num="00004">
<img id="EMI-D00004" he="245.36mm" wi="185.08mm" file="US07298844-20071120-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00005" num="00005">
<img id="EMI-D00005" he="95.59mm" wi="153.16mm" file="US07298844-20071120-D00005.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00006" num="00006">
<img id="EMI-D00006" he="183.05mm" wi="163.49mm" file="US07298844-20071120-D00006.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00007" num="00007">
<img id="EMI-D00007" he="185.34mm" wi="150.88mm" orientation="landscape" file="US07298844-20071120-D00007.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00008" num="00008">
<img id="EMI-D00008" he="153.59mm" wi="136.99mm" orientation="landscape" file="US07298844-20071120-D00008.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00009" num="00009">
<img id="EMI-D00009" he="219.96mm" wi="106.26mm" file="US07298844-20071120-D00009.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00010" num="00010">
<img id="EMI-D00010" he="123.87mm" wi="114.47mm" file="US07298844-20071120-D00010.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00011" num="00011">
<img id="EMI-D00011" he="194.90mm" wi="156.29mm" orientation="landscape" file="US07298844-20071120-D00011.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00012" num="00012">
<img id="EMI-D00012" he="169.33mm" wi="147.57mm" orientation="landscape" file="US07298844-20071120-D00012.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00013" num="00013">
<img id="EMI-D00013" he="222.84mm" wi="177.29mm" file="US07298844-20071120-D00013.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00014" num="00014">
<img id="EMI-D00014" he="155.45mm" wi="127.34mm" file="US07298844-20071120-D00014.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00015" num="00015">
<img id="EMI-D00015" he="90.68mm" wi="107.53mm" file="US07298844-20071120-D00015.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00016" num="00016">
<img id="EMI-D00016" he="194.99mm" wi="153.50mm" orientation="landscape" file="US07298844-20071120-D00016.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00017" num="00017">
<img id="EMI-D00017" he="200.32mm" wi="116.92mm" file="US07298844-20071120-D00017.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00018" num="00018">
<img id="EMI-D00018" he="97.28mm" wi="115.32mm" file="US07298844-20071120-D00018.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00019" num="00019">
<img id="EMI-D00019" he="201.85mm" wi="156.04mm" orientation="landscape" file="US07298844-20071120-D00019.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00020" num="00020">
<img id="EMI-D00020" he="229.02mm" wi="165.78mm" file="US07298844-20071120-D00020.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00021" num="00021">
<img id="EMI-D00021" he="195.41mm" wi="141.73mm" file="US07298844-20071120-D00021.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00022" num="00022">
<img id="EMI-D00022" he="201.51mm" wi="170.69mm" file="US07298844-20071120-D00022.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
</drawings>
<description id="description">
<?BRFSUM description="Brief Summary" end="lead"?>
<heading id="h-0001" level="1">BACKGROUND OF THE INVENTION</heading>
<p id="p-0002" num="0001">1. Field of the Invention</p>
<p id="p-0003" num="0002">The present invention relates to a recording/reproducing apparatus in which illegal copying and illegal use of copy-generation managed data is prevented. Further, the present invention also relates to a method for moving data and a method for deleting data in which illegal copying and illegal use of copy-generation managed data is prevented.</p>
<p id="p-0004" num="0003">2. Description of the Related Art</p>
<p id="p-0005" num="0004">In recent years, various digital recording/reproducing apparatuses have been developed and marketed. Among these digital recording/reproducing apparatuses, data can be copied without deteriorating the image quality and sound quality of the data. Thus, a digitalized, copyrighted production can be copied into a widespread, large capacity recording medium, such as a D-VCR, DVD-RAM, etc., with high image- and sound-qualities. By copying a production in such a way, illegally copied products called “bootlegs” can be made. The illegally copied products can be readily distributed among the general public anonymously, and accordingly, the copyright of the production is violated. It is therefore necessary to prevent such illegally copied products in order to protect copyrights.</p>
<p id="p-0006" num="0005">A known technique for preventing production of such an illegally copied product is described in Japanese Laid-Open Publication No. 2001-16542. According to this technique, a predetermined ID bit for preventing illegal copying (a prohibition code of the CGMS (copy generation management system) standard) is superposed on an analog signal obtained by converting a digital signal recorded on an original recording medium. With such a superposed ID bit, illegal copying is prevented.</p>
<p id="p-0007" num="0006">However, even if the above technique described in Japanese Laid-Open Publication No. 2001-16542 is employed, when data is transferred between apparatuses, a fraudulent party can steal the data from a data transfer path between the apparatuses so as to make an illegally copied product.</p>
<p id="p-0008" num="0007">A known technique for invalidating illegally copied data is described in Japanese Laid-Open Publication No. 11-39895. In this technique, digital data includes: an encrypted main part of the data; encrypted copy management information for managing permission/prohibition of copy for the main part of the data; and key information for decrypting the encrypted main part of the data. When the copy management information indicates that copying of the main part of the data is prohibited, decryption of the illegally copied, encrypted data is disabled by updating the key information.</p>
<p id="p-0009" num="0008">However, even if the above technique described in Japanese Laid-Open Publication No. 11-39895 is employed, since the encrypted main part of the data and the key information used for decrypting the encrypted main part of the data are included in the same digital data, a fraudulent party can copy (harbor) the digital data in an external recording device or the like in a byte-by-byte manner before the key information is updated, so as to decrypt the illegally copied, encrypted main part of the data.</p>
<p id="p-0010" num="0009">Furthermore, recently, movement of data which is stored in a large capacity recording device, such as a hard disc, to a highly-reliable medium, such as an optical disc for making a backup copy has been demanded.</p>
<p id="p-0011" num="0010">In general, data distributed by digital broadcasting is protected from being stored, but there is some data that can be stored for the sake of user's convenience only for a predetermined time period. There is a demand to surely delete such data such that a fraudulent party cannot illegally copy the data.</p>
<p id="p-0012" num="0011"><figref idref="DRAWINGS">FIG. 1</figref> shows a structure of a conventional video recording/reproducing apparatus <b>910</b>. The video recording/reproducing apparatus <b>910</b> includes: a data input section <b>900</b>; an encryption section <b>901</b>; a temporary storage section <b>902</b>; a data output section <b>903</b>; a decryption section <b>904</b>; a central processing unit (CPU) <b>905</b>; an input/output section <b>906</b>; a fixed storage device <b>907</b>; a read/write section <b>908</b>; and an information recording medium <b>909</b>. The CPU <b>905</b> controls the data input section <b>900</b>; the encryption section <b>901</b>; the temporary storage section <b>902</b>; the data output section <b>903</b>; the decryption section <b>904</b>; the input/output section <b>906</b>; and the read/write section <b>908</b>.</p>
<p id="p-0013" num="0012">The data input section <b>900</b> converts externally-input analog image data into digitally compressed image data. If copy generation management information attached to the compressed image data, which is input to the encryption section <b>901</b>, is free-content information indicating that the compressed data is a free content, the encryption section <b>901</b> does not perform an encryption process. If the copy generation management information indicates that production of a child copy (first generation copy) is permitted, the encryption section <b>901</b> changes the copy generation management information into copy prohibition information, and the compressed image data is encrypted and stored in the temporary storage section <b>902</b>. The temporary storage section <b>902</b> is a high speed memory, such as an SDRAM or the like. Since the above described sections work based on different data transfer rates, the temporary storage section <b>902</b> is used as buffer means for buffering the transfer rate difference among the sections. The decryption section <b>904</b> decrypts encrypted data and outputs the decrypted data to the data output section <b>903</b>. The data output section <b>903</b> converts the decrypted, digitally compressed image data into analog image data, and outputs the analog image data to an external apparatus. The input/output section <b>906</b> is a communication control means, such as IDE, SCSI, or the like, which controls data transfer to/from the fixed storage device <b>907</b>, such as a hard disc. The read/write section <b>908</b> writes data in and/or reads data from the portable information recording medium <b>909</b>, such as a DVD-RAM or the like.</p>
<p id="p-0014" num="0013">Next, a data recording operation of the video recording/reproducing apparatus <b>910</b> is described.</p>
<p id="p-0015" num="0014">The data input section <b>900</b> externally receives analog image data, such as a broadcast wave, and digitally compresses the analog image data based on MPEG The compressed image data is transferred to the encryption section <b>901</b>. If the copy generation management information attached to the compressed image data is the copy prohibition information, the encryption section <b>901</b> is controlled by the CPU <b>905</b> so as to stop a recording operation. If the copy generation management information is information which permits making a first generation copy, the encryption section <b>901</b> changes the copy generation management information into copy prohibition information, and encrypts the compressed image data using a title key Dh which includes information inherent to the fixed storage device <b>907</b>. The encrypted data is transferred to the temporary storage section <b>902</b>. If copy generation management information is free-content information, the encryption section <b>901</b> does not perform an encryption process and transfers the compressed image data as it is to the temporary storage section <b>902</b>. The data stored in the temporary storage section <b>902</b> is then transferred to, and stored as a file in, the fixed storage device <b>907</b> through the input/output section <b>906</b>. In this way, recording of the image data is performed.</p>
<p id="p-0016" num="0015"><figref idref="DRAWINGS">FIG. 2</figref> shows the structure of the fixed storage device <b>907</b>. The fixed storage device <b>907</b> has data structure information including: a management region <b>1111</b> for storing management information, such as an address and data size of stored data; and an object region <b>1112</b> for storing the data and the title key Dh used for encrypting the data. The management information is updated every time data comes to the object region and is stored therein.</p>
<p id="p-0017" num="0016">Next, a data reproduction operation of the video recording/reproducing apparatus <b>910</b> is described.</p>
<p id="p-0018" num="0017">The CPU <b>905</b> reads management information from the management region <b>1111</b> of the fixed storage device <b>907</b> through the input/output section <b>906</b>. The input/output section <b>906</b> searches for a position of data to be reproduced based on the read information (address) and reads the data from the position in the object region <b>1112</b> into the temporary storage section <b>902</b>. The CPU <b>905</b> transfers the data stored in the temporary storage section <b>902</b> to the decryption section <b>904</b>. The decryption section <b>904</b> decrypts the data using the title key Dh. The decrypted data is transferred to the data output section <b>903</b>. The data output section <b>903</b> converts the decrypted, compressed image data into analog image data, which is output to an external apparatus, such as a TV monitor or the like. In this way, reproduction of image data is performed.</p>
<p id="p-0019" num="0018"><figref idref="DRAWINGS">FIG. 3</figref> illustrates a procedure for moving data in the video recording/reproducing apparatus <b>910</b> from the fixed storage device <b>907</b> to the information recording medium <b>909</b>. Herein, the data is a program, for example.</p>
<p id="p-0020" num="0019"><figref idref="DRAWINGS">FIG. 4</figref> shows the inside states of the fixed storage device <b>907</b> and the information recording medium <b>909</b> during a data movement operation. For the sake of simplicity, among the components of the video recording/reproducing apparatus <b>910</b> shown in <figref idref="DRAWINGS">FIG. 1</figref>, only the fixed storage device <b>907</b> and the information recording medium <b>909</b> are shown in <figref idref="DRAWINGS">FIG. 4</figref>. With reference to <figref idref="DRAWINGS">FIGS. 3 and 4</figref> in conjunction with <figref idref="DRAWINGS">FIG. 1</figref>, a procedure for moving an encrypted program from the fixed storage device <b>907</b> to the information recording medium <b>909</b> is described in steps <b>1100</b> to <b>1105</b> below. Movement of data (program P<b>1</b>) from the fixed storage device <b>907</b> to the information recording medium <b>909</b> begins at State (I).
<ul id="ul0001" list-style="none">
    <li id="ul0001-0001" num="0000">
    <ul id="ul0002" list-style="none">
        <li id="ul0002-0001" num="0020">Step <b>1100</b>:</li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0021" num="0021">Based on management information A stored in the management region <b>1111</b>, the program P<b>1</b> and the title key Dh used for encrypting the program P<b>1</b> are read from the object region <b>1112</b> to the temporary storage section <b>902</b>.
<ul id="ul0003" list-style="none">
    <li id="ul0003-0001" num="0000">
    <ul id="ul0004" list-style="none">
        <li id="ul0004-0001" num="0022">Step <b>1101</b>:</li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0022" num="0023">The program P<b>1</b> is moved to the decryption section <b>904</b> and decrypted using the title key Dh.
<ul id="ul0005" list-style="none">
    <li id="ul0005-0001" num="0000">
    <ul id="ul0006" list-style="none">
        <li id="ul0006-0001" num="0024">Step <b>1102</b>:</li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0023" num="0025">The decrypted program P<b>1</b> is transferred to the encryption section <b>901</b>. In the encryption section <b>901</b>, the decrypted program P<b>1</b> is encrypted again using a title key Dd which includes information inherent to the information recording medium <b>909</b>, and transferred to the temporary storage section <b>902</b>.
<ul id="ul0007" list-style="none">
    <li id="ul0007-0001" num="0000">
    <ul id="ul0008" list-style="none">
        <li id="ul0008-0001" num="0026">Step <b>1103</b>:</li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0024" num="0027">There-encrypted program P<b>1</b> in the temporary storage section <b>902</b> is written in the information recording medium <b>909</b> by the read/write section <b>908</b>.
<ul id="ul0009" list-style="none">
    <li id="ul0009-0001" num="0000">
    <ul id="ul0010" list-style="none">
        <li id="ul0010-0001" num="0028">Step <b>1104</b>:</li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0025" num="0029">Steps <b>1100</b> to <b>1103</b> are repeated until all the data included in the program P<b>1</b> to be moved is moved to the information recording medium <b>909</b>.
<ul id="ul0011" list-style="none">
    <li id="ul0011-0001" num="0000">
    <ul id="ul0012" list-style="none">
        <li id="ul0012-0001" num="0030">Step <b>1105</b>:</li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0026" num="0031">All the data of the program P<b>1</b> has been moved to the information recording medium <b>909</b> (at this time, the fixed storage device <b>907</b> and the information recording medium <b>909</b> are in State (II)), the program P<b>1</b> which has been moved to the information recording medium <b>909</b> are deleted from the object region <b>1112</b>, and the management information A stored in the management region <b>1111</b> is updated to management information A′. At this time, the fixed storage device <b>907</b> and the information recording medium <b>909</b> are in State (III), which means that movement of the programs has been completed</p>
<p id="p-0027" num="0032">Data recorded in the video recording/reproducing apparatus <b>910</b> shown in <figref idref="DRAWINGS">FIG. 1</figref> is data from which production of only a first generation copy (child copy) is permitted. Thus, copying of such data into the information recording medium <b>909</b>, such as an optical disc, is not permitted, and accordingly, the fixed storage device <b>907</b> and the information recording medium <b>909</b> never simultaneously store the same data.</p>
<p id="p-0028" num="0033">However, in the above structure, a plurality of illegal copies can be produced by connecting another fixed storage device <b>911</b>, such as a personal computer having a hard disk, to the video recording/reproducing apparatus <b>910</b> shown in <figref idref="DRAWINGS">FIG. 1</figref>, and harboring the data in the fixed storage device <b>911</b>.</p>
<p id="p-0029" num="0034">Now, assume that the video recording/reproducing apparatus <b>910</b> moves data P<b>1</b> from the fixed storage device <b>907</b> to the information recording medium <b>909</b>. At State (I) of <figref idref="DRAWINGS">FIG. 4</figref>, data structure information stored in the fixed storage device <b>907</b> is harbored into the personal computer <b>911</b> in a byte-by-byte manner. Then, when the video recording/reproducing apparatus <b>910</b> is at State (III), the data harbored into the personal computer <b>911</b> (data structure information at State (I)) is returned to the fixed storage device <b>907</b>, so that the management region <b>1111</b> and the object region <b>1112</b> are changed from the post-movement/deletion state, i.e., State (III), to the pre-movement state, i.e., State (I). As a result, the video recording/reproducing apparatus <b>910</b> results in a state where an illegal copy can be made, i.e., State (IV). In this state, the fixed storage device <b>907</b> and the information recording medium <b>909</b> simultaneously store the same data (for example, the program P<b>1</b>). By performing the above processing, a plurality of illegal copies can be readily produced. On the other hand, the video recording/reproducing apparatus <b>910</b> itself determines that the data movement operation has been successfully achieved because the moved data was once deleted from the fixed storage device <b>907</b> of the video recording/reproducing apparatus <b>910</b>.</p>
<p id="p-0030" num="0035">Although music data of about three minutes in length can be quickly moved in a moment, the video recording/reproducing apparatus <b>910</b> cannot complete movement of large video data, such as a piece of movie, in a moment. Thus, when the operation of the video recording/reproducing apparatus <b>910</b> is interrupted by, for example, turning off the power supply at any timing during data movement (for example, between State (II) and State (III) In <figref idref="DRAWINGS">FIG. 4</figref>), the video recording/reproducing apparatus <b>910</b> cannot delete the data from the fixed storage device <b>907</b>. As a result, the data movement operation is interrupted when the video recording/reproducing apparatus <b>910</b> is at State (II), so that the fixed storage device <b>907</b> and the information recording medium <b>909</b> simultaneously store the same data (for example, the program P<b>1</b>). By performing the above processing, a plurality of illegal copies can be readily produced.</p>
<heading id="h-0002" level="1">SUMMARY OF THE INVENTION</heading>
<p id="p-0031" num="0036">According to one aspect of the present invention, a recording/reproducing apparatus includes: a first storage section for storing data structure information which includes encrypted data; a special information holding section for holding special information associated with the data structure information; and a controller for controlling the first storage section and the special information holding section, wherein the data structure information and the special information are associated with each other such that the special information is updated in response to an update of the data structure information, or such that the data structure information is updated in response to an update of the special information, the controller controls movement of the encrypted data from the first storage section to a second storage section, and the controller updates the special information held in the special information holding section such that a mismatch occurs between the special information obtained before the movement of the encrypted data from the first storage section to the second storage section and the special information obtained after the movement of the encrypted data from the first storage section to the second storage section.</p>
<p id="p-0032" num="0037">In one embodiment of the present invention, the second storage section is provided inside of the recording/reproducing apparatus.</p>
<p id="p-0033" num="0038">In another embodiment of the present invention, the second storage section is provided outside of the recording/reproducing apparatus.</p>
<p id="p-0034" num="0039">In still another embodiment of the present invention, the data structure information includes: an object region for storing data which is encrypted using a title key corresponding to a predetermined unit amount of data; a management region for storing management information of the encrypted data; and an encryption region for storing the title key which is encrypted using a system key, wherein the special information is the system key, every time the encrypted data is moved from the first storage section to the second storage section, the controller deletes the moved data from the object region, updates the management information: and deletes from the encryption region the encrypted title key which is used for decrypting the moved data, and the controller updates the system key and encrypts the title key using the updated system key.</p>
<p id="p-0035" num="0040">In still another embodiment of the present invention, the data structure information includes: an object region for storing data which is encrypted using a title key corresponding to a predetermined unit amount of data; a management region for storing management information of the encrypted data; and an encryption region for storing the title key and the management information which are encrypted using a system key, wherein the special information is the system key, the controller controls a movement of a predetermined amount of content included in the encrypted data from the first storage section to the second storage section, the controller updates the system key every time the predetermined amount of content is moved from the first storage section to the second storage section, every time the predetermined amount of content is moved from the first storage section to the second storage section, the controller deletes the moved predetermined amount of content from the object region, updates the management information, and encrypts the title key and the updated management information using the updated system key, and when the amount of moved contents becomes equal to the predetermined unit data amount, the controller deletes from the encryption region the encrypted title key which is used for decrypting the data.</p>
<p id="p-0036" num="0041">In still another embodiment of the present invention, at the start-up of the recording/reproducing apparatus, the controller decrypts the management information using the system key, and overwrites the decrypted management information in the management region.</p>
<p id="p-0037" num="0042">In still another embodiment of the present invention, the data structure information includes: an object region for storing a content which is a part of the encrypted data and which is encrypted using a title key corresponding to the content; and a management region for storing management information of the encrypted content and correspondence information which represents a correspondence between the encrypted content and the title key used for decrypting the encrypted content, the correspondence being established by allocating ID information to the encrypted content, wherein the special information includes the title key to which the ID information is allocated and which is encrypted using a system key, the controller controls a movement of the encrypted content from the first storage section to the second storage section, every time the encrypted content is moved from the first storage section to the second storage section, the controller deletes the moved content from the object region and updates the management information, and every time the encrypted content is moved from the first storage section to the second storage section, the controller deletes from the special information holding section the encrypted title key which has the same ID information as that allocated to the deleted content, thereby updating the special information held in the special information holding section.</p>
<p id="p-0038" num="0043">In still another embodiment of the present invention, the special information further includes the system key; and the controller updates the system key at a predetermined time interval, and encrypts the title key using the updated system key, thereby updating the special information held in the special information holding section.</p>
<p id="p-0039" num="0044">In still another embodiment of the present invention, the data structure information includes: an object region for storing data which is encrypted using a title key corresponding to a predetermined unit amount of data; a management region for storing management information of the encrypted data; and an encryption region for storing the title key which is encrypted using a system key, the special information includes: a first check code which is calculated from the management information; and a second check code which is calculated from the encrypted title key, the controller controls a movement of a predetermined amount of content included in the encrypted data from the first storage section to the second storage section, every time the predetermined amount of content is moved from the first storage section to the second storage section, the controller deletes from the object region the moved predetermined amount of content, thereby updating the management information, every time the predetermined amount of content is deleted from the first storage section, the controller updates the first check code held in the special information holding section by means of a calculation based on the updated management information, when the amount of moved contents becomes equal to the predetermined unit data amount, the controller deletes from the encryption region the encrypted title key which is used for decrypting the data, and every time the data is deleted, the controller updates the second check code held in the special information holding section by means of a calculation based on the encrypted title key</p>
<p id="p-0040" num="0045">In still another embodiment of the present invention, the special information further includes the system key, the controller updates the system key every time the predetermined amount of content is moved from the first storage section to the second storage section, and the controller encrypts the title key using the updated system key, thereby updating the encryption region.</p>
<p id="p-0041" num="0046">In still another embodiment of the present invention, the controller determines whether or not a first check code and a second check code, which are calculated at the start-up of the recording/reproducing apparatus from the management information and the encrypted title key, respectively, are identical to the first check code and the second check code held in the special information holding section.</p>
<p id="p-0042" num="0047">According to another aspect of the present invention, a recording/reproducing apparatus includes: a storage section for storing data structure information which includes encrypted data, the encrypted data including a content which is allowed to be stored for a predetermined time period; a special information holding section for holding special information associated with the data structure information; and a controller for controlling the storage section and the special information holding section, wherein the data structure information and the special information are associated with each other such that the special information is updated in response to an update of the data structure information, or such that the data structure information is updated in response to an update of the special information, the controller controls deletion of the content from the storage section after a predetermined time period has elapsed, and the controller updates the special information held in the special information holding section such that a mismatch occurs between the special information obtained before the deletion of the content from the storage section and the special information obtained after the deletion of the content from the storage section.</p>
<p id="p-0043" num="0048">In one embodiment of the present invention, the data structure information includes: an object region for storing data which is encrypted using a title key corresponding to a predetermined unit amount of data; a management region for storing management information of the encrypted data; and an encryption region for storing the title key which is encrypted using a system key, wherein the special information is the system key, the data is a content which can be stored for a predetermined time period, every time the content is deleted from the storage section after a predetermined time period has elapsed, the controller updates the management information and the system key, and the controller deletes from the encryption region the encrypted title key used for decrypting the content, and encrypts the title key using the updated system key.</p>
<p id="p-0044" num="0049">In another embodiment of the present invention, the data structure information includes: an object region for storing data which is encrypted using a title key corresponding to a predetermined unit amount of data; a management region for storing management information of the encrypted data; and an encryption region for storing the title key and management information which are encrypted using a system key, wherein the special information is the system key, every time the content is deleted from the storage section after a predetermined time period has elapsed, the controller updates the management information and the system key, the controller encrypts the title key and the updated management information using the updated system key, and when the amount of deleted contents becomes equal to the predetermined unit data amount, the controller deletes from the encryption region the encrypted title key which is used for decrypting the data.</p>
<p id="p-0045" num="0050">In still another embodiment of the present invention, the data structure information includes: an object region for storing a content which is a part of the encrypted data and which is encrypted using a title key corresponding to the content; and a management region for storing management information of the encrypted content and correspondence information which represents a correspondence between the encrypted content and the title key used for decrypting the encrypted content, the correspondence being established by allocating ID information to the encrypted content, wherein the special information includes the title key to which the ID information is allocated and which is encrypted using a system key, every time the encrypted content is deleted from the storage section after a predetermined time period has elapsed, the controller updates the management information, and every time the encrypted content is deleted from the storage section after a predetermined time period has elapsed, the controller deletes from the special information holding section the encrypted title key which has the same ID information as that allocated to the deleted content, thereby updating the special information held in the special information holding section.</p>
<p id="p-0046" num="0051">In still another embodiment of the present invention, the special information further includes the system key, and the controller updates the system key at every predetermined time, and encrypts the title key using the updated system key, thereby updating the special information held in the special information holding section.</p>
<p id="p-0047" num="0052">In still another embodiment of the present invention, the data structure information includes: an object region for storing data which is encrypted using a title key corresponding to a predetermined unit amount of data; a management region for storing management information of the encrypted data; and an encryption region for storing the title key which is encrypted using a system key, the special information includes: a first check code which is calculated from the management information; and a second check code which is calculated from the encrypted title key, every time the predetermined amount of content is deleted from the storage section after a predetermined time period has elapsed, the controller updates the management information, every time the management information is updated, the controller updates the first check code held in the special information holding section by means of a calculation based on the updated management information, when the amount of deleted content becomes equal to the predetermined unit data amount, the controller deletes from the encryption region the encrypted title key which is used for decrypting the data, thereby updating the encryption region, and the controller updates the second check code held in the special information holding section by means of a calculation based on the encrypted title key.</p>
<p id="p-0048" num="0053">In still another embodiment of the present invention, the special information further includes the system key, every time the predetermined amount of content is deleted from the storage section after a predetermined time period has elapsed, the controller updates the system key, and every time the system key is updated, the controller encrypts the title key using the updated system key, thereby updating the encryption region.</p>
<p id="p-0049" num="0054">According to still another aspect of the present invention, there is provided a method for moving data from a recording/reproducing apparatus, the recording/reproducing apparatus including: a first storage section for storing data structure information which includes encrypted data; a special information holding section for holding special information associated with the data structure information; and a controller for controlling the first storage section and the special information holding section, wherein the data structure information and the special information are associated with each other such that the special information is updated in response to an update of the data structure information, or such that the data structure information is updated in response to an update of the special information, the method comprising steps of: a) moving the encrypted data from the first storage section to a second storage section; and b) updating the special information held in the special information holding section every time step a) is completed such that a mismatch occurs between the special information obtained before step a) and the updated special information.</p>
<p id="p-0050" num="0055">In one embodiment of the present invention, the second storage section is provided inside of the recording/reproducing apparatus.</p>
<p id="p-0051" num="0056">In another embodiment of the present invention, the second storage section is provided outside of the recording/reproducing apparatus.</p>
<p id="p-0052" num="0057">In still another embodiment of the present invention, the data structure information includes: an object region for storing data which is encrypted using a title key corresponding to a predetermined unit amount of data; a management region for storing management information of the encrypted data; and an encryption region for storing the title key which is encrypted using a system key, the special information is the system key, step b) includes steps of: b1) deleting the moved data from the object region and updating the management information: b2) deleting from the encryption region the encrypted title key which is used for decrypting the moved data: b3) updating the system key, and b4) encrypting the title key using the updated system key.</p>
<p id="p-0053" num="0058">In still another embodiment of the present invention, the data structure information includes: an object region for storing data which is encrypted using a title key corresponding to a predetermined unit amount of data; a management region for storing management information of the encrypted data; and an encryption region for storing the title key and the management information which are encrypted using a system key, the special information is the system key, step a) includes a step of moving a predetermined amount of content included in the encrypted data from the first storage section to the second storage section, and step b) includes steps of: b1) deleting the moved predetermined amount of content from the object region; b2) updating the management information; b3) updating the system key; and b4) encrypting the title key and the updated management information using the updated system key, the method further includes steps of: c) repeating steps a) and b) until the amount of the moved content becomes equal to the predetermined unit data amount; and d) when the amount of moved content becomes equal to the predetermined unit data amount, deleting from the encryption region the encrypted title key which is used for decrypting the data.</p>
<p id="p-0054" num="0059">In still another embodiment of the present invention, the method further includes steps of: e) acquiring the system key from the special information holding section; f) decrypting the management information stored in the encryption region using the system key; and g) overwriting the decrypted management information in the management region.</p>
<p id="p-0055" num="0060">In still another embodiment of the present invention, the data structure information includes: an object region for storing a content which is a part of the encrypted data and which is encrypted using a title key corresponding to the content; and a management region for storing management information of the encrypted content and correspondence information which represents a correspondence between the encrypted content and the title key used for decrypting the encrypted content, the correspondence being established by allocating ID information to the encrypted content, the special information includes the title key to which the ID information is allocated and which is encrypted using a system key, step a) includes a step of moving the encrypted content from the first storage section to the second storage section, and step b) includes steps of: b1) deleting the moved content from the object region; b2) updating the management information: and b3) deleting the encrypted title key which has the same ID information as that allocated to the content deleted at step b1).</p>
<p id="p-0056" num="0061">In still another embodiment of the present invention, the special information further includes the system key; and step b) further includes a step of updating the system key at every predetermined time and encrypting the title key using the updated system key.</p>
<p id="p-0057" num="0062">In still another embodiment of the present invention, the data structure information includes: an object region for storing data which is encrypted using a title key corresponding to a predetermined unit amount of data; a management region for storing management information of the encrypted data; and an encryption region for storing the title key which is encrypted using a system key, the special information includes: a first check code which is calculated from the management information; and a second check code which is calculated from the encrypted title key, step a) includes a step of moving a predetermined amount of content included in the encrypted data from the first storage section to the second storage section, step b) includes steps of: b1) deleting the moved predetermined amount of content from the object region b2) updating the management information; and b3) updating the first check code by means of a calculation based on the updated management information, and the method further includes steps of: c) repeating steps a) and b) until the amount of the moved content becomes equal to the predetermined unit data amount; d) when the amount of moved content becomes equal to the predetermined unit data amount, deleting from the encryption region the encrypted title key which is used for decrypting the data; and e) updating the second check code by means of a calculation based on the encrypted title key.</p>
<p id="p-0058" num="0063">In still another embodiment of the present invention, the special information further includes the system key; and step b) further includes a step of updating the system key and encrypting the title key using the updated system key.</p>
<p id="p-0059" num="0064">In still another embodiment of the present invention, the method further includes steps of: f) calculating the first check code from the management information; g) determining whether or not the first check code obtained at step f) is identical to the first check code held in the special information holding section; h) if the determination result of step g) indicates “not identical”, restricting the controller in controlling the first storage sections but if the determination result of step g) indicates “identical”, calculating the second check code from the encrypted title key; i) determining whether or not the second check code obtained at step h) is identical to the second check code held in the special information holding section; and j) if the determination result of step i) indicates “not identical”, restricting the controller in controlling the first storage section, but if the determination result of step 1) indicates “identical”, allowing the controller to control the first storage section.</p>
<p id="p-0060" num="0065">According to still another aspect of the present invention, there is provided a method for deleting data from a recording/reproducing apparatus, the recording/reproducing apparatus including: a storage section for storing data structure information which includes encrypted data, the encrypted data including a content which is allowed to be stored for a predetermined time period; a special information holding section for holding special information associated with the data structure information; and a controller for controlling the storage section and the special information holding section, wherein the data structure information and the special information are associated with each other such that the special information is updated in response to an update of the data structure information, or such that the data structure information is updated in response to an update of the special information, the method comprising steps of: a) after a predetermined time period has elapsed, deleting the content from the storage section; and b) updating the special information held in the special information holding section every time step a) is completed such that a mismatch occurs between the special information obtained before step a) and the updated special information.</p>
<p id="p-0061" num="0066">In one embodiment of the present invention, the data structure information includes: an object region for storing data which is encrypted using a title key corresponding to a predetermined unit amount of data; a management region for storing management information of the encrypted data; and an encryption region for storing the title key which is encrypted using a system keys the special information is the system key, the data is a content which can be stored for a predetermined time period, step b) includes steps of: b1) updating the management information; b2) updating the system key; b3) deleting from the encryption region the encrypted title key which is used for decrypting the content; and b4) encrypting the title key again using the updated system key.</p>
<p id="p-0062" num="0067">In another embodiment of the present invention, the data structure information includes: an object region for storing data which is encrypted using a title key corresponding to a predetermined unit amount of data; a management region for storing management information of the encrypted data; and an encryption region for storing the title key and the management information which are encrypted using a system key, the special information is the system key, step b) includes steps of: b1) updating the management information; b2) updating the system key; and b3) encrypting the title key and the updated management information using the updated system key, the method further includes, c) repeating steps a) and b) until the amount of the deleted content becomes equal to the predetermined unit data amount; and d) when the amount of deleted content becomes equal to the predetermined unit data amount, deleting from the encryption region the encrypted title key which is used for decrypting the data.</p>
<p id="p-0063" num="0068">In still another embodiment of the present invention, the data structure information includes: an object region for storing a content which is a part of the encrypted data and which is encrypted using a title key corresponding to the content; and a management region for storing management information of the encrypted content and correspondence information which represents a correspondence between the encrypted content and the title key used for decrypting the encrypted content, the correspondence being established by allocating ID information to the encrypted content, the special information includes the title key to which the ID information is allocated and which is encrypted using a system key, step b) includes steps of: b1) updating the management information; and b2) deleting the encrypted title key which has the same ID information as that allocated to the deleted content.</p>
<p id="p-0064" num="0069">In still another embodiment of the present invention, the special information further includes the system key; and step b) further includes a step of updating the system key at every predetermined time and encrypting the title key using the updated system key.</p>
<p id="p-0065" num="0070">In still another embodiment of the present invention, the data structure information includes: an object region for storing data which is encrypted using a title key corresponding to a predetermined unit amount of data; a management region for storing management information of the encrypted data; and an encryption region for storing the title key which is encrypted using a system key, the special information includes: a first check code which is calculated from the management information; and a second check code which is calculated from the encrypted title key, step b) includes steps of: b1) updating the management information; and b2) updating the first check code by means of a calculation based on the updated management information, and the method further includes steps of: c) repeating steps a) and b) until the amount of the deleted content becomes equal to the predetermined unit data amount; d) when the amount of deleted content becomes equal to the predetermined unit data amount, deleting from the encryption region the encrypted title key which is used for decrypting the data; and e) updating the second check code by means of a calculation based on the encrypted title key.</p>
<p id="p-0066" num="0071">In still another embodiment of the present invention, the special information further includes the system key; and step b) further includes a step of updating the system key and encrypting the title key using the updated system key, thereby updating the encryption region.</p>
<p id="p-0067" num="0072">Thus, the invention described herein makes possible the advantages of (1) preventing production of an illegal copy and invalidating illegally copied data; (2) preventing production of an illegal copy which may be committed by interrupting a data movement operation and invalidating illegally copied data which may be obtained by interrupting a data transfer operation; and (3) deleting data which is allowed to be stored for a predetermined time period.</p>
<p id="p-0068" num="0073">These and other advantages of the present invention will become apparent to those skilled in the art upon reading and understanding the following detailed description with reference to the accompanying figures.</p>
<?BRFSUM description="Brief Summary" end="tail"?>
<?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?>
<description-of-drawings>
<heading id="h-0003" level="1">BRIEF DESCRIPTION OF THE DRAWINGS</heading>
<p id="p-0069" num="0074"><figref idref="DRAWINGS">FIG. 1</figref> shows a structure of a conventional video recording/reproducing apparatus.</p>
<p id="p-0070" num="0075"><figref idref="DRAWINGS">FIG. 2</figref> shows a structure of a conventional fixed storage device.</p>
<p id="p-0071" num="0076"><figref idref="DRAWINGS">FIG. 3</figref> illustrates a procedure for moving data from a fixed storage device to an information recording medium in the conventional video recording/reproducing apparatus of <figref idref="DRAWINGS">FIG. 1</figref>.</p>
<p id="p-0072" num="0077"><figref idref="DRAWINGS">FIG. 4</figref> shows the inside states of the fixed storage device and the information recording medium during a data movement operation.</p>
<p id="p-0073" num="0078"><figref idref="DRAWINGS">FIG. 5</figref> schematically shows a recording/reproducing apparatus of the present invention</p>
<p id="p-0074" num="0079"><figref idref="DRAWINGS">FIG. 6</figref> shows data structure information before and after a data movement operation in the recording/reproducing apparatus of <figref idref="DRAWINGS">FIG. 5</figref>.</p>
<p id="p-0075" num="0080"><figref idref="DRAWINGS">FIG. 7</figref> shows a structure of a recording/reproducing apparatus of the present invention.</p>
<p id="p-0076" num="0081"><figref idref="DRAWINGS">FIG. 8</figref> shows data structure information where data (programs) P<b>1</b> and P<b>2</b> are stored in a hard disc.</p>
<p id="p-0077" num="0082"><figref idref="DRAWINGS">FIG. 9</figref> illustrates a procedure for moving data from a first storage section to a second storage section within the recording/reproducing apparatus of <figref idref="DRAWINGS">FIG. 7</figref>.</p>
<p id="p-0078" num="0083"><figref idref="DRAWINGS">FIG. 10</figref> illustrates a procedure for deleting data from a first storage section of the recording/reproducing apparatus of the present invention.</p>
<p id="p-0079" num="0084"><figref idref="DRAWINGS">FIG. 11</figref> shows a structure of a recording/reproducing apparatus of the present invention, outside of which another storage section is provided.</p>
<p id="p-0080" num="0085"><figref idref="DRAWINGS">FIG. 12</figref> shows data structure information, where data (programs) P<b>1</b> and P<b>2</b> are stored in a fixed storage device.</p>
<p id="p-0081" num="0086"><figref idref="DRAWINGS">FIG. 13</figref> illustrates a procedure for moving data from a first storage section to a second storage section within a recording/reproducing apparatus of the present invention.</p>
<p id="p-0082" num="0087"><figref idref="DRAWINGS">FIG. 14</figref> illustrates a procedure for deleting data from a first storage section of a recording/reproducing apparatus of the present invention.</p>
<p id="p-0083" num="0088"><figref idref="DRAWINGS">FIG. 15</figref> shows a procedure for imposing a penalty on a fraudulent party.</p>
<p id="p-0084" num="0089"><figref idref="DRAWINGS">FIG. 16</figref> shows data structure information including data (program) P<b>1</b> and P<b>2</b>, which is stored in a fixed storage device, and special information held in a special information holding section.</p>
<p id="p-0085" num="0090"><figref idref="DRAWINGS">FIG. 17</figref> illustrates a procedure for moving data from a first storage section to a second storage section within a recording/reproducing apparatus of the present invention.</p>
<p id="p-0086" num="0091"><figref idref="DRAWINGS">FIG. 18</figref> illustrates a procedure for deleting data from a first storage section of a recording/reproducing apparatus of the present invention.</p>
<p id="p-0087" num="0092"><figref idref="DRAWINGS">FIG. 19</figref> shows data structure information including data (program) P<b>1</b> and P<b>2</b>, which is stored in a fixed storage device, and special information held in a special information holding section.</p>
<p id="p-0088" num="0093"><figref idref="DRAWINGS">FIG. 20</figref> illustrates a procedure for moving data from a first storage section to a second storage section within a recording/reproducing apparatus of the present invention.</p>
<p id="p-0089" num="0094"><figref idref="DRAWINGS">FIG. 21</figref> illustrates a procedure for deleting data from a first storage section of a recording/reproducing apparatus of the present invention.</p>
<p id="p-0090" num="0095"><figref idref="DRAWINGS">FIG. 22</figref> shows a procedure for imposing a penalty on a fraudulent party.</p>
</description-of-drawings>
<?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?>
<?DETDESC description="Detailed Description" end="lead"?>
<heading id="h-0004" level="1">DESCRIPTION OF THE PREFERRED EMBODIMENTS</heading>
<p id="p-0091" num="0096">First, the principle of the present invention is described. As described above, an objective of the present invention is to prevent illegal copying and invalidate illegally copied data. To this end, data is appropriately controlled before and after movement of data. In the present specification, “data” may be a predetermined unit amount of data, such as a music program including a moving image, a television program, music data, image data, etc.</p>
<p id="p-0092" num="0097"><figref idref="DRAWINGS">FIG. 5</figref> schematically shows a recording/reproducing apparatus <b>5000</b> of the present invention. In <figref idref="DRAWINGS">FIG. 5</figref>, for clearly explaining the principle of the present invention, the components of an actual recording/reproducing apparatus are shown in simplified forms.</p>
<p id="p-0093" num="0098">The recording/reproducing apparatus <b>5000</b> includes: a first storage section <b>5001</b>; a special information holding section <b>5002</b>; and a controller (CPU: central processing unit) <b>5003</b>.</p>
<p id="p-0094" num="0099">The first storage section <b>5001</b> encrypts externally-input data and stores data structure information including the encrypted data. The special information holding section <b>5002</b> holds special information which is associated with the data structure information. The controller <b>5003</b> controls the first storage section <b>5001</b> and the special information holding section <b>5002</b>. A second storage section <b>5004</b> is externally connected to the recording/reproducing apparatus <b>5000</b> such that the second storage section <b>5004</b> is controlled by the controller <b>5003</b>. However, the second storage section <b>5004</b> may be incorporated in the recording/reproducing apparatus <b>5000</b>.</p>
<p id="p-0095" num="0100">According to the above structure, the data structure information and the special information are stored separately, while the data structure information and the special information can be controlled so as to be associated with each other. As a result, the encrypted data of the data structure information cannot be solely encrypted. Therefore, the data structure information can be more securely stored.</p>
<p id="p-0096" num="0101"><figref idref="DRAWINGS">FIG. 6</figref> shows the data structure information and the special information before and after a data movement operation in the recording/reproducing apparatus of <figref idref="DRAWINGS">FIG. 5</figref>. In <figref idref="DRAWINGS">FIG. 6</figref>, for simplicity of illustration, only the data structure information stored in the first storage section <b>5001</b> and the special information held in the special information holding section <b>5002</b> of the recording/reproducing apparatus <b>5000</b> are shown.</p>
<p id="p-0097" num="0102">At pre-movement state, i.e., State (I), the data structure information includes: a management region <b>6001</b> for storing management information A, such as address, data size of stored data and use status of the first storage section; and an object region <b>6002</b> for storing encrypted data O. The encrypted data O includes data P<b>1</b>. The special information holding section <b>5002</b> holds special information S. The special information S is associated with the management information A and/or the encrypted data O.</p>
<p id="p-0098" num="0103">After the data P<b>1</b> in the object region <b>6002</b> has been moved to the second storage section <b>5004</b>, the data P<b>1</b> is deleted from the object region <b>6002</b>, and the special information S is then updated to special information S′. In response to the update of the special information S, data O is updated to data O′, and the management information A is updated to management information A′. Alternatively, in response to the update of data O and the management information A, the special information S may be updated to special information S′.</p>
<p id="p-0099" num="0104">When the controller <b>5003</b> controls the first storage section <b>5001</b> and the special information holding section <b>5002</b> in the above described manner, the special information held in the special information holding section <b>5002</b>, which is obtained after the data movement operation, mismatches with (i.e., differs from) the special information held in the section <b>5002</b> which is obtained before the data movement operation. In such a case, even if the data structure information <b>6000</b> stored in the first storage section <b>5001</b> at the pre-movement state, i.e., State (I), is harbored into a personal computer including a separate hard disk, or the like, and then returned to the first storage section <b>5001</b> at the post-movement state, i.e., State (II), the special information S, which is associated with the data structure information <b>6000</b> at State (I), is no longer present in the recording/reproducing apparatus <b>5000</b> at State (II). As a result, the returned data of the data structure information <b>6000</b> is invalid at State (II).</p>
<p id="p-0100" num="0105">Hereinafter, embodiments of the present invention will be described with reference to the drawings. In the following sections of the present specification, an encryption operation is exemplified for describing the embodiments of the present invention. Data to be encrypted (data x) and encrypted data (data x′) has the following relationship:
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>Ey</i>(<i>x</i>)=<i>x′</i>  (1)<?in-line-formulae description="In-line Formulae" end="tail"?>
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>Dy</i>(<i>x</i>′)=<i>Dy</i>(<i>Ey</i>(<i>x</i>))=<i>x</i>  (2)<?in-line-formulae description="In-line Formulae" end="tail"?>
<br/>
where y represents a key used for encryption or decryption. E(t) represents an encryption operation. D(t) represents a decryption operation. Expression (1) means that data x is encrypted using key y so as to obtain data x′. Expression (2) means that the encrypted data x′ is decrypted using key y so as to obtain data x.
</p>
<heading id="h-0005" level="1">Embodiment 1</heading>
<p id="p-0101" num="0106"><figref idref="DRAWINGS">FIG. 7</figref> shows a structure of a recording/reproducing apparatus <b>114</b> of the present invention. The recording/reproducing apparatus <b>114</b> includes: a first storage section <b>111</b>; a special information holding section <b>110</b>; a controller <b>105</b>; an analog/digital input/output section <b>112</b>; and a second storage section <b>113</b>.</p>
<p id="p-0102" num="0107">The analog/digital input/output section <b>112</b> includes an input section <b>100</b> and an output section <b>103</b>. The input section <b>100</b> converts externally-input analog data into digitally compressed data. The output section <b>103</b> converts the digitally compressed data into analog data.</p>
<p id="p-0103" num="0108">The first storage section <b>111</b> includes an encryption section <b>101</b>; a temporary storage section <b>102</b>; a decryption section <b>104</b>; an input/output section <b>106</b>; and a fixed storage device <b>107</b>.</p>
<p id="p-0104" num="0109">If copy generation management information attached to data is free-content information, the encryption section <b>101</b> does not perform an encryption process. If the copy generation management information is information indicating that production of a child copy (first generation copy) is permitted, or information that permits storage of data for a predetermined time period, the encryption section <b>101</b> changes the copy generation management information into copy prohibition information, and the data is encrypted and stored in the temporary storage section <b>110</b>.</p>
<p id="p-0105" num="0110">The temporary storage section <b>102</b> is a high speed memory, such as an SDRAM or the like. Since the above described sections work based on different data transfer rates, the temporary storage section <b>102</b> is used as buffer means for buffering the transfer rate difference among the sections.</p>
<p id="p-0106" num="0111">The decryption section <b>104</b> decrypts the encrypted data and outputs the decrypted data to the data output section <b>103</b>.</p>
<p id="p-0107" num="0112">The input/output section <b>106</b> is a communication control means, such as IDE, SCSI, or the like, which controls data transfer to/from the fixed storage device <b>107</b>, such as a hard disc.</p>
<p id="p-0108" num="0113">The special information holding section <b>110</b> holds special information which is associated with data stored in the fixed storage device <b>107</b>. The special information holding section <b>110</b> cannot be accessed by an external device which is present outside the recording/reproducing apparatus <b>114</b>.</p>
<p id="p-0109" num="0114">The second storage section <b>113</b> includes a read/write section <b>108</b> and an information recording medium <b>109</b>. The information recording medium <b>109</b> may be a portable optical disc, such as a DVD-RAM or the like, a hard disc, etc. The read/write section <b>108</b> writes data in and/or reads data from the information recording medium <b>109</b>.</p>
<p id="p-0110" num="0115">The controller <b>105</b> controls the first storage section <b>111</b>, the special information holding section <b>110</b>, and the second storage section <b>113</b>. The controller <b>105</b> may be a central processing unit (CPU).</p>
<p id="p-0111" num="0116"><figref idref="DRAWINGS">FIG. 8</figref> shows data structure information where data (programs) P<b>1</b> and P<b>2</b> are stored in a hard disc <b>200</b>.</p>
<p id="p-0112" num="0117">Next, a recording operation of the recording/reproducing apparatus <b>114</b> is described with reference to <figref idref="DRAWINGS">FIGS. 7 and 8</figref>.</p>
<p id="p-0113" num="0118">The input section <b>100</b> externally receives a predetermined amount of analog image unit data P<b>1</b> (e.g., program P<b>1</b>), such as a broadcast wave or the like, and digitally compresses the analog image data P<b>1</b> based on MPEG. The compressed image data P<b>1</b> is transferred to the encryption section <b>101</b>. If the copy generation management information attached to the compressed image data P<b>1</b> is the copy prohibition information, the encryption section <b>101</b> is controlled by the controller <b>105</b> so as to stop a recording operation. If the copy generation management information is information which permits making a first generation copy, or information that permits storage of data for a predetermined time period, the encryption section <b>101</b> changes the copy generation management information into copy prohibition information, and encrypts the compressed image data P<b>1</b> using a title key Dk<b>1</b> which includes information inherent to the fixed storage device <b>107</b> and which corresponds to the predetermined unit amount of data P<b>1</b>. The encrypted data (EDk<b>1</b>(P<b>1</b>)) is transferred to the temporary storage section <b>102</b>. If copy generation management information is free-content information, the encryption section <b>101</b> does not perform an encryption process and transfers the compressed image data P<b>1</b> as it is to the temporary storage section <b>102</b>. In the following description, assume that the copy generation management information attached to the input data P<b>1</b> is information which permits making a first generation copy, or information that permits storage of data for a predetermined time period. The data EDk<b>1</b>(P<b>1</b>) stored in the temporary storage section <b>102</b> is moved to, and stored in, the fixed storage device <b>107</b> through the input/output section <b>106</b>. Specifically in this example, the encrypted data EDk<b>1</b>(P<b>1</b>) is stored in the fixed storage device <b>107</b> as an encrypted program <b>206</b> within an object region <b>202</b> of data structure information <b>210</b>.</p>
<p id="p-0114" num="0119">Management information, such as a data storage position which is used for reading the encrypted program <b>206</b> from the object region <b>202</b>, a data size, and the use status of the fixed storage device <b>107</b>, are stored in a management region <b>201</b> within the data structure information <b>210</b>.</p>
<p id="p-0115" num="0120">The management region <b>201</b> includes a data management region <b>204</b> and a use status management region <b>205</b>. The data management region <b>204</b> stores a data storage position and a data size. The use status management region <b>205</b> stores the use status of the object region <b>202</b> (e.g., unused capacity of the object region <b>202</b>). The management information in the management region <b>201</b> is updated every time data comes to the object region <b>202</b> and is stored therein.</p>
<p id="p-0116" num="0121">The title key Dk<b>1</b>, which is necessary for decrypting the encrypted program <b>206</b> in a reproduction operation, is encrypted using a system key Ds. The encrypted title key EDs(Dk<b>1</b>) is stored in an encryption region <b>203</b> within the data structure information <b>210</b>. The system key Da used for encrypting the title key Dk<b>1</b> is stored in the special information holding section <b>110</b>.</p>
<p id="p-0117" num="0122">When another data P<b>2</b> is stored subsequently to the data P<b>1</b>, the data P<b>2</b> is encrypted using a title key Dk<b>2</b> which corresponds to the data P<b>2</b>, and stored as the encrypted program EDk<b>2</b>(P<b>2</b>) in the object region <b>202</b> where the data PI has been stored. When the data P<b>1</b> and P<b>2</b> are stored in the object region <b>202</b>, all of the data stored in the encryption region <b>203</b> (in this example, the encrypted title key EDs(Dk<b>1</b>)) are read out and decrypted using the system key Ds held in the special information holding section <b>110</b>. After the decryption has been completed, the system key Ds is updated to system key Ds′. Then, the updated system key Ds' is used to encrypt the title keys Dk<b>1</b> and Dk<b>2</b>. The encrypted title keys EDs′ (Dk<b>1</b>) and EDs′ (Dk<b>2</b>) are stored in the encryption region <b>203</b> again.</p>
<p id="p-0118" num="0123">A reproduction operation for reproducing data recorded in such a way is substantially the same as that described above with reference to <figref idref="DRAWINGS">FIG. 1</figref>, except that the special information held in the special information holding section <b>110</b> is used. Therefore, the description of the reproduction operation is herein omitted.</p>
<p id="p-0119" num="0124">As described above, a title key which is used for decrypting encrypted data stored in the fixed storage device <b>107</b> (the hard disc <b>200</b> in <figref idref="DRAWINGS">FIG. 8</figref>) is encrypted by using a system key held in the special information holding section <b>110</b> which is separately provided from the fixed storage device <b>107</b>. With such an arrangement, it is impossible to obtain reproducible data only with data stored in the fixed storage device <b>107</b>.</p>
<p id="h-0006" num="0000">1. Data from which Production of First Generation Copy is Permitted</p>
<p id="p-0120" num="0125">Now, a case where data having data structure information shown in <figref idref="DRAWINGS">FIG. 8</figref> is moved from the first storage section <b>111</b> to the second storage section <b>113</b> is described. Data described in this section is data from which production of a first generation copy is permitted.</p>
<p id="p-0121" num="0126"><figref idref="DRAWINGS">FIG. 9</figref> illustrates a procedure for moving data from the first storage section <b>111</b> to the second storage section <b>113</b> within the recording/reproducing apparatus <b>114</b>. In this example, assume that the fixed storage device <b>107</b> of the first storage section <b>111</b> is a hard disc <b>200</b>; the information recording medium <b>109</b> of the second storage section <b>113</b> is a DVD-RAM; the predetermined unit amount of data is the program P<b>1</b>; and the program P<b>1</b> stored in the hard disc <b>200</b> as shown in <figref idref="DRAWINGS">FIG. 8</figref> is moved to the DVD-RAM <b>109</b>. The program P<b>1</b> is encrypted using the title key Dk<b>1</b> and stored in the object region <b>202</b> in the hard disk <b>200</b>.
<ul id="ul0013" list-style="none">
    <li id="ul0013-0001" num="0000">
    <ul id="ul0014" list-style="none">
        <li id="ul0014-0001" num="0127">Step <b>300</b>:</li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0122" num="0128">Encrypted title keys EDs′ (Dk<b>1</b>, Dk<b>2</b>) are readout from the encryption region <b>203</b>.
<ul id="ul0015" list-style="none">
    <li id="ul0015-0001" num="0000">
    <ul id="ul0016" list-style="none">
        <li id="ul0016-0001" num="0129">Step <b>301</b>:</li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0123" num="0130">The system key Ds′ which is held in the special information holding section <b>110</b> is used to decrypt the encrypted title keys EDs′ (Dk<b>1</b>, Dk<b>2</b>) so as to obtain a title key Dk<b>1</b>.
<ul id="ul0017" list-style="none">
    <li id="ul0017-0001" num="0000">
    <ul id="ul0018" list-style="none">
        <li id="ul0018-0001" num="0131">Step <b>302</b>:</li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0124" num="0132">Based on management information stored in the management region <b>201</b>, the encrypted program EDk<b>1</b>(P<b>1</b>) is read from the hard disc <b>200</b> and stored in the temporary storage section <b>102</b>.
<ul id="ul0019" list-style="none">
    <li id="ul0019-0001" num="0000">
    <ul id="ul0020" list-style="none">
        <li id="ul0020-0001" num="0133">Step <b>303</b>:</li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0125" num="0134">The read program EDk<b>1</b>(P<b>1</b>) is decrypted using the title key Dk<b>1</b> obtained at step <b>301</b> (DDk<b>1</b>(EDk<b>1</b>)(P<b>1</b>))).
<ul id="ul0021" list-style="none">
    <li id="ul0021-0001" num="0000">
    <ul id="ul0022" list-style="none">
        <li id="ul0022-0001" num="0135">Step <b>304</b>:</li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0126" num="0136">The decrypted program P<b>1</b> is encrypted using a title key Dr which includes information inherent to the DVD-RAM, in order to prevent illegal copying (EDr(P<b>1</b>)).
<ul id="ul0023" list-style="none">
    <li id="ul0023-0001" num="0000">
    <ul id="ul0024" list-style="none">
        <li id="ul0024-0001" num="0137">Step <b>305</b>:</li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0127" num="0138">The encrypted program EDr(P<b>1</b>) is recorded on the DVD-RAM <b>109</b>.</p>
<p id="p-0128" num="0139">Through steps <b>300</b> to <b>305</b>, the program P<b>1</b> is moved to (recorded on) the DVD-RAM <b>109</b> from the fixed storage device <b>107</b>.
<ul id="ul0025" list-style="none">
    <li id="ul0025-0001" num="0000">
    <ul id="ul0026" list-style="none">
        <li id="ul0026-0001" num="0140">Step <b>306</b>:</li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0129" num="0141">Steps <b>302</b> to <b>305</b> are repeated until all the data of the program P<b>1</b> is recorded on the DVD-RAM <b>109</b>.
<ul id="ul0027" list-style="none">
    <li id="ul0027-0001" num="0000">
    <ul id="ul0028" list-style="none">
        <li id="ul0028-0001" num="0142">Step <b>307</b>:</li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0130" num="0143">After all the data of the program P<b>1</b> has been moved to the DVD-RAM <b>109</b>, the program P<b>1</b> is deleted from the object region <b>202</b> of the hard disc <b>107</b>, and the management information (i.e., the management region <b>204</b> and the use status management region <b>205</b>) are updated.
<ul id="ul0029" list-style="none">
    <li id="ul0029-0001" num="0000">
    <ul id="ul0030" list-style="none">
        <li id="ul0030-0001" num="0144">Step <b>308</b>:</li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0131" num="0145">The encrypted title key EDs′ (Dk<b>1</b>), which was used for decrypting the program P<b>1</b>, is deleted from the encryption region <b>203</b>.
<ul id="ul0031" list-style="none">
    <li id="ul0031-0001" num="0000">
    <ul id="ul0032" list-style="none">
        <li id="ul0032-0001" num="0146">Step <b>309</b>:</li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0132" num="0147">The system key Ds′ held in the special information holding section <b>110</b> is updated to a system key Ds″.
<ul id="ul0033" list-style="none">
    <li id="ul0033-0001" num="0000">
    <ul id="ul0034" list-style="none">
        <li id="ul0034-0001" num="0148">Step <b>310</b>:</li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0133" num="0149">The updated system key Ds″ is used to encrypt the remaining title keys (EDs″ (Dk<b>2</b>)), whereby the encryption region <b>203</b> is updated.</p>
<p id="p-0134" num="0150">Through steps <b>307</b> to <b>310</b>, the program P<b>1</b> is deleted from the hard disc <b>200</b>, whereby the data movement from the hard disc <b>200</b> to the DVD-RAM <b>109</b> is completed.</p>
<p id="p-0135" num="0151">According to embodiment 1, a mismatch occurs between the special information (system key Ds′) obtained before movement of data from the first storage section <b>111</b> to the second storage section <b>113</b> and the special information (system key Ds″) obtained after movement of data from the first storage section <b>111</b> to the second storage section <b>113</b> (Ds′≠Ds″). Due to this mismatch, even if data is copied (harbored) into another hard disc before the data is moved from the first storage section <b>111</b> to the second storage section <b>113</b>, and the harbored data is returned from the another hard disc to the first storage section <b>111</b> after the data has been moved from the first storage section <b>111</b> to the second storage section <b>113</b>, special information which is necessary for decrypting the data is no longer present. Thus, production of a plurality of illegal copies can be prevented, and illegally copied data can be invalidated.</p>
<p id="h-0007" num="0000">2. Data which is Allowed to be Stored for a Predetermined Time Period</p>
<p id="p-0136" num="0152">Now, a case where data having data structure information shown in <figref idref="DRAWINGS">FIG. 8</figref> is deleted from the first storage section <b>111</b> is described. Data described in this section is data which is allowed to be stored for a predetermined time period.</p>
<p id="p-0137" num="0153"><figref idref="DRAWINGS">FIG. 10</figref> illustrates a procedure for deleting data from the first storage section <b>111</b> of the recording/reproducing apparatus of the present invention. In this example, assume that the fixed storage device <b>107</b> of the first storage section <b>111</b> is a hard disc <b>200</b>; the program P<b>1</b> (the predetermined unit amount of data) is content which is allowed to be stored for a predetermined time period; and the program P<b>1</b> stored in the hard disc <b>200</b> as shown in <figref idref="DRAWINGS">FIG. 8</figref> is deleted from the hard disc <b>200</b> after a predetermined time period has elapsed. The program P<b>1</b> is encrypted using the title key Dk<b>1</b> and stored in the object region <b>202</b> in the hard disk <b>200</b>.
<ul id="ul0035" list-style="none">
    <li id="ul0035-0001" num="0000">
    <ul id="ul0036" list-style="none">
        <li id="ul0036-0001" num="0154">Step <b>1001</b>:</li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0138" num="0155">After a predetermined time period has elapsed, content which is allowed to be stored for a predetermined time period is deleted from the first storage section <b>111</b>.
<ul id="ul0037" list-style="none">
    <li id="ul0037-0001" num="0000">
    <ul id="ul0038" list-style="none">
        <li id="ul0038-0001" num="0156">Step <b>1002</b>:</li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0139" num="0157">Management information is updated.
<ul id="ul0039" list-style="none">
    <li id="ul0039-0001" num="0000">
    <ul id="ul0040" list-style="none">
        <li id="ul0040-0001" num="0158">Step <b>1003</b>:</li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0140" num="0159">A system key held in the special information holding section <b>110</b> is updated.
<ul id="ul0041" list-style="none">
    <li id="ul0041-0001" num="0000">
    <ul id="ul0042" list-style="none">
        <li id="ul0042-0001" num="0160">Step <b>1004</b>:</li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0141" num="0161">An encrypted title key which is used for decrypting the deleted content is deleted from the encryption region <b>203</b>.
<ul id="ul0043" list-style="none">
    <li id="ul0043-0001" num="0000">
    <ul id="ul0044" list-style="none">
        <li id="ul0044-0001" num="0162">Step <b>1005</b>:</li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0142" num="0163">The system key Ds″ updated at step <b>1003</b> is used to encrypt the remaining title keys in the encryption region <b>203</b> (in this example, Dk<b>2</b>).</p>
<p id="p-0143" num="0164">According to embodiment 1, a mismatch occurs between the special information (system key Ds′) obtained before deletion of data from the first storage section <b>111</b> and the special information (system key Ds″) obtained after deletion of data from the first storage section <b>111</b> (Ds′≠Ds″). Due to this mismatch, even if data is copied (harbored) into another hard disc before the data is deleted from the first storage section <b>111</b>, and the harbored data is returned from the another hard disc to the first storage section <b>111</b> after the data is deleted from the first storage section <b>111</b>, special information which is necessary for decrypting the data is no longer present. Thus, production of a plurality of illegal copies can be prevented, and illegally copied data can be invalidated. That is, the data which is allowed to be stored for a predetermined time period is deleted with certainty.</p>
<p id="p-0144" num="0165">The recording/reproducing apparatus of the present invention is not limited to the recording/reproducing apparatus <b>114</b> shown in <figref idref="DRAWINGS">FIG. 1</figref>.</p>
<p id="p-0145" num="0166"><figref idref="DRAWINGS">FIG. 11</figref> shows a recording/reproducing apparatus <b>1520</b> of the present invention, outside of which another storage section is provided.</p>
<p id="p-0146" num="0167">In this example, the recording/reproducing apparatus <b>1520</b> has substantially the same structure as that of the recording/reproducing apparatus <b>114</b> of <figref idref="DRAWINGS">FIG. 7</figref>, except that an external digital recording apparatus <b>1540</b> is attached as another storage section to the recording/reproducing apparatus <b>1520</b>. In <figref idref="DRAWINGS">FIG. 11</figref>, like elements are indicated by like reference numerals used in <figref idref="DRAWINGS">FIG. 7</figref>, and detailed descriptions thereof are omitted.</p>
<p id="p-0147" num="0168">An analog/digital input/output section <b>1511</b> includes an input section <b>1500</b> and an output section <b>1503</b>. The input section <b>1500</b> converts analog data, which is input from the external digital recording apparatus <b>1540</b> and/or input from an external device different from the external digital recording apparatus <b>1540</b> (e.g., a television monitor), into digitally compressed data. The output section <b>1503</b> converts digitally compressed data into analog data, and moves the analog data from the first storage section <b>111</b> to the external digital recording apparatus <b>1540</b> and/or an external device different from the external digital recording apparatus <b>1540</b>.</p>
<p id="p-0148" num="0169">The analog/digital input/output section <b>1511</b> and the external digital recording apparatus <b>1540</b> are connected via a digital interface <b>1530</b>, such as an IEEE1394 or the like.</p>
<p id="p-0149" num="0170">Also in the recording/reproducing apparatus <b>1520</b> of <figref idref="DRAWINGS">FIG. 11</figref>, as well as in the recording/reproducing apparatus <b>114</b> of <figref idref="DRAWINGS">FIG. 7</figref>, data can be moved from the first storage section <b>111</b> to the external digital recording apparatus <b>1540</b> while preventing illegal copying.</p>
<p id="p-0150" num="0171">In another embodiment of the present invention, although not shown, the digital recording apparatus <b>1540</b> may be provided outside of the recording/reproducing apparatus <b>1520</b> and used as a substitute for the second storage section <b>113</b> shown in <figref idref="DRAWINGS">FIGS. 7 and 11</figref>.</p>
<p id="p-0151" num="0172">Hereinafter, embodiments 2-6 of the present invention are described. Each of embodiments 2-6 can be achieved using one of the recording/reproducing apparatuses shown in <figref idref="DRAWINGS">FIGS. 7 and 11</figref>.</p>
<heading id="h-0008" level="1">Embodiment 2</heading>
<p id="p-0152" num="0173"><figref idref="DRAWINGS">FIG. 12</figref> shows data structure information where data (programs) P<b>1</b> and P<b>2</b> are stored in a fixed storage device <b>107</b>. The data structure information includes a management region <b>201</b>, an object region <b>202</b>, and an encryption region <b>403</b>. In <figref idref="DRAWINGS">FIG. 12</figref>, like elements are indicated by like reference numerals used in <figref idref="DRAWINGS">FIG. 8</figref>, and detailed descriptions thereof are omitted.</p>
<p id="p-0153" num="0174">The data structure information shown in <figref idref="DRAWINGS">FIG. 12</figref> is different from that shown in <figref idref="DRAWINGS">FIG. 8</figref>, in that the encryption region <b>403</b> includes an encrypted title key region <b>408</b> and an encryption management region <b>409</b>. The encrypted title key region <b>408</b> stores a title key which is encrypted using a system key Ds′ held in the special information holding section <b>110</b> and which is used for encrypting data P<b>1</b> and P<b>2</b>. The encryption management region <b>409</b> stores management information which is encrypted using the system key Ds′ held in the special information holding section <b>110</b> and which is stored in the management region <b>201</b>. The other components of the recording/reproducing apparatus of embodiment 2 are the same as those described in embodiment 1, and detailed descriptions thereof are omitted. Further, recording and reproducing operations of the recording/reproducing apparatus of embodiment 2 are the same as those described in embodiment 1, and detailed descriptions thereof are omitted.</p>
<p id="h-0009" num="0000">1. Data from which Production of First Generation Copy is Permitted</p>
<p id="p-0154" num="0175">Now, a case where data having data structure information shown in <figref idref="DRAWINGS">FIG. 12</figref> is moved from the first storage section <b>111</b> to the second storage section <b>113</b> (see <figref idref="DRAWINGS">FIG. 7</figref> or <b>11</b>) is described. Data described in this section is data from which production of a first generation copy is permitted.</p>
<p id="p-0155" num="0176"><figref idref="DRAWINGS">FIG. 13</figref> illustrates a procedure for moving data from the first storage section <b>111</b> to the second storage section <b>113</b> within the recording/reproducing apparatus of the present invention(see <figref idref="DRAWINGS">FIG. 7</figref> or <b>11</b>). In this example, assume that the fixed storage device <b>107</b> of the first storage section <b>111</b> is a hard disc <b>400</b>, the information recording medium <b>109</b> of the second storage section <b>113</b> is a DVD-RAM; the predetermined unit amount of data is the program P<b>1</b>; and the program P<b>1</b> stored in the hard disc <b>400</b> as shown in <figref idref="DRAWINGS">FIG. 12</figref> is moved to the DVD-RAM <b>109</b>. The program P<b>1</b> is encrypted using the title key Dk<b>1</b> and stored in the object region <b>202</b> in the hard disk <b>400</b>. In embodiment 3, steps for writing in the DVD-RAM a predetermined amount of content included in the program P<b>1</b> shown in <figref idref="DRAWINGS">FIG. 13</figref> are the same as steps <b>300</b>-<b>305</b> shown in <figref idref="DRAWINGS">FIG. 9</figref>. Thus, description of these steps are not herein omitted note that the “predetermined amount of contents” may be video data having the reproduction length of about three minutes, for example.
<ul id="ul0045" list-style="none">
    <li id="ul0045-0001" num="0000">
    <ul id="ul0046" list-style="none">
        <li id="ul0046-0001" num="0177">Step <b>504</b>:</li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0156" num="0178">Steps <b>302</b> to <b>305</b> are repeated until all of the predetermined amount of content contained in the program P<b>1</b> is moved to (recorded on) the DVD-RAM <b>109</b>.
<ul id="ul0047" list-style="none">
    <li id="ul0047-0001" num="0000">
    <ul id="ul0048" list-style="none">
        <li id="ul0048-0001" num="0179">Step <b>505</b>:</li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0157" num="0180">After all of the predetermined amount of content contained in the program P<b>1</b> has been moved to the DVD-RAM <b>109</b>, the predetermined amount of content contained in the program P<b>1</b> is deleted from the object region <b>202</b> of the hard disc <b>400</b>.
<ul id="ul0049" list-style="none">
    <li id="ul0049-0001" num="0000">
    <ul id="ul0050" list-style="none">
        <li id="ul0050-0001" num="0181">Step <b>506</b>:</li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0158" num="0182">The management information (i.e., the management region <b>204</b> and the use status management region <b>205</b>) are updated.
<ul id="ul0051" list-style="none">
    <li id="ul0051-0001" num="0000">
    <ul id="ul0052" list-style="none">
        <li id="ul0052-0001" num="0183">Step <b>507</b>:</li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0159" num="0184">The system key Ds′ held in the special information holding section <b>110</b> is updated to a system key Ds″.
<ul id="ul0053" list-style="none">
    <li id="ul0053-0001" num="0000">
    <ul id="ul0054" list-style="none">
        <li id="ul0054-0001" num="0185">Step <b>508</b>:</li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0160" num="0186">The updated system key Ds″ is used to encrypt the title keys Dk<b>1</b> and Dk<b>2</b> and the updated management information, whereby the encryption region <b>403</b> is updated.
<ul id="ul0055" list-style="none">
    <li id="ul0055-0001" num="0000">
    <ul id="ul0056" list-style="none">
        <li id="ul0056-0001" num="0187">Step <b>509</b>:</li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0161" num="0188">Steps <b>302</b> to <b>305</b> and steps <b>504</b>-<b>508</b> are repeated until the data amount of the moved content becomes equal to a predetermined unit data amount.
<ul id="ul0057" list-style="none">
    <li id="ul0057-0001" num="0000">
    <ul id="ul0058" list-style="none">
        <li id="ul0058-0001" num="0189">Step <b>510</b>:</li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0162" num="0190">When the data amount of the moved content becomes equal to the amount of the program P<b>1</b> (the predetermined unit data amount), the encrypted title key EDS″ (Dk<b>1</b>), which was used for decrypting the program P<b>1</b>, is deleted from the encryption region <b>403</b>.</p>
<p id="p-0163" num="0191">Through steps <b>300</b> to <b>305</b> and steps <b>504</b>-<b>510</b>, the program P<b>1</b> is moved to (recorded on) the DVD-RAM <b>109</b> from the hard disc <b>400</b>, and the program P<b>1</b> is deleted from the hard disc <b>400</b>, whereby the data movement from the hard disc <b>400</b> to the DVD-RAM <b>109</b> is completed.</p>
<p id="p-0164" num="0192">According to embodiment 2, a mismatch occurs between the special information (system key Ds′) obtained before movement of the predetermined amount of content among the predetermined unit amount of data from the first storage section <b>111</b> to the second storage section <b>113</b> and the special information (system key Ds″) obtained after movement of the predetermined amount of content among the predetermined unit amount of data from the first storage section <b>111</b> to the second storage section <b>113</b> (Ds′≠Ds″). Further, the system key is updated every time a predetermined amount of content are moved from the first storage section <b>111</b> to the second storage section <b>113</b>, and the updated system key is used to encrypt the title key and the management region. With such arrangements, the data can be controlled by units of a smaller amount of data. Therefore, illegal copying of a smaller amount of data can be prevented.</p>
<p id="p-0165" num="0193">Furthermore, even if data movement is interrupted by disconnecting the power supply to the recording/reproducing apparatus before completion of data movement from the first storage section <b>111</b> to the second storage section <b>113</b>, the data deleted from the first storage section <b>111</b> cannot be restored because the management information associated with the data which has already been moved to the second storage section <b>113</b> and deleted from the first storage section <b>111</b> cannot be obtained.</p>
<p id="p-0166" num="0194">According to the present invention, if the special information holding section <b>110</b> has a sufficient capacity for holding a large amount of data, the data which was stored in the encryption region <b>403</b> in the above example may be stored in the special information holding section <b>110</b>. In such a case, the data is secretly kept within the recording/reproducing apparatus, so that the security against illegal data processing can be improved.</p>
<p id="h-0010" num="0000">2. Data which is Allowed to be Stored for a Predetermined Time Period</p>
<p id="p-0167" num="0195">Now, a case where data having data structure information shown in <figref idref="DRAWINGS">FIG. 12</figref> is deleted from the first storage section <b>111</b> (see <figref idref="DRAWINGS">FIG. 7</figref> or <b>11</b>) is described. Data described in this section is data which is allowed to be stored for a predetermined time period.</p>
<p id="p-0168" num="0196"><figref idref="DRAWINGS">FIG. 14</figref> illustrates a procedure for deleting data from the first storage section <b>111</b> of the recording/reproducing apparatus of the present invention (see <figref idref="DRAWINGS">FIG. 7</figref> or <b>11</b>). In this example, assume that the fixed storage device <b>107</b> of the first storage section <b>111</b> is a hard disc <b>400</b>; the predetermined unit amount of data is the program P<b>1</b>; and the program P<b>1</b> stored in the hard disc <b>400</b> as shown in <figref idref="DRAWINGS">FIG. 12</figref> is deleted from the hard disc <b>400</b> after a predetermined time period has elapsed. The program P<b>1</b> includes a plurality of contents which can be stored for a predetermined time period. Steps <b>1001</b>-<b>1003</b> shown in <figref idref="DRAWINGS">FIG. 14</figref> are the same as Steps <b>1001</b>-<b>1003</b> of <figref idref="DRAWINGS">FIG. 10</figref>. Therefore, descriptions of these steps are herein omitted.
<ul id="ul0059" list-style="none">
    <li id="ul0059-0001" num="0000">
    <ul id="ul0060" list-style="none">
        <li id="ul0060-0001" num="0197">Step <b>1401</b>:</li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0169" num="0198">The system key Ds″ updated at step <b>1003</b> is used to encrypt the title keys Dk<b>1</b> and Dk<b>2</b> and the updated management information, whereby the encryption region <b>403</b> is updated.
<ul id="ul0061" list-style="none">
    <li id="ul0061-0001" num="0000">
    <ul id="ul0062" list-style="none">
        <li id="ul0062-0001" num="0199">Step <b>1402</b>:</li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0170" num="0200">Steps <b>1001</b>-<b>1401</b> are repeated until the amount of the deleted contents becomes equal to the predetermined unit data amount, i.e., the data amount of the program P<b>1</b>.
<ul id="ul0063" list-style="none">
    <li id="ul0063-0001" num="0000">
    <ul id="ul0064" list-style="none">
        <li id="ul0064-0001" num="0201">Step <b>1403</b>:</li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0171" num="0202">When the amount of the deleted contents becomes equal to the predetermined unit data amount, i.e., the data amount of the program P<b>1</b>, the encrypted title key EDs″(Dk<b>1</b>) which is used for decrypting the program P<b>1</b> is deleted from the encryption region <b>403</b>.</p>
<p id="p-0172" num="0203">According to embodiment 2, a mismatch occurs between the special information (system key Ds′) obtained before deletion of a predetermined amount of content from the first storage section <b>111</b> and the special information (system key Ds″) obtained after deletion of a predetermined amount of content from the first storage section <b>111</b> (Ds′≠Ds″). Due to this mismatch, even if a predetermined amount of content is copied (harbored) into another hard disc before the predetermined amount of content is deleted from the first storage section <b>111</b>, and the harbored content is returned from the another hard disc to the first storage section <b>111</b> after a predetermined time period has elapsed and the predetermined amount of content is deleted from the first storage section <b>111</b>, special information which is necessary for decrypting the predetermined amount of content is no longer present. Thus, production of a plurality of illegal copies can be prevented, and illegally copied data can be invalidated. That is, the data which is allowed to be stored for a predetermined time period can be surely deleted. Furthermore, since the predetermined amount of contents is smaller than the predetermined unit data amount, the security against illegal data processing is higher in embodiment 2 than in embodiment 1.</p>
<heading id="h-0011" level="1">Embodiment 3</heading>
<p id="p-0173" num="0204"><figref idref="DRAWINGS">FIG. 15</figref> shows a procedure for imposing a penalty on a fraudulent party. Embodiment 3 is realized in the recording/reproducing apparatus (for example, the recording/reproducing apparatus <b>114</b> (<figref idref="DRAWINGS">FIG. 7</figref>) or the recording/reproducing apparatus <b>1520</b> (<figref idref="DRAWINGS">FIG. 11</figref>)) which records/reproduces data having the data structure information according to embodiment 2 (shown in <figref idref="DRAWINGS">FIG. 12</figref>). In embodiment 3, the fixed storage device <b>107</b> of the first storage section <b>11</b> is the hard disc <b>400</b> of <figref idref="DRAWINGS">FIG. 12</figref>. The hard disc <b>400</b> includes the data structure information as shown in <figref idref="DRAWINGS">FIG. 12</figref>.</p>
<p id="p-0174" num="0205">Hereinafter, steps of the procedure for imposing a penalty on a fraudulent party are described with reference to <figref idref="DRAWINGS">FIG. 15</figref>.
<ul id="ul0065" list-style="none">
    <li id="ul0065-0001" num="0000">
    <ul id="ul0066" list-style="none">
        <li id="ul0066-0001" num="0206">Step <b>600</b>:</li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0175" num="0207">The system key Ds″ is acquired from the special information holding section <b>110</b> immediately after the start-up of the recording/reproducing apparatus.
<ul id="ul0067" list-style="none">
    <li id="ul0067-0001" num="0000">
    <ul id="ul0068" list-style="none">
        <li id="ul0068-0001" num="0208">Step <b>601</b>:</li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0176" num="0209">The system key Ds″ is used to decrypt the encrypted management information stored in the encryption management region <b>409</b> within the encryption region <b>403</b>.
<ul id="ul0069" list-style="none">
    <li id="ul0069-0001" num="0000">
    <ul id="ul0070" list-style="none">
        <li id="ul0070-0001" num="0210">Step <b>602</b>:</li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0177" num="0211">The decrypted management information is written in the management region <b>201</b>, and the management region <b>201</b> is updated.</p>
<p id="p-0178" num="0212">In the arrangement of embodiment 3, assume that a fraudulent party illegally copies data structure information associated with the system key Ds′ into another hard disc before a data movement operation and returns the data structure information to the hard disc <b>400</b> in the recording/reproducing apparatus after the data movement operation. Encrypted management information in the encryption region <b>403</b> is decrypted using an updated system key Ds″, which is different from a system key Ds′ that was used for encrypting the management information, whereby the management region <b>201</b> is updated. As a result, the encrypted management information is decrypted using the updated system key Ds″ which is irrelevant thereto, so that the management region <b>201</b> is broken. Accordingly, the fraudulent party has to restore the management region <b>201</b> by formatting the hard disc <b>400</b> or a like measure. That is, such a penalty is imposed on the fraudulent party.</p>
<p id="p-0179" num="0213">Alternatively, assume that, after a predetermined amount of content included in a predetermined unit amount of data has been deleted, a fraudulent party restores the deleted predetermined amount of content so as to obtain a predetermined unit amount of data. Since, according to embodiment 3, the encryption region <b>403</b> including the management information is updated every time a predetermined amount of content is moved, the management information not indicating that the predetermined amount of content deleted therefrom is overwritten in the management region <b>201</b> by performing steps <b>600</b>-<b>602</b> at the start-up of the recording/reproducing apparatus. As a result, restoration of the deleted predetermined amount of content can be prevented.</p>
<heading id="h-0012" level="1">Embodiment 4</heading>
<p id="p-0180" num="0214"><figref idref="DRAWINGS">FIG. 16</figref> shows data structure information including data (program) P<b>1</b> and P<b>2</b>, which is stored in the fixed storage device <b>107</b> (see <figref idref="DRAWINGS">FIG. 7</figref> or <b>11</b>), and special information held in the special information holding section <b>110</b>. Embodiment 4 differs from embodiments 1-3 in that a plurality of title keys are used to encrypt a predetermined unit amount of data, and the title keys and identification (ID) information allocated thereto are held in the special information holding section <b>110</b>. The other details of recording and reproducing operations of the recording/reproducing apparatus according to embodiment 4 are the same as those of embodiment 1, and therefore are not herein described.</p>
<p id="p-0181" num="0215">The data structure information includes a management region <b>703</b> and an object region <b>704</b>.</p>
<p id="p-0182" num="0216">The object region <b>704</b> stores encrypted data (for example, programs P<b>1</b> and P<b>2</b>). The program P<b>1</b> includes a plurality of contents (for example, P<b>1</b>-<b>1</b>, P<b>1</b>-<b>2</b>, and P<b>1</b>-<b>3</b>). Different keys are used for encrypting the respective contents.</p>
<p id="p-0183" num="0217">The management region <b>703</b> stores a data management region <b>705</b> and a correspondence information management region <b>706</b>. The data management region <b>705</b> stores a data storage position and a data size. The correspondence information management region <b>706</b> stores correspondence information <b>709</b> which represents the correspondence between encrypted contents and title keys used for encrypting the encrypted contents. The correspondence is established by allocating ID information to each of the encrypted contents. Every time a content is encrypted, ID information is allocated to the encrypted content for identifying the encrypted content.</p>
<p id="p-0184" num="0218">The special information holding section <b>110</b> holds a system key <b>711</b>, and a title key <b>701</b> which is encrypted using the system key <b>711</b> and which has ID information. The system key <b>711</b> is updated by the controller <b>105</b> at a predetermined time interval (for example, every 3 minutes). The updated system key <b>711</b> is then used to encrypt the title key <b>701</b>. When a new ID information is given to the correspondence information <b>709</b>, the new ID information is allocated to the encrypted title key <b>701</b>, and the encrypted title key <b>701</b> with the ID information is stored in the special information holding section <b>110</b>.</p>
<p id="p-0185" num="0219">In embodiment 4, as described above, a title key, which is used for decrypting encrypted data stored in the fixed storage device <b>107</b>, is stored in the special information holding section <b>110</b>, which is provided separately from the fixed storage device <b>107</b>. With such an arrangement, it is impossible to obtain reproducible data only from the data stored in the fixed storage device <b>107</b>. Thus, a higher level of protection can be achieved as compared to embodiments 1-3.</p>
<p id="h-0013" num="0000">1. Data from which Production of First Generation Copy is Permitted</p>
<p id="p-0186" num="0220">Now, a case where data having data structure information shown in <figref idref="DRAWINGS">FIG. 16</figref> is moved from the first storage section <b>111</b> to the second storage section <b>113</b> (see <figref idref="DRAWINGS">FIG. 7</figref> or <b>11</b>) is described. Data described in this section is data from which production of a first generation copy is permitted</p>
<p id="p-0187" num="0221"><figref idref="DRAWINGS">FIG. 17</figref> illustrates a procedure for moving data from the first storage section <b>111</b> to the second storage section <b>113</b> within the recording/reproducing apparatus of the present invention (see <figref idref="DRAWINGS">FIG. 7</figref> or <b>11</b>). In this example, assume that the fixed storage device <b>107</b> of the first storage section <b>111</b> is a hard disc <b>702</b>; the information recording medium <b>109</b> of the second storage section <b>113</b> is a DVD-RAM; the predetermined unit amount of data is the program P<b>1</b>; and the program P<b>1</b> stored in the hard disc <b>702</b> as shown in <figref idref="DRAWINGS">FIG. 16</figref> is moved to the DVD-RAM <b>109</b>. The program P<b>1</b> is encrypted using the title keys Dk<b>1</b> to Dk<b>3</b> and stored in the object region <b>704</b> in the hard disk <b>702</b>.
<ul id="ul0071" list-style="none">
    <li id="ul0071-0001" num="0000">
    <ul id="ul0072" list-style="none">
        <li id="ul0072-0001" num="0222">Step <b>800</b>:</li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0188" num="0223">The correspondence information <b>709</b> is read from the correspondence information management region <b>706</b> within the management region <b>703</b>.
<ul id="ul0073" list-style="none">
    <li id="ul0073-0001" num="0000">
    <ul id="ul0074" list-style="none">
        <li id="ul0074-0001" num="0224">Step <b>801</b>:</li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0189" num="0225">ID information (e.g., ID<b>1</b>, ID<b>2</b>, ID<b>3</b>) allocated to respective contents of the program P<b>1</b> to be moved (e.g., EDk<b>1</b>(P<b>1</b>-<b>1</b>), EDk<b>2</b>(P<b>1</b>-<b>2</b>), EDk<b>3</b>(P<b>1</b>-<b>3</b>)) are acquired.
<ul id="ul0075" list-style="none">
    <li id="ul0075-0001" num="0000">
    <ul id="ul0076" list-style="none">
        <li id="ul0076-0001" num="0226">Step <b>802</b>:</li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0190" num="0227">The content to be moved, EDk<b>1</b>(P<b>1</b>-<b>1</b>), is read from the object region <b>704</b> and stored in the temporary storage section <b>102</b>.
<ul id="ul0077" list-style="none">
    <li id="ul0077-0001" num="0000">
    <ul id="ul0078" list-style="none">
        <li id="ul0078-0001" num="0228">Step <b>803</b>:</li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0191" num="0229">The encrypted title key (EDs(Dk<b>1</b>)), to which the ID information ID<b>1</b> obtained at step <b>801</b> is allocated, is decrypted using the system key Ds held in the special information holding section <b>110</b>. The encrypted content EDk<b>1</b>(P<b>1</b>-<b>1</b>) is decrypted using the decrypted title key Dk<b>1</b> (DDk<b>1</b>(EDk<b>1</b>(P<b>1</b>-<b>1</b>))).
<ul id="ul0079" list-style="none">
    <li id="ul0079-0001" num="0000">
    <ul id="ul0080" list-style="none">
        <li id="ul0080-0001" num="0230">Step <b>804</b>:</li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0192" num="0231">The decrypted content P<b>1</b>-<b>1</b> is encrypted using a title key Dr, which includes information inherent to a DVD-RAM, for the purpose of preventing illegal copying (EDr(P<b>1</b>-<b>1</b>)).
<ul id="ul0081" list-style="none">
    <li id="ul0081-0001" num="0000">
    <ul id="ul0082" list-style="none">
        <li id="ul0082-0001" num="0232">Step <b>805</b>:</li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0193" num="0233">The encrypted content EDr(P<b>1</b>-<b>1</b>) is recorded in the DVD-RAM <b>109</b>.</p>
<p id="p-0194" num="0234">Through steps <b>800</b>-<b>805</b>, the content P<b>1</b>-<b>1</b> is moved to (recorded in) the DVD-RAM <b>109</b> from the hard disc <b>702</b>.
<ul id="ul0083" list-style="none">
    <li id="ul0083-0001" num="0000">
    <ul id="ul0084" list-style="none">
        <li id="ul0084-0001" num="0235">Step <b>806</b>:</li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0195" num="0236">Steps <b>801</b>-<b>805</b> are repeated until all of the contents included in the program P<b>1</b>(i.e., the remaining contents P<b>1</b>-<b>2</b> and P<b>1</b>-<b>3</b>) are moved into the DVD-RAM <b>109</b>.
<ul id="ul0085" list-style="none">
    <li id="ul0085-0001" num="0000">
    <ul id="ul0086" list-style="none">
        <li id="ul0086-0001" num="0237">Step <b>807</b>:</li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0196" num="0238">After all of the contents included in the program P<b>1</b> have been moved into the DVD-RAM <b>109</b>, the contents P<b>1</b>-<b>1</b>, P<b>1</b>-<b>2</b> and P<b>1</b>-<b>3</b> are deleted from the object region <b>704</b> of the hard disc <b>702</b>.
<ul id="ul0087" list-style="none">
    <li id="ul0087-0001" num="0000">
    <ul id="ul0088" list-style="none">
        <li id="ul0088-0001" num="0239">Step <b>808</b>:</li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0197" num="0240">The data management region <b>705</b> is updated in response to deletion of the program P<b>1</b>. The ID information (ID<b>1</b>, ID<b>2</b>, ID<b>3</b>) allocated to the deleted program P<b>1</b> are deleted, whereby the correspondence information management region <b>706</b> is updated.
<ul id="ul0089" list-style="none">
    <li id="ul0089-0001" num="0000">
    <ul id="ul0090" list-style="none">
        <li id="ul0090-0001" num="0241">Step <b>809</b>:</li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0198" num="0242">The encrypted title keys with ID information (ID<b>1</b>-EDs(Dk<b>1</b>), ID<b>2</b>-EDs(Dk<b>2</b>), ID<b>3</b>-EDs(Dk<b>3</b>)), which are held in the special information holding section <b>110</b> and which are used for decrypting the program P<b>1</b>, are deleted</p>
<p id="p-0199" num="0243">Through steps <b>807</b>-<b>809</b>, the program P<b>1</b> is deleted from the hard disc <b>702</b>, whereby movement of the program P<b>1</b> from the hard disc <b>702</b> to the DVD-RAM <b>109</b> is completed.</p>
<p id="p-0200" num="0244">According to embodiment 4, a mismatch occurs between the special information obtained before movement of data from the first storage section <b>111</b> to the second storage section <b>113</b> and the special information obtained after movement of data from the first storage section <b>111</b> to the second storage section <b>113</b>. Further, after movement of data from the first storage section <b>111</b> to the second storage section <b>113</b> is completed, a title key used for decrypting the data is deleted due to such arrangements, even if data is copied (harbored) into another hard disc before the data is moved from the first storage section <b>111</b>, and the harbored data is returned from the another hard disc to the hard disc <b>702</b> after movement of the data has been completed, ID information allocated to that data is not present in the special information holding section <b>110</b>. As a result, the harbored data becomes invalid data, whereby illegal copying can be prevented.</p>
<p id="p-0201" num="0245">It should be noted that steps <b>801</b>-<b>809</b> may be alternatively performed for each content, rather than each program. In such a case, copying of a smaller amount of data can be prevented.</p>
<p id="h-0014" num="0000">2. Data Which is Allowed to be Stored for a Predetermined Time Period</p>
<p id="p-0202" num="0246">Now, a case where data having data structure information shown in <figref idref="DRAWINGS">FIG. 16</figref> is deleted from the first storage section <b>111</b>(see <figref idref="DRAWINGS">FIG. 7</figref> or <b>11</b>) is described. Data described in this section is data which is allowed to be stored for a predetermined time period.</p>
<p id="p-0203" num="0247"><figref idref="DRAWINGS">FIG. 18</figref> illustrates a procedure for deleting data from the first storage section <b>111</b> of the recording/reproducing apparatus of the present invention (see <figref idref="DRAWINGS">FIG. 7</figref> or <b>11</b>). In this example, assume that the fixed storage device <b>107</b> of the first storage section <b>111</b> is a hard disc <b>702</b> (<figref idref="DRAWINGS">FIG. 16</figref>); the predetermined unit amount of data is the program P<b>1</b>; and the program P<b>1</b> stored in the hard disc <b>702</b> as shown in <figref idref="DRAWINGS">FIG. 16</figref> is deleted from the hard disc <b>702</b> after a predetermined time period has elapsed. The program P<b>1</b> includes a plurality of contents (P<b>1</b>-<b>1</b>, P<b>1</b>-<b>2</b>, P<b>1</b>-<b>3</b>) which can be stored for a predetermined time period. Step <b>1001</b> shown in <figref idref="DRAWINGS">FIG. 18</figref> is the same as Step <b>1001</b> of <figref idref="DRAWINGS">FIG. 10</figref>, and therefore, descriptions of this step is herein omitted.
<ul id="ul0091" list-style="none">
    <li id="ul0091-0001" num="0000">
    <ul id="ul0092" list-style="none">
        <li id="ul0092-0001" num="0248">Step <b>1801</b>:</li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0204" num="0249">The data management region <b>705</b> is updated in response to deletion of a content. The ID information allocated to the deleted content are also deleted, whereby the correspondence information management region <b>706</b> is updated.
<ul id="ul0093" list-style="none">
    <li id="ul0093-0001" num="0000">
    <ul id="ul0094" list-style="none">
        <li id="ul0094-0001" num="0250">Step <b>1802</b>:</li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0205" num="0251">The encrypted title keys having the ID information, which is the same as that allocated to the deleted content, is deleted.</p>
<p id="p-0206" num="0252">According to embodiment 4, a mismatch occurs between the special information obtained before deletion of data from the first storage section <b>111</b> and the special information obtained after deletion of the data from the first storage section <b>111</b>. Due to this mismatch, even if data is copied (harbored) into another hard disc before the data is deleted from the first storage section <b>111</b>, and the harbored data is returned from the another hard disc to the first storage section <b>111</b> after a predetermined time period has elapsed and the data is deleted from the first storage section <b>111</b>, special information which is necessary for decrypting the data is no longer present. Thus, production of a plurality of illegal copies can be prevented, and illegally copied data becomes useless data.</p>
<p id="p-0207" num="0253">In embodiment 4, the system key <b>711</b> held in the special information holding section <b>110</b> is updated by the controller <b>105</b> at a predetermined time interval. However, according to the present invention, the system key <b>711</b> may not be updated. In this case, the same effect as those described above can be achieved without performing re-encryption/re-decryption of a title key, which is performed in response to an update of the system key. In embodiment 4, when a predetermined unit amount of data (e.g., a single program), or a predetermined amount of content included in the predetermined unit amount of data, is moved/deleted, an encrypted title key which has the same ID information as that allocated to the moved/deleted data (or content) is deleted from the special information holding section <b>110</b>. With such an arrangement, it is impossible to restore an encrypted title key having the same ID information as that allocated to data that was illegally copied before movement/deletion of the data.</p>
<heading id="h-0015" level="1">Embodiment 5</heading>
<p id="p-0208" num="0254"><figref idref="DRAWINGS">FIG. 19</figref> shows data structure information including data (program) P<b>1</b> and P<b>2</b>, which is stored in the fixed storage device <b>107</b> (see <figref idref="DRAWINGS">FIG. 7</figref> or <b>11</b>), and special information held in the special information holding section <b>110</b>.</p>
<p id="p-0209" num="0255">The special information holding section <b>110</b> shown in <figref idref="DRAWINGS">FIG. 19</figref> includes a check code region <b>1201</b> and a system key <b>1212</b>. The check code region <b>1201</b> includes a first check code S<b>0</b> and a second check code S<b>1</b>. The first check code S<b>0</b> is a value obtained by means of calculation based on management information in the management region <b>201</b> using a one-way function (e.g., a hash function). Similarly, the second check code S<b>1</b> is a value obtained by means of calculation based on an encrypted title key in the encryption region <b>203</b>. The data structure information <b>210</b> stored in the hard disk <b>200</b> of embodiment 5 has the same structure as that of the data structure information <b>210</b> of embodiment 1.</p>
<p id="p-0210" num="0256">Embodiment 5 is the same as embodiment 1 except that the special information holding section <b>110</b> includes the check code region <b>1201</b>. Every time a predetermined unit amount of data (e.g., program P<b>1</b>) comes to the fixed storage device <b>107</b> (e.g., hard disc <b>200</b>) and is stored therein, the first check code S<b>0</b> and the second check code S<b>1</b> held in the check code region <b>1201</b> are updated by means of calculations based on the management information and the encrypted title key, respectively. The other details of recording and reproducing operations of the recording/reproducing apparatus according to embodiment 5 are the same as those of embodiment 1, and therefore are not described herein.</p>
<p id="p-0211" num="0257">In embodiment 5, as described above, a title key used for decrypting an encrypted data stored in the fixed storage device <b>107</b> is encrypted by using a system key held in the special information holding section <b>110</b>, which is provided separately from the fixed storage device <b>107</b>. With such an arrangement, it is impossible to obtain reproducible data only from the data stored in the fixed storage device <b>107</b>. Further, the first check code S<b>0</b> and the second check code S<b>1</b> held in the special information holding section <b>110</b> are calculated from the management information in the management region <b>201</b> and the encrypted title key in the encryption region <b>203</b>, respectively. In normal operation, the first check code S<b>0</b> held in the special information holding section <b>110</b> and the first check code S<b>0</b> calculated from the management information always have the same value Similarly, the second check code S<b>1</b> held in the special information holding section <b>110</b> and the second check code S<b>1</b> calculated from the encrypted title key always have the same value. Thus, validity of data can be checked by determining whether or not the first check code S<b>0</b> held in the special information holding section <b>110</b> and the first check code S<b>0</b> calculated from the management information always have the same value, or whether or not the second check code S<b>1</b> held in the special information holding section <b>110</b> and the second check code S<b>1</b> calculated from the encrypted title key always have the same value.</p>
<p id="h-0016" num="0000">1. Data From Which Production of First Generation Copy is Permitted</p>
<p id="p-0212" num="0258">Now, a case where data having data structure information shown in <figref idref="DRAWINGS">FIG. 19</figref> is moved from the first storage section <b>111</b> to the second storage section <b>113</b> (see <figref idref="DRAWINGS">FIG. 7</figref> or <b>11</b>) is described. Data described in this section is data from which production of a first generation copy is permitted.</p>
<p id="p-0213" num="0259"><figref idref="DRAWINGS">FIG. 20</figref> illustrates a procedure for moving data from the first storage section <b>111</b> to the second storage section <b>113</b> within the recording/reproducing apparatus of the present invention (see <figref idref="DRAWINGS">FIG. 7</figref> or <b>11</b>). In this example, assume that the fixed storage device <b>107</b> of the first storage section <b>111</b> is a hard disc <b>200</b>; the information recording medium <b>109</b> of the second storage section <b>113</b> is a DVD-RAM; the predetermined unit amount of data is the program P<b>1</b>; and the program P<b>1</b> stored in the hard disc <b>200</b> as shown in <figref idref="DRAWINGS">FIG. 19</figref> is moved from the hard disc <b>200</b> to the DVD-RAM <b>109</b>. The program P<b>1</b> is encrypted using the title key Dk<b>1</b> and stored in the object region <b>202</b> in the hard disk <b>200</b>. In embodiment 5, steps for deleting from the hard disk <b>200</b> a predetermined amount of content included in the program P<b>1</b> and updating the system key shown in <figref idref="DRAWINGS">FIG. 20</figref> (steps <b>300</b>-<b>305</b> and <b>504</b>-<b>507</b> of <figref idref="DRAWINGS">FIG. 20</figref>) are the same as steps <b>300</b>-<b>305</b> and <b>504</b>-<b>507</b> shown in <figref idref="DRAWINGS">FIG. 13</figref>. Thus, description of these steps are not here in omitted. Note that the “predetermined amount of content” may be video data having the reproduction length of about three minutes, for example.
<ul id="ul0095" list-style="none">
    <li id="ul0095-0001" num="0000">
    <ul id="ul0096" list-style="none">
        <li id="ul0096-0001" num="0260">Step <b>1301</b>:</li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0214" num="0261">The updated system key is used to encrypt the title key, whereby the encryption region is updated.</p>
<p id="h-0017" num="0000">Step <b>1302</b>:</p>
<p id="p-0215" num="0262">By means of a calculation based on the management information stored in the management region <b>201</b>, the first check code S<b>0</b> held in the special information holding section <b>110</b> is updated.
<ul id="ul0097" list-style="none">
    <li id="ul0097-0001" num="0000">
    <ul id="ul0098" list-style="none">
        <li id="ul0098-0001" num="0263">Step <b>1303</b>:</li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0216" num="0264">Steps <b>302</b> to <b>305</b>, <b>504</b>-<b>507</b>, and <b>1301</b>-<b>1302</b> are repeated until the data amount of the moved content becomes equal to a predetermined unit amount of data (program P<b>1</b>).
<ul id="ul0099" list-style="none">
    <li id="ul0099-0001" num="0000">
    <ul id="ul0100" list-style="none">
        <li id="ul0100-0001" num="0265">Step <b>1304</b>:</li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0217" num="0266">When the data amount of the moved content becomes equal to the amount of the program P<b>1</b> (the predetermined unit data amount), the encrypted title key, which was used for decrypting the program P<b>1</b>, is deleted from the encryption region <b>203</b>, whereby the encryption region <b>203</b> as updated.
<ul id="ul0101" list-style="none">
    <li id="ul0101-0001" num="0000">
    <ul id="ul0102" list-style="none">
        <li id="ul0102-0001" num="0267">Step <b>1305</b>:</li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0218" num="0268">By means of a calculation based on the encrypted title key, the second check code S<b>1</b> held in the special information holding section <b>110</b> is updated.</p>
<p id="p-0219" num="0269">According to embodiment 5, a mismatch occurs between the special information (system key Ds′ and first or second check code) obtained before movement of the predetermined amount of content among the predetermined unit amount of data from the first storage section <b>111</b> to the second storage section <b>113</b> and the special information (system key Ds″ and first or second check code) obtained after movement of the predetermined amount of content among the predetermined unit amount of data from the first storage section <b>111</b> to the second storage section <b>113</b>. Further, the first check code S<b>0</b> or the second check code S<b>1</b> is updated by means of a calculation based on the management information stored in the management region <b>201</b>, or a calculation based on the encrypted title key every time the predetermine amount of content is moved from the first storage section <b>111</b> to the second storage section <b>113</b>. In embodiment 5, in the case where a fraudulent party interrupts data movement by disconnecting the power supply to the recording/reproducing apparatus in order to restore the data which has been deleted from the first storage section <b>111</b>, the first check code SO or the second check code S<b>1</b> held in the special information holding section <b>110</b> does not match with the value of the first check code S<b>0</b> or the second check code S<b>1</b> which is calculated from the data structure information <b>210</b>. Due to such check codes, an illegal activity committed by a fraudulent party can be readily detected.</p>
<p id="h-0018" num="0000">2. Data Which is Allowed to be Stored for a Predetermined Time Period</p>
<p id="p-0220" num="0270">Now, a case where data having data structure information shown in <figref idref="DRAWINGS">FIG. 19</figref> is deleted from the first storage section <b>111</b> (see <figref idref="DRAWINGS">FIG. 7</figref> or <b>11</b>) is described. Data described in this section is data which is allowed to be stored for a predetermined time period.</p>
<p id="p-0221" num="0271"><figref idref="DRAWINGS">FIG. 21</figref> illustrates a procedure for deleting data from the first storage section <b>111</b> of the recording/reproducing apparatus of the present invention (see <figref idref="DRAWINGS">FIG. 7</figref> or <b>11</b>). In this example, assume that the fixed storage device <b>107</b> of the first storage section <b>111</b> is a hard disc <b>200</b> (<figref idref="DRAWINGS">FIG. 19</figref>); the predetermined unit amount of data is the program P<b>1</b>; and the program P<b>1</b> stored in the hard disc <b>200</b> as shown in <figref idref="DRAWINGS">FIG. 19</figref> is deleted from the hard disc <b>200</b> after a predetermined time period has elapsed. The program P<b>1</b> includes a plurality of contents which can be stored for a predetermined time period. Steps <b>1001</b>-<b>1003</b> shown in <figref idref="DRAWINGS">FIG. 21</figref> are the same as steps <b>1001</b>-<b>1003</b> of <figref idref="DRAWINGS">FIG. 10</figref>, and therefore, descriptions of these steps are herein omitted.
<ul id="ul0103" list-style="none">
    <li id="ul0103-0001" num="0000">
    <ul id="ul0104" list-style="none">
        <li id="ul0104-0001" num="0272">Step <b>1601</b>:</li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0222" num="0273">The system key Ds″ updated at step <b>1003</b> is used to encrypt the title keys Dk<b>1</b> and Dk<b>2</b>, whereby the encryption region <b>203</b> is updated.
<ul id="ul0105" list-style="none">
    <li id="ul0105-0001" num="0000">
    <ul id="ul0106" list-style="none">
        <li id="ul0106-0001" num="0274">Step <b>1602</b>:</li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0223" num="0275">By means of a calculation based on the management information stored in the management region <b>201</b>, the first check code S<b>0</b> held in the special information holding section <b>110</b> is updated.
<ul id="ul0107" list-style="none">
    <li id="ul0107-0001" num="0000">
    <ul id="ul0108" list-style="none">
        <li id="ul0108-0001" num="0276">Step <b>1603</b>:</li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0224" num="0277">Steps <b>1001</b>-<b>1003</b> and <b>1601</b> and <b>1602</b> are repeated until the amount of the deleted contents becomes equal to the predetermined unit data amount, i.e., the data amount of the program P<b>1</b>.
<ul id="ul0109" list-style="none">
    <li id="ul0109-0001" num="0000">
    <ul id="ul0110" list-style="none">
        <li id="ul0110-0001" num="0278">Step <b>1604</b>:</li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0225" num="0279">When the amount of the deleted contents becomes equal to the predetermined unit data amount, i.e. , the data amount of the program P<b>1</b>, the encrypted title key EDs″ (Dk<b>1</b>) which is used for decrypting the program P<b>1</b> is deleted from the encryption region <b>203</b>, whereby the encryption region <b>203</b> is updated.
<ul id="ul0111" list-style="none">
    <li id="ul0111-0001" num="0000">
    <ul id="ul0112" list-style="none">
        <li id="ul0112-0001" num="0280">Step <b>1605</b>:</li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0226" num="0281">By means of a calculation based on the encrypted title key, the second check code S<b>1</b> held in the special information holding section <b>110</b> is updated.</p>
<p id="p-0227" num="0282">According to embodiment 5, a mismatch occurs between the special information (system key Ds′ and first or second check code) obtained before deletion of the predetermined amount of content among the predetermined unit amount of data from the first storage section <b>111</b> and the special information (system key Ds″ and first or second check code) obtained after deletion of the predetermined amount of content among the predetermined unit amount of data from the first storage section <b>111</b>. Due to this mismatch, even if data is copied (harbored) into another hard disc before the data is deleted from the first storage section <b>111</b>, and the harbored data is returned from the another hard disc to the first storage section <b>111</b> after a predetermined time period has elapsed and the data is deleted from the first storage section <b>111</b>, special information which is necessary for decrypting the data is no longer present. Thus, production of a plurality of illegal copies can be prevented, and illegally copied data becomes useless data.</p>
<p id="p-0228" num="0283">Furthermore, in such a case the first check code S<b>0</b> or the second check code S<b>1</b> held in the special information holding section <b>110</b> does not match with the value of the first check code S<b>0</b> or the second check code S<b>1</b> which is calculated from the data structure information <b>210</b>. Thus, an illegal activity committed by a fraudulent party can be readily detected.</p>
<p id="p-0229" num="0284">In embodiment 5, the system key <b>1212</b> held in the special information holding section <b>110</b> is updated by the controller <b>105</b> every time a predetermined amount of content are deleted. However, according to the present invention, the system key <b>711</b> may not be updated. That is, steps <b>507</b> and <b>1301</b> of <figref idref="DRAWINGS">FIG. 20</figref> and steps <b>1003</b> and <b>1601</b> of <figref idref="DRAWINGS">FIG. 21</figref> can be omitted. In this case, the same effect as those described above can be achieved without performing re-encryption/re-decryption of a title key, which is performed in response to an update of the system key.</p>
<p id="p-0230" num="0285">According to embodiment 5, a mismatch occurs between the special information (first or second check code) obtained before movement/deletion of the predetermined amount of content among the predetermined unit amount of data from the first storage section <b>111</b> and the special information (first or second check code) obtained after movement/deletion of the predetermined amount of content among the predetermined unit amount of data from the first storage section <b>111</b>. Further, if illegal copying is conducted by a fraudulent party, the first check code S<b>0</b> or the second check code S<b>1</b> held in the special information holding section <b>110</b> is not identical to the value of the first check code S<b>0</b> or the second check code S<b>1</b> which is calculated from the data structure information <b>210</b>. Thus, an illegal activity committed by a fraudulent party can be readily detected by simply determining whether the first or second check codes obtained before and after the data movement or deletion operation are identical or not.</p>
<heading id="h-0019" level="1">Embodiment 6</heading>
<p id="p-0231" num="0286"><figref idref="DRAWINGS">FIG. 22</figref> shows a procedure for imposing a penalty on a fraudulent party. Embodiment 6 is realized in the recording/reproducing apparatus (for example, the recording/reproducing apparatus <b>114</b> (<figref idref="DRAWINGS">FIG. 7</figref>) or the recording/reproducing apparatus <b>1520</b> (<figref idref="DRAWINGS">FIG. 11</figref>)) which records/reproduces data having the data structure information according to embodiment 5 (shown in <figref idref="DRAWINGS">FIG. 19</figref>). In embodiment 6, the fixed storage device <b>107</b> of the first storage section <b>111</b> is the hard disc <b>200</b> of <figref idref="DRAWINGS">FIG. 19</figref>. The hard disc <b>200</b> includes the data structure information as shown in <figref idref="DRAWINGS">FIG. 19</figref>.</p>
<p id="p-0232" num="0287">Hereinafter, steps of the procedure for imposing a penalty on a fraudulent party are described with reference to <figref idref="DRAWINGS">FIG. 22</figref>.
<ul id="ul0113" list-style="none">
    <li id="ul0113-0001" num="0000">
    <ul id="ul0114" list-style="none">
        <li id="ul0114-0001" num="0288">Step <b>1701</b>:</li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0233" num="0289">The value of the first check code S<b>0</b> is calculated from the management information of the management region <b>201</b> immediately after the start-up of the recording/reproducing apparatus.
<ul id="ul0115" list-style="none">
    <li id="ul0115-0001" num="0000">
    <ul id="ul0116" list-style="none">
        <li id="ul0116-0001" num="0290">Step <b>1702</b>:</li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0234" num="0291">The first check code S<b>0</b> held in the special information holding section <b>110</b> is read out.
<ul id="ul0117" list-style="none">
    <li id="ul0117-0001" num="0000">
    <ul id="ul0118" list-style="none">
        <li id="ul0118-0001" num="0292">Step <b>1703</b>:</li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0235" num="0293">It is determined whether or not the value of the first check code S<b>0</b> calculated at step <b>1701</b> is identical to the value of the first check code S<b>0</b> read out at step <b>1702</b>. If identical, the process proceeds to step <b>1704</b>. If not identical, the process proceeds to step <b>1707</b>.
<ul id="ul0119" list-style="none">
    <li id="ul0119-0001" num="0000">
    <ul id="ul0120" list-style="none">
        <li id="ul0120-0001" num="0294">Step <b>1704</b>:</li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0236" num="0295">It “identical” at step <b>1703</b>, the value of the second check code S<b>1</b> is calculated from the encrypted title key of the encryption region <b>203</b>.
<ul id="ul0121" list-style="none">
    <li id="ul0121-0001" num="0000">
    <ul id="ul0122" list-style="none">
        <li id="ul0122-0001" num="0296">Step <b>1705</b>:</li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0237" num="0297">The second check code S<b>1</b> held in the special information holding section <b>110</b> is read out.
<ul id="ul0123" list-style="none">
    <li id="ul0123-0001" num="0000">
    <ul id="ul0124" list-style="none">
        <li id="ul0124-0001" num="0298">Step <b>1706</b>:</li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0238" num="0299">It is determined whether or not the value of the second check code S<b>1</b> calculated at step <b>1704</b> is identical to the value of the second check code S<b>1</b> read out at step <b>1705</b>. If identical, it is determined that no illegal processing is performed, and the recording/reproducing apparatus can perform a normal operation. If not identical, the process proceeds to step <b>1707</b>.
<ul id="ul0125" list-style="none">
    <li id="ul0125-0001" num="0000">
    <ul id="ul0126" list-style="none">
        <li id="ul0126-0001" num="0300">Step <b>1707</b>:</li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0239" num="0301">If “not identical” at step <b>1703</b> or step <b>1706</b>, it is determined that an illegal processing has been performed, and an access by the controller <b>105</b> to the hard disc <b>200</b> is restricted.</p>
<p id="p-0240" num="0302">According to embodiment 6, it is determined whether or not the value of the first check code S<b>0</b> held in the special information holding section <b>110</b> at the start-up of the recording/reproducing apparatus is identical to the value of the first check code S<b>0</b> calculated based on the management information and/or whether or not the value of the second check code S<b>1</b> held in the special information holding section <b>110</b> is identical to the value of the second check code S<b>1</b> calculated based on the encrypted title key. If not identical, it is determined that a fraudulent party conducted an illegal activity, and an access by the controller <b>105</b> to the hard disc <b>200</b> is restricted. On the other hand, a penalty can be imposed on the fraudulent party. For example, the fraudulent party is compelled to re-format data; an access by the fraudulent party is ignored by the recording/reproducing apparatus; or the fraudulent party is compelled to initialize the encryption region. According the present invention, such a penalty may be realized by any means which can bring some disbenefits to a fraudulent party in retaliation for his illegal data processing.</p>
<p id="p-0241" num="0303">A recording/reproducing apparatus of the present invention includes: a first storage section for storing data structure information which includes encrypted data; a special information holding section for holding special information associated with the data structure information; and a controller for controlling the first storage section and the special information holding section. The data structure information and the special information are associated with each other such that the special information is updated in response to an update of the data structure information, or such that the data structure information is updated in response to an update of the special information. With such an arrangement, the data structure information and the special information are stored separately, while the data structure information and the special information can be controlled so as to be associated with each other. As a result, the encrypted data of the data structure information cannot be solely encrypted. Therefore, the data structure information can be more securely stored.</p>
<p id="p-0242" num="0304">Furthermore, in the recording/reproducing apparatus of the present invention, the control section controls movement of the encrypted data from the first storage section to a second storage section; and the control section updates the special information held in the special information holding section such that a mismatch occurs between the special information obtained before the movement of the encrypted data from the first storage section to the second storage section and the special information obtained after the movement of the encrypted data from the first storage section to the second storage section. With such an arrangement, the special information which is necessary for decrypting the encrypted data can be different between before and after the movement of the encrypted data from the first storage section to the second storage section. As a result, illegally copied data becomes useless by itself, and production of a plurality of illegal copies becomes impossible.</p>
<p id="p-0243" num="0305">Various other modifications will be apparent to and can be readily made by those skilled in the art without departing from the scope and spirit of this invention. Accordingly, it is not intended that the scope of the claims appended hereto be limited to the description as set forth herein, but rather that the claims be broadly construed.</p>
<?DETDESC description="Detailed Description" end="tail"?>
</description>
<us-claim-statement>What is claimed is:</us-claim-statement>
<claims id="claims">
<claim id="CLM-00001" num="00001">
<claim-text>1. A recording/reproducing apparatus, comprising:
<claim-text>a first storage section for storing data structure information which includes encrypted data;</claim-text>
<claim-text>a special information holding section for holding special information associated with the data structure information; and</claim-text>
<claim-text>a controller for controlling the first storage section and the special information holding section,</claim-text>
<claim-text>wherein the data structure information and the special information are associated with each other such that the special information is updated in response to an update of the data structure information, or such that the data structure information is updated in response to an update of the special information,</claim-text>
<claim-text>the controller controls movement of the encrypted data from the first storage section to a second storage section, and</claim-text>
<claim-text>the controller updates the special information held in the special information holding section such that a mismatch occurs between the special information obtained before the movement of the encrypted data from the first storage section to the second storage section and the special information obtained after the movement of the encrypted data from the first storage section to the second storage section,</claim-text>
<claim-text>wherein the data structure information includes:</claim-text>
<claim-text>an object region for storing data which is encrypted using a title key corresponding to a predetermined unit amount of data;</claim-text>
<claim-text>a management region for storing management information of the encrypted data; and</claim-text>
<claim-text>an encryption region for storing the title key and the management information which are encrypted using a system key,</claim-text>
<claim-text>wherein the special information is the system key,</claim-text>
<claim-text>the controller controls a movement of a predetermined amount of content included in the encrypted data from the first storage section to the second storage section,</claim-text>
<claim-text>the controller updates the system key every time the predetermined amount of content is moved from the first storage section to the second storage section,</claim-text>
<claim-text>every time the predetermined amount of content is moved from the first storage section to the second storage section, the controller deletes the moved predetermined amount of content from the object region, updates the management information, and encrypts the title key and the updated management information using the updated system key, and</claim-text>
<claim-text>when the amount of moved contents becomes equal to the predetermined unit data amount, the controller deletes from the encryption region the encrypted title key which is used for decrypting the data.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00002" num="00002">
<claim-text>2. A recording/reproducing apparatus according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein, at the start-up of the recording/reproducing apparatus, the controller decrypts the management information using the system key, and overwrites the decrypted management information in the management region.</claim-text>
</claim>
<claim id="CLM-00003" num="00003">
<claim-text>3. A recording/reproducing apparatus, comprising:
<claim-text>a first storage section for storing data structure information which includes encrypted data;</claim-text>
<claim-text>a special information holding section for holding special information associated with the data structure information; and</claim-text>
<claim-text>a controller for controlling the first storage section and the special information holding section,</claim-text>
<claim-text>wherein the data structure information and the special information are associated with each other such that the special information is updated in response to an update of the data structure information, or such that the data structure information is updated in response to an update of the special information,</claim-text>
<claim-text>the controller controls movement of the encrypted data from the first storage section to a second storage section, and</claim-text>
<claim-text>the controller updates the special information held in the special information holding section such that a mismatch occurs between the special information obtained before the movement of the encrypted data from the first storage section to the second storage section and the special information obtained after the movement of the encrypted data from the first storage section to the second storage section,</claim-text>
<claim-text>wherein the data structure information includes:
<claim-text>an object region for storing data which is encrypted using a title key corresponding to a predetermined unit amount of data;</claim-text>
<claim-text>a management region for storing management information of the encrypted data; and</claim-text>
<claim-text>an encryption region for storing the title key which is encrypted using a system key,</claim-text>
</claim-text>
<claim-text>the special information includes:
<claim-text>a first check code which is calculated from the management information; and</claim-text>
<claim-text>a second check code which is calculated from the encrypted title key,</claim-text>
</claim-text>
<claim-text>the controller controls a movement of a predetermined amount of content included in the encrypted data from the first storage section to the second storage section,</claim-text>
<claim-text>every time the predetermined amount of content is moved from the first storage section to the second storage section, the controller deletes from the object region the moved predetermined amount of content, thereby updating the management information,</claim-text>
<claim-text>every time the predetermined amount of content is deleted from the first storage section, the controller updates the first check code held in the special information holding section by means of a calculation based on the updated management information,</claim-text>
<claim-text>when the amount of moved contents becomes equal to the predetermined unit data amount, the controller deletes from the encryption region the encrypted title key which is used for decrypting the data, and</claim-text>
<claim-text>every time the data is deleted, the controller updates the second check code held in the special information holding section by means of a calculation based on the encrypted title key.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00004" num="00004">
<claim-text>4. A recording/reproducing apparatus according to <claim-ref idref="CLM-00003">claim 3</claim-ref>, wherein:
<claim-text>the special information further includes the system key,</claim-text>
<claim-text>the controller updates the system key every time the predetermined amount of content is moved from the first storage section to the second storage section, and</claim-text>
<claim-text>the controller encrypts the title key using the updated system key, thereby updating the encryption region.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00005" num="00005">
<claim-text>5. A recording/reproducing apparatus according to <claim-ref idref="CLM-00003">claim 3</claim-ref>, wherein the controller determines whether or not a first check code and a second check code, which are calculated at the start-up of the recording/reproducing apparatus from the management information and the encrypted title key, respectively, are identical to the first check code and the second check code held in the special information holding section.</claim-text>
</claim>
<claim id="CLM-00006" num="00006">
<claim-text>6. A recording/reproducing apparatus, comprising:
<claim-text>a storage section for storing data structure information which includes encrypted data, the encrypted data including a content which is allowed to be stored for a predetermined time period;</claim-text>
<claim-text>a special information holding section for holding special information associated with the data structure information; and</claim-text>
<claim-text>a controller for controlling the storage section and the special information holding section,</claim-text>
<claim-text>wherein the data structure information and the special information are associated with each other such that the special information is undated in response to an update of the data structure information, or such that the data structure information is updated in response to an update of the special information,</claim-text>
<claim-text>the controller controls deletion of the content from the storage section after a predetermined time period has elapsed, and</claim-text>
<claim-text>the controller updates the special information held in the special information holding section such that a mismatch occurs between the special information obtained before the deletion of the content from the storage section and the special information obtained after the deletion of the content from the storage section,</claim-text>
<claim-text>wherein the data structure information includes:</claim-text>
<claim-text>an object region for storing data which is encrypted using a title key corresponding to a predetermined unit amount of data;</claim-text>
<claim-text>a management region for storing management information of the encrypted data; and</claim-text>
<claim-text>an encryption region for storing the title key and management information which are encrypted using a system key,</claim-text>
<claim-text>wherein the special information is the system key,</claim-text>
<claim-text>every time the content is deleted from the storage section after a predetermined time period has elapsed, the controller updates the management information and the system key,</claim-text>
<claim-text>the controller encrypts the title key and the updated management information using the updated system key, and</claim-text>
<claim-text>when the amount of deleted contents becomes equal to the predetermined unit data amount, the controller deletes from the encryption region the encrypted title key which is used for decrypting the data.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00007" num="00007">
<claim-text>7. A recording/reproducing apparatus, comprising:
<claim-text>a storage section for storing data structure information which includes encrypted data, the encrypted data including a content which is allowed to be stored for a predetermined time period;</claim-text>
<claim-text>a special information holding section for holding special information associated with the data structure information; and</claim-text>
<claim-text>a controller for controlling the storage section and the special information holding section,</claim-text>
<claim-text>wherein the data structure information and the special information are associated with each other such that the special information is undated in response to an update of the data structure information, or such that the data structure information is updated in response to an update of the special information,</claim-text>
<claim-text>the controller controls deletion of the content from the storage section after a predetermined time period has elapsed, and</claim-text>
<claim-text>the controller updates the special information held in the special information holding section such that a mismatch occurs between the special information obtained before the deletion of the content from the storage section and the special information obtained after the deletion of the content from the storage section,</claim-text>
<claim-text>wherein the data structure information includes:
<claim-text>an object region for storing data which is encrypted using a title key corresponding to a predetermined unit amount of data;</claim-text>
<claim-text>a management region for storing management information of the encrypted data; and</claim-text>
<claim-text>an encryption region for storing the title key which is encrypted using a system key,</claim-text>
</claim-text>
<claim-text>the special information includes:
<claim-text>a first check code which is calculated from the management information; and</claim-text>
<claim-text>a second check code which is calculated from the encrypted title key,</claim-text>
</claim-text>
<claim-text>every time the predetermined amount of content is deleted from the storage section after a predetermined time period has elapsed, the controller updates the management information,</claim-text>
<claim-text>every time the management information is updated, the controller updates the first check code held in the special information holding section by means of a calculation based on the updated management information,</claim-text>
<claim-text>when the amount of deleted content becomes equal to the predetermined unit data amount, the controller deletes from the encryption region the encrypted title key which is used for decrypting the data, thereby updating the encryption region, and</claim-text>
<claim-text>the controller updates the second check code held in the special information holding section by means of a calculation based on the encrypted title key.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00008" num="00008">
<claim-text>8. A method for moving data from a recording/reproducing apparatus, the recording/reproducing apparatus including:
<claim-text>a first storage section for storing data structure information which includes encrypted data;</claim-text>
<claim-text>a special information holding section for holding special information associated with the data structure information; and</claim-text>
<claim-text>a controller for controlling the first storage section and the special information holding section,</claim-text>
<claim-text>wherein the data structure information and the special information are associated with each other such that the special information is updated in response to an update of the data structure information, or such that the data structure information is updated in response to an update of the special information, the method comprising steps of:</claim-text>
<claim-text>a) moving the encrypted data from the first storage section to a second storage section; and</claim-text>
<claim-text>b) updating the special information held in the special information holding section every time step a) is completed such that a mismatch occurs between the special information obtained before step a) and the updated special information,</claim-text>
<claim-text>wherein the data structure information includes:
<claim-text>an object region for storing data which is encrypted using a title key corresponding to a predetermined unit amount of data;</claim-text>
<claim-text>a management region for storing management information of the encrypted data; and</claim-text>
<claim-text>an encryption region for storing the title key and the management information which are encrypted using a system key,</claim-text>
</claim-text>
<claim-text>the special information is the system key,</claim-text>
<claim-text>step a) includes a step of moving a predetermined amount of content included in the encrypted data from the first storage section to the second storage section, and</claim-text>
<claim-text>step b) includes steps of:
<claim-text>b1) deleting the moved predetermined amount of content from the object region;</claim-text>
<claim-text>b2) updating the management information;</claim-text>
<claim-text>b3) updating the system key; and</claim-text>
<claim-text>b4) encrypting the title key and the updated management information using the updated system key,</claim-text>
</claim-text>
<claim-text>the method further includes steps of:
<claim-text>c) repeating steps a) and b) until the amount of the moved content becomes equal to the predetermined unit data amount; and</claim-text>
<claim-text>d) when the amount of moved content becomes equal to the predetermined unit data amount, deleting from the encryption region the encrypted title key which is used for decrypting the data.</claim-text>
</claim-text>
</claim-text>
</claim>
<claim id="CLM-00009" num="00009">
<claim-text>9. A method according to <claim-ref idref="CLM-00008">claim 8</claim-ref>, further comprising steps of:
<claim-text>e) acquiring the system key from the special information holding section;</claim-text>
<claim-text>f) decrypting the management information stored in the encryption region using the system key; and</claim-text>
<claim-text>g) overwriting the decrypted management information in the management region.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00010" num="00010">
<claim-text>10. A method for moving data from a recording/reproducing apparatus, the recording/reproducing apparatus including:
<claim-text>a first storage section for storing data structure information which includes encrypted data;</claim-text>
<claim-text>a special information holding section for holding special information associated with the data structure information; and</claim-text>
<claim-text>a controller for controlling the first storage section and the special information holding section,</claim-text>
<claim-text>wherein the data structure information and the special information are associated with each other such that the special information is updated in response to an update of the data structure information, or such that the data structure information is updated in response to an update of the special information, the method comprising steps of:</claim-text>
<claim-text>a) moving the encrypted data from the first storage section to a second storage section; and</claim-text>
<claim-text>b) updating the special information held in the special information holding section every time step a) is completed such that a mismatch occurs between the special information obtained before step a) and the updated special information,</claim-text>
<claim-text>wherein the data structure information includes:
<claim-text>an object region for storing data which is encrypted using a title key corresponding to a predetermined unit amount of data;</claim-text>
<claim-text>a management region for storing management information of the encrypted data; and</claim-text>
<claim-text>an encryption region for storing the title key which is encrypted using a system key,</claim-text>
</claim-text>
<claim-text>the special information includes:
<claim-text>a first check code which is calculated from the management information; and</claim-text>
<claim-text>a second check code which is calculated from the encrypted title key,</claim-text>
</claim-text>
<claim-text>step a) includes a step of moving a predetermined amount of content included in the encrypted data from the first storage section to the second storage section,</claim-text>
<claim-text>step b) includes steps of:
<claim-text>b1) deleting the moved predetermined amount of content from the object region</claim-text>
<claim-text>b2) updating the management information; and</claim-text>
<claim-text>b3) updating the first check code by means of a calculation based on the updated management information, and</claim-text>
</claim-text>
<claim-text>the method further includes steps of:
<claim-text>c) repeating steps a) and b) until the amount of the moved content becomes equal to the predetermined unit data amount;</claim-text>
<claim-text>d) when the amount of moved content becomes equal to the predetermined unit data amount, deleting from the encryption region the encrypted title key which is used for decrypting the data; and</claim-text>
<claim-text>e) updating the second check code by means of a calculation based on the encrypted title key.</claim-text>
</claim-text>
</claim-text>
</claim>
<claim id="CLM-00011" num="00011">
<claim-text>11. A method according to <claim-ref idref="CLM-00010">claim 10</claim-ref>, wherein:
<claim-text>the special information further includes the system key; and</claim-text>
<claim-text>step b) further includes a step of updating the system key and encrypting the title key using the updated system key.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00012" num="00012">
<claim-text>12. A method according to <claim-ref idref="CLM-00010">claim 10</claim-ref>, further comprising steps of:
<claim-text>f) calculating the first check code from the management information;</claim-text>
<claim-text>g) determining whether or not the first check code obtained at step f) is identical to the first check code held in the special information holding section;</claim-text>
<claim-text>h) if the determination result of step g) indicates “not identical”, restricting the controller in controlling the first storage section, but if the determination result of step g) indicates “identical”, calculating the second check code from the encrypted title key;</claim-text>
<claim-text>i) determining whether or not the second check code obtained at step h) is identical to the second check code held in the special information holding section; and</claim-text>
<claim-text>j) if the determination result of step i) indicates “not identical”, restricting the controller in controlling the first storage section, but if the determination result of step i) indicates “identical”, allowing the controller to control the first storage section.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00013" num="00013">
<claim-text>13. A method for deleting data from a recording/reproducing apparatus, the recording/reproducing apparatus including:
<claim-text>a storage section for storing data structure information which includes encrypted data, the encrypted data including a content which is allowed to be stored for a predetermined time period;</claim-text>
<claim-text>a special information holding section for holding special information associated with the data structure information; and</claim-text>
<claim-text>a controller for controlling the storage section and the special information holding section,</claim-text>
<claim-text>wherein the data structure information and the special information are associated with each other such that the special information is undated in response to an update of the data structure information, or such that the data structure information is updated in response to an update of the special information, the method comprising steps of:</claim-text>
<claim-text>a) after a predetermined time period has elapsed, deleting the content from the storage section; and</claim-text>
<claim-text>b) updating the special information held in the special information holding section every time step a) is completed such that a mismatch occurs between the special information obtained before step a) and the undated special information,</claim-text>
<claim-text>wherein the data structure information includes:
<claim-text>an object region for storing data which is encrypted using a title key corresponding to a predetermined unit amount of data;</claim-text>
<claim-text>a management region for storing management information of the encrypted data; and</claim-text>
<claim-text>an encryption region for storing the title key and the management information which are encrypted using a system key,</claim-text>
</claim-text>
<claim-text>the special information is the system key,</claim-text>
<claim-text>step b) includes steps of:
<claim-text>b1) updating the management information;</claim-text>
<claim-text>b2) updating the system key; and</claim-text>
<claim-text>b3) encrypting the title key and the updated management information using the updated system key,</claim-text>
</claim-text>
<claim-text>the method further includes,
<claim-text>c) repeating steps a) and b) until the amount of the deleted content becomes equal to the predetermined unit data amount; and</claim-text>
<claim-text>d) when the amount of deleted content becomes equal to the predetermined unit data amount, deleting from the encryption region the encrypted title key which is used for decrypting the data.</claim-text>
</claim-text>
</claim-text>
</claim>
<claim id="CLM-00014" num="00014">
<claim-text>14. A method according to <claim-ref idref="CLM-00009">claim 9</claim-ref>, wherein
<claim-text>the data structure information includes:
<claim-text>an object region for storing a content which is a part of the encrypted data and which is encrypted using a title key corresponding to the content; and</claim-text>
<claim-text>a management region for storing management information of the encrypted content and correspondence information which represents a correspondence between the encrypted content and the title key used for decrypting the encrypted content, the correspondence being established by allocating ID information to the encrypted content,</claim-text>
</claim-text>
<claim-text>the special information includes the title key to which the ID information is allocated and which is encrypted using a system key,</claim-text>
<claim-text>step b) includes steps of:
<claim-text>b1) updating the management information; and</claim-text>
<claim-text>b2) deleting the encrypted title key which has the same ID information as that allocated to the deleted content.</claim-text>
</claim-text>
</claim-text>
</claim>
<claim id="CLM-00015" num="00015">
<claim-text>15. A method according to <claim-ref idref="CLM-00014">claim 14</claim-ref>, wherein:
<claim-text>the special information further includes the system key; and</claim-text>
<claim-text>step b) further includes a step of updating the system key at every predetermined time and encrypting the title key using the updated system key.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00016" num="00016">
<claim-text>16. A method for deleting data from a recording/reproducing apparatus, the recording/reproducing apparatus including:
<claim-text>a storage section for storing data structure information which includes encrypted data, the encrypted data including a content which is allowed to be stored for a predetermined time period;</claim-text>
<claim-text>a special information holding section for holding special information associated with the data structure information; and</claim-text>
<claim-text>a controller for controlling the storage section and the special information holding section,</claim-text>
<claim-text>wherein the data structure information and the special information are associated with each other such that the special information is updated in response to an update of the data structure information, or such that the data structure information is updated in response to an update of the special information, the method comprising steps of:</claim-text>
<claim-text>a) after a predetermined time period has elapsed, deleting the content from the storage section; and</claim-text>
<claim-text>b) updating the special information held in the special information holding section every time step a) is completed such that a mismatch occurs between the special information obtained before step a) and the updated special information,</claim-text>
<claim-text>wherein the data structure information includes:
<claim-text>an object region for storing data which is encrypted using a title key corresponding to a predetermined unit amount of data;</claim-text>
<claim-text>a management region for storing management information of the encrypted data; and</claim-text>
<claim-text>an encryption region for storing the title key which is encrypted using a system key,</claim-text>
</claim-text>
<claim-text>the special information includes:
<claim-text>a first check code which is calculated from the management information; and</claim-text>
<claim-text>a second check code which is calculated from the encrypted title key,</claim-text>
</claim-text>
<claim-text>step b) includes steps of:
<claim-text>b1) updating the management information; and</claim-text>
<claim-text>b2) updating the first check code by means of a calculation based on the updated management information, and</claim-text>
</claim-text>
<claim-text>the method further includes steps of:
<claim-text>c) repeating steps a) and b) until the amount of the deleted content becomes equal to the predetermined unit data amount;</claim-text>
<claim-text>d) when the amount of deleted content becomes equal to the predetermined unit data amount, deleting from the encryption region the encrypted title key which is used for decrypting the data; and</claim-text>
<claim-text>e) updating the second check code by means of a calculation based on the encrypted title key.</claim-text>
</claim-text>
</claim-text>
</claim>
<claim id="CLM-00017" num="00017">
<claim-text>17. A method according to <claim-ref idref="CLM-00016">claim 16</claim-ref>, wherein:
<claim-text>the special information further includes the system key; and</claim-text>
<claim-text>step b) further includes a step of updating the system key and encrypting the title key using the updated system key.</claim-text>
</claim-text>
</claim>
</claims>
</us-patent-grant>
