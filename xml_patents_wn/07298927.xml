<us-patent-grant lang="EN" dtd-version="v4.2 2006-08-23" file="US07298927-20071120.XML" status="PRODUCTION" id="us-patent-grant" country="US" date-produced="20071106" date-publ="20071120">
<us-bibliographic-data-grant>
<publication-reference>
<document-id>
<country>US</country>
<doc-number>07298927</doc-number>
<kind>B2</kind>
<date>20071120</date>
</document-id>
</publication-reference>
<application-reference appl-type="utility">
<document-id>
<country>US</country>
<doc-number>11299222</doc-number>
<date>20051208</date>
</document-id>
</application-reference>
<us-application-series-code>11</us-application-series-code>
<us-term-of-grant>
<us-term-extension>28</us-term-extension>
</us-term-of-grant>
<classifications-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>G</section>
<class>06</class>
<subclass>K</subclass>
<main-group>9</main-group>
<subgroup>32</subgroup>
<symbol-position>F</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20071120</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>G</section>
<class>06</class>
<subclass>K</subclass>
<main-group>15</main-group>
<subgroup>02</subgroup>
<symbol-position>L</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20071120</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
</classifications-ipcr>
<classification-national>
<country>US</country>
<main-classification>382298</main-classification>
<further-classification>382176</further-classification>
<further-classification>358  12</further-classification>
<further-classification>358528</further-classification>
</classification-national>
<invention-title id="d0e53">Image processing apparatus, image processing method, and medium on which image processing program is recorded</invention-title>
<references-cited>
<citation>
<patcit num="00001">
<document-id>
<country>US</country>
<doc-number>4984013</doc-number>
<kind>A</kind>
<name>Terashita</name>
<date>19910100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>355 38</main-classification></classification-national>
</citation>
<citation>
<patcit num="00002">
<document-id>
<country>US</country>
<doc-number>5142374</doc-number>
<kind>A</kind>
<name>Tajika et al.</name>
<date>19920800</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>358  31</main-classification></classification-national>
</citation>
<citation>
<patcit num="00003">
<document-id>
<country>US</country>
<doc-number>5204760</doc-number>
<kind>A</kind>
<name>Murayama et al.</name>
<date>19930400</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>358  303</main-classification></classification-national>
</citation>
<citation>
<patcit num="00004">
<document-id>
<country>US</country>
<doc-number>5278952</doc-number>
<kind>A</kind>
<name>Kira et al.</name>
<date>19940100</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00005">
<document-id>
<country>US</country>
<doc-number>5289293</doc-number>
<kind>A</kind>
<name>Kato et al.</name>
<date>19940200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>358  307</main-classification></classification-national>
</citation>
<citation>
<patcit num="00006">
<document-id>
<country>US</country>
<doc-number>5452374</doc-number>
<kind>A</kind>
<name>Cullen et al.</name>
<date>19950900</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00007">
<document-id>
<country>US</country>
<doc-number>5602651</doc-number>
<kind>A</kind>
<name>Tabata et al.</name>
<date>19970200</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00008">
<document-id>
<country>US</country>
<doc-number>5646744</doc-number>
<kind>A</kind>
<name>Knox</name>
<date>19970700</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00009">
<document-id>
<country>US</country>
<doc-number>5666208</doc-number>
<kind>A</kind>
<name>Farrell et al.</name>
<date>19970900</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00010">
<document-id>
<country>US</country>
<doc-number>5687006</doc-number>
<kind>A</kind>
<name>Namizuka et al.</name>
<date>19971100</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00011">
<document-id>
<country>US</country>
<doc-number>5717793</doc-number>
<kind>A</kind>
<name>Ushida et al.</name>
<date>19980200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>382298</main-classification></classification-national>
</citation>
<citation>
<patcit num="00012">
<document-id>
<country>US</country>
<doc-number>5760930</doc-number>
<kind>A</kind>
<name>Fukuzawa et al.</name>
<date>19980600</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00013">
<document-id>
<country>US</country>
<doc-number>5808756</doc-number>
<kind>A</kind>
<name>Matsuda</name>
<date>19980900</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00014">
<document-id>
<country>US</country>
<doc-number>5832137</doc-number>
<kind>A</kind>
<name>Knox</name>
<date>19981100</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00015">
<document-id>
<country>US</country>
<doc-number>5832141</doc-number>
<kind>A</kind>
<name>Ishida et al.</name>
<date>19981100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>382298</main-classification></classification-national>
</citation>
<citation>
<patcit num="00016">
<document-id>
<country>US</country>
<doc-number>5841148</doc-number>
<kind>A</kind>
<name>Some et al.</name>
<date>19981100</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00017">
<document-id>
<country>US</country>
<doc-number>5907631</doc-number>
<kind>A</kind>
<name>Saitoh</name>
<date>19990500</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00018">
<document-id>
<country>US</country>
<doc-number>5953463</doc-number>
<kind>A</kind>
<name>Tanaka et al.</name>
<date>19990900</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00019">
<document-id>
<country>US</country>
<doc-number>5973802</doc-number>
<kind>A</kind>
<name>Hirota et al.</name>
<date>19991000</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00020">
<document-id>
<country>US</country>
<doc-number>5995719</doc-number>
<kind>A</kind>
<name>Bourdead'hui et al.</name>
<date>19991100</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00021">
<document-id>
<country>US</country>
<doc-number>6005977</doc-number>
<kind>A</kind>
<name>Tanimizu et al.</name>
<date>19991200</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00022">
<document-id>
<country>US</country>
<doc-number>6504628</doc-number>
<kind>B1</kind>
<name>Kanno et al.</name>
<date>20030100</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00023">
<document-id>
<country>CN</country>
<doc-number>1201169</doc-number>
<date>19981200</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00024">
<document-id>
<country>EP</country>
<doc-number>0 432 723 2</doc-number>
<date>19910600</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00025">
<document-id>
<country>EP</country>
<doc-number>0 650 287</doc-number>
<kind>A2</kind>
<date>19950400</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00026">
<document-id>
<country>EP</country>
<doc-number>0 784 396</doc-number>
<kind>A2</kind>
<date>19970700</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00027">
<document-id>
<country>EP</country>
<doc-number>0 785 529</doc-number>
<kind>A1</kind>
<date>19970700</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00028">
<document-id>
<country>JP</country>
<doc-number>57178474</doc-number>
<date>19820200</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00029">
<document-id>
<country>JP</country>
<doc-number>61-276077</doc-number>
<date>19861200</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00030">
<document-id>
<country>JP</country>
<doc-number>8-82880</doc-number>
<date>19870800</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00031">
<document-id>
<country>JP</country>
<doc-number>62-180688</doc-number>
<date>19870800</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00032">
<document-id>
<country>JP</country>
<doc-number>63-244973</doc-number>
<date>19881000</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00033">
<document-id>
<country>JP</country>
<doc-number>3-82269</doc-number>
<date>19910400</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00034">
<document-id>
<country>JP</country>
<doc-number>3-85061</doc-number>
<date>19910400</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00035">
<document-id>
<country>JP</country>
<doc-number>4-219882</doc-number>
<date>19920800</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00036">
<document-id>
<country>JP</country>
<doc-number>4365182</doc-number>
<date>19921200</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00037">
<document-id>
<country>JP</country>
<doc-number>5-022572</doc-number>
<date>19930100</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00038">
<document-id>
<country>JP</country>
<doc-number>5-258035</doc-number>
<date>19931000</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00039">
<document-id>
<country>JP</country>
<doc-number>5-336386</doc-number>
<date>19931200</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00040">
<document-id>
<country>JP</country>
<doc-number>6014185</doc-number>
<date>19940100</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00041">
<document-id>
<country>JP</country>
<doc-number>6-62216</doc-number>
<date>19940300</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00042">
<document-id>
<country>JP</country>
<doc-number>6-334856</doc-number>
<date>19941200</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00043">
<document-id>
<country>JP</country>
<doc-number>7-15657</doc-number>
<date>19950100</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00044">
<document-id>
<country>JP</country>
<doc-number>7-087295</doc-number>
<date>19950300</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00045">
<document-id>
<country>JP</country>
<doc-number>7-121692</doc-number>
<date>19950500</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00046">
<document-id>
<country>JP</country>
<doc-number>8-18778</doc-number>
<date>19960100</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00047">
<document-id>
<country>JP</country>
<doc-number>8-251427</doc-number>
<date>19960900</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00048">
<document-id>
<country>JP</country>
<doc-number>8-265563</doc-number>
<date>19961000</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00049">
<document-id>
<country>JP</country>
<doc-number>8-340447</doc-number>
<date>19961200</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00050">
<document-id>
<country>JP</country>
<doc-number>9-35063</doc-number>
<date>19970200</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00051">
<document-id>
<country>JP</country>
<doc-number>9-200504</doc-number>
<date>19970700</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00052">
<document-id>
<country>JP</country>
<doc-number>09-200528</doc-number>
<date>19970700</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00053">
<document-id>
<country>JP</country>
<doc-number>9-233319</doc-number>
<date>19970900</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00054">
<document-id>
<country>JP</country>
<doc-number>9-312770</doc-number>
<date>19971200</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00055">
<document-id>
<country>JP</country>
<doc-number>9-330393</doc-number>
<date>19971200</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<nplcit num="00056">
<othercit>Jiang H-F et al.: “A fast approach to the detection and correction of skew documents,” Pattern Recognition Letters, vol. 18, No. 7, Jul. 1997, pp. 675-686.</othercit>
</nplcit>
<category>cited by other</category>
</citation>
<citation>
<nplcit num="00057">
<othercit>Hitoshi Kiya, “Resolution Conversion of Digital Image”, CQ Publishing, The Interface, Jun. 1998; Japan, pp. 72-80.</othercit>
</nplcit>
<category>cited by other</category>
</citation>
</references-cited>
<number-of-claims>11</number-of-claims>
<us-exemplary-claim>1</us-exemplary-claim>
<us-field-of-classification-search>
<classification-national>
<country>US</country>
<main-classification>382171</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>382173</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>382274</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>382276</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>382298</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>382176</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>382190</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>382263-264</main-classification>
<additional-info>unstructured</additional-info>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>382266</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>358  301</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>358  12</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>358  299</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>358  312</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>358521</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>358528</main-classification>
</classification-national>
</us-field-of-classification-search>
<figures>
<number-of-drawing-sheets>24</number-of-drawing-sheets>
<number-of-figures>35</number-of-figures>
</figures>
<us-related-documents>
<division>
<relation>
<parent-doc>
<document-id>
<country>US</country>
<doc-number>09720475</doc-number>
<kind>00</kind>
<date>20010308</date>
</document-id>
<parent-grant-document>
<document-id>
<country>US</country>
<doc-number>7006708</doc-number>
<kind>A </kind>
</document-id>
</parent-grant-document>
</parent-doc>
<child-doc>
<document-id>
<country>US</country>
<doc-number>11299222</doc-number>
</document-id>
</child-doc>
</relation>
</division>
<related-publication>
<document-id>
<country>US</country>
<doc-number>20060188148</doc-number>
<kind>A1</kind>
<date>20060824</date>
</document-id>
</related-publication>
</us-related-documents>
<parties>
<applicants>
<applicant sequence="001" app-type="applicant-inventor" designation="us-only">
<addressbook>
<last-name>Nako</last-name>
<first-name>Kazuyuki</first-name>
<address>
<city>Kyoto</city>
<country>JP</country>
</address>
</addressbook>
<nationality>
<country>JP</country>
</nationality>
<residence>
<country>JP</country>
</residence>
</applicant>
<applicant sequence="002" app-type="applicant-inventor" designation="us-only">
<addressbook>
<last-name>Sato</last-name>
<first-name>Katsuhiko</first-name>
<address>
<city>Nara</city>
<country>JP</country>
</address>
</addressbook>
<nationality>
<country>JP</country>
</nationality>
<residence>
<country>JP</country>
</residence>
</applicant>
<applicant sequence="003" app-type="applicant-inventor" designation="us-only">
<addressbook>
<last-name>Tanaka</last-name>
<first-name>Hideaki</first-name>
<address>
<city>Nara</city>
<country>JP</country>
</address>
</addressbook>
<nationality>
<country>JP</country>
</nationality>
<residence>
<country>JP</country>
</residence>
</applicant>
</applicants>
<agents>
<agent sequence="01" rep-type="attorney">
<addressbook>
<last-name>Conlin, Esq.</last-name>
<first-name>David G.</first-name>
<address>
<country>unknown</country>
</address>
</addressbook>
</agent>
<agent sequence="02" rep-type="attorney">
<addressbook>
<last-name>Daley, Jr., Esq.</last-name>
<first-name>William J.</first-name>
<address>
<country>unknown</country>
</address>
</addressbook>
</agent>
<agent sequence="03" rep-type="attorney">
<addressbook>
<orgname>Edwards Angell Palmer &amp; Dodge, LLP</orgname>
<address>
<country>unknown</country>
</address>
</addressbook>
</agent>
</agents>
</parties>
<assignees>
<assignee>
<addressbook>
<orgname>Sharp Kabushiki Kaisha</orgname>
<role>03</role>
<address>
<country>JP</country>
</address>
</addressbook>
</assignee>
</assignees>
<examiners>
<primary-examiner>
<last-name>Patel</last-name>
<first-name>Kanjibhai</first-name>
<department>2624</department>
</primary-examiner>
</examiners>
</us-bibliographic-data-grant>
<abstract id="abstract">
<p id="p-0001" num="0000">Featured are an image processing apparatus, method and a medium including an image processing program. The image processing apparatus includes an image inputting means for inputting an image, a character/line drawing region extracting means for extracting a character/line drawing region from the input image, a pseudo-density region extracting means for extracting a pseudo-density region from the input image, an image contracting means for contracting images in an extracted pseudo-density region, an extracted character/line drawing region, and a region other than the pseudo-density region and the character/line drawing region, by mutually different methods, and an image outputting means for outputting the contracted image. The image contracting means performs a smoothing process in the pseudo-density region, performs an averaging process and a subsequent edge enhancing process in the character/line drawing region, and performs an averaging process in a region other than the pseudo-density region and the character/line drawing region.</p>
</abstract>
<drawings id="DRAWINGS">
<figure id="Fig-EMI-D00000" num="00000">
<img id="EMI-D00000" he="95.25mm" wi="158.07mm" file="US07298927-20071120-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00001" num="00001">
<img id="EMI-D00001" he="247.48mm" wi="144.95mm" file="US07298927-20071120-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00002" num="00002">
<img id="EMI-D00002" he="152.82mm" wi="148.84mm" file="US07298927-20071120-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00003" num="00003">
<img id="EMI-D00003" he="184.74mm" wi="146.22mm" file="US07298927-20071120-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00004" num="00004">
<img id="EMI-D00004" he="204.98mm" wi="153.59mm" file="US07298927-20071120-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00005" num="00005">
<img id="EMI-D00005" he="224.45mm" wi="170.77mm" file="US07298927-20071120-D00005.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00006" num="00006">
<img id="EMI-D00006" he="239.61mm" wi="155.62mm" file="US07298927-20071120-D00006.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00007" num="00007">
<img id="EMI-D00007" he="152.74mm" wi="139.28mm" file="US07298927-20071120-D00007.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00008" num="00008">
<img id="EMI-D00008" he="237.41mm" wi="160.19mm" file="US07298927-20071120-D00008.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00009" num="00009">
<img id="EMI-D00009" he="241.30mm" wi="188.30mm" file="US07298927-20071120-D00009.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00010" num="00010">
<img id="EMI-D00010" he="245.87mm" wi="166.54mm" file="US07298927-20071120-D00010.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00011" num="00011">
<img id="EMI-D00011" he="181.19mm" wi="100.25mm" file="US07298927-20071120-D00011.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00012" num="00012">
<img id="EMI-D00012" he="220.05mm" wi="109.56mm" file="US07298927-20071120-D00012.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00013" num="00013">
<img id="EMI-D00013" he="220.64mm" wi="155.96mm" file="US07298927-20071120-D00013.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00014" num="00014">
<img id="EMI-D00014" he="240.71mm" wi="170.43mm" file="US07298927-20071120-D00014.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00015" num="00015">
<img id="EMI-D00015" he="230.29mm" wi="130.64mm" file="US07298927-20071120-D00015.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00016" num="00016">
<img id="EMI-D00016" he="241.98mm" wi="162.98mm" file="US07298927-20071120-D00016.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00017" num="00017">
<img id="EMI-D00017" he="228.85mm" wi="165.61mm" file="US07298927-20071120-D00017.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00018" num="00018">
<img id="EMI-D00018" he="227.58mm" wi="124.12mm" orientation="landscape" file="US07298927-20071120-D00018.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00019" num="00019">
<img id="EMI-D00019" he="250.87mm" wi="173.48mm" orientation="landscape" file="US07298927-20071120-D00019.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00020" num="00020">
<img id="EMI-D00020" he="132.76mm" wi="178.73mm" file="US07298927-20071120-D00020.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00021" num="00021">
<img id="EMI-D00021" he="203.79mm" wi="136.14mm" file="US07298927-20071120-D00021.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00022" num="00022">
<img id="EMI-D00022" he="133.43mm" wi="186.61mm" file="US07298927-20071120-D00022.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00023" num="00023">
<img id="EMI-D00023" he="192.53mm" wi="124.63mm" file="US07298927-20071120-D00023.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00024" num="00024">
<img id="EMI-D00024" he="234.44mm" wi="166.45mm" file="US07298927-20071120-D00024.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
</drawings>
<description id="description">
<?RELAPP description="Other Patent Relations" end="lead"?>
<p id="p-0002" num="0001">This application is a divisional of U.S. application Ser. No. 09/720,475, filed Mar. 8,2001, now U.S. Pat. No. 7,006,708, the teachings of which are incorporated herein by reference.</p>
<?RELAPP description="Other Patent Relations" end="tail"?>
<?BRFSUM description="Brief Summary" end="lead"?>
<heading id="h-0001" level="1">TECHNICAL FIELD</heading>
<p id="p-0003" num="0002">The present invention relates to an image processing apparatus, an image processing method, and a medium on which an image processing program is recorded. Particularly, the invention relates to an image processing apparatus, an image processing method, and a medium on which an image processing program is recorded, each for converting, to a naturally monochromatic image, an image which is read by an image inputting means such as a scanner from an original printed in two colors, a color other than black, or the like. Further, the invention relates particularly to an image processing apparatus, an image processing method, and a medium on which an image processing program is recorded, each for contracting a composite image such as a cartoon comprising a character, a line drawing, and a halftone dot, with good precision and without a moire. Furthermore, the invention relates particularly to an image processing apparatus, an image processing method, and a medium on which an image processing program is recorded, each for performing the correction to eliminate a ghost image which occurs during the reading of an original printed on both sides or an original being stacked. Further, the invention relates particularly to an image processing apparatus, an image processing method, and a medium on which an image processing program is recorded, each for performing the aligning between desired pages in the image data of a book inputted in an authoring system for preparing the contents of an electronic book by inputting the book on the image base.</p>
<heading id="h-0002" level="1">BACKGROUND ART</heading>
<p id="p-0004" num="0003">The progress in hardware and software has been activating the publication of electronic books as a new form of books in place of existing books on a paper medium. It has been realized to read cartoons and novels on a personal computer or a portable terminal.</p>
<p id="p-0005" num="0004">Although these electronic books can be prepared correspondingly to what is called multimedia data, such as an audio, an image, a dynamic image, and an animation, it is costly and laborious to fabricate an electronic book as the primary object. Thus, an electronic book is fabricated frequently by directly computerizing an existing book.</p>
<p id="p-0006" num="0005">There are following problems in the fabrication of an electronic book in accordance with a conventional art. A first problem exists in the case of converting, to a naturally monochromatic image, an image read by an image inputting means such as a scanner from a color-printed original or the like.</p>
<p id="p-0007" num="0006">The conversion from a color image to a monochromatic image is generally performed by extracting the brightness component from the color image. The following Formula (1) is a formula for extracting the brightness component (Y) from red (R), green (G), and blue (B) components.
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>Y=</i>0.299<i>R+</i>0.587<i>G+</i>0.114<i>B</i>  (1)<?in-line-formulae description="In-line Formulae" end="tail"?>
</p>
<p id="p-0008" num="0007">This method is used also in the NTSC system which is a system for TV broadcasting, and is widely known. In the NTSC system, a color image is decomposed into a brightness signal and a color difference signal and then transmitted. Therefore, even a monochromatic television set can display a naturally monochromatic image on the television screen by receiving and reproducing the brightness signal alone.</p>
<p id="p-0009" num="0008">Formula (1) depends on the characteristics of human visual sensation, and a full-color image such as a photograph can be converted to a naturally monochromatic image by converting the brightness component to the monochromatic image.</p>
<p id="p-0010" num="0009">Meanwhile, the contents of an electronic book computerized directly from an existing book can be viewed on a color display without any problem because of the unlimited number of display colors. However, a portable terminal frequently uses a monochromatic liquid-crystal display because of the important factors of a low price and a low power consumption.</p>
<p id="p-0011" num="0010">Accordingly, a full-color image such as a photograph is usually converted to a monochromatic image. Using Formula (1) to convert it to a naturally monochromatic image, monochromatic contents can be produced from an existing book. Or, a color image can be displayed on a monochromatic display.</p>
<p id="p-0012" num="0011">However, in the case of a certain-existing book, especially a cartoon journal, the image is sometimes printed in two colors with red ink and black ink or in a color with ink of a color selected from the group consisting of red, green, blue, and the like other than black. In that case, a desirable image quality is hardly obtained by converting such an image using Formula (1).</p>
<p id="p-0013" num="0012">For example, in the case of an image printed in two colors with red ink and black ink, black is used for contours and shadows, and red is used for flesh color. When such an image is converted to a monochromatic image using Formula (1), the low mixing-ratio of red causes a problem that the red part becomes darker than the actual image.</p>
<p id="p-0014" num="0013">Further, an image is sometime printed in a single color other than black, such as red, green, and blue. When people view such an image, the color itself is not explicitly recognized, and the resulted impression is similar to that of the image printed in a color of black. However, when such an image is converted to a monochromatic image using Formula (1) in a similar manner to that for a photograph, the resulted image has a thin color and a low contrast. In particular, an image printed with green ink results in an image with a very thin color because of the large mixing-ratio of green in Formula (1).</p>
<p id="p-0015" num="0014">A second problem exists in the case of contracting a composite image such as a cartoon comprising a character, a line drawing, and a halftone dot, with good precision and without a moire.</p>
<p id="p-0016" num="0015">Printed matter, such as a cartoon and a novel, is originally printed in a very high resolution, and a scanner for reading it also has a high resolution of 400 dpi (dot per inch), 600 dpi, or higher. In contrast, the display resolution of a personal computer or a portable terminal is at most about 100 dpi. Thus, the contraction of an image is necessary to display an existing book on a personal computer or a portable terminal.</p>
<p id="p-0017" num="0016">In many cartoons, a halftone screen is used for the pseudo-expression of density and gradation. Since the halftone screen comprises fine mesh dots, lines, and patterns, the contraction thereof, as known, ordinarily results in a pattern of stripes or lattice which is called a moire. In the invention, a region to which the pseudo-expression of density or gradation is imparted is called a pseudo-density region.</p>
<p id="p-0018" num="0017">Conventional art of contraction is classified into two major methods: a method in which the whole region is homogeneously processed and a method in which the region is divided and each of the divided regions is contracted optimally. The method in which the whole region is homogeneously processed generally includes a thinning-out process to achieve the contraction by simply thinning out the pixels and an averaging technique to determine the pixel value of the contracted image by averaging the pixel values of the original image (Hitoshi Kiya, Resolution Conversion of Digital Image, CQ Publishing, The Interface, June 1998, p. 72).</p>
<p id="p-0019" num="0018">With regard to the region-dividing method, an image processing apparatus is described in Japanese Unexamined Patent Publication JP-A 4-365182 (1992). In accordance with the image processing apparatus described in JP-A 4-365182, a binary coded image is divided into two regions, i.e., drawing and painting regions. In the drawing region, contraction is performed so as to conserve the fine lines. In the painting region, a multi-value encoding process is performed on the base of the pixel density, and then a contraction/binary-encoding process is performed, thereby to contract even the character and the drawing sections with precision and without a moire.</p>
<p id="p-0020" num="0019">However, in the case of contracting an image such as a cartoon comprising a character, a line drawing and a halftone dot in combination, the thinning-out process causes a moire in the halftone section and unclearness and blurring in the character section and the line drawing section. In contrast, in the averaging technique, a moire is suppressed and the unclearness and blurring of a character and a fine line seldom occur, but the clearness of the whole is lost. To express the clearness, an edge enhancing process can be used after the contraction. However, the suppressed moire is also enhanced and appears. Although the moire can be completely eliminated by enlarging the area in which the pixels are averaged, characters and drawings blur on the other hand.</p>
<p id="p-0021" num="0020">As mentioned above, prior art homogeneous processing by the thinning-out process or the averaging process cannot achieve clear characters and drawings without a moire. Thus, it is necessary to divide the image into regions and process each region appropriately.</p>
<p id="p-0022" num="0021">The image processing apparatus described in JP-A 4-365182 performs region-dividing and performs a contraction process appropriate for each region. However, in a cartoon and the like, a line drawing may exist in halftone dots. Thus, a character and a line drawing cannot be separated by simple pattern matching. Further, a character exists in a balloon within the image. Thus, separation using a simple rectangle is difficult. In a method wherein an image is separated into two regions, i.e., a character/line drawing region and the other region, and wherein smoothing is performed in the region other than the character/line drawing region, an error frequently occurs in the extraction of the character/line drawing region. For example, a rather blurring part in a fine line and a complicated character is sometimes not extracted as a character/line drawing region because of the low edge component. The process of smoothing of this region causes further blurring in the character and the line drawing section.</p>
<p id="p-0023" num="0022">A third problem exists in the case of performing the correction to eliminate a ghost image which occurs during the reading of an original printed on both sides or an original being stacked.</p>
<p id="p-0024" num="0023">Since an existing book is ordinarily printed on both sides of a paper, there is a problem of what is called a ghost image, which is an image on the back side being seen through during the reading thereof with a scanner and the like or during the reading of a page being stacked with a scanner and the like.</p>
<p id="p-0025" num="0024">An image reader described in Japanese Unexamined Patent Publication JP-A 6-14185 (1994) is a prior art apparatus for correcting a ghost image. The image reader described in JP-A 6-14185 eliminates a ghost image part, which has a low density, by reducing the density through the density correction of the image signal, thereby preventing the copying of the seen-through image of the back side of an original or the next page of a stacked original.</p>
<p id="p-0026" num="0025">An image forming apparatus described in Japanese Unexamined Patent Publication JP-A 6-62216 (1994) is an apparatus for correcting a ghost image using front image data and back image data. The image forming apparatus described in JP-A 6-62216 performs an AND operation between the front image data and the back image data, performs the smoothing of the output by a histogram calculation, and then performs a threshold process. Then the apparatus combines it with image data which is the front image data subtracted by the data of the superposed part, thereby eliminating the ghost image without the loss of the low density part of the front image.</p>
<p id="p-0027" num="0026">Further, an image processing apparatus with ghost-image eliminating function described in Japanese Unexamined Patent Publication JP-A 8-340447 (1996) eliminates a ghost image by detecting a ghost image region in a video signal and the ghost image level within the ghost image region and by correcting the density of the ghost image region using the ghost image level.</p>
<p id="p-0028" num="0027">However, since the image reader described in Japanese Unexamined Patent Publication JP-A 6-14185 (1994) performs the density correction on the whole image, there occurs a problem that a halftone section whitens out and that a character becomes unclear.</p>
<p id="p-0029" num="0028">With regard to the image forming apparatus described in JP-A 6-62216, a ghost image cannot be completely eliminated in some cases, for example, in the case where a halftone section is seen through as a ghost image. Further, the positional relationship between the front image and the back image needs to be previously known, but the positions in which the images are read are not necessarily identical even if automatic paper feeding is used. Thus, a ghost image cannot be completely eliminated in such a case where the images are shifted from a predetermined position.</p>
<p id="p-0030" num="0029">In the image processing apparatus with ghost-image eliminating function described in JP-A 8-340447, a ghost image region is defined as a region in which non-character pixels are successive, a region in which non-painting pixels are successive, a region in which pixels having a density lower than or equal to a predetermined density are successive, and a region in which pixels having a saturation lower than or equal to a predetermined saturation are successive. Accordingly, the determination is carried out in a small area. Therefore, a ghost image cannot be separated from a halftone image on the front side, for example, when the ghost image is caused by a widely spreading black dark region of characters or images.</p>
<p id="p-0031" num="0030">A fourth problem exists in the case of performing the aligning between desired pages in the image data of a book inputted in an authoring system for preparing the contents of an electronic book by inputting the book on the image base.</p>
<p id="p-0032" num="0031">Although an electronic book can be prepared correspondingly to what is called multimedia data, such as an audio, an image, a dynamic image, and an animation, it adopts a text (character-code) based format. Meanwhile, books on a paper medium, what is called “books” are presently being published at a pace of 500,000 or more titles a year. The accumulated number is huge. However, the number of the computerized titles is very few and almost all exist only on a paper medium. Such a prior art electronic book has the following problems because of adopting the text-(character-code) based format.</p>
<p id="p-0033" num="0032">For the authoring of a book on a paper medium, the text data needs to be prepared by human work or with an OCR. Thus, the preparation of the contents requires a lot of time, which causes a difficulty in the timely supply of contents in a large amount. Further, it is difficult to prepare the contents of a book such as a cartoon and a photographic journal, in which a majority of the data is non-text. For this reason, present number of the electronic book contents is as small as a few hundred, and many of the contents are dictionaries. Accordingly, the share of electronic books is presently below 1% of that of paper books. In particular, the small number of the contents is a fatal problem, which is significantly preventing the spread of electronic books. In such a situation, to resolve the above-mentioned problems, it is possible to obtain electronic book contents by inputting them on the image base. This has the following advantage.</p>
<p id="p-0034" num="0033">Contents preparation can be carried out basically only by scanning an existing book on a paper medium, which permits to supply a large amount of the contents in a short term. It permits to supply the contents of a cartoon a photographic journal, and the like, which was impossible in a text-based electronic book. Inputting is easy even when a book, such as an old document, contains a character not in the present character code system, for example, an external character and a heteromorphic character. Overseas deployment (spreading) of a viewer and a total authoring system is easy because of the independence of a language (character code). By the advantage mentioned above, an electronic book on the image base resolves all problems in an electronic book on the text base. To obtain the electronic book contents by inputting it on the image base, it can be inputted by scanner inputting with an ADF (auto document feeder) and the like, and various processes such as document structuring are carried out on it. However, the following problems occur.</p>
<p id="p-0035" num="0034">In the case where an image is inclined or shifted during the scanner inputting, an user of the electronic book feels uncomfortableness because the inclination is emphasized more than in the case of a paper book by a reference line (for example, an edge section of a CRT and a liquid-crystal screen) existing in a viewer. Thus, the process of correcting this is necessary. Manual processing of this needs a lot of working time, which causes a substantial increase in the authoring time. In particular, inclination and shift in a main page results in a strong uncomfortableness during the viewing on a viewer. Further, the checking of all pages for the revision of the electronic book contents causes an increase in the authoring time, which prevents to supply a large amount of contents in a short term. Thus, an appropriate process is necessary.</p>
<p id="p-0036" num="0035">A first object of the invention is to provide an image processing apparatus, an image processing method, and a medium on which an image processing program is recorded, each for converting an original printed in two colors or a color other than black to a naturally monochromatic image.</p>
<p id="p-0037" num="0036">A second object of the invention is to provide an image processing apparatus, an image processing method, and a medium on which an image processing program is recorded, each for contracting a composite image such as a cartoon comprising a character, a line drawing, and a halftone dot, with clearness and without a moire.</p>
<p id="p-0038" num="0037">A third object of the invention is to provide an image processing apparatus, an image processing method, and a medium on which an image processing program is recorded, each for correcting an image to eliminate a ghost image which occurs during the reading of an original printed on both sides or an original being stacked.</p>
<p id="p-0039" num="0038">A fourth object of the invention is to provide an image processing apparatus, an image processing method, and a medium on which an image processing program is recorded, each for obtaining aligned images.</p>
<heading id="h-0003" level="1">DISCLOSURE OF INVENTION</heading>
<p id="p-0040" num="0039">A first invention is an image processing apparatus comprising:</p>
<p id="p-0041" num="0040">image inputting means;</p>
<p id="p-0042" num="0041">color analyzing means for analyzing a color used within an input image;</p>
<p id="p-0043" num="0042">mixing-ratio calculating means for calculating a mixing-ratio of color components based on an analyzed color; and</p>
<p id="p-0044" num="0043">converting means for converting the input image to a monochromatic image by mixing color components according to a calculated mixing-ratio.</p>
<p id="p-0045" num="0044">In accordance with the invention, the data read from an original image is inputted from the image inputting means, for example, in every predetermined unit time. The color analyzing means analyzes the color used within the input image. Further, the mixing-ratio calculating means calculates the mixing-ratio of color components such as red, green and blue, based on the analyzed color. The mixing-ratio is determined so as to correspond to the color used within the input image. The converting means converts the input image to a monochromatic image by mixing color components according to the calculated mixing-ratio.</p>
<p id="p-0046" num="0045">Therefore, the color of the input image is automatically determined, whereby a monochromatic image can be produced.</p>
<p id="p-0047" num="0046">A second invention is characterized in that the image inputting means is capable of inputting a plurality of images;</p>
<p id="p-0048" num="0047">the color analyzing means analyzes colors used within the plurality of input images;</p>
<p id="p-0049" num="0048">the mixing-ratio calculating means calculates mixing-ratios of color components which are common to the plurality of images, based on analyzed colors; and</p>
<p id="p-0050" num="0049">the converting means converts the plurality of input images to monochromatic images by mixing color components according to calculated mixing-ratios.</p>
<p id="p-0051" num="0050">In accordance with the invention, the data read from the plurality of original images is inputted from the image inputting means, for example, in every predetermined unit time. The color analyzing means analyzes colors used within the plurality of input images. Further, the mixing-ratio calculating means calculates mixing-ratios of color components which are common to the plurality of images, based on the analyzed colors. That is, the mixing-ratios are determined to correspond to the colors used within the plurality of input images. The converting means converts the plurality of input images to monochromatic images by mixing color components according to the calculated mixing-ratios.</p>
<p id="p-0052" num="0051">Therefore, the colors of the plurality of input images are automatically determined, whereby monochromatic images can be produced. Further, since color determination is carried out with respect to the plurality of input images, more accurate determination can be achieved. Furthermore, since monochromatic images are produced in the same conditions for the plurality of input images, the images can be produced stably.</p>
<p id="p-0053" num="0052">A third invention is an image processing apparatus comprising:</p>
<p id="p-0054" num="0053">image inputting means;</p>
<p id="p-0055" num="0054">color specifying means for externally specifying a color used within an input image;</p>
<p id="p-0056" num="0055">mixing-ratio calculating means for calculating a mixing-ratio of color components based on a specified color; and</p>
<p id="p-0057" num="0056">converting means for converting the input image to a monochromatic image by mixing color components according to a calculated mixing-ratio.</p>
<p id="p-0058" num="0057">In accordance with the invention, the color specifying means specifies a color used within the image inputted from the image inputting means. Further, the mixing-ratio calculating means calculates the mixing-ratio of color components based on the specified color. That is, the mixing-ratio is determined so as to correspond to the color used within the input image. The converting means converts the input image to a monochromatic image by mixing color components according to the calculated mixing-ratio.</p>
<p id="p-0059" num="0058">Therefore, a monochromatic image with higher accuracy can be produced by specifying the color used within the input image by a user.</p>
<p id="p-0060" num="0059">A fourth invention is an image processing apparatus comprising:</p>
<p id="p-0061" num="0060">image inputting means;</p>
<p id="p-0062" num="0061">mixing-ratio specifying means for externally specifying a mixing-ratio of color components; and</p>
<p id="p-0063" num="0062">converting means for converting an input image to a monochromatic image by mixing color components according to a specified mixing-ratio.</p>
<p id="p-0064" num="0063">In accordance with the invention, the mixing-ratio specifying means specifies the mixing-ratio of color components for the image inputted from the image inputting means. The converting means converts the input image to a monochromatic image by mixing color components according to the specified mixing-ratio.</p>
<p id="p-0065" num="0064">Therefore, a desired monochromatic image can be produced by specifying the mixing-ratio of color components by a user.</p>
<p id="p-0066" num="0065">A fifth invention is an image processing method comprising:</p>
<p id="p-0067" num="0066">a color analyzing step of analyzing a color used within an input image;</p>
<p id="p-0068" num="0067">a mixing-ratio calculating step of calculating a mixing-ratio of color components based on an analyzed color; and</p>
<p id="p-0069" num="0068">a converting step of converting the input image to a monochromatic image by mixing color components according to a calculated mixing-ratio.</p>
<p id="p-0070" num="0069">In accordance with the invention, an original image is read, for example, in every predetermined unit time, and the data is inputted. The color used within the image is analyzed. The mixing-ratio of color components is calculated based on the analyzed color, whereby the mixing-ratio is determined so as to correspond to the color used within the input image. Further, the color components are mixed according to the calculated mixing-ratio, and the input image is converted to a monochromatic image.</p>
<p id="p-0071" num="0070">Therefore, the color of the input image is automatically determined, whereby a monochromatic image can be produced.</p>
<p id="p-0072" num="0071">A sixth invention is characterized in that in the color analyzing step color analysis is carried out based on distribution of hue, saturation and lightness of the input image.</p>
<p id="p-0073" num="0072">In accordance with the invention, analysis of the color used within the image is carried out, based on the distribution of hue, saturation and lightness of the input image. For example, representative hue and dispersion are calculated from the distribution of hue and saturation. Then, the presence or absence of black pixels is determined from the histogram of lightness. Analysis of the colors used within the input image is further carried out. That is, when representative hue is absent, the image is determined as a monochromatic image. When the dispersion is greater than or equal to a predetermined value, the image is determined as an image in which plural colors are used. In the case where representative hue is absent and the dispersion is greater than or equal to a predetermined value, the image is determined as a monochromatic image in a color other than black when a black pixel is absent, and the image is determined as an image in black plus a color other than black when a black pixel is present. Further, the mixing-ratio of color components is calculated based on the analyzed colors, whereby the mixing-ratio is determined according to the colors used within the input image. Further, the color components are mixed according to the calculated mixing-ratio, and the input image is converted to a monochromatic image.</p>
<p id="p-0074" num="0073">Therefore, it is possible to produce a monochromatic image by automatically determining the color of the input image.</p>
<p id="p-0075" num="0074">A seventh invention is an image processing method comprising:</p>
<p id="p-0076" num="0075">a color analyzing step of analyzing colors used within a plurality of input images;</p>
<p id="p-0077" num="0076">a mixing-ratio calculating step of calculating mixing-ratios of color components which are common to the plurality of input images, based on analyzed colors; and</p>
<p id="p-0078" num="0077">a converting step of converting the plurality of input images to monochromatic images by mixing color components according to calculated mixing-ratios.</p>
<p id="p-0079" num="0078">In accordance with the invention, data is inputted, for example, by reading a plurality of original images in every predetermined unit time, colors used within the images are analyzed, and the mixing-ratios of color components which are common to the plurality of images are calculated according to the analyzed colors, whereby the mixing-ratios are determined in correspondence to the colors used within the input images. Further, the color components are mixed according to the calculated mixing-ratios, and the plurality of input images are converted to monochromatic images.</p>
<p id="p-0080" num="0079">Therefore, the colors of the plurality of input images are automatically determined and monochromatic images can be produced. Further, since the colors are determined from the plurality of input images, the colors can be determined more accurately. Furthermore, since monochromatic images are produced in the same conditions for the plurality of input images, the images can be produced stably.</p>
<p id="p-0081" num="0080">An eighth invention is an image processing method comprising:</p>
<p id="p-0082" num="0081">a color specifying step of externally specifying a color used within an input image;</p>
<p id="p-0083" num="0082">a mixing-ratio calculating step of calculating a mixing-ratio of color components based on a specified color; and</p>
<p id="p-0084" num="0083">a converting step of converting the input image to a monochromatic image by mixing color components according to a calculated mixing-ratio.</p>
<p id="p-0085" num="0084">In accordance with the invention, the color used within the input image is specified, the mixing-ratio of color components is calculated based on the color, the mixing-ratio is determined correspondingly to the color used within the input image, color components are mixed according to the calculated mixing-ratio, and the input image is converted to a monochromatic image.</p>
<p id="p-0086" num="0085">Therefore, a user can produce a monochromatic image with higher accuracy by specifying the color used within the input image.</p>
<p id="p-0087" num="0086">A ninth invention is characterized in that in the mixing-ratio calculating step a mixing-ratio is calculated based on a mixing-ratio table in which a mixing-ratio of color components corresponding to the color used within the input image is previously stored.</p>
<p id="p-0088" num="0087">In accordance with the invention, the color used within an input image is analyzed or specified. The mixing-ratio of color components is calculated based on the color used within the input image. The mixing-ratio is calculated by referring to the mixing-ratio table. Further, color components are mixed according to the calculated mixing-ratio, and the input image is converted to a monochromatic image.</p>
<p id="p-0089" num="0088">Therefore, it is possible to produce a monochromatic image by automatically determining the color of the input image. Further, by calculating the mixing-ratio with reference to the mixing-ratio table, an optimum mixing-ratio is rapidly obtained for each color used within the image. Thus, a more optimum monochromatic image can be produced at high speed.</p>
<p id="p-0090" num="0089">A tenth invention is characterized in that in the mixing-ratio calculating step the mixing-ratio is calculated based on a ratio of color components of a complimentary color of the color used within the input image.</p>
<p id="p-0091" num="0090">In accordance with the invention, the color used within an input image is analyzed or specified. The mixing-ratio of color components is calculated based on the color used within the input image. Here, the mixing-ratio is calculated based on the color component ratio of a complimentary color of the color used within the input image. Further, the color components are mixed according to the calculated mixing-ratio, and the input image is converted to a monochromatic image.</p>
<p id="p-0092" num="0091">Therefore, it is possible to produce a monochromatic image with high contrast by automatically determining the colors of the input image.</p>
<p id="p-0093" num="0092">An eleventh invention is characterized in that in the mixing-ratio calculating step the mixing-ratio is calculated based on a color component ratio of a complimentary color of the color used within the input image and the color component ratio of the colors used within the input image.</p>
<p id="p-0094" num="0093">In accordance with the invention, the color used within an input image is analyzed or specified. The mixing-ratio of color components is calculated based on the color, and accordingly the mixing-ratio is determined correspondingly to the color used within the input image. The mixing-ratio is calculated based on the color component ratio of the complimentary color of the color used within the input image and the color component ratio of the color used within the input image. Further, the color components are mixed according to the calculated mixing-ratio, and the input image is converted to a monochromatic image.</p>
<p id="p-0095" num="0094">Therefore, the color of the input image is automatically determined, and a high-contrast monochromatic image in which discrimination between the color used in the image and black is easily carried out can be produced.</p>
<p id="p-0096" num="0095">A twelfth invention is an image processing method comprising:</p>
<p id="p-0097" num="0096">a mixing-ratio specifying step of externally specifying a mixing-ratio of color components of an input image; and</p>
<p id="p-0098" num="0097">a converting step of converting the input image to a monochromatic image by mixing color components according to a specified mixing-ratio.</p>
<p id="p-0099" num="0098">In accordance with the invention, the mixing-ratio of color components of the input image is specified, and by mixing color components according to the mixing-ratio, the input image is converted to a monochromatic image.</p>
<p id="p-0100" num="0099">Therefore, a desired monochromatic image can be produced by specifying the mixing-ratio of color components.</p>
<p id="p-0101" num="0100">A thirteenth invention is an medium on which an image processing program is recorded, the image processing program being for causing a computer to execute a color analyzing step of analyzing a color used within an input image; a mixing-ratio calculating step of calculating a mixing-ratio of color components based on a analyzed color; and a converting step of converting the input image to a monochromatic image by mixing color components according to a calculated mixing-ratio.</p>
<p id="p-0102" num="0101">In accordance with the invention, by following the image processing program recorded on the medium, a computer analyzes the color used within an input image, calculates the mixing-ratio of color components based on the color thereby to determine the mixing-ratio correspondingly to the color used within the input image, mixes the color components according to the mixing-ratio, and achieves the conversion from the input image to a monochromatic image. Therefore, the color of the input image is automatically determined and a monochromatic image can be produced.</p>
<p id="p-0103" num="0102">A fourteenth invention is an medium on which an image processing program is recorded, the image processing program being for causing a computer to execute a color analyzing step of analyzing colors used within a plurality of input images; a mixing-ratio calculating step of calculating mixing-ratios of color components which are common to the plurality of input images, based on analyzed colors; and a converting step of converting the plurality of input images to monochromatic images by mixing color components according to calculated mixing-ratios.</p>
<p id="p-0104" num="0103">In accordance with the invention, by following the image processing program recorded on the medium, a computer analyzes the color used within a plurality of input images, calculates the mixing-ratios of color components which are common to the plurality of input images, based on the colors, thereby to determine the mixing-ratios correspondingly to the colors used within the plurality of input images, mixes color components according to the mixing-ratios, and achieves the conversion from the plurality of input images to monochromatic images. Therefore, it is possible to produce monochromatic images by automatically determining the colors of the plurality of input images.</p>
<p id="p-0105" num="0104">A fifteenth invention is an medium on which an image processing program is recorded, the image processing program being for causing a computer to execute a color specifying step of externally specifying a color used within an input image; a mixing-ratio calculating step of calculating a mixing-ratio of color components based on a specified color; and a converting step of converting the input image to a monochromatic image by mixing color components according to a calculated mixing-ratio.</p>
<p id="p-0106" num="0105">In accordance with the invention, by following the image processing program recorded on the medium, a computer specifies a color used within an input image, calculates the mixing-ratio of color components based on the color thereby to determine the mixing-ratio correspondingly to the color used within the input image, mixes color components according to the mixing-ratio, and achieves the conversion from the input image to a monochromatic image. Therefore, it is possible to produce a monochromatic image with higher accuracy by specifying the color used within the input image by a user.</p>
<p id="p-0107" num="0106">A sixteenth invention is an medium on which an image processing program is recorded, the image processing program being for causing a computer to execute a mixing-ratio specifying step of externally specifying a mixing-ratio of color components of an input image; and a converting step of converting the input image to a monochromatic image by mixing color components according to a specified mixing-ratio.</p>
<p id="p-0108" num="0107">In accordance with the invention, by following the image processing program recorded on the medium, a computer specifies a mixing-ratio for an input image, mixes the color components according to the specified mixing-ratio, and achieves the conversion from the input image to a monochromatic image. Therefore, it is possible to produce a desired monochromatic image by specifying the mixing-ratio of color components by a user.</p>
<p id="p-0109" num="0108">A seventeenth invention is an image processing apparatus comprising:</p>
<p id="p-0110" num="0109">image inputting means for inputting an image;</p>
<p id="p-0111" num="0110">character/line drawing region extracting means for extracting a character/line drawing region from the input image;</p>
<p id="p-0112" num="0111">pseudo-density region extracting means for extracting a pseudo-density region from the input image;</p>
<p id="p-0113" num="0112">image contracting means for contracting images in an extracted pseudo-density region, an extracted character/line drawing region, and a region other than the pseudo-density region and the character/line drawing region, by mutually different methods; and</p>
<p id="p-0114" num="0113">image outputting means for outputting the contracted image.</p>
<p id="p-0115" num="0114">In accordance with the invention, an image is inputted by the image inputting means, and from the image a character/line drawing region is extracted by the character/line drawing region extracting means and a pseudo-density region is extracted by the pseudo-density region extracting means. The image contracting means contracts the image using mutually different methods respectively in the pseudo-density region, the character/line drawing region, and the other region. The image outputting means outputs the contracted image.</p>
<p id="p-0116" num="0115">Therefore, by dividing the input image into three regions, i.e., a pseudo-density region, a character/line drawing region and the other region, and by contracting the image in each region using a different method, the image can be contracted with a moire being suppressed in the pseudo-density region, the image can be clearly contracted in the character/line drawing region, and the image can be properly contracted in the other region. For example, even in the case where a moire occurs in the contraction of an image read and inputted at a predetermined resolution, the image read and inputted at a predetermined resolution can be clearly contracted without the occurrence of a moire in accordance with the invention.</p>
<p id="p-0117" num="0116">An eighteenth invention is characterized in that the image contracting means performs a smoothing process in the pseudo-density region, performs an averaging process and a subsequent edge enhancing process in the character/line drawing region, and performs an averaging process in a region other than the pseudo-density region and the character/line drawing region.</p>
<p id="p-0118" num="0117">In accordance with the invention, an image is inputted by the image inputting means, and from the image a character/line drawing region is extracted by the character/line drawing region extracting means and a pseudo-density region is extracted by the pseudo-density region extracting means. The image contracting means contracts the image using mutually different methods respectively in the pseudo-density region, the character/line drawing region and the other region. The image is contracted, by a smoothing process in the pseudo-density region, by an averaging process and a subsequent edge enhancing process in the character/line drawing region, and by an averaging process in the other region. The image outputting means outputs the contracted image.</p>
<p id="p-0119" num="0118">Therefore, the image can be contracted with a moire being suppressed in the pseudo-density region, the image can be clearly contracted in the character/line drawing region, and the image can be properly contracted in the other region.</p>
<p id="p-0120" num="0119">A nineteenth invention is characterized in that the character/line drawing region extracting means extracts a character/line drawing region from the input image before the extraction of a pseudo-density region.</p>
<p id="p-0121" num="0120">In accordance with the invention, an image is inputted by the image inputting means, and from the image the character/line drawing region extracting means extracts a character/line drawing region and thereafter the pseudo-density region extracting means extracts a pseudo-density region. The image contracting means contracts the image using mutually different methods respectively in the pseudo-density region, the character/line drawing region and the other region. The image outputting means outputs the contracted image.</p>
<p id="p-0122" num="0121">Therefore, from the input image a character/line drawing region is firstly extracted and a pseudo-density region is then extracted. Therefore, the character/line drawing region can be accurately extracted without being affected from the pseudo-density region, even when it exists within the pseudo-density region.</p>
<p id="p-0123" num="0122">A twentieth invention is characterized in that the character/line drawing region extracting means extracts a character/line drawing region by performing an edge extraction of the input image after performing a smoothing process thereof.</p>
<p id="p-0124" num="0123">In accordance with the invention, an image is inputted by the image inputting means, and from the image the character/line drawing region extracting means extracts a character/line drawing region and thereafter the pseudo-density region extracting means extracts a pseudo-density region. The character/line drawing region is extracted by the edge extraction of the input image after the smoothing process thereof. The image contracting means contracts the image using mutually different methods respectively in the pseudo-density region, the character/line drawing region and the other region. The image outputting means outputs the contracted image.</p>
<p id="p-0125" num="0124">Therefore, from the input image a character/line drawing region is firstly extracted as mentioned above and a pseudo-density region is then extracted. Therefore, the character/line drawing region can be accurately extracted without being affected from the pseudo-density region, even when it exists within the pseudo-density region.</p>
<p id="p-0126" num="0125">A twenty-first invention is characterized in that the pseudo-density region extracting means calculates a dispersion of peripheral pixels around each pixel of the input image and extracts, as a pseudo-density region, the pixel which is one of pixels having a large dispersion and exists in a region which is not extracted as a character/line drawing region by the character/line drawing region extracting means.</p>
<p id="p-0127" num="0126">In accordance with the invention, an image is inputted from the image inputting means, and from the input image the character/line drawing region extracting means extracts a character/line drawing region and the pseudo-density region extracting means extracts a pseudo-density region. From the input image the character/line drawing region is firstly extracted and thereafter the pseudo-density region is extracted. Further, the character/line drawing region is extracted by the predetermined technique described above. The pseudo-density region is extracted by calculating the dispersion of the peripheral pixel's around each pixel of the input image and by extracting, as a pseudo-density region, the pixel which is one of the pixels having a large dispersion and exists in the region which is not extracted as a character/line drawing region. The image contracting means contracts the image using mutually different methods respectively in the pseudo-density region, the character/line drawing region and the other region. The image outputting means outputs the contracted image.</p>
<p id="p-0128" num="0127">Therefore, by calculating the dispersion of peripheral pixels and by extracting, as a pseudo-density region, the pixel is one of the pixels having a large dispersion and exists in the region which is not extracted as a character/line drawing region, the character/line drawing region is eliminated, whereby the pseudo-density region alone can be extracted accurately.</p>
<p id="p-0129" num="0128">A twenty-second invention is characterized in that the pseudo-density region extracting means calculates a correlation of peripheral pixels around each pixel of the input image and extracts, as a pseudo-density region, a pixel which is one of pixels having a low correlation and exists in the region which is not extracted as a character/line drawing region by the character/line drawing region extracting means.</p>
<p id="p-0130" num="0129">In accordance with the invention, an image is inputted from the image inputting means, and from the image the character/line drawing region extracting means extracts a character/line drawing region and the pseudo-density region extracting means extracts a pseudo-density region. From the input image the character/line drawing region is firstly extracted and thereafter the pseudo-density region is extracted. Further, the character/line drawing region is extracted by the predetermined technique described above. The pseudo-density region is extracted by calculating the correlation of the peripheral pixels around each pixel of the input image and by extracting, as a pseudo-density region, the pixel which is one of the pixels having a low correlation and exists in the region which is not extracted as a character/line drawing region. The image contracting means contracts the image using mutually different methods respectively in the pseudo-density region, the character/line drawing region and the other region. The image outputting means outputs the contracted image.</p>
<p id="p-0131" num="0130">Therefore, by calculating the correlation of peripheral pixels and by extracting, as a pseudo-density region, the pixel which is one of the pixels having a low correlation and exists in the region which is not extracted as a character/line drawing region, the character/line drawing region is eliminated more securely, whereby the pseudo-density region alone can be extracted accurately.</p>
<p id="p-0132" num="0131">A twenty-third invention is characterized in that the pseudo-density region extracting means detects an edge region of the input image and extracts, as a pseudo-density region, a region which is one of the extracted edge regions and is not extracted as a character/line drawing region by the character/line drawing region extracting means.</p>
<p id="p-0133" num="0132">In accordance with the invention, an image is inputted from the image inputting means, and from the image the character/line drawing region extracting means extracts a character/line drawing region and the pseudo-density region extracting means extracts a pseudo-density region. From the input image the character/line drawing region is firstly extracted from the input image and thereafter the pseudo-density region is extracted. Further, the character/line drawing region is extracted by the predetermined technique described above. Here, the pseudo-density region is extracted by detecting an edge region of the input image and by extracting, as a pseudo-density region, the region which is one of the edge regions and is not extracted as a character/line drawing region. The image contracting means contracts the image using mutually different methods respectively in the pseudo-density region, the character/line drawing region and the other region. The image outputting means outputs the contracted image.</p>
<p id="p-0134" num="0133">Therefore, the edge filter is simple, and the pseudo-density region can be extracted faster.</p>
<p id="p-0135" num="0134">A twenty-fourth invention is characterized in that contracting means performs edge detection of an extracted pseudo-density region and repeats the smoothing process for a region having a density greater than or equal to a predetermined value.</p>
<p id="p-0136" num="0135">In accordance with the invention, an image is inputted from the image inputting means, and from the image the character/line drawing region extracting means extracts a character/line drawing region and the pseudo-density region extracting means extracts a pseudo-density region. The image contracting means contracts the image by the smoothing process in the pseudo-density region, contracts the image by the averaging process and a subsequent edge enhancing process in the character/line drawing region, and contracts the image by an averaging process in the other region. The edge detection is carried out in the pseudo-density region and the smoothing process is repeated for a region having a density greater than or equal to a predetermined value. The image outputting means outputs the contracted image.</p>
<p id="p-0137" num="0136">Therefore, occurrence of moire can be securely suppressed in the pseudo-density region and the image can be precisely contracted.</p>
<p id="p-0138" num="0137">A twenty-fifth invention is characterized in that the image contracting means performs edge detection of the extracted pseudo-density region and interrupts a contracting process for a region having a density greater than or equal to a predetermined value.</p>
<p id="p-0139" num="0138">In accordance with the invention, an image is inputted from the image inputting means, and from the image the character/line drawing region extracting means extracts a character/line drawing region and the pseudo-density region extracting means extracts a pseudo-density region. The image contracting means contracts the image using mutually different methods respectively in the pseudo-density region, the character/line drawing region and the other region. Here, the edge detection is performed for the pseudo-density region and for a region having a density greater than or equal to a predetermined value, the contracting process is interrupted.</p>
<p id="p-0140" num="0139">Therefore, the normal contracting process can be continued without an unnecessary contracting process.</p>
<p id="p-0141" num="0140">A twenty-sixth invention is an image processing method comprising:</p>
<p id="p-0142" num="0141">an image inputting step;</p>
<p id="p-0143" num="0142">a character/line drawing region extracting step of extracting a character/line drawing region from an input image;</p>
<p id="p-0144" num="0143">a pseudo-density region extracting step of extracting a pseudo-density region from the input image;</p>
<p id="p-0145" num="0144">a image contracting step of contracting the image using mutually different methods respectively in the extracted pseudo-density region, the extracted character/line drawing region and the region other than the pseudo-density region and the character/line drawing region; and</p>
<p id="p-0146" num="0145">an image outputting step of outputting an contracted image.</p>
<p id="p-0147" num="0146">In accordance with the invention, an image is inputted, and from the image a character/line drawing region is extracted and a pseudo-density region is extracted. The image is contracted using mutually different methods respectively in the pseudo-density region, the character/line drawing region and the other region. The contracted image is then outputted. Therefore, the image can be contracted with a moire being suppressed in the pseudo-density region, the image can be clearly contracted in the character/line drawing region, and the image can be properly contracted in the other region.</p>
<p id="p-0148" num="0147">A twenty-seventh invention is an medium recording an image processing program for causing a computer to execute an image inputting step; a character/line drawing region extracting step of extracting a character/line drawing region from an input image; a pseudo-density region extracting step of extracting a pseudo-density region from the input image; an image contracting step of contracting the image using mutually different methods respectively in the extracted pseudo-density region, the extracted character/line drawing region and the region other than the pseudo-density region and the character/line drawing region; and an image outputting step of outputting a contracted image.</p>
<p id="p-0149" num="0148">In accordance with the invention, by following the image processing program recorded on the medium, a computer extracts a character/line drawing region from the image, extracts a pseudo-density region, contracts the image using mutually different methods respectively in the pseudo-density region, the character/line drawing region, and the other region, and outputs it. Therefore, the image can be contracted with a moire being suppressed in the pseudo-density region, the image can be clearly contracted in the character/line drawing region, and the image can be properly contracted in the other region.</p>
<p id="p-0150" num="0149">A twenty-eighth invention is an image processing apparatus comprising:</p>
<p id="p-0151" num="0150">image inputting means for inputting front and back images of an original;</p>
<p id="p-0152" num="0151">image reversing means for reversing one of the front and back images;</p>
<p id="p-0153" num="0152">positional relationship detecting means for detecting the positional relationship between the front image reversed by the image reversing means and the back image from the image inputting means or the positional relationship between the back image reversed by the image reversing means and the front image from the image inputting means;</p>
<p id="p-0154" num="0153">image correcting means for correcting the image to eliminate a ghost image of the image using the positional relationship between the front and back images obtained from the positional relationship detecting means; and</p>
<p id="p-0155" num="0154">image outputting means for outputting the image.</p>
<p id="p-0156" num="0155">In accordance with the invention, front and back images are inputted from the image inputting means. After one of the images is reversed by the image reversing means, the positional relationship between the front and back images is detected by the positional relationship detecting means. The image is corrected to be free from a ghost image by the image correcting means using the positional relationship, and then outputted by the image outputting means. Therefore, the input image can be outputted without a ghost image.</p>
<p id="p-0157" num="0156">A twenty-ninth invention is characterized in that the positional relationship detecting means detects the positional relationship between the front and back images by extracting the high brightness component alone of the front and back images and by performing the block matching of the high brightness component.</p>
<p id="p-0158" num="0157">In accordance with the invention, front and back images are inputted from the image inputting means. After any one of the images is reversed by the image reversing means, the positional relationship between the front and back images is detected by the positional relationship detecting means. Here, the detection of the positional relationship between the front and back images is carried out by extracting the high brightness component alone of the front and back images and by performing the block matching of the high brightness component. The image is corrected to be free from a ghost image by the image correcting means using the positional relationship, and then outputted by the image outputting means. Accordingly, the positional relationship can be detected more precisely, and the input image can be outputted more securely without a ghost image.</p>
<p id="p-0159" num="0158">A thirtieth invention is an image processing apparatus comprising:</p>
<p id="p-0160" num="0159">image inputting means;</p>
<p id="p-0161" num="0160">edge detecting means for detecting an edge of the image form the image inputting means;</p>
<p id="p-0162" num="0161">image correcting means for correcting the image to eliminate a ghost image of the image by raising the brightness of high brightness pixels other than the edge of the image outputted from the edge detecting means; and</p>
<p id="p-0163" num="0162">image outputting means for outputting the image.</p>
<p id="p-0164" num="0163">In accordance with the invention, the image inputting means inputs an image, and the edge detecting means detects an edge of the image. The image correcting means corrects the image to eliminate a ghost image of the image by raising the brightness of high brightness pixels other than the edge of the image outputted from the edge detecting means. The image outputting means outputs the image. Accordingly, the input image can be outputted with the unclearness of a character being prevented and without a ghost image.</p>
<p id="p-0165" num="0164">A thirty-first invention is an image processing apparatus comprising:</p>
<p id="p-0166" num="0165">image inputting means;</p>
<p id="p-0167" num="0166">edge detecting means for detecting an edge of the image form the image inputting means;</p>
<p id="p-0168" num="0167">image dividing means for dividing the image depending on the edge and low brightness pixels of the image outputted from the edge detecting means;</p>
<p id="p-0169" num="0168">image correcting means for correcting the image to eliminate a ghost image of the image by calculating the average brightness within a region divided by the image dividing means and by raising the brightness of the high brightness region alone; and</p>
<p id="p-0170" num="0169">image outputting means for outputting the image.</p>
<p id="p-0171" num="0170">In accordance with the invention, the image inputting mean's inputs an image, and the edge detecting means detects an edge of the image. The image dividing means divides the image based on the edge and low brightness pixels of the image outputted from the edge detecting means. The image correcting means corrects the image to eliminate a ghost image of the image by calculating the average brightness within a divided region and by raising the brightness of the high brightness region alone. The image outputting means outputs the image. Accordingly, the input image can be outputted with the whitening-out of a halftone section being prevented and without a ghost image.</p>
<p id="p-0172" num="0171">A thirty-second invention is characterized in that the image correcting means acquires an representative brightness from the pixels having a brightness within a predetermined range, thereby raising the brightness of the region with referencing to the representative brightness.</p>
<p id="p-0173" num="0172">In accordance with the invention, the image inputting means inputs an image, and the edge detecting means detects an edge of the image. The image dividing means divides the image based on the edge and the low brightness pixel of the image outputted from the edge detecting means. The image correcting means corrects the image to eliminate a ghost image of the image by calculating the average brightness within a divided region and by raising the brightness of the high brightness region alone. Here, it acquires an representative brightness from the pixels having a brightness within a predetermined range, thereby raising the brightness of the region with referencing to the representative brightness. The image outputting means outputs the corrected image. Accordingly, the input image can be outputted without a ghost image, free from the influence of the difference in the transmittance depending on the paper quality.</p>
<p id="p-0174" num="0173">A thirty-third invention is an image processing method comprising:</p>
<p id="p-0175" num="0174">an image reversing step of reversing one of front and back images of an original;</p>
<p id="p-0176" num="0175">a positional relationship detecting step of detecting a positional relationship between the reversed one and the other of the front and back images; and</p>
<p id="p-0177" num="0176">an image correcting step of correcting the other one to eliminate a ghost image of the reversed one using a result of the positional relationship detection.</p>
<p id="p-0178" num="0177">In accordance with the invention, front and back images are inputted, and after one of the images is reversed, the positional relationship between'the reversed one and the other one of the front and back images is detected, the other one is corrected to be free from a ghost image of the reversed one using the positional relationship, and then outputted. Accordingly, the input image can be outputted without a ghost image.</p>
<p id="p-0179" num="0178">A thirty-fourth invention is an image processing method comprising:</p>
<p id="p-0180" num="0179">an image-edge detecting step of detecting an edge of an image; and</p>
<p id="p-0181" num="0180">an image correcting step of correcting the image to eliminate a ghost image from the image by raising the brightness of high brightness pixels other than a detected edge.</p>
<p id="p-0182" num="0181">In accordance with the invention, an image is inputted, an edge of the image is detected to correct the image to be free from a ghost image in the image by raising the brightness of high brightness pixels other than the edge of the image outputted from the edge detection and output the resulting image. Accordingly, it is possible to output the input image without unclearness of characters and a ghost image.</p>
<p id="p-0183" num="0182">A thirty-fifth invention is an image processing method comprising:</p>
<p id="p-0184" num="0183">an image-edge detecting step of detecting an edge of an image;</p>
<p id="p-0185" num="0184">an image dividing step of dividing the image based on a detected edge and low brightness pixels; and</p>
<p id="p-0186" num="0185">an image correcting step of correcting the image to eliminate a ghost image from the image by calculating an average brightness within a divided region and by raising a brightness of the high brightness region alone.</p>
<p id="p-0187" num="0186">In accordance with the invention, an image is inputted, an edge of the image is detected, the image is divided based on the edge and the low brightness pixels of the image outputted from the edge detection, and the image is corrected to be free from a ghost image by calculating the average brightness within a divided region and by raising the brightness of the high brightness region alone, and then outputted. Accordingly, it is possible to output the input image without whitening-out of a halftone section and a ghost image.</p>
<p id="p-0188" num="0187">A thirty-sixth invention is an medium on which an image processing program is recorded, the image processing program being for causing a computer to execute an image reversing step of reversing one of front and back images; a positional relationship detecting step of detecting a positional relationship between the reversed one and the other of the front and back images; and an image correcting step of correcting the image to eliminate a ghost image from the other using a result of the positional relationship detection.</p>
<p id="p-0189" num="0188">In accordance with the invention, by following the image processing program recorded on the medium, a computer reverses one of inputted front and back images, thereafter, detects the positional relationship between the reversed one and the other of the front and back images, corrects the image to eliminate a ghost image from the other image using the positional relationship, and outputs a resulting image. Accordingly, the input image can be outputted without a ghost image.</p>
<p id="p-0190" num="0189">A thirty-seventh invention is an medium on which an image processing program is recorded, the image processing program being for causing a computer to execute an image-edge detecting step of detecting an edge of an image; and an image correcting step of correcting the image to eliminate a ghost image of the image by raising a brightness of a high brightness pixel other than the detected edge.</p>
<p id="p-0191" num="0190">In accordance with the invention, by following the image processing program recorded on the medium, a computer detects an edge of an inputted image, corrects the image to eliminate a ghost image from the image by raising the brightness of a high brightness pixel other than the edge of the image outputted from the edge detection, and outputs a resulting image. Accordingly, the input image can be outputted without unclearness of characters and a ghost image.</p>
<p id="p-0192" num="0191">A thirty-eighth invention is an medium on which an image processing program is recorded, the image processing program being for causing a computer to execute an image-edge detecting step of detecting an edge of an image; an image dividing step of dividing the image based on a detected edge and low brightness pixels; and an image correcting step of correcting the image to eliminate a ghost image from the image by calculating an average brightness within a divided region and by raising a brightness of a high brightness region alone.</p>
<p id="p-0193" num="0192">In accordance with the invention, by following the image processing program recorded on the medium, a computer detects an edge of an inputted image, divides the image based on the edge and the low brightness pixels of the image outputted from the edge detection, corrects the image to eliminate a ghost image from the image by calculating the average brightness within a divided region and by raising the brightness of the high brightness region alone, and outputs a resulting image. Accordingly, it is possible to output the input image without a ghost image with the whitening-out of a halftone section being prevented.</p>
<p id="p-0194" num="0193">A thirty-ninth invention is an image processing apparatus comprising:</p>
<p id="p-0195" num="0194">image inputting means for inputting an image page by page;</p>
<p id="p-0196" num="0195">image determining means for determining a predetermined image from among inputted images;</p>
<p id="p-0197" num="0196">template acquiring means for acquiring a template used as an alignment reference from an image which is determined as the predetermined image; and</p>
<p id="p-0198" num="0197">image correcting means for correcting a position between the images based on the template, thereby aligning images of consecutive pages.</p>
<p id="p-0199" num="0198">In accordance with the invention, the image inputting means inputs an image page by page, the image determining means determines a predetermined image from among the images, the template acquiring means acquires a template from the determined image, and the image correcting means corrects the position between the images based on the template, whereby the images of consecutive pages are aligned.</p>
<p id="p-0200" num="0199">Accordingly, the alignment between desired consecutive images from among the images inputted page by page can be carried out in a short time.</p>
<p id="p-0201" num="0200">A fortieth invention is an image processing apparatus comprising:</p>
<p id="p-0202" num="0201">image inputting means for inputting an image page by page of a book;</p>
<p id="p-0203" num="0202">image determining means for determining a predetermined main-text image from among inputted images;</p>
<p id="p-0204" num="0203">template acquiring means for acquiring a template used as an alignment reference from an image which is determined as the predetermined main-text image; and</p>
<p id="p-0205" num="0204">image correcting means for correcting a position between the main-text images based on the template, thereby aligning the main-text images of consecutive pages.</p>
<p id="p-0206" num="0205">In accordance with the invention, the image inputting means inputs an image page by page of a book, the image determining means determines a predetermined main-text image from among the images, the template acquiring means acquires a template from the determined image, and the image correcting means corrects the position between main-text images based on the template, whereby the main-text images of consecutive pages are aligned.</p>
<p id="p-0207" num="0206">Accordingly, the alignment between main-text images from among the main-text images inputted page by page can be carried out in a short time. Thus, the contents of an electronic book can be prepared in a short term. Further, since the position of the main-text images is aligned when the electronic book is viewed in a viewer, uncomfortableness to a user can be eliminated.</p>
<p id="p-0208" num="0207">A forty-first invention is an image processing method comprising:</p>
<p id="p-0209" num="0208">an image determining step of determining a predetermined image from among images inputted page by page;</p>
<p id="p-0210" num="0209">a template acquiring step of acquiring a template used as an alignment reference from an image which is determined as the predetermined image; and</p>
<p id="p-0211" num="0210">an image correcting means for correcting a position between the images based on the template, thereby aligning images of consecutive pages.</p>
<p id="p-0212" num="0211">In accordance with the invention, a predetermined image is determined from among the images inputted page by page. A template is acquired from the determined image. The position between the images is corrected based on the template, thereby aligning the images of consecutive pages. Accordingly, the alignment between desired consecutive images from among the images inputted page by page can be carried out in a short time.</p>
<p id="p-0213" num="0212">A forty-second invention is characterized in that the template acquiring step is a step of acquiring, as a template, positional information of a rectangle defined by circumscribing lines obtained from an ensemble of edge points acquired by scanning the input image.</p>
<p id="p-0214" num="0213">In accordance with the invention, a predetermined image is determined from among the images inputted page by page, and a template is acquired from the determined image. Here, the template is acquired as the positional information of the rectangle defined by the circumscribing lines obtained from the ensemble of the edge points acquired by scanning the input image. The position between the images is corrected based on the template, thereby aligning the images of consecutive pages. Accordingly, since the template is acquired using the circumscribing lines, an accurate template can be obtained, thereby improving the precision of the alignment.</p>
<p id="p-0215" num="0214">A forty-third invention is characterized in that the image processing method further comprises a step of generating warning data in the case where the predetermined image is determined from among input images during the image determining step and that positional information of the input image and positional information of the template are out of a predetermined range.</p>
<p id="p-0216" num="0215">In accordance with the invention, a predetermined image is determined from among the images inputted page by page, and a template is acquired from the determined image, as described above. The position between the images is corrected based on the template, thereby aligning the images of consecutive pages. Warning data is generated in the case where the predetermined image is determined from among the input images and the positional information of the input image and the positional information of the template are out of a predetermined range. Accordingly, failure in the alignment between the images can be detected, and hence, there is convenience in revision during or after the authoring.</p>
<p id="p-0217" num="0216">A forty-fourth invention is an image processing method comprising:</p>
<p id="p-0218" num="0217">an image determining step of determining a predetermined main-text image from among images inputted page by page of a book;</p>
<p id="p-0219" num="0218">a template acquiring step of acquiring a template used as an alignment reference from an image which is determined as the predetermined main-text image; and</p>
<p id="p-0220" num="0219">an image correcting step of correcting a position between the main-text images based on the template, thereby aligning main-text images of consecutive pages.</p>
<p id="p-0221" num="0220">In accordance with the invention, a predetermined main-text image is determined from among the images inputted page by page of a book. A template is acquired from the determined image. The position between main-text images is corrected based on the template, thereby aligning the main-text images of consecutive pages.</p>
<p id="p-0222" num="0221">Accordingly, the alignment between main-text images from among the main-text images inputted page by page can be carried out in a short time. Thus, the contents of an electronic book can be prepared in a short term. Further, since the position of the main-text images is aligned when the electronic book is viewed in a viewer, uncomfortableness to a user can be eliminated.</p>
<p id="p-0223" num="0222">A forty-fifth invention is an medium on which an image processing program is recorded, the image processing program being for causing a computer to execute an image determining step of deter mining a predetermined image from among images inputted page by page; a template acquiring step of acquiring a template used as an alignment reference from an image which is determined as the predetermined image; and image correcting means for correcting a position between images based on the template, thereby aligning images of consecutive pages.</p>
<p id="p-0224" num="0223">In accordance with the invention, by following the image processing program recorded on the medium, a computer determines a predetermined image from among the images inputted page by page, acquires a template from the determined image, and corrects the position between the images based on the template, thereby aligning the images of consecutive pages. Accordingly, the alignment between desired consecutive images from among the images inputted page by page can be carried out in a short time.</p>
<p id="p-0225" num="0224">A forty-sixth invention is an medium on which an image processing program is recorded, the image processing program being for causing a computer to execute an image determining step of determining a predetermined main-text image from among images inputted page by page of a book; template acquiring step of acquiring a template used as an alignment reference from an image which is determined as the predetermined main-text image; and image correcting step of correcting a position between the main-text images based on the template, thereby aligning main-text images of consecutive pages.</p>
<p id="p-0226" num="0225">In accordance with the invention, by following the image processing program recorded on the medium, a computer determines a predetermined main-text image from among the images inputted page by page of a book, acquires a template from the determined image, and corrects the position between main-text images based on the template, thereby aligning the main-text images of consecutive pages. Accordingly, the alignment between main-text images from among the main-text images inputted page by page can be carried out in a short time. Thus, the contents of an electronic book can be prepared in a short term. Further, since the position of the main-text images is aligned when the electronic book is viewed in a viewer, uncomfortableness to a user can be eliminated.</p>
<?BRFSUM description="Brief Summary" end="tail"?>
<?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?>
<description-of-drawings>
<heading id="h-0004" level="1">BRIEF DESCRIPTION OF DRAWINGS</heading>
<p id="p-0227" num="0226">Other and further objects, features, and advantages of the invention will be more explicit from the following detailed description taken with reference to the drawings wherein:</p>
<p id="p-0228" num="0227"><figref idref="DRAWINGS">FIG. 1</figref> is a block diagram of an image processing apparatus <b>1</b><i>a </i>in accordance with a first embodiment of the invention.</p>
<p id="p-0229" num="0228"><figref idref="DRAWINGS">FIG. 2</figref> is a flow chart showing the image processing method of the image processing apparatus <b>1</b><i>a. </i></p>
<p id="p-0230" num="0229"><figref idref="DRAWINGS">FIG. 3</figref> is a flow chart for describing a color analyzing section <b>3</b>.</p>
<p id="p-0231" num="0230"><figref idref="DRAWINGS">FIG. 4</figref> is a graph for describing a step S<b>22</b>.</p>
<p id="p-0232" num="0231"><figref idref="DRAWINGS">FIG. 5</figref> is a graph for describing a step S<b>23</b>.</p>
<p id="p-0233" num="0232"><figref idref="DRAWINGS">FIG. 6</figref> is a graph for describing a step S<b>24</b>.</p>
<p id="p-0234" num="0233"><figref idref="DRAWINGS">FIG. 7</figref> is a block diagram of an image processing apparatus <b>1</b><i>b </i>in accordance with a second embodiment of the invention.</p>
<p id="p-0235" num="0234"><figref idref="DRAWINGS">FIG. 8</figref> is a flow chart showing the image processing method of the image processing apparatus <b>1</b><i>b. </i></p>
<p id="p-0236" num="0235"><figref idref="DRAWINGS">FIG. 9</figref> is a block diagram of an image processing apparatus <b>1</b><i>c </i>in accordance with a third embodiment of the invention.</p>
<p id="p-0237" num="0236"><figref idref="DRAWINGS">FIG. 10</figref> is a flow chart showing the image processing method of the image processing apparatus <b>1</b><i>c. </i></p>
<p id="p-0238" num="0237"><figref idref="DRAWINGS">FIG. 11</figref> is a block diagram of an image processing apparatus <b>21</b><i>a </i>in accordance with a fourth embodiment of the invention.</p>
<p id="p-0239" num="0238"><figref idref="DRAWINGS">FIG. 12</figref> is a diagram for describing the area in which the dispersion is calculated for a pixel of interest.</p>
<p id="p-0240" num="0239"><figref idref="DRAWINGS">FIG. 13</figref> is a diagram for describing a contracting process by averaging.</p>
<p id="p-0241" num="0240"><figref idref="DRAWINGS">FIG. 14</figref> is a diagram for describing a contracting process by smoothing.</p>
<p id="p-0242" num="0241"><figref idref="DRAWINGS">FIG. 15</figref> is a block diagram of an image processing apparatus <b>21</b><i>b </i>in accordance with a fifth embodiment of the invention.</p>
<p id="p-0243" num="0242"><figref idref="DRAWINGS">FIG. 16</figref> is a diagram for describing the method of calculating the correlation of peripheral pixels.</p>
<p id="p-0244" num="0243"><figref idref="DRAWINGS">FIG. 17</figref> is a flow chart showing the image processing method of the image processing apparatus in accordance with the seventeenth to the twenty-third inventions.</p>
<p id="p-0245" num="0244"><figref idref="DRAWINGS">FIG. 18</figref> is a flow chart showing the image processing method of the image processing apparatus in accordance with the twenty-fourth invention.</p>
<p id="p-0246" num="0245"><figref idref="DRAWINGS">FIG. 19</figref> is a flow chart showing the image processing method of the image processing apparatus in accordance with the twenty-fifth invention.</p>
<p id="p-0247" num="0246"><figref idref="DRAWINGS">FIG. 20</figref> is a block diagram of an image processing apparatus <b>31</b><i>a </i>in accordance with a seventh embodiment of the invention.</p>
<p id="p-0248" num="0247"><figref idref="DRAWINGS">FIG. 21</figref> is a diagram for describing a positional relationship detecting section <b>34</b>.</p>
<p id="p-0249" num="0248"><figref idref="DRAWINGS">FIG. 22</figref> is a graph for describing the mean for extracting a high brightness component.</p>
<p id="p-0250" num="0249"><figref idref="DRAWINGS">FIG. 23</figref> is a block diagram of an image processing apparatus <b>31</b><i>b </i>in accordance with an eighth embodiment of the invention.</p>
<p id="p-0251" num="0250"><figref idref="DRAWINGS">FIG. 24</figref> is a graph for describing the operation of an image correcting section <b>38</b>.</p>
<p id="p-0252" num="0251"><figref idref="DRAWINGS">FIG. 25</figref> is a block diagram of an image processing apparatus <b>31</b><i>c </i>in accordance with a ninth embodiment of the invention.</p>
<p id="p-0253" num="0252"><figref idref="DRAWINGS">FIG. 26</figref> is a diagram for describing the operation of an image dividing section <b>39</b>.</p>
<p id="p-0254" num="0253"><figref idref="DRAWINGS">FIG. 27</figref> is a graph for describing the method of calculating a pixel value t<b>2</b>.</p>
<p id="p-0255" num="0254"><figref idref="DRAWINGS">FIG. 28</figref> is a block diagram of an image processing apparatus <b>50</b> in accordance with a tenth embodiment of the invention.</p>
<p id="p-0256" num="0255"><figref idref="DRAWINGS">FIG. 29</figref> is a schematic diagram showing the configuration of a book inputted to the image processing apparatus <b>50</b>.</p>
<p id="p-0257" num="0256"><figref idref="DRAWINGS">FIG. 30</figref> is a diagram for describing the page-contour detecting operation of a page-contour detecting section <b>52</b>.</p>
<p id="p-0258" num="0257"><figref idref="DRAWINGS">FIG. 31</figref> is a flow chart for describing the page-contour detecting technique of the page-contour detecting section <b>52</b>.</p>
<p id="p-0259" num="0258"><figref idref="DRAWINGS">FIG. 32</figref> is a diagram for describing the page-contents region extracting operation of a page-contents region extracting section <b>53</b>.</p>
<p id="p-0260" num="0259"><figref idref="DRAWINGS">FIG. 33</figref> is a flow chart for describing the page-contents region extracting technique of the page-contents region extracting section <b>53</b>.</p>
<p id="p-0261" num="0260"><figref idref="DRAWINGS">FIG. 34</figref> is a diagram showing the situation of an image rotation.</p>
<p id="p-0262" num="0261"><figref idref="DRAWINGS">FIG. 35</figref> is a diagram showing the form of a template stored in a page positional information buffer <b>60</b>.</p>
</description-of-drawings>
<?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?>
<?DETDESC description="Detailed Description" end="lead"?>
<heading id="h-0005" level="1">BEST MODE FOR CARRYING OUT THE INVENTION</heading>
<p id="p-0263" num="0262">Now referring to the drawings, preferred embodiments of the invention are described below.</p>
<heading id="h-0006" level="1">FIRST EMBODIMENT</heading>
<p id="p-0264" num="0263"><figref idref="DRAWINGS">FIG. 1</figref> is a block diagram of an image processing apparatus <b>1</b><i>a </i>in accordance with a first embodiment of the invention. The image processing apparatus <b>1</b><i>a </i>comprises an image inputting section <b>2</b>, a color analyzing section <b>3</b>, a mixing-ratio calculating section <b>4</b>, an image converting section <b>5</b>, and an image outputting section <b>6</b>. The image inputting section <b>2</b> reads an original image, for example, an image of a cartoon journal, in a predetermined unit, such as a spread and a page, and inputs it to the color analyzing section <b>3</b>. The color analyzing section <b>3</b> analyzes the color used in the input image. The mixing-ratio calculating section <b>4</b> determines the mixing-ratio r:g:b of the respective color components of red (R), green (G), and blue (B). The image converting section <b>5</b> mixes the color components of R, G and B based on the determined mixing-ratio, thereby converting the input image into a monochromatic image. The image outputting section <b>6</b> outputs the converted image.</p>
<p id="p-0265" num="0264">The image inputting section <b>2</b> is implemented by an image reading apparatus, such as a scanner, a copying machine, and a camera. It may also be implemented by an apparatus for reading an image from an medium, such as a CD-ROM (compact disk-read only memory), a hard disk, a floppy disk and a magneto-optical disk, which contains an image previously read from an original, as well as by a semiconductor memory.</p>
<p id="p-0266" num="0265">The image outputting section <b>6</b> is implemented by an image displaying apparatus, such as a CRT (cathode ray tube) and an LCD (liquid crystal display). It may also be an image printing apparatus such as a printer. Further, it may also be implemented by an apparatus for writing out an image on an medium, such as a CD-ROM, a hard disk, a floppy disk and a magneto-optical disk, as well as by a semiconductor memory.</p>
<p id="p-0267" num="0266">The color analyzing section <b>3</b>, the mixing-ratio calculating section <b>4</b> and the image converting section <b>5</b> are implemented, for example, by a computer and a software.</p>
<p id="p-0268" num="0267"><figref idref="DRAWINGS">FIG. 2</figref> is a flow chart showing the image processing method of the image processing apparatus <b>1</b><i>a</i>. The image inputting section <b>2</b> inputs an original image in a predetermined unit (S<b>1</b>). The color analyzing section <b>3</b> analyzes the color used in the input image (S<b>2</b>). The mixing-ratio calculating section <b>4</b> determines the mixing-ratio r:g:b of the respective color components of R, G and B (S<b>3</b>). The image converting section <b>5</b> mixes the color components of R, G and B according to the mixing-ratio, thereby converting the input image to a monochromatic image (S<b>4</b>). The image outputting section <b>6</b> outputs the converted image (S<b>5</b>).</p>
<p id="p-0269" num="0268"><figref idref="DRAWINGS">FIG. 3</figref> is a flow chart for describing the color analyzing section <b>3</b>. The color analyzing section <b>3</b> converts the input image in a predetermined unit into hue (H), saturation (S) and lightness (L) (S<b>21</b>). The conversion of the input image into H, S and L can be carried out by a well known method (description is omitted). Then, the representative hue and the dispersion are obtained from the distribution of H and S(S<b>22</b>). Then, the presence or absence of a black pixel is determined from the histogram of L (S<b>23</b>), thereby determining the color used in the image (S<b>24</b>).</p>
<p id="p-0270" num="0269"><figref idref="DRAWINGS">FIG. 4</figref> is a graph for describing the step S<b>22</b>. <figref idref="DRAWINGS">FIG. 4(</figref><i>a</i>) is a graph having a horizontal axis indicating hue (H) and a vertical axis indicating the sum of saturation (S). The sum of S is defined by the sum of the values of S of all the pixels having an identical value of H. It is shown as a histogram weighted by S in order to obtain the color used in the image. Selecting the H giving the maximum of the sum of S, let it be the representative hue H<b>0</b>. When the sum of S at H<b>0</b> is less than or equal to a predetermined value, the input image is determined as an originally monochromatic image, and the representative hue H<b>0</b> is determined as absent.</p>
<p id="p-0271" num="0270">Using the relation H±2π=H, the sum of S is transformed so that the sum of S distributes in a range of H<b>0</b>±2π, thereby obtaining the dispersion V. When the dispersion V is greater than or equal to a predetermined value, it is determined that a plurality of colors are used in the input image. Otherwise, it is determined that the representative hue H<b>0</b> alone is used.</p>
<p id="p-0272" num="0271"><figref idref="DRAWINGS">FIG. 5</figref> is a graph for describing the step S<b>23</b>. When a histogram of lightness (L) is prepared in 256 steps, black not being used decreases the low lightness pixels as shown in <figref idref="DRAWINGS">FIG. 5(</figref><i>a</i>), and black being used increases the low lightness pixels as shown in <figref idref="DRAWINGS">FIG. 5(</figref><i>b</i>). Accordingly, whether black is used or not can be determined depending on whether the distribution of the pixels in a low lightness range is within a predetermined range or not.</p>
<p id="p-0273" num="0272"><figref idref="DRAWINGS">FIG. 6</figref> is a graph for describing the step S<b>24</b>. When the representative hue H<b>0</b> is absent, the input image is determined as a monochromatic image (S<b>241</b>). When the dispersion V obtained in the step S<b>22</b> is greater than or equal to a predetermined value, it is determined that a plurality of colors are used in the input image (S<b>242</b>). Otherwise, the input image is determine as a monochromatic image in a color other than black if a black pixel is absent, and the input image is determine as an image in black plus another one color if a black pixel is present (S<b>243</b>).</p>
<p id="p-0274" num="0273">Using the representative hue H<b>0</b>, the color used in the image is determined as follows. First, determine which of 0, π/3, 2π/3, π, 4π/3, 5π/3 and 2π is the closest to H<b>0</b>. Here, H<b>0</b> is assumed to be within the range of 0-2. It is respectively determined as red (R) for 0 and 2π, yellow (Y) for π/3, green (G) for 2π/3, cyan (C) for π, blue (B) for 4π/3 and magenta (M) for 5π/3.</p>
<p id="p-0275" num="0274">The mixing-ratio calculating section <b>4</b> is described below. The mixing-ratio calculating section <b>4</b> determines the mixing-ratio r:g:b of the R, G and B components based on the analysis result of the color analyzing section <b>3</b>. That is, it changes the mixing-ratio correspondingly to the color used in the image.</p>
<p id="p-0276" num="0275">When the color analyzing section <b>3</b> determines as a monochromatic image, r=0, g=1 and b=0 are used, for example. In a monochromatic image, there is no difference in R, G and B components, and hence, any of the r, g and b may be unity. Further, all of them may be an identical value.</p>
<p id="p-0277" num="0276">When the color analyzing section <b>3</b> determines as plural colors, r=0.299, g=0.587 and b=0.114 are used similarly in an ordinary color/monochromatic conversion. Using such a mixing-ratio, a full-color image such as a photographic image can be converted to a naturally monochromatic image.</p>
<p id="p-0278" num="0277">When the color analyzing section <b>3</b> determines as a single color other than black, the mixing-ratio is assigned by the ratio of the color components of the complimentary color of the color used in the image which is obtained and inputted by the color analyzing section <b>3</b>. Here, the complimentary color is the color which becomes white when mixed with that color. For example, when the color used in the input image is red (R), its complimentary color is cyan (C). Since the ratio of the R, G and B components of cyan is 0:1:1, required mixing-ratio becomes r=0, g=0.5 and b=0.5. By mixing the R, G and B in such a mixing-ratio the conversion to a monochromatic image is achieved with the highest contrast of the image.</p>
<p id="p-0279" num="0278">When the color analyzing section <b>3</b> determines as black plus one color other than black, the mixing-ratio is assigned by the ratio of the color components of the complimentary color of the color used in the image obtained by the color analyzing section <b>3</b>, with adjustment by the ratio of the color components used in the image. For example, when the colors used in the input image are red (R) and black, the ratio of the color components of red (R) is 1:0:0, and the ratio of the R, G and B components of cyan (C) which is the complimentary color of red is 0:1:1. In order to set the red between black and white for the distinction between red and black, the ration of red is reduced to the half of the ratio of cyan, and added. Therefore, required mixing-ratio r:g:b becomes r=0.2, g=0.4 and b=0.4. Here, the ratio between the color used and its complimentary color is set to 1:2, however, the ratio may be changed based on the color used.</p>
<p id="p-0280" num="0279">By being previously provided with a mixing-ratio table containing the optimum mixing-ratio for each of the above-mentioned colors and color combinations, the mixing-ratio calculating section <b>4</b> may merely refer to the mixing-ratio table. This avoids the necessity of calculating every time, thereby speeding up the process.</p>
<p id="p-0281" num="0280">Further, in the case where the image conversion is performed image by image and that each of the images has a bias in color, the result of the image conversion sometimes differs, which causes uncomfortableness in turning over the leaf of the electronic book viewed in a portable terminal such as a viewer. Thus, a plurality of images may be converted as a whole. Specifically, the image inputting section <b>2</b> inputs a plurality of images, and the color analyzing section <b>3</b> analyzes the color from the result of the integration of the color used in each image from among the plurality of images. The mixing-ratio calculating section <b>4</b> calculates a mixing-ratio common to all the input images, and the image converting section <b>5</b> converts all the images in the same mixing-ratio. Accordingly, images can be converted to monochromatic images more stably.</p>
<p id="p-0282" num="0281">Finally, the image converting section <b>5</b> converts each pixel into a monochromatic image M<sub>0 </sub>based on the conversion formula
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>M</i><sub>0</sub><i>=r R+g G+b B </i>(where <i>r+g+b=</i>1),<?in-line-formulae description="In-line Formulae" end="tail"?>
<br/>
using the mixing-ratio r:g:b of the respective R, G and B color components determined by the mixing-ratio calculating section <b>4</b>.
</p>
<heading id="h-0007" level="1">SECOND EMBODIMENT</heading>
<p id="p-0283" num="0282"><figref idref="DRAWINGS">FIG. 7</figref> is a block diagram of an image processing apparatus <b>1</b><i>b </i>in accordance with a second embodiment of the invention. The image processing apparatus <b>1</b><i>b </i>comprises an image inputting section <b>2</b>, a mixing-ratio calculating section <b>4</b>, an image converting section <b>5</b>, an image outputting section <b>6</b> and a color specifying section <b>8</b>. The image inputting section <b>2</b>, the mixing-ratio calculating section <b>4</b>, the image converting section <b>5</b>, and the image outputting section <b>6</b> are identical to those of the above-mentioned image processing apparatus <b>1</b><i>a</i>, and hence, the description is omitted. The color specifying section <b>8</b> specifies the color used in the input image.</p>
<p id="p-0284" num="0283"><figref idref="DRAWINGS">FIG. 8</figref> is a flow chart showing the image processing method of the image processing apparatus <b>1</b><i>b</i>. The image inputting section <b>2</b> inputs an image (S<b>1</b>). The color specifying section specifies the color used in the input image (S<b>6</b>). The mixing-ratio calculating section <b>4</b> determines the mixing-ratio r:g:b of the respective color components of R, G and B (S<b>3</b>). The image converting section <b>5</b> mixes the color components of R, G and B according to the mixing-ratio, thereby converting the input image to a monochromatic image (S<b>4</b>). The image outputting section <b>6</b> outputs the image (S<b>5</b>).</p>
<p id="p-0285" num="0284">The difference from <figref idref="DRAWINGS">FIG. 2</figref> of the first embodiment is only the point that the step S<b>2</b> is replaced by the step S<b>6</b>. In contrast to the image processing apparatus <b>1</b><i>a </i>automatically determining the color used in the input image, the image processing apparatus <b>1</b><i>b </i>semi-automatically determines it by a user externally specifying it through the color specifying section <b>8</b> implemented by a mouse or a keyboard.</p>
<p id="p-0286" num="0285">The color specifying section <b>8</b> is described below. The color specifying section <b>8</b> permits a user to select the kind of the image from the group consisting of monochromatic, plural colors, one color other than black, and black plus one color other than black. When one color other than black or black plus one color other than black is selected, the color other than black is further selected from the group consisting of red (R), yellow (Y), green (G), cyan (C), blue (B) and magenta (M). Accordingly, by a user specifying the determination of the color, the image can be determined more accurately to be converted to a monochromatic image.</p>
<heading id="h-0008" level="1">THIRD EMBODIMENT</heading>
<p id="p-0287" num="0286"><figref idref="DRAWINGS">FIG. 9</figref> is a block diagram of an image processing apparatus <b>1</b><i>c </i>in accordance with a third embodiment of the invention. The image processing apparatus <b>1</b><i>c </i>comprises an image inputting section <b>2</b>, an image converting section <b>5</b>, an image outputting section <b>6</b> and a mixing-ratio specifying section <b>9</b>. The image inputting section <b>2</b>, the image converting section <b>5</b>, and the image outputting section <b>6</b> are identical to those of the above-mentioned image processing apparatus <b>1</b><i>a</i>, and hence, the description is omitted. The mixing-ratio specifying section <b>9</b> specifies the mixing-ratio r:g:b of the respective color components of R, G and B.</p>
<p id="p-0288" num="0287"><figref idref="DRAWINGS">FIG. 8</figref> is a flow chart showing the image processing method of the image processing apparatus <b>1</b><i>b</i>. The image inputting section <b>2</b> inputs an image (S<b>1</b>). The mixing-ratio specifying section <b>9</b> specifies the mixing-ratio r:g:b of the respective color components of R, G and B (S<b>7</b>). The image converting section <b>5</b> mixes the color components of R, G and B according to the mixing-ratio, thereby converting the input image to a monochromatic image (S<b>4</b>). The image outputting section <b>6</b> outputs the image (S<b>5</b>).</p>
<p id="p-0289" num="0288">The difference from <figref idref="DRAWINGS">FIG. 2</figref> of the first embodiment is only the point that the steps S<b>2</b> and S<b>3</b> are replaced by the step S<b>7</b>. In contrast to the image processing apparatus <b>1</b><i>a </i>automatically determining the color used in the input image and automatically determining also the mixing-ratio, the image processing apparatus <b>1</b><i>c </i>semi-automatically determines the mixing-ratio by a user externally specifying the mixing-ratio of the color components through the mixing-ratio specifying section <b>9</b> implemented by a mouse or a keyboard.</p>
<p id="p-0290" num="0289">The mixing-ratio specifying section <b>9</b> is described below. The mixing-ratio specifying section <b>9</b> permits a user to select the mixing-ratio r:g:b of the R, G and B components. Accordingly, the color components can be mixed in the ratio desired by a user, resulting in a desirable monochromatic image.</p>
<p id="p-0291" num="0290">The processes shown in the first to the third embodiments are implemented with a program. The program may be recorded on a computer-readable recording medium, such as an optical disk and a floppy disk, to be used after being read out when necessary. An image processing apparatus and an image processing method each for such a process are also included within the scope of the invention.</p>
<heading id="h-0009" level="1">FOURTH EMBODIMENT</heading>
<p id="p-0292" num="0291"><figref idref="DRAWINGS">FIG. 11</figref> is a block diagram of an image processing apparatus <b>21</b><i>a </i>in accordance with a fourth embodiment of the invention. The image processing apparatus <b>21</b><i>a </i>comprises an image inputting section <b>22</b>, a character/line drawing region extracting section <b>23</b>, a pseudo-density region extracting section <b>24</b>, an image contracting section <b>25</b>, and an image outputting section <b>26</b>. The image inputting section <b>22</b> inputs an image. The character/line drawing region extracting section <b>23</b> extracts a character/line drawing region. The pseudo-density region extracting section <b>24</b> extracts a pseudo-density region from the input image and the extracted results of the character/line drawing region extracting section <b>23</b>. The image contracting section <b>25</b> performs a contracting process by different methods respectively in the character/line drawing region, the pseudo-density region and the region other than the character/line drawing region and the pseudo-density region. The image outputting section <b>26</b> outputs the processed image.</p>
<p id="p-0293" num="0292">The image inputting section <b>22</b> and the image outputting section <b>26</b> are implemented similarly to the image inputting section <b>2</b> and the image outputting section <b>6</b>, respectively.</p>
<p id="p-0294" num="0293">The character/line drawing region extracting section <b>23</b> performs a smoothing process on the input image, and then performs edge extraction thereof. The smoothing process permits to extract the edge component alone of a character and a line drawing after accurately eliminating the pseudo-density region even when the line drawing exists within a pseudo-density region. In the smoothing process, a filter such as</p>
<p id="p-0295" num="0294">
<maths id="MATH-US-00001" num="00001">
<math overflow="scroll">
<mtable>
  <mtr>
    <mtd>
      <mrow>
        <mo>[</mo>
        <mtable>
          <mtr>
            <mtd>
              <mrow>
                <mn>1</mn>
                <mo>/</mo>
                <mn>25</mn>
              </mrow>
            </mtd>
            <mtd>
              <mrow>
                <mn>1</mn>
                <mo>/</mo>
                <mn>25</mn>
              </mrow>
            </mtd>
            <mtd>
              <mrow>
                <mn>1</mn>
                <mo>/</mo>
                <mn>25</mn>
              </mrow>
            </mtd>
            <mtd>
              <mrow>
                <mn>1</mn>
                <mo>/</mo>
                <mn>25</mn>
              </mrow>
            </mtd>
            <mtd>
              <mrow>
                <mn>1</mn>
                <mo>/</mo>
                <mn>25</mn>
              </mrow>
            </mtd>
          </mtr>
          <mtr>
            <mtd>
              <mrow>
                <mn>1</mn>
                <mo>/</mo>
                <mn>25</mn>
              </mrow>
            </mtd>
            <mtd>
              <mrow>
                <mn>1</mn>
                <mo>/</mo>
                <mn>25</mn>
              </mrow>
            </mtd>
            <mtd>
              <mrow>
                <mn>1</mn>
                <mo>/</mo>
                <mn>25</mn>
              </mrow>
            </mtd>
            <mtd>
              <mrow>
                <mn>1</mn>
                <mo>/</mo>
                <mn>25</mn>
              </mrow>
            </mtd>
            <mtd>
              <mrow>
                <mn>1</mn>
                <mo>/</mo>
                <mn>25</mn>
              </mrow>
            </mtd>
          </mtr>
          <mtr>
            <mtd>
              <mrow>
                <mn>1</mn>
                <mo>/</mo>
                <mn>25</mn>
              </mrow>
            </mtd>
            <mtd>
              <mrow>
                <mn>1</mn>
                <mo>/</mo>
                <mn>25</mn>
              </mrow>
            </mtd>
            <mtd>
              <mrow>
                <mn>1</mn>
                <mo>/</mo>
                <mn>25</mn>
              </mrow>
            </mtd>
            <mtd>
              <mrow>
                <mn>1</mn>
                <mo>/</mo>
                <mn>25</mn>
              </mrow>
            </mtd>
            <mtd>
              <mrow>
                <mn>1</mn>
                <mo>/</mo>
                <mn>25</mn>
              </mrow>
            </mtd>
          </mtr>
          <mtr>
            <mtd>
              <mrow>
                <mn>1</mn>
                <mo>/</mo>
                <mn>25</mn>
              </mrow>
            </mtd>
            <mtd>
              <mrow>
                <mn>1</mn>
                <mo>/</mo>
                <mn>25</mn>
              </mrow>
            </mtd>
            <mtd>
              <mrow>
                <mn>1</mn>
                <mo>/</mo>
                <mn>25</mn>
              </mrow>
            </mtd>
            <mtd>
              <mrow>
                <mn>1</mn>
                <mo>/</mo>
                <mn>25</mn>
              </mrow>
            </mtd>
            <mtd>
              <mrow>
                <mn>1</mn>
                <mo>/</mo>
                <mn>25</mn>
              </mrow>
            </mtd>
          </mtr>
          <mtr>
            <mtd>
              <mrow>
                <mn>1</mn>
                <mo>/</mo>
                <mn>25</mn>
              </mrow>
            </mtd>
            <mtd>
              <mrow>
                <mn>1</mn>
                <mo>/</mo>
                <mn>25</mn>
              </mrow>
            </mtd>
            <mtd>
              <mrow>
                <mn>1</mn>
                <mo>/</mo>
                <mn>25</mn>
              </mrow>
            </mtd>
            <mtd>
              <mrow>
                <mn>1</mn>
                <mo>/</mo>
                <mn>25</mn>
              </mrow>
            </mtd>
            <mtd>
              <mrow>
                <mn>1</mn>
                <mo>/</mo>
                <mn>25</mn>
              </mrow>
            </mtd>
          </mtr>
        </mtable>
        <mo>]</mo>
      </mrow>
    </mtd>
    <mtd>
      <mrow>
        <mo>(</mo>
        <mn>2</mn>
        <mo>)</mo>
      </mrow>
    </mtd>
  </mtr>
</mtable>
</math>
</maths>
<br/>
is used to simply average the pixel density in the periphery. Although the size of the filter is 5×5 here, it may be changed depending on the resolution of the original image. Further, the filter used may be a Gaussian filter and the like in which the central part and the peripheral part are differently weighted. In the edge extraction, two edge extracting filters such as
</p>
<p id="p-0296" num="0295">
<maths id="MATH-US-00002" num="00002">
<math overflow="scroll">
<mtable>
  <mtr>
    <mtd>
      <mrow>
        <mrow>
          <mi>vertical</mi>
          <mo>⁢</mo>
          <mstyle>
            <mspace width="0.8em" height="0.8ex"/>
          </mstyle>
          <mo>⁢</mo>
          <mrow>
            <mi>edge</mi>
            <mo>⁡</mo>
            <mrow>
              <mo>[</mo>
              <mtable>
                <mtr>
                  <mtd>
                    <mrow>
                      <mo>-</mo>
                      <mn>1</mn>
                    </mrow>
                  </mtd>
                  <mtd>
                    <mn>0</mn>
                  </mtd>
                  <mtd>
                    <mn>1</mn>
                  </mtd>
                </mtr>
                <mtr>
                  <mtd>
                    <mrow>
                      <mo>-</mo>
                      <mn>1</mn>
                    </mrow>
                  </mtd>
                  <mtd>
                    <mn>0</mn>
                  </mtd>
                  <mtd>
                    <mn>1</mn>
                  </mtd>
                </mtr>
                <mtr>
                  <mtd>
                    <mrow>
                      <mo>-</mo>
                      <mn>1</mn>
                    </mrow>
                  </mtd>
                  <mtd>
                    <mn>0</mn>
                  </mtd>
                  <mtd>
                    <mn>1</mn>
                  </mtd>
                </mtr>
              </mtable>
              <mo>]</mo>
            </mrow>
          </mrow>
        </mrow>
        <mo>⁢</mo>
        <mstyle>
          <mtext>
</mtext>
        </mstyle>
        <mo>⁢</mo>
        <mi>and</mi>
      </mrow>
    </mtd>
    <mtd>
      <mrow>
        <mo>(</mo>
        <mn>3</mn>
        <mo>)</mo>
      </mrow>
    </mtd>
  </mtr>
  <mtr>
    <mtd>
      <mrow>
        <mi>horizontal</mi>
        <mo>⁢</mo>
        <mrow>
          <mstyle>
            <mspace width="0.6em" height="0.6ex"/>
          </mstyle>
          <mo>⁢</mo>
          <mstyle>
            <mspace width="0.3em" height="0.3ex"/>
          </mstyle>
        </mrow>
        <mo>⁢</mo>
        <mrow>
          <mi>edge</mi>
          <mo>⁡</mo>
          <mrow>
            <mo>[</mo>
            <mtable>
              <mtr>
                <mtd>
                  <mn>1</mn>
                </mtd>
                <mtd>
                  <mn>1</mn>
                </mtd>
                <mtd>
                  <mn>1</mn>
                </mtd>
              </mtr>
              <mtr>
                <mtd>
                  <mn>0</mn>
                </mtd>
                <mtd>
                  <mn>0</mn>
                </mtd>
                <mtd>
                  <mn>0</mn>
                </mtd>
              </mtr>
              <mtr>
                <mtd>
                  <mrow>
                    <mo>-</mo>
                    <mn>1</mn>
                  </mrow>
                </mtd>
                <mtd>
                  <mrow>
                    <mo>-</mo>
                    <mn>1</mn>
                  </mrow>
                </mtd>
                <mtd>
                  <mrow>
                    <mo>-</mo>
                    <mn>1</mn>
                  </mrow>
                </mtd>
              </mtr>
            </mtable>
            <mo>]</mo>
          </mrow>
        </mrow>
      </mrow>
    </mtd>
    <mtd>
      <mrow>
        <mo>(</mo>
        <mn>4</mn>
        <mo>)</mo>
      </mrow>
    </mtd>
  </mtr>
</mtable>
</math>
</maths>
<br/>
are used to obtain the result of edge extraction which is defined by the sum of the absolute value of the output of each filter.
</p>
<p id="p-0297" num="0296">Using the result of the edge extraction, a pixel having a value exceeding a predetermined threshold value is determined as a character/line drawing region. An isolated point and the like among the pixels having a value exceeding the predetermined threshold value can be excluded from the character/line drawing region, considering it as a noise. A small region surrounded by edges can be included in a character region, because it can be considered as a complicated character area.</p>
<p id="p-0298" num="0297">The pseudo-density region extracting section <b>24</b> is described below. The pseudo-density region extracting section <b>24</b> calculates the dispersion of the peripheral pixels, and extracts, as a pseudo-density region, the pixel which is one of the pixels having a large dispersion and is not included in the character/line drawing region extracted by the character/line drawing region extracting section <b>23</b>. This depends on the fact that the pseudo-density region alone can be extracted by excluding the character/line drawing regions from the pixels having a large dispersion, because the dispersion is large both in a pseudo-density region and in the edge portion of the character/line drawing region.</p>
<p id="p-0299" num="0298"><figref idref="DRAWINGS">FIG. 12</figref> is a diagram for describing the area in which the dispersion is calculated for a pixel of interest. In <figref idref="DRAWINGS">FIG. 12</figref>, the shaded portion is a pixel of interest, and the area surrounded by thick lines is the area to calculate the dispersion. Although the dispersion for each pixel is calculated in a 5×5 region in <figref idref="DRAWINGS">FIG. 12</figref>, the size of the region may be changed depending on the resolution of the original image. The dispersion for each pixel is obtained by</p>
<p id="p-0300" num="0299">
<maths id="MATH-US-00003" num="00003">
<math overflow="scroll">
<mtable>
  <mtr>
    <mtd>
      <mfrac>
        <mrow>
          <munderover>
            <mo>∑</mo>
            <mrow>
              <mi>i</mi>
              <mo>=</mo>
              <mn>1</mn>
            </mrow>
            <mi>n</mi>
          </munderover>
          <mo>⁢</mo>
          <msup>
            <mrow>
              <mo>(</mo>
              <mrow>
                <msub>
                  <mi>p</mi>
                  <mi>i</mi>
                </msub>
                <mo>-</mo>
                <mi>m</mi>
              </mrow>
              <mo>)</mo>
            </mrow>
            <mn>2</mn>
          </msup>
        </mrow>
        <mi>n</mi>
      </mfrac>
    </mtd>
    <mtd>
      <mrow>
        <mo>(</mo>
        <mn>5</mn>
        <mo>)</mo>
      </mrow>
    </mtd>
  </mtr>
</mtable>
</math>
</maths>
<br/>
Here, p<sub>i </sub>is the pixel value, m is the average of the pixel density within the region to survey the dispersion, and n is the number of pixels included within the region to survey the dispersion.
</p>
<p id="p-0301" num="0300">The image contracting section <b>25</b> is described below. The image contracting section <b>25</b> contracts the pseudo-density region by a smoothing process, contracts the character/line drawing region by contraction due to an averaging process and by a subsequent edge enhancing process, and contracts the region other than the pseudo-density region and the character/line drawing region by the averaging process alone. Accordingly, a moire is prevented in the pseudo-density region. In the character/line drawing region, unclearness and blurring are prevented by the averaging process, and the clearness is kept by the edge enhancing process. In region other than the pseudo-density region and the character/line drawing region, the performing of the averaging process alone prevents unnecessary blurring by a smoothing process and the increase in noise by unnecessary edge enhancement. In the case where a character/line drawing region and a pseudo-density region are in the near vicinity, the averaging process and the edge enhancing process occurs in the near vicinity, whereby the image quality extremely changes. Thus, the boundary pixels may be set as a region other than the pseudo-density region and the character/line drawing region, whereby the image quality changes smoothly.</p>
<p id="p-0302" num="0301"><figref idref="DRAWINGS">FIG. 13</figref> is a diagram for describing the contracting process by averaging. In <figref idref="DRAWINGS">FIG. 13</figref>, the small lattice, which is shown by broken lines, is the lattice of the original image, and the large lattice shown by thick lines is the lattice of the contracted image. The contracted image is on a scale of ½ of the original image for simplicity, however, the scale is not necessarily a reciprocal number of a whole number. In the case where the scale is not a reciprocal number of a whole number, the lattices of the original image and the contracted image does not coincide. In that case, for example, a coordinate value may be rounded into a whole number, or a pixel may be averaged with a weight corresponding to the ratio of the areas common to the lattices. The pixel value of the pixel Pm of interest shown in <figref idref="DRAWINGS">FIG. 13</figref> is obtained by averaging the shaded pixels.</p>
<p id="p-0303" num="0302"><figref idref="DRAWINGS">FIG. 14</figref> is a diagram for describing the contracting process by smoothing. In <figref idref="DRAWINGS">FIG. 14</figref>, a small lattice which is shown by broken lines is a lattice of the original image, and the large lattice shown by thick lines is the lattice of the contracted image. The pixel value of the pixel Pb of interest shown in <figref idref="DRAWINGS">FIG. 14</figref> is obtained by averaging the shaded pixels which extend into the rather wider area than the lattice of the contracted image. The area to perform the smoothing may be changed depending on the contraction ratio and the resolution of the original image.</p>
<p id="p-0304" num="0303">The edge enhancement is performed using a filter such as</p>
<p id="p-0305" num="0304">
<maths id="MATH-US-00004" num="00004">
<math overflow="scroll">
<mtable>
  <mtr>
    <mtd>
      <mrow>
        <mo>[</mo>
        <mtable>
          <mtr>
            <mtd>
              <mrow>
                <mrow>
                  <mo>-</mo>
                  <mn>1</mn>
                </mrow>
                <mo>/</mo>
                <mn>8</mn>
              </mrow>
            </mtd>
            <mtd>
              <mrow>
                <mrow>
                  <mo>-</mo>
                  <mn>1</mn>
                </mrow>
                <mo>/</mo>
                <mn>8</mn>
              </mrow>
            </mtd>
            <mtd>
              <mrow>
                <mrow>
                  <mo>-</mo>
                  <mn>1</mn>
                </mrow>
                <mo>/</mo>
                <mn>8</mn>
              </mrow>
            </mtd>
          </mtr>
          <mtr>
            <mtd>
              <mrow>
                <mrow>
                  <mo>-</mo>
                  <mn>1</mn>
                </mrow>
                <mo>/</mo>
                <mn>8</mn>
              </mrow>
            </mtd>
            <mtd>
              <mn>2</mn>
            </mtd>
            <mtd>
              <mrow>
                <mrow>
                  <mo>-</mo>
                  <mn>1</mn>
                </mrow>
                <mo>/</mo>
                <mn>8</mn>
              </mrow>
            </mtd>
          </mtr>
          <mtr>
            <mtd>
              <mrow>
                <mrow>
                  <mo>-</mo>
                  <mn>1</mn>
                </mrow>
                <mo>/</mo>
                <mn>8</mn>
              </mrow>
            </mtd>
            <mtd>
              <mrow>
                <mrow>
                  <mo>-</mo>
                  <mn>1</mn>
                </mrow>
                <mo>/</mo>
                <mn>8</mn>
              </mrow>
            </mtd>
            <mtd>
              <mrow>
                <mrow>
                  <mo>-</mo>
                  <mn>1</mn>
                </mrow>
                <mo>/</mo>
                <mn>8</mn>
              </mrow>
            </mtd>
          </mtr>
        </mtable>
        <mo>]</mo>
      </mrow>
    </mtd>
    <mtd>
      <mrow>
        <mo>(</mo>
        <mn>6</mn>
        <mo>)</mo>
      </mrow>
    </mtd>
  </mtr>
</mtable>
</math>
</maths>
<br/>
Performing the edge enhancing process on the contracted image permits to clarify the dullness of the image due to the contraction by the averaging process.
</p>
<heading id="h-0010" level="1">FIFTH EMBODIMENT</heading>
<p id="p-0306" num="0305"><figref idref="DRAWINGS">FIG. 15</figref> is a block diagram of an image processing apparatus <b>21</b><i>b </i>in accordance with a fifth embodiment of the invention. The image processing apparatus <b>21</b><i>b </i>comprises an image inputting section <b>22</b>, a character/line drawing region extracting section <b>23</b>, an image contracting section <b>25</b>, an image outputting section <b>26</b> and a pseudo-density region extracting section <b>27</b>. The image inputting section <b>22</b> inputs an image. The character/line drawing region extracting section <b>23</b> extracts a character/line drawing region. The pseudo-density region extracting section <b>27</b> extracts a pseudo-density region from the input image and the results of the character/line drawing region extracting section <b>23</b>. The image contracting section <b>25</b> performs a contracting process by different methods respectively in the character/line drawing region, the pseudo-density region and the region other than the character/line drawing region and the pseudo-density region. The image outputting section <b>26</b> outputs the processed image. The image inputting section <b>22</b>, the character/line drawing region extracting section <b>23</b>, the image contracting section <b>25</b> and the image outputting section <b>26</b> are implemented similarly to those of the image processing apparatus <b>21</b><i>a</i>, and hence, the description is omitted.</p>
<p id="p-0307" num="0306">The pseudo-density region extracting section <b>27</b> calculates the correlation of the periphery of a pixel of interest and extracts, as a pseudo-density region, a pixel which is one of the pixels having a low correlation and is not included in the character/line drawing region extracted by the character/line drawing region extracting section <b>23</b>. Since the pseudo-density region has a low correlation with the peripheral pixels, and since the edge portion has a large correlation in any of the vertical, horizontal and oblique directions, the probability is decreased that a character and a line drawing portion are classified into a pseudo-density region.</p>
<p id="p-0308" num="0307"><figref idref="DRAWINGS">FIG. 16</figref> is a diagram for describing the method of calculating the correlation of peripheral pixels. First, a reference region which is a region containing a pixel of interest is defined. Comparative regions Bi (i=1, 2, 3, 4) each of which is a shifted region of the reference region A in any of the four of vertical, horizontal and oblique directions: (+1, 0), (+1, +1), (0, +1), (−1, −1) in (x, y) direction are defined. The value of correlation C for the pixel of interest is obtained by</p>
<p id="p-0309" num="0308">
<maths id="MATH-US-00005" num="00005">
<math overflow="scroll">
<mtable>
  <mtr>
    <mtd>
      <mrow>
        <mi>C</mi>
        <mo>=</mo>
        <mrow>
          <mi>Min</mi>
          <mo>⁡</mo>
          <mrow>
            <mo>(</mo>
            <mfrac>
              <mrow>
                <mo></mo>
                <mrow>
                  <mi>A</mi>
                  <mo>-</mo>
                  <mi>Bi</mi>
                </mrow>
                <mo></mo>
              </mrow>
              <mi>n</mi>
            </mfrac>
            <mo>)</mo>
          </mrow>
        </mrow>
      </mrow>
    </mtd>
    <mtd>
      <mrow>
        <mo>(</mo>
        <mn>7</mn>
        <mo>)</mo>
      </mrow>
    </mtd>
  </mtr>
</mtable>
</math>
</maths>
</p>
<p id="p-0310" num="0309">Where |A−Bi| represents the total sum of the absolute values of the differences between the corresponding pixels in the regions A and B, n is the number of the pixels in the region, and Min indicates the minimum within i=1, . . . , 4. The image processing apparatus <b>21</b><i>b </i>calculates the value of correlation by the difference between the regions, however, the other methods may be used. A larger value of correlation C indicates a lower correlation, and a smaller value indicates a higher correlation. Since vertical, horizontal, and oblique lines has a large correlation in any of the above-mentioned four directions, they can be excluded from a pseudo-density region at an early stage, thereby permitting to extract a pseudo-density region more accurately.</p>
<p id="p-0311" num="0310">The pseudo-density region extracting section <b>27</b> extracts, as a pseudo-density region, a pixel which is one of the pixels having an above-mentioned value of correlation greater than a predetermined value (having a low correlation) and is not extracted by the character/line drawing region extracting section <b>23</b>. Accordingly, pseudo-density regions alone can be accurately extracted.</p>
<heading id="h-0011" level="1">SIXTH EMBODIMENT</heading>
<p id="p-0312" num="0311">The image processing apparatus in accordance with a sixth embodiment is the image processing apparatus <b>21</b><i>a </i>of the fourth embodiment or the image processing apparatus <b>21</b><i>b </i>of the fifth embodiment with the pseudo-density region extracting sections <b>24</b>, <b>27</b> changed. The other components are implemented similarly to those of the image processing apparatuses <b>21</b><i>a</i>, <b>21</b><i>b </i>of the fourth and the fifth embodiments, and hence, the description is omitted. The pseudo-density region extracting section of the image processing apparatus in accordance with the sixth embodiment detects the edge detection of an image and extracts, as a pseudo-density region, a pixel which is one of the pixels having a large edge value and is not included in the character/line drawing region extracted by the character/line drawing region extracting section <b>23</b>. This depends on the fact that the pseudo-density region alone can be extracted by excluding the character/line drawing regions from the pixels having a large edge value, because the output of a edge detecting filter is large both in a pseudo-density region and in the edge portion of the character/line drawing region.</p>
<p id="p-0313" num="0312"><figref idref="DRAWINGS">FIG. 17</figref> is a flow chart showing the image processing method of the image processing apparatus in accordance with the seventeenth to the twenty-third inventions. A step S<b>31</b> is a process module for inputting an image, that is, a process module for reading an image from an image inputting apparatus, such as a scanner, or a storage medium into a memory of the image contracting apparatus. A step <b>32</b> is a process module for extracting a character/line drawing region, and extracts the character/line drawing region by edge extraction after performing a smoothing process on the input image. A step S<b>33</b> is a process module for extracting a pseudo-density region and extracts the pseudo-density region by the method described in the fourth, the fifth and the sixth embodiments. A step S<b>34</b> is a process module for performing the image contracting process described in the fourth, the fifth and the sixth embodiments on the character/line drawing region and the pseudo-density region extracted by the process modules of the steps S<b>32</b>, S<b>33</b>. A step S<b>35</b> is a process module for outputting the image contracted by the step S<b>34</b> into the image outputting section <b>26</b>.</p>
<p id="p-0314" num="0313"><figref idref="DRAWINGS">FIG. 18</figref> is a flow chart showing the image processing method of the image processing apparatus in accordance with the twenty-fourth invention. Steps S<b>40</b>-S<b>43</b> are process modules for performing the same processes as the steps S<b>31</b>-S<b>34</b> of <figref idref="DRAWINGS">FIG. 17</figref>, and hence, the description is omitted. A step S<b>44</b> detects an edge of a pseudo-density region already contracted. Since the pseudo-density region is processed by the smoothing process, the edge value normally should not be large. However, in the case of the occurrence of a moire, an edge should be detected.</p>
<p id="p-0315" num="0314">A step S<b>45</b> is a process module for performing the smoothing process only on the pixels (for example, 60) having an edge value which is detected by the step S<b>44</b> and is greater than or equal to a predetermined value. Accordingly, it is characterized by performing the smoothing process on the contracted image. A step S<b>46</b> is a process module for outputting the image, and performs the same process as the step S<b>35</b>.</p>
<p id="p-0316" num="0315"><figref idref="DRAWINGS">FIG. 19</figref> is a flow chart showing the image processing method of the image processing apparatus in accordance with the twenty-fifth invention. Steps S<b>50</b>-S<b>53</b> are process modules for performing the same processes as the steps S<b>31</b>-S<b>34</b> of <figref idref="DRAWINGS">FIG. 17</figref> and the steps S<b>40</b>-S<b>43</b> of <figref idref="DRAWINGS">FIG. 18</figref>. A step S<b>54</b> detects an edge of a pseudo-density region already contracted. Since the pseudo-density region is processed by the smoothing process, the edge value normally should not be large. However, in the case of the occurrence of a moire, an edge should be detected.</p>
<p id="p-0317" num="0316">In the case where there exists a pixel (for example, 60) having an edge value which is detected by the step S<b>54</b> and is greater than or equal to a predetermined value, a step S<b>55</b> interrupts the contracting process, indicating the occurrence of a moire (step S<b>57</b>). It may merely generate the warning, in stead. In the case where there is not a pixel having an edge value greater than or equal to a predetermined value, the step S<b>55</b> outputs the image and terminates (step S<b>56</b>).</p>
<heading id="h-0012" level="1">SEVENTH EMBODIMENT</heading>
<p id="p-0318" num="0317"><figref idref="DRAWINGS">FIG. 20</figref> is a block diagram of an image processing apparatus <b>31</b><i>a </i>in accordance with a seventh embodiment of the invention. The image processing apparatus <b>31</b><i>a </i>comprises an image inputting section <b>32</b>, an image reversing sections <b>33</b><i>a</i>, <b>33</b><i>b</i>, a positional relationship detecting section <b>34</b>, an image correcting section <b>35</b> and an image outputting section <b>36</b>. The image inputting section <b>32</b> inputs the front and back images of an original. The first image reversing section <b>33</b><i>a </i>reverses the right and left of the back image alone. The positional relationship detecting section <b>34</b> detects the positional relationship between the front and back images. The image correcting section <b>35</b> eliminates a ghost image from each of the front and back images by a calculating process on the front and back images depending on the positional relationship of the front and back images. The second image reversing section <b>33</b><i>b </i>recovers the orientation of the back image by reverting again the right and left of the back image. The image outputting section <b>36</b> outputs the corrected front and back images. The output can be used as an electronic book. The image inputting section <b>32</b> and the image outputting section <b>36</b> can be implemented similarly to those of the image inputting section <b>2</b> and the image outputting section <b>6</b>, and hence, the description is omitted.</p>
<p id="p-0319" num="0318">The first image reversing section <b>33</b><i>a </i>reverses the right and left of the back image. The front image may be reversed. Since the image on the opposite side which causes a ghost image is in the reversed orientation of right and left, the back image is reversed before the calculating process by the positional relationship detecting section <b>34</b> and the image correcting section <b>35</b>. After the correcting process, the corrected back image is reversed again by the second image reversing section <b>33</b><i>b</i>, thereby recovering the normal orientation. The image reversing sections <b>33</b><i>a</i>, <b>33</b><i>b </i>may have an identical configuration.</p>
<p id="p-0320" num="0319"><figref idref="DRAWINGS">FIG. 21</figref> is a diagram for describing the positional relationship detecting section <b>34</b>. The positional relationship detecting section <b>34</b> is implement, for example, by a block matching section. A reference region F having a size of (m×n) is defined on the front image side, and a comparative region G having a size of (s×t) larger than the reference region F is defined on the back image side. The comparative region G is compared with the reference region F thereby to obtain a region having the highest similarity to the reference region F. In other words, let the top left point of the reference region F be (0, 0), and any top left point of the comparative region G be (u, v). Then, the comparison between an arbitrary point (k, l) of the reference region F and the corresponding point (k+u, l+v) of the comparative region G is carried out by the following Formula (8).</p>
<p id="p-0321" num="0320">
<maths id="MATH-US-00006" num="00006">
<math overflow="scroll">
<mtable>
  <mtr>
    <mtd>
      <mrow>
        <mrow>
          <mi>d</mi>
          <mo>⁡</mo>
          <mrow>
            <mo>(</mo>
            <mrow>
              <mi>u</mi>
              <mo>,</mo>
              <mi>v</mi>
            </mrow>
            <mo>)</mo>
          </mrow>
        </mrow>
        <mo>=</mo>
        <mrow>
          <munderover>
            <mo>∑</mo>
            <mrow>
              <mi>k</mi>
              <mo>=</mo>
              <mn>0</mn>
            </mrow>
            <mrow>
              <mi>n</mi>
              <mo>-</mo>
              <mn>1</mn>
            </mrow>
          </munderover>
          <mo>⁢</mo>
          <mrow>
            <munderover>
              <mo>∑</mo>
              <mrow>
                <mi>l</mi>
                <mo>=</mo>
                <mn>0</mn>
              </mrow>
              <mrow>
                <mi>m</mi>
                <mo>-</mo>
                <mn>1</mn>
              </mrow>
            </munderover>
            <mo>⁢</mo>
            <mrow>
              <mo></mo>
              <mrow>
                <mrow>
                  <mi>G</mi>
                  <mo>⁡</mo>
                  <mrow>
                    <mo>(</mo>
                    <mrow>
                      <mrow>
                        <mi>k</mi>
                        <mo>+</mo>
                        <mi>u</mi>
                      </mrow>
                      <mo>,</mo>
                      <mrow>
                        <mi>l</mi>
                        <mo>+</mo>
                        <mi>v</mi>
                      </mrow>
                    </mrow>
                    <mo>)</mo>
                  </mrow>
                </mrow>
                <mo>-</mo>
                <mrow>
                  <mi>F</mi>
                  <mo>⁡</mo>
                  <mrow>
                    <mo>(</mo>
                    <mrow>
                      <mi>k</mi>
                      <mo>,</mo>
                      <mi>l</mi>
                    </mrow>
                    <mo>)</mo>
                  </mrow>
                </mrow>
              </mrow>
              <mo></mo>
            </mrow>
          </mrow>
        </mrow>
      </mrow>
    </mtd>
    <mtd>
      <mrow>
        <mo>(</mo>
        <mn>8</mn>
        <mo>)</mo>
      </mrow>
    </mtd>
  </mtr>
</mtable>
</math>
</maths>
</p>
<p id="p-0322" num="0321">The region of the comparative region G which locates the position such that the point d(u, v) of the Formula (8) becomes minimum is determined as having the highest similarity to the reference region F, thereby detecting the coincidence of the comparative region G with the reference region F.</p>
<p id="p-0323" num="0322">Knowing the positional relationship of the correspondence between the front and back images, the amount of the shift (0x, 0y) of the back image with respect to the front image can be obtained from the difference between the positions of the comparative region G and the reference region F.</p>
<p id="p-0324" num="0323">In the embodiment, the block matching is carried out in one reference region F, thereby obtaining the amount of parallel displacement only. However, the block matching may be carried out in two or more reference regions F, thereby detecting also the amount of rotation.</p>
<p id="p-0325" num="0324">Since a ghost image has very low brightness and contrast in comparison with the original image, there is an anxiety that the direct comparison between the front and back images during the block matching can results in a wrong detection of the position due to the strong influence of the original image on each side. Thus, the invention comprises high brightness component extracting means for previously extracting the high brightness component alone before the positional relationship detecting section <b>34</b>, thereby performing the block matching using the high brightness component alone, thereby achieving more accurate detection of the position.</p>
<p id="p-0326" num="0325"><figref idref="DRAWINGS">FIG. 22</figref> is a graph for describing the mean for extracting a high brightness component. In the graph of <figref idref="DRAWINGS">FIG. 22</figref>, the horizontal axis indicates the input pixel value, and the vertical axis indicates the output pixel value. In the graph of <figref idref="DRAWINGS">FIG. 22</figref>, the pixel value represents the brightness and has a value of 0-255. A value nearer to −0 is determined as a lower brightness (black), and a value nearer to 255 as a higher brightness (white). However, this relationship may be reversed, the value is not necessarily a whole number, and the range is not necessarily 0-255.</p>
<p id="p-0327" num="0326">The means for extracting a high brightness component converts the pixel value alone of the input image having a pixel value greater than or equal to Lt into a value of 0-255, thereby cutting off a low brightness component to extract the high brightness component alone. The pixel value Lt is previously set to a value lower than the brightness of a ghost image component, and depends on the transmittance of an original sheet, the sensitivity characteristics of a scanner, and the like.</p>
<p id="p-0328" num="0327">The operation of the image correcting section <b>35</b> is described below with reference to the following Formulae (9)-(12). The following a and b represent the actually printed front and back images, respectively. The A and B represent the front and back images, respectively, which are read by the image inputting section <b>32</b> and includes a ghost image. For the simplicity of description, a, b, A and B represent the respective pixel values corresponding to each other in an identical position. However, in practice, the corresponding pixels are determined by the positional relationship detecting section <b>34</b> considering a parallel displacement and a rotation.</p>
<p id="p-0329" num="0328">
<maths id="MATH-US-00007" num="00007">
<math overflow="scroll">
<mtable>
  <mtr>
    <mtd>
      <mrow>
        <mi>A</mi>
        <mo>=</mo>
        <mrow>
          <mi>a</mi>
          <mo>-</mo>
          <mrow>
            <mi>r</mi>
            <mo>⁡</mo>
            <mrow>
              <mo>(</mo>
              <mrow>
                <mn>255</mn>
                <mo>-</mo>
                <mi>b</mi>
              </mrow>
              <mo>)</mo>
            </mrow>
          </mrow>
        </mrow>
      </mrow>
    </mtd>
    <mtd>
      <mrow>
        <mo>(</mo>
        <mn>9</mn>
        <mo>)</mo>
      </mrow>
    </mtd>
  </mtr>
  <mtr>
    <mtd>
      <mrow>
        <mi>B</mi>
        <mo>=</mo>
        <mrow>
          <mi>b</mi>
          <mo>-</mo>
          <mrow>
            <mi>r</mi>
            <mo>⁡</mo>
            <mrow>
              <mo>(</mo>
              <mrow>
                <mn>255</mn>
                <mo>-</mo>
                <mi>a</mi>
              </mrow>
              <mo>)</mo>
            </mrow>
          </mrow>
        </mrow>
      </mrow>
    </mtd>
    <mtd>
      <mrow>
        <mo>(</mo>
        <mn>10</mn>
        <mo>)</mo>
      </mrow>
    </mtd>
  </mtr>
  <mtr>
    <mtd>
      <mrow>
        <mi>a</mi>
        <mo>=</mo>
        <mfrac>
          <mrow>
            <mi>A</mi>
            <mo>+</mo>
            <mrow>
              <mi>r</mi>
              <mo>⁡</mo>
              <mrow>
                <mo>(</mo>
                <mrow>
                  <mn>255</mn>
                  <mo>-</mo>
                  <mi>B</mi>
                </mrow>
                <mo>)</mo>
              </mrow>
            </mrow>
            <mo>-</mo>
            <mrow>
              <mn>255</mn>
              <mo>⁢</mo>
              <msup>
                <mi>r</mi>
                <mn>2</mn>
              </msup>
            </mrow>
          </mrow>
          <mrow>
            <mn>1</mn>
            <mo>-</mo>
            <msup>
              <mi>r</mi>
              <mn>2</mn>
            </msup>
          </mrow>
        </mfrac>
      </mrow>
    </mtd>
    <mtd>
      <mrow>
        <mo>(</mo>
        <mn>11</mn>
        <mo>)</mo>
      </mrow>
    </mtd>
  </mtr>
  <mtr>
    <mtd>
      <mrow>
        <mi>b</mi>
        <mo>=</mo>
        <mfrac>
          <mrow>
            <mi>B</mi>
            <mo>+</mo>
            <mrow>
              <mi>r</mi>
              <mo>⁡</mo>
              <mrow>
                <mo>(</mo>
                <mrow>
                  <mn>255</mn>
                  <mo>-</mo>
                  <mi>A</mi>
                </mrow>
                <mo>)</mo>
              </mrow>
            </mrow>
            <mo>-</mo>
            <mrow>
              <mn>255</mn>
              <mo>⁢</mo>
              <msup>
                <mi>r</mi>
                <mn>2</mn>
              </msup>
            </mrow>
          </mrow>
          <mrow>
            <mn>1</mn>
            <mo>-</mo>
            <msup>
              <mi>r</mi>
              <mn>2</mn>
            </msup>
          </mrow>
        </mfrac>
      </mrow>
    </mtd>
    <mtd>
      <mrow>
        <mo>(</mo>
        <mn>12</mn>
        <mo>)</mo>
      </mrow>
    </mtd>
  </mtr>
</mtable>
</math>
</maths>
</p>
<p id="p-0330" num="0329">The r represents the transmittance of the medium, such as an original sheet, on which the image is printed. It can be obtained by substituting the known or measured values for A, a and b in Formula (9).</p>
<p id="p-0331" num="0330">The Formulae (9) and (10) are solved, resulting in Formulae (11) and (12). That is, by the calculating process of the photographed front image A and back image B, the actual front image a and back image b can be recovered eliminating a ghost image. The image correcting section <b>35</b> performs the calculation of the above-mentioned Formulae (11) and (12) and outputs the front image a and the back image b.</p>
<p id="p-0332" num="0331">The image processing apparatus <b>31</b><i>a </i>can be implemented by a computer-readable recording medium, such as a floppy, a ROM and a CD, which records a program describing the process steps of the image reversing sections <b>33</b><i>a</i>, <b>33</b><i>b</i>, the positional relationship detecting section <b>34</b> and the image correcting section <b>35</b> described above.</p>
<heading id="h-0013" level="1">EIGHTH EMBODIMENT</heading>
<p id="p-0333" num="0332"><figref idref="DRAWINGS">FIG. 23</figref> is a block diagram of an image processing apparatus <b>31</b><i>b </i>in accordance with an eighth embodiment of the invention. The image processing apparatus <b>31</b><i>b </i>comprises an image inputting section <b>32</b>, an image outputting section <b>36</b>, an edge detecting section <b>37</b> and an image correcting section <b>38</b>. The image inputting section <b>32</b> inputs an image. The edge detecting section <b>37</b> detects an edge. The image correcting section <b>38</b> eliminates a ghost image by raising the brightness of a pixel other than the edge and a low brightness region. The image outputting section <b>36</b> outputs the corrected image. The image inputting section <b>32</b> and the image outputting section <b>36</b> of the image processing apparatus <b>31</b><i>b </i>are implemented similarly to those of the image inputting section <b>32</b> and the image outputting section <b>36</b> of the image processing apparatus <b>31</b><i>a</i>, and hence, the description is omitted.</p>
<p id="p-0334" num="0333">In the edge detection by the edge detecting section <b>37</b>, two edge detection filters such as Equations (13) and (14) are used, and the result of the edge detection is defined by the sum of the absolute value of the outputs of the respective filters. Using the result of the edge detection, a pixel having a value exceeding a predetermined threshold value is determined as an edge.</p>
<p id="p-0335" num="0334">
<maths id="MATH-US-00008" num="00008">
<math overflow="scroll">
<mtable>
  <mtr>
    <mtd>
      <mrow>
        <mi>vertical</mi>
        <mo>⁢</mo>
        <mstyle>
          <mspace width="0.8em" height="0.8ex"/>
        </mstyle>
        <mo>⁢</mo>
        <mrow>
          <mi>edge</mi>
          <mo>⁡</mo>
          <mrow>
            <mo>[</mo>
            <mtable>
              <mtr>
                <mtd>
                  <mrow>
                    <mo>-</mo>
                    <mn>1</mn>
                  </mrow>
                </mtd>
                <mtd>
                  <mn>0</mn>
                </mtd>
                <mtd>
                  <mn>1</mn>
                </mtd>
              </mtr>
              <mtr>
                <mtd>
                  <mrow>
                    <mo>-</mo>
                    <mn>1</mn>
                  </mrow>
                </mtd>
                <mtd>
                  <mn>0</mn>
                </mtd>
                <mtd>
                  <mn>1</mn>
                </mtd>
              </mtr>
              <mtr>
                <mtd>
                  <mrow>
                    <mo>-</mo>
                    <mn>1</mn>
                  </mrow>
                </mtd>
                <mtd>
                  <mn>0</mn>
                </mtd>
                <mtd>
                  <mn>1</mn>
                </mtd>
              </mtr>
            </mtable>
            <mo>]</mo>
          </mrow>
        </mrow>
      </mrow>
    </mtd>
    <mtd>
      <mrow>
        <mo>(</mo>
        <mn>13</mn>
        <mo>)</mo>
      </mrow>
    </mtd>
  </mtr>
  <mtr>
    <mtd>
      <mrow>
        <mi>horizontal</mi>
        <mo>⁢</mo>
        <mrow>
          <mstyle>
            <mspace width="0.6em" height="0.6ex"/>
          </mstyle>
          <mo>⁢</mo>
          <mstyle>
            <mspace width="0.3em" height="0.3ex"/>
          </mstyle>
        </mrow>
        <mo>⁢</mo>
        <mrow>
          <mi>edge</mi>
          <mo>⁡</mo>
          <mrow>
            <mo>[</mo>
            <mtable>
              <mtr>
                <mtd>
                  <mn>1</mn>
                </mtd>
                <mtd>
                  <mn>1</mn>
                </mtd>
                <mtd>
                  <mn>1</mn>
                </mtd>
              </mtr>
              <mtr>
                <mtd>
                  <mn>0</mn>
                </mtd>
                <mtd>
                  <mn>0</mn>
                </mtd>
                <mtd>
                  <mn>0</mn>
                </mtd>
              </mtr>
              <mtr>
                <mtd>
                  <mrow>
                    <mo>-</mo>
                    <mn>1</mn>
                  </mrow>
                </mtd>
                <mtd>
                  <mrow>
                    <mo>-</mo>
                    <mn>1</mn>
                  </mrow>
                </mtd>
                <mtd>
                  <mrow>
                    <mo>-</mo>
                    <mn>1</mn>
                  </mrow>
                </mtd>
              </mtr>
            </mtable>
            <mo>]</mo>
          </mrow>
        </mrow>
      </mrow>
    </mtd>
    <mtd>
      <mrow>
        <mo>(</mo>
        <mn>14</mn>
        <mo>)</mo>
      </mrow>
    </mtd>
  </mtr>
</mtable>
</math>
</maths>
</p>
<p id="p-0336" num="0335"><figref idref="DRAWINGS">FIG. 24</figref> is a graph for describing the operation of the image correcting section <b>38</b>. Let the pixel value in the periphery of a ghost image component the input pixel value of which is previously known be t<b>2</b>, and a pixel value appropriately smaller than the pixel value t<b>2</b> be t<b>1</b>. Then, the image correcting section <b>38</b> corrects a ghost image by changing the relationship (inclination) to the output pixel value between the pixel value t<b>1</b> and the pixel value t<b>2</b> to correct the output pixel value so as to saturate at the pixel value t<b>2</b> and above. The pixel values t<b>1</b>, t<b>2</b> depend on the transmittance of an original sheet, the sensitivity characteristics of a scanner, and the like. Here, since there is no influence on the low brightness component having a pixel value smaller than or equal to t<b>1</b>, the whitening-out of a black portion can be prevented. Further, the brightness correction is not carried out in the edge portion detected by the edge detecting section <b>37</b>, whereby the high brightness portion in the contour of a character is conserved, whereby the unclearness of a character can be prevented.</p>
<p id="p-0337" num="0336">The image processing apparatus <b>31</b><i>b </i>can be implemented by a computer-readable recording medium, such as a floppy, a ROM and a CD, which records a program describing the process steps of the edge detecting section <b>37</b> and the image correcting section <b>38</b> described above.</p>
<heading id="h-0014" level="1">NINTH EMBODIMENT</heading>
<p id="p-0338" num="0337"><figref idref="DRAWINGS">FIG. 25</figref> is a block diagram of an image processing apparatus <b>31</b><i>c </i>in accordance with a ninth embodiment of the invention. The image processing apparatus <b>31</b><i>c </i>comprises an image inputting section <b>32</b>, an image outputting section <b>36</b>, an edge detecting section <b>37</b>, an image dividing section <b>39</b> and an image correcting section <b>40</b>. The image inputting section <b>32</b> inputs an image. The edge detecting section <b>37</b> detects an edge. The image dividing section <b>39</b> divides the image at the detected edge and low brightness component. The image correcting section <b>40</b> eliminates a ghost image by raising the brightness of a portion having a high average brightness within the divided region. The image outputting section <b>36</b> outputs the corrected image. The image inputting section <b>32</b>, the image outputting section <b>36</b> and the edge detecting section <b>37</b> of the image processing apparatus <b>31</b><i>c </i>are implemented similarly to those of the image inputting section <b>32</b>, the image outputting section <b>36</b> and the edge detecting section <b>37</b> of the image processing apparatus <b>31</b><i>b</i>, and hence, the description is omitted.</p>
<p id="p-0339" num="0338">The image dividing section <b>39</b> divides an image region based on the edge and the pixel value exceeding a predetermined threshold value detected by the edge detecting section <b>37</b>. For example, as shown in <figref idref="DRAWINGS">FIG. 26</figref>, the image dividing section <b>39</b> divides the image into regions <b>1</b>-<b>5</b>. The region <b>1</b> is a surrounded region having a character, the region <b>2</b> is a base region, the region <b>3</b> is a black halftone region, the region <b>4</b> is a thin halftone region, and the region <b>5</b> is a thick halftone region. Assume that the regions <b>1</b>-<b>5</b> does not include a black pixel or an edge portion, such as a character. Further assume that a ghost image having the same brightness as the region <b>4</b> exists in the regions <b>1</b> and <b>2</b>. The regions <b>3</b>-<b>5</b> using a halftone screen have a low average brightness, however, the regions <b>1</b> and <b>2</b> have a high average brightness because of the white background. Accordingly, by performing a brightness correction in the high average brightness regions <b>1</b> and <b>2</b> alone, the ghost image in the regions <b>1</b> and <b>2</b> can be eliminated with the halftone in the region <b>4</b> preserved even when the regions <b>1</b> and <b>2</b> have a ghost image having the same brightness as the region <b>4</b> . Accordingly, a black region in an image is excluded from the region to correct a ghost image because of the unremarkableness of a ghost image.</p>
<p id="p-0340" num="0339">The image correcting section <b>40</b> calculates the average brightness in a region divided by the image dividing section <b>39</b>, and corrects the brightness of a high brightness portion by the similar method of <figref idref="DRAWINGS">FIG. 24</figref> described in the eighth embodiment only when the brightness is greater than or equal to a predetermined value, thereby eliminating a ghost image. As described above, by performing the ghost-image correction in high average brightness regions alone, even a halftone portion having the same brightness as a ghost image can be prevented from the whitening-out of the uniform region surrounded by lines. Further, since black regions and edge portions are excluded, the unclearness of a character and the whitening-out of a black portion are prevented.</p>
<p id="p-0341" num="0340">The image correcting section <b>40</b> automatically calculates the pixel value t<b>2</b> of the <figref idref="DRAWINGS">FIG. 24</figref> from the distribution of the pixel values in a high brightness region. <figref idref="DRAWINGS">FIG. 27</figref> is a graph for describing the method of calculating the pixel value t<b>2</b>. First, the histogram of the pixel values of a high brightness region is prepared, and pixel values tmin and tmax are defined. When all the pixels of the high brightness region exist in the right of tmax, set t<b>2</b>=tmax. When all the pixels of the high brightness region exist in the left of tmin, set t<b>2</b>=tmin. When the pixel having the minimum exists between tmin and tmax, let the value be the pixel value t<b>2</b>. Since a ghost image portion is darker than the peripheral region, the ghost image can be eliminated by detecting the pixel value and by correcting it so as to be white.</p>
<p id="p-0342" num="0341">The image processing apparatus <b>31</b><i>c </i>can be implemented by a computer-readable recording medium, such as a floppy, a ROM and a CD, which records a program describing the process steps of the edge detecting section <b>37</b>, image dividing section <b>39</b> and the image correcting section <b>40</b> described above.</p>
<heading id="h-0015" level="1">TENTH EMBODIMENT</heading>
<p id="p-0343" num="0342"><figref idref="DRAWINGS">FIG. 28</figref> is a block diagram of an image processing apparatus <b>50</b> in accordance with a tenth embodiment of the invention. In the image processing apparatus <b>50</b>, an image inputting section <b>51</b> reads the image data page by page from an original of a book separated into pages. A page contour detecting section <b>52</b>, a page contents region extracting section <b>53</b>, an inclination correcting section <b>54</b>, a page position correcting section <b>55</b> and a page information processing section <b>57</b> perform the processes described later using various buffers. The image outputting section <b>56</b> outputs the image data in which the alignment between the pages is corrected.</p>
<p id="p-0344" num="0343"><figref idref="DRAWINGS">FIG. 29</figref> is a schematic diagram showing the configuration of a novel book as an example of a book inputted to the image processing apparatus <b>50</b>. In <figref idref="DRAWINGS">FIG. 29</figref>, the book inputted to the image processing apparatus <b>50</b> consists of a title (cover) page, contents table pages, main-text pages (even pages and odd pages), index pages and a back cover page. A majority of the pages are main-text pages each having a header region (shows a page number in the present example), a footer region (shows a chapter number in the example) and a contents region (main-text region) in a fixed position. The image processing apparatus <b>50</b> aligns the pages using such a feature.</p>
<p id="p-0345" num="0344">The processes by respective sections of the image processing apparatus <b>50</b> are described below. The image inputting section <b>51</b> reads a binary or multi-valued image from a scanner and the like, and saves it in an input image buffer <b>58</b>. This image may be a monochromatic image or a color image. The orientation of the image input is roughly correct, and the input is carried out in the sequence of the pages from the first or the last. In the case of the reading by a scanner and the like, it is preferable that the input region of the scanner is larger than the size of a page, considering the case of the inclined input due to the error of an automatic feeder, if used. This situation is assumed in the following description. When a page is larger than the input region of the scanner, it can be inputted in divided pieces and reconstructed in the input image buffer <b>58</b>.</p>
<p id="p-0346" num="0345">The page contour detecting section <b>52</b> is described below. Since the page is smaller than the input region of the scanner, the image inputted by the image inputting section <b>51</b> consists of an actual page region of the book and a background region behind it. The page contour detecting section <b>52</b> discriminates between the background region and the page region form the input image, thereby extracts the contour of the page region. Here, in the case where a book is used after being separated into pages, a page sometimes has the inclined or torn edge corresponding to the back portion. In that case, the contour is not an accurate rectangle, but is assumed to be approximated by a rectangle.</p>
<p id="p-0347" num="0346">The methods for detecting the contour of a page region include a method in which an edge portion is detected from the image thereby detecting the fact that each angle of the rectangle is 90 degree from the edge point, a method in which an ensemble of edge points having a large change in brightness is extracted thereby obtaining a straight line from the ensemble thereby extracting the contour and the like.</p>
<p id="p-0348" num="0347">An example of a technique of detecting the contour of a page region is described below with reference to <figref idref="DRAWINGS">FIGS. 30 and 31</figref>. <figref idref="DRAWINGS">FIG. 30</figref> is a diagram for describing this technique. <figref idref="DRAWINGS">FIG. 31</figref> is a flowchart for describing this technique. Since the contour of a page region is a rectangle, a method of detecting the four straight lines in the outermost location of the image is described herein.</p>
<p id="p-0349" num="0348">First, description is made for the case of detecting a contour line in the left side of the page region shown in <figref idref="DRAWINGS">FIG. 30(</figref><i>a</i>) (S<b>61</b>, S<b>62</b>). A line to scan is selected firstly (S<b>63</b>). The top row is selected here because the scan is carried out horizontally. Since the scan is carried out from left to right, the left end is set to the initial value (i=0) (S<b>64</b>). Scanning the image sequentially, the brightness of each point is acquired from the input image buffer <b>58</b> (S<b>56</b>). Determination is carried out whether the point is an edge point or not (S<b>66</b>). The method of the determination is to calculate the first-order differential in the horizontal direction. An example of this is the method using a Sorbel filter. When the point is determined as an edge point, the coordinate of the point is stored (S<b>69</b>), the scanning of the line is terminated, and the next line is selected. Such a scan is carried out through all the lines to the bottom row (S<b>69</b>). When the point is determined not as an edge point, it is determined whether an edge of the image or not (S<b>67</b>). When it is determined as an edge of the image, it proceeds to S<b>69</b>. When it is determined not as an edge of the image, i=i+1 is set (S<b>68</b>), and it returns to S<b>65</b>. As a result, an ensemble of the coordinate of the edge points is obtained. A majority of these accumulate on a straight line. Thus, the straight line is calculated. This is typically carried out by the half transformation (S<b>71</b>). The process described above is carried out in each of the four directions (corresponding to D=0-3 in the flow of <figref idref="DRAWINGS">FIG. 31)</figref> of the input image (<figref idref="DRAWINGS">FIG. 30(</figref><i>b</i>)) (S<b>72</b>), thereby obtaining four straight lines (S<b>73</b>), thereby detecting these straight lines as the contour of the page region (<figref idref="DRAWINGS">FIG. 30(</figref><i>c</i>)) (S<b>74</b>).</p>
<p id="p-0350" num="0349">The page contents region extracting section <b>53</b> is described below with reference to <figref idref="DRAWINGS">FIGS. 32 and 33</figref>. The page contents region extracting section <b>53</b> extracts a page contents region from the image within the contour of the page region obtained by the page contour detecting section <b>52</b>. <figref idref="DRAWINGS">FIG. 32</figref> is a diagram for describing this technique. <figref idref="DRAWINGS">FIG. 33</figref> is a flow chart for describing this technique.</p>
<p id="p-0351" num="0350">As shown in <figref idref="DRAWINGS">FIG. 32(</figref><i>a</i>), scanning the image in the sequence of the lines (S<b>61</b>, S<b>62</b>), an edge point is extracted. This is by the same method as the page contour detecting section <b>52</b>. This edge point may be an edge of a character, a section line in a figure or table, or an edge of a balloon of a cartoon. However, an edge point of a character region is to be obtained in the present example. In the case of a character string and the like, the obtained edge point ensemble does not exists on a straight line. Thus, obtaining the lines (straight lines) circumscribing such an edge ensemble (<figref idref="DRAWINGS">FIG. 32(</figref><i>b</i>)), the straight lines are set as the boundary of the page contents region (<figref idref="DRAWINGS">FIG. 32(</figref><i>c</i>)) herein.</p>
<p id="p-0352" num="0351">The method of obtaining the circumscribing line is described again with reference to <figref idref="DRAWINGS">FIG. 33</figref>. First, an edge point ensemble is obtained (S<b>75</b>). Selecting two points from the edge point ensemble, the equation of the straight line passing through the two points is obtained (S<b>76</b>). The equation of the straight line is
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?>(<i>y</i>2−<i>y</i>1)<i>x</i>−(<i>x</i>2−<i>x</i>1)<i>y</i>−(<i>x</i>1<i>y</i>2−<i>x</i>2<i>y</i>1)=0<?in-line-formulae description="In-line Formulae" end="tail"?>
<br/>
with the coordinate of the two points (x1, y1) and (x2, y2).
</p>
<p id="p-0353" num="0352">It is determined on which side of the straight line another edge point not selected exists (S<b>77</b>). The determining equation is
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>F</i>(<i>x, y</i>)=(<i>y</i>2−<i>y</i>1)<i>x</i>+(<i>x</i>2−<i>x</i>1)<i>y−x</i>1<i>y</i>2+<i>x</i>2<i>y</i>1<?in-line-formulae description="In-line Formulae" end="tail"?>
<br/>
where the point (x, y) locates on the origin side when F(x, y)&lt;0 and outside when F(x, y)&gt;0.
</p>
<p id="p-0354" num="0353">When all the points locate on the same side, the straight line is a circumscribing line. Otherwise, another two points are selected (S<b>78</b>-<b>80</b>). Repeating for all the combination, an circumscribing line can be obtained definitely.</p>
<p id="p-0355" num="0354">By carrying out the process described above in each of the four scanning directions (corresponding to D=0-3 in the flow of <figref idref="DRAWINGS">FIG. 33</figref>) (S<b>72</b>), four straight lines is obtained (S<b>73</b>), whereby the page contents region can be extracted as a figure surrounded by the circumscribing lines (<figref idref="DRAWINGS">FIG. 32(</figref><i>c</i>)) (S<b>74</b>).</p>
<p id="p-0356" num="0355">The inclination correcting section <b>54</b> is described below. The inclination correcting section <b>54</b> performs the process of rotating with respect to the reference coordinate axes based on the figure of the circumscribing lines extracted by the page contents region extracting section <b>53</b>, thereby correcting the inclination of the input image. The process is carried out on all the pages of the book.</p>
<p id="p-0357" num="0356"><figref idref="DRAWINGS">FIG. 34</figref> is a diagram showing the situation of the image rotation. The center of the rotating conversion is set to the coordinate (cx, cy) of an corner of the page contents region. In a rotation of the input image by θ, the coordinate of a point on the input image is (x, y) and the coordinate of a point on the corrected image after the conversion is (x′, y′). The conversion formula of this rotation is</p>
<p id="p-0358" num="0357">
<maths id="MATH-US-00009" num="00009">
<math overflow="scroll">
<mrow>
  <mrow>
    <mo>(</mo>
    <mtable>
      <mtr>
        <mtd>
          <msup>
            <mi>x</mi>
            <mi>′</mi>
          </msup>
        </mtd>
      </mtr>
      <mtr>
        <mtd>
          <msup>
            <mi>y</mi>
            <mi>′</mi>
          </msup>
        </mtd>
      </mtr>
    </mtable>
    <mo>)</mo>
  </mrow>
  <mo>=</mo>
  <mrow>
    <mrow>
      <mrow>
        <mo>(</mo>
        <mtable>
          <mtr>
            <mtd>
              <mrow>
                <mi>cos</mi>
                <mo>⁡</mo>
                <mrow>
                  <mo>(</mo>
                  <mi>θ</mi>
                  <mo>)</mo>
                </mrow>
              </mrow>
            </mtd>
            <mtd>
              <mrow>
                <mo>-</mo>
                <mrow>
                  <mi>sin</mi>
                  <mo>⁡</mo>
                  <mrow>
                    <mo>(</mo>
                    <mi>θ</mi>
                    <mo>)</mo>
                  </mrow>
                </mrow>
              </mrow>
            </mtd>
          </mtr>
          <mtr>
            <mtd>
              <mrow>
                <mi>sin</mi>
                <mo>⁡</mo>
                <mrow>
                  <mo>(</mo>
                  <mi>θ</mi>
                  <mo>)</mo>
                </mrow>
              </mrow>
            </mtd>
            <mtd>
              <mrow>
                <mi>cos</mi>
                <mo>⁡</mo>
                <mrow>
                  <mo>(</mo>
                  <mi>θ</mi>
                  <mo>)</mo>
                </mrow>
              </mrow>
            </mtd>
          </mtr>
        </mtable>
        <mo>)</mo>
      </mrow>
      <mo>⁢</mo>
      <mrow>
        <mo>(</mo>
        <mtable>
          <mtr>
            <mtd>
              <mrow>
                <mi>x</mi>
                <mo>-</mo>
                <mi>cx</mi>
              </mrow>
            </mtd>
          </mtr>
          <mtr>
            <mtd>
              <mrow>
                <mi>y</mi>
                <mo>-</mo>
                <mi>cy</mi>
              </mrow>
            </mtd>
          </mtr>
        </mtable>
        <mo>)</mo>
      </mrow>
    </mrow>
    <mo>+</mo>
    <mrow>
      <mo>(</mo>
      <mtable>
        <mtr>
          <mtd>
            <mi>cx</mi>
          </mtd>
        </mtr>
        <mtr>
          <mtd>
            <mi>cy</mi>
          </mtd>
        </mtr>
      </mtable>
      <mo>)</mo>
    </mrow>
  </mrow>
</mrow>
</math>
</maths>
</p>
<p id="p-0359" num="0358">In the rotating process, this formula is applied to each pixel on the input image buffer <b>58</b>, thereby assigning a brightness or a color to the converted coordinate on a corrected image buffer <b>59</b>.</p>
<p id="p-0360" num="0359">The page information processing section <b>57</b> is described below. The page information processing section <b>57</b> determines whether the input image of a book is a main-text page or the other page. The method of the determination is a method in which the size or the shape of the figure of the circumscribing lines extracted by the page contents region extracting section <b>53</b> is compared and it is determined as a main-text page when the size or the shape is within a predetermined range. An alternative method is a method in which consecutive pages are determined as the main-text pages during the consecutive pages having an almost constant size of the rectangle of the circumscribing lines continue. This method depends on the fact that the input is carried out in the sequence of the pages and that the main-text pages have an almost constant size of the rectangle of the circumscribing lines detected by the page contents region extracting section <b>53</b>. Another alternative method is a method in which the first page of and the last page (sheet numbers) of the main-text pages are previously specified externally. This method also depends on the fact that the input is carried out in the sequence of the pages. Further, when determining as a main-text page, the page information processing section <b>57</b> stores the positional information of the page contents region in the rectangle of the circumscribing lines into a page positional information buffer <b>60</b>, and uses it as a template for aligning the main-text images and, hence, the pages. When the page positional information buffer <b>60</b> already contains the positional information of the template indicating a main-text page used as a reference for the page alignment, it proceeds to the page position correcting section <b>55</b>.</p>
<p id="p-0361" num="0360">The page position correcting section <b>55</b> is described below. Although the inclination of an input image is corrected, the position of the page contents region of the main-text page varies image by image because of mechanical deviation and the like during the reading. If the intact main-text pages are outputted as an electronic book without position correction, the positional variation occurs during the viewing of the contents of the main-text pages in a viewer and the like, which causes uncomfortableness. Thus, the page position correcting section <b>55</b> corrects, using a parallel displacement, the position of the images of the main-text pages the inclination of which is corrected, so as to coincide with the positional information of the template indicating a main-text page stored in the page positional information buffer <b>60</b>. As a result, the image outputting section <b>56</b> can provide the image data in which the main-text pages are aligned. In other words, once the template is obtained from a page determined as a main-text page, the subsequent main-text pages are aligned with the reference to the template.</p>
<p id="p-0362" num="0361">The above-mentioned template includes all of the header region, the footer region and the contents region of a main-text page. However, each region may be separated as shown in <figref idref="DRAWINGS">FIG. 35(</figref><i>a</i>), and stored into the page positional information buffer <b>60</b> in the form shown in <figref idref="DRAWINGS">FIG. 35(</figref><i>b</i>). Such a separation simplifies character recognition, key word extraction, and the like, thereby simplifying the structuring of a document.</p>
<p id="p-0363" num="0362">In the above-mentioned description, all the processes are automated. However, the processes of the page contour detecting section <b>52</b>, the page contents region extracting section <b>53</b>, and the inclination correcting section <b>54</b> may be carried out manually.</p>
<heading id="h-0016" level="1">ELEVENTH EMBODIMENT</heading>
<p id="p-0364" num="0363">The images of a book is ordinarily inputted automatically and sequentially. Accordingly, whether the next input is a main-text page or the other is not known at the time of the input. Further, even in the case of a main-text page, the size of the page contents region differs, for example, in the last page of a chapter. Thus, even in the case where a page is determined as a main-text page, when the positional information of the page contents region of the newly input image differs from the positional information of the template in the page positional information buffer <b>60</b> (when the positional information is out of a predetermined range), an error is concluded, an error bit is written into an error buffer (not shown) page by page, and warning data is generated and maintained. Accordingly, a user can easily recognize the pages the error of which is to be corrected by a manual process, by watching the warning data from the error buffer through display means (not shown) after the completion of the automatic process of the whole book.</p>
<p id="p-0365" num="0364">The series of the above-mentioned processes can implemented with a program. The program may be recorded on a computer-readable recording medium, such as an optical disk and a floppy disk, to be used after being read out when necessary.</p>
<p id="p-0366" num="0365">The invention may be embodied in other specific forms without departing from the spirit or essential characteristics thereof. The embodiments are therefore to be considered in all respects as illustrative and not restrictive, the scope of the invention being indicated by the appended claims rather than by the foregoing description and all changes which come within the meaning and the range of equivalency of the claims are therefore intended to be embraced therein.</p>
<heading id="h-0017" level="1">INDUSTRIAL APPLICABILITY</heading>
<p id="p-0367" num="0366">In accordance with the first invention, it is possible to produce a monochromatic image in such a manner that the color analyzing means analyzes the color used within the image inputted from the image inputting means, the mixing-ratio calculating means calculates the mixing-ratio of color components such as red, green and blue based on the analyzed color, and the converting means mixes color components according to the calculated mixing-ratio. By such an image processing apparatus, the color of the input image is automatically determined and a monochromatic image can be produced.</p>
<p id="p-0368" num="0367">In accordance with the second invention, it is possible to produce a monochromatic image in such a manner that the color analyzing means analyzes colors used within a plurality of images inputted from the image inputting means, the mixing-ratio calculating means calculates the mixing-ratios of color components which are common to the plurality of images, based on the analyzed color, and the converting means mixes color components according to the calculated mixing-ratios. By such an image processing apparatus, the colors of the plurality of input images are automatically determined and monochromatic images can be produced. Further, since the color determination is carried out in the plurality of input images, the color can be determined more accurately. Furthermore, since monochromatic images are produced in the same conditions for the plurality of input images, the images can be produced stably.</p>
<p id="p-0369" num="0368">In accordance with the third invention, it is possible to produce a monochromatic image in such a manner that an image is inputted from the image inputting means, the color specifying means specifies the color used within the image, the mixing-ratio calculating means calculates the mixing-ratio of color components based on the specified color, the converting means mixes the color components according to the calculated mixing-ratio. By such an image processing apparatus, a monochromatic image with higher accuracy can be produced by specifying the color used within the input image by a user.</p>
<p id="p-0370" num="0369">In accordance with the fourth invention, an image is inputted from the image inputting means, the mixing-ratio specifying means specifies the mixing-ratio of color components for the image, and the converting means mixes the color components based on the specified mixing-ratio. By such an image processing apparatus, a desired monochromatic image can be produced by specifying the mixing-ratio of a color component by a user.</p>
<p id="p-0371" num="0370">In accordance with the fifth invention, data is inputted, the color used within the image is analyzed, the mixing-ratio of color components is calculated based on the analyzed color, and color components are mixed according to the calculated mixing-ratio. By such an image processing method, the color of the input image is automatically determined and a monochromatic image can be produced.</p>
<p id="p-0372" num="0371">In accordance with the sixth invention, the color used within the image is analyzed based on the distribution of the hue, saturation and lightness of the input image. By such an image processing method, the color of the input image is automatically determined and a monochromatic image can be produced.</p>
<p id="p-0373" num="0372">In accordance with the seventh invention, the data of a plurality of original images is inputted, the colors used within the images are analyzed, the mixing-ratios of color components, common to the plurality of images, are calculated based on the analyzed colors, and color components are mixed according to the calculated mixing-ratio. By such an image processing method, the colors of the plurality of input images are automatically determined and respective monochromatic images can be produced. Further, since colors are determined from the plurality of input images, the colors can be determined more accurately. Furthermore, since monochromatic images are produced in the same conditions for the plurality of input images, the images can be produced stably.</p>
<p id="p-0374" num="0373">In accordance with the eighth invention, the color used within the input image is specified, the mixing-ratio of color components is calculated based on the color, and color components are mixed according to the calculated mixing-ratio. By such an image processing method, a monochromatic image with higher accuracy can be produced by specifying the color used within the input image by a user.</p>
<p id="p-0375" num="0374">In accordance with the ninth invention, the mixing-ratio is calculated by referring to the mixing-ratio table. By such an image processing method, the color of the input image is automatically determined and a monochromatic image can be produced. Further, by calculating the mixing-ratio with reference to the mixing-ratio table, optimum mixing-ratio is rapidly obtained for each color used within the image. Thus, more optimum monochromatic image can be produced at high speed.</p>
<p id="p-0376" num="0375">In accordance with the tenth invention, the mixing-ratio is calculated according to the color components ratio of the complimentary color of the color used within the input image. By such an image processing method, the color of the input image is automatically determined and a monochromatic image with high contrast can be produced.</p>
<p id="p-0377" num="0376">In accordance with the eleventh invention, the mixing-ratio is calculated based on the color component ratio of the complimentary color of the color used within the input image and the color component ratio used within the input image. By such an image processing method, the color of the input image is automatically determined, and a high-contrast monochromatic image in which the color used in the input image is easily discriminated from black can be produced.</p>
<p id="p-0378" num="0377">In accordance with the twelfth invention, the mixing-ratio of the color components of the input image is specified, and color components are mixed according to the mixing-ratio. By such an image processing method, a desired monochromatic image can be produced by specifying the mixing-ratio of a color component by a user.</p>
<p id="p-0379" num="0378">In accordance with the thirteenth invention, a computer analyzes a color used within an input image, calculates the mixing-ratio of color components based on the color, and mixes the color components according to the mixing-ratio. Accordingly, a medium can be provided which records an image processing program such that the color of the input image is automatically determined and a monochromatic image is produced.</p>
<p id="p-0380" num="0379">In accordance with the fourteenth invention, a computer analyzes the colors used within a plurality of input images, calculates the mixing-ratios of color components, common to the plurality of input images, based on the colors, and mixes the color components according to the mixing-ratios. Accordingly, a medium can be provided on which an image processing program is recorded such that the colors of the plurality of input images are automatically determined and monochromatic images are produced.</p>
<p id="p-0381" num="0380">In accordance with the fifteenth invention, a medium can be provided on which an image processing program of a computer for producing a monochromatic image with higher accuracy by specifying a color used within an input image by a user is recorded, the image processing program comprising the steps of specifying a color used within an input image, calculating a mixing-ratio of color components based on the color, mixing color components according to the mixing-ratio, and producing a monochromatic image with higher accuracy.</p>
<p id="p-0382" num="0381">In accordance with the sixteenth invention, a computer specifies a mixing-ratio for an input image, and mixes the color components according to the specified mixing-ratio. Accordingly, a medium can be provided on which an image processing program is recorded such that a desired monochromatic image is produced by a user specifying the mixing-ratio of a color component.</p>
<p id="p-0383" num="0382">In accordance with the seventeenth invention, the image inputting means inputs an image, from the image the character/line drawing region extracting means extracts a character/line drawing region and the pseudo-density region extracting means extracts a pseudo-density region, the image contracting means contracts the image using mutually different methods respectively in the pseudo-density region, the character/line drawing region and the region other than the pseudo-density region and the character/line drawing region, and the image outputting means outputs the contracted image. Using such an image processing apparatus, by dividing the input image into three regions, i.e., pseudo-density region, character/line drawing region and the other region, the image can be contracted with a moire being suppressed in the pseudo-density region, the image can be clearly contracted in the character/line drawing region, and the image can be properly contracted in the other region.</p>
<p id="p-0384" num="0383">In accordance with the eighteenth invention, the image contracting means contracts the image by a smoothing process in the pseudo-density region, contracts the image by an averaging process and a subsequent edge enhancing process in the character/line drawing region, and contracts the image by an averaging process in the other region, and the image outputting means outputs the contracted image. By such an image processing apparatus, the image can be contracted with a moire being suppressed in the pseudo-density region, the image can be clearly contracted in the character/line drawing region, and the image can be properly contracted in the other region.</p>
<p id="p-0385" num="0384">In accordance with the nineteenth invention, from the input image the character/line drawing region extracting means extracts a character/line drawing region, and thereafter the pseudo-density region extracting means extracts a pseudo-density region. By such an image processing apparatus, a character/line drawing region is firstly extract from the input image, and a pseudo-density region is then extracted. Therefore, the character/line drawing region can be accurately extracted without being affected from the pseudo-density region, even when it exists within the pseudo-density region.</p>
<p id="p-0386" num="0385">In accordance with the twentieth invention, the character/line drawing region is extracted by the edge extraction of the input image after the smoothing process thereof. By such an image processing apparatus, a character/line drawing region is firstly extract from the input image as mentioned above, and a pseudo-density region is then extracted. Therefore, the character/line drawing region can be accurately extracted without being affected from the pseudo-density region, even when it exists within the pseudo-density region.</p>
<p id="p-0387" num="0386">In accordance with the twenty-first invention, the pseudo-density region is extracted by calculating the dispersion of the peripheral pixels around each pixel of the input image and by extracting the pixel which is one of the pixels having a large dispersion and exists in the region which is not extracted as a character/line drawing region. Using such an image processing apparatus, by calculating the dispersion of peripheral pixels and by extracting, as a pseudo-density region, the pixel is one of the pixels having a large dispersion and exists in the region which is not extracted as a character/line drawing region, the character/line drawing region is eliminated, whereby the pseudo-density region alone can be extracted accurately.</p>
<p id="p-0388" num="0387">In accordance with the twenty-second invention, the pseudo-density region is extracted by calculating the correlation of the peripheral pixels around each pixel of the input image and by extracting the pixel which is one of the pixels having a low correlation and exists in the region which is not extracted as a character/line drawing region. Using such an image processing apparatus, by calculating the correlation of peripheral pixels and by extracting, as a pseudo-density region, the pixel which is one of the pixels having a low correlation and exists in the region which is not extracted as a character/line drawing region, the character/line drawing region is eliminated more securely, whereby the pseudo-density region alone can be extracted accurately.</p>
<p id="p-0389" num="0388">In accordance with the twenty-third invention, the pseudo-density region is extracted by detecting an edge region of the input image and by extracting the region which is one of the edge regions and is not extracted as a character/line drawing region. By such an image processing apparatus, the edge filter is simple, and the pseudo-density region can be extracted faster.</p>
<p id="p-0390" num="0389">In accordance with the twenty-fourth invention, the edge detection is carried out in the pseudo-density region and the smoothing process is repeated for a region having a density greater than or equal to a predetermined value. By such an image processing apparatus, the image can be precisely contracted with a moire being suppressed more securely in the pseudo-density region.</p>
<p id="p-0391" num="0390">In accordance with the twenty-fifth invention, the edge detection is carried out in the pseudo-density region and the contracting process is interrupted for a region having a density greater than or equal to a predetermined value. By such an image processing apparatus, the normal contracting process can be continued with an unnecessary contracting process being avoided.</p>
<p id="p-0392" num="0391">In accordance with the twenty-sixth invention, an image is inputted, a character/line drawing region is extracted from the image, and a pseudo-density region is extracted, the image is contracted using mutually different methods respectively in the pseudo-density region, the character/line drawing region and the other region, and the image is then outputted. By such an image processing method, the image can be contracted with a moire being suppressed in the pseudo-density region, the image can be clearly contracted in the character/line drawing region, and the image can be properly contracted in the other region.</p>
<p id="p-0393" num="0392">In accordance with the twenty-seventh invention, a computer extracts a character/line drawing region from the image, extracts a pseudo-density region, contracts the image using mutually different-methods respectively in the pseudo-density region, the character/line drawing region and the other region, and outputs it. Accordingly, a medium can be provided which records an image processing program such that the image is contracted with a moire being suppressed in the pseudo-density region, the image is clearly contracted in the character/line drawing region, and the image is properly contracted in the other region.</p>
<p id="p-0394" num="0393">In accordance with the twenty-eighth invention, front and back images are inputted from the image inputting means; after one of the images is reversed by the image reversing means, the positional relationship between the front and back images is detected by the positional relationship detecting means; and the image is corrected to be free from a ghost image by the image correcting means using the positional relationship, and then outputted by the image outputting means. By such an image processing apparatus, the input image can be outputted without a ghost image.</p>
<p id="p-0395" num="0394">In accordance with the twenty-ninth invention, the positional relationship between the front and back images is detected by extracting the high brightness component alone of the front and back images and by performing the block matching of the high brightness component. By such an image processing apparatus, the positional relationship can be detected more precisely, and the input image can be outputted more securely without a ghost image.</p>
<p id="p-0396" num="0395">In accordance with the thirtieth invention, the image inputting means inputs an image, the edge detecting means detects an edge of the image, the image correcting means corrects the image to eliminate a ghost image of the image by raising the brightness of high brightness pixels other than the edge of the image outputted from the edge detecting means, and the image outputting means outputs the image. By such an image processing apparatus, the input image can be outputted with the unclearness of a character being prevented and without a ghost image.</p>
<p id="p-0397" num="0396">In accordance with the thirty-first invention, the image inputting means inputs an image, the edge detecting means detects an edge of the image, the image dividing means divides the image based on the edge and low brightness pixels of the image outputted from the edge detecting means, the image correcting means corrects the image to eliminate a ghost image of the image by calculating the average brightness within a divided region and by raising the brightness of the high brightness region alone, and the image outputting means outputs the image. By such an image processing apparatus, the input image can be outputted with the whitening-out of a halftone section being prevented and without a ghost image.</p>
<p id="p-0398" num="0397">In accordance with the thirty-second invention, the image in a high brightness region is corrected by obtaining the representative brightness from the pixels having a brightness within a predetermined range and by raising the brightness of the region with the referencing to the representative brightness. By such an image processing apparatus, the input image can be outputted without a ghost image, free from the influence of the difference in the transmittance depending on the paper quality.</p>
<p id="p-0399" num="0398">In accordance with the thirty-third invention, front and back images are inputted, after one of the images is reversed, the positional relationship between the front and back images is detected, and the image is corrected to be free from a ghost image using the positional relationship, and then outputted. By such an image processing method, the input image can be outputted without a ghost image.</p>
<p id="p-0400" num="0399">In accordance with the thirty-fourth invention, an image is inputted, and an edge of the image is detected, and the image is corrected to be free from a ghost image of the image by raising the brightness of high brightness pixels other than the edge of the image outputted from the edge detection, and then outputted. By such an image processing method, the input image can be outputted with the unclearness of a character being prevented and without a ghost image.</p>
<p id="p-0401" num="0400">In accordance with the thirty-fifth invention, an image is inputted, and an edge of the image is detected, the image is divided based on the edge and the low brightness pixels of the image outputted from the edge detection, and the image is corrected to be free from a ghost image of the image by calculating the average brightness within a divided region and by raising the brightness of the high brightness region alone, and then outputted. By such an image processing method, the input image can be outputted with the whitening-out of a halftone section being prevented and without a ghost image.</p>
<p id="p-0402" num="0401">In accordance with the thirty-sixth invention, a computer reverses one of inputted front and back images, after that, detects the positional relationship between the front and back images, corrects the image to eliminate a ghost image using the positional relationship, and outputs it. Accordingly, a medium can be provided which records an image processing program such that the input image is outputted without a ghost image.</p>
<p id="p-0403" num="0402">In accordance with the thirty-seventh invention, a computer detects an edge of an inputted image, corrects the image to eliminate a ghost image of the image by raising the brightness of high brightness pixels other than the edge of the image outputted from the edge detection, and outputs it. Accordingly, a medium can be provided which records an image processing program such that the input image is outputted with the unclearness of a character being prevented and without a ghost image.</p>
<p id="p-0404" num="0403">In accordance with the thirty-eighth invention, a computer detects an edge of an inputted image, divides the image based on the edge and the low brightness pixels of the image outputted from the edge detection, corrects the image to eliminate a ghost image of the image by calculating the average brightness within a divided region and by raising the brightness of the high brightness region alone, and outputs it. Accordingly, a medium can be provided which records an image processing program such that the input image is outputted with the whitening-out of a halftone section being prevented and without a ghost image.</p>
<p id="p-0405" num="0404">In accordance with the thirty-ninth invention, the image inputting means inputs an image page by page. The image determining means determines a predetermined image from among the images. The template acquiring means acquires a template from the determined image. The image correcting means corrects the position between the images based on the template, thereby aligning the images of consecutive pages. By such an image processing apparatus, the alignment between desired consecutive images from among the images inputted page by page can be carried out in a short time.</p>
<p id="p-0406" num="0405">In accordance with the fortieth invention, the image inputting means inputs an image page by page of a book, the image determining means determines a predetermined main-text image from among the images, the template acquiring means acquires a template from the determined image, and the image correcting means corrects the position between main-text images based on the template, thereby aligning the main-text images of consecutive pages. By such an image processing apparatus, the alignment between main-text images from among the main-text images inputted page by page can be carried out in a short time. Thus, the contents of an electronic book can be prepared in a short term. Further, since the position of the main-text images is aligned when the electronic book is viewed in a viewer, uncomfortableness to a user can be eliminated.</p>
<p id="p-0407" num="0406">In accordance with the forty-first invention, a predetermined image is determined from among the images inputted page by page, a template is acquired from the determined image, and the position between the images is corrected based on the template, thereby aligning the images of consecutive pages. By such an image processing method, the alignment between desired consecutive images from among the images inputted page by page can be carried out in a short time.</p>
<p id="p-0408" num="0407">In accordance with the forty-second invention, the template is acquired as the positional information of the rectangle defined by the circumscribing lines obtained from the ensemble of the edge points acquired by scanning the input image. By such an image processing method, since the template is acquired using the circumscribing lines, an accurate template can be obtained, thereby improving the precision of the alignment.</p>
<p id="p-0409" num="0408">In accordance with the forty-third invention, a predetermined image is determined from among the input images, and warning data is generated in the case where the positional information of the input image and the positional information of the template are out of a predetermined range. By such an image processing method, failure in the alignment between the images can be detected, and hence, there is convenience in revision during or after the authoring.</p>
<p id="p-0410" num="0409">In accordance with the forty-fourth invention, a predetermined main-text image is determined from among the images inputted page by page of a book, a template is acquired from the determined image, and the position between main-text images is corrected based on the template, thereby aligning the main-text images of consecutive pages. By such an image processing method, the alignment between main-text images from among the main-text images inputted page by page can be carried out in a short time. Thus, the contents of an electronic book can be prepared in a short term. Further, since the position of the main-text images is aligned when the electronic book is viewed in a viewer, uncomfortableness to a user can be eliminated.</p>
<p id="p-0411" num="0410">In accordance with the forty-fifth invention, a computer determines a predetermined image from among the images inputted page by page, acquires a template from the determined image, and corrects the position between the images based on the template, thereby aligning the images of the consecutive pages. Accordingly, a medium can be provided which records an image processing program such that the alignment between desired consecutive images from among the images inputted page by page is carried out in a short time.</p>
<p id="p-0412" num="0411">In accordance with the forty-sixth invention, a computer determines a predetermined main-text image from among the images inputted page by page of a book, acquires a template from the determined image, and corrects the position between main-text images based on the template, thereby aligning the main-text images of consecutive pages. Accordingly, a medium can be provided which records an image processing program such that the alignment between main-text images from among the main-text images inputted page by page is carried out in a short time.</p>
<?DETDESC description="Detailed Description" end="tail"?>
</description>
<us-math idrefs="MATH-US-00001" nb-file="US07298927-20071120-M00001.NB">
<img id="EMI-M00001" he="19.05mm" wi="76.20mm" file="US07298927-20071120-M00001.TIF" alt="embedded image " img-content="math" img-format="tif"/>
</us-math>
<us-math idrefs="MATH-US-00002" nb-file="US07298927-20071120-M00002.NB">
<img id="EMI-M00002" he="28.62mm" wi="76.20mm" file="US07298927-20071120-M00002.TIF" alt="embedded image " img-content="math" img-format="tif"/>
</us-math>
<us-math idrefs="MATH-US-00003" nb-file="US07298927-20071120-M00003.NB">
<img id="EMI-M00003" he="11.26mm" wi="76.20mm" file="US07298927-20071120-M00003.TIF" alt="embedded image " img-content="math" img-format="tif"/>
</us-math>
<us-math idrefs="MATH-US-00004" nb-file="US07298927-20071120-M00004.NB">
<img id="EMI-M00004" he="11.26mm" wi="76.20mm" file="US07298927-20071120-M00004.TIF" alt="embedded image " img-content="math" img-format="tif"/>
</us-math>
<us-math idrefs="MATH-US-00005" nb-file="US07298927-20071120-M00005.NB">
<img id="EMI-M00005" he="6.69mm" wi="76.20mm" file="US07298927-20071120-M00005.TIF" alt="embedded image " img-content="math" img-format="tif"/>
</us-math>
<us-math idrefs="MATH-US-00006" nb-file="US07298927-20071120-M00006.NB">
<img id="EMI-M00006" he="9.14mm" wi="76.20mm" file="US07298927-20071120-M00006.TIF" alt="embedded image " img-content="math" img-format="tif"/>
</us-math>
<us-math idrefs="MATH-US-00007" nb-file="US07298927-20071120-M00007.NB">
<img id="EMI-M00007" he="24.72mm" wi="76.20mm" file="US07298927-20071120-M00007.TIF" alt="embedded image " img-content="math" img-format="tif"/>
</us-math>
<us-math idrefs="MATH-US-00008" nb-file="US07298927-20071120-M00008.NB">
<img id="EMI-M00008" he="23.96mm" wi="76.20mm" file="US07298927-20071120-M00008.TIF" alt="embedded image " img-content="math" img-format="tif"/>
</us-math>
<us-math idrefs="MATH-US-00009" nb-file="US07298927-20071120-M00009.NB">
<img id="EMI-M00009" he="8.13mm" wi="76.20mm" file="US07298927-20071120-M00009.TIF" alt="embedded image " img-content="math" img-format="tif"/>
</us-math>
<us-claim-statement>The invention claimed is:</us-claim-statement>
<claims id="claims">
<claim id="CLM-00001" num="00001">
<claim-text>1. An image processing apparatus comprising:
<claim-text>image inputting means for inputting an image;</claim-text>
<claim-text>character/line drawing region extracting means for extracting a character/line drawing region from the input image;</claim-text>
<claim-text>pseudo-density region extracting means for extracting a pseudo-density region from the input image;</claim-text>
<claim-text>image contracting means for contracting images in an extracted pseudo-density region, an extracted character/line drawing region, and a region other than the pseudo-density region and the character/line drawing region, by mutually different methods; and</claim-text>
<claim-text>image outputting means for outputting the contracted image.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00002" num="00002">
<claim-text>2. The image processing apparatus of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the image contracting means performs a smoothing process in the pseudo-density region, performs an averaging process and a subsequent edge enhancing process in the character/line drawing region, and performs an averaging process in a region other than the pseudo-density region and the character/line drawing region.</claim-text>
</claim>
<claim id="CLM-00003" num="00003">
<claim-text>3. The image processing apparatus of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the character/line drawing region extracting means extracts a character/line drawing region from the input image before the extraction of a pseudo-density region.</claim-text>
</claim>
<claim id="CLM-00004" num="00004">
<claim-text>4. The image processing apparatus of <claim-ref idref="CLM-00003">claim 3</claim-ref>, wherein the character/line drawing region extracting means extracts a character/line drawing region by performing an edge extraction of the input image after performing a smoothing process thereof.</claim-text>
</claim>
<claim id="CLM-00005" num="00005">
<claim-text>5. The image processing apparatus of any one of <claim-ref idref="CLM-00001">claims 1</claim-ref>, <claim-ref idref="CLM-00003">3</claim-ref> or <claim-ref idref="CLM-00004">4</claim-ref>, wherein the pseudo-density region extracting means calculates a dispersion of peripheral pixels around each pixel of the input image and extracts, as a pseudo-density region, the pixel which is one of pixels having a large dispersion and exists in a region which is not extracted as a character/line drawing region by the character/line drawing region extracting means.</claim-text>
</claim>
<claim id="CLM-00006" num="00006">
<claim-text>6. The image processing apparatus of any one of <claim-ref idref="CLM-00001">claims 1</claim-ref>, <claim-ref idref="CLM-00003">3</claim-ref> or <claim-ref idref="CLM-00004">4</claim-ref>, wherein the pseudo-density region extracting means calculates a correlation of peripheral pixels around each pixel of the input image and extracts, as a pseudo-density region, a pixel which is one of pixels having a low correlation and exists in the region which is not extracted as a character/line drawing region by the character/line drawing region extracting means.</claim-text>
</claim>
<claim id="CLM-00007" num="00007">
<claim-text>7. The image processing apparatus of any one of <claim-ref idref="CLM-00001">claims 1</claim-ref>, <claim-ref idref="CLM-00003">3</claim-ref> or <claim-ref idref="CLM-00004">4</claim-ref>, wherein the pseudo-density region extracting means detects an edge region of the input image and extracts, as a pseudo-density region, a region which is one of the extracted edge regions and is not extracted as a character/line drawing region by the character/line drawing region extracting means.</claim-text>
</claim>
<claim id="CLM-00008" num="00008">
<claim-text>8. The image processing apparatus of <claim-ref idref="CLM-00002">claim 2</claim-ref>, wherein the contracting means performs edge detection of an extracted pseudo-density region and repeats the smoothing process for a region having a density greater than or equal to a predetermined value.</claim-text>
</claim>
<claim id="CLM-00009" num="00009">
<claim-text>9. The image processing apparatus of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the image contracting means performs edge detection of the extracted pseudo-density region and interrupts a contracting process for a region having a density greater than or equal to a predetermined value.</claim-text>
</claim>
<claim id="CLM-00010" num="00010">
<claim-text>10. An image processing method comprising:
<claim-text>an image inputting step;</claim-text>
<claim-text>a character/line drawing region extracting step of extracting a character/line drawing region from an input image;</claim-text>
<claim-text>a pseudo-density region extracting step of extracting a pseudo-density region from the input image;</claim-text>
<claim-text>a image contracting step of contracting the image using mutually different methods respectively in the extracted pseudo-density region, the extracted character/line drawing region and the region other than the pseudo-density region and the character/line drawing region; and</claim-text>
<claim-text>an image outputting step of outputting an the contracted image.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00011" num="00011">
<claim-text>11. A computer-readable medium which embodies an image processing program for causing a computer to execute an image inputting step; a character/line drawing region extracting step of extracting a character/line drawing legion from an input image; a pseudo-density region extracting step of extracting a pseudo-density region from the input image; an image contracting step of contracting the image using mutually different methods respectively in the extracted pseudo-density region, the extracted character/line drawing region and the region other than the pseudo-density region and the character/line drawing region; and an image outputting step of outputting a contracted image.</claim-text>
</claim>
</claims>
</us-patent-grant>
