<us-patent-grant lang="EN" dtd-version="v4.2 2006-08-23" file="US07298212-20071120.XML" status="PRODUCTION" id="us-patent-grant" country="US" date-produced="20071106" date-publ="20071120">
<us-bibliographic-data-grant>
<publication-reference>
<document-id>
<country>US</country>
<doc-number>07298212</doc-number>
<kind>B2</kind>
<date>20071120</date>
</document-id>
</publication-reference>
<application-reference appl-type="utility">
<document-id>
<country>US</country>
<doc-number>11187281</doc-number>
<date>20050722</date>
</document-id>
</application-reference>
<us-application-series-code>11</us-application-series-code>
<priority-claims>
<priority-claim sequence="01" kind="national">
<country>JP</country>
<doc-number>2004-216235</doc-number>
<date>20040723</date>
</priority-claim>
</priority-claims>
<us-term-of-grant>
<us-term-extension>152</us-term-extension>
</us-term-of-grant>
<classifications-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>H</section>
<class>03</class>
<subclass>G</subclass>
<main-group>3</main-group>
<subgroup>30</subgroup>
<symbol-position>F</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20071120</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
</classifications-ipcr>
<classification-national>
<country>US</country>
<main-classification>330279</main-classification>
<further-classification>330129</further-classification>
<further-classification>330141</further-classification>
<further-classification>330278</further-classification>
</classification-national>
<invention-title id="d0e71">Automatic level control circuit with improved attack action</invention-title>
<references-cited>
<citation>
<patcit num="00001">
<document-id>
<country>US</country>
<doc-number>5423081</doc-number>
<kind>A</kind>
<name>Thiele et al.</name>
<date>19950600</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>330279</main-classification></classification-national>
</citation>
<citation>
<patcit num="00002">
<document-id>
<country>US</country>
<doc-number>6670849</doc-number>
<kind>B1</kind>
<name>Damgaard et al.</name>
<date>20031200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>330129</main-classification></classification-national>
</citation>
<citation>
<patcit num="00003">
<document-id>
<country>US</country>
<doc-number>7164315</doc-number>
<kind>B2</kind>
<name>Camnitz et al.</name>
<date>20070100</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00004">
<document-id>
<country>JP</country>
<doc-number>11-328855</doc-number>
<date>19991100</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<nplcit num="00005">
<othercit>English Patent Abstract of JP11328855 from esp@cenet, published Nov. 30, 1999, 1 page.</othercit>
</nplcit>
<category>cited by other</category>
</citation>
</references-cited>
<number-of-claims>5</number-of-claims>
<us-exemplary-claim>1</us-exemplary-claim>
<us-field-of-classification-search>
<classification-national>
<country>US</country>
<main-classification>330129</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>330141</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>330278</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>330279</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>330281</main-classification>
</classification-national>
</us-field-of-classification-search>
<figures>
<number-of-drawing-sheets>6</number-of-drawing-sheets>
<number-of-figures>6</number-of-figures>
</figures>
<us-related-documents>
<related-publication>
<document-id>
<country>US</country>
<doc-number>20060017507</doc-number>
<kind>A1</kind>
<date>20060126</date>
</document-id>
</related-publication>
</us-related-documents>
<parties>
<applicants>
<applicant sequence="001" app-type="applicant-inventor" designation="us-only">
<addressbook>
<last-name>Nodake</last-name>
<first-name>Yasuhiro</first-name>
<address>
<city>Ora-gun</city>
<country>JP</country>
</address>
</addressbook>
<nationality>
<country>JP</country>
</nationality>
<residence>
<country>JP</country>
</residence>
</applicant>
</applicants>
<agents>
<agent sequence="01" rep-type="attorney">
<addressbook>
<orgname>Osha Liang LLP</orgname>
<address>
<country>unknown</country>
</address>
</addressbook>
</agent>
</agents>
</parties>
<assignees>
<assignee>
<addressbook>
<orgname>Sanyo Electric Co., Ltd.</orgname>
<role>03</role>
<address>
<city>Osaka</city>
<country>JP</country>
</address>
</addressbook>
</assignee>
</assignees>
<examiners>
<primary-examiner>
<last-name>Nguyen</last-name>
<first-name>Khanh Van</first-name>
<department>2817</department>
</primary-examiner>
</examiners>
</us-bibliographic-data-grant>
<abstract id="abstract">
<p id="p-0001" num="0000">An automatic level control circuit comprises a gain controllable amplifier, a comparing and outputting circuit which compares a level of an output signal from the gain controllable amplifier with a reference level and outputs a result of comparison as a comparison result signal; an output signal restricting circuit which restricts the comparison result signal obtained in a period between one zero crossing point and another zero crossing point of the input signal such that a portion of the comparison result signal obtained within a predetermined output time is output, and an attack detecting and outputting circuit which restricts an output signal from the comparing and outputting circuit to the portion of the comparison output signal obtained within the predetermined time when the comparison result signal is output over the predetermined output time and outputs the restricted comparison result signal as an attack detection output signal.</p>
</abstract>
<drawings id="DRAWINGS">
<figure id="Fig-EMI-D00000" num="00000">
<img id="EMI-D00000" he="223.35mm" wi="247.73mm" file="US07298212-20071120-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00001" num="00001">
<img id="EMI-D00001" he="193.04mm" wi="141.48mm" orientation="landscape" file="US07298212-20071120-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00002" num="00002">
<img id="EMI-D00002" he="249.09mm" wi="133.10mm" orientation="landscape" file="US07298212-20071120-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00003" num="00003">
<img id="EMI-D00003" he="193.97mm" wi="133.01mm" orientation="landscape" file="US07298212-20071120-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00004" num="00004">
<img id="EMI-D00004" he="196.60mm" wi="144.10mm" orientation="landscape" file="US07298212-20071120-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00005" num="00005">
<img id="EMI-D00005" he="251.63mm" wi="152.48mm" orientation="landscape" file="US07298212-20071120-D00005.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00006" num="00006">
<img id="EMI-D00006" he="196.85mm" wi="155.70mm" orientation="landscape" file="US07298212-20071120-D00006.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
</drawings>
<description id="description">
<?BRFSUM description="Brief Summary" end="lead"?>
<p id="p-0002" num="0001">The entire disclosure of Japanese Patent Application No. 2004-216235 including the specification, claims, drawings, and abstract is incorporated herein by reference.</p>
<heading id="h-0001" level="1">CROSS REFERENCE TO RELATED APPLICATIONS</heading>
<p id="p-0003" num="0002">This application contains subject matter that may be related to that contained in the following U.S. application Ser. No. 11/187,185 filed on Jul. 22, 2005, and assigned to the assignee of the instant application: “Automatic Level Control Circuit With Improved Recovery Action”</p>
<heading id="h-0002" level="1">BACKGROUND OF THE INVENTION</heading>
<p id="p-0004" num="0003">1. Field of the Invention</p>
<p id="p-0005" num="0004">The present invention relates to an ALC (Automatic Level Control) circuit for automatically adjusting the gain of an amplifier to establish an output signal level from the amplifier at a predetermined level.</p>
<p id="p-0006" num="0005">2. Description of the Related Art</p>
<p id="p-0007" num="0006">Many electronic cameras, such as a digital camera, a digital video camera, or the like, have a sound recording capability to record audio input through a microphone and a moving image recording capability to record moving images. Such an electronic camera having a sound recording capability generally includes a circuit for automatically adjusting the gain of an amplifier installed in a stage prior to a recording stage in accordance with a level of an input audio signal when the sound is recorded.</p>
<p id="p-0008" num="0007"><figref idref="DRAWINGS">FIG. 6</figref> shows an automatic level control circuit in a digital detection system using a programmable gain amplifier. In the automatic level control circuit of <figref idref="DRAWINGS">FIG. 6</figref>, an input audio signal amplified by a programmable gain amplifier <b>10</b> is converted from an analog signal into a digital signal by an analog/digital converter (an A/D converter) <b>20</b> installed in a stage after the programmable gain amplifier <b>10</b>. Next, the level of the digital signal (an output signal level from the programmable gain amplifier <b>10</b>) is detected by a level detector <b>30</b> and then compared with a predetermined reference level. Based on an obtained comparison result, the gain of the programmable gain amplifier <b>10</b> is adjusted according to a control signal output from a gain controller <b>40</b> to the programmable gain amplifier <b>10</b> such that the output audio signal from the programmable gain amplifier <b>10</b> (i.e. the input audio signal having been amplified by the programmable gain amplifier <b>10</b>) is set to a predetermined audio signal level.</p>
<p id="p-0009" num="0008">More specifically, when the level of the digital signal detected by the level detector <b>30</b> is greater than the predetermined reference level, an operation for stepping down the gain of the programmable gain amplifier <b>10</b> by one step (an attack action) is performed, whereas an operation for stepping up the gain of the programmable gain amplifier <b>10</b> by one step (a recovery action) is performed when the level of the digital output signal is smaller than the predetermined reference level. By continuously repeating such adjustment to the gain achieved by the attack and recovery actions until the level of the digital signal reaches the predetermined reference level, the amplifier gain can be automatically controlled in accordance with the level of the input audio signal at the predetermined reference level, which enables the recording of audio input at a desired audio signal level.</p>
<p id="p-0010" num="0009">The attack action performed in the automatic level control circuit is generally completed in a short time to minimize an adverse effect that an audio waveform loses its accurate shape due to an excessively large signal beyond a dynamic range. Further, when discrete amplifier gain control is digitally performed in the automatic level control circuit described above, a step which could arise in an output waveform when the gain is modified may become a cause of noise. Therefore, to prevent the occurrence of such a step, modification to the gain achieved by the attack action is generally performed only at a zero crossing time.</p>
<p id="p-0011" num="0010">However, when the modification to the gain by the attack action is only performed at the zero crossing time, the attacking time varies depending on a signal frequency. Especially when the signal frequency is low and intervals of the zero crossing times are relatively long, an interval between times when the gain is modified is extended, thereby making it difficult to complete the attack action and resulting in a lengthy attacking time (a period of time to decrease the gain).</p>
<p id="p-0012" num="0011">As a countermeasure to prevent the attacking time from being lengthened, the decrease in gain achieved by the attack action can be computed irrespective of the zero crossing time, with only the operation of outputting a computed result to the programmable gain amplifier limited to performance only at the zero crossing time. However, such a measure will create a problem as described below.</p>
<p id="p-0013" num="0012">Typically, in the level detector, a comparison between the level of the digital signal and the predetermined reference level is performed at the timing of a clock signal, and, when the comparison result showing that the level of the digital signal is greater than the predetermined reference level is obtained a predetermined number of times in succession, a detection result indicating that the amplifier gain of the programmable gain amplifier should be reduced by one step is obtained. Then, when the above-described situation further continues for the same predetermined number of times, the detection result indicating that the amplifier gain should be reduced by one step is obtained again. At the subsequent zero crossing time, the total number of steps accumulated in the detection results obtained until then is output along with an attack action control signal to instruct reduction of the amplifier gain, to thereby reduce the amplifier gain by an amount equivalent to the total number of steps. When the detection result is obtained three times in a period from a zero crossing time to a subsequent zero crossing time, for example, the amplifier gain will be reduced by three steps at the subsequent zero crossing time.</p>
<p id="p-0014" num="0013">Here, when the processes of comparison and detection described above are performed in a situation where the interval between the zero crossing times is long, it is likely that the amplifier gain which would be optimally reduced only by one step in the first place is reduced by more than one steps due to accumulation of the number of steps in the detection results obtained until the next zero crossing time. If such excessive reduction is performed, it becomes necessary to perform a recovery action in a subsequent process, which results in unnatural operating conditions.</p>
<heading id="h-0003" level="1">SUMMARY OF THE INVENTION</heading>
<p id="p-0015" num="0014">The present invention provides an automatic level control circuit comprising a gain controllable amplifier which amplifies an input signal according to an established gain; a comparing and outputting circuit which compares a signal level output from the gain controllable amplifier with a reference level and outputs a compared result as a comparison result signal; an output signal restricting circuit which restricts the comparison result signal obtained between a zero crossing time and the subsequent zero crossing time of the input signal such that a portion of the comparison result signal obtained within a predetermined output time period is output; and an attack detecting and outputting circuit which restricts an output signal from the comparing and outputting circuit to the portion of the comparison result signal obtained within the predetermined output time period when the comparison result signal is output over the predetermined output time period, and outputs the restricted comparison result signal as an attack detection output signal.</p>
<?BRFSUM description="Brief Summary" end="tail"?>
<?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?>
<description-of-drawings>
<heading id="h-0004" level="1">BRIEF DESCRIPTION OF THE DRAWINGS</heading>
<p id="p-0016" num="0015">Preferred embodiments of the present invention will be described in detail based on the following figures, wherein:</p>
<p id="p-0017" num="0016"><figref idref="DRAWINGS">FIG. 1</figref> is a schematic diagram showing a configuration of an automatic level control circuit in a digital detection system using a programmable gain amplifier according to a first embodiment of the present invention;</p>
<p id="p-0018" num="0017"><figref idref="DRAWINGS">FIG. 2</figref> is a schematic diagram showing a configuration of an attack detecting circuit mounted on a level detector in the automatic level control circuit of <figref idref="DRAWINGS">FIG. 1</figref>;</p>
<p id="p-0019" num="0018"><figref idref="DRAWINGS">FIG. 3</figref> is a diagram showing a relationship among a comparison result signal, a mask signal, an attack detection signal, and an amplified input audio signal in the attack detecting circuit of <figref idref="DRAWINGS">FIG. 2</figref>;</p>
<p id="p-0020" num="0019"><figref idref="DRAWINGS">FIG. 4</figref> is a schematic diagram showing a configuration of an automatic level control circuit in a digital detection system using a programmable gain amplifier according to a second embodiment of the present invention;</p>
<p id="p-0021" num="0020"><figref idref="DRAWINGS">FIG. 5</figref> is a schematic diagram showing a configuration of the attack detecting circuit installed in the level detector in the automatic level control circuit of <figref idref="DRAWINGS">FIG. 4</figref>, and <figref idref="DRAWINGS">FIG. 6</figref> is a schematic diagram showing a configuration of an automatic level control circuit in digital detection system using a conventional programmable gain amplifier.</p>
</description-of-drawings>
<?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?>
<?DETDESC description="Detailed Description" end="lead"?>
<heading id="h-0005" level="1">DESCRIPTION OF THE PREFERRED EMBODIMENTS</heading>
<p id="p-0022" num="0021">Referring now to the drawings, a first embodiment of the present invention will be described below.</p>
<p id="p-0023" num="0022"><figref idref="DRAWINGS">FIG. 1</figref> is a circuit diagram of an automatic level control circuit according to the first embodiment of the present invention, and <figref idref="DRAWINGS">FIG. 2</figref> is a schematic diagram showing a configuration of an attack detecting circuit installed in a level detector of the automatic level control circuit depicted in <figref idref="DRAWINGS">FIG. 1</figref>. Further, <figref idref="DRAWINGS">FIG. 3</figref> shows a relationship among a comparison result signal, a mask signal, an attack detection signal, and an amplified input audio signal in the attack detecting circuit shown in <figref idref="DRAWINGS">FIG. 2</figref>. In <figref idref="DRAWINGS">FIG. 1</figref>, components corresponding to those in the automatic level control circuit of <figref idref="DRAWINGS">FIG. 6</figref> are identified by the same reference numerals as those used in <figref idref="DRAWINGS">FIG. 6</figref>.</p>
<p id="p-0024" num="0023">In the automatic level control circuit of <figref idref="DRAWINGS">FIG. 1</figref>, a zero cross detector <b>50</b> and an A/D converter (ADC) <b>20</b> are connected in a stage after a programmable gain amplifier <b>10</b>. The A/D converter <b>20</b> converts an input audio signal (an analog signal) which has been amplified in the programmable gain amplifier <b>10</b> into a digital signal and outputs the resultant digital signal to a level detector <b>31</b>.</p>
<p id="p-0025" num="0024">The level detector <b>31</b> detects the level of the digital signal (a signal level output from the programmable gain amplifier <b>10</b>) and compares the detected level with a predetermined reference level (an attack reference level). When an obtained comparison result shows that the detected level is greater than the attack reference level, a detection result indicating one-step reduction of the gain of the programmable gain amplifier <b>10</b> is obtained just as in the related art. Based on the obtained detection result, a control signal, to adjust the gain of the programmable gain amplifier <b>10</b> such that the audio signal output from the programmable gain amplifier <b>10</b> is set at a predetermined audio signal level, is output from a gain controller <b>40</b> to a latch circuit <b>60</b>. When the level of the digital signal detected in the level detector <b>31</b> is greater than the predetermined reference level (the attack reference level), for example, a control signal to provide an instruction for reducing the gain of the programmable gain amplifier <b>10</b> by an amount equivalent to the number of steps corresponding to the detection results, in other words, a control signal to provide an instruction for performing the attack action is output.</p>
<p id="p-0026" num="0025">For example, the gain controller <b>40</b> in which a predetermined coefficient is prestored retrieves the detection result stored in a comparator <b>310</b> at every fixed point in clock cycle, and performs a subtraction of a value computed by multiplying the coefficient by 1 when the level output from the A/D converter <b>20</b> is greater than the reference level, to thereby determine the control signal to adjust the gain of the programmable gain amplifier <b>10</b>. Specifically, as described in the above related art example, the gain of the programmable gain amplifier <b>10</b> is increasingly changed when the output level thereof is low, while the gain is decreasingly changed when the output level is high, thereby controlling the output level so as to be set at a predetermined value. At the attacking time, because the gain of the programmable gain amplifier <b>10</b> is established according to the input signal level in a previous stage and a value of the control signal corresponding to the established gain is specified, the value of the control signal will be reduced. More specifically, taking the above-described coefficient as one step, the value of the control signal is reduced, based on the comparison result obtained at a timing of a fixed clock, by an amount equivalent to the number of attack detections multiplied by the coefficient.</p>
<p id="p-0027" num="0026">On the other hand, the zero cross detector <b>50</b> detects zero crossing of the input audio signal (analog signal) amplified in the programmable gain amplifier <b>10</b> and outputs a zero cross signal of a detection result to both the level detector <b>31</b> and the latch circuit <b>60</b> as an H-level signal.</p>
<p id="p-0028" num="0027">When the zero cross signal (H level) is input to the latch circuit <b>60</b>, the output signal from the gain controller <b>40</b> is retrieved in the latch circuit <b>60</b>. Then, output from the latch circuit <b>60</b> is provided to the programmable gain amplifier <b>10</b> as the control signal which determines the gain of the programmable gain amplifier <b>10</b>, and the attack action for reducing the gain of the programmable gain amplifier <b>10</b> according to the control signal is performed. Because the latch circuit <b>60</b> does not retrieve another signal unless the zero cross signal (H level) is further input into the latch circuit <b>60</b>, the condition of the control signal is maintained.</p>
<p id="p-0029" num="0028">After the zero cross signal (H level) is again input to the latch circuit <b>60</b>, an attack action control signal which is input from the gain controller <b>40</b> to the latch circuit <b>60</b> simultaneously with the input of the zero cross signal is output via the latch circuit <b>60</b> to the programmable gain amplifier <b>10</b>, and then the attack action for reducing the gain of the programmable gain amplifier <b>10</b> is initiated.</p>
<p id="p-0030" num="0029">In the present embodiment, the level detector <b>31</b> includes an attack detecting circuit <b>300</b> for restricting the amount of reduction in gain achieved at the zero crossing time to prevent excessive reduction of the gain of the programmable gain amplifier <b>10</b>.</p>
<p id="p-0031" num="0030"><figref idref="DRAWINGS">FIG. 2</figref> shows a configuration of the attack detecting circuit <b>300</b> installed in the level detector <b>31</b> of the automatic level control circuit shown in <figref idref="DRAWINGS">FIG. 1</figref>. In the level detector <b>31</b>, the comparator <b>310</b> compares the level of the digital signal S<b>1</b> received from the A/D converter <b>20</b> with the level of the reference level signal S<b>2</b> (a predetermined reference level) at a timing according to a clock signal S<b>3</b>. In the attack action, a comparison result signal S<b>4</b> indicating a comparison result that the level of the digital signal S<b>1</b> is greater than the predetermined reference level is output, as shown in <figref idref="DRAWINGS">FIG. 3</figref>, from the comparator <b>310</b> and supplied to an AND circuit <b>340</b>.</p>
<p id="p-0032" num="0031">Next, the comparison result signal S<b>4</b> output from the comparator <b>310</b> is counted by a counter <b>320</b> at a timing according to a clock signal S<b>3</b>. More specifically, when the level of the output signal from the A/D converter <b>20</b> is higher than the reference level, the comparison signal S<b>4</b> from the comparator <b>310</b> is at the H level, and the comparison signal S<b>4</b> is at the H level on the rising edge of the clock, the counter <b>320</b> is incremented by one. If a count of comparison results which is increased at this time reaches the number of comparison results equivalent to the predetermined maximum steps in which the gain can be changed at the zero crossing time, an SR flip flop <b>330</b> is set. For example, the counter <b>320</b> may be configured to output the H level when the counter <b>320</b> is incremented up to the count of comparison results equivalent to the maximum steps.</p>
<p id="p-0033" num="0032">When the SR flip flop <b>330</b> is set according to the output at the H level from the counter <b>320</b>, the mask signal S<b>5</b> to be output from the SR flip flop <b>330</b> becomes H level as shown in <figref idref="DRAWINGS">FIG. 3</figref>, and an inverted signal of the mask signal S<b>5</b> is input in the AND circuit <b>340</b>. Thus, both the comparison result signal S<b>4</b> from the comparator <b>310</b> and the inverted signal of the mask signal S<b>5</b> are input into the AND circuit <b>340</b> in which an AND between the comparison result signal S<b>4</b> and the inverted signal of the mask signal S<b>5</b> is obtained. Then, the AND circuit <b>340</b> outputs, as a detection result, the attack detection output signal S<b>6</b> as shown in <figref idref="DRAWINGS">FIG. 3</figref> to the gain controller <b>40</b>.</p>
<p id="p-0034" num="0033">It should be noted that the SR flip flop <b>330</b> is configured to be reset by an input of an edge of the zero cross signal (H level) from the zero cross detector <b>50</b>. Accordingly, the SR flip flop <b>330</b> is reset at the subsequent zero crossing time, and, from then on, the normal attack action is repeated until the number of counts registered in the counter <b>320</b> reaches the number of comparison results equivalent to the predetermined maximum steps. At the time when the count of comparison results equivalent to the predetermined maximum steps is attained, as described above, the attack detection output signal S<b>6</b> masked by the mask signal S<b>5</b> is output to the gain controller <b>40</b> as the detection result to restrict the attack action. Further, the number of counts is reset by the zero cross signal in the counter <b>320</b>.</p>
<p id="p-0035" num="0034">As described above, according to the attack detecting circuit <b>300</b> of <figref idref="DRAWINGS">FIG. 2</figref>, when the number of counts registered in the counter <b>320</b> exceeds a predetermined value during an interval between a zero crossing point and a subsequent zero crossing point, the flip flop <b>330</b> is set to prohibit the output of the comparison signal S<b>4</b> from the AND circuit <b>340</b>. Specifically, when the number of counts in the counter <b>320</b> reaches the predetermined count of comparison results equivalent to the gain changeable maximum steps, the attack detection output signal enters the masked state, and is shifted to an L level. In other words, the gain controller <b>40</b> cannot detect the attack detection results numbering greater than the predetermined number of the gain changeable maximum steps at the zero crossing time. By restriction the detection results in such a manner, the number of steps in which the gain can be reduced according to the attack action control signal output from the gain controller <b>40</b> is limited to within the number of above-described maximum steps irrespective of signal frequencies and intervals between zero crossing points, to thereby prevent excessive reduction in gain of the programmable gain amplifier <b>10</b>.</p>
<p id="p-0036" num="0035">In this example, the comparison result signal in the comparator <b>310</b> is output from the AND circuit <b>340</b> without being further processed. Accordingly, the gain controller <b>40</b> evaluates the comparison result signal with respect to a predetermined clock cycle, and reduces the gain of the programmable gain amplifier <b>10</b> on a step-by-step basis in a case where the attacking time is indicated by the result of evaluation. Here, it is preferred that the clock in the counter <b>320</b> be identical to that in the gain controller <b>40</b>, which allows the same setting of the predetermined maximum number of gain changeable steps in both the level detector <b>31</b> and the gain controller <b>40</b>. However, as long as a fixed relationship can be maintained between the settings, the two clocks may differ from each other.</p>
<p id="p-0037" num="0036">Further, by using, as the counter <b>320</b>, a counter having the maximum count value equal to the number of maximum steps, the count registered in the counter <b>320</b> can directly represent the number of steps in which the gain is changed at the zero crossing time. Here, the count in the counter <b>320</b> may be supplied to the gain controller <b>40</b>, and the gain of the programmable gain amplifier <b>10</b> may be changed using a value obtained by multiplying the count by a counting value for one step at the attacking time in the gain controller <b>40</b>.</p>
<p id="p-0038" num="0037">After the H level of the attack detection output signal S<b>6</b> output from the AND circuit <b>340</b> is thus input in the gain controller <b>40</b>, a control signal to provide the instruction for reducing the gain of the programmable gain amplifier <b>10</b> by the amount equivalent to the steps corresponding to the number of obtained detection results (instruction for performing the attack action) is output, based on the attack detection output signal S<b>6</b> of the detection result, from the gain controller <b>40</b> to the latch circuit <b>60</b>. Then, in the latch circuit <b>60</b>, the above-described process is performed in accordance with the input of the zero cross signal.</p>
<p id="p-0039" num="0038">As described above, in the automatic level control circuit according to the first embodiment of the present invention, an attenuation amount of the gain achieved by the attack action at the zero crossing time is restricted such that the gain cannot be changed beyond the predetermined number of maximum steps. Therefore, with such a restriction in place, excessive reduction in gain of the programmable gain amplifier <b>10</b> can be prevented, enabling the attack action to perform suitable gain adjustment.</p>
<p id="p-0040" num="0039">Although the present invention has been described with reference to the first embodiment, it will be understand that the configuration described is provided as one example, and that any circuit configurations capable of realizing the technical concept of restricting the attack action when the count of comparison results reaches a value equivalent to the predetermined number of maximum steps may be used to realize the present invention.</p>
<p id="p-0041" num="0040">Further, while the automatic level control circuit according to the first embodiment of the present invention has a structure in which an analog output from the programmable gain amplifier <b>10</b> is digitally converted for level detection, and the analog output is provided to the stages after the programmable gain amplifier <b>10</b>, the structure of the automatic level control circuit, however, is not limited to the above-described structure. For example, the analog output may be provided from the programmable gain amplifier <b>10</b> only to the A/D converter <b>20</b> in which the analog signal is converted into the digital signal, and the digital signal converted in the A/D converter <b>20</b> may be output to the level detector <b>31</b> in addition to providing digital output to the stages after the A/D converter <b>20</b>.</p>
<p id="p-0042" num="0041">Further, even an automatic level control circuit in which the analog signal from the programmable gain amplifier <b>10</b> is input in the level detector <b>31</b><i>a </i>as shown in <figref idref="DRAWINGS">FIG. 4</figref>, for example, can produce effects similar to those obtained by the automatic level control circuit according to the first embodiment.</p>
<p id="p-0043" num="0042"><figref idref="DRAWINGS">FIG. 4</figref> shows a schematic configuration of an automatic level control circuit in a digital detection system using a programmable gain amplifier according to a second embodiment of the present invention, and <figref idref="DRAWINGS">FIG. 5</figref> shows a schematic configuration of an attack detecting circuit provided to the level detector in the automatic level control circuit of <figref idref="DRAWINGS">FIG. 4</figref>. The automatic level control circuit of <figref idref="DRAWINGS">FIG. 4</figref> includes, in the level detector <b>31</b><i>a</i>, an attack detecting circuit <b>300</b><i>a </i>which restricts the attenuation amount of the gain achieved at the zero crossing time, to thereby prevent excessive reduction in gain of the programmable gain amplifier <b>10</b>.</p>
<p id="p-0044" num="0043">In the level detector <b>31</b><i>a</i>, a first voltage comparator <b>310</b><i>a </i>compares the level of input analog voltage with a predetermined reference voltage level (reference level on the positive side) at a timing according to the clock signal. When the level of input analog voltage is found to be greater than the reference level on the positive side, a comparison result signal (of H level) as shown in <figref idref="DRAWINGS">FIG. 3</figref> indicating the comparison result is output from the first voltage comparator <b>310</b><i>a</i>. Similarly, level comparison between the level of input analog voltage and a predetermined reference voltage level (a reference level on the negative side) is performed in a second voltage comparator <b>310</b><i>b </i>at the timing according to the clock signal. When the level of the input analog voltage is found to be smaller than the reference level, the comparison result signal (of H level) as shown in <figref idref="DRAWINGS">FIG. 3</figref> indicating the comparison result is output from the second voltage comparator <b>310</b><i>b</i>. The comparison result signals (H level) output from the first and second voltage comparators <b>310</b><i>a </i>and <b>310</b><i>b </i>are input into an OR circuit <b>350</b>, and the comparison result signal obtained from the OR circuit <b>350</b> (H level) is input into the AND circuit <b>340</b><i>a. </i></p>
<p id="p-0045" num="0044">Further, in the counter <b>320</b><i>a</i>, the comparison result signal (H level) output from the OR circuit <b>350</b> is counted at a timing according to the clock signal. When the count of the comparison results which is incremented at this time reaches the number of comparison results equivalent to the predetermined maximum number of steps in which the gain can be changed at the zero crossing time, the SR flip flop <b>330</b><i>a </i>is set. After the SR flip flop <b>330</b><i>a </i>is set, the mask signal output from the SR flip flop <b>330</b><i>a </i>becomes H level, as in the case illustrated in <figref idref="DRAWINGS">FIG. 3</figref>, and an inverted output of the mask signal is input in the AND circuit <b>340</b><i>a</i>. Thus, the comparison result signals from the first and the second voltage comparators <b>310</b><i>a </i>and <b>310</b><i>b </i>and the inverted output of the mask signal are input into the AND circuit <b>340</b><i>a </i>in which an AND among the comparison result signals and the inverted output of the mask signal is obtained. Then, the attack detection output signal similar to that of <figref idref="DRAWINGS">FIG. 3</figref> is output as a detection result to the gain controller <b>40</b>.</p>
<p id="p-0046" num="0045">It should be noted that the SR flip flop <b>330</b><i>a </i>is configured to be reset when the edge of the zero cross signal (H level) is input from the zero cross detector <b>50</b>. Accordingly, the SR flip flop <b>330</b> is reset at the subsequent zero crossing time, and, from then on, the normal attack action is repeated until the number of counts registered in the counter <b>320</b><i>a </i>reaches the count of comparison results equivalent to the predetermined maximum steps. When the count of comparison results equivalent to the predetermined maximum steps is attained, similarly as in the previous example, the attack detection output signal masked by the mask signal is output, as the detection result, to the gain controller <b>40</b>, thereby restricting the attack action.</p>
<p id="p-0047" num="0046">By configuring the attack detecting circuit <b>300</b><i>a </i>as described above, even an automatic level control circuit having a structure in which an analog signal from the programmable gain amplifier <b>10</b> is input into the level detector <b>31</b><i>a </i>can produce the effects similar to those obtained by the automatic level control circuit according to the first embodiment of the present invention.</p>
<?DETDESC description="Detailed Description" end="tail"?>
</description>
<us-claim-statement>What is claimed is:</us-claim-statement>
<claims id="claims">
<claim id="CLM-00001" num="00001">
<claim-text>1. An automatic level control circuit comprising:
<claim-text>a gain controllable amplifier which amplifies an input signal according to an established gain;</claim-text>
<claim-text>a comparing and outputting circuit which compares a level of an output signal from the gain controllable amplifier with a reference level, and outputs a result of comparison as a comparison result signal;</claim-text>
<claim-text>a circuit which generates a mask signal which is used, when the comparison result signal obtained in a period between one zero crossing point and another zero crossing point of the input signal is output over a predetermined output time, for restricting the comparison result signal output during the over period; and</claim-text>
<claim-text>an outputting circuit of an attack detecting and outputting signal which, when the comparison result signal is output over the predetermined output time, restricts the comparison result signal output from the comparing and outputting circuit during the period over the predetermined output period and outputs the restricted comparison result signal as an attack detecting and outputting signal in accordance with the mask signal, and which, during the predetermined output period, outputs the comparison result signal as an attack detecting and outputting signal.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00002" num="00002">
<claim-text>2. An automatic level control circuit according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein:
<claim-text>the gain controllable amplifier changes the gain in a stepwise manner, and</claim-text>
<claim-text>the circuit which generates a mask signal stores the number of gain changeable steps in which the gain is changed in the period between the zero crossing points, and generates a mask signal which is used for restricting output of the comparison result signal exceeding an amount corresponding to a prestored number of gain changeable steps is removed.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00003" num="00003">
<claim-text>3. An automatic level control circuit according to <claim-ref idref="CLM-00002">claim 2</claim-ref>, wherein:
<claim-text>the circuit which generates a mask signal comprises:</claim-text>
<claim-text>a counter which counts the comparison result signal at a timing according to a clock signal, and</claim-text>
<claim-text>a flip flop which is set according to a signal from the counter when the number of counts registered in the counter reaches the number of comparison results equivalent to the number of gain changeable steps in which the gain is changed at a zero crossing time, to thereby output a mask signal, and</claim-text>
<claim-text>wherein the comparison result signal in which the portion of the comparison result signal exceeding the amount equivalent to the number of gain changeable steps is masked by the mask signal is output.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00004" num="00004">
<claim-text>4. An automatic level control circuit according to <claim-ref idref="CLM-00003">claim 3</claim-ref>, wherein the flip flop is reset by an input of a zero cross signal at the zero crossing point of the input signal.</claim-text>
</claim>
<claim id="CLM-00005" num="00005">
<claim-text>5. An automatic level control circuit according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the outputting circuit of an attack detecting and outputting circuit is a logic circuit for obtaining an AND between the comparison result signal and an inverted signal of the mask signal.</claim-text>
</claim>
</claims>
</us-patent-grant>
