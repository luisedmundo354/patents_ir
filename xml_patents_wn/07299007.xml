<us-patent-grant lang="EN" dtd-version="v4.2 2006-08-23" file="US07299007-20071120.XML" status="PRODUCTION" id="us-patent-grant" country="US" date-produced="20071106" date-publ="20071120">
<us-bibliographic-data-grant>
<publication-reference>
<document-id>
<country>US</country>
<doc-number>07299007</doc-number>
<kind>B2</kind>
<date>20071120</date>
</document-id>
</publication-reference>
<application-reference appl-type="utility">
<document-id>
<country>US</country>
<doc-number>09775194</doc-number>
<date>20010201</date>
</document-id>
</application-reference>
<us-application-series-code>09</us-application-series-code>
<us-term-of-grant>
<us-term-extension>644</us-term-extension>
</us-term-of-grant>
<classifications-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>H</section>
<class>04</class>
<subclass>B</subclass>
<main-group>7</main-group>
<subgroup>00</subgroup>
<symbol-position>F</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20071120</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
</classifications-ipcr>
<classification-national>
<country>US</country>
<main-classification>455 412</main-classification>
<further-classification>4555521</further-classification>
</classification-national>
<invention-title id="d0e53">Mobile computing and communication</invention-title>
<references-cited>
<citation>
<patcit num="00001">
<document-id>
<country>US</country>
<doc-number>5717737</doc-number>
<kind>A</kind>
<name>Doviak et al.</name>
<date>19980200</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00002">
<document-id>
<country>US</country>
<doc-number>5796727</doc-number>
<kind>A</kind>
<name>Harrison et al.</name>
<date>19980800</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00003">
<document-id>
<country>US</country>
<doc-number>5915214</doc-number>
<kind>A</kind>
<name>Reece et al.</name>
<date>19990600</date>
</document-id>
</patcit>
<category>cited by other</category>
<classification-national><country>US</country><main-classification>455406</main-classification></classification-national>
</citation>
<citation>
<patcit num="00004">
<document-id>
<country>US</country>
<doc-number>5970062</doc-number>
<kind>A</kind>
<name>Bauchot</name>
<date>19991000</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00005">
<document-id>
<country>US</country>
<doc-number>6018654</doc-number>
<kind>A</kind>
<name>Valentine et al.</name>
<date>20000100</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00006">
<document-id>
<country>US</country>
<doc-number>6292833</doc-number>
<kind>B1</kind>
<name>Liao et al.</name>
<date>20010900</date>
</document-id>
</patcit>
<category>cited by other</category>
<classification-national><country>US</country><main-classification>709229</main-classification></classification-national>
</citation>
<citation>
<patcit num="00007">
<document-id>
<country>US</country>
<doc-number>6415220</doc-number>
<kind>B1</kind>
<name>Kovacs</name>
<date>20020700</date>
</document-id>
</patcit>
<category>cited by other</category>
<classification-national><country>US</country><main-classification>701207</main-classification></classification-national>
</citation>
<citation>
<patcit num="00008">
<document-id>
<country>US</country>
<doc-number>6658264</doc-number>
<kind>B1</kind>
<name>Irvin</name>
<date>20031200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>4555521</main-classification></classification-national>
</citation>
<citation>
<patcit num="00009">
<document-id>
<country>US</country>
<doc-number>2001/0052849</doc-number>
<kind>A1</kind>
<name>Jones, Jr.</name>
<date>20011200</date>
</document-id>
</patcit>
<category>cited by other</category>
<classification-national><country>US</country><main-classification>3405721</main-classification></classification-national>
</citation>
<citation>
<patcit num="00010">
<document-id>
<country>US</country>
<doc-number>2002/0032855</doc-number>
<kind>A1</kind>
<name>Neves et al.</name>
<date>20020300</date>
</document-id>
</patcit>
<category>cited by other</category>
<classification-national><country>US</country><main-classification>713154</main-classification></classification-national>
</citation>
<citation>
<patcit num="00011">
<document-id>
<country>US</country>
<doc-number>2002/0077060</doc-number>
<kind>A1</kind>
<name>Lehikoinen et al.</name>
<date>20020600</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>455 41</main-classification></classification-national>
</citation>
<citation>
<patcit num="00012">
<document-id>
<country>US</country>
<doc-number>2002/0078148</doc-number>
<kind>A1</kind>
<name>Hinde et al.</name>
<date>20020600</date>
</document-id>
</patcit>
<category>cited by other</category>
<classification-national><country>US</country><main-classification>709203</main-classification></classification-national>
</citation>
<citation>
<patcit num="00013">
<document-id>
<country>US</country>
<doc-number>2002/0095333</doc-number>
<kind>A1</kind>
<name>Jokinen et al.</name>
<date>20020700</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>705 14</main-classification></classification-national>
</citation>
<citation>
<patcit num="00014">
<document-id>
<country>US</country>
<doc-number>2003/0036350</doc-number>
<kind>A1</kind>
<name>Jonsson et al.</name>
<date>20030200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>455 41</main-classification></classification-national>
</citation>
<citation>
<patcit num="00015">
<document-id>
<country>WO</country>
<doc-number>WO99/60782</doc-number>
<date>19991100</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<nplcit num="00016">
<othercit>Chinese office action dated Dec. 3, 2004.</othercit>
</nplcit>
<category>cited by other</category>
</citation>
</references-cited>
<number-of-claims>4</number-of-claims>
<us-exemplary-claim>1</us-exemplary-claim>
<us-field-of-classification-search>
<classification-national>
<country>US</country>
<main-classification>455 412</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>455 413</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>4555521</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>4555523</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>4554261</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>4555531</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>705 14</main-classification>
</classification-national>
</us-field-of-classification-search>
<figures>
<number-of-drawing-sheets>17</number-of-drawing-sheets>
<number-of-figures>25</number-of-figures>
</figures>
<us-related-documents>
<related-publication>
<document-id>
<country>US</country>
<doc-number>20020101993</doc-number>
<kind>A1</kind>
<date>20020801</date>
</document-id>
</related-publication>
</us-related-documents>
<parties>
<applicants>
<applicant sequence="001" app-type="applicant-inventor" designation="us-only">
<addressbook>
<last-name>Eskin</last-name>
<first-name>Eleazar</first-name>
<address>
<city>Santa Monica</city>
<state>CA</state>
<country>US</country>
</address>
</addressbook>
<nationality>
<country>omitted</country>
</nationality>
<residence>
<country>US</country>
</residence>
</applicant>
</applicants>
<agents>
<agent sequence="01" rep-type="attorney">
<addressbook>
<orgname>Fish &amp; Richardson P.C.</orgname>
<address>
<country>unknown</country>
</address>
</addressbook>
</agent>
</agents>
</parties>
<assignees>
<assignee>
<addressbook>
<orgname>ACK Venture Holdings, LLC</orgname>
<role>02</role>
<address>
<city>Westport</city>
<state>CT</state>
<country>US</country>
</address>
</addressbook>
</assignee>
</assignees>
<examiners>
<primary-examiner>
<last-name>Nguyen</last-name>
<first-name>Lee</first-name>
<department>2618</department>
</primary-examiner>
</examiners>
</us-bibliographic-data-grant>
<abstract id="abstract">
<p id="p-0001" num="0000">An application development platform enables applications to be created easily for, e.g., mobile devices that have short-range wireless communication capability. The development platform exposes a carefully chosen core set of services through an API. Each of the applications can broadcast its services to local and remote devices. Message delivery between devices is guaranteed even for messages that cannot be delivered directly by local short-range wireless transmission. Message delivery through other channels, including the Internet, can occur transparently to the user. Each device can be associated with an “owner”, which can be a person or a entity. Services can be customized to the owner based on stored information that maps owners to devices. Information associated with each of the owners of devices can be stored centrally and used in connection with providing the services at each of the mobile devices. Virtual GPS capabilities can be provided for mobile devices that do not have GPS chips.</p>
</abstract>
<drawings id="DRAWINGS">
<figure id="Fig-EMI-D00000" num="00000">
<img id="EMI-D00000" he="207.43mm" wi="157.14mm" file="US07299007-20071120-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00001" num="00001">
<img id="EMI-D00001" he="230.38mm" wi="158.07mm" file="US07299007-20071120-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00002" num="00002">
<img id="EMI-D00002" he="242.32mm" wi="152.99mm" file="US07299007-20071120-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00003" num="00003">
<img id="EMI-D00003" he="202.69mm" wi="134.37mm" file="US07299007-20071120-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00004" num="00004">
<img id="EMI-D00004" he="240.03mm" wi="161.54mm" file="US07299007-20071120-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00005" num="00005">
<img id="EMI-D00005" he="203.45mm" wi="156.97mm" file="US07299007-20071120-D00005.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00006" num="00006">
<img id="EMI-D00006" he="223.35mm" wi="155.79mm" file="US07299007-20071120-D00006.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00007" num="00007">
<img id="EMI-D00007" he="238.51mm" wi="146.39mm" file="US07299007-20071120-D00007.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00008" num="00008">
<img id="EMI-D00008" he="228.43mm" wi="151.98mm" file="US07299007-20071120-D00008.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00009" num="00009">
<img id="EMI-D00009" he="234.19mm" wi="163.15mm" orientation="landscape" file="US07299007-20071120-D00009.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00010" num="00010">
<img id="EMI-D00010" he="244.69mm" wi="157.65mm" file="US07299007-20071120-D00010.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00011" num="00011">
<img id="EMI-D00011" he="220.64mm" wi="160.78mm" file="US07299007-20071120-D00011.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00012" num="00012">
<img id="EMI-D00012" he="219.03mm" wi="161.97mm" orientation="landscape" file="US07299007-20071120-D00012.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00013" num="00013">
<img id="EMI-D00013" he="213.19mm" wi="171.28mm" file="US07299007-20071120-D00013.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00014" num="00014">
<img id="EMI-D00014" he="219.29mm" wi="150.96mm" orientation="landscape" file="US07299007-20071120-D00014.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00015" num="00015">
<img id="EMI-D00015" he="206.25mm" wi="155.79mm" orientation="landscape" file="US07299007-20071120-D00015.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00016" num="00016">
<img id="EMI-D00016" he="201.93mm" wi="158.41mm" orientation="landscape" file="US07299007-20071120-D00016.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00017" num="00017">
<img id="EMI-D00017" he="235.80mm" wi="165.86mm" orientation="landscape" file="US07299007-20071120-D00017.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
</drawings>
<description id="description">
<?BRFSUM description="Brief Summary" end="lead"?>
<heading id="h-0001" level="1">BACKGROUND</heading>
<p id="p-0002" num="0001">This invention relates to mobile computing and communication.</p>
<p id="p-0003" num="0002">Personal digital assistants, mobile telephones, and other mobile devices offer a wide range of computing and communication capabilities. To provide these capabilities, mobile devices have hardware complements that may include microprocessors, memories, displays that are in some cases touch sensitive, microphones, speakers, keys, and other user input and output mechanisms.</p>
<p id="p-0004" num="0003">A variety of specific functions are often provided on mobile devices, including data entry, handwriting recognition, speech recognition, voice and data communication, memo writing, calendars, word processors, spreadsheets, to-do lists, and address books. These functions are implemented in software or firmware applications that are stored on the devices and use the features of an operating system such as Microsoft Windows CE or Palm OS that runs on and controls the hardware components of the mobile devices.</p>
<p id="p-0005" num="0004">Mobile devices that are capable of wireless communication typically comply with one or more of the standard wireless communications protocols such as Bluetooth and the Wireless Application Protocol (WAP).</p>
<p id="p-0006" num="0005">Bluetooth, for example, uses radio frequency transmission for relatively short-range communication. Bluetooth capabilities may be implemented in a small microchip that is incorporated into the mobile or other device.</p>
<p id="p-0007" num="0006">To create an application for Bluetooth-capable devices, a developer typically writes custom software that implements the particular features of the application. A piece of custom software must be written for each of the devices that are involved in performing functions of the application on either end of each Bluetooth communication link. Each piece of custom software is written to conform to the peculiar hardware and operating system characteristics of the device on which it will run.</p>
<heading id="h-0002" level="1">SUMMARY</heading>
<p id="p-0008" num="0007">The invention enables a fundamental shift in the way developers can enable users of mobile devices to interact with users of other mobile devices and users of stationary devices that have wireless capability.</p>
<p id="p-0009" num="0008">In general, in one aspect, the invention features a method that includes running client modules on mobile devices, running a server module on a server that is accessible through a communication network, and running link modules on link devices that have communication channels to the mobile devices and are capable of accessing the server through the communication network. The client, server, and link modules provide core services through application programming interfaces to applications running on the mobile devices, the server, and the link devices.</p>
<p id="p-0010" num="0009">Implementations of the invention may include one or more of the following features.</p>
<p id="p-0011" num="0010">Service applications also run on the client modules to enable users of the mobile devices to manage the core services. The core services include interaction with short-range wireless transceivers in the mobile devices. A mobile device operating system is also running on the mobile devices and the client modules use services of the operating system. The mobile devices include personal digital assistants or mobile phones. The core services include at least one of the following: broadcast of information about real-world services; interaction with a wireless transceiver in the mobile device; guaranteed message delivery; and encryption.</p>
<p id="p-0012" num="0011">In general, in another aspect, the invention features a method that includes running client modules on wireless devices, the client modules providing core services through application programming interfaces to applications running on the devices, at least some of the applications being associated with real-world services that are provided by individuals or enterprises,</p>
<p id="p-0013" num="0012">Implementations of the invention include one or more of the following features. Information is maintained identifying relationships between each of the real-world services and at least one of the devices through which the service is provided, the core services providing a sharing among the devices of the information identifying the relationships between the real-world services and the devices. Information about the services available through each of the devices is broadcast by the core services to the other devices. The real-world services associated with the devices are registered by the core services. The real-world services include at least one of communication services, computational services, commercial services, or governmental services.</p>
<p id="p-0014" num="0013">In general, in another aspect, the invention features maintaining in a wireless device a list of real-world services that are available from a user of the device through an application running on the device; and through a wireless communication channel, broadcasting information from the device indicative of the available real-world services.</p>
<p id="p-0015" num="0014">Implementations of the invention include one or more of the following features. The information is broadcast periodically. Another wireless device that receives the broadcast information accesses one of the available real-world services.</p>
<p id="p-0016" num="0015">In general, in another aspect, the invention features a method that includes running client modules on mobile devices that are associated with identified users, running a server module on a server that is accessible on a communication network, and running link modules on link devices that have communication links to the mobile devices and are capable of accessing the server through the communication network,</p>
<p id="p-0017" num="0016">Implementations of the invention include one or more of the following features. A message is received from a user of one of the mobile devices through one of the applications running on the device, the message being directed to another user of an application running on another one of the mobile devices, and the message is delivered to the other user through the Internet. The message is sent through the links and the server. The client module running on the device from which the message is sent determines whether the target mobile device is within short-range wireless distance, and, if not, the client module forwards the message to one of the link modules. The link module forwards the message to the server through the Internet. The server module determines the location of the target mobile device and identifies a communication channel through which to forward the message to the other user.</p>
<p id="p-0018" num="0017">In general, in another aspect, the invention features a method that includes maintaining a list of short-range wireless devices within range of a first short-range wireless device; and transmitting a message from an identified user of the first device to a second identified user of a second wireless device over a communication medium, the communication medium being selected based at least in part on whether the second device is included on the list, the selection being transparent to the user of the first device.</p>
<p id="p-0019" num="0018">Implementations of the invention include one or more of the following features. If the second device is included on the list, the message is transmitted to the second device over a short-range radio link, and if the second device is not included on the list, the message is transmitted to the second device using another communication medium. If the second device is not included on the list, the message is transmitted to the second device over either the Internet or by mobile telephony.</p>
<p id="p-0020" num="0019">In general, in another aspect, the invention features a method that includes transmitting a message from an identified user of a short-range wireless device to an identified user of another device; and automatically confirming to the identified user of the first device whether the transmitted message was received by the identified user of the other device.</p>
<p id="p-0021" num="0020">Implementations of the invention include one or more of the following features. Information is stored about the transmitted message in the first device after transmission; and a match is made between received confirmations and the transmitted message stored in the device. The transmitted message is resent if a confirmation for the transmitted message is not received within a specified period. A communications manager is notified in the first device if the transmitted message is undeliverable. The notifying includes providing an explanation of why the transmitted message was undeliverable. The transmitted message is removed from the device after it is confirmed that the transmitted message was received by the identified user of the other device. The device from which the message is transmitted is responsible for guaranteeing the delivery.</p>
<p id="p-0022" num="0021">In general, in another aspect, the invention features a method that includes running applications on devices that are associated with respective owning entities, sending a message from an initiating owning entity to a target owning entity using one of the applications running on one of the devices associated with the initiating owning entity, identifying one of the devices as being associated with the target owning entity and as being accessible by a communication link, and forwarding the message to the device that is associated with the target owning entity through the communication link.</p>
<p id="p-0023" num="0022">Implementations of the invention include one or more of the following features. Each of the devices runs a client module that encrypts and decrypts the message using a public key associated with the owning entity of the device. The public key is stored in the device and in a server through which the message passes. The device comprises a mobile device. The owning entity comprises a person. The owning entity comprises an enterprise and the device comprises a stationary device.</p>
<p id="p-0024" num="0023">In general, in another aspect, the invention features a method that includes (a) storing information that identifies real-world entities and defines modes of interaction by the real-world entities through distributed devices, each of the real-world entities providing services to other real-world entities and using services of other real-world entities, (b) enabling any of the real-world entities using any arbitrary one or more of the distributed devices to log into the server, (c) loading portions of the stored information from the server to the device being used, and (d) regulating the interaction of the real-world entity using the device with other real-world entities based on the stored information, the interaction including the use of the services of the other real-world entities.</p>
<p id="p-0025" num="0024">Implementations of the invention include one or more of the following features. Client modules are run on the device, a server module is run on a server that is accessible on a communication network, the client and server modules provide core services through application programming interfaces to applications running on the devices, and the core services include access to the information that is stored on the server and relates to real-world entities. The stored information includes at least one of identification information, demographic information, and preference information.</p>
<p id="p-0026" num="0025">In general, in another aspect, the invention features a method that includes associating with each one of a number of different mobile devices that have a short-range wireless communication capability, a person who is a user of the device; storing information about the association of devices and users and information about each of the users at a publicly accessible server; and providing services at each of the mobile devices that depend on the information about the user of the device that is stored at the server.</p>
<p id="p-0027" num="0026">Implementations of the invention include one or more of the following features. The information about the users is communicated to the devices from the server for use in providing the functions. The information about the users includes at least one of: demographic information, identification information, preference information, or location information. At least some of the information about the users is stored on the mobile devices associated with the users.</p>
<p id="p-0028" num="0027">In general, in another aspect, the invention features a method that includes recognizing automatically that an entity in possession of a short-range wireless device is within a particular geographic area; obtaining data about the entity from a commonly accessible database; and sending information to the short-range wireless device, the information sent to the device depending on the data obtained from the database.</p>
<p id="p-0029" num="0028">Implementations of the invention include one or more of the following features. Access to the data about the entity in the commonly accessible database is contingent on permission of the entity. The entity can access and modify its data in the commonly accessible database using the wireless device. A second short-range wireless device recognizes that the entity is within the particular geographic area, obtains the data, and sends the information. The information sent to the first device includes promotional material for facilitating a transaction with an entity associated with the second device. The entity obtains information about an entity associated with the second device from the commonly accessible database using the first device. Recognition that the entity is within a particular geographic area is based on receipt of a message from the first device, the message including an identification code mapped to the entity.</p>
<p id="p-0030" num="0029">In general, in another aspect, the invention features a method that includes (a) electronically storing, in a publicly accessible location, information about real-world entities that are users of devices that have short-range wireless communication capability, (b) providing client modules on the devices and a server module at the publicly accessible location, the client modules and the server module cooperating to provide guaranteed messaging between users of any of the devices and to enable commercial transactions between users of the devices based on the electronically stored information.</p>
<p id="p-0031" num="0030">Implementations of the invention include one or more of the following features. One of the two wireless devices is fixed and one of the two wireless devices is mobile. The user of one of the devices comprises a commercial entity. The user of one of the devices comprises a consumer. The transaction comprises delivery of marketing information from one of the two devices to the other. The transaction comprises the use by one of the two devices of a service provided by means of the other of the two devices. The transaction comprises electronic messaging. The transaction occurs when the two devices are out of range of each other. Access to the stored information is under the control of the user to which it pertains. The stored information comprises the location of the user. The stored information comprises consumption preferences of a consumer. Each of the users is associated with more than one of the devices. The transaction is effected between the two users through the server that is located out of range of the two devices. The two devices are in range of each other and the transaction is effected between two users carrying the two devices. The transaction comprises sending an electronic business card from one of the devices to another one of the devices and displaying the card on the other one of the devices. The transaction comprises an electronic message communicated from one of the users to the other through at least one of the two devices and by a route that includes a mode of communication that is selected from among the Internet, mobile telephony, and short-range wireless communication, the selection being made without the user's awareness.</p>
<p id="p-0032" num="0031">In general, in another aspect, the invention features a method that includes, at a first device, receiving information from a second device through a short-range wireless communication channel, the information identifying an actual geographic location of the second device based on signals received from GPS sources, and updating a derived geographic location stored at the first device based on the information received from second device.</p>
<p id="p-0033" num="0032">Implementations of the invention include one or more of the following features. The derived geographic location is updated to be the same as the actual geographic location of the second device. The first device receives information over time from multiple other devices, the information representing the actual GPS geographic locations of the other devices, and the derived geographic location is updated from time to time based on the information received over time from the other devices. The first device is mobile and the second device is stationary.</p>
<p id="p-0034" num="0033">Other features and advantages will become apparent from the following description and the claims.</p>
<?BRFSUM description="Brief Summary" end="tail"?>
<?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?>
<description-of-drawings>
<heading id="h-0003" level="1">DESCRIPTION</heading>
<p id="p-0035" num="0034"><figref idref="DRAWINGS">FIG. 1</figref> shows a communication system.</p>
<p id="p-0036" num="0035"><figref idref="DRAWINGS">FIG. 2</figref> shows a wireless mobile device.</p>
<p id="p-0037" num="0036"><figref idref="DRAWINGS">FIGS. 3A</figref>, <b>3</b>B, and <b>3</b>C show data structures.</p>
<p id="p-0038" num="0037"><figref idref="DRAWINGS">FIGS. 4A through 4I</figref> show functions that can be used by a wireless device.</p>
<p id="p-0039" num="0038"><figref idref="DRAWINGS">FIG. 5</figref> shows communication paths.</p>
<p id="p-0040" num="0039"><figref idref="DRAWINGS">FIG. 6</figref> shows a server.</p>
<p id="p-0041" num="0040"><figref idref="DRAWINGS">FIG. 7</figref> shows a client.</p>
<p id="p-0042" num="0041"><figref idref="DRAWINGS">FIGS. 8A and 8B</figref> show a method for wireless communication.</p>
<p id="p-0043" num="0042"><figref idref="DRAWINGS">FIGS. 9 through 14</figref> show uses of the system.</p>
</description-of-drawings>
<?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?>
<?DETDESC description="Detailed Description" end="lead"?>
<heading id="h-0004" level="1">OVERVIEW</heading>
<p id="p-0044" num="0043">One general aspect of the invention is an application development platform that includes client, link, and server modules that expose core services through an application programming interface (API). Applications can be easily built on the API. The core services are selected to enable unique and widely useful applications to be created.</p>
<p id="p-0045" num="0044">Each of the applications can make services available to local and remote devices on which the client modules run. The availability of services is broadcast and known to the mobile devices, links, and services so that devices throughout the system can take advantage of them.</p>
<p id="p-0046" num="0045">One core service is message delivery. The client, link, and server modules coordinate their activities to guarantee at a high level the delivery of messages initiated by applications running on the mobile devices. Messages may be sent directly by a short-range wireless channel from a mobile device to another mobile device that is in the vicinity. If the target device is not in the vicinity, the message may be sent through other channels, including the Internet, to the target device. The communication channel can be chosen transparently to the user of the originating device.</p>
<p id="p-0047" num="0046">Each device in the system can be associated with an “owner”, which can be a person or an entity, such as a retail establishment. Information can be stored that links devices to owners so that messages, for example, can be directed to an owner. The system will determine the identity and location of a device associated with the owner. The message will then be sent to the identified device wherever it is located using whatever communication channel is appropriate.</p>
<p id="p-0048" num="0047">Information associated with each of the owners of devices can be stored centrally and used in providing the services at each of the mobile devices. For example, information about the owner's preferences or characteristics can be used to govern the manner in which services are provided, information is made available and communications are effected.</p>
<p id="p-0049" num="0048">The system can be used to provide virtual GPS capabilities for mobile devices that do not include GPS chips. Such a mobile device can obtain actual GPS information from other devices in the vicinity using short-range wireless communication. The mobile device can maintain a virtual GPS location that is nearly as accurate as if it had the GPS chip on-bard.</p>
<p id="p-0050" num="0049">As shown in <figref idref="DRAWINGS">FIG. 1</figref>, the invention provides a common software development platform <b>100</b> that enables developers to easily, quickly, and effectively build a wide range of user applications <b>110</b> for devices <b>112</b>, including mobile devices, that have short-range wireless communication capabilities, such as those provided by the Bluetooth standard. The common software development platform provides core functions and features <b>116</b> that can be invoked by the user applications through an API <b>114</b>.</p>
<p id="p-0051" num="0050">This architecture enables the developer to provide functions and features that are especially suited to mobile devices and short-range wireless communication and that have extremely broad appeal to users of the mobile devices. The developer need not reinvent, for each type of device and each communication protocol, the manner in which the applications interact with the operating system <b>118</b> running on the device, the device hardware <b>120</b>, and the communications protocols.</p>
<p id="p-0052" num="0051">The core functions include
<ul id="ul0001" list-style="none">
    <li id="ul0001-0001" num="0000">
    <ul id="ul0002" list-style="none">
        <li id="ul0002-0001" num="0052">providing a high-level guarantee of message delivery from one device to another <b>119</b></li>
        <li id="ul0002-0002" num="0053">a delivery service that transparently arranges for the delivery of messages from one user to another through, e.g., the Internet <b>148</b>, if the two devices are not within short-range wireless communication distance of each other <b>120</b></li>
        <li id="ul0002-0003" num="0054">broadcasting of available services by a device and use of information that is broadcast from other devices <b>122</b></li>
        <li id="ul0002-0004" num="0055">associating an “owner” with each device <b>124</b>, and</li>
        <li id="ul0002-0005" num="0056">integration with information associated with the owner <b>126</b>.</li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0053" num="0057">The applications may enable both person-to-person interaction and person-to-location interaction, which involves a person interacting with an institution or real-world location or enterprise such as a store or airport.</p>
<p id="p-0054" num="0058">The devices need not be mobile, but may include stationary devices that are to be part of the communication, including personal computers, cash registers, servers, and parking meters, to name a few. The platform extends to the hardware and software that provides a link <b>128</b> between the mobile devices and other devices, including a central servers <b>130</b>, that are not within direct reach of the short-range wireless communication capabilities of the mobile device.</p>
<p id="p-0055" num="0059">Based on the common development platform and the API that it presents to developers, any developer can easily create applications that change the way individuals interact with one another and with their environments.</p>
<p id="p-0056" num="0060">The platform enables a developer to easily create applications that do virtually any job that requires local communication between devices (including mobile devices) <b>112</b>, <b>113</b>, or longer-distance communication between local devices and central servers. Because the platform encompasses servers, it also enables a developer to use personalization information <b>132</b> that is stored on a server to personalize the operation of applications that are running on local devices.</p>
<p id="p-0057" num="0061">The core functions exposed by the API include functions that are expected to be used by a large proportion of applications that are built on Bluetooth. The application developer can build other features and functions <b>134</b> into his application and can supplement and expand the core functions.</p>
<p id="p-0058" num="0062">In addition to the initial ease of creating the applications, the use of a common development platform leads to applications that are inter-compatible, more uniform, and more standardized.</p>
<p id="p-0059" num="0063">The common development platform includes a client module <b>140</b>, a server module <b>144</b>, and a link module <b>142</b>. The client module runs on a client device <b>112</b>, such as a mobile device or a stationary local device owned by a merchant or a consumer. The server module runs on a server <b>130</b> that is typically not within short-range communication distance of the client devices, and the link module runs on a device <b>128</b> that provides a link between one or more client devices and the servers.</p>
<p id="p-0060" num="0064">“Owner” of a Device</p>
<p id="p-0061" num="0065">Conceptually, each client device has an “owner” <b>150</b>, <b>152</b>. In a simple example, the owner is a person who owns and uses the device, say the owner of a Palm Pilot with Bluetooth capability. Another example of an owner would be a restaurant operator with respect to a Bluetooth-capable client cash register at a restaurant. The owner of a device is known to the client, server, and link modules. An owner may change, for example, when a person lends his mobile telephone to another person.</p>
<p id="p-0062" num="0066">The system stores information about the owners of the devices in a centralized database <b>132</b> to which one or more servers <b>130</b>, <b>131</b> have access. The information could include names, addresses, and billing information, and other information such as the current location of the person and his current telephone number. The information could also include demographic information and user-entered preferences about products, services, and user interfaces.</p>
<p id="p-0063" num="0067">One benefit of having the information accessible to the servers and clients is that it becomes possible for one party at one location to communicate with an owner located anywhere in the world even if, on one occasion, the communication is by Bluetooth, on another occasion by mobile telephony, and on another occasion through the Internet <b>148</b>. The initiating party need not know where the owner is located or how to reach him; the server is aware of that information and can forward the message through the link to a server and from the server through an appropriate medium to the owner.</p>
<p id="p-0064" num="0068">By combining the features of centrally stored information with easy-to-develop applications for mobile devices, it is possible to create a broad range of portable, standardized applications that make fundamental changes in the way people interact with the world around them.</p>
<p id="p-0065" num="0069">Broadcast of Services</p>
<p id="p-0066" num="0070">The development platform <b>100</b> includes a function that enables an application <b>110</b> running on a mobile device to broadcast information about services that it provides to other devices running applications. Conversely, an application is able to identify and learn about services that are made available by applications running on other devices, for example, devices that are within short-range wireless communication and devices that are accessible through the link module. The service-broadcasting capability enables the creation of a fabric of millions of devices (mobile devices, central servers, links, and others) that provide and use services, where a person's mobile device can be kept aware of available services as it moves through a world populated by the other devices.</p>
<p id="p-0067" num="0071">Personalization</p>
<p id="p-0068" num="0072">Because the client, link, and server provide the basic core capability of finding, storing, and editing personalization information in a central database <b>132</b>, the applications built on the modules can provide functions that are dependent on the personalization information for the “owner” of the device.</p>
<p id="p-0069" num="0073">Guaranteed Delivery</p>
<p id="p-0070" num="0074">Another of the key core functions provided by the application development platform is so-called high-level guaranteed delivery of messages. When an application running on a device such as a mobile PDA initiates a message to another device anywhere in the world, the modules guarantee delivery of the message even if the other device is not within short-range communication and even if the other device is not in use at the moment. To do this, the modules determine the location of the target device, determine an appropriate mode of communication (e.g., a Bluetooth communication to a local device followed by a link to the Internet and then a telephony link to the target device) and track the message until delivery has occurred.</p>
<p id="p-0071" num="0075">The Internet can be used as a transparent alternative to Bluetooth for message delivery. When a user of an application on a device takes a step that requires a message to be sent to another device, the message can be sent through the Internet at the election of the modules, without the user being aware that Bluetooth is not being used.</p>
<p id="h-0005" num="0000">The Wireless Device</p>
<p id="p-0072" num="0076">As shown in <figref idref="DRAWINGS">FIG. 2</figref>, the client device <b>112</b> can be a wireless device that has a Bluetooth chip <b>11</b> enabling it to communicate over short-range radio links (such as link <b>115</b>, <figref idref="DRAWINGS">FIG. 1</figref>) with another chip <b>117</b> (<figref idref="DRAWINGS">FIG. 1</figref>) in another device in accordance with the Bluetooth protocol. The device <b>112</b> could be, for example, a mobile telephone, personal data assistant (PDAs), handheld computer or organizer, personal computer, cash register, parking meter, or other device. The device can include a touch-sensitive display <b>123</b> to allow the user to view information and interact with the device, a keypad <b>170</b>, a keyboard <b>172</b>, a mouse <b>174</b>, or other means for allowing the user to interact with the device.</p>
<p id="p-0073" num="0077">The chip <b>11</b> has a unique identification code <b>180</b> that is mapped in the personalization database <b>132</b> to the user or owner of the device. The user of the device may be an individual, vehicle, or other mobile entity, or may be an entity whose location is fixed such as a store or restaurant.</p>
<p id="p-0074" num="0078">Generally, the device <b>112</b> also has a memory or memories <b>190</b> that store an operating system <b>118</b>, applications <b>110</b>, and the client module <b>140</b>, a processor or processors <b>192</b>, and one or more internal system communication buses <b>194</b> interconnecting these hardware components (the hardware components are together identified by the numeral <b>120</b> on <figref idref="DRAWINGS">FIG. 1</figref>).</p>
<p id="p-0075" num="0079">Interaction between the Bluetooth chip, on one hand, and the operating system, the client module, and the applications, on the other hand conforms to a Bluetooth API that is exposed by the chip to the devices that interact with it. By making calls to the chip <b>11</b> through the client module, application programs <b>16</b> created by a variety of parties and running on the device <b>112</b> can achieve a broad range of functions. By interacting with the operating system <b>118</b> of the device <b>112</b>, the client module <b>140</b> can take advantage of the communication, processing, display and user interaction features provided by the operating system.</p>
<p id="h-0006" num="0000">Tracking Available Services</p>
<p id="p-0076" num="0080">The client module <b>140</b> keeps a registry <b>141</b> of services that are available from the applications running on the local device <b>112</b> and services that are available from applications running on other devices, including devices that are within short-range wireless distance of the local device <b>112</b>.</p>
<p id="p-0077" num="0081">An entry in the registry related to a service may have the format shown in <figref idref="DRAWINGS">FIG. 3A</figref> for a locally available service and the format shown in <figref idref="DRAWINGS">FIG. 3B</figref> for a service available on another device. Other formats could be used.</p>
<p id="p-0078" num="0082">Exemplary services that could be made available by applications running on devices include a WML server or an instant messaging client.</p>
<p id="p-0079" num="0083">The platform exposes “AddService” and “RemoveService” functions (see <figref idref="DRAWINGS">FIGS. 4E and 4F</figref>) that can be used by applications to add (register) or remove (unregister) services from the list in the registry <b>141</b>.</p>
<p id="p-0080" num="0084">The client module makes information about the user (owner) of a device and the services available from that device by a periodic broadcast ping to all devices within range of a local device. The broadcast function allows numerous devices constantly to be aware of a range of services offered by other devices. Each device can take advantage of and use a wide range of services for the user's benefit. The client module uses the information stored in the registry <b>141</b> by the applications to provide other devices with descriptions of services and instructions on how to access them.</p>
<p id="p-0081" num="0085">The applications running on the device can include core service applications that enable user interaction with and control of functions provided by the client module.</p>
<p id="p-0082" num="0086">One service application, for example, may enable a user of the device to modify the contents of the registry and to specify preferences with respect to the services available on the device. For example, the user may choose whether or not to be notified when a message is received for a particular service.</p>
<p id="h-0007" num="0000">Message Passing Through the Link</p>
<p id="p-0083" num="0087">In addition to communicating with nearby wireless devices, the client module can access the Internet or other public network through a link <b>128</b> (<figref idref="DRAWINGS">FIG. 1</figref>) that is running a link module <b>142</b>. Any device having local network capabilities <b>129</b> and an Internet <b>148</b> connection can serve as the link. The link could be a mobile device or a stationary device.</p>
<p id="p-0084" num="0088">As shown in <figref idref="DRAWINGS">FIG. 5</figref>, in some implementations, the link <b>128</b> includes a device with a Bluetooth chip <b>11</b> that provides local network capabilities (as defined in the Bluetooth standard), a copy of the link module <b>142</b>, and an Internet connection through an Internet interface <b>15</b>, such as a dialup or dedicated connection to the Internet <b>148</b>.</p>
<p id="p-0085" num="0089">Some communications can be sent over the Internet as a transparent alternative to sending the messages using Bluetooth technology. The link <b>128</b> allows users within short-range wireless distance to send and receive data through the Internet to and from, for example, server <b>130</b> running a copy of the server module <b>144</b>. Other technologies such as infrared could also provide the local network capabilities for the link <b>129</b>.</p>
<p id="p-0086" num="0090">The client module tracks whether there are any links <b>128</b> in range of the device based on information stored in the service registry <b>18</b>, because the links broadcast their available services in the manner described earlier. Messages destined for devices that are not within range are stored by the client module in a queue until the device is within range of a link <b>128</b></p>
<p id="p-0087" num="0091">In one example, messages (called Kmessages) stored in the client's message queue have the format shown in <figref idref="DRAWINGS">FIG. 3C</figref>. Once the device is within range of a link <b>128</b>, the messages are transmitted through the link to a server <b>130</b>. The server <b>23</b> can then transmit the messages to another link <b>131</b> (<figref idref="DRAWINGS">FIG. 3</figref>) that is close to the target device <b>133</b>. A registry in the target device stores messages waiting to be retrieved by specific services on the device.</p>
<p id="p-0088" num="0092">The “getMessages” and “getMessage” functions (shown in <figref idref="DRAWINGS">FIGS. 4B and 4C</figref>) are exposed by the client module and enable an application running on the client device to be used to retrieve messages sent from other devices. The stored messages are communicated from the client to an application using the Kmessage structure shown in <figref idref="DRAWINGS">FIG. 3C</figref>.</p>
<p id="p-0089" num="0093">The core services of the modules support the Transport Control Protocol/Internet Protocol (TCP/IP) to allow for Internet connectivity through what amounts to an ad hoc network of the devices that are within the vicinity of the links. IP masquerading is used by the link module to assign an IP address to each device in range of the link, thereby enabling the devices to communicate using TCP/IP.</p>
<p id="h-0008" num="0000">The Server</p>
<p id="p-0090" num="0094">The server module <b>144</b> running on the server <b>130</b> allows users of devices anywhere in the world to send messages to one another without knowing where the recipient is located or which device the recipient is using.</p>
<p id="p-0091" num="0095">As shown in <figref idref="DRAWINGS">FIG. 6</figref>, the server system <b>130</b> serves as a global router <b>60</b> that exposes services to server applications to enable messages to be stored and passed, for example, between a device <b>12</b> on which a client module <b>14</b> resides and another device <b>54</b> on which another client module <b>56</b> resides.</p>
<p id="p-0092" num="0096">In general, a given user may be an owner of multiple devices and may log on to some or all of them at one time. The server module includes a database <b>62</b> that tracks the devices associated with each user. The server module can support the HyperText Transfer Protocol (HTTP) and WAP, as well as other technologies, to send and receive messages.</p>
<p id="p-0093" num="0097">In one implementation, the server module includes software written in the Java computer language that can run, for example, on a Windows, Solaris or Linux system. The server module also can store information about the services that are made available by each of the user's devices in a registry of services <b>66</b> so that other devices can locate and access the services. A “getSurrounding Services” function (shown in <figref idref="DRAWINGS">FIG. 4D</figref>) is exposed by the client module to applications running on a device to enable the devices to obtain from the server module an array of mappings of users of other devices and services available on their devices.</p>
<p id="h-0009" num="0000">Personalization</p>
<p id="p-0094" num="0098">The server module also provides an interface service to the personalization system <b>132</b> and a gateway service <b>173</b> to other technologies such as the Internet <b>148</b>. A web server <b>58</b> using, for example, a Generalized Markup Language, allows messages to be served to any mobile device that has an Internet connection. In addition, any client device can access resources and information from the server through the Internet.</p>
<p id="p-0095" num="0099">The user can log on to the server, for example, to access the personalization system <b>26</b> and to enter or edit personalized information.</p>
<p id="p-0096" num="0100">On of the service applications <b>115</b> (<figref idref="DRAWINGS">FIG. 1</figref>) provided with the client module <b>14</b> allows the user to modify personal information and preferences stored by the personalization system. A “changepersonalizationdata” function (shown in <figref idref="DRAWINGS">FIG. 4G</figref>) can be used for that purpose. The user also can set indicators to permit or deny access by other users to various pieces of data stored in the personalization system and associated with that user.</p>
<p id="p-0097" num="0101">For example, user information stored in the personalization system may be designated as shared or public using the “Changepersonalizationpermissions” function (shown in <figref idref="DRAWINGS">FIG. 4I</figref>).</p>
<p id="p-0098" num="0102">One of the service applications running on one user's device can access other users' profiles from the personalization system using a “Getpersonalizationdata” function (shown in <figref idref="DRAWINGS">FIG. 4H</figref>). Access is denied if a particular user does not have permission to access another user's profile. All relevant data from the personalization system is loaded dynamically through a link when the user logs on to the server. Thus, user information stored at the client device can be updated regularly to keep it synchronized with the data stored in the personalization system.</p>
<p id="p-0099" num="0103">An administrative graphical user interface (GUI) is associated with the server to allow an administrator to change configurations for users manually. The administrative GUI also allows an administrator to analyze the load on resources used by the server, test and debug the server, and access user information stored in the personalization system if the user permits such access.</p>
<p id="h-0010" num="0000">Guaranteed Delivery</p>
<p id="p-0100" num="0104">In general, the client module exposes a service that is responsible for ensuring delivery of messages from one device to another. Upon receipt of a message from an application, the client module returns a confirmation including a unique identification number for each transmission of data. If the client module is not able to guarantee that a message was delivered, the text of the message is returned to the sender, with a message indicating that the text was undeliverable. If a message including data is received by a device that does not have the necessary application to operate on the data, then the message is returned to the sender. On the other hand, if the required application is listed in the registry of the recipient's device, but the recipient's device is not currently running the application, the client module stores the message and notifies the user that the message has been received.</p>
<p id="p-0101" num="0105">When a message is sent to a particular user from the server through the links, the message is sent to all devices that the user “owns” and on which he is logged on. If the user is not logged on to any of his devices, the server module stores the message in a mailbox database <b>64</b>. When the user subsequently logs on, he is notified of the message. Therefore, when a message is to be sent to a particular device, the sender of the message need not determine which device the recipient is closest to or on which device the recipient prefers to receive messages. The server transparently routes the message to the proper device. Because encryption technology is integrated with the client module, the user automatically digitally signs communications using a global key stored in the personalization system and in a personalization module <b>143</b> stored on the client device (see <figref idref="DRAWINGS">FIG. 2</figref>).</p>
<p id="p-0102" num="0106">As shown in <figref idref="DRAWINGS">FIG. 7</figref>, the client module includes a transfer module <b>30</b> that provides an interface to communications media, including the Bluetooth chip <b>32</b>, a wireless modem <b>34</b> that permits mobile telephone communications, an infrared port <b>36</b>, or other communications channels <b>38</b>.</p>
<p id="p-0103" num="0107">The transfer module <b>30</b> references a socket or equivalent layer of each communications media available to the device and manages the communications media. The transfer module <b>30</b> passes received messages to a confirmation manager <b>40</b> and provides information to the communications manager about the available communications media. The transfer module <b>30</b> can be requested by the confirmation manager <b>40</b> to send messages over a particular communication medium.</p>
<p id="p-0104" num="0108">The confirmation manager <b>40</b> is the portion of the client module that is responsible for guaranteeing delivery of messages. It maintains a queue of outgoing messages, as well as a queue of messages awaiting confirmation. The confirmation manager <b>40</b> tracks messages that have been sent and matches received confirmations with the original outgoing messages. If confirmation is not received within a specified period, the message is re-sent.</p>
<p id="p-0105" num="0109">The confirmation manager <b>40</b> can be called upon by a communications manager <b>42</b> to send messages and notifies the communications manager if a message is undeliverable. A message explaining why a message is undeliverable can accompany the notification to the communications manager <b>42</b>.</p>
<p id="p-0106" num="0110">The communications manager <b>42</b> is responsible checks for other devices entering or leaving the range of the device and decides which communication medium to use when a service application <b>16</b> requests that a message be sent. Messages can be sent to a security module <b>46</b> for encryption and receipt of a digital signature.</p>
<p id="p-0107" num="0111">The communications manager <b>42</b> is notified by the confirmation manager <b>40</b> of received messages and passes the received messages to the security module <b>46</b> for authentication of digital signatures. User name and security information is received from the personalization system through a personalization module <b>48</b>. The communications manager <b>42</b> notifies the service applications <b>16</b>, through an applications manager <b>44</b>, of received messages based on settings in the local registry <b>18</b>. The service applications <b>16</b> then can retrieve messages in a message queue through the applications manager <b>44</b>.</p>
<p id="p-0108" num="0112">The communications manager <b>42</b> also receives and acts upon registry request messages and broadcasts and retrieves local service application settings from the registry <b>18</b>. Additionally, the communications manager updates the information about other devices in the registry <b>18</b> based on server messages and registry broadcasts.</p>
<p id="p-0109" num="0113">The applications manager <b>44</b> provides an interface between the service applications <b>16</b> and the communications manager <b>42</b>, the registry <b>18</b> and the personalization module <b>48</b> of the client. The applications manager <b>44</b> can retrieve or modify local service application settings stored in the registry <b>18</b>. It also can access or modify the registry's list of other devices within range of the device <b>12</b>, and information about services available on those users' devices. The applications manager <b>44</b> also can send and receive messages through the communications manager <b>42</b>. Information stored in the personalization system <b>132</b> can be accessed or modified (assuming permission is granted) through the personalization module <b>48</b>.</p>
<p id="p-0110" num="0114">The personalization module <b>48</b> serves as an interface to the personalization system <b>132</b> and provides access to user information, user preferences, and user permissions stored in the personalization system. The personalization module <b>48</b> is capable of caching information and synchronizing information with the personalization system <b>132</b>. It can access information stored in the personalization system <b>132</b> in a manner that is transparent to the entity requesting the information. The personalization module <b>48</b> provides the user name for message headers and provides public or private encryption keys to the security module <b>46</b> through the communications manager <b>42</b>.</p>
<p id="p-0111" num="0115">The security module <b>46</b> is responsible for providing secure communications between the device <b>12</b> and other devices and executes a cryptographic algorithm. The security module <b>46</b> obtains security information from the communications manager <b>42</b>. It encrypts and decrypts messages, digitally signs outgoing messages and verifies the digital signatures of incoming messages.</p>
<p id="p-0112" num="0116">A “sendMessage” instruction (see <figref idref="DRAWINGS">FIG. 4A</figref>) in an application can call a client module routine that allows messages to be sent to other wireless devices through the facilities of the chip.</p>
<p id="h-0011" num="0000">Message Communication and Encryption</p>
<p id="p-0113" num="0117"><figref idref="DRAWINGS">FIGS. 8A and 8B</figref> show how a message initiated by a service application <b>16</b> can be sent from the device <b>12</b>. The particular service application <b>16</b> passes <b>1100</b> a message with an identification of the intended recipient to the applications manager <b>44</b>. In this example, it is assumed that the application service requests that the transmission of the message be secure and guaranteed. The applications manager <b>44</b> passes <b>1102</b> the message and the recipient's identification to the communications manager <b>42</b> and requests that the message be transmitted in a secure and guaranteed manner. The communications manager <b>40</b> passes <b>1104</b> the message and security information to the security module <b>46</b>. The security module <b>46</b> executes the cryptographic algorithm on the message and returns <b>1106</b> the encrypted message to the communications manager <b>42</b>. The communications manager <b>42</b> then passes <b>1108</b> the encrypted message to the confirmation manager <b>40</b> and specifies the channel of communication.</p>
<p id="p-0114" num="0118">The confirmation manager <b>40</b> generates <b>1110</b> a message identification number and attaches it to the message header. The confirmation manager <b>40</b> also adds <b>1112</b> the encrypted message to its queue of non-confirmed messages. The confirmation manager <b>40</b> passes <b>1114</b> the encrypted message and an identification of the specified channel to the transfer module <b>30</b>. The transfer module <b>30</b> then sends <b>1116</b> the encrypted message over the specified communication channel. If the confirmation manager <b>40</b> does not receive a confirmation within a specified time frame, it re-sends the message.</p>
<p id="p-0115" num="0119">The transfer module in the recipient device receives <b>1118</b> the encrypted message and passes it to the recipient device's confirmation manager. The confirmation manager in the receiving device passes <b>1120</b> the message to the communications manager. In addition, the confirmation manager in the recipient device adds the message identification number to its list of received messages and generates <b>1122</b> a confirmation message that is passed to the transfer module in the recipient device. The transfer module sends <b>1124</b> the confirmation message over the same communication channel over which the original message arrived. The transfer module <b>30</b> in the sending device <b>12</b> receives the confirmation message and passes <b>1126</b> it to the confirmation manager <b>40</b>. The confirmation manager <b>40</b> then removes <b>1128</b> the original message from its queue of messages that are awaiting confirmation.</p>
<p id="p-0116" num="0120">After receiving the encrypted message, the communications manager in the recipient device removes <b>1130</b> the header and passes <b>1132</b> the encrypted, digitally signed message to the security module. The security module responds <b>1134</b> to the communications manager with the sender's identity. The communications manager in the recipient device then adds <b>1136</b> the decrypted message to its message queue and notifies <b>1138</b> the user and service application, according to the settings in the registry of the recipient device.</p>
<p id="p-0117" num="0121">To receive the decrypted message, the service application requests <b>1140</b> the message from the communications manager through the applications manager in the recipient device. The communications manager passes <b>1142</b> the next message marked for the intended application from the message queue to the service application. The communications manager then deletes <b>1144</b> the message from its message queue.</p>
<p id="p-0118" num="0122">In addition to sending and receiving messages, a service application <b>16</b> can retrieve or modify data and permissions stored in the personalization system <b>132</b> by calling functions of the personalization module's API through the applications manager <b>44</b>. Additionally, a service application <b>16</b> can view information about users and devices within range of the device <b>12</b> by calling functions of the registry's API through the applications manager <b>44</b>. Similarly, a service application <b>16</b> can retrieve or modify service application settings on the local device <b>12</b> by calling functions of the registry's API through the applications manager <b>44</b>.</p>
<p id="h-0012" num="0000">Uses</p>
<p id="p-0119" num="0123">As shown in <figref idref="DRAWINGS">FIG. 9</figref>, in one use of the system described above, a clothing store <b>70</b> at a fixed location provides electronic coupons to potential customers. A device <b>17</b> with a Bluetooth chip <b>15</b> is mounted in the store <b>70</b>. If a user carrying a mobile device comes within range of the chip <b>15</b>, the device <b>17</b> detects and stores that information in its client's service registry. The device <b>17</b> can obtain information <b>74</b> about the user from the personalization system <b>132</b>. Such information <b>74</b> may include, for example, the clothing size and clothing purchase history of the user. Access to such information can be subject to the grant of permission by the user.</p>
<p id="p-0120" num="0124">The device <b>17</b> can send one or more electronic coupons to the user's device <b>12</b> by incorporating the coupons into one or more messages sent directly through the Bluetooth link or indirectly through a local area network (LAN). The messages containing the coupons can inform the user of sales and items that may be of special interest to the user based on the information obtained from the personalization system. The electronic coupons can be turned in and used to purchase items from the store <b>70</b> by communicating directly with the device <b>17</b> over the LAN.</p>
<p id="p-0121" num="0125">The user need not wait for coupons to be sent to his device <b>12</b>. For example, once the user is within range of the store <b>70</b>, the registry associated with the client module residing on the user's device <b>12</b> would store the identification code for the store <b>70</b>. The user can use the device <b>12</b> to view the various coupons offered by the store <b>70</b>.</p>
<p id="p-0122" num="0126">Another application can provide a service that acts as a shopping assistant to match user preferences to available store inventory. In one scenario, the user may want information about a particular product from stores in a specified area such as a commercial street or shopping mall. Stores would update information stored in the personalization system about their product inventory. The user would use the device <b>12</b> to request information from the personalization system regarding the availability of various models, sizes, costs, of the particular product from stores in the specified area. A list of the available products and related information then would be provided to the user's device. An identification code can be associated with each store that can be used as discussed below.</p>
<p id="p-0123" num="0127">After reviewing the information obtained from the personalization system, the user can get additional information from the personalization system, for example, about promotions or coupons that the listed stores may be offering. After selecting a particular store, the user enters the store identification code into the device <b>12</b> to access a link to the selected store, for example, over the Internet <b>22</b>. Once the user's device <b>12</b> is within range of the store's Bluetooth-enabled device, the two devices would recognize one another. Communications then would take place directly or over the local network. The user would be able to purchase items from the store using the device <b>12</b>. Personnel at the store may gather the purchased items and send a message to the user when the items are ready to be picked up.</p>
<p id="p-0124" num="0128">As shown in <figref idref="DRAWINGS">FIG. 10</figref>, another application allows the user to place an order, for example, at a restaurant <b>76</b> and pay for the order without having to wait in line. The user orders and pays while sitting at a table or walking in the vicinity of the restaurant. When the user arrives at the restaurant <b>76</b>, the restaurant's Bluetooth-enabled device <b>17</b> recognizes the presence of the user's device and retrieves the user's personal information from the personalization system. The personal information may include the customer's food preferences or the usual order that the customer places at the restaurant <b>76</b>. The restaurant's device <b>17</b> sends a message to the customer's device asking, for example, if the customer wishes to place his usual order. The customer can place an order and pay using the device. The customer also can access the personalization system to obtain information about the restaurant <b>76</b>. The restaurant information <b>80</b> can include, for example, a menu, a list of specials, and available coupons. Such information can be obtained directly from the restaurant as well using the restaurant's local network.</p>
<p id="p-0125" num="0129">The information regarding the user's preferences retrieved by the restaurant's device <b>17</b> from the personalization system may include information that can facilitate transactions between different commercial entities with respect to the identified customer. For example, when the user passes within the vicinity of the restaurant, the restaurant's Bluetooth-enabled device <b>17</b> recognizes the presence of the user's device and retrieves the user's personal information <b>78</b> from the personalization system. The personal information <b>78</b> may indicate that the user enjoys movies. The restaurant's device would exchange information with a local theater <b>77</b> that also is in possession of a Bluetooth-enabled device <b>79</b>, and the local theater <b>77</b> would post an electronic movie discount on the user's device.</p>
<p id="p-0126" num="0130">Another application can facilitate travel. For example, assume the user is scheduled to depart on an airline flight. As shown in <figref idref="DRAWINGS">FIG. 11</figref>, upon arrival at the airport <b>82</b>, a Bluetooth-enabled device <b>17</b> would detect the presence of the user's device. The airport's device <b>17</b> obtains the user's scheduled flight number and time of departure from the personalization system. The device <b>17</b> then sends flight, airport and ground transportation information tailored to the traveler's itinerary to the user's device. Similar applications can be used in connection with other means of travel such as trains or buses.</p>
<p id="p-0127" num="0131">Other applications can be used in connection with parking meters to facilitate payment through use of a Bluetooth-enabled device. In one scenario, users would purchase pre-paid units of time. As shown in <figref idref="DRAWINGS">FIG. 12</figref>, when a user in possession of the device parks a car near a parking meter <b>86</b>, a Bluetooth-enabled device <b>17</b> in the parking meter senses the presence of the user's device <b>12</b>. The device <b>17</b> checks the user's account identification number <b>88</b> by accessing the personalization system <b>26</b> and sends a message to the user's device requesting an indication of how much time the user plans to park at the location. Once the user <b>10</b> responds, payment automatically can be deducted from the user's account. The application program can consistently show how much time is left on the meter <b>86</b>, and can allow the user to add time to the meter from distant locations.</p>
<p id="p-0128" num="0132">A wireless credit card application program can allow the user to make purchases with the device from a merchant <b>90</b>. For example, as shown in <figref idref="DRAWINGS">FIG. 13</figref>, a merchant's Bluetooth-enabled device <b>17</b> would sense the presence of the user's device and, if permission is granted, would obtain the user's credit card information <b>92</b>, including the user's name, account number and account expiration date, from the personalization system <b>26</b>. Furthermore, the application program can store a personal budget set by the user. If the user exceeds his personal budget, a message is sent to the device indicating that the personal budget has been exceeded.</p>
<p id="p-0129" num="0133">A network of strategically placed Bluetooth-enabled devices in parking meters, city streets lamps, and other locations can provide a virtual global positioning system (GPS) that allows a user's device to know its precise location without requiring that the user's device carry a global positioning chip. As illustrated in <figref idref="DRAWINGS">FIG. 14</figref>, a number of Bluetooth-enabled devices <b>200</b> carry a Bluetooth chip <b>204</b> as well as a global positioning chip <b>206</b> that allows the device <b>200</b> to determine its GPS location by receiving global positioning information from a satellite <b>202</b>. Each device <b>200</b> can periodically broadcast its global positioning location. Other Bluetooth-enabled devices that are within range of one of the devices <b>100</b> can receive the broadcast and thereby determine their own location. A variety of location-based applications <b>16</b>, such as an electronic map identifying the user's location, can be implemented without requiring a costly GPS chip on the device <b>14</b>.</p>
<p id="p-0130" num="0134">Yet another application program that can run on the client <b>14</b> allows users to post information that can be retrieved and read by other parties. A virtual information board can be implemented by storing the information on a local device or on the server. For example, a restaurant can post its daily specials using such an application to help reduce the cost of menus.</p>
<p id="p-0131" num="0135">A public information booth can have a Bluetooth-enabled device that provides information about museums, historical sites, statues and other sites of interest within a particular geographical location. An application can be run on the client residing on the user's device. The devices interact according to the Bluetooth protocol, and the device sends out a brief history or summary of the area to the user's device. The application also allows a user to view a list and summary of the various sites in the area. Self-guided tours can be tailored so that the user only receives information about specific aspects of the area based on the user's interest.</p>
<p id="p-0132" num="0136">Another application can serve as a wireless identity tool. This tool can facilitate the user's navigating through a hospital or other bureaucracy. For example, in a hospital, the user can sign in or pick up medical prescriptions without completing written forms. The application can provide the appropriate information.</p>
<p id="p-0133" num="0137">Other application programs can provide communications with another device associated with an entity such as an individual who is free to roam from one location to another. Exemplary application programs include instant messaging, buddy lists, and personal contact cards.</p>
<p id="p-0134" num="0138">Instant messaging, for example, allows messages to be passed between Bluetooth-enabled devices regardless of whether or not the devices are within local range of one another. The location of the parties may impact which means of communication is used to send a particular message. However, the sender of the message need not be concerned with the means of communication or device compatibility issues because the incoming message will be tailored to the recipient's device. If an instant message cannot reach its destination, for example, because the intended recipient has set his permissions so as not to allow instant messaging or because the recipient device does not have the proper software, the sender can be notified that the message cannot be delivered.</p>
<p id="p-0135" num="0139">Other applications that can run on the device facilitate the use of buddy lists. Thus, a user of the device can be notified automatically when a buddy enters or leaves the local area network. The user can add or remove persons on the buddy list. For more privacy, the user can select an option in the application to prevent other persons on the buddy list from being informed of the user's entering or leaving particular networks. A list can be stored in the personalization system to specify information and communication access permissions. The list can be used across multiple applications and can be updated dynamically through the personalization system. Different members of the buddy list can have different permissions.</p>
<p id="p-0136" num="0140">Another application program allows the user to send a virtual business card from the device. In some situations, the electronic business card can include graphical images of an actual business card.</p>
<p id="p-0137" num="0141">Other implementations are within the scope of the claims.</p>
<?DETDESC description="Detailed Description" end="tail"?>
</description>
<us-claim-statement>The invention claimed is:</us-claim-statement>
<claims id="claims">
<claim id="CLM-00001" num="00001">
<claim-text>1. A method comprising:
<claim-text>maintaining a list of short-range wireless devices that are known to be within range of a first short-range wireless device;</claim-text>
<claim-text>transmitting a message, using a communication medium, from an identified user of the first device to a second wireless device being used by a second identified user, the communication medium being selected based at least in part on whether the second device is included on the list, and on the fact that the second device is being used by the second identified user, the selection being transparent to the user of the first device.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00002" num="00002">
<claim-text>2. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref> in which, if the second device is included on the list, the message is transmitted to the second device using a short-range radio link, and if the second device is not included on the list, the message is transmitted to the second device using another communication medium.</claim-text>
</claim>
<claim id="CLM-00003" num="00003">
<claim-text>3. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref> in which, if the second device is not included on the list, the message is transmitted to the second device over either the Internet or by mobile telephony.</claim-text>
</claim>
<claim id="CLM-00004" num="00004">
<claim-text>4. A method comprising:
<claim-text>maintaining a list of short-range wireless devices that are known to be within range of a first short-range wireless device and in use by identified users associated with the devices;</claim-text>
<claim-text>if a second device is included on the list, transmitting a message from an identified user of the first device, using a short-range radio link, to a second wireless device being used by a second identified user, and</claim-text>
<claim-text>if the second device is not included on the list, transmitting a message from an identified user of the first device, using either the Internet or mobile telephony, to the second device.</claim-text>
</claim-text>
</claim>
</claims>
</us-patent-grant>
