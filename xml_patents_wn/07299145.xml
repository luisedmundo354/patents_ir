<us-patent-grant lang="EN" dtd-version="v4.2 2006-08-23" file="US07299145-20071120.XML" status="PRODUCTION" id="us-patent-grant" country="US" date-produced="20071106" date-publ="20071120">
<us-bibliographic-data-grant>
<publication-reference>
<document-id>
<country>US</country>
<doc-number>07299145</doc-number>
<kind>B2</kind>
<date>20071120</date>
</document-id>
</publication-reference>
<application-reference appl-type="utility">
<document-id>
<country>US</country>
<doc-number>11486370</doc-number>
<date>20060714</date>
</document-id>
</application-reference>
<us-application-series-code>11</us-application-series-code>
<priority-claims>
<priority-claim sequence="01" kind="regional">
<country>EP</country>
<doc-number>05447188</doc-number>
<date>20050816</date>
</priority-claim>
</priority-claims>
<us-term-of-grant>
<disclaimer>
<text>This patent is subject to a terminal disclaimer.</text>
</disclaimer>
</us-term-of-grant>
<classifications-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>G</section>
<class>01</class>
<subclass>B</subclass>
<main-group>11</main-group>
<subgroup>24</subgroup>
<symbol-position>F</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20071120</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
</classifications-ipcr>
<classification-national>
<country>US</country>
<main-classification>702104</main-classification>
<further-classification>702 91</further-classification>
<further-classification>702 94</further-classification>
<further-classification>702152</further-classification>
<further-classification>702167</further-classification>
<further-classification>356601</further-classification>
</classification-national>
<invention-title id="d0e69">Method for the automatic simultaneous synchronization, calibration and qualification of a non-contact probe</invention-title>
<references-cited>
<citation>
<patcit num="00001">
<document-id>
<country>US</country>
<doc-number>6493956</doc-number>
<kind>B1</kind>
<name>Matsuda</name>
<date>20021200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification> 33502</main-classification></classification-national>
</citation>
<citation>
<patcit num="00002">
<document-id>
<country>US</country>
<doc-number>6583869</doc-number>
<kind>B1</kind>
<name>Sheridan</name>
<date>20030600</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>356153</main-classification></classification-national>
</citation>
<citation>
<patcit num="00003">
<document-id>
<country>US</country>
<doc-number>6944564</doc-number>
<kind>B2</kind>
<name>De Jonge</name>
<date>20050900</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00004">
<document-id>
<country>US</country>
<doc-number>2004/0024311</doc-number>
<kind>A1</kind>
<name>Quaid, III</name>
<date>20040200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>600428</main-classification></classification-national>
</citation>
<citation>
<patcit num="00005">
<document-id>
<country>US</country>
<doc-number>2004/0034282</doc-number>
<kind>A1</kind>
<name>Quaid, III</name>
<date>20040200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>600300</main-classification></classification-national>
</citation>
<citation>
<patcit num="00006">
<document-id>
<country>EP</country>
<doc-number>1 361 414</doc-number>
<kind>A1</kind>
<date>20031100</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00007">
<document-id>
<country>JP</country>
<doc-number>2000180103</doc-number>
<kind>A</kind>
<date>20000600</date>
</document-id>
</patcit>
<category>cited by examiner</category>
</citation>
<citation>
<patcit num="00008">
<document-id>
<country>WO</country>
<doc-number>WO 00/39522</doc-number>
<date>20000700</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00009">
<document-id>
<country>WO</country>
<doc-number>WO 00/41141</doc-number>
<date>20000700</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00010">
<document-id>
<country>WO</country>
<doc-number>WO 200039522</doc-number>
<kind>A1</kind>
<date>20000700</date>
</document-id>
</patcit>
<category>cited by examiner</category>
</citation>
<citation>
<patcit num="00011">
<document-id>
<country>WO</country>
<doc-number>WO 01/07866</doc-number>
<date>20010200</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00012">
<document-id>
<country>WO</country>
<doc-number>WO 200107866</doc-number>
<date>20010200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
</citation>
<citation>
<nplcit num="00013">
<othercit>European Search Report dated Dec. 20, 2005, issued in connection with corresponding EP 05 44 7188.</othercit>
</nplcit>
<category>cited by other</category>
</citation>
<citation>
<nplcit num="00014">
<othercit>Patent Abstracts of Japan, vol. 2000, No. 9, Oct. 13, 2000 &amp; JP 2000 180103.</othercit>
</nplcit>
<category>cited by other</category>
</citation>
<citation>
<nplcit num="00015">
<othercit>File History of U.S. Patent No. 6,944,564 obtained from PTO IFW Jun. 20, 2007.</othercit>
</nplcit>
<category>cited by other</category>
</citation>
</references-cited>
<number-of-claims>26</number-of-claims>
<us-exemplary-claim>1</us-exemplary-claim>
<us-field-of-classification-search>
<classification-national>
<country>US</country>
<main-classification>702104</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>702105</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>702 91</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>702 94</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>702 95</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>702150</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>702152</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>702167</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>600300</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>600428</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>356153</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>356601</main-classification>
</classification-national>
</us-field-of-classification-search>
<figures>
<number-of-drawing-sheets>2</number-of-drawing-sheets>
<number-of-figures>2</number-of-figures>
</figures>
<us-related-documents>
<us-provisional-application>
<document-id>
<country>US</country>
<doc-number>60708371</doc-number>
<kind>00</kind>
<date>20050816</date>
</document-id>
</us-provisional-application>
<related-publication>
<document-id>
<country>US</country>
<doc-number>20070043526</doc-number>
<kind>A1</kind>
<date>20070222</date>
</document-id>
</related-publication>
</us-related-documents>
<parties>
<applicants>
<applicant sequence="001" app-type="applicant-inventor" designation="us-only">
<addressbook>
<last-name>De Jonge</last-name>
<first-name>Lieven</first-name>
<address>
<city>Overijse</city>
<country>BE</country>
</address>
</addressbook>
<nationality>
<country>BE</country>
</nationality>
<residence>
<country>BE</country>
</residence>
</applicant>
<applicant sequence="002" app-type="applicant-inventor" designation="us-only">
<addressbook>
<last-name>Van Coppenolle</last-name>
<first-name>Bart</first-name>
<address>
<city>Linden</city>
<country>BE</country>
</address>
</addressbook>
<nationality>
<country>BE</country>
</nationality>
<residence>
<country>BE</country>
</residence>
</applicant>
<applicant sequence="003" app-type="applicant-inventor" designation="us-only">
<addressbook>
<last-name>Vanderstraeten</last-name>
<first-name>Denis</first-name>
<address>
<city>Louvain-la-Neuve</city>
<country>BE</country>
</address>
</addressbook>
<nationality>
<country>BE</country>
</nationality>
<residence>
<country>BE</country>
</residence>
</applicant>
</applicants>
<agents>
<agent sequence="01" rep-type="attorney">
<addressbook>
<orgname>Nixon &amp; Vanderhye P.C.</orgname>
<address>
<country>unknown</country>
</address>
</addressbook>
</agent>
</agents>
</parties>
<assignees>
<assignee>
<addressbook>
<orgname>Metris N.V.</orgname>
<role>03</role>
<address>
<city>Leuven</city>
<country>BE</country>
</address>
</addressbook>
</assignee>
</assignees>
<examiners>
<primary-examiner>
<last-name>Tsai</last-name>
<first-name>Carol S. W.</first-name>
<department>2857</department>
</primary-examiner>
</examiners>
</us-bibliographic-data-grant>
<abstract id="abstract">
<p id="p-0001" num="0000">The present invention relates to an improved method for the simultaneous calibration and qualification of a non-contact probe on a localizer using a single artifact, in which non-contact probe readings and localizer readings are synchronised using parameters determined simultaneously with calibration and qualification. The invention also relates to a non-contact probe and other devices, and a computer program for performing the invention.</p>
</abstract>
<drawings id="DRAWINGS">
<figure id="Fig-EMI-D00000" num="00000">
<img id="EMI-D00000" he="208.96mm" wi="316.82mm" file="US07299145-20071120-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00001" num="00001">
<img id="EMI-D00001" he="218.02mm" wi="170.52mm" file="US07299145-20071120-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00002" num="00002">
<img id="EMI-D00002" he="185.00mm" wi="169.33mm" file="US07299145-20071120-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
</drawings>
<description id="description">
<?RELAPP description="Other Patent Relations" end="lead"?>
<p id="p-0002" num="0001">This application claims benefit of EP 05447188.3, filed 16 Aug. 2005, and U.S. Provisional Application No. 60/708,371 filed 16 Aug. 2005, the entire contents of each of which are hereby incorporated by reference.</p>
<?RELAPP description="Other Patent Relations" end="tail"?>
<?BRFSUM description="Brief Summary" end="lead"?>
<heading id="h-0001" level="1">FIELD OF THE INVENTION</heading>
<p id="p-0003" num="0002">The present invention relates to a method for the calibration, qualification and synchronization of a non-contact probe on a localizer in a single step procedure, using a single reference object, in which synchronization, calibration and qualification are performed simultaneously.</p>
<heading id="h-0002" level="1">BACKGROUND OF THE INVENTION</heading>
<p id="p-0004" num="0003">Generally a non-contact probe comprises of one or more emitter sources and one or more receivers. An emitter source projects waves, for example light waves, on the object of interest; the receiver(s) comprising for example a camera, capture(s) the returning waves from the object. For instance, if the receiver is a CCD-camera, it will take one or more shots of the object. By moving the object relative to the non-contact probe or vice versa, shots of the complete object can be taken, i.e. the object is being scanned. Each shot represents a one-dimensional (1D), two-dimensional (2D) or three-dimensional (3D) projection of the object depending on the physical form and working principle of the receiver(s). To obtain accurate 3D points on the surface of the object, relative to a fixed coordinate system, from multiple shots the following system parameters are preferably required:
<ul id="ul0001" list-style="none">
    <li id="ul0001-0001" num="0000">
    <ul id="ul0002" list-style="none">
        <li id="ul0002-0001" num="0004">1. the 3D position of the emitter source(s) relative to the receiver(s);</li>
        <li id="ul0002-0002" num="0005">2. the 3D position and orientation of the emitted waves, relative to the receiver(s), coming from the emitter source(s);</li>
        <li id="ul0002-0003" num="0006">3. the characteristics such as focal point of lenses of the receivers used in the non-contact probe;</li>
        <li id="ul0002-0004" num="0007">4. the dimensions and measuring resolution of the receiver(s); and</li>
        <li id="ul0002-0005" num="0008">5. the 3D position and orientation of the non-contact probe or the object relative to a fixed coordinate system, for each receiver capture.</li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0005" num="0009">The actual values of the parameters 1 to 4 are calculated during the calibration. Some of the actual values of parameter 5 are calculated during the qualification procedure, others are given values readily obtainable from the object-non-contact probe set-up. When these parameters are calculated for the given non-contact probe, the conversion, also called compensation, from receiver readings to accurate 3D points can be performed.</p>
<p id="p-0006" num="0010">To be able to move the non-contact probe relative to the object, the probe is mounted on a localizer. This localizer can be a structure, portable or non-portable, on which the probe is mounted, like for example a tripod. This localizer can also be a structure with moving axes, motorized or non-motorized, where the probe is mounted on the end of said axes, dependent to all other axes, like for example a robot, a milling machine or coordinate measuring machine (CMM). These last types of localizer can have the possibility to record the position and/or the rotation of the probe.</p>
<p id="p-0007" num="0011">Some of the state-of-the-art techniques actually calculate parameters 1 to 5 explicitly using dedicated measurements in a sequential manner. Adjusting these parameters is difficult because of their complex interactions and adjustment can be time consuming.</p>
<p id="p-0008" num="0012">Other state-of-the-art techniques for calibration and qualification do not calculate these parameters explicitly. In the first step, the receiver readings are first transformed in one, two or three dimensions, depending on whether the receiver itself is capable of measuring one, two or three dimensions. In this calibration step a receiver reading in receiver units is transformed to a point in e.g. SI units. The calibration can take several phenomena into account; for example, correcting the perspective since the object is not always parallel to the receiver or scaling correctly the readings. Finally, it must model correctly systematic reading errors in the receiver(s)—which is a complex operation.</p>
<p id="p-0009" num="0013">The second step, the qualification, consists of determining the accurate position and orientation of the non-contact probe relative to a fixed coordinate system. The qualification procedure is generally performed by the end-user using special artifacts or other measuring equipment. The qualification procedure often requires an essential manual alignment of the artifact/measuring equipment with the non-contact probe.</p>
<p id="p-0010" num="0014">Both steps, calibration and qualification, are based on some parameters that are tuned or optimized to obtain the 3D points accurately. Most state of the art algorithms determine the values of the parameters for the two steps separately, usually scanning different artifacts with known features, dimensions, etc. A method to generate the parameters with an integrated approach using one single artifact and a general function to convert directly a receiver reading into a three dimensional point has been recently disclosed (EP 1 361 414). This function corresponds to a sequence of calibration and qualification and, therefore, depends on many parameters similar to the ones used in the classical de-coupled technique. By expressing the conversion with one function, all interactions between the parameters are considered. Also, if the object being measured is known, the influence of a single parameter can directly be measured in terms of accuracy of the resulting 3D point.</p>
<p id="p-0011" num="0015">Measurement using such technique relies on accurate determination of the probe position and/or orientation by the localiser for a given probe reading. Any error or lack of accuracy leads to a less precise calibration and qualification, and consequently costly readjustment. When taking measurements, the frequency of the receiver readings and the frequency of localizer readings rarely match or, the frequencies match but the phases are different. For example, a continuously moving probe may generate a high number of probe readings during movement, but this may not be matched by the same number of localizer readings in a given time period. Alternatively, the same numbers of readings are performed but a delay occurs. The difference is due to incompatibility between the electronics of the detector and localizer which are not synchronised. The result is that for each receiver reading there is commonly no corresponding localizer reading. The accuracy and precision of the calibration is consequently reduced. To overcome the problem, the electronic circuitry of both the detector and the localizer may be adapted to provide reading information at the same frequency and in synchronization. However, the adapted circuitry must be specialised and bespoke according to the output type of the respective devices. Should the same localizer be used with several different probes, electronic synchronization would entail a corresponding number of sets of adapted circuitry, so increasing costs. In more complex situations, a receiver obtains multiple readings in a periodic manner, each reading provided with a time stamp but the precise time stamp of each reading in one cycle cannot be synchronised. The synchronization with the localizer data cannot even be obtained with adapting hardware circuitry.</p>
<p id="p-0012" num="0016">The present invention provides an adaptation to the technique described in (EP 1 361 414). It overcomes the problem of asynchronous data in the probe and localizer by mathematically identifying the time stamp of every receiver reading using a synchronization model with a few parameters and interpolating the corresponding localiser data for this time stamp. The parameters of the synchronization model are computed simultaneously during calibration and qualification.</p>
<?BRFSUM description="Brief Summary" end="tail"?>
<?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?>
<description-of-drawings>
<heading id="h-0003" level="1">BRIEF DESCRIPTION OF THE FIGURE</heading>
<p id="p-0013" num="0017"><figref idref="DRAWINGS">FIG. 1</figref>. An example of an algorithm according to the invention incorporating synchronization. Pr is the array of receiver data (size n), M is the corresponding machine positions (size n), N is the array of control points of the NURBS (size nc), and Q is the qualification matrix (size 6), s is the synchronization matrix.</p>
</description-of-drawings>
<?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?>
<?DETDESC description="Detailed Description" end="lead"?>
<heading id="h-0004" level="1">SUMMARY OF THE INVENTION</heading>
<p id="p-0014" num="0018">One embodiment of the present invention is a method for the calibration, qualification and synchronization of a point cloud generator, said point cloud generator comprising a non-contact probe on a localizer, comprising determining the transformation of an electrical reading of the receivers in said non-contact probe in point coordinates relative to said probe and identifying the position and orientation of the said non-contact probe in the measuring volume of the said localizer, thereby determining calibration, qualification and synchronization parameters simultaneously.</p>
<p id="p-0015" num="0019">Another embodiment of the present invention is a method as described above whereby calibration, qualification and synchronization are performed using the same artifact.</p>
<p id="p-0016" num="0020">Another embodiment of the present invention is a method as described above, whereby said artifact is a physical object susceptible to point cloud generation, whose outer shape and/or part thereof is definable using a mathematical function and/or look-up tables.</p>
<p id="p-0017" num="0021">Another embodiment of the present invention is a method as described above, whereby said artifact is a sphere, cylinder or box.</p>
<p id="p-0018" num="0022">Another embodiment of the present invention is a method as described above, whereby said artifact is a sphere of unknown diameter.</p>
<p id="p-0019" num="0023">Another embodiment of the present invention is a method as described above, whereby said artifact has unknown dimensions prior to the execution of said method.</p>
<p id="p-0020" num="0024">Another embodiment of the present invention is a method as described above, whereby said artifact has unknown position with respect to said localizer prior to the execution of said method.</p>
<p id="p-0021" num="0025">Another embodiment of the present invention is a method as described above, whereby said method is performed without manual intervention.</p>
<p id="p-0022" num="0026">Another embodiment of the present invention is a method as described above, whereby said method is executed at a user's site.</p>
<p id="p-0023" num="0027">Another embodiment of the present invention is a method as described above, comprising the steps of:
<ul id="ul0003" list-style="none">
    <li id="ul0003-0001" num="0028">a) scanning said artifact using said point cloud generator,</li>
    <li id="ul0003-0002" num="0029">b) calculating cloud points, P, using parameters relating to calibration, qualification and synchronization,</li>
    <li id="ul0003-0003" num="0030">c) calculating the position and optionally the orientation and/or size of said artifact using P calculated in step b) and knowledge of the artifact according to a mathematical function and/or look-up tables which define said artifact,</li>
    <li id="ul0003-0004" num="0031">d) comparing the values of P, with those calculated for the artifact derived from step c),</li>
    <li id="ul0003-0005" num="0032">e) adjusting parameters relating to calibration, qualification and synchronization, and</li>
    <li id="ul0003-0006" num="0033">f) repeating steps b) to e) until parameters relating to calibration, qualification synchronization are obtained which provide the closest comparison according to step d).</li>
</ul>
</p>
<p id="p-0024" num="0034">Another embodiment of the present invention is a method as described above whereby step b) is based on the generic function [1]
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>P=M</i>(<i>s</i>(<i>Pr</i>))*(<i>Q</i>(<i>f</i>(<i>Pr</i>))+<i>q</i>)<i>m</i>(<i>s</i>(<i>Pr</i>))  [1]<?in-line-formulae description="In-line Formulae" end="tail"?>
<br/>
where
<ul id="ul0004" list-style="none">
    <li id="ul0004-0001" num="0000">
    <ul id="ul0005" list-style="none">
        <li id="ul0005-0001" num="0035">Pr is a reading of a receiver of the non-contact probe,</li>
        <li id="ul0005-0002" num="0036">P is a cloud point, calculated from Pr, relative to a fixed coordinate system,</li>
        <li id="ul0005-0003" num="0037">f is a general mapping function, that maps receiver readings to 1D, 2D or 3D point coordinates, relative to a coordinate frame fixed to the non-contact probe,</li>
        <li id="ul0005-0004" num="0038">Q, q are the orientation, position of the non-contact probe relative to the localizer, M, m are the orientation and position of the localizer relative to a fixed coordinate frame for a given value of Pr, s is the time stamp for a given value of Pr; all three with respect to a fixed coordinate frame; none or one or more considered as known parameters.</li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0025" num="0039">Another embodiment of the present invention is a method as described above wherein f is a non-uniform rational B-spline function.</p>
<p id="p-0026" num="0040">Another embodiment of the present invention is a method as described above wherein s is a non-uniform rational B-spline function.</p>
<p id="p-0027" num="0041">Another embodiment of the present invention is a method as described above, wherein steps b) to f) comprise:
<ul id="ul0006" list-style="none">
    <li id="ul0006-0001" num="0042">b) calculating points according to function [1], said function re-expressed as:
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>P=F</i>(<i>Pr, S</i>)  [2]<?in-line-formulae description="In-line Formulae" end="tail"?>
    <ul id="ul0007" list-style="none">
        <li id="ul0007-0001" num="0043">wherein Pr is a reading of a receiver of the non-contact probe,</li>
        <li id="ul0007-0002" num="0044">P is a point, calculated from Pr, relative to a fixed coordinate system,</li>
        <li id="ul0007-0003" num="0045">F is a compensation function based on f, Q, q, s, M and m, said compensation function being applied to Pr using parameter set S,</li>
    </ul>
    </li>
    <li id="ul0006-0002" num="0046">c) calculating the position and optionally the orientation and/or size of said artifact using the values of P obtained in step b),</li>
    <li id="ul0006-0003" num="0047">d) comparing the values of P, with those calculated for the artifact derived from step c),</li>
    <li id="ul0006-0004" num="0048">e) adjusting S, and</li>
    <li id="ul0006-0005" num="0049">f) repeating steps b) to e) until value of S is obtained which provides the closest comparison according to step d).</li>
</ul>
</p>
<p id="p-0028" num="0050">Another embodiment of the present invention is a method as described above wherein step c) comprises:
<ul id="ul0008" list-style="none">
    <li id="ul0008-0001" num="0051">g) comparing the points P obtained in step b) to those expected of said artifact according to a mathematical function and/or look-up tables which define said artifact,</li>
    <li id="ul0008-0002" num="0052">h) adjusting one or more of the values corresponding to the position and optionally the orientation and/or size of said artifact, and</li>
    <li id="ul0008-0003" num="0053">i) repeating steps g) and h) until values corresponding to the position, and if calculated orientation and/or size are obtained which provide the closest comparison according to step g).</li>
</ul>
</p>
<p id="p-0029" num="0054">Another embodiment of the present invention is a method as described above wherein the values calculated for the artifact as mentioned in step d) are derived from a mathematical function and/or look-up tables which define said artifact, the values corresponding to the position, and if calculated orientation and/or size as obtained in step c).</p>
<p id="p-0030" num="0055">Another embodiment of the present invention is a method as described above, wherein the comparison performed in step d) comprises one or more average square distance, variance, volume, area and/or axis of inertia calculations.</p>
<p id="p-0031" num="0056">Another embodiment of the present invention is a method for the simultaneous calibration, qualification and synchronization of a point cloud generator, said point cloud generator comprising a two-dimensional line laser scanner mounted on a 2D co-ordinate measuring machine, comprising:
<ul id="ul0009" list-style="none">
    <li id="ul0009-0001" num="0057">j) scanning a sphere using said point cloud generator,</li>
    <li id="ul0009-0002" num="0058">k) calculating points according to function [2]
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>P=F</i>(<i>Pr, S</i>)  [2]<?in-line-formulae description="In-line Formulae" end="tail"?>
    <ul id="ul0010" list-style="none">
        <li id="ul0010-0001" num="0059">wherein Pr is a reading of a receiver of the two-dimensional line laser scanner,</li>
        <li id="ul0010-0002" num="0060">P is a point, calculated from Pr, relative to a fixed coordinate system,</li>
        <li id="ul0010-0003" num="0061">F is a compensation function based on f, Q, q, s, M and m, said compensation function being applied to Pr using parameter set S,</li>
        <li id="ul0010-0004" num="0062">Q, q is the orientation and position of the non-contact probe relative to the localizer; M, m is the orientation position of the localizer relative to a fixed frame for a given value of Pr, both values with respect to a fixed coordinate frame and none, either or both values considered as known parameters,</li>
    </ul>
    </li>
    <li id="ul0009-0003" num="0063">l) comparing the points P obtained in step k) to those expected of said sphere according to a mathematical function defining said sphere,</li>
    <li id="ul0009-0004" num="0064">m) adjusting one or more of the values corresponding to the position and size of said sphere,</li>
    <li id="ul0009-0005" num="0065">n) repeating steps l) and m) until values corresponding to the position and size are obtained which provide the closest comparison according to step l),</li>
    <li id="ul0009-0006" num="0066">o) comparing the values of P, with those calculated for the sphere, the latter obtained from mathematical function which defines said sphere, and the values corresponding to its position and size as obtained in step n).</li>
    <li id="ul0009-0007" num="0067">p) adjusting S, and</li>
    <li id="ul0009-0008" num="0068">q) repeating steps k) to n) until value of S is obtained which provides the closest comparison according to step o).</li>
</ul>
</p>
<p id="p-0032" num="0069">Another embodiment of the present invention is a method to allow an unskilled operator to perform a calibration, qualification and synchronization of a point cloud generator, using a method as described above.</p>
<p id="p-0033" num="0070">Another embodiment of the present invention is a method for performing a simultaneous calibration, qualification and synchronization of a point cloud generator within 5 minutes of generating the cloud point, using a method as described above.</p>
<p id="p-0034" num="0071">Another embodiment of the present invention is a method for performing a simultaneous calibration, qualification and synchronization of a point cloud generator without manual intervention, using a method as described above.</p>
<p id="p-0035" num="0072">Another embodiment of the present invention is a use of a single artifact for performing the calibration, qualification and synchronization procedure according to the method as described above.</p>
<p id="p-0036" num="0073">Another embodiment of the present invention is a computer program stored on a computer readable medium, suitable for performing a method as described above.</p>
<p id="p-0037" num="0074">Another embodiment of the present invention is a computer comprising a computer readable medium adapted and programmed to carry out the computer program as described above.</p>
<p id="p-0038" num="0075">Another embodiment of the present invention is a non-contact probe configured to perform a method as described above.</p>
<p id="p-0039" num="0076">Another embodiment of the present invention is a non-contact device comprising an artifact and a non-contact probe as described above mounted on a localizer.</p>
<heading id="h-0005" level="1">DETAILED DESCRIPTION OF THE INVENTION</heading>
<p id="p-0040" num="0077">A “non-contact probe” can be defined as any device mounted on a localizer that through non-contact sensing conducts 1D (distance), 2D or 3D coordinates measurements.</p>
<p id="p-0041" num="0078">A “localizer” is defined as any system positioning and orientating a non-contact probe in space, that returns the position and/or the orientation of the non-contact probe in 1D-, 2D- or 3D coordinates. For each position and/or orientation, the time t is given</p>
<p id="p-0042" num="0079">A “receiver”, is an electronic device in the non-contact probe that captures the waves coming from the object to be measured, resulting in one or multiple electrical readings. Most of the time these electrical readings are voltage readings on pixels of a CCD-camera.</p>
<p id="p-0043" num="0080">An “artifact” is any physical object susceptible to point cloud generation, whose outer shape and/or part thereof is definable using a mathematical function and/or look-up tables. Said artifact may be, for example, a sphere, cylinder, cube or box, two spheres joined together, a dumb-bell, a sphere joined to a cube etc. Said artifact may also be any irregular shape such as a mobile phone, a pen, a calculator etc. The method of obtaining a mathematical function and/or look-up table thereof is known to the skilled artisan. Depending on the geometry of the object, its dimensions may be known with accuracy; alternatively the dimension may not be accuracy known, or not known at all.</p>
<p id="p-0044" num="0081">A “look-up table” is a data list that defines the shape and dimensions of the object.</p>
<p id="p-0045" num="0082">A non-contact probe generally comprises of one or more emitter source(s), sending (e.g. light) waves to the object of interest, and one or more receivers, which capture the part of the object that is “hit” by the emitter source. The conversion of the electrical readings of the receiver to an accurate 3D point requires the steps of calibration and qualification executed on beforehand.</p>
<p id="p-0046" num="0083">A “point cloud generator” is a system that comprises 2 components, namely a non-contact probe and a localizer whereby both components can be used for 1D, 2D or 3D position and/or orientation measurements.</p>
<p id="p-0047" num="0084">“Calibration” is the procedure to identify the conversion between the electrical reading of the receiver in the non-contact probe and 1D, 2D or 3D point coordinates in SI units. In other words, calibration is the procedure to transform an electrical reading in accurate point coordinates. These point coordinates are calculated relative to a coordinate system connected to the non-contact probe.</p>
<p id="p-0048" num="0085">“Qualification” is defined as a procedure of completely and accurately identifying the position and orientation of the non-contact probe in the measuring volume of the localizer, possibly using information readily made available by the localizer itself. This procedure is to be performed each time the non-contact probe is mounted on the localizer or each time its position or orientation with respect to the localizer is changed. Thus, qualification is the procedure whereby the position and the orientation of the coordinate system associated with the non-contact probe is defined with respect to a fixed coordinate system.</p>
<p id="p-0049" num="0086">“Synchronization” is a defined as a procedure of completely and accurately identifying the time stamp of every receiver reading.</p>
<p id="p-0050" num="0087">Finally, “compensation” is defined as a procedure of making the conversion between the electrical reading of a receiver in the non-contact probe and 1D, 2D or 3D point coordinates using the calculated parameters of the calibration and qualification.</p>
<p id="p-0051" num="0088">The present invention relates to a method that determines set-up parameters of a non-contact probe mounted on a localizer using only one artifact and the localizer as described in EP 1 361 414 which is incorporated herein by reference. This present method is characterized by some major improvements compared to the state-of-the-art technologies as described below. Therefore, the present method represents not only an easier but also a more time-effective method.</p>
<p id="p-0052" num="0089">One aspect the present invention allows the calibration and qualification procedure to be carried out in one single step using one artifact, wherein the readings of the probe and localiser are synchronized. The present invention determines parameters pertinent to synchronization simultaneously with calibration and qualification. The simultaneous operation provides a more accurate and faster determination of the parameters, which results in a more accurate activity of the non-contact probe.</p>
<p id="p-0053" num="0090">Therefore, in one embodiment, the present invention relates to a method for the calibration, qualification and synchronization of a non-contact probe comprising determining the transformation of an electrical reading of the receivers in said non-contact probe in point coordinates relative to the said probe and identifying the position and orientation of the said non-contact probe in the measuring volume of the said localizer, thereby determining calibration, qualification and synchronization parameters simultaneously.</p>
<p id="p-0054" num="0091">In a one embodiment, said artifact consists of one or more spheres, cylinders, cubes or boxes, any regular or irregular physical object. According to the present invention the entire calibration-qualification-synchronization procedure can thus be totally automated; in other words there is a little or no manual interference and said procedure does not rely upon the skill of the operator. Furthermore, calibration and qualification can be performed at the user's site.</p>
<p id="p-0055" num="0092">As mentioned, the calibration, qualification and synchronization steps of a non-contact probe depend on a variety of parameters. In another embodiment, the present invention relates to a method for determining the parameters of a non-contact probe in a single step using a single artifact.</p>
<p id="p-0056" num="0093">The present invention is based on a general mapping function that directly converts a receiver reading into a 3D point. This function depends on various parameters that need to be numerically determined. In the following description, the general mapping function according to the invention is described with use of the conventional division in calibration, qualification and synchronization. However, it is the aim of the invention to provide an approach that mixes these three procedures in one single function. According to the invention, a single measurement procedure to establish the parameters has a greater accuracy than establishing the set of parameters in separated methods.</p>
<p id="h-0006" num="0000">1. Calibration</p>
<p id="p-0057" num="0094">The calibration step consists essentially of a mapping from the receiver readings to a 1D, 2D or 3D point relative to a coordinate system connected with the non-contact probe. The dimensions of the point are equal to the dimensions of the receiver. For example a camera with a square CCD-array will produce two-dimensional points after calibration. The goal of the calibration is to express the one-, two- or three-dimensional coordinates of a point in terms of its receiver readings.</p>
<p id="p-0058" num="0095">The “mapping” provides a description of this correspondence. It consists of a function that maps a reading from the receiver domain of all readings to a 1D, 2D or 3D point. Ideally, the mapping function should be able to model various physical effects of the non-contact probe such as the perspective, imperfectness of working principle or heterogeneous reading resolution and sensitivity.</p>
<p id="p-0059" num="0096">Several methods have already been proposed in the literature that define generic or specialized mapping functions. The simplest method consists of defining one single function that covers the entire mapping area. The form of this function is critical and prior knowledge of the problem is necessary to make an educated choice. The second class of mapping methods is generic; it is able to effectively model any mapping function provided that the number of parameters is sufficiently high. These methods work by a divide-and-conquer approach, dividing the mapping area in smaller area and defining simple shape functions for the local mapping. The local mapping is then aggregated into a global mapping.</p>
<p id="p-0060" num="0097">In the present invention any general mapping function can be used, as long as the function offers enough detail to model an accurate conversion from reading to point. For the sake of generality, all points here are considered to be three dimensional. One or two dimensional point can be represented by a three dimensional point without any loss of information. The general representation is given below where P<sub>r </sub>(resp. P<sub>3D</sub><sup>c</sup>) represents the receiver reading (resp. 3D point), f is the general mapping function
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>P</i><sub>3D</sub><sup>c</sup><i>=f</i>(<i>P</i><sub>r</sub>),  (1)<?in-line-formulae description="In-line Formulae" end="tail"?>
<br/>
With f defined as
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>f:D</i>−&gt;<img id="CUSTOM-CHARACTER-00001" he="2.46mm" wi="2.12mm" file="US07299145-20071120-P00001.TIF" alt="custom character" img-content="character" img-format="tif"/><sup>3</sup>.  (2)<?in-line-formulae description="In-line Formulae" end="tail"?>
<br/>
and <img id="CUSTOM-CHARACTER-00002" he="2.46mm" wi="2.12mm" file="US07299145-20071120-P00001.TIF" alt="custom character" img-content="character" img-format="tif"/><sup>3</sup>, the three dimensional space and D, the domain of the all possible readings of all receivers:
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>D=∪</i><sub>∀i</sub><i>D</i><sub>i</sub>  (3)<?in-line-formulae description="In-line Formulae" end="tail"?>
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>D</i><sub>i</sub><i>∩D</i><sub>j</sub>=Ø for <i>i≠j</i>  (4)<?in-line-formulae description="In-line Formulae" end="tail"?>
<br/>
D<sub>i</sub>, the domain of all possible readings of the i<sup>th </sup>receiver and this for all receivers. A crucial question concerns the amount of data needed to compute the actual parameters of the mapping function. Unfortunately, there is no definite answer to this question. It depends on the accuracy needed and on the scale of the phenomenon studied.
<br/>
2. Qualification
</p>
<p id="p-0061" num="0098">Qualification consists of a three-dimensional mapping. The calibration maps the reading onto a point located in the physical space, relative to a coordinate system fixed to the non-contact probe. The exact position of this non-contact probe and the determination of its orientation are the tasks of the qualification. The position and the orientation will be determined relative to a coordinate system fixed to the object to be scanned.</p>
<p id="p-0062" num="0099">The non-contact probe coordinate system is described by 6 parameters, three translation components and three rotation components. The system can be decoupled into the translation component q of the non-contact probe and in the rotation matrix Q. The relation between the localizer and the object is similarly given by its orientation M and translation m. A three-dimensional point P<sub>3D</sub><sup>q </sup>relative to the fixed coordinate system is written as
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>P</i><sub>3D</sub><sup>q</sup><i>=M</i>*(<i>Q P</i><sub>3D</sub><sup>c</sup><i>+q</i>)+<i>m,</i>  (5)<?in-line-formulae description="In-line Formulae" end="tail"?>
<br/>
with P<sub>3D</sub><sup>c </sup>a three-dimensional point relative to the non-contact probe coordinate system.
</p>
<p id="p-0063" num="0100">In instances where the value of m depends on Pr, the equation may be rewritten as Equation 5.1, which also cover instances when m is independent of Pr.
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>P</i><sub>3D</sub><sup>q</sup><i>=M</i>*(<i>Q P</i><sub>3D</sub><sup>c</sup><i>+q</i>)+<i>m</i>(<i>Pr</i>),  (5.1)<?in-line-formulae description="In-line Formulae" end="tail"?>
<br/>
Where m(Pr) is the value of m when m depends on Pr.
</p>
<p id="p-0064" num="0101">In general as the localizer moves the non-contact probe and/or the object in space the relative position and orientation of the probe to the object changes. In other words the rotation matrix M and translation component m both change during movement.</p>
<p id="h-0007" num="0000">3. Synchronization</p>
<p id="p-0065" num="0102">During the measurement of an object, the localizer moves and both M and m change continuously, however, the localizer only returns their values at given discrete time steps. Interpolation (linear, parabolic, cubic, or any suitable interpolation scheme (Piegl and Tiller)) are generally used to return a value for intervening time points which can be synchronised with the readings of the receiver. Interpolation of readings from the localizer can be expressed mathematically according to equation (6):
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>M:t→M</i>(<i>t</i>) and <i>m:t→m</i>(<i>t</i>)  (6)<?in-line-formulae description="In-line Formulae" end="tail"?>
<br/>
where M(t) and m(t) are continuous functions of the time t defined from the discrete values of M and m.
</p>
<p id="p-0066" num="0103">In regard of the receiver readings, a synchronization function s that returns a time stamp for every receiver reading, is usually implemented i.e.
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>s:Pr→t </i>where <i>t=s</i>(<i>Pr</i>).  (7)<?in-line-formulae description="In-line Formulae" end="tail"?>
</p>
<p id="p-0067" num="0104">In general this function can be any suitable synchronization function of the art, and which can be implemented by the skilled person. It can be defined based on the receiver design, or by use of a general mapping function such as a non-uniform rational B-spline (NURBS) curve. This function, s, is not defined a priori. It uses a set of parameters that need to be identified, which requires the use of separate, time-consuming procedures.</p>
<p id="p-0068" num="0105">A special instance of s, for a receiver that obtains readings at a fixed rate, we can define
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>t</i><sub>n</sub><i>=s</i>(<i>Pr</i>)=delta+<i>n/f,</i>  (8)<?in-line-formulae description="In-line Formulae" end="tail"?>
<br/>
where t<sub>n </sub>is the time stamp of the receiver reading n, delta is a phase shift (in seconds) and f is the receiver frequency (in Hz). The variables delta and/or f can be considered as parameters that need to be identified in the synchronization function s.
</p>
<p id="p-0069" num="0106">Synchronization described above allows a time stamp to be associated with receiver readings which are produced by a probe periodically, regularly, or a combination of these. It also allows localizer readings to be determined at any time stamp associated with the receiver readings. During the measurement of an object, therefore, both probe and localizer readings are synchronized, so improving the accuracy of the information provided by both devices</p>
<p id="p-0070" num="0107">Using Equation (6), values of M and m at any time t can be readily determined, and using Equation (7), values of t for every receiver reading, Pr can be calculated. Combining Equations (6) and (7), thus, provides a method to obtain the precise values of M and m for every Pr. When M and Pr are synchronised, we have
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>M=M</i>(<i>s</i>(<i>Pr</i>))  (9)<?in-line-formulae description="In-line Formulae" end="tail"?>
</p>
<p id="p-0071" num="0108">It is as aspect of the present invention that the parameters of function s are identified simultaneously with the parameters of calibration and qualification, and not separately.</p>
<p id="p-0072" num="0109">As described above, the necessary steps to convert individual readings of the receivers into actual three-dimensional coordinates, with (if available) the knowledge of the position and orientation of the probe given by the localizer at discrete time steps, are normally de-coupled. By aggregating these various steps, we can thus express directly a 3D point P<sub>3D</sub><sup>q </sup>(also known as P herein) in terms of a receiver reading P<sub>r </sub>by
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>P</i><sub>3D</sub><sup>q</sup><i>=M</i>(<i>t</i>)*(<i>Q</i>(<i>f</i>(<i>P</i><sub>r</sub>))+<i>q</i>)+<i>m</i>(<i>t</i>),  (10)<?in-line-formulae description="In-line Formulae" end="tail"?>
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?>or<?in-line-formulae description="In-line Formulae" end="tail"?>
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>P</i><sub>3D</sub><sup>q</sup><i>=M</i>(<i>s</i>(<i>Pr</i>))*(<i>Q</i>(<i>f</i>(<i>P</i><sub>r</sub>))+<i>q</i>)+<i>m</i>(<i>s</i>(<i>Pr</i>)),  (10.1)<?in-line-formulae description="In-line Formulae" end="tail"?>
<br/>
where f is the calibration function, Q, q and are the position and orientation of the probe stemming from the qualification; M, m and s are the continuous localiser and receiver time functions. These functions and these symbols have been defined in eqs. (1) to (7). Equations (10) and (10.1) contain the following parameters to be defined in the calibration-qualification-synchronization procedure:
<ul id="ul0011" list-style="none">
    <li id="ul0011-0001" num="0000">
    <ul id="ul0012" list-style="none">
        <li id="ul0012-0001" num="0110">the function f is a general mapping function with enough parameters to accurately model the transformation from receiver reading to 3D point in the probe space. Such functions are known in the art. If for example a polynomial function is chosen as mapping function, then the parameters are the coefficients. The degree and the type of polynomial are not parameters but constants.</li>
        <li id="ul0012-0002" num="0111">Depending on the accurate information obtained from the localizer, either three translation components (the position m), or three rotations (the orientation Q), or both are considered as parameters. For example if the localizer is a CMM with accurate information on the position of the probe in the localizer space and the probe performs only parallel movements, the three rotations (the orientation Q) are the only parameters.</li>
        <li id="ul0012-0003" num="0112">The synchronization function s.</li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0073" num="0113">All these parameters can be grouped in a parameter set S, which includes synchronization parameters, and equation (10.1) can be rewritten as:
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>P</i><sub>3D</sub><sup>q</sup><i>=F</i>(<i>P</i><sub>r</sub><i>,S</i>)  (11)<?in-line-formulae description="In-line Formulae" end="tail"?>
</p>
<p id="p-0074" num="0114">With F the compensation function based on a calibration—qualification—synchronization procedure with parameter set S:
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>F:D−&gt;</i><img id="CUSTOM-CHARACTER-00003" he="2.46mm" wi="2.12mm" file="US07299145-20071120-P00001.TIF" alt="custom character" img-content="character" img-format="tif"/><sup>3</sup>  (12)<?in-line-formulae description="In-line Formulae" end="tail"?>
</p>
<p id="p-0075" num="0115">And D defined as in eqs. (3) and (4).</p>
<p id="p-0076" num="0116">In another embodiment, the present invention relates to a method of determining calibration, qualification and synchronization parameters, which is based on a generic function, said generic function being a non-uniform rational B-spline function. The present invention relates to a new general procedure or method for determining all these parameters in a single step. In an embodiment the present invention relates to a method of determining a parameter configuration comprising the steps of:
<ul id="ul0013" list-style="none">
    <li id="ul0013-0001" num="0000">
    <ul id="ul0014" list-style="none">
        <li id="ul0014-0001" num="0117">scanning an single artifact; and</li>
        <li id="ul0014-0002" num="0118">applying a computational procedure to adjust all said parameters directly and simultaneously using the scanning data.</li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0077" num="0119">Said parameter configuration comprises the parameters mentioned above which are required to establish a generic model in which the steps of calibration, qualification and synchronization are integrated.</p>
<p id="p-0078" num="0120">In one embodiment of the invention, the artifact used for calibration, qualification and synchronization of the non-contact probe is identical to the artifact used for the qualification of probe which is a tactile or contact probe and said artifact is a sphere.</p>
<p id="p-0079" num="0121">The method of the invention for simultaneous determination of calibration, qualification and synchronization using a single artifact has several key features. Importantly, only one single artifact is used. Also, the exact size, position, or orientation of this artifact is not initially known. Furthermore, all parameters are evaluated concurrently. In addition, the method performs only one scan of the reference object or artifact and very little user interaction is required. Using this method the adjusted parameters are obtained, which can be used in the above-described generic function.</p>
<p id="p-0080" num="0122">In a preferred embodiment, the present invention relates to a method of determining calibration and qualification parameters comprising the steps of
<ul id="ul0015" list-style="none">
    <li id="ul0015-0001" num="0000">
    <ul id="ul0016" list-style="none">
        <li id="ul0016-0001" num="0123">scanning a single artifact;</li>
        <li id="ul0016-0002" num="0124">determining the optimal position, and optionally, the orientation and/or size of said artifact using the scanning data;</li>
        <li id="ul0016-0003" num="0125">evaluating the quality of said parameter configuration via a multidimensional optimization procedure; and</li>
        <li id="ul0016-0004" num="0126">determining the best configuration of the parameters.</li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0081" num="0127">An example of the procedure is described in more detail as follows: An initial parameter configuration S in equation (11) is chosen. This configuration is used to establish the generic model described above. Subsequently, an artifact is scanned. The data obtained by a scan of this reference object is a series of receiver readings optionally together with the positions and/or orientations of the probe relative to the artifact. When applying the generic model, which was established using the configuration S, to this series of receiver readings a cloud of 3D points is obtained. As neither the exact position, orientation nor size of the reference object are known, using the cloud of 3D points the optimal position and optionally the orientation and/or size of the artifact that matches the 3D points is first determined. Note that calculating the optimal orientation or size of an artifact is optional, depending on the geometry of the object, and whether any dimensions are already known; when a sphere is used, for example, the orientation does not need to be determined, as described below; when the artifact is an object of known dimensions, only the position and orientation of the object need to be determined. Once the position, orientation and size of the artifact have been determined, the cloud of 3D points can be “compared” with the scanned artifact, and then the quality of the parameter configuration (S) is evaluated. Finally, since a cost or a quality can be assigned to each configuration S, a standard multidimensional optimization procedure can be applied to determine the best configuration S<sub>best</sub>.</p>
<p id="p-0082" num="0128">In the following description, the standard multidimensional optimization procedure is explained in further detail. Designing a proper cost function is crucial in any optimization procedure and it has been the subject of many publications in the prior art. A “good” cost function should represent accurately the model being investigated without being too complex as to prevent any optimization. In other words, a minimum of the cost function should represent an optimal configuration of the parameters while plateau's in the cost function should be avoided to ensure convergence of the iterative algorithm. From a computational point of view, the cost function should also be easy to compute as it needs to be evaluated many times.</p>
<p id="p-0083" num="0129">A multidimensional optimization procedure of the present invention is disclosed in the following description. In one aspect of the invention, an algorithm starts from an initial configuration S<sub>ini </sub>and defines it as the current configuration S<sub>cur</sub>. Then, in a loop, the configuration is iteratively adapted, yielding each time a new S<sub>cur</sub>, in an attempt to better match the cloud of 3D points with the artifact shape. The algorithms stops when the accuracy can no longer be improved, i.e. when the cost function is at its minimum.</p>
<p id="p-0084" num="0130">In a method of the present invention, the evaluation of the cost function consists of two phases. The first phase consists of determining the best position, and optionally size and/or orientation of an artifact using the 3D points obtained with the active configuration S<sub>cur</sub>. Depending of the shape of the artifact a direct computation or an iterative computation is performed.</p>
<p id="p-0085" num="0131">In the second phase, the distance between the individual 3D points and the artifact are computed and aggregated, using, for example, one or more average square distance, variance, volume, area computation, axis of inertia calculations, or other method known in the art, to give the actual cost of the parameter configuration. In the ideal situation, when all distances are zero, i.e. all points lie perfectly on the artifact, the cost function is zero and the active configuration is optimal. An example of an algorithm is given below:
<ul id="ul0017" list-style="none">
    <li id="ul0017-0001" num="0000">
    <ul id="ul0018" list-style="none">
        <li id="ul0018-0001" num="0132">1. Choose an initial configuration S<sub>ini </sub></li>
        <li id="ul0018-0002" num="0133">2. Set initial configuration as current configuration S<sub>cur</sub>=S<sub>ini </sub></li>
        <li id="ul0018-0003" num="0134">3. Set S<sub>best</sub>=S<sub>cur </sub>and the cost C(S<sub>best</sub>)=∞</li>
        <li id="ul0018-0004" num="0135">4. While C(S<sub>best</sub>) is not within the desired accuracy (as set by the user), do the following:
        <ul id="ul0019" list-style="none">
            <li id="ul0019-0001" num="0136">5. Compute the cloud of 3D points from eq. (7), using the receiver readings and S<sub>cur </sub></li>
            <li id="ul0019-0002" num="0137">6. Evaluate the best position, and optionally, orientation and/or size of the artifact for the computed 3D points</li>
            <li id="ul0019-0003" num="0138">7. Compare the virtual artifact with the 3D points to compute the cost C(S<sub>cur</sub>)</li>
            <li id="ul0019-0004" num="0139">8. If C(S<sub>cur</sub>)&lt;C(S<sub>best</sub>), S<sub>best</sub>=S<sub>cur</sub>.</li>
            <li id="ul0019-0005" num="0140">9. Choose a new S<sub>cur </sub>keeping fixed the parameters of f<b>2</b>
<br/>
At the end of the computation, the parameters of S<sub>best </sub>are those that give the best representation of the artifact.
</li>
        </ul>
        </li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0086" num="0141">Step 6 determines the best position and optionally, the orientation and/or size of the artifact, by comparing a cloud of 3D points generated in step 5 with the artifact. In one aspect of the invention, if the artifact is an object of unknown position, dimension(s) and orientation, but its shape is mathematically defined, the best-fit position, dimension(s) and orientation may be derived by iterative fitting the unknown position, dimensions and orientation using the mathematical description of the shape to the cloud of 3-D points. In another aspect of the invention, if the artifact is an irregular object of accurately known dimensions, its position and orientation may be determined by iteratively fitting the best position and orientation of the object dimensions to the cloud of 3D points. The dimensions may be read, for example, from a look-up table. The method can determine the best position, orientation and size of the artifact, for any combination of available object parameters. The iterative fittings of the artifact to the cloud points may be performed by a shaping-matching model comprising any known methods of the art. Possible shapes of the artifact include cylinders, cubes, boxes, spheres, any irregular or regular shape.</p>
<p id="p-0087" num="0142">For the purpose of illustration, general shape matching with a sphere will be described, although the procedure is non-limiting for the present invention. A sphere can be described by 3 parameters for its center c: (c<sub>x</sub>, c<sub>y</sub>, c<sub>z</sub>), and one parameter for its radius r. For every point p, with parameters (p<sub>x</sub>, p<sub>y</sub>, p<sub>z</sub>), it is then easy to compute its distance d to the sphere as
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>d=∥p−c∥</i><sub>2</sub><i>−r</i>=((<i>p</i><sub>x</sub><i>−c</i><sub>x</sub>)<sup>2</sup>+(<i>p</i><sub>y</sub><i>−c</i><sub>y</sub>)<sup>2</sup>+(<i>p</i><sub>z</sub><i>−c</i><sub>z</sub>)<sup>2</sup>)<sup>1/2</sup><i>−r</i>  (13)<?in-line-formulae description="In-line Formulae" end="tail"?>
<br/>
or a pseudo distance
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>d′=∥p−c∥</i><sub>2</sub><sup>2</sup><i>−r</i><sup>2</sup>=(<i>p</i><sub>x</sub><i>−c</i><sub>x</sub>)<sup>2</sup>+(<i>p</i><sub>y</sub><i>−c</i><sub>y</sub>)<sup>2</sup>+(<i>p </i><sub>Z</sub><i>−c</i><sub>z</sub>)<sup>2</sup><i>−r</i><sup>2</sup>  (14)<?in-line-formulae description="In-line Formulae" end="tail"?>
<br/>
For a given set of parameters (c, r), it is then possible to define a cost function:
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>C</i><sub>art</sub>(<i>c,r</i>)=Σ<i>d</i><sup>2</sup>,  (15)<?in-line-formulae description="In-line Formulae" end="tail"?>
<br/>
or
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>C</i><sub>art</sub>(<i>c,r</i>)=Σ<i>d′</i><sup>2</sup>,  (16)<?in-line-formulae description="In-line Formulae" end="tail"?>
<br/>
where the sum goes over all points of the receiver(s).
</p>
<p id="p-0088" num="0143">Standard derivation techniques can be used to determine the values of c and r that minimize C<sub>art</sub>. When the cost function C<sub>art </sub>is non linear, a regular multidimensional optimization procedure can be used to determine the best values of c and r.</p>
<p id="p-0089" num="0144">The results of step 6 is a virtual artifact whose best position, size and orientation have been calculated (or were partly already known). In step 7, the cloud of 3D points generated in step 5 is compared to said virtual artifact, and a cost of fitting is generated for a set of S parameters. The method used to generate the cost (the cost function, C) can be any known in the art, as already mentioned above. The value of S is adjusted until the cost of fitting is minimized. The minimization procedure can be any known in the art.</p>
<p id="p-0090" num="0145">Thus, the two cost functions C and C<sub>art </sub>used in the calibration-qualification procedure are described above. The general cost function C is used to find the parameter configuration for the calibration and qualification while the second function C<sub>art </sub>is used inside the first to find the best shape.</p>
<p id="p-0091" num="0146">According to the above example, only the shape of the sphere is needed and not its actual size. As a consequence, the radius r of the sphere is required to be determined by the shape-matching model C<sub>art</sub>. Of course if, for other shapes, additional information is available, such as a size, an aspect ratio, dimensions etc, they can be easily used to reduce the number of parameters required to be determined by the shape-matching model. In the example provided above in which the artifact is a sphere, were the radius to be already known, the problem would be reduced to the determination of the optimal sphere center c—and so there would only be three parameters to determine.</p>
<p id="p-0092" num="0147">When robust optimization algorithms are used, the initial configuration is of little importance. However, when the cost function contains many local minima, providing an initial configuration close to the optimal, but unknown, configuration is desirable. With the model according to the present invention, it is also possible to automate this step. Indeed, the model according to the present invention contains two loosely connected entities, namely, the calibration and the qualification. In order to the find an initial good configuration, one of both entities is fixed and the other one is solved.</p>
<p id="p-0093" num="0148">More precisely, when qualification is not required and hence neglected in the calculation, only the calibration is investigated. When only a calibration is performed, values of Q and m according to equation 10.1 should be known and are fixed in the calculation.</p>
<p id="p-0094" num="0149">With a fixed calibration, the optimization of, at most, 6 parameters of the qualification can be performed in a straightforward manner using a method of the present invention. When only a qualification is performed, the value of F should be known and fixed in the calculation.</p>
<p id="p-0095" num="0150">When calibration, qualification and synchronization calculations are performed separately as described in the preceding paragraphs, the values obtained by one calculation may be used as the fixed, known parameter in the other calculation. For example, a qualification-only optimization will produce values of Q and q; the values of Q and q so calculated can be used as the fixed values in the calibration-only optimization and in the synchronization only operation. Performing several iterations of separate calibration, qualification and synchronization calculations wherein the parameters obtained from one calculation are used in the other calculation, results in an initial configuration parameter set that is close to the optimal configuration achieved by performing calibration and qualification simultaneously.</p>
<p id="p-0096" num="0151">With certain choices of fixed parameter subset, the complexity of the optimization problem reduces significantly. For example, if f<b>1</b> contains the linear parameters of the calibration, the optimization becomes a linear problem and can be solved directly without the need of an iterative procedure. Similarly, if f<b>1</b> is defined as a continuous function, its derivative can be analytically estimated and hence, faster and more robust optimization techniques may be employed.</p>
<p id="p-0097" num="0152">Using presently known methods, the synchronization uses qualification and calibration, and must then be performed after these steps. There are two possible choices using the methods in the art:
<ul id="ul0020" list-style="none">
    <li id="ul0020-0001" num="0000">
    <ul id="ul0021" list-style="none">
        <li id="ul0021-0001" num="0153">1. Calibration and qualification are performed with a continuous motion of the localizer without synchronization in which case the results are thus not accurate.</li>
        <li id="ul0021-0002" num="0154">2. Calibration and qualification are performed with discrete motion of the localizer, i.e. one must ensure that the localizer is absolutely still for every receiver readings. This is a time consuming procedure.
<br/>
Hence, using methods of the art either time or accuracy are lost. By simultaneously determining parameters of synchronization with calibration and qualification, these problems are overcome.
</li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0098" num="0155">The method presented herein allows an unskilled operator to perform a simultaneous calibration, qualification and synchronization of a point cloud generator. The quality of said calibration, qualification and synchronization are independent of the skill of the operator, in contrast to the present methods of the art, which are technically demanding and require a high level of skill and experience.</p>
<p id="p-0099" num="0156">The method presented herein allows a simultaneous calibration, qualification and synchronization of a point cloud generator within 5 minutes of the generation of the cloud point. The method presented herein allows an improved simultaneous calibration, qualification and synchronization of a point cloud generator within 10, 15, 20, 25, 30, 35, 40, 45, 50, 55, 60, 70, 80, 90, 100, 120, 140, 160, 180, 200, 250, 300, 350, 400, 450, or 500 minutes of the generation of the cloud point. The speed of the method is achieved because no manual interventions are required; the method is automatic.</p>
<p id="p-0100" num="0157">The method presented herein allows a simultaneous calibration, qualification and synchronization of a point cloud generator without manual intervention, once the first scan has been instructed, in contrast to the present methods of the art, which requires extensive manual interventions and skill to adjust components of the point cloud generator.</p>
<p id="p-0101" num="0158">In one embodiment of the invention, the minimisation algorithm given in <figref idref="DRAWINGS">FIG. 1</figref> is used. The minimization algorithm uses a Monte-Carlo method where the current calibration, qualifications and synchronization are randomly perturbed and accepted if the resulting set of points is closer to the artifact (see Z. Michalewicz, “Modern Heuristics” for a survey of Monte-Carlo method). The calibration is performed by means of a non-uniform rational B-spline (NURBS) curve or surface depending on the dimension of the receiver. The algorithm uses an order two NURBS with uniform knot vector (see Piegl and Tiller, “The NURBS Book”). The numbers of knots and control points depend on the desired accuracy of the calibration. The qualification is defined as a 4×4 matrix with 6 degrees of freedom.</p>
<p id="p-0102" num="0159">In another embodiment, the present invention relates to the use of a single artifact for performing the calibration, qualification and synchronization procedure according to the method of the invention.</p>
<p id="p-0103" num="0160">In another embodiment, the present invention relates to a computer program stored on a computer readable medium wherein the steps of the method according to the invention are performed. Another embodiment of the invention concerns a computer adapted and programmed to carry out the computer program according to the invention.</p>
<p id="p-0104" num="0161">Moreover, the present invention also relates to a non-contact probe configured to perform a method of the invention. This non-contact probe is consequently capable of performing at least 1 and preferably the 2 steps of calibration, qualification and synchronization in a single operation. After these steps have been performed the non-contact probe is ready for industrial use by the end-user, until it is dismounted from the localizer or until its position or orientation is changed with respect to the localizer.</p>
<p id="p-0105" num="0162">The present invention also provides for a non-contact device comprising a non-contact probe according to the invention, which is mounted on a localizer, and an artifact.</p>
<?DETDESC description="Detailed Description" end="tail"?>
</description>
<us-claim-statement>The invention claimed is:</us-claim-statement>
<claims id="claims">
<claim id="CLM-00001" num="00001">
<claim-text>1. A method for the calibration, qualification and synchronization of a point cloud generator, said point cloud generator comprising a non-contact probe on a localizer, comprising determining the transformation of an electrical reading of the receivers in said non-contact probe in point coordinates relative to said probe and identifying the position and orientation of the said non-contact probe in the measuring volume of the said localizer, thereby determining calibration, qualification and synchronization parameters simultaneously.</claim-text>
</claim>
<claim id="CLM-00002" num="00002">
<claim-text>2. A method according to <claim-ref idref="CLM-00001">claim 1</claim-ref> whereby calibration, qualification and synchronization are performed using the same artifact.</claim-text>
</claim>
<claim id="CLM-00003" num="00003">
<claim-text>3. A method according to <claim-ref idref="CLM-00002">claim 2</claim-ref>, whereby said artifact is a physical object susceptible to point cloud generation, whose outer shape and/or part thereof is definable using a mathematical function and/or look-up tables.</claim-text>
</claim>
<claim id="CLM-00004" num="00004">
<claim-text>4. A method according to <claim-ref idref="CLM-00002">claim 2</claim-ref>, whereby said artifact is a sphere, cylinder or box.</claim-text>
</claim>
<claim id="CLM-00005" num="00005">
<claim-text>5. A method according to <claim-ref idref="CLM-00002">claim 2</claim-ref>, whereby said artifact is a sphere of unknown diameter.</claim-text>
</claim>
<claim id="CLM-00006" num="00006">
<claim-text>6. A method according to <claim-ref idref="CLM-00002">claim 2</claim-ref>, whereby said artifact has unknown dimensions prior to the execution of said method.</claim-text>
</claim>
<claim id="CLM-00007" num="00007">
<claim-text>7. A method according to <claim-ref idref="CLM-00002">claim 2</claim-ref>, whereby said artifact has unknown position with respect to said localizer prior to the execution of said method.</claim-text>
</claim>
<claim id="CLM-00008" num="00008">
<claim-text>8. A method according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, whereby said method is performed without manual intervention.</claim-text>
</claim>
<claim id="CLM-00009" num="00009">
<claim-text>9. A method according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, whereby said method is executed at a user's site.</claim-text>
</claim>
<claim id="CLM-00010" num="00010">
<claim-text>10. A method according to <claim-ref idref="CLM-00002">claim 2</claim-ref>, comprising the steps of:
<claim-text>a) scanning said artifact using said point cloud generator,</claim-text>
<claim-text>b) calculating cloud points, P, using parameters relating to calibration, qualification and synchronization,</claim-text>
<claim-text>c) calculating the position and optionally the orientation and/or size of said artifact using P calculated in step b) and knowledge of the artefact according to a mathematical function and/or look-up tables which define said artifact,</claim-text>
<claim-text>d) comparing the values of P, with those calculated for the artifact derived from step c),</claim-text>
<claim-text>e) adjusting parameters relating to calibration, qualification and synchronization, and</claim-text>
<claim-text>f) repeating steps b) to e) until parameters relating to calibration, qualification synchronization are obtained which provide the closest comparison according to step d).</claim-text>
</claim-text>
</claim>
<claim id="CLM-00011" num="00011">
<claim-text>11. A method according to <claim-ref idref="CLM-00010">claim 10</claim-ref>, wherein steps b) to f) comprise:
<claim-text>b) calculating points according to [2]:
<claim-text>
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>P=F</i>(<i>Pr, S</i>)  [2]:<?in-line-formulae description="In-line Formulae" end="tail"?>
</claim-text>
</claim-text>
<claim-text>wherein Pr is a reading of a receiver of the non-contact probe,</claim-text>
<claim-text>P is a point, calculated from Pr, relative to a fixed coordinate system,</claim-text>
<claim-text>S is a parameter set describing qualification, calibration and synchronization, and</claim-text>
<claim-text>F is a compensation function to convert a receiver reading in a 3D point relative to a fixed coordinate system, said compensation function being applied to Pr using parameter set S,</claim-text>
<claim-text>c) calculating the position and optionally the orientation and/or size of said artifact using the values of P obtained in step b),</claim-text>
<claim-text>d) comparing the values of P, with those calculated for the artifact derived from step c),</claim-text>
<claim-text>e) adjusting S, and</claim-text>
<claim-text>f) repeating steps b) to e) until value of S is obtained which provides the closest comparison according to step d).</claim-text>
</claim-text>
</claim>
<claim id="CLM-00012" num="00012">
<claim-text>12. A method according to <claim-ref idref="CLM-00010">claim 10</claim-ref> wherein step c) comprises:
<claim-text>g) comparing the points P obtained in step b) to those expected of said artifact according to a mathematical function and/or look-up tables which define said artifact,</claim-text>
<claim-text>h) adjusting one or more of the values corresponding to the position and optionally the orientation and/or size of said artifact, and</claim-text>
<claim-text>i) repeating steps g) and h) until values corresponding to the position, and if calculated orientation and/or size are obtained which provide the closest comparison according to step g).</claim-text>
</claim-text>
</claim>
<claim id="CLM-00013" num="00013">
<claim-text>13. A method according to <claim-ref idref="CLM-00010">claim 10</claim-ref> wherein the values calculated for the artifact as mentioned in step d) are derived from a mathematical function and/or look-up tables which define said artifact, the values corresponding to the position, and if calculated orientation and/or size as obtained in step c).</claim-text>
</claim>
<claim id="CLM-00014" num="00014">
<claim-text>14. A method according to <claim-ref idref="CLM-00010">claim 10</claim-ref>, wherein the comparison performed in step d) comprises one or more average square distance, variance, volume, area and/or axis of inertia calculations.</claim-text>
</claim>
<claim id="CLM-00015" num="00015">
<claim-text>15. A method according to <claim-ref idref="CLM-00011">claim 11</claim-ref> whereby step b) is based on the function [1]
<claim-text>
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>P=M</i>(<i>s</i>(<i>Pr</i>))*(<i>Q</i>(<i>f</i>(<i>Pr</i>))+<i>q</i>)+<i>m</i>(<i>s</i>(<i>Pr</i>))  [1]<?in-line-formulae description="In-line Formulae" end="tail"?>
</claim-text>
</claim-text>
<claim-text>where
<claim-text>Pr is a reading of a receiver of the non-contact probe,</claim-text>
<claim-text>P is a cloud point, calculated from Pr, relative to a fixed coordinate system,</claim-text>
<claim-text>f is a general mapping function, that maps receiver readings to 1D, 2D or 3D point coordinates, relative to a coordinate frame fixed to the non-contact probe,</claim-text>
<claim-text>Q, q are the orientation, position of the non-contact probe relative to the localizer, M, m are the orientation and position of the localizer relative to a fixed coordinate frame for a given value of Pr, s is the time stamp for a given value of Pr; all three with respect to a fixed coordinate frame; none or one or more considered as known parameters.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00016" num="00016">
<claim-text>16. A method according to <claim-ref idref="CLM-00015">claim 15</claim-ref> wherein f is a non-uniform rational B-spline function.</claim-text>
</claim>
<claim id="CLM-00017" num="00017">
<claim-text>17. A method according to <claim-ref idref="CLM-00015">claim 15</claim-ref> wherein s is a non-uniform rational B-spline function.</claim-text>
</claim>
<claim id="CLM-00018" num="00018">
<claim-text>18. A method to allow an unskilled operator to perform a calibration, qualification and synchronization of a point cloud generator, using a method defined in <claim-ref idref="CLM-00001">claim 1</claim-ref>.</claim-text>
</claim>
<claim id="CLM-00019" num="00019">
<claim-text>19. A method for performing a simultaneous calibration, qualification and synchronization of a point cloud generator within 5 minutes of generating the cloud point, using a method defined in <claim-ref idref="CLM-00001">claim 1</claim-ref>.</claim-text>
</claim>
<claim id="CLM-00020" num="00020">
<claim-text>20. A method for performing a simultaneous calibration, qualification and synchronization of a point cloud generator without manual intervention, using a method defined in <claim-ref idref="CLM-00001">claim 1</claim-ref>.</claim-text>
</claim>
<claim id="CLM-00021" num="00021">
<claim-text>21. Use of a single artifact for performing the calibration, qualification and synchronization procedure according to the method of <claim-ref idref="CLM-00001">claim 1</claim-ref>.</claim-text>
</claim>
<claim id="CLM-00022" num="00022">
<claim-text>22. A computer program stored on a computer readable medium, suitable for performing a method according to <claim-ref idref="CLM-00001">claim 1</claim-ref>.</claim-text>
</claim>
<claim id="CLM-00023" num="00023">
<claim-text>23. Computer comprising a computer readable medium adapted and programmed to carry out the computer program according to <claim-ref idref="CLM-00022">claim 22</claim-ref>.</claim-text>
</claim>
<claim id="CLM-00024" num="00024">
<claim-text>24. A non-contact probe configured to perform a method of <claim-ref idref="CLM-00001">claim 1</claim-ref>.</claim-text>
</claim>
<claim id="CLM-00025" num="00025">
<claim-text>25. A non-contact device comprising an artifact and a non-contact probe according to <claim-ref idref="CLM-00024">claim 24</claim-ref> mounted on a localizer.</claim-text>
</claim>
<claim id="CLM-00026" num="00026">
<claim-text>26. A method for the simultaneous calibration, qualification and synchronization of a point cloud generator, said point cloud generator comprising a two-dimensional line laser scanner mounted on a 3D co-ordinate measuring machine, comprising:
<claim-text>j) scanning a sphere using said point cloud generator,</claim-text>
<claim-text>k) calculating points according to function [2]
<claim-text>
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>P=F</i>(<i>Pr, S</i>)  [2]<?in-line-formulae description="In-line Formulae" end="tail"?>
</claim-text>
</claim-text>
<claim-text>wherein Pr is a reading of a receiver of the two-dimensional line laser scanner,</claim-text>
<claim-text>P is a point, calculated from Pr, relative to a fixed coordinate system,</claim-text>
<claim-text>F is a compensation function based on f, Q, q, S, M and m, said compensation function being applied to Pr using parameter set S,</claim-text>
<claim-text>Q, q is the orientation and position of the line laser scanner relative to the 3D co-ordinate measuring machine; s is the time stamp for a given value of Pr; f is a general mapping function, that mares receiver readings to 1D, 2D or 3D point co-ordinates, relative to a co-ordinate frame fixed to the line laser scanner; M, m is the orientation position of the 3D co-ordinate measuring machine relative to a fixed frame for a given value of Pr; all values with respect to a fixed coordinate frame and none, one or more, or all values considered as known parameters,</claim-text>
<claim-text>I) comparing the points P obtained in step k) to those expected of said sphere according to a mathematical function defining said sphere,</claim-text>
<claim-text>m) adjusting one or more of the values corresponding to the position and size of said sphere,</claim-text>
<claim-text>n) repeating steps I) and m) until values corresponding to the position and size are obtained which provide the closest comparison according to step I),</claim-text>
<claim-text>o) comparing the values of P, with those calculated for the sphere, the latter obtained from mathematical function which defines said sphere, and the values corresponding to its position and size as obtained in step n).</claim-text>
<claim-text>p) adjusting S, and</claim-text>
<claim-text>q) repeating steps k) to n) until value of S is obtained which provides the closest comparison according to step o).</claim-text>
</claim-text>
</claim>
</claims>
</us-patent-grant>
