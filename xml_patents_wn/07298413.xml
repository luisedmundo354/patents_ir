<us-patent-grant lang="EN" dtd-version="v4.2 2006-08-23" file="US07298413-20071120.XML" status="PRODUCTION" id="us-patent-grant" country="US" date-produced="20071106" date-publ="20071120">
<us-bibliographic-data-grant>
<publication-reference>
<document-id>
<country>US</country>
<doc-number>07298413</doc-number>
<kind>B2</kind>
<date>20071120</date>
</document-id>
</publication-reference>
<application-reference appl-type="utility">
<document-id>
<country>US</country>
<doc-number>10394267</doc-number>
<date>20030324</date>
</document-id>
</application-reference>
<us-application-series-code>10</us-application-series-code>
<priority-claims>
<priority-claim sequence="01" kind="national">
<country>JP</country>
<doc-number>2002-080257</doc-number>
<date>20020322</date>
</priority-claim>
<priority-claim sequence="02" kind="national">
<country>JP</country>
<doc-number>2002-080881</doc-number>
<date>20020322</date>
</priority-claim>
</priority-claims>
<us-term-of-grant>
<us-term-extension>865</us-term-extension>
</us-term-of-grant>
<classifications-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>G</section>
<class>03</class>
<subclass>B</subclass>
<main-group>13</main-group>
<subgroup>00</subgroup>
<symbol-position>F</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20071120</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
</classifications-ipcr>
<classification-national>
<country>US</country>
<main-classification>348349</main-classification>
<further-classification>348353</further-classification>
</classification-national>
<invention-title id="d0e89">Photographing apparatus with automatic focus</invention-title>
<references-cited>
<citation>
<patcit num="00001">
<document-id>
<country>US</country>
<doc-number>5083150</doc-number>
<kind>A</kind>
<name>Nagasaki et al.</name>
<date>19920100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>396 49</main-classification></classification-national>
</citation>
<citation>
<patcit num="00002">
<document-id>
<country>US</country>
<doc-number>5115262</doc-number>
<kind>A</kind>
<name>Komiya</name>
<date>19920500</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>396 91</main-classification></classification-national>
</citation>
<citation>
<patcit num="00003">
<document-id>
<country>US</country>
<doc-number>5249058</doc-number>
<kind>A</kind>
<name>Murata et al.</name>
<date>19930900</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>348354</main-classification></classification-national>
</citation>
<citation>
<patcit num="00004">
<document-id>
<country>US</country>
<doc-number>2002/0012063</doc-number>
<kind>A1</kind>
<name>Kobayashi</name>
<date>20020100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>348345</main-classification></classification-national>
</citation>
<citation>
<patcit num="00005">
<document-id>
<country>JP</country>
<doc-number>5-227465</doc-number>
<date>19930900</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00006">
<document-id>
<country>JP</country>
<doc-number>2001-061096</doc-number>
<date>20010600</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00007">
<document-id>
<country>JP</country>
<doc-number>2001-272594</doc-number>
<date>20011000</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00008">
<document-id>
<country>JP</country>
<doc-number>2001-281529</doc-number>
<date>20011000</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<nplcit num="00009">
<othercit>U.S. Appl. No. 10/394,267, filed Mar. 24, 2003, Kajiyama.</othercit>
</nplcit>
<category>cited by other</category>
</citation>
<citation>
<nplcit num="00010">
<othercit>U.S. Appl. No. 10/636,712, filed Aug. 8, 2003, Shinohara et al.</othercit>
</nplcit>
<category>cited by other</category>
</citation>
</references-cited>
<number-of-claims>15</number-of-claims>
<us-exemplary-claim>1</us-exemplary-claim>
<us-field-of-classification-search>
<classification-national>
<country>US</country>
<main-classification>348345-356</main-classification>
<additional-info>unstructured</additional-info>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>396 77</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>396 79</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>396123</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>396133</main-classification>
</classification-national>
</us-field-of-classification-search>
<figures>
<number-of-drawing-sheets>22</number-of-drawing-sheets>
<number-of-figures>22</number-of-figures>
</figures>
<us-related-documents>
<related-publication>
<document-id>
<country>US</country>
<doc-number>20030223740</doc-number>
<kind>A1</kind>
<date>20031204</date>
</document-id>
</related-publication>
</us-related-documents>
<parties>
<applicants>
<applicant sequence="001" app-type="applicant-inventor" designation="us-only">
<addressbook>
<last-name>Kajiyama</last-name>
<first-name>Takashi</first-name>
<address>
<city>Tokyo</city>
<country>JP</country>
</address>
</addressbook>
<nationality>
<country>JP</country>
</nationality>
<residence>
<country>JP</country>
</residence>
</applicant>
</applicants>
<agents>
<agent sequence="01" rep-type="attorney">
<addressbook>
<orgname>Oblon, Spivak, McClelland, Maier &amp; Neustadt, P.C.</orgname>
<address>
<country>unknown</country>
</address>
</addressbook>
</agent>
</agents>
</parties>
<assignees>
<assignee>
<addressbook>
<orgname>Ricoh Company, Ltd.</orgname>
<role>03</role>
<address>
<city>Tokyo</city>
<country>JP</country>
</address>
</addressbook>
</assignee>
</assignees>
<examiners>
<primary-examiner>
<last-name>Vu</last-name>
<first-name>Ngoc-Yen</first-name>
<department>2622</department>
</primary-examiner>
<assistant-examiner>
<last-name>Yoder, III</last-name>
<first-name>Chriss S</first-name>
</assistant-examiner>
</examiners>
</us-bibliographic-data-grant>
<abstract id="abstract">
<p id="p-0001" num="0000">A photographing apparatus is provided that comprises a photographing lens capable of moving a focal plane of a subject image, a CCD for receiving the subject image and outputting a signal into which the subject image is photo-electrically transferred, as image output, a motor section for driving the photographing lens, and a CPU for controlling an operation of the motor section. This CPU divides a range for enabling driving of the photographing lens <b>1</b> into a minimum number of or more sections which are capable of being interpolated, drives the photographing lens to each divided section in sequence, figures out a focus signal based on a photographing signal obtained from the photographing device at the each driving position, and performs interpolation processing of an evaluation value obtained from the focus signal. Further, by the interpolation processing, the CPU derives a focus position of the photographing lens which position causes the focal plane to coincide with the photographing plane. In addition, the CPU drivingly controls the motor section to drive the photographing lens to the derived focus position. The photographing apparatus with this configuration ensures interpolation accuracy, thus offering an excellent balance of focus-position accuracy in an entire driving range of the photographing lens and time needed for obtaining the focus position.</p>
</abstract>
<drawings id="DRAWINGS">
<figure id="Fig-EMI-D00000" num="00000">
<img id="EMI-D00000" he="259.84mm" wi="178.56mm" file="US07298413-20071120-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00001" num="00001">
<img id="EMI-D00001" he="239.86mm" wi="189.40mm" orientation="landscape" file="US07298413-20071120-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00002" num="00002">
<img id="EMI-D00002" he="234.78mm" wi="175.18mm" file="US07298413-20071120-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00003" num="00003">
<img id="EMI-D00003" he="233.85mm" wi="172.89mm" file="US07298413-20071120-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00004" num="00004">
<img id="EMI-D00004" he="262.89mm" wi="180.34mm" file="US07298413-20071120-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00005" num="00005">
<img id="EMI-D00005" he="234.19mm" wi="129.03mm" file="US07298413-20071120-D00005.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00006" num="00006">
<img id="EMI-D00006" he="211.84mm" wi="128.44mm" file="US07298413-20071120-D00006.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00007" num="00007">
<img id="EMI-D00007" he="213.11mm" wi="129.03mm" file="US07298413-20071120-D00007.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00008" num="00008">
<img id="EMI-D00008" he="262.97mm" wi="180.68mm" file="US07298413-20071120-D00008.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00009" num="00009">
<img id="EMI-D00009" he="239.86mm" wi="183.73mm" orientation="landscape" file="US07298413-20071120-D00009.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00010" num="00010">
<img id="EMI-D00010" he="240.88mm" wi="172.21mm" orientation="landscape" file="US07298413-20071120-D00010.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00011" num="00011">
<img id="EMI-D00011" he="259.59mm" wi="122.94mm" file="US07298413-20071120-D00011.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00012" num="00012">
<img id="EMI-D00012" he="234.61mm" wi="181.53mm" file="US07298413-20071120-D00012.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00013" num="00013">
<img id="EMI-D00013" he="235.12mm" wi="178.14mm" file="US07298413-20071120-D00013.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00014" num="00014">
<img id="EMI-D00014" he="261.45mm" wi="181.95mm" file="US07298413-20071120-D00014.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00015" num="00015">
<img id="EMI-D00015" he="272.29mm" wi="189.23mm" file="US07298413-20071120-D00015.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00016" num="00016">
<img id="EMI-D00016" he="233.43mm" wi="181.36mm" file="US07298413-20071120-D00016.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00017" num="00017">
<img id="EMI-D00017" he="231.73mm" wi="177.29mm" file="US07298413-20071120-D00017.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00018" num="00018">
<img id="EMI-D00018" he="245.96mm" wi="181.86mm" file="US07298413-20071120-D00018.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00019" num="00019">
<img id="EMI-D00019" he="245.70mm" wi="187.54mm" file="US07298413-20071120-D00019.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00020" num="00020">
<img id="EMI-D00020" he="241.13mm" wi="179.07mm" file="US07298413-20071120-D00020.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00021" num="00021">
<img id="EMI-D00021" he="237.74mm" wi="179.66mm" file="US07298413-20071120-D00021.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00022" num="00022">
<img id="EMI-D00022" he="239.10mm" wi="184.23mm" file="US07298413-20071120-D00022.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
</drawings>
<description id="description">
<?BRFSUM description="Brief Summary" end="lead"?>
<heading id="h-0001" level="1">BACKGROUND OF THE INVENTION</heading>
<p id="p-0002" num="0001">1. Field of the Invention</p>
<p id="p-0003" num="0002">The present invention relates to a photographing apparatus having a function capable of automatically focusing by detecting a focus position using auto-focus (AF) of a charge coupled device (CCD), namely, CCD-AF, for example.</p>
<p id="p-0004" num="0003">2. Description of the Prior Art</p>
<p id="p-0005" num="0004">A conventional photographing apparatus is, for example, a video camera, a digital camera, or the like. A conventional video camera employs a contrast system in order to perform auto-focusing. In this contrast system, with a focusing lens being driven, contrasts of photographed images acquired at respective driving steps are obtained as evaluation values, and a lens position having the highest evaluation value among them is set as a focus position.</p>
<p id="p-0006" num="0005">In this video camera, a CCD photographing device used has pixels in the order of several hundreds of thousands because it is used to photograph moving images. For this reason, high accuracy in AF is not required. If a focusing speed is high too when photographing video, movement of focus will be frequently carried out in accordance with the movements of the camera and a subject, and hence user's eyes will not be able to follow the focus movement, thus causing the user to feel the abnormal of images.</p>
<p id="p-0007" num="0006">In contrast, the digital cameras for photographing still-frame images are required to quickly perform auto-focusing and not to miss a shutter chance.</p>
<p id="p-0008" num="0007">However, in digital cameras having a CCD photographing device with a high pixel density, because a focus position must be figured out with high accuracy, a lens position with the highest evaluation value is needed to be detected by repeating driving of a lens by a fine pitch based on the depth of field.</p>
<p id="p-0009" num="0008">Thus, in the digital cameras using the CCD photographing device having high-density, the use of conventional contrast-system auto-focusing increases the driving number of lens, thus taking a long time to figure out a focus position, leading to miss a shutter chance.</p>
<p id="p-0010" num="0009">Particularly, in cases where a subject is extremely out of focus, it will take a very long time to obtain the focus position, and hence it is necessary to efficiently perform auto-focusing so as not to miss the shutter chance.</p>
<p id="p-0011" num="0010">In view of the above-mentioned problems of the contrast system employed in such video cameras, a digital camera that permits effectively obtaining a focus position is proposed (see, for example, Japanese Patent Laid-Open Publication No. 2001-281529).</p>
<p id="p-0012" num="0011">In this digital camera, a driving circuit drives a photographing lens in several steps by a larger distance than the depth of field, figures out an evaluation value based on a photographed image obtained from the photographing device in each driving step, and then performs predetermined interpolation of a plurality of the evaluation values of plural driving steps, thereby obtaining a focus position of the photographing lens for causing a focal plane to coincide with a photographing plane. This driving circuit drives the photographing lens to the focus position based on focus position data obtained.</p>
<p id="p-0013" num="0012">Thus, the conventional digital camera achieves reduction in time to obtain the focus position, while keeping high accuracy by the interpolation of the evaluation values.</p>
<p id="p-0014" num="0013">However, since this camera drives the photographing lens by a larger interval or pitch than the depth of field, when dividing a scanning range for auto-focusing into intervals each being larger than the depth field, the appropriate accuracy of the interpolating operation cannot be obtained, or the interpolation cannot be performed depending on focal length and brightness of a lens (F number).</p>
<p id="p-0015" num="0014"><figref idref="DRAWINGS">FIG. 13(</figref><i>a</i>) shows a state of one example having the above-mentioned problem. In <figref idref="DRAWINGS">FIG. 13(</figref><i>a</i>), a horizontal axis indicates a position of a photographing lens based on the reciprocal of a focal length (in detail, Lim (∞) is referred to as a focal-length infinite distance, and Lim (Nr) is referred to as a focal-length closest position), while a vertical axis indicates a focusing evaluation value at each photographing lens position.</p>
<p id="p-0016" num="0015">This curve of evaluation values has a feature that an intersection point of the horizontal axis and a line vertical to the horizontal axis passing through a maximum point of the evaluation value corresponds to a focus position.</p>
<p id="p-0017" num="0016"><figref idref="DRAWINGS">FIG. 14</figref> shows a general example.</p>
<p id="p-0018" num="0017">In the case as shown in <figref idref="DRAWINGS">FIG. 13(</figref><i>a</i>), the depth of field <b>50</b><i>a </i>is so large that there are few points for sampling, resulting in a low accuracy of interpolation.</p>
<p id="p-0019" num="0018">As shown in <figref idref="DRAWINGS">FIG. 13(</figref><i>b</i>), when a curved line of evaluation values is geometrically unsymmetrical with respect to a focal length of a photographing lens, highly accurate interpolation cannot be provided.</p>
<p id="p-0020" num="0019">Further, as shown in <figref idref="DRAWINGS">FIGS. 13(</figref><i>c</i>) and (<i>d</i>), in cases where a focus position is at an infinite distance, or at the closest point or its vicinity, a steep extension method used in the prior art cannot be employed, resulting in failing to conduct interpolation.</p>
<heading id="h-0002" level="1">SUMMARY OF THE INVENTION</heading>
<p id="p-0021" num="0020">The present invention has been accomplished in view of the above-mentioned prior art. It is therefore an object of the present invention to provide a photographing apparatus offering an excellent balance of focus-position accuracy in an entire driving range and time needed for obtaining a focus position.</p>
<p id="p-0022" num="0021">To this end, according to the present invention, there is provided a photographing apparatus comprising a photographing lens capable of moving a focal plane of a subject image, a photographing device for receiving the subject image and outputting a signal into which the subject image is photo-electrically transferred, as image output, driving means for driving the photographing lens, and control means for controlling the driving means.</p>
<p id="p-0023" num="0022">This control means divides a range for enabling driving of the photographing lens into a minimum number of or more sections which are capable of being interpolated, drives the photographing lens to each divided section in sequence, figures out a focus signal based on a photographing signal obtained from the photographing device at the each driving position, and performs interpolation processing of an evaluation value obtained from the focus signal, thereby deriving a focus position of the photographing lens which position causes the focal plane to coincide with the photographing plane, and drivingly controlling the driving means to drive the photographing lens to the derived focus position.</p>
<p id="p-0024" num="0023">Further, the control means figures out an auto-focus evaluation value based on the photographing signal obtained from the photographing device at the each driving position, figures out an interpolation function from data on the each driving position and the auto-focus evaluation value, and performs the interpolation processing of the section based on the interpolation function, thereby to permit figuring out the focus position of the photographing lens for causing the focal plane to coincide with the photographing plane of the photographing device.</p>
<p id="p-0025" num="0024">Further, the data on the auto-focus evaluation value may be generated by use of a frequency filter. In this case, the data on a plurality of the auto-focus evaluation values may be generated by a plurality of the frequency filters. Moreover, in this case, some or all of the data on the auto-focus evaluation values generated are preferably subjected to the interpolation processing, thereby figuring out the focus position.</p>
<p id="p-0026" num="0025">Further, the interpolation processing may be conducted by use of a Spline Function. Also, the Spline Function may be a natural Spline function. Further, the Spline Function may be established by a differential coefficient. The Spline Function may be derived as, at most, a tertiary function formula by obtaining a second-order differential coefficient.</p>
<p id="p-0027" num="0026">In the interpolation processing, Newton's divided differences interpolation formula of an order of the number of sections or less may be utilized for the interpolation processing at the each section. Further, in the interpolation processing, a divided difference at a boundary between the sections may be figured out for the interpolation processing at each section, and then the divided difference may be substituted into a predetermined formula, thereby obtaining an interpolation value.</p>
<p id="p-0028" num="0027">Further, this predetermined formula may be, at most, a tertiary function to an unknown, and the divided difference to be substituted may be excluded from a constant term.</p>
<p id="p-0029" num="0028">Further, in the interpolation processing, the interpolation function may be derived for the section capable of being interpolated, and then the interpolation function may be used for all driving positions of the photographing lens in the section, thereby deriving an evaluation value in a dummy manner.</p>
<p id="p-0030" num="0029">In this case, if there are any sections capable of being interpolated, obtaining processing of the evaluation value may be conducted in parallel with the interpolation processing.</p>
<p id="p-0031" num="0030">As a result of this interpolation processing, when the focus position having a maximum evaluation value is identified, the obtaining processing of the evaluation value and the interpolation processing of the yet-to-be interpolated section may be stopped, and then the photographing lens may be driven to the section including the focus position. As the result of this interpolation processing, when the focus position turns out to be near, the control means may be shifted to fine adjustment. Further, in this fine adjustment, the photographing lens is moved such that a driving distance of the photographing lens is preferably below a section width, but a minimum driving distance or more, thereby obtaining the evaluation value.</p>
<?BRFSUM description="Brief Summary" end="tail"?>
<?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?>
<description-of-drawings>
<heading id="h-0003" level="1">BRIEF DESCRIPTION OF THE ATTACHED DRAWINGS</heading>
<p id="p-0032" num="0031"><figref idref="DRAWINGS">FIG. 1</figref> is a block diagram showing a control circuit of a photographing apparatus according to a preferred embodiment of the present invention.</p>
<p id="p-0033" num="0032"><figref idref="DRAWINGS">FIGS. 2(</figref><i>a</i>) and (<i>b</i>) each are an exemplary graph showing an evaluation value with respect to a lens position.</p>
<p id="p-0034" num="0033"><figref idref="DRAWINGS">FIG. 3</figref> is an explanatory flowchart of an auto-focus operation according to the preferred embodiment.</p>
<p id="p-0035" num="0034"><figref idref="DRAWINGS">FIGS. 4(</figref><i>a</i>), (<i>b</i>), and (<i>c</i>) each are a flowchart showing interpolation processing according to the preferred embodiment.</p>
<p id="p-0036" num="0035"><figref idref="DRAWINGS">FIG. 5</figref> is a flowchart showing auto-focus processing according to another preferred embodiment of the present invention.</p>
<p id="p-0037" num="0036"><figref idref="DRAWINGS">FIG. 6</figref> is an explanatory diagram of an example in which a focus position is identified in the auto-focus processing based on the flowchart of <figref idref="DRAWINGS">FIG. 5</figref>.</p>
<p id="p-0038" num="0037"><figref idref="DRAWINGS">FIG. 7</figref> is an explanatory graph of one example of fine adjustment in the auto-focus processing.</p>
<p id="p-0039" num="0038"><figref idref="DRAWINGS">FIG. 8</figref> is a flowchart of the fine adjustment processing.</p>
<p id="p-0040" num="0039"><figref idref="DRAWINGS">FIGS. 9(</figref><i>a</i>) and (<i>b</i>) each are an explanatory graph for anticipating a focus position in an initial stage of the processing.</p>
<p id="p-0041" num="0040"><figref idref="DRAWINGS">FIG. 10</figref> is a flowchart of preparation processing in the auto-focus processing.</p>
<p id="p-0042" num="0041"><figref idref="DRAWINGS">FIG. 11</figref> is a flowchart of main processing in the auto-focus processing.</p>
<p id="p-0043" num="0042"><figref idref="DRAWINGS">FIGS. 12(</figref><i>a</i>) and (<i>b</i>) each are an explanatory graph for anticipating a focus position in cases where a driving direction of a photographing lens is not judged in an initial stage of the processing.</p>
<p id="p-0044" num="0043"><figref idref="DRAWINGS">FIGS. 13(</figref><i>a</i>), (<i>b</i>), (<i>c</i>), and (<i>d</i>) each are an explanatory graph showing problems In the prior art.</p>
<p id="p-0045" num="0044"><figref idref="DRAWINGS">FIG. 14</figref> is a graph showing a general example of a focus position.</p>
</description-of-drawings>
<?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?>
<?DETDESC description="Detailed Description" end="lead"?>
<heading id="h-0004" level="1">DESCRIPTION OF THE PREFERRED EMBODIMENTS</heading>
<heading id="h-0005" level="1">First Preferred Embodiment of the Present Invention</heading>
<p id="p-0046" num="0045">Hereinafter a photographing apparatus according to some preferred embodiments of the present invention will be described in detail with reference to the accompanying drawings.</p>
<p id="p-0047" num="0046"><figref idref="DRAWINGS">FIG. 1</figref> shows a block diagram of the photographing apparatus in accordance with the first preferred embodiment of the present invention. Reference numeral <b>1</b> denotes a photographing lens including a zoom lens <b>1</b><i>a </i>and a focus lens <b>1</b><i>b</i>. Reference numeral <b>2</b> denotes a mechanical system including a mechanical shutter, a diaphragm, a filter, and the like. Reference numeral <b>3</b> denotes a CCD, and reference numeral <b>4</b> a front/end (F/E) including a correlated double sampling (CDS) circuit, an A/D conversion circuit, an automatic gain control (AGC) circuit, and the like. Reference numeral <b>5</b> denotes an image pre-processor (IPP), reference numeral <b>6</b> a compression/decompression device, reference numeral <b>7</b> a liquid crystal monitor, reference numeral <b>8</b> a memory card, reference numeral <b>9</b> a DRAM, reference numeral <b>10</b> a sub-liquid-crystal-display (sub-LCD), and reference numeral <b>11</b> an operating section. Reference numeral <b>12</b> denotes a motor section including a zoom lens motor <b>12</b><i>a</i>, a focus motor <b>12</b><i>b</i>, and a diaphragm and shutter motor <b>12</b><i>c</i>. Reference numeral <b>13</b> denotes a driver including a zoom driver <b>13</b><i>a</i>, a focus driver <b>13</b><i>b</i>, and a diaphragm and shutter driver <b>13</b><i>c</i>. Reference numeral <b>14</b> denotes a timing generator (TG), reference numeral <b>15</b> a battery, reference numeral <b>16</b> a DC/AC converter, reference numeral <b>17</b> an AC adapter, reference numeral <b>18</b> a CPU, and reference numeral <b>19</b> a synchronous dynamic random access memory (SDRAM).</p>
<p id="p-0048" num="0047">The photographing lens <b>1</b> is to form images of a subject and comprises the zoom lens <b>1</b><i>a </i>for performing a zoom function and the focus lens <b>1</b><i>b </i>for bringing the subject into focus. The mechanical system <b>2</b> includes the mechanical shutter, the diaphragm for adjusting brightness of the subject, the filter, and the like. The CCD <b>3</b> converts a subject image formed by the photographing lens <b>1</b> into an electric signal and then outputs it to the F/E <b>4</b> as analog image data.</p>
<p id="p-0049" num="0048">The F/E <b>4</b> subjects pre-processing to the analog image data inputted from the CCD <b>3</b>. This F/E <b>4</b> includes the CDS circuit for performing correlated double sampling of the analog image data inputted from the CCD <b>3</b>, the AGC circuit for adjusting gains of the analog image data outputted from the CDS circuit, and the A/D conversion circuit for performing A/D conversion of the analog images outputted from the AGC circuit and for outputting converted digital image data to the IPP <b>5</b>.</p>
<p id="p-0050" num="0049">The IPP <b>5</b> performs various kinds of image processing of the inputted image data. For example, it converts RGB data inputted from the F/E <b>4</b> into YUV data.</p>
<p id="p-0051" num="0050">The compression/decompression device <b>6</b> performs compression processing of the YUV data in a compression format in compliance with JPEG format and performs decompression processing of compressed image data stored in the memory card <b>8</b> in a decompression format in compliance with the JPEG format.</p>
<p id="p-0052" num="0051">The DRAM <b>9</b> is a frame memory for temporarily storing the image data photographed or the image data read from the memory card <b>8</b>. The memory card <b>8</b> is attached detachably to a digital camera body and stores the compressed image data as an image file.</p>
<p id="p-0053" num="0052">The liquid crystal monitor <b>7</b> is to display the image data and the like. The sub-LCD <b>10</b> is to display modes and operation contents set for the digital camera.</p>
<p id="p-0054" num="0053">The zoom driver <b>13</b><i>a </i>drives the zoom motor <b>12</b><i>a </i>in response to a control signal inputted from the CPU <b>18</b> to move the zoom lens <b>1</b><i>a </i>in an optical axis. The focus driver <b>13</b><i>b </i>drives the focus motor <b>12</b><i>b </i>in response to a control signal inputted from the CPU <b>18</b> to move the focus lens <b>1</b><i>b </i>in an optical axis. The diaphragm and shutter driver <b>13</b><i>c </i>drives the diaphragm and shutter motor <b>1</b><i>c </i>in response to a control signal inputted from the CPU <b>18</b> to perform setting of a diaphragm value of the mechanical system <b>2</b> and to drivingly open and close the mechanical shutter of the mechanical system <b>2</b>.</p>
<p id="p-0055" num="0054">The TG <b>14</b> drives the CCD <b>3</b> and the F/E <b>4</b> based on a control signal inputted from the IPP <b>5</b>. The battery <b>15</b> is, for example, a NiCd battery, a nickel-hydrogen battery, a lithium battery, or the like. The DC/AC converter <b>16</b> converts the level of DC voltage inputted from the battery <b>15</b> or the AD adapter <b>17</b> to supply power to each component of the photographing apparatus.</p>
<p id="p-0056" num="0055">Now, processing contents of the CPU <b>18</b> serving as calculation control circuit (control means), that is, an auto-focus control operation performed by the CPU <b>18</b>, will be described in detail with reference to <figref idref="DRAWINGS">FIGS. 1</figref>, <b>2</b>, and <b>3</b>.</p>
<p id="p-0057" num="0056"><figref idref="DRAWINGS">FIG. 2</figref> shows an exemplary graph of an evaluation value with respect to a lens position. <figref idref="DRAWINGS">FIG. 3</figref> shows an explanatory flowchart of the auto-focus operation in accordance with the preferred embodiment.</p>
<p id="p-0058" num="0057">An auto-focus processing system receives an auto-focus signal outputted from the CPU <b>18</b> and conducts the processing according to the flowchart of <figref idref="DRAWINGS">FIG. 3</figref>. That is, the CPU <b>18</b> serving as the calculation control circuit (control means) inputs the auto-focus signal into the auto-focus processing system to make the auto-focus processing system conduct driving processing of the photographing lens <b>1</b> in compliance with the flowchart of <figref idref="DRAWINGS">FIG. 3</figref>.</p>
<p id="p-0059" num="0058">When performing this auto-focus processing, the CPU <b>18</b> triggers a reset in a step S<b>200</b> to set i=0, and then performs conditional processing in steps S<b>200</b>A to S<b>207</b>A.</p>
<p id="p-0060" num="0059">In the above-mentioned conditional processing, the CPU <b>18</b> drivingly controls the motor section <b>12</b> by means of the driver <b>13</b> and drives the lens to move a present position thereof to an initial position x[0] as shown in <figref idref="DRAWINGS">FIG. 2(</figref><i>a</i>) (S<b>201</b>). Although a focal length is set to be the lens position Lim (∞) where is at an infinite distance in this embodiment, the initial position is not limited thereto.</p>
<p id="p-0061" num="0060">Next, the CPU <b>18</b> determines a driving distance, depending on a depth of field which is determined based on a focal length of the zoom lens la and lens brightness. In this embodiment, the driving distance is set to be an integer multiple of a minimum driving distance. It should be noted that the driving distance is not limited to an integer multiple of the minimum driving distance.</p>
<p id="p-0062" num="0061">Then the CPU <b>18</b> drives the photographing lens <b>1</b> based on the determined driving distance to obtain an evaluation value y[i] with respect to a lens position x[i] (i: integer) via the IPP <b>5</b> on the basis of an image signal obtained by the CCD <b>3</b> serving as a photographing device at a present point in time (S<b>202</b>). The obtained evaluation value is stored in the SDRAM <b>19</b>.</p>
<p id="p-0063" num="0062">Next, the CPU <b>18</b> determines whether there are any sections capable of being interpolated or not (S<b>203</b>). Based on this determination, when it is determined that there are any interpolating sections, the CPU <b>18</b> conducts interpolation processing of the interpolating sections so as to provide a corresponding interpolation value at each minimum driving distance (S<b>204</b>).</p>
<p id="p-0064" num="0063">If there is no interpolating section in the step S<b>203</b>, or if the interpolation processing is already done in the step S<b>204</b>, the CPU <b>18</b> determines whether a focus position exits or not based on the evaluation values and the interpolation values thereof (S<b>205</b>).</p>
<p id="p-0065" num="0064">When the focus position is identified, the CPU <b>18</b> executes judgment of focus to drive the photographing lens <b>1</b> to the focus position, thereby terminating the auto-focus processing (S<b>205</b>A, S<b>206</b>). When the focus position is not identified, the CPU <b>18</b> moves the photographing lens <b>1</b> to a next driving position (S<b>207</b>). Thereafter, the conditional processing of the steps S<b>202</b> through the S<b>207</b> among the steps S<b>200</b>A through the S<b>207</b>A is repeatedly performed.</p>
<p id="p-0066" num="0065">In cases where the focus position is not identified even when the photographing lens <b>1</b> is driven to the closest position in the conditional processing of the steps S<b>200</b>A to <b>207</b>A, the CPU <b>18</b> makes a judgment of “focusing N.G.” in a step S<b>208</b> indicating that the focus position does not exist, and then performs focusing N.G. processing in a step S<b>209</b>. That is, the CPU <b>18</b> drives the photographing lens <b>1</b> to a position having a maximum evaluation.</p>
<p id="h-0006" num="0000">(Interpolation Processing 1)</p>
<p id="p-0067" num="0066">Now, the processing performed by the CPU <b>18</b> in the steps S<b>203</b> and S<b>204</b> of <figref idref="DRAWINGS">FIG. 3</figref>, namely, the judgment or determination of the existence of interpolating sections and the interpolation processing, will be described in detail with reference to <figref idref="DRAWINGS">FIGS. 2</figref>, <b>3</b>, and <b>4</b>.</p>
<p id="p-0068" num="0067"><figref idref="DRAWINGS">FIG. 2(</figref><i>a</i>) shows a plot of points with a horizontal axis indicating a lens position and a vertical axis indicating an evaluation value for each position of the points. In an example of <figref idref="DRAWINGS">FIG. 2(</figref><i>a</i>), evaluation values y[0], y[1], y[2], y[3], y[4], and y[5] are determined with respect to lens positions x[0], x[1], x[2], x[3], x[4] and x[5]. And by using the evaluation values y[0], y[1], y[2], y[3], y[4], and y[5], a tertiary natural Spline Function is derived, thereby interpolating evaluation values located in lens positions other than the lens positions x[0], x[1], x[2], x[3], x[4] and x[5] (for example, a curve of a solid line as shown in <figref idref="DRAWINGS">FIG. 2(</figref><i>b</i>) is derived).</p>
<p id="p-0069" num="0068">In general, once four via points are determined, a tertiary natural spline function is capable of being uniquely derived. In the interpolation of the present embodiment, however, a section C<b>5</b> of <figref idref="DRAWINGS">FIG. 2(</figref><i>a</i>) is not preferably subjected to interpolation. This is why there is a high possibility that an yet-to-be scanned section C′ does not have the same tendency as the section C<b>5</b> which is interpolated at the present time. In the case of the example of <figref idref="DRAWINGS">FIG. 2(</figref><i>a</i>), sections C<b>1</b>, C<b>2</b>, C<b>3</b>, and C<b>4</b> (range <b>55</b><i>a</i>) are subjected to the interpolation. In other words, when evaluation values of the lens positions x[0] through x[k] are determined, the CPU <b>18</b> judges that the sections C<b>1</b> through C(k−<b>1</b>) are capable of being interpolated. And if there are any yet-to-be interpolated sections among them, the CPU <b>18</b> conducts the interpolation processing.</p>
<p id="p-0070" num="0069">Now, the interpolation processing in cases where an interpolating section exists will be explained in detail by taking an example in which the sections C<b>1</b> through C<b>4</b> (range <b>55</b><i>a</i>) of <figref idref="DRAWINGS">FIG. 2(</figref><i>a</i>) are to be interpolated.</p>
<p id="p-0071" num="0070"><figref idref="DRAWINGS">FIG. 4(</figref><i>a</i>) is a flowchart showing the interpolation processing in accordance with the preferred embodiment. First, the CPU <b>18</b> defines all of lens driving positions in sections to be interpolated (S<b>301</b>A). That is, the CPU <b>18</b> defines one-dimensional arrangement for storing two data (x, y). (In other words, it sets interpolation arrangements x[i] and y[i] of a size m.) And it stores lens positions in the x and interpolation values in the y. In <figref idref="DRAWINGS">FIG. 4(</figref><i>a</i>), as reset processing of arrangements is performed definition of the arrangements and storing processing of the lens positions in the data x.</p>
<p id="p-0072" num="0071">Then, the CPU <b>18</b> figures out second-order differential coefficients M [1] through M [4] of the natural spline function at the x[1] through x[4]. Thus, a linear simultaneous equation represented by the following formula [Formula No. 1] is made (S<b>302</b>A).
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?>AM=B<?in-line-formulae description="In-line Formulae" end="tail"?>
</p>
<p id="p-0073" num="0072">
<maths id="MATH-US-00001" num="00001">
<math overflow="scroll">
<mrow>
  <mi>A</mi>
  <mo>=</mo>
  <mrow>
    <mo>(</mo>
    <mtable>
      <mtr>
        <mtd>
          <mrow>
            <mrow>
              <mo>(</mo>
              <mrow>
                <mrow>
                  <mi>h</mi>
                  <mo>⁡</mo>
                  <mrow>
                    <mo>[</mo>
                    <mn>1</mn>
                    <mo>]</mo>
                  </mrow>
                </mrow>
                <mo>+</mo>
                <mrow>
                  <mi>h</mi>
                  <mo>⁡</mo>
                  <mrow>
                    <mo>[</mo>
                    <mn>2</mn>
                    <mo>]</mo>
                  </mrow>
                </mrow>
              </mrow>
              <mo>)</mo>
            </mrow>
            <mo>/</mo>
            <mn>3</mn>
          </mrow>
        </mtd>
        <mtd>
          <mrow>
            <mrow>
              <mi>h</mi>
              <mo>⁡</mo>
              <mrow>
                <mo>[</mo>
                <mn>2</mn>
                <mo>]</mo>
              </mrow>
            </mrow>
            <mo>/</mo>
            <mn>6</mn>
          </mrow>
        </mtd>
        <mtd>
          <mn>0</mn>
        </mtd>
        <mtd>
          <mi>⋯</mi>
        </mtd>
        <mtd>
          <mn>0</mn>
        </mtd>
      </mtr>
      <mtr>
        <mtd>
          <mrow>
            <mrow>
              <mi>h</mi>
              <mo>⁡</mo>
              <mrow>
                <mo>[</mo>
                <mn>2</mn>
                <mo>]</mo>
              </mrow>
            </mrow>
            <mo>/</mo>
            <mn>6</mn>
          </mrow>
        </mtd>
        <mtd>
          <mrow>
            <mrow>
              <mo>(</mo>
              <mrow>
                <mrow>
                  <mi>h</mi>
                  <mo>⁡</mo>
                  <mrow>
                    <mo>[</mo>
                    <mn>2</mn>
                    <mo>]</mo>
                  </mrow>
                </mrow>
                <mo>+</mo>
                <mrow>
                  <mi>h</mi>
                  <mo>⁡</mo>
                  <mrow>
                    <mo>[</mo>
                    <mn>3</mn>
                    <mo>]</mo>
                  </mrow>
                </mrow>
              </mrow>
              <mo>)</mo>
            </mrow>
            <mo>/</mo>
            <mn>3</mn>
          </mrow>
        </mtd>
        <mtd>
          <mrow>
            <mrow>
              <mi>h</mi>
              <mo>⁡</mo>
              <mrow>
                <mo>[</mo>
                <mn>3</mn>
                <mo>]</mo>
              </mrow>
            </mrow>
            <mo>/</mo>
            <mn>6</mn>
          </mrow>
        </mtd>
        <mtd>
          <mi>⋯</mi>
        </mtd>
        <mtd>
          <mn>0</mn>
        </mtd>
      </mtr>
      <mtr>
        <mtd>
          <mn>0</mn>
        </mtd>
        <mtd>
          <mstyle>
            <mspace width="0.3em" height="0.3ex"/>
          </mstyle>
        </mtd>
        <mtd>
          <mstyle>
            <mspace width="0.3em" height="0.3ex"/>
          </mstyle>
        </mtd>
        <mtd>
          <mstyle>
            <mspace width="0.3em" height="0.3ex"/>
          </mstyle>
        </mtd>
        <mtd>
          <mstyle>
            <mspace width="0.3em" height="0.3ex"/>
          </mstyle>
        </mtd>
      </mtr>
      <mtr>
        <mtd>
          <mstyle>
            <mspace width="0.3em" height="0.3ex"/>
          </mstyle>
        </mtd>
        <mtd>
          <mstyle>
            <mspace width="0.3em" height="0.3ex"/>
          </mstyle>
        </mtd>
        <mtd>
          <mstyle>
            <mspace width="0.3em" height="0.3ex"/>
          </mstyle>
        </mtd>
        <mtd>
          <mstyle>
            <mspace width="0.3em" height="0.3ex"/>
          </mstyle>
        </mtd>
        <mtd>
          <mstyle>
            <mspace width="0.3em" height="0.3ex"/>
          </mstyle>
        </mtd>
      </mtr>
      <mtr>
        <mtd>
          <mn>0</mn>
        </mtd>
        <mtd>
          <mn>0</mn>
        </mtd>
        <mtd>
          <mn>0</mn>
        </mtd>
        <mtd>
          <mrow>
            <mrow>
              <mi>h</mi>
              <mo>⁡</mo>
              <mrow>
                <mo>[</mo>
                <mrow>
                  <mi>n</mi>
                  <mo>-</mo>
                  <mn>2</mn>
                </mrow>
                <mo>]</mo>
              </mrow>
            </mrow>
            <mo>/</mo>
            <mn>6</mn>
          </mrow>
        </mtd>
        <mtd>
          <mrow>
            <mrow>
              <mo>(</mo>
              <mrow>
                <mrow>
                  <mi>h</mi>
                  <mo>⁡</mo>
                  <mrow>
                    <mo>[</mo>
                    <mrow>
                      <mi>n</mi>
                      <mo>-</mo>
                      <mn>2</mn>
                    </mrow>
                    <mo>]</mo>
                  </mrow>
                </mrow>
                <mo>+</mo>
                <mrow>
                  <mi>h</mi>
                  <mo>⁡</mo>
                  <mrow>
                    <mo>[</mo>
                    <mrow>
                      <mi>n</mi>
                      <mo>-</mo>
                      <mn>1</mn>
                    </mrow>
                    <mo>]</mo>
                  </mrow>
                </mrow>
              </mrow>
              <mo>)</mo>
            </mrow>
            <mo>/</mo>
            <mn>3</mn>
          </mrow>
        </mtd>
      </mtr>
    </mtable>
    <mo>)</mo>
  </mrow>
</mrow>
</math>
</maths>
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>M=</i>(<i>M[</i>1],<i>M[</i>2], . . . , <i>M[n</i>−2])<sup>T</sup><?in-line-formulae description="In-line Formulae" end="tail"?>
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>B=</i>(<i>b[</i>1],<i>b[</i>2], . . . , <i>b[n</i>−2])<sup>T</sup><i>; b[i]=</i>((<i>y[i</i>+1<i>]−y[i]</i>)<i>/h[i</i>+1])−{(<i>y[i]−y[i</i>−1])<i>/h[i]}</i>  [Formula No. 1]<?in-line-formulae description="In-line Formulae" end="tail"?>
</p>
<p id="p-0074" num="0073">A character n denotes the number of data scanned. In this embodiment, in the Case of n=6, there are provided four unknowns, namely M[1] through M[4], thus leading to a fourth-order linear simultaneous equation, Note that a character h[i] indicative of a section width is defined by the following formula [Formula No. 2].
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>h[i]=x[i]−x[i</i>−1<i>]; i</i>=1,2, . . . , <i>n−</i>1  [Formula No. 2]<?in-line-formulae description="In-line Formulae" end="tail"?>
</p>
<p id="p-0075" num="0074">The above-mentioned simultaneous equation is solved by Jordan-Gauss elimination method to obtain the second-order differential coefficients M[1] through M[4] (S<b>303</b>A). Note that the second-order differential coefficient M[0] at the x[0] is set 0.</p>
<p id="p-0076" num="0075">Then, the CPU <b>18</b> figures out an interpolation value between one lens driving position x[i] and the other, that is, an interpolation value between one evaluation value y[i] and the other in the sections C<b>1</b> through C<b>4</b> (range <b>55</b><i>a</i>) (S<b>304</b>A).</p>
<p id="p-0077" num="0076">Hereinafter, an interpolation value in the C<b>2</b> between the lens driving positions x[1] and x[2], namely, an interpolation value between the evaluation values y[1] and y[2], will be explained in detail. The interpolation value C[2](x) at the lens position x in the section C<b>2</b> will be obtained by solving the following formula [Formula No. 3] by substitution of k=2, namely, by substitution of M[1], M[2], h[2], x[1], and x[2].</p>
<p id="p-0078" num="0077">
<maths id="MATH-US-00002" num="00002">
<math overflow="scroll">
<mtable>
  <mtr>
    <mtd>
      <mrow>
        <mrow>
          <mrow>
            <mi>C</mi>
            <mo>⁡</mo>
            <mrow>
              <mo>[</mo>
              <mi>k</mi>
              <mo>]</mo>
            </mrow>
          </mrow>
          <mo>⁢</mo>
          <mrow>
            <mo>(</mo>
            <mi>x</mi>
            <mo>)</mo>
          </mrow>
        </mrow>
        <mo>=</mo>
        <mrow>
          <mfrac>
            <mrow>
              <mrow>
                <mi>M</mi>
                <mo>⁡</mo>
                <mrow>
                  <mo>[</mo>
                  <mrow>
                    <mi>k</mi>
                    <mo>-</mo>
                    <mn>1</mn>
                  </mrow>
                  <mo>]</mo>
                </mrow>
              </mrow>
              <mo>⁢</mo>
              <mrow>
                <mo>(</mo>
                <mrow>
                  <mi>x</mi>
                  <mo>-</mo>
                  <mrow>
                    <mi>x</mi>
                    <mo>⁡</mo>
                    <mrow>
                      <mo>[</mo>
                      <mi>k</mi>
                      <mo>]</mo>
                    </mrow>
                  </mrow>
                </mrow>
                <mo>)</mo>
              </mrow>
              <mo>⁢</mo>
              <mrow>
                <mo>(</mo>
                <mrow>
                  <msup>
                    <mrow>
                      <mi>h</mi>
                      <mo>⁡</mo>
                      <mrow>
                        <mo>[</mo>
                        <mi>k</mi>
                        <mo>]</mo>
                      </mrow>
                    </mrow>
                    <mn>2</mn>
                  </msup>
                  <mo>-</mo>
                  <msup>
                    <mrow>
                      <mo>(</mo>
                      <mrow>
                        <mi>x</mi>
                        <mo>-</mo>
                        <mrow>
                          <mi>x</mi>
                          <mo>⁡</mo>
                          <mrow>
                            <mo>[</mo>
                            <mi>k</mi>
                            <mo>]</mo>
                          </mrow>
                        </mrow>
                      </mrow>
                      <mo>)</mo>
                    </mrow>
                    <mn>2</mn>
                  </msup>
                </mrow>
                <mo>)</mo>
              </mrow>
            </mrow>
            <mrow>
              <mn>6</mn>
              <mo>⁢</mo>
              <mrow>
                <mi>h</mi>
                <mo>⁡</mo>
                <mrow>
                  <mo>[</mo>
                  <mi>k</mi>
                  <mo>]</mo>
                </mrow>
              </mrow>
            </mrow>
          </mfrac>
          <mo>+</mo>
          <mfrac>
            <mrow>
              <mrow>
                <mi>M</mi>
                <mo>⁡</mo>
                <mrow>
                  <mo>[</mo>
                  <mi>k</mi>
                  <mo>]</mo>
                </mrow>
              </mrow>
              <mo>⁢</mo>
              <mrow>
                <mo>(</mo>
                <mrow>
                  <mi>x</mi>
                  <mo>-</mo>
                  <mrow>
                    <mi>x</mi>
                    <mo>⁡</mo>
                    <mrow>
                      <mo>[</mo>
                      <mrow>
                        <mi>k</mi>
                        <mo>-</mo>
                        <mn>1</mn>
                      </mrow>
                      <mo>]</mo>
                    </mrow>
                  </mrow>
                </mrow>
                <mo>)</mo>
              </mrow>
              <mo>⁢</mo>
              <mrow>
                <mo>{</mo>
                <mrow>
                  <msup>
                    <mrow>
                      <mo>(</mo>
                      <mrow>
                        <mi>x</mi>
                        <mo>-</mo>
                        <mrow>
                          <mi>x</mi>
                          <mo>⁡</mo>
                          <mrow>
                            <mo>[</mo>
                            <mrow>
                              <mi>k</mi>
                              <mo>-</mo>
                              <mn>1</mn>
                            </mrow>
                            <mo>]</mo>
                          </mrow>
                        </mrow>
                      </mrow>
                      <mo>)</mo>
                    </mrow>
                    <mn>2</mn>
                  </msup>
                  <mo>-</mo>
                  <msup>
                    <mrow>
                      <mi>h</mi>
                      <mo>⁡</mo>
                      <mrow>
                        <mo>[</mo>
                        <mi>k</mi>
                        <mo>]</mo>
                      </mrow>
                    </mrow>
                    <mn>2</mn>
                  </msup>
                </mrow>
                <mo>}</mo>
              </mrow>
            </mrow>
            <mrow>
              <mn>6</mn>
              <mo>⁢</mo>
              <mrow>
                <mi>h</mi>
                <mo>⁡</mo>
                <mrow>
                  <mo>[</mo>
                  <mi>k</mi>
                  <mo>]</mo>
                </mrow>
              </mrow>
            </mrow>
          </mfrac>
          <mo>+</mo>
          <mfrac>
            <mrow>
              <mrow>
                <mrow>
                  <mi>y</mi>
                  <mo>⁡</mo>
                  <mrow>
                    <mo>[</mo>
                    <mi>k</mi>
                    <mo>]</mo>
                  </mrow>
                </mrow>
                <mo>⁢</mo>
                <mrow>
                  <mo>(</mo>
                  <mrow>
                    <mi>x</mi>
                    <mo>-</mo>
                    <mrow>
                      <mi>x</mi>
                      <mo>⁡</mo>
                      <mrow>
                        <mo>[</mo>
                        <mrow>
                          <mi>k</mi>
                          <mo>-</mo>
                          <mn>1</mn>
                        </mrow>
                        <mo>]</mo>
                      </mrow>
                    </mrow>
                  </mrow>
                  <mo>)</mo>
                </mrow>
              </mrow>
              <mo>-</mo>
              <mrow>
                <mrow>
                  <mi>y</mi>
                  <mo>⁡</mo>
                  <mrow>
                    <mo>[</mo>
                    <mrow>
                      <mi>k</mi>
                      <mo>-</mo>
                      <mn>1</mn>
                    </mrow>
                    <mo>]</mo>
                  </mrow>
                </mrow>
                <mo>⁢</mo>
                <mrow>
                  <mo>(</mo>
                  <mrow>
                    <mi>x</mi>
                    <mo>-</mo>
                    <mrow>
                      <mi>x</mi>
                      <mo>⁡</mo>
                      <mrow>
                        <mo>[</mo>
                        <mi>k</mi>
                        <mo>]</mo>
                      </mrow>
                    </mrow>
                  </mrow>
                  <mo>)</mo>
                </mrow>
              </mrow>
            </mrow>
            <mrow>
              <mi>h</mi>
              <mo>⁡</mo>
              <mrow>
                <mo>[</mo>
                <mi>k</mi>
                <mo>]</mo>
              </mrow>
            </mrow>
          </mfrac>
        </mrow>
      </mrow>
    </mtd>
    <mtd>
      <mstyle>
        <mtext>[Formula  No. 3]</mtext>
      </mstyle>
    </mtd>
  </mtr>
</mtable>
</math>
</maths>
</p>
<p id="p-0079" num="0078">The same deriving processing of interpolation values for all lens driving positions in the section C<b>2</b> is performed, thus achieving interpolation in the section C<b>2</b>.</p>
<p id="p-0080" num="0079">The above-mentioned interpolation processing is conducted by utilizing characteristics of the natural spline function, or a gently-sloping interpolation function having the lowest level of distortion. This enables making satisfactory approximations of a number of functions which appear in optical phenomena. Further, the interpolation processing is achieved in calculation time proportional to the number of lens driving positions within this interpolation range, thereby to avoid putting a load on a calculation processor. In addition, once a second-order differential coefficient is figured out, the coefficient can be reused. Therefore, there is an advantage in that only second-order differential coefficients of a section newly added and a sample point have only to be figured out for further data.</p>
<p id="p-0081" num="0080">It should be noted that when obtaining evaluation values, image signals may be subjected to frequency filters so as to grab spatial frequencies, whereby obtaining the evaluation values based on the output. Concretely, an image signal obtained from the photographing device is divided into a high frequency component and a low frequency component through a frequency filter based on a Fourier transform. In general, the high frequency component allows interpolation with high focusing accuracy, while the low frequency component allows interpolation of a wider section, compared to the high frequency component. Therefore, either or both of frequency components may be used for the interpolation, thereby performing auto-focus processing according to a situation.</p>
<p id="h-0007" num="0000">(Interpolation Processing 2)</p>
<p id="p-0082" num="0081">Now, another interpolation processing (interpolation processing 2) will be explained in detail with reference to <figref idref="DRAWINGS">FIG. 4(</figref><i>b</i>). In this example, the situation of <figref idref="DRAWINGS">FIG. 2(</figref><i>a</i>) will also be taken as an example, as is the case with the above-mentioned interpolation processing.</p>
<p id="p-0083" num="0082">The interpolation processing 1 conducts the interpolation processing by deriving the tertiary normal spline function, while the interpolation processing 2 conducts interpolation processing by using Newton's divided differences interpolation formula.</p>
<p id="p-0084" num="0083">In the interpolation processing using the Newton's divided differences interpolation formula, for n sample points can be performed the interpolation by means of a (n−1)-th order function. In this embodiment, a fifth-order function is used to perform the interpolation. In this case, the sections C<b>1</b> through C<b>5</b> (range <b>55</b><i>b</i>) can be subjected to the interpolation.</p>
<p id="p-0085" num="0084">First, the CPU <b>18</b> defines all of lens driving positions in sections to be interpolated (S<b>301</b>B). Then, the CPU <b>18</b> defines one-dimensional arrangement for storing two data (x, y). (In other words, it sets interpolation arrangements x[i] and y[i] of a size m.) And it stores lens positions in the data x and interpolation values in the data y. In <figref idref="DRAWINGS">FIG. 6(</figref><i>b</i>), as reset processing of arrangements is performed definition of the arrangements and storing processing of the lens positions in the data x.</p>
<p id="p-0086" num="0085">Next, as to sampling points x[0], x[1], x[2], x[3], x[4], x[5], y[0], y[1], y[2], y[3], y[4], and y[5], the CPU <b>18</b> figures out a zero-order divided difference f(x[0])=y[0], a first-order divided difference f(x[0], x[1]), second-order divided differences f(x[0], x[1], x[2]), third-order divided differences f(x[0], x[1], x[2], x[3]), fourth-order divided differences f(x[0], x[1], x[2], x[3], x[4]), and fifth-order divided differences f(x[0], x[1], x[2], x[3], x[4], s[5]), based on the following formula [Formula No. 4] (S<b>302</b>B).</p>
<p id="p-0087" num="0086">
<maths id="MATH-US-00003" num="00003">
<math overflow="scroll">
<mtable>
  <mtr>
    <mtd>
      <mrow>
        <mrow>
          <mrow>
            <mi>f</mi>
            <mo>⁡</mo>
            <mrow>
              <mo>(</mo>
              <mrow>
                <mrow>
                  <mi>x</mi>
                  <mo>⁡</mo>
                  <mrow>
                    <mo>[</mo>
                    <mn>1</mn>
                    <mo>]</mo>
                  </mrow>
                </mrow>
                <mo>,</mo>
                <mrow>
                  <mi>x</mi>
                  <mo>⁡</mo>
                  <mrow>
                    <mo>[</mo>
                    <mn>2</mn>
                    <mo>]</mo>
                  </mrow>
                </mrow>
                <mo>,</mo>
                <mi>…</mi>
                <mo>⁢</mo>
                <mstyle>
                  <mspace width="0.6em" height="0.6ex"/>
                </mstyle>
                <mo>,</mo>
                <mrow>
                  <mi>x</mi>
                  <mo>⁡</mo>
                  <mrow>
                    <mo>[</mo>
                    <mi>n</mi>
                    <mo>]</mo>
                  </mrow>
                </mrow>
              </mrow>
              <mo>)</mo>
            </mrow>
          </mrow>
          <mo>=</mo>
          <mrow>
            <munderover>
              <mo>∑</mo>
              <mrow>
                <mi>i</mi>
                <mo>=</mo>
                <mn>1</mn>
              </mrow>
              <mi>n</mi>
            </munderover>
            <mo>⁢</mo>
            <mstyle>
              <mspace width="0.3em" height="0.3ex"/>
            </mstyle>
            <mo>⁢</mo>
            <mrow>
              <mrow>
                <mi>y</mi>
                <mo>⁡</mo>
                <mrow>
                  <mo>[</mo>
                  <mi>i</mi>
                  <mo>]</mo>
                </mrow>
              </mrow>
              <mo>⁢</mo>
              <mstyle>
                <mspace width="0.8em" height="0.8ex"/>
              </mstyle>
              <mo>⁢</mo>
              <mrow>
                <munderover>
                  <mo>∏</mo>
                  <mrow>
                    <mi>j</mi>
                    <mo>=</mo>
                    <mn>1</mn>
                  </mrow>
                  <mi>n</mi>
                </munderover>
                <mo>⁢</mo>
                <mstyle>
                  <mspace width="0.3em" height="0.3ex"/>
                </mstyle>
                <mo>⁢</mo>
                <mrow>
                  <mo>(</mo>
                  <mrow>
                    <mrow>
                      <mi>x</mi>
                      <mo>⁡</mo>
                      <mrow>
                        <mo>[</mo>
                        <mi>i</mi>
                        <mo>]</mo>
                      </mrow>
                    </mrow>
                    <mo>-</mo>
                    <mrow>
                      <mi>x</mi>
                      <mo>⁡</mo>
                      <mrow>
                        <mo>[</mo>
                        <mi>j</mi>
                        <mo>]</mo>
                      </mrow>
                    </mrow>
                  </mrow>
                  <mo>)</mo>
                </mrow>
              </mrow>
            </mrow>
          </mrow>
        </mrow>
        <mo>⁢</mo>
        <mstyle>
          <mtext>
</mtext>
        </mstyle>
        <mo>⁢</mo>
        <mrow>
          <mi>Without</mi>
          <mo>⁢</mo>
          <mstyle>
            <mspace width="0.8em" height="0.8ex"/>
          </mstyle>
          <mo>⁢</mo>
          <mi>i</mi>
        </mrow>
      </mrow>
    </mtd>
    <mtd>
      <mstyle>
        <mtext>[Formula  No. 4]</mtext>
      </mstyle>
    </mtd>
  </mtr>
</mtable>
</math>
</maths>
</p>
<p id="p-0088" num="0087">In order to figure out an evaluation value f(x) at each lens driving position x in the sections C<b>1</b> through C<b>5</b> (range <b>55</b><i>b</i>), the CPU <b>18</b> substitutes x into the Newton's divided differences interpolation formula, namely, a fifth-order formula including a constant term y[0] based on the following formula [Formula No. 5] (in a step S<b>303</b>B between the steps S<b>302</b>B and S<b>304</b>B), thereby achieving the interpolation of the sections C<b>1</b> through C<b>5</b> (range <b>55</b><i>b</i>).</p>
<p id="h-0008" num="0000">[Formula No. 5]
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>f</i>(<i>x</i>)=<i>f</i>(<i>x</i>[1])+(<i>x−x</i>[1])<i>f</i>(<i>x</i>[1<i>], x</i>[2])+(<i>x−x</i>[1])(<i>x−x</i>[2])<i>f</i>(<i>x</i>[1],<i>x</i>[2<i>], x</i>[3])+ . . . +(<i>x−x</i>[1])(<i>x−x</i>[2]) . . . (<i>x−x[n</i>−1])<i>f</i>(<i>x</i>[1<i>], x</i>[2],<i>x</i>[3<i>], . . . , x[n</i>])  [Formula No. 5]<?in-line-formulae description="In-line Formulae" end="tail"?>
</p>
<p id="p-0089" num="0088">Thus, the interpolation processing by means of the Newton's divided differences interpolation formula has advantages not only in solving the problems in the prior art, but also in reducing calculation time, compared to that required for the natural-spline-function interpolation of the same order because its algorithm is easy.</p>
<p id="h-0009" num="0000">(Interpolation Processing 3)</p>
<p id="p-0090" num="0089">Now, sill another interpolation processing (interpolation processing 3) will be described with reference to <figref idref="DRAWINGS">FIG. 4(</figref><i>c</i>). In this example, the situation of <figref idref="DRAWINGS">FIG. 2(</figref><i>a</i>) will also be taken as an example, as is the case with the above-mentioned interpolation processing.</p>
<p id="p-0091" num="0090">In the interpolation processing 1, the second-order differential coefficient is figured out, while in this interpolation processing 3, second-order divided differences are employed instead of this coefficient.</p>
<p id="p-0092" num="0091">In the same way as the above-mentioned interpolation processing 1, the interpolation processing 3 will be explained below by taking the example in which sections C<b>1</b> through C<b>4</b> (range <b>55</b><i>a</i>) are interpolated based on lens positions x[0], x[1], x[2], x[3], x[4], and x[5] and evaluation values y[0], y[1], y[2], y[3], y[4], and y[5] in <figref idref="DRAWINGS">FIG. 2(</figref><i>a</i>).</p>
<p id="p-0093" num="0092">First, the CPU <b>18</b> defines all of lens driving positions in sections to be interpolated (S<b>301</b><i>c</i>). Then, the CPU <b>18</b> defines one-dimensional arrangement for storing two data (x, y). (In other words, it sets interpolation arrangements x[i] and y[i] of a size m.) And it stores lens positions in the data x and interpolation values in the data y. In <figref idref="DRAWINGS">FIG. 6(</figref><i>c</i>), as reset processing of arrangements is performed definition of the arrangements and storing processing of the lens positions in the data x.</p>
<p id="p-0094" num="0093">Thereafter, the CPU <b>18</b> figures out second-order divided differences f(x[0], x[1], x[2]), f(x[1], x[2], x[3], f(x[2], x[3], x[4]), and f(x[3], x[4], x[5]), namely, M[1], M[2], M[3], and M[4] (S<b>302</b>C), based on the following formula [Formula No. 6]. Note that M[0]=0. [Formula No. 6]</p>
<p id="p-0095" num="0094">Then, the CPU <b>18</b> figures out interpolation values of each section in the sections C<b>1</b> through C<b>4</b> (range <b>55</b><i>a</i>) (S<b>304</b>C). Now, interpolation within the section C<b>2</b> will be described below. The CPU <b>18</b> figures out an interpolation value C[2](x) at a lens position x in the section C<b>2</b> by substitution of k=2 in the above-mentioned [Formula No. 3], that is, by substitution of M[1], M[2], h[2], x[1], and x[2], thus obtaining the interpolation values in the section C<b>2</b> (S<b>303</b>C). All lens driving positions within the section C<b>2</b> are subjected to the same deriving way of interpolation values, thereby achieving interpolation of the section C<b>2</b>.</p>
<p id="p-0096" num="0095">Thus, the interpolation processing 3 permits solving the problems in the prior art and includes the simplest steps in comparison with the above-mentioned two interpolation processing because its algorithm is based only on substituting calculation. This allows its application to a photographing apparatus having a low capacity of the SDRAM <b>19</b> as shown in <figref idref="DRAWINGS">FIG. 1</figref> and to a photographing apparatus having a low calculation-processing speed of the CPU <b>18</b>.</p>
<heading id="h-0010" level="1">Second Preferred Embodiment of the Present Invention</heading>
<p id="p-0097" num="0096"><figref idref="DRAWINGS">FIGS. 5 to 11</figref> show the second preferred embodiment of the present invention. In this second embodiment, the control circuit having the configuration as shown in <figref idref="DRAWINGS">FIG. 1</figref> is basically utilized. Particularly, in the second embodiment, the CPU <b>18</b> executes control of auto-focus processing, as distinct from the first embodiment of the present invention.</p>
<p id="p-0098" num="0097">Now, the operation of the auto-focus processing will be described with reference to a flowchart of <figref idref="DRAWINGS">FIG. 6</figref>.</p>
<p id="p-0099" num="0098">An auto-focus processing system receives auto-focus signals inputted from the CPU <b>18</b> and then conducts the processing of <figref idref="DRAWINGS">FIG. 5</figref>.</p>
<p id="p-0100" num="0099">First, the CPU <b>18</b> drivingly controls the motor <b>12</b> by means of the driver <b>13</b> to drive a present position of the lens to an initial position x[0] as shown in <figref idref="DRAWINGS">FIG. 6</figref> (S<b>400</b>). A lens position whose focal length is at an infinite distance is set Lim (∞). Note that in the present invention, the initial position is not limited thereto.</p>
<p id="p-0101" num="0100">Simultaneously, the CPU <b>18</b> determines a section width (namely, a driving distance) based on the depth of field which is determined from a focal length of the zoom lens la and lens brightness (S<b>400</b>).</p>
<p id="p-0102" num="0101">Then, conditional processing of steps S<b>402</b> through S<b>411</b>A is conducted. In the conditional processing, the CPU <b>18</b> obtains evaluation values via the IPP <b>5</b> based on image signals obtained from the CCD <b>3</b> at present timing. The obtained evaluation values are stored in the SDRAM <b>19</b> (S<b>403</b>).</p>
<p id="p-0103" num="0102">Next, the CPU <b>18</b> determines or judges whether there are any interpolating sections (S<b>404</b>). When it is determined that there are any interpolating sections, the CPU <b>18</b> gives a corresponding interpolation value to each minimum driving distance for the interpolating sections (S<b>405</b>). When there is no interpolating section, the CPU <b>18</b> proceeds to a step S<b>406</b>.</p>
<p id="p-0104" num="0103">The method of giving such an interpolation value is achieved by figuring out an interpolation function which sends an evaluation value back to a driving position at a boundary, and by substituting each driving position into the function. For example, the interpolation function is derived from a tertiary natural spline function. The tertiary natural spline function is at most a tertiary continuous function which smoothly passes through sample points (in an example of <figref idref="DRAWINGS">FIG. 6</figref>, point Y[i] obtained by plotting an evaluation value at an boundary between the sections), and has a feature in that first- and second-order differential coefficients can be figured out at an arbitrary driving position.</p>
<p id="p-0105" num="0104">If there is no interpolating section in judgment of the step S<b>404</b>, the CPU <b>18</b> cheeks or examines a tendency of the sections already interpolated and judges whether a focus position is identified or not (S<b>406</b>). Then, when a focus position is capable of being identified, the CPU <b>18</b> drives the photographing lens to the focus position (S<b>407</b>) to conduct auto-focus identification processing, thus leading to the end of the processing (S<b>408</b>).</p>
<p id="p-0106" num="0105">Now, a method of identifying the focus position in the step S<b>408</b> will be described below in detail. First, a method of identifying a maximum of a curve is shown in an example of <figref idref="DRAWINGS">FIG. 6</figref>. Provided that interpolation of the sections C<b>1</b> through C<b>7</b> is completed, a driving position f in the section C<b>7</b> has a maximum evaluation value y[f] in the example of <figref idref="DRAWINGS">FIG. 6</figref>. At this time, first- and second-order differential coefficients d<b>1</b> and d<b>2</b> of an interpolation function at a position x[7] are figured out, Intuitively, the d<b>1</b> indicates a slope of the curve at the point, while the d<b>2</b> indicates an increasing ratio of the slope. And an error dn caused by noise is defined. In the case of relations d<b>1</b>&lt;−dn and d<b>2</b>&lt;−0, the point x[f] is judged to be a focus position.</p>
<p id="p-0107" num="0106">However, in the above-mentioned example, in a case where the maximum of the curve exists and the evaluation value is gently decreased, the identifying process cannot be terminated immediately. In this case, provided that the condition d<b>1</b>&lt;−dn is satisfied three times in sequence at boundaries x[m], x[m+1], and x[m+2] between adjacent sections, that is, provided three sequent evaluation values are decreased after the lens position f, the same way of judgment is performed. It should be noted that in the latter case or condition, the present invention is not limited to the above-mentioned judgment condition.</p>
<p id="p-0108" num="0107">If the focus position is not identified in judgment of the step S<b>406</b>, the CPU <b>18</b> further determines whether the focus position is near or not (S<b>409</b>).</p>
<p id="p-0109" num="0108">A method of determining or judging of the near focus position will be explained below with reference to an example of <figref idref="DRAWINGS">FIG. 7</figref>. Suppose interpolation of the sections C<b>1</b> through Ck is completed. In this situation, when it is judged that the focus position is near, the CPU <b>18</b> first figures out first- and second-order differential coefficients d<b>1</b> and d<b>2</b> at the position x[k]. In the case of d<b>1</b>&gt;dn and d<b>2</b>&lt;0 utilizing the error, dn caused by noise, the CPU <b>18</b> judges that the focus position is near. In <figref idref="DRAWINGS">FIG. 7</figref>, in the case of k=4, it is judged that the focus position is near.</p>
<p id="p-0110" num="0109">If the photographing lens <b>1</b> is supposed to be in the vicinity of the focus position in judgment of the step S<b>406</b>, the CPU <b>18</b> proceeds to and performs fine adjustment processing having a high degree of accuracy from a next section (S<b>410</b>).</p>
<p id="p-0111" num="0110">In contrast, if the photographing lens <b>1</b> is not supposed to be in the vicinity of the focus position in judgment of the step S<b>406</b>, the CPU <b>18</b> drives the photographing lens <b>1</b> to a next driving position (S<b>411</b>), whereby the operation returns to the top of a loop (S<b>403</b> in the conditional processing of S<b>402</b> to S<b>411</b>A).</p>
<p id="p-0112" num="0111">Referring now to a flowchart of <figref idref="DRAWINGS">FIG. 8</figref>, the fine adjustment processing having a high degree of accuracy will be explained in detail below. The CPU <b>18</b> drives the lens not only to boundaries between the sections but also into the appropriate section (which corresponds to a fine-adjustment section as shown in <figref idref="DRAWINGS">FIG. 7</figref>), thereby to obtain evaluation values (S<b>422</b> and S<b>423</b>), thus improving the accuracy of interpolation. Then, the operation proceeds to a step S<b>424</b>.</p>
<p id="p-0113" num="0112">In the step S<b>424</b>, it is determined whether a termination condition of the fine adjustment (in other words, a condition in which the lens is approaching a peak or a valley of the curve) is satisfied or not.</p>
<p id="p-0114" num="0113">This fine-adjustment termination condition arises when the focus position is identified, or when the fine adjustment is unnecessary as a result of judgment or determination that the focus position does not exist in the vicinity of the driving position of the photographing lens <b>1</b>.</p>
<p id="p-0115" num="0114">As one example of the fine-adjustment termination condition (S<b>424</b>) will be taken the following case: first- and second-order differential coefficients d<b>1</b> and d<b>2</b> at the position x[k], which is an end of an interpolated range, are figured out in <figref idref="DRAWINGS">FIG. 7</figref>, and either of a relation d<b>1</b>&lt;−dn and a relation d<b>2</b>&gt;0 is satisfied by the use of a noise error dn.</p>
<p id="p-0116" num="0115">In the case of <figref idref="DRAWINGS">FIG. 7</figref>, at k=10, the fine-adjustment termination condition is satisfied, whereby the CPU <b>18</b> terminates further fine adjustment from a next stage (S<b>425</b> and S<b>426</b>).</p>
<p id="p-0117" num="0116">Flowcharts of <figref idref="DRAWINGS">FIG. 9</figref> and <figref idref="DRAWINGS">FIG. 10</figref> (preparation processing) and a flow chart of <figref idref="DRAWINGS">FIG. 11</figref> (main processing) show an example in which processing of alternating an initial position is additionally performed by obtaining evaluation values of vicinal positions x[1], x[2], x[3], and x[4] in a driving direction, when driving the photographing lens <b>1</b> to the initial position in starting the auto-focus processing. In other words, the flowchart of the main processing as shown in <figref idref="DRAWINGS">FIG. 11</figref> has a sub-routine of the preparation processing of <figref idref="DRAWINGS">FIG. 10</figref> arranged between the steps S<b>400</b> and S<b>402</b> in the flowchart of <figref idref="DRAWINGS">FIG. 5</figref>, and has the same steps as those in the flowchart of <figref idref="DRAWINGS">FIG. 5</figref> except for this preparation processing.</p>
<p id="p-0118" num="0117">In this preparation processing, especially in conditional processing of steps S<b>430</b> through S<b>432</b>A, the CPU <b>18</b> repeatedly performs predetermined times, processing of a step S<b>431</b> for driving the photographing lens <b>1</b> in a predetermined direction by a prescribed width and processing of a step S<b>432</b> for obtaining evaluation values. Then the operation proceeds to a step S<b>433</b>. In this step S<b>433</b>, the CPU <b>18</b> conducts interpolation processing of scan sections or driving sections based on the evaluation values obtained from the conditional processing of the steps S<b>430</b> through S<b>432</b>A, thus leading to a step S<b>434</b>. In the step S<b>434</b>, the CPU <b>18</b> determines whether a direction of the focus position of the photographing lens <b>1</b> is identified with respect to the present position of the photographing lens <b>1</b>. When the focus-position direction of the photographing lens <b>1</b> is identified in judgment, the CPU <b>18</b> proceeds to a step S<b>435</b>. In contrast, when the focus-position direction of the photographing lens <b>1</b> is not identified, the CPU <b>18</b> proceeds to a step S<b>436</b>. In the step S<b>435</b>, the CPU <b>18</b> moves the photographing lens <b>1</b> to the present lens position and sets the driving direction on the focus position side, thus terminating the preparation processing. Thereafter the operation proceeds to a step S<b>402</b> of <figref idref="DRAWINGS">FIG. 11</figref>. In the step S<b>436</b>, the CPU <b>18</b> sets an initial position and a driving direction of the photographing lens <b>1</b> to predetermined ones, thereby terminating the processing. Then the operation proceeds to the step S<b>402</b> of <figref idref="DRAWINGS">FIG. 11</figref>.</p>
<p id="p-0119" num="0118">After such preparation processing, the CPU <b>18</b> conducts the conditional processing of the steps S<b>402</b> through S<b>411</b>A.</p>
<p id="p-0120" num="0119">For example, in the example of <figref idref="DRAWINGS">FIG. 9(</figref><i>a</i>), a focal-length infinity Lim (∞) is provided on a left side as a position of the photographing lens <b>1</b>, while a focal-length closest point Lim (Nr) is provided on a right side. The driving direction of the photographing lens <b>1</b> is one from the focal-length closest point Lim (Nr) side to the focal-length infinity Lim (∞) side. As a lens position P[i](i=0, 1, 2, 3 . . . ) of the photographing lens <b>1</b> is moved towards the focal-length infinity Lim(∞), a value i increases in the order of, for example, P[0], P[1], P[2], and P[3]. As the lens position P[i] is moved towards the focal length infinity Lim(∞), an evaluation value Q[i](i=0, 1, 2, 3 . . . ) of the photographing lens position P[i] decreases in the order of, for example, Q[0], Q[1], Q[2], and Q[3], resulting in a leftward declining curve.</p>
<p id="p-0121" num="0120">Accordingly, in the example of <figref idref="DRAWINGS">FIG. 9(</figref><i>a</i>), the CPU <b>18</b> can anticipate by means of judgment method based on the differential coefficients that a focus position exists in a reversed direction of the driving direction with respect to a present position of the photographing lens. In this case, the CPU <b>18</b> sets the present position of the photographing lens as an initial position and performs auto-focus processing (steps S<b>402</b> to S<b>412</b> in <figref idref="DRAWINGS">FIG. 11)</figref> in a direction of the focus existence position side. For example, when the photographing lens <b>1</b> is located at the lens position P[1] of <figref idref="DRAWINGS">FIG. 9</figref> (a), the CPU <b>18</b> sets the lens position P[1] as the initial position. And the CPU <b>18</b> drivingly controls the photographing lens <b>1</b> in a reversed direction of the direction from the lens position P[1] to the focal-length infinity Lim(∞), that is, in the direction of the focal-length closest position Lim(Nr) on the focus existence position aide to execute the auto-focus processing.</p>
<p id="p-0122" num="0121">Concretely, in the example of <figref idref="DRAWINGS">FIG. 9(</figref><i>b</i>), a focal-length infinity Lim (∞) is provided on a left side as a position of the photographing lens <b>1</b>, while a focal-length closest point Lim (Nr) is provided on a right side. The driving direction of the photographing lens <b>1</b> is one from the focal-length closest point Lim (Nr) side to the focal-length infinity Lim (∞) side. As a lens position P[i](i=0, 1, 2, 3 . . . ) of the photographing lens <b>1</b> is moved towards the focal-length infinity Lim(∞), a value i increases in the order of, for example, P[0], P[1], P[2], and P[3]. As the lens position P[i] is moved towards the focal-length infinity Lim(∞), an evaluation value Q[i](i=0, 1, 2, 3 . . . ) of the photographing lens position P[i] decreases in the order of, for example, Q[0], Q[1], Q[2], and Q[3], resulting in a leftward increasing curve.</p>
<p id="p-0123" num="0122">Accordingly, in the example of <figref idref="DRAWINGS">FIG. 9(</figref><i>b</i>), the CPU <b>18</b> can anticipate by means of judgment method based on the differential coefficients that a focus position exists in the same direction as the driving direction with respect to a present position of the photographing lens. In this case, the CPU <b>18</b> sets the present position of the photographing lens as an initial position and performs auto-focus processing (steps S<b>402</b> through S<b>412</b> in <figref idref="DRAWINGS">FIG. 11)</figref> in a direction of the focus existence position side. For example, when the photographing lens <b>1</b> is located at the lens position P[1] of <figref idref="DRAWINGS">FIG. 9(</figref><i>b</i>), the CPU <b>18</b> sets the lens position P[1] as the initial position. And the CPU <b>18</b> drivingly controls the photographing lens <b>1</b> in the direction from the lens position P[1] to the focal-length infinity Lim(∞) to execute the auto-focus processing.</p>
<p id="p-0124" num="0123">However, in an example of <figref idref="DRAWINGS">FIG. 12(</figref><i>a</i>), changes in evaluation values Q[0], Q[1], Q[2], and Q[3] are so small with respect to lens positions P[0], P[1], P[2], and P[3] that the existence direction of the focus position cannot be specified. In an example of <figref idref="DRAWINGS">FIG. 12(</figref><i>b</i>), a curve connecting evaluation values Q[0], Q[1], Q[2], and Q[3] has two inflection points at the evaluation values Q[1] and Q[2], resulting in that the existence direction of the focus position cannot be specified. Thus, in cases where the existence direction of the focus position cannot be specified, the CPU <b>18</b> sets the initial position as the prescribed position Lim(∞) to execute the auto-focus processing (S<b>402</b> through S<b>412</b> in <figref idref="DRAWINGS">FIG. 11)</figref>.</p>
<p id="p-0125" num="0124">As can be seen from the above description, the photographing apparatus of the preferred embodiment according to the present invention comprises: the photographing lens <b>1</b> capable of moving a focal plane of a subject image; the photographing device (CCD <b>3</b>) for receiving the subject image and outputting a signal into which the subject image is photo-electrically transferred, as image output; the driving means (motor section <b>12</b>) for driving the photographing lens <b>1</b>; and the control means (CPU <b>18</b>) for operating and controlling the driving means (motor <b>12</b>), serving as a calculation control circuit (calculation control means). Further, this control means (CPU <b>18</b>) divides a range for enabling driving of the photographing lens into a minimum number of or more sections which are capable of being interpolated, drives the photographing lens <b>1</b> to each divided section in sequence, figures out a focus signal based on a photographing signal obtained from the photographing device at the each driving position, and performs interpolation processing of an evaluation value obtained from the focus signal. By this interpolation processing, the control means (CPU <b>18</b>) derives a focus position of the photographing lens <b>1</b> which position causes the focal plane to coincide with the photographing plane. The control means (CPU <b>18</b>) drivingly controls the driving means (motor <b>12</b>) to drive the photographing lens to the derived focus position.</p>
<p id="p-0126" num="0125">This configuration ensures improved interpolation accuracy and an excellent balance of focus-position accuracy in an entire driving range of the photographing lens and time needed for obtaining a focus position. That is, by deriving an interpolation function based on sample positions of the photographing lens and evaluation values thereof, the focus position can be effectively derived without being influenced by a focal length of the lens and F number thereof This can provide the photographing apparatus that offers the excellent balance of the focus-position accuracy in the entire driving range and the time required for obtaining the focus position. The number of divided sections in a drivable range is not less than a minimum number which enables forming of the interpolation function, thereby allowing at least interpolation processing.</p>
<p id="p-0127" num="0126">The control means (CPU <b>18</b>) which serves as a calculation control circuit (calculation control means) of the photographing apparatus in the preferred embodiment figures out an auto-focus evaluation value based on the photographing signal obtained from the photographing device (CCD <b>3</b>) at each driving position, derives an interpolation function from data on the each driving position and the auto-focus evaluation value, and performs the interpolation processing of the section based on the interpolation function, thereby figuring out the focus position of the photographing lens for causing the focal plane to coincide with the photographing plane of the photographing device (CCD <b>3</b>).</p>
<p id="p-0128" num="0127">With this configuration, by deriving an interpolation function based on sample positions of the photographing lens and auto-focus evaluation values thereof, the focus position can be effectively derived without being influenced by a focal length of the lens and F number thereof. This can provide the photographing apparatus that offers an excellent balance of the focus-position accuracy In the entire driving range and the time required for obtaining the focus position.</p>
<p id="p-0129" num="0128">The control means (CPU <b>18</b>) of the photographing apparatus in the preferred embodiment figures out an auto-focus evaluation value based on the photographing signal obtained from the photographing device at each driving position, figures out an interpolation function from data on the each driving position and the auto-focus evaluation value, and performs the interpolation processing of the section based on the interpolation function. By this interpolation processing, the control means (CPU <b>18</b>) FIGS. out the focus position of the photographing lens for causing the focal plane to coincide with the photographing plane of the photographing device, and drivingly controls the driving means (motor <b>12</b>) to drive the photographing lens to the focus position. This configuration permits effectively calculating the focus position by deriving the interpolation function without being influenced by the focal length of the photographing lens and F number thereof.</p>
<p id="p-0130" num="0129">In the photographing apparatus of the preferred embodiment, the data on the auto-focus evaluation value is generated through a frequency filter. In a case where the data on a plurality of the auto-focus evaluation values is generated by using a plurality of the frequency filters, some or all of the data on the auto-focus evaluation values generated is subjected to the interpolation processing, thereby figuring out the focus position.</p>
<p id="p-0131" num="0130">With this configuration, for example, since a high frequency component allows interpolation with high focus-position accuracy, while a low frequency component allows interpolation of wider sections compared to the high frequency component, frequency filters are used to perform division of components. Either or both of components can be used for interpolation processing in accordance with an object such as interpolation.</p>
<p id="p-0132" num="0131">In the photographing apparatus of the preferred embodiment, the interpolation processing is conducted by use of a spline function. In this configuration, when a plot is shown with a horizontal axis indicating data on lens positions, each of which is based on the reciprocal of a focal length, and with a vertical axis indicating data on evaluation values, the spline function for interpolation of these data has characteristics of passing through data points and of continuing between the sections. Accordingly, the spline function exhibits a smooth curve.</p>
<p id="p-0133" num="0132">In the photographing apparatus of the preferred embodiment, the spline function is a natural spline function. A n-th order natural spline function is only a n-th function that permits connection of the data points most smoothly. With this configuration, the interpolation is performed by using such a function, thereby making satisfactory approximations of a number of functions which appear in optical phenomena. (Note that n is a plus odd number.)</p>
<p id="p-0134" num="0133">In the photographing apparatus of the preferred embodiment, the spline function is established by figuring out a differential coefficient. This permits figuring out an interpolation function by solving a differential equation or by substituting a differential coefficient into a predetermined formula.</p>
<p id="p-0135" num="0134">In the photographing apparatus of the preferred embodiment, the spline function is derived as, at most, a tertiary function formula by figuring out a second-order differential coefficient. In this configuration, a matrix that indicates the equation is a diagonal matrix with three columns. This enables figuring out calculation time in proportion to data points and obtaining an interpolation function only by substituting calculation.</p>
<p id="p-0136" num="0135">In the photographing apparatus of the preferred embodiment, when performing the interpolation processing, Newton's divided differences interpolation formula of an order of the number of sections or less is utilized for the interpolation processing at each section. In cases where interpolation that passes through data point, conducted on the basis of a high-order curve, is necessary, this configuration can obtain an interpolation function in a shorter time than that required in the interpolation conducted by the natural spline function. Further, this allows figuring out an interpolation function of an arbitrary order that is less than the number of the data points. When another data point is added, the interpolation function can be updated without wasting past calculation results, thus enabling effective calculation.</p>
<p id="p-0137" num="0136">In the photographing apparatus of the preferred embodiment, when performing the interpolation processing, a divided difference at a boundary between the sections is figured out for the interpolation processing at each section, and then the divided difference is substituted into a predetermined formula, thereby obtaining an interpolation value. With this configuration, divided differences having the order of n−1 or less are figured out for n data points, and these differences are substituted into the predetermined formula. Further, m-th order divided differences have a similar tendency to that of a m-th order differential coefficient. By the use of this tendency, the focus position is available in a short calculation time.</p>
<p id="p-0138" num="0137">In the photographing apparatus of the preferred embodiment, the predetermined formula is, at most, a tertiary function to an unknown, and the divided difference to be substituted is excluded from a constant term. With this configuration, an interpolation function of a section [P(k−1), P(k)] within a range of n data series P(i)[i=0, 1, 2, . . . , n] is figured out by substitution into the predetermined formula utilizing second-order divided differences f[P(k−2), P(k−1), P(k)] and f[P(k−1), P(k), P(k+1)]. Accordingly, the derived interpolation function obtained by using the above-mentioned differential coefficients has a similar tendency to that of a curve, thereby figuring out a focus position in a short calculation time.</p>
<p id="p-0139" num="0138">In the photographing apparatus of the preferred embodiment, first the interpolation processing derives an interpolation function for an interpolating section, and then the interpolation function is used for all driving positions of the photographing lens in the section, thereby deriving an evaluation value in a dummy manner. In this configuration, the derivation of the interpolation function permits effective derivation of the focus position without being influenced by a lens focal length and F number thereof. Further, the number of driving the actual lens is reduced, thereby to achieve speedup in a focusing-operation.</p>
<p id="p-0140" num="0139">In the photographing apparatus of the preferred embodiment, if there are any sections capable of being interpolated, obtaining processing of the evaluation value is conducted in parallel with the interpolation processing. In this configuration, the interpolation processing as genuine software processing and the driving processing of the photographing lens as mechanical processing are simultaneously performed, thereby conducting focus processing at higher speed than when both processing are performed in sequence.</p>
<p id="p-0141" num="0140">In the photographing apparatus of the preferred embodiment, as a result of the interpolation processing, when the focus position having a maximum evaluation value is identified, the obtaining processing of the evaluation value and the interpolation processing of the yet-to-be interpolated section are stopped, and then the photographing lens is driven to the section including the focus position. This permits omitting unnecessary driving of the lens, thereby to achieve speedup in focus processing.</p>
<p id="p-0142" num="0141">In the photographing apparatus of the preferred embodiment, as the result of the interpolation processing, when the focus position turns out to be near, the control means is shifted to fine adjustment. This can improve accuracy of a focus position that is derived from interpolation function calculation without loss of focus processing time.</p>
<p id="p-0143" num="0142">Further, in the photographing apparatus of the preferred embodiment, the above-mentioned fine adjustment moves the photographing lens such that a driving distance of the photographing lens is below a section width, but a minimum driving distance or more, thereby obtaining the evaluation value. This can improve the focus-position accuracy derived from the interpolation function calculation without loss of focus processing time, and facilitate control itself, resulting in less load onto calculation processing.</p>
<p id="p-0144" num="0143">When a focus position is anticipated by differential coefficients of the interpolation function in a quantitative manner and then the photographing lens approaches the anticipated focus position, the control means is shifted to fine adjustment. In this case, since a tendency of interpolation function in a just next section can be anticipated, the control means can proceed to the fine adjustment at substantially appropriate timing, thereby achieving reduction in time for focus processing and improving focus-position accuracy.</p>
<p id="p-0145" num="0144">Before driving the photographing lens to an initial position, an evaluation value of a section in the vicinity of a present driving position of the photographing lens is obtained. If a focus position is judged to be in the vicinity, auto-focus processing can be conducted in a direction towards the focus existence position which is to be anticipated from the present lens driving position. In this case, when the position of the photographing lens is in the vicinity of the focus position, it is possible to derive the focus position in a shorter time.</p>
<p id="p-0146" num="0145">With this construction, in cases where differential coefficients of the interpolation function are used when the focus position is judged to be in the vicinity, if a change in the coefficient is large within the section, it can be determined immediately in which direction the focus position is located with respect to the present position of the photographing lens, thereby figuring out the focus position in a shorter time.</p>
<?DETDESC description="Detailed Description" end="tail"?>
</description>
<us-math idrefs="MATH-US-00001" nb-file="US07298413-20071120-M00001.NB">
<img id="EMI-M00001" he="19.05mm" wi="96.69mm" file="US07298413-20071120-M00001.TIF" alt="embedded image " img-content="math" img-format="tif"/>
</us-math>
<us-math idrefs="MATH-US-00002" nb-file="US07298413-20071120-M00002.NB">
<img id="EMI-M00002" he="21.84mm" wi="76.20mm" file="US07298413-20071120-M00002.TIF" alt="embedded image " img-content="math" img-format="tif"/>
</us-math>
<us-math idrefs="MATH-US-00003" nb-file="US07298413-20071120-M00003.NB">
<img id="EMI-M00003" he="15.16mm" wi="76.20mm" file="US07298413-20071120-M00003.TIF" alt="embedded image " img-content="math" img-format="tif"/>
</us-math>
<us-claim-statement>What is claimed is:</us-claim-statement>
<claims id="claims">
<claim id="CLM-00001" num="00001">
<claim-text>1. A photographing apparatus comprising:
<claim-text>a photographing lens for photographing a subject image;</claim-text>
<claim-text>a photographing device for receiving said subject image and outputting a photographing signal into which the subject image is photo-electrically transferred;</claim-text>
<claim-text>a driving device for driving said photographing lens; and</claim-text>
<claim-text>a control device for controlling said driving device, wherein said control device
<claim-text>divides a driving range of said photographing lens into sections,</claim-text>
<claim-text>drives said photographing lens to boundaries between said divided sections in sequence by said driving device,</claim-text>
<claim-text>figures out an evaluation value based on said photographing signal obtained from said photographing device at said each boundary,</claim-text>
<claim-text>derives an interpolation function from said evaluation values at said boundaries,</claim-text>
<claim-text>derives interpolation values at all driving positions of said photographing lens within said each section based on said interpolation function, and</claim-text>
<claim-text>judges whether a focus position exists or not based on said evaluation values and said interpolation values,</claim-text>
<claim-text>wherein</claim-text>
<claim-text>if said focus position is identified, said control device executes judgment of focus to drive said photographing lens to said focus position, and</claim-text>
<claim-text>if said focus position is not identified, said control device judges whether said focus position is near or not to be shifted for performing fine adjustment when said focus position turns out to be near.</claim-text>
</claim-text>
</claim-text>
</claim>
<claim id="CLM-00002" num="00002">
<claim-text>2. The photographing apparatus as claimed in <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein said control device figures out the focus position of the photographing lens for causing a focal plane to coincide with a photographing plane of said photographing device.</claim-text>
</claim>
<claim id="CLM-00003" num="00003">
<claim-text>3. The photographing apparatus as claimed in <claim-ref idref="CLM-00002">claim 2</claim-ref>, wherein the data on said evaluation value is generated through a frequency filter, and wherein, in a case where the data on said evaluation value is generated by using a plurality of the frequency filters, some or all of the data on the evaluation value generated is subjected to the interpolation processing, thereby figuring out the focus position.</claim-text>
</claim>
<claim id="CLM-00004" num="00004">
<claim-text>4. The photographing apparatus as claimed in <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein said interpolation processing is one conducted by use of a spline function.</claim-text>
</claim>
<claim id="CLM-00005" num="00005">
<claim-text>5. The photographing apparatus as claimed in <claim-ref idref="CLM-00004">claim 4</claim-ref>, wherein said spline function is a natural spline function.</claim-text>
</claim>
<claim id="CLM-00006" num="00006">
<claim-text>6. The photographing apparatus as claimed in <claim-ref idref="CLM-00004">claim 4</claim-ref>, wherein said spline function is established by figuring out a differential coefficient.</claim-text>
</claim>
<claim id="CLM-00007" num="00007">
<claim-text>7. The photographing apparatus as claimed in <claim-ref idref="CLM-00004">claim 4</claim-ref>, wherein said spline function is derived as, at most, a tertiary function formula by figuring out a second-order differential coefficient.</claim-text>
</claim>
<claim id="CLM-00008" num="00008">
<claim-text>8. The photographing apparatus as claimed in <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein, in said interpolation processing, Newton's divided differences interpolation formula of an order of the number of sections or less is used for the interpolation processing at said each section.</claim-text>
</claim>
<claim id="CLM-00009" num="00009">
<claim-text>9. The photographing apparatus as claimed in <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein, in said interpolation processing, a divided difference at said boundary between the sections is figured out for the interpolation processing at said each section, and then the divided difference is substituted into a predetermined formula, thereby obtaining the interpolation value.</claim-text>
</claim>
<claim id="CLM-00010" num="00010">
<claim-text>10. The photographing apparatus as claimed in <claim-ref idref="CLM-00009">claim 9</claim-ref>, wherein said predetermined formula is, at most, a tertiary function to an unknown, and said divided difference to be substituted is excluded from a constant term.</claim-text>
</claim>
<claim id="CLM-00011" num="00011">
<claim-text>11. The photographing apparatus as claimed in <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein, if there are any sections capable of being interpolated, obtaining processing of said evaluation value is conducted in parallel with said interpolation processing.</claim-text>
</claim>
<claim id="CLM-00012" num="00012">
<claim-text>12. The photographing apparatus as claimed in <claim-ref idref="CLM-00011">claim 11</claim-ref>, wherein, as a result of said interpolation processing, when the focus position having a maximum evaluation value is identified, the obtaining processing of the evaluation value and the interpolation processing of the yet-to-be interpolated section are stopped, and then said photographing lens is driven to the section including the focus position.</claim-text>
</claim>
<claim id="CLM-00013" num="00013">
<claim-text>13. The photographing apparatus as claimed in <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein, in said fine adjustment, the photographing lens is driven such that a driving distance of said photographing lens is below a section width, but a minimum driving distance or more, thereby obtaining said interpolation value.</claim-text>
</claim>
<claim id="CLM-00014" num="00014">
<claim-text>14. The photographing apparatus as claimed in <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein,
<claim-text>said control device determines said focus position such that said focus position is judged as a point in which both of the following equations are satisfied
<claim-text>
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?>d1&lt;−dn<?in-line-formulae description="In-line Formulae" end="tail"?>
</claim-text>
<claim-text>
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?>d2&lt;0<?in-line-formulae description="In-line Formulae" end="tail"?>
</claim-text>
</claim-text>
</claim-text>
<claim-text>where a first-order differential coefficient d<b>1</b> indicates a slope of a curve, a second-order differential coefficient d<b>2</b> indicates an increasing ratio of said slope of said interpolation function at said point, and dn is a predetermined value.</claim-text>
</claim>
<claim id="CLM-00015" num="00015">
<claim-text>15. The photographing apparatus as claimed in <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein,
<claim-text>said control device judges that said focus position is near a position in which both of the following equations are satisfied
<claim-text>
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?>d1&gt;dn<?in-line-formulae description="In-line Formulae" end="tail"?>
</claim-text>
<claim-text>
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?>d2&lt;0<?in-line-formulae description="In-line Formulae" end="tail"?>
</claim-text>
</claim-text>
</claim-text>
<claim-text>where a first-order differential coefficient d<b>1</b> indicates a slope of a curve, a second-order differential coefficient d<b>2</b> indicates an increasing ratio of said slope of said interpolation function at said point, and dn is a predetermined value.</claim-text>
</claim>
</claims>
</us-patent-grant>
