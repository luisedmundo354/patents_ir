<us-patent-grant lang="EN" dtd-version="v4.2 2006-08-23" file="US07298743-20071120.XML" status="PRODUCTION" id="us-patent-grant" country="US" date-produced="20071106" date-publ="20071120">
<us-bibliographic-data-grant>
<publication-reference>
<document-id>
<country>US</country>
<doc-number>07298743</doc-number>
<kind>B2</kind>
<date>20071120</date>
</document-id>
</publication-reference>
<application-reference appl-type="utility">
<document-id>
<country>US</country>
<doc-number>10295014</doc-number>
<date>20021114</date>
</document-id>
</application-reference>
<us-application-series-code>10</us-application-series-code>
<us-term-of-grant>
<us-term-extension>869</us-term-extension>
</us-term-of-grant>
<classifications-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>H</section>
<class>04</class>
<subclass>L</subclass>
<main-group>12</main-group>
<subgroup>28</subgroup>
<symbol-position>F</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20071120</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>H</section>
<class>04</class>
<subclass>L</subclass>
<main-group>12</main-group>
<subgroup>56</subgroup>
<symbol-position>L</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20071120</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
</classifications-ipcr>
<classification-national>
<country>US</country>
<main-classification>370392</main-classification>
<further-classification>370401</further-classification>
<further-classification>370410</further-classification>
</classification-national>
<invention-title id="d0e53">Mobile router support for IPv6</invention-title>
<references-cited>
<citation>
<patcit num="00001">
<document-id>
<country>US</country>
<doc-number>5781772</doc-number>
<kind>A</kind>
<name>Wilkinson, III et al.</name>
<date>19980700</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00002">
<document-id>
<country>US</country>
<doc-number>5796740</doc-number>
<kind>A</kind>
<name>Perlman et al.</name>
<date>19980800</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00003">
<document-id>
<country>US</country>
<doc-number>6061650</doc-number>
<kind>A</kind>
<name>Malkin et al.</name>
<date>20000500</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00004">
<document-id>
<country>US</country>
<doc-number>6061712</doc-number>
<kind>A</kind>
<name>Tzeng</name>
<date>20000500</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00005">
<document-id>
<country>US</country>
<doc-number>6101543</doc-number>
<kind>A</kind>
<name>Alden et al.</name>
<date>20000800</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00006">
<document-id>
<country>US</country>
<doc-number>6195705</doc-number>
<kind>B1</kind>
<name>Leung</name>
<date>20010200</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00007">
<document-id>
<country>US</country>
<doc-number>6223172</doc-number>
<kind>B1</kind>
<name>Hunter et al.</name>
<date>20010400</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00008">
<document-id>
<country>US</country>
<doc-number>6240089</doc-number>
<kind>B1</kind>
<name>Okanoue et al.</name>
<date>20010500</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00009">
<document-id>
<country>US</country>
<doc-number>6256300</doc-number>
<kind>B1</kind>
<name>Ahmed et al.</name>
<date>20010700</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00010">
<document-id>
<country>US</country>
<doc-number>6269099</doc-number>
<kind>B1</kind>
<name>Borella et al.</name>
<date>20010700</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00011">
<document-id>
<country>US</country>
<doc-number>6285680</doc-number>
<kind>B1</kind>
<name>Steinka et al.</name>
<date>20010900</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00012">
<document-id>
<country>US</country>
<doc-number>6636498</doc-number>
<kind>B1</kind>
<name>Leung</name>
<date>20031000</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370338</main-classification></classification-national>
</citation>
<citation>
<patcit num="00013">
<document-id>
<country>US</country>
<doc-number>6771609</doc-number>
<kind>B1</kind>
<name>Gudat et al.</name>
<date>20040800</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370254</main-classification></classification-national>
</citation>
<citation>
<patcit num="00014">
<document-id>
<country>JP</country>
<doc-number>2000-341330</doc-number>
<date>20001200</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<nplcit num="00015">
<othercit>Liping, Shen et al. (2000) “Secure Mobile IPv6 System,” Network and Communication, Computer Engineering and Application 2000.6, pp. 125-128, (original Chinese language version).</othercit>
</nplcit>
<category>cited by other</category>
</citation>
<citation>
<nplcit num="00016">
<othercit>Liping, Shen et al. (2000) “Secure Mobile IPv6 System,” Network and Communication, Computer Engineering and Application 2000.6, pp. 125-128, (English translation—10 pages).</othercit>
</nplcit>
<category>cited by other</category>
</citation>
<citation>
<nplcit num="00017">
<othercit>Okajima, Ichiro et al. (2001) “Mobile IPv6 Extensions Supporting Mobile Networks,” Technical Report of IEICE IN2001-15, 101(62):105-113 (English language translation of Abstract provided).</othercit>
</nplcit>
<category>cited by other</category>
</citation>
<citation>
<nplcit num="00018">
<othercit>Ernst, Theirry et al. (2001) “Mobile Networks Support in Mobile IPv6 (Prefix Scope Binding Updates),” found at http://www.watersprings.org/pub/id/draft-ernst-mobileip-v6-network-02.txt 20 pages.</othercit>
</nplcit>
<category>cited by other</category>
</citation>
<citation>
<nplcit num="00019">
<othercit>Japanese Office Action dated Jul. 24, 2006, received in Japanese Patent Application No. 2003-544937 (English language translation attached), 6 pages.</othercit>
</nplcit>
<category>cited by other</category>
</citation>
<citation>
<nplcit num="00020">
<othercit>DHCP for IPv6; Charles E. Perkins and Jim Bound; Sun Microsystems, Inc., Palo Alto, CA 94303; Digital Equipment Company, Nashua, NH 03062 Jul. 1998.</othercit>
</nplcit>
<category>cited by other</category>
</citation>
<citation>
<nplcit num="00021">
<othercit>S. Corson; University of Maryland; J. Macker; Naval Research Laboratory, Jan. 1999; “Mobile Ad hoc Networking (MANET): Routing Protocol Performance Issues and Evaluation Considerations”; Copyright (C) The Internet Society (1999).</othercit>
</nplcit>
<category>cited by other</category>
</citation>
</references-cited>
<number-of-claims>8</number-of-claims>
<us-exemplary-claim>1</us-exemplary-claim>
<us-exemplary-claim>8</us-exemplary-claim>
<us-field-of-classification-search>
<classification-national>
<country>US</country>
<main-classification>None</main-classification>
</classification-national>
</us-field-of-classification-search>
<figures>
<number-of-drawing-sheets>5</number-of-drawing-sheets>
<number-of-figures>5</number-of-figures>
</figures>
<us-related-documents>
<us-provisional-application>
<document-id>
<country>US</country>
<doc-number>60336221</doc-number>
<kind>00</kind>
<date>20011114</date>
</document-id>
</us-provisional-application>
<related-publication>
<document-id>
<country>US</country>
<doc-number>20030117965</doc-number>
<kind>A1</kind>
<date>20030626</date>
</document-id>
</related-publication>
</us-related-documents>
<parties>
<applicants>
<applicant sequence="001" app-type="applicant-inventor" designation="us-only">
<addressbook>
<last-name>Markki</last-name>
<first-name>Outi Elisa</first-name>
<address>
<city>Espoo</city>
<country>FI</country>
</address>
</addressbook>
<nationality>
<country>FI</country>
</nationality>
<residence>
<country>FI</country>
</residence>
</applicant>
<applicant sequence="002" app-type="applicant-inventor" designation="us-only">
<addressbook>
<last-name>Kniveton</last-name>
<first-name>Timothy J.</first-name>
<address>
<city>San Francisco</city>
<state>CA</state>
<country>US</country>
</address>
</addressbook>
<nationality>
<country>omitted</country>
</nationality>
<residence>
<country>US</country>
</residence>
</applicant>
<applicant sequence="003" app-type="applicant-inventor" designation="us-only">
<addressbook>
<last-name>Malinen</last-name>
<first-name>Jari T.</first-name>
<address>
<city>Sunnyvale</city>
<state>CA</state>
<country>US</country>
</address>
</addressbook>
<nationality>
<country>omitted</country>
</nationality>
<residence>
<country>US</country>
</residence>
</applicant>
<applicant sequence="004" app-type="applicant-inventor" designation="us-only">
<addressbook>
<last-name>Devarapalli</last-name>
<first-name>Vijay</first-name>
<address>
<city>Santa Clara</city>
<state>CA</state>
<country>US</country>
</address>
</addressbook>
<nationality>
<country>omitted</country>
</nationality>
<residence>
<country>US</country>
</residence>
</applicant>
<applicant sequence="005" app-type="applicant-inventor" designation="us-only">
<addressbook>
<last-name>Perkins</last-name>
<first-name>Charles E.</first-name>
<address>
<city>Saratoga</city>
<state>CA</state>
<country>US</country>
</address>
</addressbook>
<nationality>
<country>omitted</country>
</nationality>
<residence>
<country>US</country>
</residence>
</applicant>
</applicants>
<agents>
<agent sequence="01" rep-type="attorney">
<addressbook>
<orgname>Squire, Sanders &amp; Dempsey L.L.P.</orgname>
<address>
<country>unknown</country>
</address>
</addressbook>
</agent>
</agents>
</parties>
<assignees>
<assignee>
<addressbook>
<orgname>Nokia Corporation</orgname>
<role>03</role>
<address>
<city>Espoo</city>
<country>FI</country>
</address>
</addressbook>
</assignee>
</assignees>
<examiners>
<primary-examiner>
<last-name>Ryman</last-name>
<first-name>Daniel J.</first-name>
<department>2616</department>
</primary-examiner>
</examiners>
</us-bibliographic-data-grant>
<abstract id="abstract">
<p id="p-0001" num="0000">A method and system for supporting mobile routers in Internet Protocol version 6 (IPv6) is provided. A mobile router obtains a care-of-address associated with an address configuration. The mobile router registers the care-of-address with a home agent. A bi-directional tunnel is established between the mobile router and the home agent. Packets are then forwarded via the bi-directional tunnel.</p>
</abstract>
<drawings id="DRAWINGS">
<figure id="Fig-EMI-D00000" num="00000">
<img id="EMI-D00000" he="146.73mm" wi="236.56mm" file="US07298743-20071120-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00001" num="00001">
<img id="EMI-D00001" he="237.15mm" wi="144.70mm" orientation="landscape" file="US07298743-20071120-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00002" num="00002">
<img id="EMI-D00002" he="235.20mm" wi="137.92mm" orientation="landscape" file="US07298743-20071120-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00003" num="00003">
<img id="EMI-D00003" he="240.20mm" wi="150.20mm" orientation="landscape" file="US07298743-20071120-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00004" num="00004">
<img id="EMI-D00004" he="188.55mm" wi="88.05mm" file="US07298743-20071120-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00005" num="00005">
<img id="EMI-D00005" he="183.64mm" wi="86.02mm" file="US07298743-20071120-D00005.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
</drawings>
<description id="description">
<?RELAPP description="Other Patent Relations" end="lead"?>
<heading id="h-0001" level="1">RELATED APPLICATION</heading>
<p id="p-0002" num="0001">This application is a Utility Patent application based on a previously filed U.S. Provisional Patent application, U.S. Ser. No. 60/336,221 filed on Nov. 14, 2001, the benefit of the filing date of which is hereby claimed under 35 U.S.C. §119(e).</p>
<?RELAPP description="Other Patent Relations" end="tail"?>
<?BRFSUM description="Brief Summary" end="lead"?>
<heading id="h-0002" level="1">FIELD OF THE INVENTION</heading>
<p id="p-0003" num="0002">This invention relates generally to networking and more specifically, to a system and method for supporting mobile routers in IPv6.</p>
<heading id="h-0003" level="1">BACKGROUND</heading>
<p id="p-0004" num="0003">Whether walking, flying, or riding, people are frequently traveling. While traveling, they often carry or go with one or more electronic devices. For example, many people carry a cellular phone with them. In addition, while traveling in a car, a person might be traveling with a laptop, car electronics, and other electronic devices.</p>
<p id="p-0005" num="0004">Maintaining connectivity with the Internet is increasingly becoming more important. People like to check stocks, weather, and correspond via email. They like to have their electronic calendars available at all times and have access to files and Internet content. Gamers like to play other gamers online.</p>
<p id="p-0006" num="0005">With this need to maintain connectivity comes challenges. Building each device with cellular or satellite communication capabilities might obtain an “always-on” experience but at an economic cost both to producers and consumers. For example, a user may not wish to pay a monthly connection charge for each device the user has. Nor may the user wish to pay more for the capability of each device to connect through a cellular or satellite channel. Thus, there is a need for a means for leveraging existing infrastructure to provide Internet connectivity to a group of devices traveling in a mobile environment.</p>
<heading id="h-0004" level="1">SUMMARY</heading>
<p id="p-0007" num="0006">A method and system for supporting mobile routers in Internet Protocol version 6 (IPv6) is provided. A mobile router obtains a care-of-address associated with an address configuration. The mobile router registers the care-of-address with a home agent. A bi-directional tunnel is established between the mobile router and the home agent. Packets are then forwarded via the bi-directional tunnel.</p>
<p id="p-0008" num="0007">In one aspect of the invention, a request is made that packets that include an address prefix within a set of prefixes be forwarded to the mobile router.</p>
<p id="p-0009" num="0008">In another aspect of the invention, configuration information is forwarded via the bi-directional tunnel. The configuration information may be routing information. The configuration information may be static or dynamic. The configuration information may be encapsulated.</p>
<p id="p-0010" num="0009">In another aspect of the invention, the mobile router obtains the care-of-address while attaching to a network. The network is associated with a network address. The network address includes a prefix. The care-of-address is generated by combining the prefix with an identifier that identifies the mobile router.</p>
<p id="p-0011" num="0010">In another aspect of the invention, the home agent receives a packet that includes a home address of the mobile router. The packet is then forwarded via the bi-directional tunnel to the mobile router. The home address of the mobile router may be employed to retrieve the care-of-address from a table included on the home agent.</p>
<p id="p-0012" num="0011">In another aspect of the invention, a home agent updates a routing table. The routing table includes a routing entry associated with a mobile router that is reachable from the home agent. The home agent receives a packet. The home agent selects a bi-directional tunnel associated with the mobile router. The home agent then tunnels the packet to the mobile router. The packet may be destined to the mobile router or to a node on a mobile network reachable through the mobile router.</p>
<p id="p-0013" num="0012">According to another aspect of the invention, a system is disclosed that operates substantially according to the aspects described above.</p>
<p id="p-0014" num="0013">These and various other features as well as advantages, which characterize the present invention, will be apparent from a reading of the following detailed description and a review of the associated drawings.</p>
<?BRFSUM description="Brief Summary" end="tail"?>
<?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?>
<description-of-drawings>
<heading id="h-0005" level="1">BRIEF DESCRIPTION OF THE DRAWINGS</heading>
<p id="p-0015" num="0014"><figref idref="DRAWINGS">FIG. 1</figref> shows a block diagram of a mobile router and a mobile node both at home;</p>
<p id="p-0016" num="0015"><figref idref="DRAWINGS">FIG. 2</figref> shows a block diagram of a mobile node docked in a mobile network;</p>
<p id="p-0017" num="0016"><figref idref="DRAWINGS">FIG. 3</figref> shows a block diagram of a mobile node docked in a mobile network accessed through a mobile router, where the mobile router is attached to a foreign network;</p>
<p id="p-0018" num="0017"><figref idref="DRAWINGS">FIG. 4</figref> shows a flowchart illustrating an exemplary method in which a mobile router operates; and</p>
<p id="p-0019" num="0018"><figref idref="DRAWINGS">FIG. 5</figref> shows a flowchart illustrating an exemplary method in which a home agent operates.</p>
</description-of-drawings>
<?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?>
<?DETDESC description="Detailed Description" end="lead"?>
<heading id="h-0006" level="1">DETAILED DESCRIPTION</heading>
<p id="p-0020" num="0019">In the following detailed description of exemplary embodiments of the invention, reference is made to the accompanied drawings, which form a part hereof, and which are shown by way of illustration, specific exemplary embodiments of which the invention may be practiced. These embodiments are described in sufficient detail to enable those skilled in the art to practice the invention, and it is to be understood that other embodiments may be utilized, and other changes may be made, without departing from the spirit or scope of the present invention. The following detailed description is, therefore, not to be taken in a limiting sense, and the scope of the present invention is defined by the appended claims.</p>
<p id="p-0021" num="0020">In embodiments of the invention, a mobile node acting as a mobile router may automatically register with its home domain and preserve sessions to multiple devices moving along with the mobile node. There can be multiple devices, fixed or mobile, behind the mobile router. It is also possible to apply this access method recursively, creating nested mobile networks, which operate within other mobile networks.</p>
<p id="p-0022" num="0021">On current mobile IPv6-based data communication networks, the mode of operation for mobile networks supports host mobility. Router mobility is assumed as an extension to host mobility such that a subnet can connect to a mobile node and move with it.</p>
<p id="p-0023" num="0022">Embodiments of the invention described below provide a method by which a mobile router and its home agent can support insertion of forwarding table entries for hosts and networks directly accessible to the mobile router, and moving along with it, whose packets are forwarded by the mobile router to the rest of the Internet. The method considers two cases. The first case is a consumer device which gets a pre-configured static network route from the home agent. The home agent inserts and removes this route as a function of whether the mobile router is registered with its home agent or not. The second case considers a full-featured mobile router which runs a routing protocol as if it were in its home domain. This dynamic routing protocol signaling is extended over bi-directional tunneling between the mobile router and its home agent so that this tunnel seems like a virtual point-to-point link. The link is used to forward packets between the mobile router (and its attached mobile network) and the home network, so that packets to and from the mobile network appear to be processed and returned from the home domain. Thus, mobility is invisible to hosts on the mobile network, and to nodes corresponding to those hosts.</p>
<p id="p-0024" num="0023">One case when this method is useful is when users with multiple personal devices move and attach to different points of access to the global Internet. The personal devices are assumed to be IPv6 capable and can also connect to the global Internet via a primary device, such as a mobile router. Also, the method enables a distributed organization where a cloud of nodes can connect to a corporate network over the public Internet, e.g., by a secure bi-directional tunnel, and extend the corporate network to a moving set of nodes connected through a mobile router running a dynamic routing protocol.</p>
<p id="p-0025" num="0024">This method can perform routing in accordance with existing routing protocols. Routing is facilitated by the tunnel between the mobile router and the home agent. Authorization to change the forwarding state stems from the existing agreements implemented by aggregation routers along the path to the home network. The method can be performed without modifying existing protocols. Instead, implementation changes are made in the home agent and mobile router. Furthermore, nodes on the mobile network need not be aware of the mobility of the network.</p>
<p id="p-0026" num="0025">Embodiments of the invention provide a method whereby a host connected through dynamic and mobile connections to the Internet can act as a router for other hosts traveling with it, with little or no manual configuration.</p>
<p id="p-0027" num="0026">Embodiments of the invention reuse Mobile IPv6 to allow a mobile router to access the Internet through various care-of-addresses, while maintaining the mobile router's permanent, globally-reachable home address. This is accomplished through the methods described below that improve a Mobile IPv6 implementation to allow router mobility without changing the underlying message formats or adding protocol extensions.</p>
<p id="p-0028" num="0027">A care-of-address is used when a mobile router is away from its home network. A care-of-address is an address at which the mobile router may be reached while the mobile router is away from its home network. First, the mobile node obtains an address (a care-of-address) on the network to which it attaches. An address (care-of address) may be obtained by a stateless address autoconfiguration, a stateful address configuration, and the like. The stateful address configuration includes those actions where the mobile router may employ Dynamic Host Configuration Protocol (DHCP), a server, or some other mechanism to obtain this address. The stateless address autoconfiguration includes those actions where the mobile router may generate this address by combining a network prefix advertised of the network and an identifier unique to the mobile router. However, the invention is not limited to these approaches, and virtually any mechanism may be employed that enables the mobile router to obtain a care-of-address on the network to which it attaches. In any event, the mobile router then sends a binding update including the care-of-address to the mobile router's home agent. When the home agent receives traffic that is directed to the mobile router's home address, the home agent can then forward the traffic to the mobile router using the care-of-address included in the binding update.</p>
<p id="p-0029" num="0028">Embodiments of the invention involve using various existing protocols and protocol message exchanges to establish state on both the mobile router and its Mobile IPv6 home agent. This state allows packets destined for the mobile router or any of the hosts connected to a mobile network utilizing the mobile router to be tunneled by the home agent from their usual arrival point at the home network (where the home agent resides) to the mobile router at its current attachment point. Additionally, packets from nodes on the home network are sent back through the tunnel to the home network and then forwarded as usual from there to their intended destinations. This avoids the packets being ignored by routers at the current attachment point due to incorrect topology. The method may be implemented by adding functionality and packet forwarding rules to the network code in both the mobile router and home agent implementation.</p>
<p id="h-0007" num="0000">Mobile Router Implementation Changes</p>
<p id="p-0030" num="0029"><figref idref="DRAWINGS">FIG. 4</figref> shows a flowchart illustrating an exemplary method in which a mobile router operates. The mobile router's implementation changes as follows:</p>
<p id="p-0031" num="0030">(1) When the mobile router is traveling away from its home network and has reached a new attachment point, it obtains a globally reachable care-of-address as specified by an Address configuration (block <b>410</b>). Address configuration may include stateless address autoconfiguration, stateful address configuration, and the like. In any event, after an address is generated, a check is typically performed to determine whether any other node in the network is using the address. If no other node is using the address (which is typical), the attached node may then use the address.</p>
<p id="p-0032" num="0031">(2) The mobile router registers its care-of-address with its home agent by sending a Mobile IPv6 Binding Update message, allowing packets arriving at its home network to be tunneled to it at its current attachment point (block <b>415</b>).</p>
<p id="p-0033" num="0032">(3) The mobile router establishes a bi-directional tunnel between itself and its home agent (block <b>420</b>).</p>
<p id="p-0034" num="0033">(4) The mobile router either uses static configuration information (consumer case) or runs a dynamic routing protocol with its home agent (fully enabled case) to exchange routing information about its mobile network with the home agent (block <b>425</b>). For example, a cellular phone used as a mobile router would not typically be allowed to update the routing table of a cellular provider's router acting as the cellular phone's home agent. Nor would the cellular phone used as a mobile router wish to obtain all of the routing information available on the cellular provider's router. Rather, the cellular phone may be configured statically to send all outgoing traffic not destined to the mobile network to the cellular provider's router.</p>
<p id="p-0035" num="0034">On the other hand, a mobile router contained on, for example, a cruise ship with hundreds of computers may be allowed to engage in a dynamic routing protocol and to exchange routing information with the mobile router's home network router and other routers.</p>
<p id="p-0036" num="0035">(5) In the fully enabled mode, the mobile router runs a dynamic routing protocol with its home agent to exchange up-to-date routing information. The mobile router continues running this intra-domain routing protocol even when it moves away from home and attaches to a visited domain. This is achieved by dynamically modifying the list of the interfaces on which the routing protocol is active. For example, assume a mobile router used interface ‘A’ when it was connected to its home network and was exchanging routing updates through that interface. When the mobile router moves and attaches to a visited network with the same interface, the routing protocol is turned off for interface ‘A’. This is to prevent the mobile router from advertising the routes in its mobile subnet to the visited network.</p>
<p id="p-0037" num="0036">(6) The mobile router then sets up an encapsulating tunnel to its Home Agent. An encapsulating tunnel is any method, secure or otherwise, that could be used to transmit data between the mobile router and the Home Agent. For example, a packet may be encapsulated in another packet and sent to the home agent. Typically, the tunnel is made secure to provide a secure communication channel. This encapsulating tunnel is then added as a virtual interface to the list of interfaces on which the routing protocol is active. The mobile router then starts sending routing information through this tunnel to the Home Agent. Most IPv6 intra-domain routing protocols assume link-local address to appear as the source address for routing information messages. The encapsulating tunnel takes care of this by encapsulating the routing messages in another IP header. The outer IP header has the source address as the mobile router's current care-of-address and the destination address as the Home Agent's address. When the Home Agent receives the tunneled routing message, it decapsulates it and processes the inner routing message. The inner routing message appears as if the packet was sent from a node on the link.</p>
<p id="p-0038" num="0037">(7) The mobile router then sends router advertisements to its mobile network, using either a standard Neighbor Discovery protocol or running an ad-hoc networking protocol, such as AODV (ad hoc on demand distance vector routing protocol), to connect to other mobile hosts</p>
<p id="p-0039" num="0038">(8) The mobile router makes a rule in its forwarding engine to forward packets between its mobile network and the home network via the bi-directional tunnel established in step <b>3</b> (block <b>430</b>).</p>
<p id="h-0008" num="0000">Home Agent Changes</p>
<p id="p-0040" num="0039"><figref idref="DRAWINGS">FIG. 5</figref> shows a flowchart illustrating an exemplary method in which a home agent operates. The Home Agent performs the following steps:</p>
<p id="p-0041" num="0040">(1) The Home Agent adds the bi-directional tunnel set up with the mobile router as one of the interfaces on which the intra-domain routing protocol is active. Then, the Home Agent sends periodic routing updates for the network prefixes that it is able to reach through this tunnel (block <b>510</b>).</p>
<p id="p-0042" num="0041">(2) The Home Agent also adds route entries to its routing table for all the prefixes reachable through the mobile router (block <b>515</b>).</p>
<p id="p-0043" num="0042">(3) When a packet destined for the mobile router is received by the Home Agent, the binding cache entry for the mobile router is found, and the packet is tunneled to the mobile router (blocks <b>520</b> and <b>525</b>). This is the same as would happen with any other mobile node as defined by Mobile IPv6.</p>
<p id="p-0044" num="0043">(4) When a packet is received by the home agent that is destined for a node on the mobile network, the home agent finds a route entry for the mobile network where the mobile router is listed as the next hop gateway. The home agent then does another routing lookup for the mobile router and finds the original binding cache entry, causing the packet to be tunneled to the mobile router (blocks <b>520</b> and <b>525</b>). Blocks <b>520</b> and <b>525</b> may be repeated for each packet the mobile router receives that is destined to the mobile router or a node on the mobile network.</p>
<p id="h-0009" num="0000">Exemplary Systems</p>
<p id="p-0045" num="0044"><figref idref="DRAWINGS">FIG. 1</figref> shows a block diagram of a mobile router and a mobile node both at home. In the network configuration of <figref idref="DRAWINGS">FIG. 1</figref>, messages can be routed using normal IPv6 mechanisms. Note that mobile network <b>105</b>'s prefix is aggregated with home network <b>110</b>'s prefix. When mobile router <b>115</b> is at home and attached a home link, the packets destined for the mobile network show up on one mobile router <b>115</b>'s interfaces. Then, mobile router <b>115</b> can route the packets to mobile network <b>105</b>. In this case, mobile router <b>115</b> acts as a normal router.</p>
<p id="p-0046" num="0045">Correspondent node <b>120</b> is a node somewhere on the Internet that is trying to send a message. Correspondent node <b>120</b> does not need to know anything about mobility of nodes in mobile network <b>105</b> to send a message to mobile network <b>105</b>.</p>
<p id="p-0047" num="0046"><figref idref="DRAWINGS">FIG. 2</figref> shows a block diagram of a mobile node docked in a mobile network. Mobile router <b>115</b> is still attached to its home network. A packet from correspondent node <b>120</b> to mobile node may be directed in one of two or more paths. If correspondent node <b>120</b> does not know anything about the mobility of mobile node <b>205</b>, correspondent node <b>120</b> may send the packet to a home address of mobile node <b>205</b>. After being transmitted to the home network of mobile node <b>205</b>, home agent <b>210</b> may pick up the packet. After it receives the packet, home agent <b>210</b> may perform a lookup on a bindings table <b>215</b>. In bindings table <b>215</b>, home agent <b>210</b> may find a binding entry that tells home agent <b>210</b> a care-of-address for mobile node <b>205</b>. Home agent <b>210</b> may then forward the packet to the care-of-address which causes the packet to be delivered to mobile router <b>115</b> and then mobile node <b>205</b>.</p>
<p id="p-0048" num="0047">Correspondent node <b>120</b> may support binding and be aware of the mobility of mobile node <b>205</b>. When correspondent node <b>120</b> does support binding, correspondent node <b>120</b> may send messages directed to mobile node <b>205</b>'s care-of-address.</p>
<p id="p-0049" num="0048"><figref idref="DRAWINGS">FIG. 3</figref> shows a block diagram of a mobile node docked in a mobile network accessed through a mobile router, where the mobile router is attached to a foreign network. Mobile router <b>115</b> is attached to visited network <b>305</b>. Mobile router <b>115</b>'s home network (home network <b>110</b>) and visited network <b>305</b> may be connected through optional inter-operator link <b>310</b>. Inter-operator link <b>310</b> may provide a faster link wherein traffic is not required to go through the Internet when going between routers on home network <b>110</b> and visited network <b>305</b>.</p>
<p id="p-0050" num="0049">When correspondent node <b>120</b> is sending a message to mobile node <b>205</b> or any other node on mobile network <b>105</b> through mobile router <b>115</b>, the message will arrive on home network <b>110</b>. Home agent <b>315</b> will see the message and that the message should be forwarded to the mobile network. Home agent <b>315</b> will perform a lookup in binding cache <b>320</b>. When it finds a binding in binding cache <b>320</b>, home agent <b>315</b> will recognize that home agent <b>315</b> should send the message to mobile router <b>1</b> <b>15</b> at a care-of-address indicated in the binding. Home agent <b>315</b> may then send the message through a tunnel through the Internet through visited network router <b>325</b> to mobile router <b>115</b>. In <figref idref="DRAWINGS">FIG. 3</figref>, mobile router <b>115</b> is attached at a care-of-address reachable at visited network <b>305</b>.</p>
<p id="p-0051" num="0050">Upon receipt of the packet, mobile router <b>115</b> decapsulates the packet and determines that it should route the packet to mobile network <b>105</b>. Mobile router <b>115</b> then sends the message on mobile router <b>115</b>'s other interface to mobile network <b>105</b>.</p>
<p id="p-0052" num="0051">When correspondent node <b>120</b> is sending a message to mobile node <b>205</b> by addressing the message to mobile node <b>205</b>'s home address, the message arrives at home network <b>125</b>. Home agent <b>210</b> sees the message. Home agent <b>210</b> performs a lookup in cache bindings <b>215</b> and finds that the message should be forwarded to a care-of-address. Home agent <b>315</b> may then send the message through a tunnel to the care-of-address. Home agent <b>315</b> sees the message and performs a lookup of in cache bindings <b>320</b>. A binding in cache bindings <b>320</b> indicates that the message should be forwarded to mobile network <b>105</b>. Home agent <b>315</b> may then forward the message through a tunnel to mobile router <b>115</b>. Mobile router <b>115</b> may then decapsulate the message and forward the message to mobile network <b>105</b>.</p>
<p id="p-0053" num="0052">The various embodiments of the invention may be implemented as a sequence of computer implemented steps or program modules running on a computing system and/or as interconnected machine logic circuits or circuit modules within the computing system. The implementation is a matter of choice dependent on the performance requirements of the computing system implementing the invention. In light of this disclosure, it will be recognized by one skilled in the art that the functions and operation of the various embodiments disclosed may be implemented in software, in firmware, in special purpose digital logic, or any combination thereof without deviating from the spirit or scope of the present invention.</p>
<p id="p-0054" num="0053">The above specification, examples and data provide a complete description of the manufacture and use of the composition of the invention. Since many embodiments of the invention can be made without departing from the spirit and scope of the invention, the invention resides in the claims hereinafter appended.</p>
<?DETDESC description="Detailed Description" end="tail"?>
</description>
<us-claim-statement>What is claimed is:</us-claim-statement>
<claims id="claims">
<claim id="CLM-00001" num="00001">
<claim-text>1. A method for supporting mobile routers in IPv6, comprising: obtaining, by a mobile router from a visited network, a care-of-address associated with an address configuration;
<claim-text>registering, by the mobile router, the care-of-address with a home agent of the mobile router;</claim-text>
<claim-text>establishing, by the mobile router, a bi-directional tunnel between the mobile router and the home agent;</claim-text>
<claim-text>forwarding from the mobile router to the home agent configuration information of a mobile network via the bi-directional tunnel wherein the mobile network is accessible through the mobile router;</claim-text>
<claim-text>requesting that packets that include any address prefix within a set of prefixes be forwarded to the mobile router;</claim-text>
<claim-text>forwarding a packet from the mobile router to a mobile node on the mobile network, wherein the mobile node has a care-of address that includes a prefix of a home address of the mobile network, and</claim-text>
<claim-text>wherein the configuration information is static and the mobile router is configured to send all outgoing traffic not destined to the mobile network, to the home agent.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00002" num="00002">
<claim-text>2. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the configuration information is routing information.</claim-text>
</claim>
<claim id="CLM-00003" num="00003">
<claim-text>3. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the mobile router obtains the care-of-address while attaching to the visited network, the visited network associated with a network address, the network address including a prefix, and wherein the care-of-address associated with the address configuration is generated by combining the prefix with an identifier that identifies the mobile router.</claim-text>
</claim>
<claim id="CLM-00004" num="00004">
<claim-text>4. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the mobile router obtains the care-of-address by at least one of a stateless address autoconfiguration, and a stateful address configuration.</claim-text>
</claim>
<claim id="CLM-00005" num="00005">
<claim-text>5. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, further comprising encapsulating the configuration information with a source address and a destination address, wherein the care-of-address forms the source address and an address of the home agent forms the destination address, and wherein the configuration information includes a home address of the mobile router.</claim-text>
</claim>
<claim id="CLM-00006" num="00006">
<claim-text>6. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, further comprising: receiving, at the home agent, a packet that includes a home address of the mobile router; and forwarding the packet via the bi-directional tunnel to the mobile router.</claim-text>
</claim>
<claim id="CLM-00007" num="00007">
<claim-text>7. The method of <claim-ref idref="CLM-00006">claim 6</claim-ref>, further comprising employing the home address to retrieve the care-of-address from a table included on the home agent.</claim-text>
</claim>
<claim id="CLM-00008" num="00008">
<claim-text>8. A method for supporting mobile routers in IPv6, comprising: obtaining, by a mobile router from a visited network, a care-of-address associated with an address configuration;
<claim-text>registering, by the mobile router, the care-of-address with a home agent of the mobile router;</claim-text>
<claim-text>establishing, by the mobile router, a bi-directional tunnel between the mobile router and the home agent;</claim-text>
<claim-text>forwarding from the mobile router to the home agent configuration information of a mobile network via the bi-directional tunnel wherein the mobile network is accessible through the mobile router;</claim-text>
<claim-text>requesting that packets that include any address prefix within a set of prefixes be forwarded to the mobile router;</claim-text>
<claim-text>forwarding a packet from the mobile router to a mobile node on the mobile network, wherein the mobile node has a care-of address that includes a prefix of a home address of the mobile network, and</claim-text>
<claim-text>wherein the configuration information is dynamic and the mobile router runs a dynamic routing protocol and dynamically modifies a list of interfaces on which the routing protocol is active to prevent the mobile router from advertising routes in the mobile network to the visited network.</claim-text>
</claim-text>
</claim>
</claims>
</us-patent-grant>
