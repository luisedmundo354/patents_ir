<us-patent-grant lang="EN" dtd-version="v4.2 2006-08-23" file="US07299365-20071120.XML" status="PRODUCTION" id="us-patent-grant" country="US" date-produced="20071106" date-publ="20071120">
<us-bibliographic-data-grant>
<publication-reference>
<document-id>
<country>US</country>
<doc-number>07299365</doc-number>
<kind>B2</kind>
<date>20071120</date>
</document-id>
</publication-reference>
<application-reference appl-type="utility">
<document-id>
<country>US</country>
<doc-number>11045623</doc-number>
<date>20050127</date>
</document-id>
</application-reference>
<us-application-series-code>11</us-application-series-code>
<us-term-of-grant>
<us-term-extension>433</us-term-extension>
</us-term-of-grant>
<classifications-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>G</section>
<class>06</class>
<subclass>F</subclass>
<main-group>11</main-group>
<subgroup>00</subgroup>
<symbol-position>F</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20071120</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>G</section>
<class>06</class>
<subclass>F</subclass>
<main-group>12</main-group>
<subgroup>14</subgroup>
<symbol-position>L</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20071120</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>H</section>
<class>04</class>
<subclass>L</subclass>
<main-group>9</main-group>
<subgroup>32</subgroup>
<symbol-position>L</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20071120</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
</classifications-ipcr>
<classification-national>
<country>US</country>
<main-classification>713189</main-classification>
<further-classification>713193</further-classification>
<further-classification>380 52</further-classification>
<further-classification>380200</further-classification>
<further-classification>380201</further-classification>
<further-classification>380216</further-classification>
</classification-national>
<invention-title id="d0e53">Secure video card methods and systems</invention-title>
<references-cited>
<citation>
<patcit num="00001">
<document-id>
<country>US</country>
<doc-number>4757534</doc-number>
<kind>A</kind>
<name>Matyas et al.</name>
<date>19880700</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00002">
<document-id>
<country>US</country>
<doc-number>4962533</doc-number>
<kind>A</kind>
<name>Krueger et al.</name>
<date>19901000</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00003">
<document-id>
<country>US</country>
<doc-number>5297206</doc-number>
<kind>A</kind>
<name>Orton</name>
<date>19940300</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00004">
<document-id>
<country>US</country>
<doc-number>5379344</doc-number>
<kind>A</kind>
<name>Larsson et al.</name>
<date>19950100</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00005">
<document-id>
<country>US</country>
<doc-number>5537467</doc-number>
<kind>A</kind>
<name>Cheng et al.</name>
<date>19960700</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00006">
<document-id>
<country>US</country>
<doc-number>5572235</doc-number>
<kind>A</kind>
<name>Mical et al.</name>
<date>19961100</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00007">
<document-id>
<country>US</country>
<doc-number>5577125</doc-number>
<kind>A</kind>
<name>Salahshour et al.</name>
<date>19961100</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00008">
<document-id>
<country>US</country>
<doc-number>5727062</doc-number>
<kind>A</kind>
<name>Ritter</name>
<date>19980300</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00009">
<document-id>
<country>US</country>
<doc-number>5881287</doc-number>
<kind>A</kind>
<name>Mast</name>
<date>19990300</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00010">
<document-id>
<country>US</country>
<doc-number>5898779</doc-number>
<kind>A</kind>
<name>Squilla et al.</name>
<date>19990400</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00011">
<document-id>
<country>US</country>
<doc-number>5963909</doc-number>
<kind>A</kind>
<name>Warren et al.</name>
<date>19991000</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00012">
<document-id>
<country>US</country>
<doc-number>6044182</doc-number>
<kind>A</kind>
<name>Daly et al.</name>
<date>20000300</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00013">
<document-id>
<country>US</country>
<doc-number>6047342</doc-number>
<kind>A</kind>
<name>Depew</name>
<date>20000400</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00014">
<document-id>
<country>US</country>
<doc-number>6055314</doc-number>
<kind>A</kind>
<name>Spies et al.</name>
<date>20000400</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00015">
<document-id>
<country>US</country>
<doc-number>6064739</doc-number>
<kind>A</kind>
<name>Davis</name>
<date>20000500</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>380200</main-classification></classification-national>
</citation>
<citation>
<patcit num="00016">
<document-id>
<country>US</country>
<doc-number>6072873</doc-number>
<kind>A</kind>
<name>Bewick</name>
<date>20000600</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00017">
<document-id>
<country>US</country>
<doc-number>6115819</doc-number>
<kind>A</kind>
<name>Anderson</name>
<date>20000900</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00018">
<document-id>
<country>US</country>
<doc-number>6330624</doc-number>
<kind>B1</kind>
<name>Cromer et al.</name>
<date>20011200</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00019">
<document-id>
<country>US</country>
<doc-number>6408390</doc-number>
<kind>B1</kind>
<name>Saito</name>
<date>20020600</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00020">
<document-id>
<country>US</country>
<doc-number>6421733</doc-number>
<kind>B1</kind>
<name>Tso et al.</name>
<date>20020700</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00021">
<document-id>
<country>US</country>
<doc-number>6859832</doc-number>
<kind>B1</kind>
<name>Gecht et al.</name>
<date>20050200</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00022">
<document-id>
<country>US</country>
<doc-number>6934389</doc-number>
<kind>B2</kind>
<name>Strasser et al.</name>
<date>20050800</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00023">
<document-id>
<country>US</country>
<doc-number>7024558</doc-number>
<kind>B1</kind>
<name>Satake</name>
<date>20060400</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00024">
<document-id>
<country>US</country>
<doc-number>7055038</doc-number>
<kind>B2</kind>
<name>Porter et al.</name>
<date>20060500</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00025">
<document-id>
<country>US</country>
<doc-number>7197648</doc-number>
<kind>B2</kind>
<name>Evans</name>
<date>20070300</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00026">
<document-id>
<country>US</country>
<doc-number>7202875</doc-number>
<kind>B2</kind>
<name>Foehr et al.</name>
<date>20070400</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00027">
<document-id>
<country>US</country>
<doc-number>7206940</doc-number>
<kind>B2</kind>
<name>Evans et al.</name>
<date>20070400</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00028">
<document-id>
<country>US</country>
<doc-number>2002/0012432</doc-number>
<kind>A1</kind>
<name>England et al.</name>
<date>20020100</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00029">
<document-id>
<country>US</country>
<doc-number>2002/0136408</doc-number>
<kind>A1</kind>
<name>Garcia</name>
<date>20020900</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00030">
<document-id>
<country>US</country>
<doc-number>2002/0169979</doc-number>
<kind>A1</kind>
<name>Zimmer</name>
<date>20021100</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00031">
<document-id>
<country>US</country>
<doc-number>2003/0059047</doc-number>
<kind>A1</kind>
<name>Iwamura</name>
<date>20030300</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>380201</main-classification></classification-national>
</citation>
<citation>
<patcit num="00032">
<document-id>
<country>US</country>
<doc-number>2005/0102264</doc-number>
<kind>A1</kind>
<name>Nason et al.</name>
<date>20050500</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00033">
<document-id>
<country>US</country>
<doc-number>2005/0102266</doc-number>
<kind>A1</kind>
<name>Nason et al.</name>
<date>20050500</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00034">
<document-id>
<country>US</country>
<doc-number>2005/0204165</doc-number>
<kind>A1</kind>
<name>Nason et al.</name>
<date>20050900</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00035">
<document-id>
<country>US</country>
<doc-number>2006/0123248</doc-number>
<kind>A1</kind>
<name>Porter et al.</name>
<date>20060600</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>713193</main-classification></classification-national>
</citation>
<citation>
<patcit num="00036">
<document-id>
<country>WO</country>
<doc-number>WO 02/25416</doc-number>
<date>20020300</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<nplcit num="00037">
<othercit>Choudhury et al., “Copyright Protection for Electronic Publishing Over Computer Networks” IEEE Network, May/Jun. 1995, pp. 12-20.</othercit>
</nplcit>
<category>cited by other</category>
</citation>
<citation>
<nplcit num="00038">
<othercit>“High-Bandwidth Digital Content Protection System, Revision 1.0” Feb. 17, 2000. Intel Corporation, Hillsboro, OR. 97124, Retrieved from the Internet: http://www.digital-cp.com/data/HDCP10.pdf.</othercit>
</nplcit>
<category>cited by other</category>
</citation>
</references-cited>
<number-of-claims>8</number-of-claims>
<us-exemplary-claim>1</us-exemplary-claim>
<us-field-of-classification-search>
<classification-national>
<country>US</country>
<main-classification>713189</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>713193</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>380 52</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>380216</main-classification>
</classification-national>
</us-field-of-classification-search>
<figures>
<number-of-drawing-sheets>9</number-of-drawing-sheets>
<number-of-figures>10</number-of-figures>
</figures>
<us-related-documents>
<continuation>
<relation>
<parent-doc>
<document-id>
<country>US</country>
<doc-number>10052840</doc-number>
<kind>00</kind>
<date>20020116</date>
</document-id>
<parent-grant-document>
<document-id>
<country>US</country>
<doc-number>7065651</doc-number>
<kind>A </kind>
</document-id>
</parent-grant-document>
</parent-doc>
<child-doc>
<document-id>
<country>US</country>
<doc-number>11045623</doc-number>
</document-id>
</child-doc>
</relation>
</continuation>
<related-publication>
<document-id>
<country>US</country>
<doc-number>20050154903</doc-number>
<kind>A1</kind>
<date>20050714</date>
</document-id>
</related-publication>
</us-related-documents>
<parties>
<applicants>
<applicant sequence="001" app-type="applicant-inventor" designation="us-only">
<addressbook>
<last-name>Evans</last-name>
<first-name>Glenn F.</first-name>
<address>
<city>Kirkland</city>
<state>WA</state>
<country>US</country>
</address>
</addressbook>
<nationality>
<country>omitted</country>
</nationality>
<residence>
<country>US</country>
</residence>
</applicant>
</applicants>
</parties>
<assignees>
<assignee>
<addressbook>
<orgname>Microsoft Corporation</orgname>
<role>02</role>
<address>
<city>Redmond</city>
<state>WA</state>
<country>US</country>
</address>
</addressbook>
</assignee>
</assignees>
<examiners>
<primary-examiner>
<last-name>Barron, Jr.</last-name>
<first-name>Gilberto</first-name>
<department>2132</department>
</primary-examiner>
<assistant-examiner>
<last-name>Lemma</last-name>
<first-name>Samson</first-name>
</assistant-examiner>
</examiners>
</us-bibliographic-data-grant>
<abstract id="abstract">
<p id="p-0001" num="0000">Methods and systems for protecting data that is intended for use and processed on video or graphics cards are described. In one embodiment, data that is stored in memory other than a video card memory is encrypted and transferred over a bus to the video card. The encrypted data is decrypted on the video card independent of a graphics processor unit (GPU) on the card needing to process the encrypted data. The decrypted data is stored in the video card memory.</p>
</abstract>
<drawings id="DRAWINGS">
<figure id="Fig-EMI-D00000" num="00000">
<img id="EMI-D00000" he="120.23mm" wi="191.18mm" file="US07299365-20071120-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00001" num="00001">
<img id="EMI-D00001" he="202.01mm" wi="167.64mm" orientation="landscape" file="US07299365-20071120-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00002" num="00002">
<img id="EMI-D00002" he="250.61mm" wi="205.99mm" orientation="landscape" file="US07299365-20071120-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00003" num="00003">
<img id="EMI-D00003" he="207.18mm" wi="170.77mm" orientation="landscape" file="US07299365-20071120-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00004" num="00004">
<img id="EMI-D00004" he="214.80mm" wi="171.37mm" orientation="landscape" file="US07299365-20071120-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00005" num="00005">
<img id="EMI-D00005" he="218.10mm" wi="183.81mm" orientation="landscape" file="US07299365-20071120-D00005.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00006" num="00006">
<img id="EMI-D00006" he="192.28mm" wi="146.73mm" orientation="landscape" file="US07299365-20071120-D00006.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00007" num="00007">
<img id="EMI-D00007" he="175.26mm" wi="115.32mm" orientation="landscape" file="US07299365-20071120-D00007.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00008" num="00008">
<img id="EMI-D00008" he="160.27mm" wi="159.17mm" orientation="landscape" file="US07299365-20071120-D00008.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00009" num="00009">
<img id="EMI-D00009" he="226.06mm" wi="189.40mm" orientation="landscape" file="US07299365-20071120-D00009.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
</drawings>
<description id="description">
<?RELAPP description="Other Patent Relations" end="lead"?>
<heading id="h-0001" level="1">RELATED APPLICATIONS</heading>
<p id="p-0002" num="0001">This application is a continuation of and claims priority to U.S. application Ser. No. 10/052,840, filed on Jan. 16, 2002, now U.S. Pat. No. 7,065,651 the disclosure of which is incorporated by reference herein.</p>
<?RELAPP description="Other Patent Relations" end="tail"?>
<?BRFSUM description="Brief Summary" end="lead"?>
<heading id="h-0002" level="1">TECHNICAL FIELD</heading>
<p id="p-0003" num="0002">This invention relates to methods and systems for processing video data using video cards.</p>
<heading id="h-0003" level="1">BACKGROUND</heading>
<p id="p-0004" num="0003">Typically, a content author, such as a movie studio or a user publishing content on the web, will publish video content that has restrictions on how users can view it. This content can typically be viewed or rendered on a computer such as a personal computer. A great deal of time, effort and money is spent each year by unscrupulous individuals and organizations trying to steal or otherwise inappropriately obtain such video content.</p>
<p id="p-0005" num="0004">One of the points of attack can be the computer on which such video content is to be viewed or rendered. That is, rogue programs or devices can and often do try to inappropriately obtain video content once it has been received on a computer, such as a personal computer. Among other computer components, this attack can be waged against the video card that processes the video content and/or the bus that transports the video content to and from the video card.</p>
<p id="p-0006" num="0005"><figref idref="DRAWINGS">FIG. 1</figref> shows an exemplary video (or graphics) card <b>100</b> that includes a bus connector <b>102</b> that inserts into a port on a typical computer. Video card <b>100</b> also includes a monitor connector <b>104</b> (e.g. a 15-pin plug) that receives a cable that connects to a monitor. Video card <b>100</b> can include a digital video-out socket <b>106</b> that can be used for sending video images to LCD and flat panel monitors and the like.</p>
<p id="p-0007" num="0006">The modern video card consists of four main components: the graphics processor unit (GPU) <b>108</b>, the video memory <b>110</b>, the random access memory digital-to-analog converter (RAMDAC) <b>112</b>, and the driver software which can be included in the Video BIOS <b>114</b>.</p>
<p id="p-0008" num="0007">GPU <b>108</b> is a dedicated graphics processing chip that controls all aspects of resolution, color depth, and all elements associated with rendering images on the monitor screen. The computer's central processing unit or CPU (not shown) sends a set of drawing instructions and data, which are interpreted by the graphics card's proprietary driver and executed by the card's GPU <b>108</b>. GPU <b>108</b> performs such operations as bitmap transfers and painting, window resizing and repositioning, line drawing, font scaling and polygon drawing. The GPU <b>108</b> is designed to handle these tasks in hardware at far greater speeds than the software running on the system's CPU. The GPU then writes the frame data to the frame buffer (or on-board video memory <b>110</b>). The GPU greatly reduces the workload of the system's CPU.</p>
<p id="p-0009" num="0008">The memory that holds the video image is also referred to as the frame buffer and is usually implemented on the video card itself. In this example, the frame buffer is implemented on the video card in the form of memory <b>110</b>. Early systems implemented video memory in standard DRAM. However, this requires continual refreshing of the data to prevent it from being lost and cannot be modified during this refresh process. The consequence, particularly at the very fast clock speeds demanded by modern graphics cards, is that performance is badly degraded.</p>
<p id="p-0010" num="0009">An advantage of implementing video memory on the video card itself is that it can be customized for its specific task and, indeed, this has resulted in a proliferation of new memory technologies:
<ul id="ul0001" list-style="none">
    <li id="ul0001-0001" num="0000">
    <ul id="ul0002" list-style="none">
        <li id="ul0002-0001" num="0010">Video RAM (VRAM): a special type of dual-ported DRAM, which can be written to and read from at the same time. It also requires far less frequent refreshing than ordinary DRAM and consequently performs much better;</li>
        <li id="ul0002-0002" num="0011">Windows RAM (WRAM): as used by the Matrox Millennium card, is also dual-ported and can run slightly faster than conventional VRAM;</li>
        <li id="ul0002-0003" num="0012">EDO DRAM: which provides a higher bandwidth than DRAM, can be clocked higher than normal DRAM and manages the read/write cycles more efficiently;</li>
        <li id="ul0002-0004" num="0013">SDRAM: Similar to EDO RAM except the memory and graphics chips run on a common clock used to latch data, allowing SDRAM to run faster than regular EDO RAM;</li>
        <li id="ul0002-0005" num="0014">SGRAM: Same as SDRAM but also supports block writes and write-per-bit, which yield better performance on graphics chips that support these enhanced features; and</li>
        <li id="ul0002-0006" num="0015">DRDRAM: Direct RDRAM is a totally new, general-purpose memory architecture which promises a 20-fold performance improvement over conventional DRAM.</li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0011" num="0016">Some designs integrate the graphics circuitry into the motherboard itself and use a portion of the system's RAM for the frame buffer. This is called “unified memory architecture” and is used for reasons of cost reduction only and can lead to inferior graphics performance.</p>
<p id="p-0012" num="0017">The information in the video memory frame buffer is an image of what appears on the screen, stored as a digital bitmap. But while the video memory contains digital information its output medium—the monitor—may use analog signals. The analog signals require more than just an “on” or “off” signal, as it is used to determine where, when and with what intensity the electron guns should be fired as they scan across and down the front of the monitor. This is where RAMDAC <b>112</b> comes into play as described below. Some RAMDACs also support digital video interface (DVI) outputs for digital displays such as LCD monitors. In such configurations, the RAMDAC converts the internal digital representation into a form understandable by the digital display.</p>
<p id="p-0013" num="0018">The RAMDAC plays the roll of a “display converter” since it converts the internal digital data into a form that is understood by the display.</p>
<p id="p-0014" num="0019">Even though the total amount of video memory installed on the video card may not be needed for a particular resolution, the extra memory is often used for caching information for the GPU <b>108</b>. For example, the caching of commonly used graphical items—such as text fonts and icons or images—avoids the need for the graphics subsystem to load these each time a new letter is written or an icon is moved and thereby improves performance. Cached images can be used to queue up sequences of images to be presented by the GPU, thereby freeing up the CPU to perform other tasks.</p>
<p id="p-0015" num="0020">Many times per second, RAMDAC <b>112</b> reads the contents of the video memory, converts it into a signal, and sends it over the video cable to the monitor. For analog displays, there is typically one Digital-to-Analog Converter (DAC) for each of the three primary colors the CRT uses to create a complete spectrum of colors. For digital displays, the RAMDAC outputs a single RGB data stream to be interpreted and displayed by the output device. The intended result is the right mix needed to create the color of a single pixel. The rate at which RAMDAC <b>112</b> can convert the information, and the design of GPU <b>108</b> itself, dictates the range of refresh rates that the graphics card can support. The RAMDAC <b>112</b> also dictates the number of colors available in a given resolution, depending on its internal architecture.</p>
<p id="p-0016" num="0021">The bus connector <b>102</b> can support one or more busses that are used to connect with the video card. For example, an Accelerated Graphics Port (AGP) bus can enable the video card to directly access system memory. Direct memory access helps to make the peak bandwidth many times higher than the Peripheral Component Interconnect (PCI) bus. This can allow the system's CPU to do other tasks while the GPU on the video card accesses system memory.</p>
<p id="p-0017" num="0022">During operation, the data contained in the on-board video memory can be provided into the computer's system memory and can be managed as if it were part of the system's memory. This includes such things as virtual memory management techniques that the computer's memory manage employs. Further, when the data contained in the system's memory is needed for a graphics operation on the video card, the data can be sent over a bus (such as a PCI or AGP bus) to the video card and stored in the on-board video memory <b>110</b>. There, the data can be accessed and manipulated by GPU <b>108</b> as described above.</p>
<p id="p-0018" num="0023">When the data is transferred from the system memory to the video memory on the video card and vice versa, it is possible for PCI devices connected to the PCI bus to “listen” to the data as it is transferred. The PCI bus also makes the video memory “visible” to the rest of the system, as if it existed like system memory. As a result, it is possible for a PCI device to acquire the PCI bus and simply copy the contents of the video memory to another device. If the PCI device is synchronized with the incoming video, it could potentially capture all of the content.</p>
<p id="p-0019" num="0024">There are two previous options to protect the content once it is in the video memory on the video card.</p>
<p id="p-0020" num="0025">First, the video memory can remain accessible but the content is stored in a protected, encrypted form so that it is unreadable to rogue devices and applications. While this prevents the data from being read, it also requires that the data be continually maintained in an encrypted form. If the video card (i.e. the GPU) wishes to process the data, it must atomically decrypt on read, process and re-encrypt on every write back to the video memory. For video data, the decompressed data could require more than 300 mb per second just to display. Accordingly, the encryptor/decryptor would have to operate at these high data rates. Typically, several video streams will be processed into a single output stream. For example, picture-in-picture (PIP) or a multi-channel display would blend eight channels into a single display. This would require eight simultaneous decryptors and one encryptor running at 300 mb per second (a total of around 2.4 gigabytes per second). Thus, this approach is not very desirable due to the high computation requirements.</p>
<p id="p-0021" num="0026">Second, the content or data in the video memory can simply be made inaccessible. This is typically not possible due to the design of the PCI and AGP buses, since the video memory is mapped into physical memory (i.e. it appears as if it is regular system memory). The video memory is thus accessible to any PCI device which can then acquire the PCI bus and perform the data transfer without the knowledge of the CPU. Thus, this approach is not very desirable since the memory controller (or GPU) cannot reliably determine who is accessing the memory.</p>
<p id="p-0022" num="0027">Accordingly, this invention arose out of concerns associated with providing secure video processing systems and methods.</p>
<heading id="h-0004" level="1">SUMMARY</heading>
<p id="p-0023" num="0028">Methods and systems for protecting data that is intended for use and processed on video or graphics cards are described. Methods and systems for protecting data that is intended for use and processed on video or graphics cards are described. In one embodiment, data that is stored in memory other than a video card memory is encrypted and transferred over a bus to the video card. The encrypted data is decrypted on the video card independent of a graphics processor unit (GPU) on the card needing to process the encrypted data. The decrypted data is stored in the video card memory.</p>
<?BRFSUM description="Brief Summary" end="tail"?>
<?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?>
<description-of-drawings>
<heading id="h-0005" level="1">BRIEF DESCRIPTION OF THE DRAWINGS</heading>
<p id="p-0024" num="0029"><figref idref="DRAWINGS">FIG. 1</figref> is a block diagram that shows various components of an exemplary video or graphics card that is intended for use in a computer system.</p>
<p id="p-0025" num="0030"><figref idref="DRAWINGS">FIG. 2</figref> is a block diagram of an exemplary computer system that can employ video cards in accordance with the described embodiment.</p>
<p id="p-0026" num="0031"><figref idref="DRAWINGS">FIG. 3</figref> is a flow diagram that describes steps in a method in accordance with one embodiment.</p>
<p id="p-0027" num="0032"><figref idref="DRAWINGS">FIG. 4</figref> is a flow diagram that describes steps in a method in accordance with one embodiment.</p>
<p id="p-0028" num="0033"><figref idref="DRAWINGS">FIG. 5</figref> is a block diagram that shows various components of an exemplary video or graphics in accordance with one embodiment.</p>
<p id="p-0029" num="0034"><figref idref="DRAWINGS">FIG. 6</figref> is a block diagram that shows various components of the <figref idref="DRAWINGS">FIG. 5</figref> video card.</p>
<p id="p-0030" num="0035"><figref idref="DRAWINGS">FIG. 7</figref> is a flow diagram that describes steps in a method in accordance with one embodiment.</p>
<p id="p-0031" num="0036"><figref idref="DRAWINGS">FIG. 8</figref> is a block diagram that is useful in understanding certain aspects of the described embodiments.</p>
<p id="p-0032" num="0037"><figref idref="DRAWINGS">FIG. 9</figref> is a flow diagram that describes steps in a method in accordance with one embodiment.</p>
<p id="p-0033" num="0038"><figref idref="DRAWINGS">FIG. 10</figref> is a block diagram that shows various components of a video card in accordance with one embodiment.</p>
</description-of-drawings>
<?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?>
<?DETDESC description="Detailed Description" end="lead"?>
<heading id="h-0006" level="1">DETAILED DESCRIPTION</heading>
<heading id="h-0007" level="1">Exemplary Computer System</heading>
<p id="p-0034" num="0039"><figref idref="DRAWINGS">FIG. 2</figref> illustrates an example of a suitable computing environment <b>200</b> on which the system and related methods described below can be implemented.</p>
<p id="p-0035" num="0040">It is to be appreciated that computing environment <b>200</b> is only one example of a suitable computing environment and is not intended to suggest any limitation as to the scope of use or functionality of the media processing system. Neither should the computing environment <b>200</b> be interpreted as having any dependency or requirement relating to any one or combination of components illustrated in the exemplary computing environment <b>200</b>.</p>
<p id="p-0036" num="0041">The various described embodiments can be operational with numerous other general purpose or special purpose computing system environments or configurations. Examples of well known computing systems, environments, and/or configurations that may be suitable for use with the media processing system include, but are not limited to, personal computers, server computers, thin clients, thick clients, hand-held or laptop devices, multiprocessor systems, microprocessor-based systems, set top boxes, programmable consumer electronics, network PCs, minicomputers, mainframe computers, distributed computing environments that include any of the above systems or devices, and the like.</p>
<p id="p-0037" num="0042">In certain implementations, the system and related methods may well be described in the general context of computer-executable instructions, such as program modules, being executed by a computer. Generally, program modules include routines, programs, objects, components, data structures, etc. that perform particular tasks or implement particular abstract data types. The embodiments can also be practiced in distributed computing environments where tasks are performed by remote processing devices that are linked through a communications network. In a distributed computing environment, program modules may be located in both local and remote computer storage media including memory storage devices.</p>
<p id="p-0038" num="0043">In accordance with the illustrated example embodiment of <figref idref="DRAWINGS">FIG. 2</figref>, computing system <b>200</b> is shown comprising one or more processors or processing units <b>202</b>, a system memory <b>204</b>, and a bus <b>206</b> that couples various system components including the system memory <b>204</b> to the processor <b>202</b>.</p>
<p id="p-0039" num="0044">Bus <b>206</b> is intended to represent one or more of any of several types of bus structures, including a memory bus or memory controller, a peripheral bus, an accelerated graphics port, and a processor or local bus using any of a variety of bus architectures. By way of example, and not limitation, such architectures include Industry Standard Architecture (ISA) bus, Micro Channel Architecture (MCA) bus, Enhanced ISA (EISA) bus, Video Electronics Standards Association (VESA) local bus, and Peripheral Component Interconnects (PCI) bus also known as Mezzanine bus.</p>
<p id="p-0040" num="0045">Computer <b>200</b> typically includes a variety of computer readable media. Such media may be any available media that is locally and/or remotely accessible by computer <b>200</b>, and it includes both volatile and non-volatile media, removable and non-removable media.</p>
<p id="p-0041" num="0046">In <figref idref="DRAWINGS">FIG. 2</figref>, the system memory <b>204</b> includes computer readable media in the form of volatile, such as random access memory (RAM) <b>210</b>, and/or non-volatile memory, such as read only memory (ROM) <b>208</b>. A basic input/output system (BIOS) <b>212</b>, containing the basic routines that help to transfer information between elements within computer <b>200</b>, such as during start-up, is stored in ROM <b>208</b>. RAM <b>210</b> typically contains data and/or program modules that are immediately accessible to and/or presently be operated on by processing unit(s) <b>202</b>.</p>
<p id="p-0042" num="0047">Computer <b>200</b> may further include other removable/non-removable, volatile/non-volatile computer storage media. By way of example only, <figref idref="DRAWINGS">FIG. 2</figref> illustrates a hard disk drive <b>228</b> for reading from and writing to a non-removable, non-volatile magnetic media (not shown and typically called a “hard drive”), a magnetic disk drive <b>230</b> for reading from and writing to a removable, non-volatile magnetic disk <b>232</b> (e.g., a “floppy disk”), and an optical disk drive <b>234</b> for reading from or writing to a removable, non-volatile optical disk <b>236</b> such as a CD-ROM, DVD-ROM or other optical media. The hard disk drive <b>228</b>, magnetic disk drive <b>230</b>, and optical disk drive <b>234</b> are each connected to bus <b>206</b> by one or more interfaces <b>226</b>.</p>
<p id="p-0043" num="0048">The drives and their associated computer-readable media provide nonvolatile storage of computer readable instructions, data structures, program modules, and other data for computer <b>200</b>. Although the exemplary environment described herein employs a hard disk <b>228</b>, a removable magnetic disk <b>232</b> and a removable optical disk <b>236</b>, it should be appreciated by those skilled in the art that other types of computer readable media which can store data that is accessible by a computer, such as magnetic cassettes, flash memory cards, digital video disks, random access memories (RAMs), read only memories (ROM), and the like, may also be used in the exemplary operating environment.</p>
<p id="p-0044" num="0049">A number of program modules may be stored on the hard disk <b>228</b>, magnetic disk <b>232</b>, optical disk <b>236</b>, ROM <b>208</b>, or RAM <b>210</b>, including, by way of example, and not limitation, an operating system <b>214</b>, one or more application programs <b>216</b> (e.g., multimedia application program <b>224</b>), other program modules <b>218</b>, and program data <b>220</b>. A user may enter commands and information into computer <b>200</b> through input devices such as keyboard <b>238</b> and pointing device <b>240</b> (such as a “mouse”). Other input devices may include a audio/video input device(s) <b>253</b>, a microphone, joystick, game pad, satellite dish, serial port, scanner, or the like (not shown). These and other input devices are connected to the processing unit(s) <b>202</b> through input interface(s) <b>242</b> that is coupled to bus <b>206</b>, but may be connected by other interface and bus structures, such as a parallel port, game port, or a universal serial bus (USB).</p>
<p id="p-0045" num="0050">A monitor <b>256</b> or other type of display device is also connected to bus <b>206</b> via an interface, such as a video adapter or video/graphics card <b>244</b>. In addition to the monitor, personal computers typically include other peripheral output devices (not shown), such as speakers and printers, which may be connected through output peripheral interface <b>246</b>.</p>
<p id="p-0046" num="0051">Computer <b>200</b> may operate in a networked environment using logical connections to one or more remote computers, such as a remote computer <b>250</b>. Remote computer <b>250</b> may include many or all of the elements and features described herein relative to computer.</p>
<p id="p-0047" num="0052">As shown in <figref idref="DRAWINGS">FIG. 2</figref>, computing system <b>200</b> is communicatively coupled to remote devices (e.g., remote computer <b>250</b>) through a local area network (LAN) <b>251</b> and a general wide area network (WAN) <b>252</b>. Such networking environments are commonplace in offices, enterprise-wide computer networks, intranets, and the Internet.</p>
<p id="p-0048" num="0053">When used in a LAN networking environment, the computer <b>200</b> is connected to LAN <b>251</b> through a suitable network interface or adapter <b>248</b>. When used in a WAN networking environment, the computer <b>200</b> typically includes a modem <b>254</b> or other means for establishing communications over the WAN <b>252</b>. The modem <b>254</b>, which may be internal or external, may be connected to the system bus <b>206</b> via the user input interface <b>242</b>, or other appropriate mechanism.</p>
<p id="p-0049" num="0054">In a networked environment, program modules depicted relative to the personal computer <b>200</b>, or portions thereof, may be stored in a remote memory storage device. By way of example, and not limitation, <figref idref="DRAWINGS">FIG. 2</figref> illustrates remote application programs <b>216</b> as residing on a memory device of remote computer <b>250</b>. It will be appreciated that the network connections shown and described are exemplary and other means of establishing a communications link between the computers may be used.</p>
<heading id="h-0008" level="1">Overview</heading>
<p id="p-0050" num="0055">In the embodiments described below, data that is intended for use by a video card can be encrypted such that anytime the data is provided onto a bus (e.g. the PCI or AGP bus) between the video card and the computer system, the data is encrypted. This is advantageous because snooping devices or rogue applications that acquire the bus cannot access the data in its unencrypted form. Thus, when data is moved from the video memory on the video card to the system's memory (e.g. when it is mapped to the system's physical memory) and vice versa, the data is in encrypted form and thus protected.</p>
<p id="p-0051" num="0056">When the encrypted data is transferred from the system's memory to the video card for processing by the graphics processor unit (GPU), it can be decrypted and placed into protected memory on the video card. Thus, the GPU can perform operations on the unencrypted data—which is what the GPU is best suited to do.</p>
<p id="p-0052" num="0057">In the embodiments described below, two specific implementations are described that are directed to protecting data by encrypting it whenever it is to travel on a bus between the video card and the computer system. It is to be appreciated and understood that the specifically described embodiments are but examples only and that variations can be made to the specific implementations without departing from the spirit and scope of the claimed subject matter.</p>
<p id="p-0053" num="0058"><figref idref="DRAWINGS">FIG. 3</figref> is a flow diagram that describes steps in a method in accordance with one embodiment. This method can be implemented in any suitable hardware, software, firmware or combination thereof. In this particular example, the method describes exemplary processing steps that are performed when data is moved from the video card to the system or system memory.</p>
<p id="p-0054" num="0059">Step <b>300</b> provides unencrypted data on the video card. This data is the data that is typically processed by the video card's GPU and is provided in the video card's memory. Step <b>302</b> encrypts the unencrypted data on the video card. This step can be implemented in response to a request to transfer the data to the system's memory. For example, the CPU may send an instruction to move the data from the video card to the system's memory. Alternately, the GPU may determine that it does not need the data any longer and therefore initiates a transfer to the system's memory. The data can be encrypted on the video card using any suitable encryption techniques. Step <b>304</b> then sends the encrypted data over a bus between the video card and the system. Exemplary buses can be the PCI bus and the AGP bus. Step <b>306</b> provides the encrypted data into system memory.</p>
<p id="p-0055" num="0060">In the process described above, the data that moves from the video card to the system's memory is encrypted and thus, any snooping devices or rogue applications that attempt to acquire the bus and steal or copy the data will receive only encrypted data which, to the snooping devices or rogue applications, will be mathematically infeasible to decrypt.</p>
<p id="p-0056" num="0061"><figref idref="DRAWINGS">FIG. 4</figref> is a flow diagram that describes steps in a method in accordance with one embodiment. This method can be implemented in any suitable hardware, software, firmware or combination thereof. In this particular example, the method describes exemplary processing steps that are performed when data is moved from the system or system memory to the video card.</p>
<p id="p-0057" num="0062">Step <b>400</b> provides data in the system memory. Such data is typically data that is utilized by the video card for processing. The data can be provided in the system memory as either encrypted or unencrypted data. Step <b>402</b> can encrypt the data (if it is unencrypted in the system memory) and can send the data to a bus between the system memory and the video card. This step can be implemented in response to a desire to process the data on the video card. Step <b>404</b> receives the encrypted data on the video card. Step <b>406</b> then decrypts the encrypted data on the video card and step <b>408</b> provides the decrypted data into video memory for processing by the GPU.</p>
<p id="p-0058" num="0063">In the process described above, the data that moves from the system's memory to the video card is encrypted and thus, any snooping devices or rogue applications that attempt to acquire the bus and steal or copy the data will receive only encrypted data which, to the snooping devices or rogue applications, will be mathematically infeasible to decrypt.</p>
<heading id="h-0009" level="1">Exemplary First Video Card Embodiment</heading>
<p id="p-0059" num="0064"><figref idref="DRAWINGS">FIG. 5</figref> shows an exemplary video (or graphics) card <b>500</b> in accordance with one embodiment. Card <b>500</b> includes a bus connector <b>502</b> that snaps into a port on a typical computer. Video card <b>500</b> also includes a monitor connector <b>504</b> (e.g. a 15-pin plug) that receives a cable that connects to a monitor. Video card <b>500</b> can, but need not, include a digital video-out (e.g. DVI) socket <b>506</b> that can be used for sending video images to digital displays and the like.</p>
<p id="p-0060" num="0065">Like the video card of <figref idref="DRAWINGS">FIG. 1</figref>, video card <b>500</b> comprises a graphics processor unit (GPU) <b>508</b>, video memory <b>510</b>, random access memory digital-to-analogue converter (RAMDAC) <b>512</b>, and driver software which can be included in the Video BIOS <b>514</b>.</p>
<p id="p-0061" num="0066">GPU <b>508</b> is a dedicated graphics processing chip that controls all aspects of resolution, color depth, and all elements associated with rendering images on the monitor screen. The memory controller (sometimes integrated into the GPU) manages the memory on the video card. The computer's central processing unit or CPU (not shown) sends a set of drawing instructions and data, which are interpreted by the graphics card's proprietary driver and executed by the card's GPU <b>508</b>. GPU <b>508</b> performs such operations as bitmap transfers and painting, window resizing and repositioning, line drawing, font scaling and polygon drawing. The GPU can then write the frame data to the frame buffer (or on-board video memory <b>510</b>).</p>
<p id="p-0062" num="0067">The information in the video memory frame buffer is an image of what appears on the screen, stored as a digital bitmap. RAMDAC <b>512</b> is utilized to convert the digital bitmap into a form that can be used for rendering on the monitor, as described above.</p>
<p id="p-0063" num="0068">In addition to these components, in this embodiment, video card <b>500</b> comprises a memory controller <b>516</b> and a key manager <b>518</b>. The video card can also include a decryptor <b>520</b>. These components can be implemented in any suitable hardware, software, firmware or combination thereof.</p>
<p id="p-0064" num="0069">Memory controller <b>516</b> receives encrypted data on the video card and decrypts the data into protected regions or portions of video memory <b>510</b>. The decrypted data is now in a state in which it can be operated upon by the GPU <b>508</b>. The memory controller can also be responsible for ensuring that data transfers on the video card are made between protected regions or regions that have a compatible degree of protection. That is, often times during processing of the data on the video card, the GPU <b>508</b> will operate on the data in the video memory (for example, by performing a blending operation) and will cause the resultant data to be written to a different video memory location. In this instance, there may be regions of video memory that are not protected or are protected at a different level. In this case, the memory controller can ensure that data transfers within the video card take place in a manner that ensures the protection of the unencrypted data. Examples of how this can be done are described below in more detail.</p>
<p id="p-0065" num="0070">Key manager <b>518</b> controls encryption and decryption keys that are used to encrypt and decrypt data on the video card. In one implementation, key manager <b>518</b> comprises a separate chip. Key manager <b>518</b> is communicatively linked with the memory controller and can program the memory controller with the various encryption/decryption keys. Advantageously, communication between the key manager <b>518</b> and memory controller <b>516</b> takes place through an encrypted, authenticated communication channel thus ensuring that the key manager is the only entity that can program the memory controller.</p>
<p id="p-0066" num="0071">The video card <b>500</b> can also include a decryptor <b>520</b> that is configured or configurable to decrypt data. For example, in some instances data that is unencrypted on the video card can be written to a memory region that is not protected. For example, such data may be written to a so-called “primary surface” or desk top surface that contains data that is used by the RAMDAC <b>512</b> for rendering an image on the monitor. In this case, it can be desirable to protect the unencrypted data so that it is not subject to attack. Accordingly, when the data is moved from a protected memory region to an unprotected memory region, the memory controller <b>516</b> can encrypt the data. In this example, the key manager <b>518</b> keeps track of and knows which keys are associated with the encrypted data in the unprotected memory region. When the encrypted data is to be provided to the RAMDAC <b>512</b>, the key manager can then instruct the decryptor <b>520</b> on which key or keys to use to decrypt the encrypted data. The encrypted data is then provided to the decryptor <b>520</b>, decrypted and then provided to the RAMDAC <b>512</b> for further processing.</p>
<p id="p-0067" num="0072">Alternately, the decryptor can be eliminated and the RAMDAC <b>512</b> can be configured to perform the decryption functionality. In this case, the key manager <b>518</b> can instruct the RAMDAC on which keys to use to effectuate the decryption.</p>
<p id="p-0068" num="0073"><figref idref="DRAWINGS">FIG. 6</figref> shows, in accordance with one embodiment, selected components of video card <b>500</b> (<figref idref="DRAWINGS">FIG. 5</figref>) in more detail generally at <b>600</b>. There, memory controller <b>516</b> comprises a decryption module <b>602</b> that is configured to receive encrypted data from the bus (either the PCI or AGP in this example) and decrypt the data into video memory <b>510</b>. In addition, a memory protection table <b>604</b> and an equivalent decision table <b>606</b> are provided.</p>
<p id="p-0069" num="0074">In this example, memory protection table <b>604</b> includes a table portion <b>604</b><i>a </i>that contains entries that associate encryption/decryption key pairs with individual portions of the video memory <b>510</b>. For example, encryption/decryption key pair E<sub>1</sub>/D<sub>1 </sub>are associated with memory portion <b>608</b>, encryption/decryption key pair E<sub>2</sub>/D<sub>2 </sub>are associated with memory portion <b>610</b> and so on. When decrypted data in the video memory is to be written to system memory off of the video card, or any other time when the data on the video card is to be provided over the bus (e.g. the PCI or AGP bus), the CPU can cause the data to be encrypted with one of the encryption keys in table portion <b>604</b><i>a. </i>The encrypted data can then be placed onto the bus and provided, for example, into the system memory. When the memory controller <b>516</b> receives encrypted data from the system memory that has been encrypted, for example, with key E<sub>1</sub>, decryption module <b>602</b> can locate the associated decryption key D<sub>1 </sub>and decrypt the data into memory portion <b>608</b>.</p>
<p id="p-0070" num="0075">There can be a number of protected portions of video memory <b>510</b>. In the present example, there are four protected portions designated <b>608</b>-<b>614</b>. Unencrypted data in these protected portions can be processed by the GPU <b>508</b> (<figref idref="DRAWINGS">FIG. 5</figref>) in the usual manner. The protected portions of the video memory can be protected by an access control list. For example, memory protection table <b>604</b> includes a table portion <b>604</b><i>b </i>that can define an access control list for the various portions of video memory. Each portion of the video memory can have defined, in its associated access control list, which entities can access the memory portion. Thus, any attempted accesses by entities other than those contained in each memory portion's access control list will not be permitted by the memory controller.</p>
<p id="p-0071" num="0076">Notice also that video memory <b>510</b> can include portions that are not protected. In this example, portions <b>616</b>-<b>624</b> are not protected. Accordingly, there are no encryption/decryption key pairs associated with these memory portions.</p>
<p id="p-0072" num="0077"><figref idref="DRAWINGS">FIG. 7</figref> is a flow diagram that describes steps in a method in accordance with one embodiment. The method can be implemented in any suitable hardware, software, firmware or combination thereof. In the illustrated example the method can be implemented, at least in part, with a system such as the one described in connection with <figref idref="DRAWINGS">FIG. 6</figref>.</p>
<p id="p-0073" num="0078">Step <b>700</b> provides one or more keys pairs. Each key pair comprises an encryption key and an associated decryption key. Step <b>702</b> associates the key pair(s) with individual portions of video memory. Any suitable way can be utilized to associate the key pairs with the video memory portions. In the example of <figref idref="DRAWINGS">FIG. 6</figref>, a memory protection table is employed having multiple different entries. Individual table entries correspond to a particular key pair, and each table entry is associated with a portion of the video memory.</p>
<p id="p-0074" num="0079">Step <b>704</b> encrypts unencrypted data using an encryption key of a key pair. For example, if unencrypted data in the video memory is to be written to the system memory, the CPU can cause the data to be encrypted with an encryption key that is associated with the video memory portion in which the data resides. Step <b>706</b> then sends the encrypted data over the bus to, for example, system memory.</p>
<p id="p-0075" num="0080">Step <b>708</b>, which follows from step <b>702</b>, decrypts encrypted data using a decryption key of a key pair. For example, assume that data is encrypted with an encryption key and then provided into the system's memory. If the encrypted data is needed by the GPU, the data can be sent, by the CPU, to the video card. Upon receiving the encrypted data, the memory controller can locate a decryption key that is associated with the encryption key that was used for encrypting the data, and decrypt the data using the decryption key. Step <b>710</b> can then provide the data into an associated video memory portion that is associated with the decryption key. In this manner, data can be protected whenever it is to be provided over one or more of the system busses.</p>
<p id="p-0076" num="0081">Equivalent decision table <b>606</b> (<figref idref="DRAWINGS">FIG. 6</figref>) is provided and is used by the memory controller <b>516</b> to ensure that data transfers within the video card's memory <b>510</b> are done in a manner that preserves the data's protection.</p>
<p id="p-0077" num="0082">As an example, consider <figref idref="DRAWINGS">FIG. 8</figref>. Often times when the GPU processes data on the video card, it moves the data from one memory location to another. For example, when the GPU performs a blending operation, it may take data from two different memory portions on the video card, blend the data and then write the resultant blended data to an all together different portion of the video memory. This is diagrammatically indicated by GPU Operation <b>800</b>. Assume here that the GPU is performing an operation that has two inputs and one output. Each of the inputs corresponds to data that is stored in a protected portion of the video memory. In this example, one of the inputs is stored in a protected portion of video memory that is associated with encryption key E<sub>1</sub>, and the other of the inputs is stored in a protected portion of video memory that is associated with encryption key E<sub>2 </sub>(hence the E<sub>1 </sub>and E<sub>2 </sub>inputs). Once the operation is performed, the resultant output data is to be stored in a protected portion of the video memory associated with encryption key E<sub>4</sub>. Now, wherever the GPU performs a memory transfer such as this, the memory controller <b>516</b> makes sure that it knows where the data came from and where the data is going to be stored. The memory controller then checks to ensure that the portions of video memory that the output data is to be stored in is consistent, in terms of the level of protection that the data is provided, with the protections afforded by the memory portions from which the constituent data came.</p>
<p id="p-0078" num="0083">In this example, protection consistency can be enforced by ascertaining that the keys associated with the memory portions that contained the input data are the same as or equivalent to the key associated with the memory portion that is to hold the output data. Equivalence, in this example, can be determined based on the restrictions associated with the memory portions—that is—is there the same level of protection as between the different memory portions? Keys might not be equivalent if, for example, there are two different programs with two different pieces of content. For example, say that each content is encrypted with a different key and that the programs associated with the keys cannot share content. In this example, the encryption keys are not equivalent.</p>
<p id="p-0079" num="0084">One way to ascertain the equivalence of keys associated with the various memory portions is to use an equivalent decision table such as table <b>606</b>. There, the table defines a matrix that contains entries for each of the keys. An “X” in one of the matrix cells indicates that the keys are equivalent. For example, looking first at key E<sub>1</sub>, this key is equivalent to keys E<sub>1</sub>, E<sub>2 </sub>and E<sub>4</sub>. Thus, as shown best in <figref idref="DRAWINGS">FIG. 6</figref>, data can be freely transferred between memory portions <b>608</b>, <b>610</b>, and <b>614</b>. Key E<sub>1 </sub>is not, however, equivalent to key E<sub>3</sub>. Thus, data cannot be transferred from memory portion <b>608</b> into memory portion <b>612</b>. In the <figref idref="DRAWINGS">FIG. 8</figref> example, since the input data comes from memory portions <b>608</b> and <b>610</b> and the resultant data is to be stored in memory portion <b>614</b>, equivalency is not an issue and the operation can take place.</p>
<p id="p-0080" num="0085"><figref idref="DRAWINGS">FIG. 9</figref> is a flow diagram that describes steps in a method in accordance with one embodiment. The method can be implemented in any suitable hardware, software, firmware or combination thereof. In the illustrated example the method can be implemented, at least in part, with a system such as the one described in connection with <figref idref="DRAWINGS">FIG. 6</figref>.</p>
<p id="p-0081" num="0086">Step <b>900</b> reads data from video memory portions on a video card. This step can be implemented by the GPU. Step <b>902</b> records key pairs associated with the video memory portions from which the data was read. This step can be implemented by the memory controller. Step <b>904</b> ascertains whether the recorded key pairs are equivalent to a key pair associated with a video memory portion that is to serve as a destination for the output data that results from the operation of the GPU. If the key pairs are equivalent, then step <b>906</b> provides the output data into the video memory destination portion. If, on the other hand, the key pairs are not equivalent, then step <b>908</b> finds a video memory destination portion that has an equivalent key pair or possibly step <b>910</b> outputs blank data to the specified memory destination.</p>
<heading id="h-0010" level="1">Exemplary Second Video Card Embodiment</heading>
<p id="p-0082" num="0087"><figref idref="DRAWINGS">FIG. 10</figref> shows an exemplary video (or graphics) card <b>1000</b> in accordance with another embodiment. Here, a portion of the figure is designated “Video Card” and a portion of the figure is designated “System”. Such notation is intended to designate those components that reside, respectively, on the video card and the system. The “System” side of the figure includes a CPU <b>1002</b> and system memory <b>1004</b>. Notice also that within the system memory <b>1004</b> is data <b>1006</b> that is intended for use on the video card <b>1000</b>.</p>
<p id="p-0083" num="0088">In this embodiment, data <b>1006</b> that resides in the system memory <b>1004</b> is unencrypted. CPU <b>1002</b> is configured to encrypt the data whenever it is to be sent over the bus to the video card. Such is typically accomplished by a CPU operation known as an “encrypt memory transfer”. Thus, the encrypted data is now placed into an unprotected portion <b>624</b> of video memory <b>510</b>. In this example, the data might be encrypted by the CPU with encryption key E<sub>1</sub>.</p>
<p id="p-0084" num="0089">Recall that the GPU <b>508</b> is configured to process unencrypted data. Accordingly, when the GPU <b>508</b> desires to process encrypted data in the unprotected portion of the video memory <b>510</b>, the data should be decrypted. In this embodiment, GPU <b>508</b> contains decryption functionality which is represented in the figure by decryption module <b>602</b>. Key manager <b>518</b> is communicatively linked with the GPU <b>508</b> and can program the GPU with the appropriate decryption keys. Of course, communication between the key manager and the GPU can take place via an authenticated link.</p>
<p id="p-0085" num="0090">Accordingly, when the GPU wishes to operate upon encrypted data <b>1006</b> in the video memory, it can access the encrypted data and decrypt it into a protected portion of the video memory—here protected portion <b>614</b>. The decryption can take place via an operation known as a “decrypt memory transfer”. Now that this and other data is in protected portions of the video memory, the GPU can freely operate upon it in the usual manner.</p>
<p id="p-0086" num="0091">In this embodiment, memory controller <b>516</b> can enforce memory protection by controlling access to the protected portions of the video memory via an access control list (not specifically shown). Thus, any time an entity such as the GPU <b>508</b> (or portions thereof) wishes to access the protected video memory portions, it will gain access via the memory controller <b>516</b>. The access control list can describe what kind of protection the data has and which entities can access it. For example, the access control list can define which portions of the GPU can access the protected memory and one or more applications that “own” the protected memory and thus have access.</p>
<p id="p-0087" num="0092">Now, when the data in the protected portions of the video memory is to be moved to an unprotected portion of the video memory, it can be encrypted. For example, assume that the data in memory portion <b>614</b> is to be moved to unprotected memory portion <b>620</b> (which, in this example, corresponds to the desk top surface that is to be processed by the RAMDAC for rendering). The GPU <b>508</b> can access the protected memory portion via the memory controller <b>516</b> and perform an encryption memory transfer operation to encrypt the data into the memory portion <b>620</b>. When the encrypted data is to be provided to the RAMDAC for processing, the key manager <b>518</b> can communicate with decryptor <b>520</b> and provide the decryptor with the appropriate decryption key for decrypting the encrypted data in the memory portion <b>620</b>. After decrypting the data, the decryptor <b>520</b> can provide the data to the RAMDAC for processing in the usual manner.</p>
<p id="p-0088" num="0093">Notice also that memory controller <b>516</b> also comprises an equivalent decision table (not specifically designated). This table is similar, in concept, to the table discussed in connection with <figref idref="DRAWINGS">FIGS. 6 and 8</figref>. Here, however, the table is used to ensure that the access control lists that are associated with each of the memory portions of the video memory <b>510</b> are equivalent when data is to be transferred therebetween. For example, assume that data in memory portion <b>614</b> is to be transferred to memory portion <b>620</b>. Accordingly, in this example, the memory controller <b>516</b> checks to ensure that the access control list associated with memory portion <b>614</b> is equivalent to the access control list associated with memory portion <b>620</b>. If so, the data transfer is performed.</p>
<heading id="h-0011" level="1">Conclusion</heading>
<p id="p-0089" num="0094">The various embodiments described above can ensure that data that is intended for use by a video card can be encrypted such that anytime the data is provided onto a bus (e.g. the PCI or AGP bus) between the video card and the computer system, the data is encrypted. Thus, snooping devices or rogue applications that acquire the bus cannot access the data and thus steal the data in its unencrypted form. Accordingly, another level of protected can be provided for content that is to be processed by the system's video card.</p>
<p id="p-0090" num="0095">Although the invention has been described in language specific to structural features and/or methodological steps, it is to be understood that the invention defined in the appended claims is not necessarily limited to the specific features or steps described. Rather, the specific features and steps are disclosed as preferred forms of implementing the claimed invention.</p>
<?DETDESC description="Detailed Description" end="tail"?>
</description>
<us-claim-statement>The invention claimed is:</us-claim-statement>
<claims id="claims">
<claim id="CLM-00001" num="00001">
<claim-text>1. A method comprising:
<claim-text>encrypting data that is stored in memory other than a video card memory;</claim-text>
<claim-text>transferring the encrypted data over a bus to the video card;</claim-text>
<claim-text>decrypting the encrypted data on the video card, said decrypting taking place independent of a graphics processor unit (GPU) on the card needing to process the encrypted data, wherein the graphics processor unit comprises dedicated graphics circuitry for performing graphics operations on decrypted data; and</claim-text>
<claim-text>storing decrypted data in at least one of a plurality of individual protected portions of the video card memory, wherein individual protected portions of the video card memory are associated with individual key pairs.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00002" num="00002">
<claim-text>2. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the act of decrypting is performed automatically whenever encrypted data is transferred to the video card.</claim-text>
</claim>
<claim id="CLM-00003" num="00003">
<claim-text>3. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the act of storing comprises storing the decrypted data in protected portions of the video memory.</claim-text>
</claim>
<claim id="CLM-00004" num="00004">
<claim-text>4. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the act of decrypting is performed by a memory controller on the video card.</claim-text>
</claim>
<claim id="CLM-00005" num="00005">
<claim-text>5. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref> further comprising ensuring that video memory portions have a compatible degree of protection when unencrypted data is to be transferred between different video memory portions on the video card.</claim-text>
</claim>
<claim id="CLM-00006" num="00006">
<claim-text>6. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the act of decrypting comprises decrypting the encrypted data using a decryption key that is associated with a memory portion into which the unencrypted data is to be stored.</claim-text>
</claim>
<claim id="CLM-00007" num="00007">
<claim-text>7. One or more computer-readable media having computer-readable instructions thereon which, when executed by one or more processors, cause the one or more processors to:
<claim-text>encrypt data that is stored in memory other than a video card memory;</claim-text>
<claim-text>transfer the encrypted data over a bus to the video card;</claim-text>
<claim-text>decrypt the encrypted data on the video card independent of a graphics processor unit (GPU) on the card needing to process the encrypted data, wherein the graphics processor unit comprises dedicated graphics circuitry for performing graphics operations on decrypted data; and</claim-text>
<claim-text>store decrypted data in at least one of a plurality of individual protected portions of the video card memory, wherein individual protected portions of the video card memory are associated with individual key pairs.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00008" num="00008">
<claim-text>8. The one or more computer-readable media of <claim-ref idref="CLM-00007">claim 7</claim-ref>, wherein the instructions cause the one or more processors to decrypt the encrypted data automatically whenever encrypted data is transferred to the video card.</claim-text>
</claim>
</claims>
</us-patent-grant>
