<us-patent-grant lang="EN" dtd-version="v4.2 2006-08-23" file="US07297859-20071120.XML" status="PRODUCTION" id="us-patent-grant" country="US" date-produced="20071106" date-publ="20071120">
<us-bibliographic-data-grant>
<publication-reference>
<document-id>
<country>US</country>
<doc-number>07297859</doc-number>
<kind>B2</kind>
<date>20071120</date>
</document-id>
</publication-reference>
<application-reference appl-type="utility">
<document-id>
<country>US</country>
<doc-number>10655491</doc-number>
<date>20030904</date>
</document-id>
</application-reference>
<us-application-series-code>10</us-application-series-code>
<priority-claims>
<priority-claim sequence="01" kind="national">
<country>JP</country>
<doc-number>2002-258917</doc-number>
<date>20020904</date>
</priority-claim>
<priority-claim sequence="02" kind="national">
<country>JP</country>
<doc-number>2002-354134</doc-number>
<date>20021205</date>
</priority-claim>
<priority-claim sequence="03" kind="national">
<country>JP</country>
<doc-number>2002-354135</doc-number>
<date>20021205</date>
</priority-claim>
<priority-claim sequence="04" kind="national">
<country>JP</country>
<doc-number>2002-361884</doc-number>
<date>20021213</date>
</priority-claim>
</priority-claims>
<us-term-of-grant>
<us-term-extension>185</us-term-extension>
</us-term-of-grant>
<classifications-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>G</section>
<class>10</class>
<subclass>H</subclass>
<main-group>1</main-group>
<subgroup>38</subgroup>
<symbol-position>F</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20071120</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
</classifications-ipcr>
<classification-national>
<country>US</country>
<main-classification> 84613</main-classification>
<further-classification> 84600</further-classification>
</classification-national>
<invention-title id="d0e125">Assistive apparatus, method and computer program for playing music</invention-title>
<references-cited>
<citation>
<patcit num="00001">
<document-id>
<country>US</country>
<doc-number>5315060</doc-number>
<kind>A</kind>
<name>Paroutaud</name>
<date>19940500</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification> 84726</main-classification></classification-national>
</citation>
<citation>
<patcit num="00002">
<document-id>
<country>US</country>
<doc-number>5403967</doc-number>
<kind>A</kind>
<name>Takano</name>
<date>19950400</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00003">
<document-id>
<country>US</country>
<doc-number>5850051</doc-number>
<kind>A</kind>
<name>Machover et al.</name>
<date>19981200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification> 84634</main-classification></classification-national>
</citation>
<citation>
<patcit num="00004">
<document-id>
<country>US</country>
<doc-number>6100462</doc-number>
<kind>A</kind>
<name>Aoki</name>
<date>20000800</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification> 84613</main-classification></classification-national>
</citation>
<citation>
<patcit num="00005">
<document-id>
<country>US</country>
<doc-number>6639141</doc-number>
<kind>B2</kind>
<name>Kay</name>
<date>20031000</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification> 84609</main-classification></classification-national>
</citation>
<citation>
<patcit num="00006">
<document-id>
<country>JP</country>
<doc-number>2001-100745</doc-number>
<kind>A</kind>
<date>20010400</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<nplcit num="00007">
<othercit>Relevant portion of Japanese Office Action for corresponding Japanese Patent Application No. 2003-312111, dated Sep. 26, 2006.</othercit>
</nplcit>
<category>cited by other</category>
</citation>
</references-cited>
<number-of-claims>24</number-of-claims>
<us-exemplary-claim>1</us-exemplary-claim>
<us-field-of-classification-search>
<classification-national>
<country>US</country>
<main-classification> 84613</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification> 84600</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification> 84609</main-classification>
</classification-national>
</us-field-of-classification-search>
<figures>
<number-of-drawing-sheets>21</number-of-drawing-sheets>
<number-of-figures>29</number-of-figures>
</figures>
<us-related-documents>
<related-publication>
<document-id>
<country>US</country>
<doc-number>20040112203</doc-number>
<kind>A1</kind>
<date>20040617</date>
</document-id>
</related-publication>
</us-related-documents>
<parties>
<applicants>
<applicant sequence="001" app-type="applicant-inventor" designation="us-only">
<addressbook>
<last-name>Ueki</last-name>
<first-name>Kazuhisa</first-name>
<address>
<city>Shizuoka-Ken</city>
<country>JP</country>
</address>
</addressbook>
<nationality>
<country>JP</country>
</nationality>
<residence>
<country>JP</country>
</residence>
</applicant>
<applicant sequence="002" app-type="applicant-inventor" designation="us-only">
<addressbook>
<last-name>Ikeya</last-name>
<first-name>Tadahiko</first-name>
<address>
<city>Shizuoka-Ken</city>
<country>JP</country>
</address>
</addressbook>
<nationality>
<country>JP</country>
</nationality>
<residence>
<country>JP</country>
</residence>
</applicant>
<applicant sequence="003" app-type="applicant-inventor" designation="us-only">
<addressbook>
<last-name>Ishibashi</last-name>
<first-name>Masao</first-name>
<address>
<city>Shizuoka-Ken</city>
<country>JP</country>
</address>
</addressbook>
<nationality>
<country>JP</country>
</nationality>
<residence>
<country>JP</country>
</residence>
</applicant>
<applicant sequence="004" app-type="applicant-inventor" designation="us-only">
<addressbook>
<last-name>Ito</last-name>
<first-name>Shinichi</first-name>
<address>
<city>Shizuoka-Ken</city>
<country>JP</country>
</address>
</addressbook>
<nationality>
<country>JP</country>
</nationality>
<residence>
<country>JP</country>
</residence>
</applicant>
<applicant sequence="005" app-type="applicant-inventor" designation="us-only">
<addressbook>
<last-name>Kubo</last-name>
<first-name>Sachiyo</first-name>
<address>
<city>Meguro-Ku</city>
<country>JP</country>
</address>
</addressbook>
<nationality>
<country>JP</country>
</nationality>
<residence>
<country>JP</country>
</residence>
</applicant>
<applicant sequence="006" app-type="applicant-inventor" designation="us-only">
<addressbook>
<last-name>Hara</last-name>
<first-name>Masaki</first-name>
<address>
<city>Meguro-Ku</city>
<country>JP</country>
</address>
</addressbook>
<nationality>
<country>JP</country>
</nationality>
<residence>
<country>JP</country>
</residence>
</applicant>
<applicant sequence="007" app-type="applicant-inventor" designation="us-only">
<addressbook>
<last-name>Takagi</last-name>
<first-name>Tetsuya</first-name>
<address>
<city>Meguro-Ku</city>
<country>JP</country>
</address>
</addressbook>
<nationality>
<country>JP</country>
</nationality>
<residence>
<country>JP</country>
</residence>
</applicant>
</applicants>
<agents>
<agent sequence="01" rep-type="attorney">
<addressbook>
<orgname>Rossi, Kimms &amp; McDowell LLP</orgname>
<address>
<country>unknown</country>
</address>
</addressbook>
</agent>
</agents>
</parties>
<assignees>
<assignee>
<addressbook>
<orgname>Yamaha Corporation</orgname>
<role>03</role>
<address>
<country>JP</country>
</address>
</addressbook>
</assignee>
<assignee>
<addressbook>
<orgname>Yamaha Music Foundation</orgname>
<role>03</role>
<address>
<country>JP</country>
</address>
</addressbook>
</assignee>
</assignees>
<examiners>
<primary-examiner>
<last-name>Donovan</last-name>
<first-name>Lincoln</first-name>
<department>2837</department>
</primary-examiner>
<assistant-examiner>
<last-name>Qin</last-name>
<first-name>Jianchun</first-name>
</assistant-examiner>
</examiners>
</us-bibliographic-data-grant>
<abstract id="abstract">
<p id="p-0001" num="0000">An assistive music playing apparatus is provided for playing a music piece with musically acceptable notes even when the player inputs musically unacceptable notes. The apparatus provides a chord progression pattern, and comprises a note conversion device. A chord progression pattern defines a series of chords, which are presented one after another in time for a music progression. As the player plays music, inputting potentially unacceptable notes, the inputted notes will be converted to musically acceptable notes with reference to the currently presented chord in the chord progression. The note conversion rules are prepared different for a melody note range, a chord note range and a bass note range. Overlap of converted notes are avoided. Depending on the conditions of the player's note input, i.e. whether the melody is ascending or descending, or the chord is played in a block chord or in an arpeggio, the conversion rules may be selected to generate notes which fit the designated chord, even including non-basic notes or tension notes.</p>
</abstract>
<drawings id="DRAWINGS">
<figure id="Fig-EMI-D00000" num="00000">
<img id="EMI-D00000" he="171.11mm" wi="255.61mm" file="US07297859-20071120-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00001" num="00001">
<img id="EMI-D00001" he="256.12mm" wi="171.62mm" orientation="landscape" file="US07297859-20071120-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00002" num="00002">
<img id="EMI-D00002" he="78.99mm" wi="178.48mm" file="US07297859-20071120-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00003" num="00003">
<img id="EMI-D00003" he="252.31mm" wi="170.35mm" file="US07297859-20071120-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00004" num="00004">
<img id="EMI-D00004" he="187.79mm" wi="126.75mm" file="US07297859-20071120-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00005" num="00005">
<img id="EMI-D00005" he="198.97mm" wi="174.24mm" file="US07297859-20071120-D00005.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00006" num="00006">
<img id="EMI-D00006" he="256.96mm" wi="165.86mm" file="US07297859-20071120-D00006.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00007" num="00007">
<img id="EMI-D00007" he="233.17mm" wi="171.53mm" file="US07297859-20071120-D00007.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00008" num="00008">
<img id="EMI-D00008" he="171.87mm" wi="177.38mm" file="US07297859-20071120-D00008.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00009" num="00009">
<img id="EMI-D00009" he="176.36mm" wi="178.73mm" file="US07297859-20071120-D00009.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00010" num="00010">
<img id="EMI-D00010" he="105.75mm" wi="166.88mm" file="US07297859-20071120-D00010.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00011" num="00011">
<img id="EMI-D00011" he="226.74mm" wi="130.22mm" orientation="landscape" file="US07297859-20071120-D00011.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00012" num="00012">
<img id="EMI-D00012" he="112.27mm" wi="174.24mm" file="US07297859-20071120-D00012.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00013" num="00013">
<img id="EMI-D00013" he="97.28mm" wi="163.91mm" file="US07297859-20071120-D00013.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00014" num="00014">
<img id="EMI-D00014" he="260.01mm" wi="171.96mm" orientation="landscape" file="US07297859-20071120-D00014.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00015" num="00015">
<img id="EMI-D00015" he="250.02mm" wi="176.87mm" orientation="landscape" file="US07297859-20071120-D00015.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00016" num="00016">
<img id="EMI-D00016" he="141.31mm" wi="175.77mm" file="US07297859-20071120-D00016.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00017" num="00017">
<img id="EMI-D00017" he="236.64mm" wi="181.95mm" file="US07297859-20071120-D00017.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00018" num="00018">
<img id="EMI-D00018" he="258.66mm" wi="183.13mm" file="US07297859-20071120-D00018.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00019" num="00019">
<img id="EMI-D00019" he="192.62mm" wi="171.53mm" file="US07297859-20071120-D00019.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00020" num="00020">
<img id="EMI-D00020" he="245.03mm" wi="174.24mm" file="US07297859-20071120-D00020.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00021" num="00021">
<img id="EMI-D00021" he="256.88mm" wi="170.43mm" orientation="landscape" file="US07297859-20071120-D00021.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
</drawings>
<description id="description">
<?BRFSUM description="Brief Summary" end="lead"?>
<heading id="h-0001" level="1">TECHNICAL FIELD</heading>
<p id="p-0002" num="0001">The present invention relates to an assistive apparatus, method, and computer program for playing music, and more particularly to an apparatus, a method and computer program for playing proper music based on rough manipulations by the player, in which a note conversion system provides a chord progression pattern and the player may manipulate the music playing input device even in a rough manner, for example, by depressing potentially incorrect (unacceptable) keys intending a melody, chords or a bass performance, and then the note conversion system converts the inputted incorrect note data to correct (acceptable) note data for the respective currently running chords to generate correct melody notes, chord constituent notes or bass performance notes in view of the chord progression. The apparatus, the method and the computer program are also capable of controlling the tone generation to prevent the note conversion from generating overlapped notes with respect to other concurrently generated notes, converting to notes other than essential chord constituent notes, or converting to notes which will fit not only the currently running chord, but also the prevailing tone color (instrument voice).</p>
<heading id="h-0002" level="1">BACKGROUND INFORMATION</heading>
<p id="p-0003" num="0002">There have been known in the art such assistive music playing apparatuses that convert roughly played music input signals to proper music playing signals in view of music theory or grammar, so that even a player having poor musical skill and knowledge can enjoy playing music without giving precise care to music theory and grammar. (For example, see unexamined Japanese patent publication No. 1993-27757.)</p>
<p id="p-0004" num="0003">With a conventional assistive music playing apparatus, however, the inputted music playing signals (i.e. played notes) are uniformly converted to the chord constituent notes or to the scale notes of the designated tonality (key), and may not necessarily make the most of the player's feeling.</p>
<p id="p-0005" num="0004">Another type of assistive music playing apparatus has been introduced in the art, which apparatus plays back some accompaniment or some music data along with a chord progression and permits the player to play music over such an accompaniment by manipulating the music playing controls such as keys on a keyboard. (For example, see unexamined Japanese patent publication No. 1993-188956.) With such an apparatus, the user may manipulate a key or keys causing generation of a note or notes which may not go well with the concurrently generated accompaniment tones.</p>
<p id="p-0006" num="0005">A further conceivable method is a method in which the notes played by the user are converted under a prescribed rule to the constituent notes of previously set chords, which method may bring forth a situation where a converted note coincides with another note which is already being generated concurrently. If such coincident notes are generated without care, there may arise a phenomenon of “flanging” (a phenomenon caused by interference of two waveforms, when the pitches, the phases and timbre are very close to each other) resulting in tones quite different from the source or original tones. Further, in the very low frequency range, even though the pitches of two tones are not the same or very close, but if the pitches of two tones are close to some extent, simultaneous sounding of two tones will cause unclear mumbling, thus deteriorating the naturalness of sounds in the acoustic field.</p>
<p id="p-0007" num="0006">Where the above-mentioned conversion method is employed to convert the user-played notes to the notes which agree with the chord constituent notes under a predetermined rule, no notes other than the chord constituent notes would be generated, even though the user might depress the keys in a manner which would typically cause the generation of notes other than the chord constituent notes, for example by intentionally depressing close black keys or ten keys simultaneously. Such a situation will not be a nuisance from an ordinary point of view in music performance, but will be monotonous and non-surprising with only chord tones to realize a stable music performance.</p>
<p id="p-0008" num="0007">Further, the above-mentioned conversion method will not cause different conversions for different timbres (voices), or cause conversion to unexpected note pitches which should not be generated normally, or cause conversion to more notes than the number of simultaneously available notes, depending on timbres (voices).</p>
<heading id="h-0003" level="1">SUMMARY OF THE INVENTION</heading>
<p id="p-0009" num="0008">It is, therefore, a first object of the present invention to provide an assistive music playing apparatus, method and computer program with which the player does not need to pay precise attention in playing (inputting) correct notes but to engage himself/herself in playing music rhythmically and emotionally according to his/her general feeling, thereby to present an acceptable music performance. For this purpose, the apparatus, method and computer program provide chord progression for the player to play music over the chord progression, and convert the potentially unacceptable (incorrect) notes to acceptable (correct) notes with reference to the chord at the time of the note input.</p>
<p id="p-0010" num="0009">A second object of the present invention is to provide an input note conversion system in which the inputted notes according to the user's playing are converted to the notes which will fit the chord at the time of the note input, and in which the note conversion is controlled so that a plurality of converted notes for simultaneous generation shall not be the same or very close notes depending on the note sub-ranges or on the playing conditions, thereby keeping natural acoustic feeling.</p>
<p id="p-0011" num="0010">A third object of the present invention is to provide an input note conversion system in which the inputted notes according to the user's playing are converted to the notes which will fit the chord at the time of the note input, and in which the note conversion is controlled so that the converted note may not be limited to basic notes in view of the chord but may be non-basic notes, thereby imparting reality in the performance and pleasing the player in playing with full of variety.</p>
<p id="p-0012" num="0011">A fourth object of the present invention is to provide an input note conversion system in which the inputted notes according to the user's playing are converted to the notes which will fit the chord at the time of the note input, and in which the note conversion is controlled so that a realistic performance with peculiar features on an actual instrument (voice) will be presented without the user paying particular attention.</p>
<p id="p-0013" num="0012">According to an aspect of the present invention, the first object is accomplished by providing an assistive music playing apparatus comprising: a chord progression pattern providing device which provides a chord progression pattern representing a series of chords; a note input device which inputs notes constituting music playing along with the chord progression, the inputted notes potentially including unacceptable notes to be subjected to note correction; and a note conversion device which converts the inputted notes, with reference to a current chord in the chord progression at the time of the inputted notes, to converted notes according to conversion characteristics which are differently predetermined for different note sub-ranges as divided in view of note pitches.</p>
<p id="p-0014" num="0013">According to another aspect of the present invention, the first object is accomplished by providing an assistive music playing apparatus comprising: a chord progression pattern providing device which provides a chord progression pattern representing a series of chords; a note input device which inputs notes constituting music playing along with the chord progression, the inputted notes potentially including unacceptable notes to be subjected to note correction; a note conversion device which converts the inputted notes to first converted notes with reference to a current chord in the chord progression at the time of the inputted notes; and a note reconversion device which reconverts, when a plurality of the first converted notes become the same notes, one of the same notes to another note.</p>
<p id="p-0015" num="0014">According to a further aspect of the present invention, the first object is accomplished by providing an assistive music playing apparatus comprising: a chord progression pattern providing device which provides a chord progression pattern representing a series of chords; a note input device which inputs notes constituting music playing along with the chord progression, the inputted notes potentially including unacceptable notes to be subjected to note correction; a note conversion device which converts the inputted notes to converted notes with reference to a current chord in the chord progression at the time of the inputted notes according to the number of substantially simultaneously inputted notes, a note distance between the highest note and the lowest note in the substantially simultaneously inputted notes, and the note degree of the highest note from the root of the current chord in the chord progression.</p>
<p id="p-0016" num="0015">According to a still further aspect of the present invention, the second object is accomplished by providing an input note converting apparatus comprising: a chord information acquiring device which acquires chord information from a chord information providing device; an input note information acquiring device which acquires input note information indicating inputted notes from a musical note input device; a note conversion table which contains note employment factors for indicating a number of notes to be employed for note conversion according to the number of substantially simultaneously inputted notes with respect to respective chord types; a note conversion device which converts notes represented by the input note information to notes which fit the chord type represented by the chord information using the note conversion table; and a note conversion control device which controls the note conversion device so that the converted note shall not overlap with another note which is currently being generated; and further by providing a computer program for executing input note conversion processing in a musical note information processing apparatus which includes a note conversion table containing note employment factors for indicating a number of notes to be employed for note conversion according to the number of substantially simultaneously inputted notes with respect to respective chord types, the input note conversion processing comprising: a procedure of acquiring chord information from a chord information providing device; a procedure of acquiring input note information indicating inputted notes from a musical note input device; a procedure of converting notes represented by the input note information to notes which fit the chord type represented by the chord information using the note conversion table; and a procedure of controlling the note conversion device so that the converted note shall not overlap with another note which is currently being generated.</p>
<p id="p-0017" num="0016">According to a still further aspect of the present invention, the second object is accomplished by providing an input note converting apparatus comprising: a chord information acquiring device which acquires chord information from a chord information providing device; an input note information acquiring device which acquires input note information indicating inputted notes from a musical note input device; a note conversion device which converts notes represented by the input note information to notes which fit the chord type represented by the chord information; and a note conversion control device which takes the converted note as an output candidate, detects music playing conditions from the input note information, and controls the note conversion device in different manner depending on the detected playing condition so that the converted note shall not overlap with another note which is currently being generated; and further by providing a computer program for executing input note conversion processing in a musical note information processing apparatus, the input note conversion processing comprising: a procedure of acquiring chord information from a chord information providing device; a procedure of acquiring input note information indicating inputted notes from a musical note input device; a procedure of converting notes represented by the input note information to notes which fit the chord type represented by the chord information; and a procedure of taking the converted note as an output candidate, detecting music playing conditions from the input note information, and controlling the note conversion device in different manner depending on the detected playing condition so that the converted note shall not overlap with another note which is currently being generated.</p>
<p id="p-0018" num="0017">According to a still further aspect of the present invention, the second object is accomplished by providing an input note converting apparatus comprising: a chord information acquiring device which acquires chord information from a chord information providing device; an input note information acquiring device which acquires input note information indicating inputted notes from a musical note input device; a note conversion device which converts notes represented by the input note information to notes which fit the chord type represented by the chord information; and a note conversion control device which compares the note pitches of the note which is currently subjected to note conversion and the preceding input note as to which is higher when there is another note being generated, and controls the note conversion device according to the comparison result so that the converted note shall not overlap with another note which is currently being generated; and further by providing a computer program for executing input note conversion processing in a musical note information processing apparatus, the input note conversion processing comprising: a procedure of acquiring chord information from a chord information providing device; a procedure of acquiring input note information indicating inputted notes from a musical note input device; a procedure of converting notes represented by the input note information to notes which fit the chord type represented by the chord information; and a procedure of comparing the note pitches of the note which is currently subjected to note conversion and the preceding input note as to which is higher when there is another note being generated, and controlling the procedure of converting according to the comparison result so that the converted note shall not overlap with another note which is currently being generated.</p>
<p id="p-0019" num="0018">According to a still further aspect of the present invention, the third object is accomplished by providing an input note converting apparatus comprising: a chord information acquiring device which acquires chord information from a chord information providing device; an input note information acquiring device which acquires input note information indicating inputted notes from a musical note input device; an input condition discriminating device which discriminates note input conditions from the input note information; a note conversion device which converts notes represented by the input note information to notes which fit the chord type represented by the chord information; and a note conversion control device which controls the note conversion device according to the note input condition as discriminated by the input condition discriminating device so that the converted note shall be a basic note or a non-basic note according to the chord information; and further by providing a computer program for executing input note conversion processing in a musical note information processing apparatus, the input note conversion processing comprising: a procedure of acquiring chord information from a chord information providing device; a procedure of acquiring input note information indicating inputted notes from a musical note input device; a procedure of discriminating note input conditions from the input note information; a procedure of converting notes represented by the input note information to notes which fit the chord type represented by the chord information; and a procedure of controlling the procedure of converting according to the note input condition as discriminated by the procedure of discriminating so that the converted note shall be a basic note or a non-basic note according to the chord information.</p>
<p id="p-0020" num="0019">According to a still further aspect of the present invention, the third object is accomplished by providing an input note converting apparatus comprising: a chord information acquiring device which acquires chord information representing chord types from a chord information providing device; an input note information acquiring device which acquires input note information indicating inputted notes from a musical note input device; an input condition discriminating device which discriminates note input conditions from the input note information; a note conversion table containing note employment factors which decide available converted notes corresponding to the respective chord types, and including a first sub-table and a second sub-table, the first sub-table containing the note employment factors for converting input notes to basic notes in view of the chord type, and the second sub-table containing the note employment factors for converting input notes also to non-basic notes in view of the chord type; and a table deciding device which decides which of the first and the second sub-table to use for the respective input notes according to the note input conditions of the input note information as discriminated by the input condition discriminating device; and further by providing a computer program for executing input note conversion processing in a musical note information processing apparatus which includes a note conversion table containing note employment factors which decide available converted notes corresponding to the respective chord types, and including a first sub-table and a second sub-table, the first sub-table containing the note employment factors for converting input notes to basic notes in view of the chord type, and the second sub-table containing the note employment factors for converting input notes also to non-basic notes in view of the chord type, the input note conversion processing comprising: a procedure of acquiring chord information representing chord types from a chord information providing device; a procedure of acquiring input note information indicating inputted notes from a musical note input device; a procedure of discriminating note input conditions from the input note information; and a procedure of deciding which of the first and the second sub-table to use for the respective input notes according to the note input conditions of the input note information as discriminated by the procedure of discriminating.</p>
<p id="p-0021" num="0020">According to a still further aspect of the present invention, the fourth object is accomplished by providing an input note converting apparatus comprising: a chord information acquiring device which acquires chord information representing chord types from a chord information providing device; an input note information acquiring device which acquires input note information indicating inputted notes from a musical note input device; a voice information acquiring device which acquires voice information from a voice information providing device; a plurality of note conversion tables containing note employment factors which decide available converted notes corresponding to the respective chord types; and a note conversion device which converts notes represented by the input note information to notes which fit the chord type represented by the chord information using the note conversion table which is selected from among the plurality of note conversion tables according to the voice information; and further by providing a computer program for executing input note conversion processing in a musical note information processing apparatus which includes a plurality of note conversion tables containing note employment factors which decide available converted notes corresponding to the respective chord types, the input note conversion processing comprising: a procedure of acquiring chord information representing chord types from a chord information providing device; a procedure of acquiring input note information indicating inputted notes from a musical note input device; a procedure of acquiring voice information from a voice information providing device; and a procedure of converting notes represented by the input note information to notes which fit the chord type represented by the chord information using the note conversion table which is selected from among the plurality of note conversion tables according to the voice information.</p>
<p id="p-0022" num="0021">According to a still further aspect of the present invention, the fourth object is accomplished by providing an input note converting apparatus comprising: a chord information acquiring device which acquires chord information from a chord information providing device; an input note information acquiring device which acquires input note information indicating inputted notes from a musical note input device; a voice information acquiring device which acquires voice information from a voice information providing device; a voice condition storing device which stores note conversion conditions corresponding to the respective voices; and a note conversion device which converts notes represented by the input note information to notes which fit the chord information based on the note conversion conditions corresponding to the voice as designated by the voice information; and further by providing a computer program for executing input note conversion processing in a musical note information processing apparatus which includes a voice condition storing device which stores note conversion conditions corresponding to the respective voices, the input note conversion processing comprising: a procedure of acquiring chord information from a chord information providing device; a procedure of acquiring input note information indicating inputted notes from a musical note input device; a procedure of acquiring voice information from a voice information providing device; and a procedure of converting notes represented by the input note information to notes which fit the chord information based on the note conversion conditions corresponding to the voice as designated by the voice information.</p>
<p id="p-0023" num="0022">The assistive music playing system (apparatus, method and computer program) according to the present invention converts the potentially unacceptable inputted notes individually to musically acceptable notes with reference to the chord at the time each of the notes is inputted, the chord being provided in the form of a chord progression. An accordingly, there is no need to wait for input of other chord constituent notes, and the processing speed can be accelerated. Further, as the note conversion is conducted differently for different note sub-ranges, the deterioration of chord consonance will be avoided and the user's intention will be fully reflected. Further, as plural notes inputted within a predetermined short period of time are processed as simultaneous inputs for a chord, the converted notes sounds in musically good harmony. Where other notes than the highest note among the simultaneous input notes are processed for note conversion with reference to the highest note to obtain other chord notes, the top note will take a big roll in the harmony and draw strong attention of the listener. The player can, therefore, pay attention mainly to musical expression and emotion without bothered by too precise correctness.</p>
<p id="p-0024" num="0023">According to the input note conversion processing #<b>1</b> in the input note conversion system of the present invention, the note conversion table is selected depending on the note range or white/black key distinction, and therefore the inputted notes by the user's music playing can be converted to notes which will well fit the chord at the time of such note input. Further, if the converted candidate note should overlap (including both same or very close) with another currently generated note, the candidate note will be reconverted to further better note which will fit the note range, the playing conditions, and also the relative note heights (which note is higher and which note is lower) by the player's actual playing. More specifically, as the input notes are converted to notes which will fit the currently running chord (in the chord progression), the note conversion is controlled to avoid overlap of notes so that the respective input notes shall not be converted to the same or very close notes at the same time, and accordingly naturalness in auditory feeling will be obtained.</p>
<p id="p-0025" num="0024">According to the input note conversion processing #<b>2</b> in the input note conversion system of the present invention, where the actually inputted note by the user are converted to the notes which will fit the chord as supplied from the chord providing device, the note conversion is controlled according to the note input state whether to convert a note under processing to a basic note (i.e. a chord constituent note or a scale note) or to a non-basic note (a tension note or a ornamental note). More specifically, the note conversion table includes a first table containing note employment factors (conversion factors) to output only basic notes and a second table containing note employment factors to output also non-basic notes, and tables are selectively nominated according to the input state by the user. Thus, non-basic notes can be generated in case the user so intends and so plays the note input device such as a keyboard. The user can enjoy music with full of varieties.</p>
<p id="p-0026" num="0025">According to the input note conversion processing #<b>3</b> in the input note conversion system of the present invention, a plurality of note conversion tables are prepared showing note employment factors for available converted notes with respect to chord types and instrumental voices, and therefore the voice information can be designated and is taken into consideration in converting the notes. As the inputted notes are converted to fit the chord supplied from the chord providing device, the conversion tables can be selectively utilized according to the voice as instructed by the voice information. Thus, by differentiating the note conversion according to the voices, the payer can expect music playing which fit the voice (timbre) of the generated tones.</p>
<p id="p-0027" num="0026">According to further features of the present invention, the note conversion conditions including the maximum number of simultaneously available notes and the note sub-ranges are prepared for individual voices, and the voice to be considered in note conversion can be specifically designated. When the input notes are converted to the notes which will fit the current chord, the note conversion is controlled to output suitable notes after conversion using such note conversion conditions prepared in connection with the respective voices. Thus, the player does not need to pay particular attention, but can enjoy the natural playing style as would be peculiar to natural musical instrument according to the designated voice.</p>
<?BRFSUM description="Brief Summary" end="tail"?>
<?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?>
<description-of-drawings>
<heading id="h-0004" level="1">BRIEF DESCRIPTION OF THE DRAWINGS</heading>
<p id="p-0028" num="0027">For a better understanding of the present invention, and to show how the same may be practiced and will work, reference will now be made, by way of example, to the accompanying drawings, in which:</p>
<p id="p-0029" num="0028"><figref idref="DRAWINGS">FIG. 1</figref> is a block diagram showing a hardware configuration of an assistive music playing system according to an embodiment of the present invention;</p>
<p id="p-0030" num="0029"><figref idref="DRAWINGS">FIG. 2</figref> is a block diagram showing a functional configuration of an assistive music playing apparatus according to an embodiment of the present invention;</p>
<p id="p-0031" num="0030"><figref idref="DRAWINGS">FIG. 3</figref><i>a </i>is a flow chart describing a first embodiment of the music playing assist processing;</p>
<p id="p-0032" num="0031"><figref idref="DRAWINGS">FIG. 3</figref><i>b </i>is a chart showing the user-set parameters for the processing of <figref idref="DRAWINGS">FIG. 3</figref><i>a; </i></p>
<p id="p-0033" num="0032"><figref idref="DRAWINGS">FIG. 3</figref><i>c </i>is a musical notation showing the note inputs in the processing of <figref idref="DRAWINGS">FIG. 3</figref><i>a; </i></p>
<p id="p-0034" num="0033"><figref idref="DRAWINGS">FIG. 3</figref><i>d </i>is a table for the chord tone distribution as used in the processing of <figref idref="DRAWINGS">FIG. 3</figref><i>a; </i></p>
<p id="p-0035" num="0034"><figref idref="DRAWINGS">FIG. 3</figref><i>e </i>is a musical notation showing the note outputs in the processing of <figref idref="DRAWINGS">FIG. 3</figref><i>a; </i></p>
<p id="p-0036" num="0035"><figref idref="DRAWINGS">FIG. 4</figref><i>a </i>is a flow chart describing a second embodiment of the music playing assist processing;</p>
<p id="p-0037" num="0036"><figref idref="DRAWINGS">FIG. 4</figref><i>b </i>is a table for the tone numbers to be generated in the processing of <b>4</b><i>a; </i></p>
<p id="p-0038" num="0037"><figref idref="DRAWINGS">FIG. 4</figref><i>c </i>is a table for the chord tones to be employed in the processing of <figref idref="DRAWINGS">FIG. 4</figref><i>a; </i></p>
<p id="p-0039" num="0038"><figref idref="DRAWINGS">FIG. 5</figref><i>a </i>is a chart showing the conversion range allocation of a first modification of the assistive music playing apparatus;</p>
<p id="p-0040" num="0039"><figref idref="DRAWINGS">FIG. 5</figref><i>b </i>is a block diagram showing a functional configuration of the first modification of the assistive music playing apparatus operating with the range allocation of <figref idref="DRAWINGS">FIG. 5</figref><i>a; </i></p>
<p id="p-0041" num="0040"><figref idref="DRAWINGS">FIG. 6</figref><i>a </i>is a chart showing the conversion range allocation of a second modification of the assistive music playing apparatus;</p>
<p id="p-0042" num="0041"><figref idref="DRAWINGS">FIG. 6</figref><i>b </i>is a block diagram showing a functional configuration of the second modification of the assistive music playing apparatus operating with the range allocation of <figref idref="DRAWINGS">FIG. 6</figref><i>a; </i></p>
<p id="p-0043" num="0042"><figref idref="DRAWINGS">FIG. 7</figref> is a block diagram showing a functional configuration of a third modification of the assistive music playing apparatus;</p>
<p id="p-0044" num="0043"><figref idref="DRAWINGS">FIG. 8</figref> is a block diagram showing a hardware configuration of an input note conversion system according to an embodiment of the present invention;</p>
<p id="p-0045" num="0044"><figref idref="DRAWINGS">FIG. 9</figref> is a block diagram showing a module configuration of an input note conversion system according to an embodiment of the present invention to describe the outline of a note conversion function in a first fashion;</p>
<p id="p-0046" num="0045"><figref idref="DRAWINGS">FIG. 10</figref> is an example of a note conversion table used in an embodiment of the present invention;</p>
<p id="p-0047" num="0046"><figref idref="DRAWINGS">FIGS. 11 and 12</figref>, in combination, are a flow chart describing a key-on event processing in the note conversion processing according to an embodiment of the present invention;</p>
<p id="p-0048" num="0047"><figref idref="DRAWINGS">FIG. 13</figref> is a block diagram showing a module configuration of an input note conversion system according to an embodiment of the present invention to describe the outline of note conversion function in a second and a third fashion;</p>
<p id="p-0049" num="0048"><figref idref="DRAWINGS">FIG. 14</figref> is an example of the table of conversion conditions for the respective voices according to an embodiment of the present invention;</p>
<p id="p-0050" num="0049"><figref idref="DRAWINGS">FIG. 15</figref> is an example of the normal note conversion table as used in an embodiment of the present invention;</p>
<p id="p-0051" num="0050"><figref idref="DRAWINGS">FIG. 16</figref><i>a </i>is another example of the normal note conversion table as used in an embodiment of the present invention;</p>
<p id="p-0052" num="0051"><figref idref="DRAWINGS">FIG. 16</figref><i>b </i>is an example of the tension note conversion table as used in an embodiment of the present invention;</p>
<p id="p-0053" num="0052"><figref idref="DRAWINGS">FIG. 16</figref><i>c </i>is an example of the overall note conversion table as used in an embodiment of the present invention; and</p>
<p id="p-0054" num="0053"><figref idref="DRAWINGS">FIG. 17</figref><i>a</i>, <b>17</b><i>b </i>and <b>18</b>, in combination, are a flow chart describing another key-on event processing in the note conversion processing according to another embodiment of the present invention.</p>
</description-of-drawings>
<?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?>
<?DETDESC description="Detailed Description" end="lead"?>
<heading id="h-0005" level="1">DESCRIPTION OF THE PREFERRED EMBODIMENTS</heading>
<p id="h-0006" num="0000">Assistive Music Playing System</p>
<p id="p-0055" num="0054">Illustrated in <figref idref="DRAWINGS">FIG. 1</figref> of the drawings is a block diagram illustrating a hardware configuration of an assistive music playing system according to an embodiment of the present invention. The assistive music playing system comprises an assistive music playing apparatus <b>1</b>, whose hardware configuration is common to all the embodiments described herein.</p>
<p id="p-0056" num="0055">The assistive music playing apparatus <b>1</b> comprises a RAM <b>3</b>, a ROM <b>4</b>, a CPU <b>5</b>, an external storage device <b>7</b>, a control detecting circuit <b>8</b>, a display circuit <b>10</b>, a tone generator circuit <b>12</b>, an effect circuit <b>13</b>, a MIDI interface <b>16</b> and a communication interface <b>17</b>, all of which are interconnected by a bus <b>2</b>.</p>
<p id="p-0057" num="0056">A user can set various conditions and parameters using panel controls <b>9</b> connected to the control detecting circuit <b>8</b>. The panel controls may be of any arbitrary types such as a rotary encoder, a switch, a mouse, a character inputting (i.e. alphanumeric) keyboard, a joystick and a jog shuttle, as long as they output signals representing the user's control inputs. Further, the panel controls may be soft switches displayed on the screen of a display <b>11</b> operatable by another control means such as a mouse.</p>
<p id="p-0058" num="0057">The display circuit <b>10</b> is connected to the display device <b>11</b> to display various information and presentation on the display screen.</p>
<p id="p-0059" num="0058">The external storage device <b>7</b> includes an interface so as to be connected to the bus <b>2</b>. The external storage device may be, for example, a flexible disk drive (FDD), a hard disk drive (HDD), a magneto-optical disk (MO) drive, a CD-ROM (compact disk read only memory) drive, a DVD (digital versatile disk) drive, a semiconductor memory, or else. The external storage device <b>7</b> may store various parameters, various data, a computer program for practicing the embodiment (called “music playing assist program”), music performance information, and so forth.</p>
<p id="p-0060" num="0059">The RAM <b>3</b> includes working areas for the CPU <b>5</b> to store flags, registers, buffers or buffers, various parameters, etc. The ROM <b>4</b> may store various parameters and control programs, or programs for realizing the embodiments. The CPU <b>5</b> conducts arithmetic operations and controls according to the control programs stored in the external storage device <b>7</b>. A timer <b>6</b> is connected to the CPU <b>5</b> to provide the basic clock signal, the interrupt process timing, etc. to the CPU <b>5</b>.</p>
<p id="p-0061" num="0060">The tone generator <b>12</b> is to generate musical tone signals in response to musical performance signals such as music performance data MD stored in the external storage device <b>7</b> and MIDI signals supplied from music playing controls (or device) <b>15</b> or from a MIDI apparatus <b>18</b> connected to the MIDI interface <b>16</b>, and the musical tone signals are sent to the effect circuit <b>13</b> and then to a sound system <b>14</b> to be emitted as audible sounds.</p>
<p id="p-0062" num="0061">The type or fashion of the tone generator may be a waveform memory type, an FM synthesis type, a physical model type, a harmonics synthesis type, a formant synthesis type, an analog synthesizer type having VCOs, VCFs and VCAs, an analog simulation type, or any other type available in the art. The tone generator circuit <b>12</b> may be of a hardware structure exclusively functioning as a tone generator, or may be of a combination of a DSP (digital signal processor) and a microprogram, or may be of a combination of a CPU and a software thereby functioning as a tone generator. And may be of any combination of the above-mentioned types. Further, a single or small number of hardware circuits may be used in a time division multiplex fashion to provide a plurality of tone generating channels, or plural separate (individual) hardware circuits may be provided to constitute respective ones of a plurality of tone generating channels.</p>
<p id="p-0063" num="0062">The effect circuit <b>13</b> is to impart various sound effects to the tone signals of digital form supplied from the tone generator <b>12</b>. The sound system <b>14</b> includes D/A converters and loudspeakers to convert the supplied digital musical tone signals into analog signals and emit as audible sounds in the atmosphere.</p>
<p id="p-0064" num="0063">The music playing controls or device <b>15</b> are connected to the control detecting circuit <b>8</b> to supply music playing signals or performance signals in accordance with the music playing movements or manipulations of the user (i.e. music player). In the preferred embodiments herein, the music playing controls <b>15</b> are keys of a music-playing keyboard. Anyway, the music playing controls <b>15</b> may be of any other type of controls as long as they are at least capable of outputting performance signals such as in a MIDI format.</p>
<p id="p-0065" num="0064">The MIDI interface (MIDI I/F) <b>16</b> is the one which is connectable to an electronic musical instrument, other kinds of musical instrument, an audio apparatus, a computer, etc., and is at least capable of transmitting and receiving MIDI signals. The MIDI interface <b>16</b> is not necessarily limited to a dedicated (i.e. exclusive) MIDI interface, but also may be formed by using a general-purpose interface such as an RS-232C, a USB (universal serial bus) and IEEE1394. In such a case, the interface may be so designed to transmit also other data than MIDI messages together with the MIDI messages.</p>
<p id="p-0066" num="0065">The MIDI apparatus is an audio apparatus, a musical instrument, or else which is connected to the MIDI interface <b>16</b>. The form of the MIDI apparatus is not limited to a keyboard type musical instrument, but also may be a string instrument type, a wind instrument type, a percussion instrument type, or else. Further, the MIDI apparatus may be an electronic musical instrument which incorporates a tone generator device, an automatic performance device, etc. in a single console, or may be configured by interconnecting separate individual such devices via communication means such as MIDI network and other various networks. The user can play (i.e. manipulate, control, operate) the MIDI apparatus <b>18</b> to input music playing signals. The MIDI apparatus <b>18</b> may serve as controls for inputting various data and various settings other than music playing data.</p>
<p id="p-0067" num="0066">The communication interface <b>17</b> is connectable to a communication network <b>19</b> such as a LAN (local area network), Internet and a telephone line, so that the assistive music playing apparatus <b>1</b> can be connected to a server computer <b>20</b> via the communication network <b>19</b>. Thus, the user can download control programs, programs for realizing the embodiment, music performance data, and so forth from the server computer <b>20</b> into the external storage device such as an HDD, or into the RAM <b>4</b>, or else. The communication interface <b>17</b> and the communication network <b>19</b> may be of a cable type or of a wireless (radio) type, or both.</p>
<p id="p-0068" num="0067"><figref idref="DRAWINGS">FIG. 2</figref> is a block diagram illustrating a functional configuration of an assistive music playing apparatus <b>1</b> of <figref idref="DRAWINGS">FIG. 1</figref> to be used for type <b>1</b> and type <b>2</b> note conversion. The assistive music playing apparatus <b>1</b> of this embodiment is comprised of a music playing input unit <b>21</b>, a chord progression providing unit <b>22</b> and a note conversion unit <b>23</b>.</p>
<p id="p-0069" num="0068">The music playing input unit <b>21</b> is comprised, for example, of the music playing controls <b>15</b> and the control detecting circuit <b>8</b>, or of a MIDI apparatus <b>18</b> of <figref idref="DRAWINGS">FIG. 1</figref>, and supplies music playing signals to the note conversion unit <b>23</b>.</p>
<p id="p-0070" num="0069">The chord progression providing unit <b>22</b> is comprised, for example, of the ROM <b>4</b> or the external storage device <b>7</b> and stores a plural chord progression data sets (files). A chord progression data set is a series of chord data representing an array of chords in terms of chord names or chord degrees for a length of music piece. The chord progression data set may be of the actual chord progression of a particular existing music piece or may be of an arbitrarily created train of chords (as long as not incorrect in music theory). The data set may further contain additional performance data such as of a drum performance or another part performance. In this embodiment, chords are identified and handled in terms of the key (tonality) plus the degree, thereby interpreting the function of the respective chords from a musical point of view. In this connection, the chord progression data are expressed and stored in terms of chord degrees (e.g. I, IIm), so that the user designate a running key or tonality (e.g. F) for the chord progression, thereby determining the actual individual chord names (e.g. F, Gm). Alternatively, the key information may be included in the file of chord progression data set. Further alternatively, actual chord names may be stored as the chord progression data in place of chord degrees, and then the key information will be dispensed with.</p>
<p id="p-0071" num="0070">The chord progression providing unit <b>22</b> supplies the chord progression data set as designated by the user to the note conversion unit <b>23</b>. The note conversion unit <b>23</b> is to convert the potentially incorrect note numbers contained in the music playing signals supplied from the music playing input unit <b>21</b> to musically correct note numbers based on the chord progression data supplied from the chord progression providing unit <b>22</b>, even though the music playing input may contain some incorrect note numbers contrary to the player's intention. The embodiment provides two types of note conversion units conducting music playing assist processing #<b>1</b> and #<b>2</b>, respectively as described herein below.</p>
<p id="p-0072" num="0071">The music playing assist processing #<b>1</b> will be described according to a flow chart of <figref idref="DRAWINGS">FIG. 3</figref><i>a </i>together with reference to <figref idref="DRAWINGS">FIGS. 3</figref><i>b</i>-<b>3</b><i>e</i>. This processing #<b>1</b> incorporates the type <b>1</b> note conversion, in which the note numbers (note pitch information) of the respective inputted notes (music playing signals) are converted to proper note numbers uniformly applying the rules in the table for chord tone distribution CDT as shown in <figref idref="DRAWINGS">FIG. 3</figref><i>d</i>. Namely, each inputted note number, whether it is a solo note or a chord constituent note, is compared with the table CDT to find a correction factor, and is then modified by the factor thus found.</p>
<p id="p-0073" num="0072">The chord tone distribution is a rule defining a modification amount (correction factor) for each of the note numbers “0” through “127” with respect to each of the chord degrees. For example, the rule of chord tone distribution is that the treble tone range permits the maximum use of the inputted note number per se as long as available for a tension note, that the middle tone range permits the use of a chord constituent note, that the lower middle tone range permits the use of the root and the fifth note of a chord, and that the bass tone range permits the use of only the root note of a chord. The inputted note numbers are converted accordingly. With the music playing assist processing #<b>1</b>, all of the inputted note numbers will be converted (i.e. modified) according to the chord tone distribution rules mentioned above to realize note conversions to meet the harmony nature. There are prepared a plurality of chord tone distribution tables having different conversion characteristics (factors), and the user will designate a desired one by setting the user-set parameters US (<figref idref="DRAWINGS">FIG. 3</figref><i>b</i>).</p>
<p id="p-0074" num="0073"><figref idref="DRAWINGS">FIG. 3</figref><i>a </i>is a flow chart describing the music playing assist processing #<b>1</b>. This music playing assist processing is an interrupt processing which is initiated by the user's instruction and is activated at every prescribed interrupt timing thereafter.</p>
<p id="p-0075" num="0074">The user first set the user-set parameters US as shown in <figref idref="DRAWINGS">FIG. 3</figref><i>b</i>, before instructing the activation of this music playing assist processing. The user-set parameters include key information which represents the tonality key of the music piece to be played, information which identifies a chord progression (e.g. music number selecting information) and information which identifies a chord tone distribution table CDT to be described later.</p>
<p id="p-0076" num="0075">The processing is started at a step SA<b>1</b> and then receives the music playing input signals at a step SA<b>2</b>. In this example, it is assumed that the music playing input signals SI containing three notes as shown in <figref idref="DRAWINGS">FIG. 3</figref><i>c </i>are inputted by the user's music performance. The music playing input signals SI include three note events (tone generation instructions) respectively representing note numbers <b>75</b> (D#), <b>71</b> (B) and <b>69</b> (A).</p>
<p id="p-0077" num="0076">A step SA<b>3</b> transposes, i.e. shifts, the note numbers in the music playing input signals SI received in the step SA<b>2</b> by the amount of the “C major key” minus the “designated key (source key)” included in the user-set parameters. The difference is to be expressed in the modulo of “12” so that, for example, “−5” becomes “7.” In the illustrated example, the designated key included in the user-set parameters US is “F major,” which makes “C major” minus “F major” is “7,” and this value “7” is added to the note numbers of the respective note events. Thus, the obtained note numbers are: “75+7=82” (A#5), “71+7=78” (F#5) and “69+7=76” (E5).</p>
<p id="p-0078" num="0077">A step SA<b>4</b> determines the chord degree for the present (current) measure with reference to the designated chord progression in the user-set parameters US (<figref idref="DRAWINGS">FIG. 3</figref><i>b</i>). If, in this example, the current measure is the second measure in the progression, the chord degree is determined to be “V” (the dominant chord).</p>
<p id="p-0079" num="0078">A step SA<b>5</b> gets a conversion formula for the above-determined chord degree with reference to the chord tone distribution table as previously designated by the user in the user-set parameters US. As the chord degree determined at the step SA<b>4</b> is “V,” reference is now made to the column of “V” in the chord tone distribution table CDT of <figref idref="DRAWINGS">FIG. 3</figref><i>d </i>to get a conversion formula for a set of three note numbers “82” (A#), “78” (F#) and “76” (E) as transposed at the step SA<b>3</b> from the music playing input signals SI. Thus obtained conversion formula consists of three conversion factors “1,” “1” and “−2.” The chord tone distribution table CDT shown in <figref idref="DRAWINGS">FIG. 3</figref><i>d </i>is only a part of the entire table for the purpose of explanation here.</p>
<p id="p-0080" num="0079">While the chord tone distribution table shown in <figref idref="DRAWINGS">FIG. 3</figref><i>d </i>contains conversion factors for the respective note numbers with respect to the respective chord degrees, the table may contain note numbers after conversion per se instead.</p>
<p id="p-0081" num="0080">A step SA<b>6</b> converts the transposed note numbers at the step SA<b>3</b> from the music playing input signals SI in accordance with the conversion formula (factors) obtained at the step SA<b>5</b>. In this example, the three conversion factors “1,” “1” and “−2” are respectively added to the corresponding transposed note numbers “82” (A#), “78” (F#) and “76” (E) as shifted at the step SA<b>3</b> from the music playing input signals SI, thereby obtaining converted note numbers “83” (G), “79” (C) and “74” (D).</p>
<p id="p-0082" num="0081">A step SA<b>7</b> reverse transpose the above converted note numbers as shifted at the step SA<b>6</b> from the music playing input signals SI by the amount of the “designate key (source key)” minus “C major” back to the note numbers in the source key. In this example, the designated key included in the user-set parameters US is “F major,” which makes “F major” minus “C major” equals “−7” (in modulo of “−12”), and this value of “−7” is added to the note numbers of the respective note events to obtain reverse transposed note numbers back in the source key of “F major.” Thus, the obtained note numbers are: “83−7=76” (E), “79−7=72” (C) and “74−7=67” (G). The value “−7” may be determined by reversing the sign of “+7” as obtained at the step SA<b>3</b>.</p>
<p id="p-0083" num="0082">Through the above described process, the music playing input signals SI containing three notes as shown in <figref idref="DRAWINGS">FIG. 3</figref><i>c </i>are converted to note outputs SO constituting a corrected chord containing the note numbers “76” (E), “72” (C) and “67” (G) as shown in <figref idref="DRAWINGS">FIG. 3</figref><i>e </i>in musical notation.</p>
<p id="p-0084" num="0083">A step SA<b>8</b> detects overlapping note numbers, if any, after conversion contained in the output signals SO (a state in which two or more input note numbers have been converted to a single same output note number). In the case where any overlap is detected, for example, the note number of the later (or earlier) input event is reconverted to the note number of the row having the factor of “0” which row is nearest to and below (or above) the note number to which the earlier (or later) input note number has been converted in the chord tone distribution table CDT, to be outputted as the revised converted note number in the output signals SO. For example, if the current chord degree is “IV” (subdominant chord) and the source input note numbers are “76” (E) and “79” (G), the note conversion at the step SA<b>7</b> gives the same note numbers “77” (F) for the both. In such a situation, the later (or earlier) arrived note number is converted to the note number “81” (A) having a factor of “0” in its row further above the overlapped one. If no overlap is detected in the converted note numbers, the converted note numbers per se as obtained at the step SA<b>7</b> are outputted as the music playing output signals SO.</p>
<p id="p-0085" num="0084">A step SA<b>9</b> conducts processing of tone generation based on the music playing output signals SO. The tone generation processing is conducted by supplying the output signals SO to the tone generator <b>12</b> of <figref idref="DRAWINGS">FIG. 1</figref>. In place of tone generation, the output signals SO may be stored in the external storage device <b>7</b> or in a temporary storing area of the RAM <b>3</b>. Further, the output signals SO may be outputted to an external apparatus via the MIDI interface <b>16</b> or via communication network <b>17</b>. The step SA<b>9</b> may include all of these processing, or may conduct one or more processing according to the user's designation. The processing then proceeds further to a step SA<b>10</b> to terminate the assistive music playing processing #<b>1</b>.</p>
<p id="p-0086" num="0085">According to the above described processing #<b>1</b>, all the note numbers in the music playing input signals are individually converted, and therefore the same number of tones as the number of inputted tones can be generated, which means that the number of generated tones are maintained as intended by the music player.</p>
<p id="p-0087" num="0086">According to the embodiment which utilizes the chord tone distribution tables of different conversion factors depending on the tone range, the density of generated tones can be variously determined to prevent deterioration of the chord harmony. This can reflect the intention of the player more correctly.</p>
<p id="p-0088" num="0087">The individual conversion of the note numbers of the inputted music playing signals will obviate waiting for other chord constituent notes, thereby increasing the processing speed, which will be advantageous in processing real time.</p>
<p id="p-0089" num="0088">The music playing assist processing #<b>2</b> will be described according to a flow chart of <figref idref="DRAWINGS">FIG. 4</figref><i>a </i>together with reference to <figref idref="DRAWINGS">FIGS. 4</figref><i>b</i>-<b>4</b><i>c</i>. This processing #<b>2</b> incorporates the type <b>2</b> note conversion, in which the number of notes contained in the music playing input signals SI (“NumberOfNotes”), the range between the note number of the bottom (lowest) note and the note number of the top (highest) note in the inputted music playing signals SI (“Range”) and the degree interval of the top note from the root note of the key indicated by the key designation in the user-set parameters US (“TopNoteDegree”) are used to create a chord giving most musically beautiful consonance.</p>
<p id="p-0090" num="0089"><figref idref="DRAWINGS">FIG. 4</figref><i>a </i>is a flow chart describing the music playing assist processing #<b>2</b>. This music playing assist processing is an interrupt processing which is initiated by the user's instruction and is activated at every prescribed interrupt timing thereafter.</p>
<p id="p-0091" num="0090"><figref idref="DRAWINGS">FIG. 4</figref><i>b </i>is an example of a table for tone numbers to be generated TNT which is referred to in the music playing assist processing #<b>2</b> of the present invention. The tone number table TNT is a table for determining tone numbers to be generated GTN (as will be referred to in <figref idref="DRAWINGS">FIG. 4</figref><i>c</i>) based on the number of notes (“NumberOfNotes”) and the top-bottom range (“Range”).</p>
<p id="p-0092" num="0091"><figref idref="DRAWINGS">FIG. 4</figref><i>c </i>is an example of a table for determining note numbers of the chord tones to be generated (CNT) which will be referred to in the music playing assist processing #<b>2</b> of the present invention. The chord note determining table CNT is a table for determining the notes to constitute the subject chord to realize most musically beautiful consonance depending on the number of notes to be generated for the subject chord. This example table CNT gives conversion factors in terms of offset value from the top note based on the top note degree (TND) and the tone numbers to be generated (GTN) as are obtained from the table for tone numbers to be generated (TNT) of <figref idref="DRAWINGS">FIG. 4</figref><i>b</i>. There are prepared plural chord note determining tables (CNT) for different musical categories (genres) such as normal, rock and jazz, in which further a sub-plurality of tables with respect to different chord degrees (“ChordDegree”) are prepared for each of the categories. Shown in <figref idref="DRAWINGS">FIG. 4</figref><i>c </i>is a chord note determining table CNT of the part corresponding to the “Normal” category and the “ChordDegree”=“V.”</p>
<p id="p-0093" num="0092">Herein below will be described the music playing assist processing #<b>2</b> with reference to <figref idref="DRAWINGS">FIGS. 4</figref><i>a</i>-<b>4</b><i>c</i>. Also in this processing #<b>2</b>, it is assumed that the user-set parameters US are previously set as in <figref idref="DRAWINGS">FIG. 3</figref><i>b</i>, except the item of&lt;Table for Chord Tone Distribution&gt;has been replaced by&lt;Chord Note Determining Table&gt;designation.</p>
<p id="p-0094" num="0093">The processing is started at a step SB<b>1</b> and then receives the music playing input signals at a step SB<b>2</b>. In this example also, it is assumed that the music playing input signals SI containing three notes as shown in <figref idref="DRAWINGS">FIG. 3</figref><i>c </i>are inputted by the user's music performance. Further, a plurality of note events included in the music playing input signals SI received within a predetermined short period time (e.g. 49 ms) are deemed to constitute a chord, and the below described processing is conducted with respect to such plural note events inputted within the predetermined period of time.</p>
<p id="p-0095" num="0094">A step SB<b>3</b> detects the number of note events included in the input signals SI received at the step SB<b>2</b> and constituting a chord, and make the detected number to be “NumberOfNotes.” In this example, “NumberOfNotes” is “3.”</p>
<p id="p-0096" num="0095">A step SB<b>4</b> detects the difference between the highest note (i.e. top note) having the greatest note number and the lowest note (i.e. bottom note) having the smallest note number among the note events as inputted at the step SB<b>2</b>, and makes this difference value to be the note range (“Range”). In this example, “Range” is “75 (top note)”-“69 (bottom note)”=“6.”</p>
<p id="p-0097" num="0096">A step SB<b>5</b> detects the degree number of the top note among the note events included in the music playing input signals as received at the step SB<b>2</b> from the root note of the subject chord (“TopNoteDegree”). In this example, the designated key in the user-set parameters US is “F major” and therefore the root note is “F” (<b>65</b>). Thus, “TopNoteDegree”=“75” (D#, the top note)−“65” (F, the root note)=“10.”</p>
<p id="p-0098" num="0097">A step SB<b>6</b> determines tone numbers to be generated (GTN) in accordance with afore-detected “NumberOfNotes” (“3”) and “Range” (“6”) with reference to the table for tone numbers to be generated (TNT) of <figref idref="DRAWINGS">FIG. 3</figref><i>b</i>. In this example, “NumberOfNotes” is “3” and “Range” is “6” (where “Range”&lt;12), which gives an answer of “1, 2, 3” for the tone numbers to be generated (GNT).</p>
<p id="p-0099" num="0098">A step SB<b>7</b> transposes or shifts the note number of the top note included in the note events received at the step SB<b>2</b> by the amount of “C major” minus the “designated key (source key).” In this example, the “designated key” in the user-set parameters is “F major,” which makes “C major” minus “F major” equals “7” (in semitones). This value “7” is added to the note numbers in the inputted note events to obtain transposed note numbers. Thus, the transposed note number of the top note is “75+7=82” (A#).</p>
<p id="p-0100" num="0099">A step SB<b>8</b> creates note numbers for the respective tone numbers to be generated with reference to the row of “TopNoteDegree” in the designated table for chord notes of the current chord as designated by the user-set parameters US of <figref idref="DRAWINGS">FIG. 3</figref><i>b</i>. In this example, the chord note determining table CNT of “Normal” category and for “ChordDegree” of “V” (dominant chord) is looked up at the columns of the tone numbers “1,” “2” and “3” and at the row of “TopNoteDegree” (“10”) to find offset values of “1,” “−8” and “−3.” These offset values are then added individually to the note number of the top note “82” (A#) to create note numbers “83” (B), “74” (D) and “79” (G).</p>
<p id="p-0101" num="0100">A step SB<b>9</b> transposes the created note numbers at the step SB<b>8</b> for the respective chord notes in response to the input key events by the amount of the “designated key (source key)” minus “C major back to note numbers in the source key. In this example, the designated key in the user-set parameters is “F major” and “Designated Key” minus “C major” is “−7,” which in turn is added to the above obtained respective note numbers. Reverse transposition of the respective note numbers are: “83−7=76” (E), “79−7=72” (C) and “74−7=67” (G). The value of “−7” may be obtained by inverting the sign of the value “7” as obtained by the step SB<b>7</b>. Thus, the output music playing signals will be the same as the output SO of <figref idref="DRAWINGS">FIG. 3</figref><i>e. </i></p>
<p id="p-0102" num="0101">A step SB<b>10</b> conducts processing of tone generation based on the music playing output signals SO including the respective note events as transposed back to the source key at the step SB<b>9</b>. The tone generation processing is the same as in the processing #<b>1</b> mentioned before. The processing then proceeds further to a step SB<b>11</b> to terminate the assistive music playing processing #<b>2</b>.</p>
<p id="p-0103" num="0102">According to the processing #<b>2</b>, a plurality of note events inputted within a predetermined short time period are handled as a chord event (deemed to be simultaneous occurrences), and therefore the note conversion processing is designed and conducted to present musically beautiful consonance.</p>
<p id="p-0104" num="0103">Where all the chord constituent notes are created with reference to the top note among the inputted note events, the top note is fully used or relied upon to realize good musical consonance. While the chord note determining table stores offset values from the top notes, which offset values are added to the top note to create the respective chord constituent notes, the chord constituent notes may be obtained with reference to the bottom note or other another note other than the top note. However, for the note conversion in the treble range and the middle range, the reference note should preferably be the top note for creating other chord constituent notes.</p>
<p id="p-0105" num="0104">Further, while the number of notes to be generated is limited to “4” at maximum, other number may be employed within the numbers which will usually occur in the ordinary music playing.</p>
<p id="p-0106" num="0105">In the above explanation about two types of music playing assist processing #<b>1</b> (<figref idref="DRAWINGS">FIG. 3</figref>) and #<b>2</b> (<figref idref="DRAWINGS">FIG. 4</figref>), the normalization of the designated key to the reference key of “C major” is conducted by “C major” minus the “Designated Key” to obtain the transposition amount and thus calculated transposition amount is added to each input note number to obtain each normalized note number. Also in the above explanation, the final reverse transposition (reverse normalization) is effected by obtaining the reverse transposition amount by “Designated Key” minus “C major” and by adding thus calculated reverse transposition amount to each converted normalized note number. However, the arithmetic operations may be reversed to effect the same result, as will be understood by a person skilled in the theory of music. Namely, the normalization of the designated key to the reference key of “C major” may be conducted by the “Designated Key” minus “C major” to obtain an alternative transposition amount, and thus calculated alternative transposition amount is subtracted from each input note number to obtain each normalized note number. And the reverse normalization may be effected by adding (in place of subtracting) the above alternative transposition amount to each converted normalized note number.</p>
<p id="p-0107" num="0106">A first modification of the assistive music playing apparatus according to the present invention will be described hereunder with reference to <figref idref="DRAWINGS">FIGS. 5</figref><i>a </i>and <b>5</b><i>b</i>. <figref idref="DRAWINGS">FIG. 5</figref><i>a </i>is a chart showing the conversion range allocation of the first modification, in which the music playing controls <b>15</b> (<figref idref="DRAWINGS">FIG. 1</figref>) such as a keyboard is divided into two ranges at an arbitrarily predetermined split point SP which is any point between the note number “0” and the note number “127.” For the note numbers below the split point SP (range of notes to be converted), the note events will be subjected to note conversion, and for the note number from the split point SP and above (range of notes not to be converted), the note events will not be subjected to note conversion.</p>
<p id="p-0108" num="0107"><figref idref="DRAWINGS">FIG. 5</figref><i>b </i>is a block diagram of the functional configuration of the first modification <b>51</b> of the assistive music playing apparatus <b>1</b> of <figref idref="DRAWINGS">FIG. 2</figref>, according to the present invention. The assistive music playing apparatus <b>51</b> is comprised of a music playing input unit <b>21</b>, a chord progression providing unit <b>22</b> and a note conversion unit <b>23</b> similarly to the assistive music playing apparatus <b>1</b> of <figref idref="DRAWINGS">FIG. 2</figref>. The chord progression providing unit <b>22</b> and the note conversion unit <b>23</b> function similarly to the assistive music playing apparatus <b>1</b> of <figref idref="DRAWINGS">FIG. 2</figref>, while only the music playing input signals below the split point SP are supplied to the note conversion unit <b>23</b> and are subjected to note conversion, and the music playing input signals from the split point and above are not supplied to the note conversion unit <b>23</b>, but supplied directly to the tone generator <b>12</b> (<figref idref="DRAWINGS">FIG. 1</figref>) for direct tone generation.</p>
<p id="p-0109" num="0108">This type of assistive music playing apparatus is very suitable for such a player who wants to play an entire melody himself or herself which would usually use a higher note range (above the split point SP) but may be unskillful in playing chord accompaniment which would use a lower note range (below the split point SP), so that the player can enjoy playing music with a simple melody and some complicated chords, being assisted by the apparatus of the present invention.</p>
<p id="p-0110" num="0109">The split point SP can be set at any arbitrary point, and further a plurality of split point may be provided. In the latter case, each fractional range divided by the split points may be set to be either note conversion range or non-conversion range. The non-conversion range can be realized by incorporating the chord tone distribution table and setting all the conversion factors (offset values) to be “0” in the non-conversion range.</p>
<p id="p-0111" num="0110">A second modification of the assistive music playing apparatus according to the present invention will be described hereunder with reference to <figref idref="DRAWINGS">FIGS. 6</figref><i>a </i>and <b>6</b><i>b</i>. <figref idref="DRAWINGS">FIG. 6</figref><i>a </i>is a chart showing the conversion range allocation of the second modification, in which the music playing controls <b>15</b> (<figref idref="DRAWINGS">FIG. 1</figref>) such as a keyboard is divided into two ranges at an arbitrarily predetermined split point SP which is any point between the note number “0” and the note number “127.” For the note numbers from the split point SP and above (range of notes to be converted by type <b>1</b> unit), the note events will be subjected to note conversion through the music playing assist processing #<b>1</b>, and for the note number below the split point SP (range of notes to be converted by type <b>2</b> unit), the note events will be subjected to note conversion through the music playing assist processing #<b>2</b>.</p>
<p id="p-0112" num="0111"><figref idref="DRAWINGS">FIG. 6</figref><i>b </i>is a block diagram of the functional configuration of the second modification <b>61</b> of the assistive music playing apparatus <b>1</b> of <figref idref="DRAWINGS">FIG. 2</figref>, according to the present invention. The assistive music playing apparatus <b>61</b> is comprised of a music playing input unit <b>21</b>, a chord progression providing unit <b>22</b>, a note conversion unit (type <b>1</b>) <b>23</b><i>a</i>, and a note conversion unit (type <b>2</b>) <b>23</b><i>b</i>. From the music playing input unit <b>21</b>, the music playing input signal of and above the split point SP are supplied to the note conversion unit (type <b>1</b>) <b>23</b><i>a </i>and the music playing input signal below the split point SP are supplied to the note conversion unit (type <b>2</b>) <b>23</b><i>b. </i></p>
<p id="p-0113" num="0112">The note conversion unit (type <b>1</b>) <b>23</b><i>a </i>conducts, for example, note conversion according to the above mentioned music playing assist processing #<b>1</b>, while the note conversion unit (type <b>2</b>) <b>23</b><i>b </i>conducts, for example, note conversion according to the above mentioned music playing assist processing #<b>2</b>. As the higher note range which is the range of notes to be converted by type <b>1</b> conversion unit is mostly used for playing a monophonic melody, it is advantageous to use the music playing assist processing #<b>1</b> which converts the inputted music playing signals individually. And, as the lower note range which is the range of notes to be converted by type <b>2</b> conversion unit is mostly used for playing a chord accompaniment, it is advantageous to use the music playing assist processing #<b>2</b> which converts the inputted music playing signals collectively as a chord.</p>
<p id="p-0114" num="0113">The use of different types of conversion processing for different key range of the keyboard will permit to make the most of the advantageous aspects of the respective conversion types. The split point SP can be set at any arbitrary point, and further there can be set a plurality of split points SP. In the latter case, the type of note conversion processing to be conducted at each of the ranges as divided by the split points can be selectively set by the user. Further, in the case where a plurality of split points are provided, some of the divided ranges may be allocated for non-conversion range as in the above described first modification.</p>
<p id="p-0115" num="0114">The note conversion types may not necessarily be limited to the types as described above, but may be of any types as long as they are different. Further, the relations between the conversion types and the key ranges may be different from the above mentioned relations. For example, the note conversion unit (type <b>1</b>) <b>23</b><i>a </i>may conduct the note conversion processing #<b>2</b> and the note conversion unit (type <b>2</b>) <b>23</b><i>b </i>may conduct the note conversion processing #<b>1</b>.</p>
<p id="p-0116" num="0115"><figref idref="DRAWINGS">FIG. 7</figref> is a block diagram showing a functional configuration of a third modification of the assistive music playing apparatus <b>71</b> according to the present invention. The assistive music playing apparatus <b>71</b> is comprised of a music playing input unit <b>21</b>, a chord progression providing unit <b>22</b>, a note conversion unit <b>23</b> and an automatic accompaniment/additional note generating unit <b>24</b>. The note conversion unit <b>23</b> is to convert music playing input signals supplied from the music playing input unit <b>21</b> based on the chord progression supplied from the chord progression providing unit <b>22</b>. Note conversion processing by the note conversion unit <b>23</b> may be either of the afore mentioned #<b>1</b> type conversion processing and #<b>2</b> type conversion processing, or may include both of them with a split point SP provided as in the second modification embodiment. Further, a non-conversion sub-range may be provided as in the first modification embodiment.</p>
<p id="p-0117" num="0116">The automatic accompaniment/additional note generating unit <b>24</b> is to generate an automatic accompaniment and/or additional notes based on the chord progression supplied from the chord progression providing unit <b>22</b> and the note-number-converted music playing input signals supplied from the note conversion unit <b>23</b>. As the same chord progression is supplied in common to the automatic accompaniment/additional note generating unit <b>24</b> and to the note conversion unit <b>23</b>, the generated automatic accompaniment and the generated additional notes will exhibit good consonance with the note-number-converted music playing input signals (for example, both a chord and one or more additional notes will be given to each top note after conversion of the inputted music playing signals).</p>
<p id="p-0118" num="0117">The music playing signals SI which are inputted as subjects of conversion in the music playing assist processing are, for example, music performance signals in the MIDI format and are comprised of a plurality of note events (note-ons and note-offs) including at least note pitch information such as note numbers. In addition to note pitch information, each note event usually includes, information for controlling the note sounding way or manner of the note event such as note length information, tone volume information, and so forth. In the music playing assist processing (both #<b>1</b> and #<b>1</b>) of the present invention, only the note numbers (i.e. pitch information) in the music playing signals SI are converted. This means that the note sounding length information, tone volume information, and other information will be outputted without change as the player has intended, and therefore the player's feeling will be maintained.</p>
<p id="p-0119" num="0118">The music playing input signals SI may not necessarily be limited to the signals including some incorrectness in music theory, but may be correct in some category of music. In such a situation, if music playing signals of a particular category are inputted by the player and a conversion table for a different category of music is designated, the inputted music performance will be converted to a music performance in such a designated category style.</p>
<p id="p-0120" num="0119">According to embodiments of the present invention, a play having poor musical knowledge can enjoy music playing which is correct in music theory without paying severe attention to music theory.</p>
<p id="p-0121" num="0120">Further, by preparing multiplicity of chord tone distribution tables or chord note determining tables corresponding to various music categories (genres), the output performance will be the one which meets a wide variety of music categories and also makes the most of the characteristics of individual musical instruments.</p>
<p id="p-0122" num="0121">While, in the above described embodiments, the inputted music playing signals are transposed to “C major” key to thereafter convert individual notes to musically correct notes, such transposition can be dispensed with by preparing note conversion tables for every key to process directly the inputted note numbers per se. Another alternative will be that note conversion tables are prepared for some of the keys (i.e. not all the keys) and the transposition will be conducted to the table of the nearest key from the designated key.</p>
<p id="p-0123" num="0122">The assistive music playing apparatus <b>1</b> may not necessarily be limited to the form of an electronic musical instrument, but may be applied to a karaoke apparatus, a game machine, a portable communication terminal such as a cellular phone and a player piano. Where the invention is applied to a portable (mobile) communication terminal, a terminal may be of a self-contained type containing entire functions or may be a part of the system to cooperate with a server computer so that the system as a whole realizes the functions of the present invention.</p>
<p id="p-0124" num="0123">When the present invention is embodied in the form of an electronic musical instrument, the form may not necessarily be of a keyboard instrument type, but may be of a string instrument type, a wind instrument type, a percussion instrument type, etc. The tone generator unit, the automatic accompaniment unit, and so forth may not necessarily be integrated in a single console of an electronic musical instrument, but may be individually separate ones and interconnected together by any communication means such as MIDI cables and various networks to configure the whole system.</p>
<p id="p-0125" num="0124">The system according to the invention may be realized by a general-purpose computer installing the computer programs to establish the processing and operation of the above mentioned embodiments. In such a situation, the computer programs can be provided to the users in the form of a computer readable medium such as a CD-ROM and a flexible disk.</p>
<p id="p-0126" num="0125">Although the invention has been described in connection with particular embodiments herein above, the invention is not limited to the described embodiments. It will be apparent to those having ordinary skill in the art that various modifications, improvements and combinations will be made without departing from the spirit of the invention.</p>
<p id="h-0007" num="0000">Input Note Conversion System</p>
<p id="p-0127" num="0126">The system according to the present invention is considered to be an assistive music playing system as viewed from an aspect of user's music playing as described above. But as viewed from an aspect of musical data processing, the system can be defined as an input note conversion system. Description will be now made herein below about an input note conversion system which is the above described assistive music playing system including improvements in a data processing aspect.</p>
<p id="p-0128" num="0127"><figref idref="DRAWINGS">FIG. 8</figref> is a block diagram showing a hardware configuration of an input note conversion system as an embodiment of the present invention. An example of the system utilizes an electronic musical instrument incorporating an automatic music performance function having a hardware configuration as illustrated in <figref idref="DRAWINGS">FIG. 8</figref> to constitute a musical information processing apparatus (input note conversion apparatus). The input note conversion system of <figref idref="DRAWINGS">FIG. 8</figref> is a kind of simplified form of the system of <figref idref="DRAWINGS">FIG. 1</figref>, and is essentially the same as <figref idref="DRAWINGS">FIG. 1</figref>. The structure of <figref idref="DRAWINGS">FIG. 8</figref> will now be described, although there may be some redundant explanation in view of <figref idref="DRAWINGS">FIG. 1</figref>. The input note conversion apparatus comprises a CPU (central processing unit) <b>31</b>, a ROM (read-only memory) <b>32</b>, a RAM (random access memory) <b>33</b>, an external storage device <b>34</b>, a music playing control unit <b>35</b>, a panel control unit <b>36</b>, a display circuit <b>37</b>, a tone generator unit <b>38</b>, a communication interface <b>39</b>, all of which are interconnected together by a bus <b>40</b>.</p>
<p id="p-0129" num="0128">The CPU <b>31</b> executes various musical information processing including input note conversion processing according to the predetermined software programs on the system clock pulses from the system timer (not shown). In the input note conversion processing, the CPU <b>31</b> functions as a sequencer module and a note conversion module. The ROM <b>32</b> stores various control programs for conducting musical information processing including the input note conversion processing, and the chord progression data and the note conversion table. The RAM <b>33</b> is used for work area for temporarily store various data and parameters necessary for the processing, for example, the data relating to input notes based on the user's music playing and output notes being produced.</p>
<p id="p-0130" num="0129">The external storage device <b>34</b> includes storage media such as a hard disk (HD), a compact disk read-only memory (CD-ROM), a flexible disk (FD), a magneto-optical (MO) disk, a digital versatile disk (DVD) and a semiconductor memory to store the input note conversion program, the chord progression data, note conversion tables, etc. for use in this system.</p>
<p id="p-0131" num="0130">The music playing control unit <b>35</b> is, for example, comprised of music playing controls and a music playing input detecting circuit, and processes the input note signals derived from the user's music playing manipulations of the music playing controls through the music playing input detecting circuit to introduce input note data into the system. The embodiment described below employs a keyboard for the music playing controls, and the music playing control unit <b>35</b> is referred to as “keyboard unit.” The keyboard may be divided into, for example, three sub-ranges by two split points (“lower split point” and “upper split point”), which are termed as a bass range, a chord rang and a melody range from the lower end to the upper end, respectively to use for a bass performance, a chord performance and a melody performance. The music playing controls may not necessarily be limited to keys of a keyboard, but may be any arbitrary type of keys, levers on buttons according to the type (string, wind, etc.) of the musical instrument which the user will play.</p>
<p id="p-0132" num="0131">The panel control unit <b>36</b> is, for example, comprised of panel controls and a control detecting circuit, and detects the contents of setting operations and controlling operations by means of the panel controls through the control detecting circuit to introduce control data into the system. The embodiment employs controls in the form of keys, levers, switches, buttons, etc., which are used to set operating conditions of the system and to input various necessary parameters or information for the input note conversion.</p>
<p id="p-0133" num="0132">The display circuit <b>37</b> controls the exhibited contents on the screen of the display device (CRT, LCD, etc.) <b>41</b> or the on/off states of various indicators (lamps) according to the instructions from the CPU <b>31</b> to give the user visual aids in manipulating the controls <b>35</b> and <b>36</b>.</p>
<p id="p-0134" num="0133">The tone generator <b>38</b> includes tone modules and effect-imparting DSPs to generate musical tone signals as defined by the note data as obtained by converting the inputted notes, the chord progression data and the voice (tone color) data. A sound system <b>42</b> which is connected to the tone generator <b>38</b> includes a digital-to-analog converter, an amplifier and a loudspeaker, and emits audible musical sounds in the air based on the tone signals. Namely, the tone generator <b>38</b> and the sound system <b>42</b> constitutes a musical tone creating unit which produces musical tones based on the output note data as processed by the input note conversion system, voice data and the chord progression data.</p>
<p id="p-0135" num="0134">To the communication interface <b>39</b> is connected an external apparatus <b>43</b> (e.g. a personal computer) having functions of processing musical data to receive various musical data including the chord progression data and control programs from the external apparatus <b>43</b>.</p>
<p id="p-0136" num="0135">The input note conversion system may not necessarily be limited to a dedicated musical data processing apparatus such as the above described electronic musical instrument which is particularly adapted for the musical data processing, but may be realized in the form of “a personal computer+application software” using a personal computer (PC) equipped with music playing input device such as a keyboard and with a tone generator.</p>
<p id="h-0008" num="0000">Input Note Conversion Processing #<b>1</b></p>
<p id="p-0137" num="0136">The input note conversion system according to an embodiment of the present invention is capable of converting notes inputted by musical playing to notes which will better fit the chords and the playing conditions (arpeggio and block chord) through a note conversion processing #<b>1</b> (first type input note conversion processing) called “key-on processing.” <figref idref="DRAWINGS">FIG. 9</figref> is a block diagram illustrating a module configuration of an input note conversion system according to an embodiment of the present invention to describe the outline of a note conversion function in a first fashion.</p>
<p id="p-0138" num="0137">The input note conversion procedure of the fashion #<b>1</b> will be described with reference to <figref idref="DRAWINGS">FIG. 9</figref>. In this input note conversion system, when the note conversion module NC receives chord information and input note information NTi from the keyboard module <b>35</b> and the sequencer module SQ, respectively, the note conversion module NC converts the note numbers (note pitches) in the input note information NTi to note numbers which will fit the chord type in the chord information using a note conversion table (TB of <figref idref="DRAWINGS">FIG. 10</figref>) which contains available note identifying information according to the simultaneously inputted notes with respect to each chord type, and outputs the converted note numbers as output note information NTo to the tone generator module TG. In such a circumstance, some of the note numbers for the output note information NTo are controlled in the direction of note pitch variation from the preceding input note information (NTio) to the current input note information (NTi) so that the note numbers in the output note information will not overlap with the currently sounding note. Further, the playing condition (way or manner) is detected from the input note information NTi, and the note numbers are checked and controlled so that the output note information of the note which overlaps with the note in the currently sounding note information will not be outputted to the tone generator TG in different methods according to the detected playing conditions.</p>
<p id="p-0139" num="0138">The keyboard module (music playing controls) <b>35</b> produces, as the input note information, note data (key-on note number) NTi in response to the on/off actuation of the keys in the keyboard. The sequencer module SQ produces chord data for the progression of a music piece based on the chord progression data read out from the ROM <b>32</b> or the external storage device <b>34</b>. The note data NTi from the keyboard and the chord data for the progression of a music piece are inputted to the note conversion module NC.</p>
<p id="p-0140" num="0139">The note conversion module NC conducts a key-on processing which converts the input note data NTi to output note data NTo based on the current chord information and the predetermined conversion rule, so that the output note data NTo obtained by this key-on processing is outputted to the tone generator modulo TG (tone generator <b>38</b>).</p>
<p id="p-0141" num="0140">In the key-on processing, the note conversion module NC also acquires from the system timer ST key-on time data representing the time of the key-on of the note data NTi with reference to the system clock in the system timer ST. This time data acquisition is necessary for the judgment about whether the block chord playing or the arpeggio chord playing in the chord range of the keyboard as explained herein later, in which the current key-on time is within a predetermined time length (e.g. 80 ms) from the preceding detected key-on time is deemed to be a concurrent depression for a block chord, and when “not within” is deemed to be a successive depression for an arpeggio chord.</p>
<p id="h-0009" num="0000">(Note Conversion Table)</p>
<p id="p-0142" num="0141">The input note conversion system according to an embodiment of the present invention uses note conversion tables as a method of realizing a desirable note conversion in the key-on processing. <figref idref="DRAWINGS">FIG. 10</figref> illustrates an example of the note conversion table TB to be used in the note conversion in the embodiment.</p>
<p id="p-0143" num="0142">The note conversion table TB indicates the priority orders of the note identifying data to identify the note in accordance with the chord rule with respect to the respective chord types, so that numbers of notes to be generated can be varied according to the number of concurrently depressed keys. In <figref idref="DRAWINGS">FIG. 10</figref>, the note identifying data is defined by the distance from the chord root (root note of the chord). The table shows priority orders (“1” through “4” in the table) of the respective notes expressed in distance depending on the number of simultaneously depressed keys with respect to each of the chord types (Major, M7, M6 - - - ) listed in the leftmost column, and tells the note names (=numbers) of the available notes in connection with the simultaneously depressed keys.</p>
<p id="p-0144" num="0143">The distances from the chord root are expressed by “0” through “11” in semitone as shown in the top row of the table. For example, for the C major chord whose root note is “C,” the note names “C” through “B” correspond to “0” through “11,” respectively. The numeral “1” or above indicates the note of that column can be used for the note conversion up to the number of simultaneously depressed keys. The numeral “0” indicates that the note of that column cannot be used.</p>
<p id="p-0145" num="0144">More particularly, the numeral “1” and above indicate the order of priority in use for note conversion within the number of simultaneously depressed keys. The greatest numeral in each row (e.g. “3” in the row of C major) shows the maximum number of concurrently available notes. For example, if the number of simultaneously depressed keys is “2,” the notes assigned with “1” and “2” can be used it the note conversion. Further for example, when the note name F#5 is inputted as the note data NTi on the C major chord where the number of simultaneously depressed key is one, the note “E” (distance=“4”) assigned with “1” is picked up and the erroneously depressed key of “F#5” is converted to “E5.” But where the number of simultaneously depressed keys is two, the closer of “1” and “2” to the note “F#” (distance=“6”) is “G” (distance=“7”) having the priority order of “2,” and therefore the “G” is employed, and consequently the note “F#5” is converted to the note “G5.”</p>
<p id="p-0146" num="0145">In the case where no chord information is inputted or the setting to neglect the chord information is made, i.e. where no chord information is to be used in connection with the note conversion, the chord type is instructed to be “Cancel.” In the row of “Cancel,” all the notes (i.e. distances) are assigned with numeral “1,” and this means that when the “Cancel” is instructed, any input note data NTi per se will be outputted as data NTo, and no note conversion takes place.</p>
<p id="p-0147" num="0146">There may be prepared different note conversion tables in accordance with the key ranges and the white/black key distinction (in terms of C major). For example, where the keyboard is divided into three sub-ranges: a bass key range, a chord key range and a melody key range, six tables are prepared (6=3 key ranges ×2 key distinctions). By preparing a plurality of different tables, different conversion rules can be applied to establish more musically sophisticated music playing.</p>
<p id="h-0010" num="0000">(Prevention of the Same or a Close Note Pitches)</p>
<p id="p-0148" num="0147">The key-on processing according to an embodiment of the present invention employs a solution for the troubles in the case where the converted note becomes the same note as or the close note to the currently sounding note thereby causing overlap of notes. One way of avoiding overlaps is to employ different methods in note conversion depending on the key ranges (bass, chord and melody ranges) and the playing conditions (arpeggio and block). For example, when the converted note is the same as or close to the currently sounding note, there can be two ways of solution. Namely,
<ul id="ul0001" list-style="none">
    <li id="ul0001-0001" num="0148">1) No note is generated for the converted note,</li>
    <li id="ul0001-0002" num="0149">2) Search for next candidate (utilizing note conversion tables).</li>
</ul>
</p>
<p id="p-0149" num="0150">Which way to take can be predetermined with respect to the key ranges and the playing conditions. For example, in the bass range, no note is generated for the converted note. In the chord range and for the arpeggio playing, a next candidate will be searched for. In the chord range and for the block chord playing, no note will be generated for the converted note. In the melody range, a next candidate will be searched for.</p>
<p id="p-0150" num="0151">In detecting overlapping notes (including both same and close pitches), it is musically preferable to set the detection allowance (i.e. width, the interval limit) of note pitch to judge the overlaps wider for lower notes, and therefore it is preferable to set the interval limits differently for the note pitch sub-ranges (bass, chord, melody). Further, the interval limits may be set differently between the stem notes (white keys in the scale of C major) and the accidental notes (black keys in the scale of C major) to obtain different conversion characteristics between the stem notes and the accidental notes. For example, the input of an accidental note (sharp or flat note) may well probably be an intentional input as a tension note rather than an erroneous depression of the key. For example, the interval limit are set to be “0” for the note conversion factors to permit every note of the depressed key is not converted but is generated per se.</p>
<p id="p-0151" num="0152">When the keys are depressed in the chord key range (middle key range), the time difference between the two successive depressions of keys will be used in judging whether the inputted key depressions are for the arpeggio performance or for the block chord performance. For example, when the time difference of the current key-on time with respect to the preceding key-on time falls within a predetermined amount, such key-on events are considered to be for a block chord, and when the time difference of the current key-on time with respect to the preceding key-on time exceeds the predetermined amount, such key-on events are considered to be for an arpeggio performance, and the information is recorded accordingly. The preceding key-on time as the comparison reference is the time of the note event of the actually sounding note or the time of the note event of the note to be sounded. When a new note generation is done or is to be done, the preceding key-on time is renewed. The predetermined amount may be set by the user as a constant value, and may be varied in accordance with the tempo of the music being played.</p>
<p id="p-0152" num="0153">In searching for the next note candidate to avoid overlap, it is difficult to anticipate whether the new selected note will be above the preceding key depression or below. Namely, where the phrase is ascending and the converted note happens to come below the preceding note, or vice versa, there may arise an unnaturalness. In an embodiment, therefore, whether the search for the next candidate is to be made above or below the converted note is determined based on the comparison with the note number (NTio) of the preceding key depression. If the current key-on note number NTi is lower than the preceding key-on note number, the search will be conducted downward, and if higher, the search will be conducted upward. If the current key-on note number NTi is the same as the preceding key-on note number, the search direction may be maintained or may be determined either upward or downward. By determining the searching direction in the method as explained above, there will not occur a reversal in the note movement after the note conversion as compared with the actual key depressions in an ascending phrase or a descending phrase.</p>
<p id="h-0011" num="0000">(Key-On Event Processing)</p>
<p id="p-0153" num="0154"><figref idref="DRAWINGS">FIGS. 11 and 12</figref>, in combination, illustrate a flow chart of a key-on event processing according to an embodiment of the present invention. In these Figures, rectangular blocks and hexagonal blocks tagged with symbols S<b>1</b> through S<b>10</b> represent process steps as indicated by the attached legends, respectively, and solid line arrows show flows between the steps. Corner-rounded rectangular blocks represent information (data contents) and broken line arrows indicate the use of the respective information. This embodiment of the processing utilizes note conversion tables selectively from among a plurality of tables prepared.</p>
<p id="p-0154" num="0155">First, a step S<b>1</b> judges whether each of the inputted key-on note numbers NTi is of a white key or of a black key as viewed in the normalized C Major key (or a stem note or an accidental note as viewed in the source key). A step S<b>2</b> judges the key range and renew (overwrite) the key range information, and also renew the number of simultaneously depressed keys in the key range and the interval limit value. The interval limit value is set to be “4” semitones in the bass key range, “1” semitone in the chord key range, and “0” (no consideration) for the melody key range. When the chord type is designated as “Cancel,” the interval limit value is always “0.”</p>
<p id="p-0155" num="0156">Next, a step S<b>3</b> determines a conversion table to be used for the note conversion based on the key range and the category, and then a step S<b>4</b> derives converted note numbers NTc based on the determined conversion table TB, the chord information and the number of the simultaneously depressed keys. A step S<b>5</b> then check overlapping in the converted note numbers NTc with reference to the interval limit value and current note information.</p>
<p id="p-0156" num="0157">When the step S<b>5</b> judges there is no overlap in the note numbers, the process moves forward to a step S<b>6</b> to substitute the converted note number NTc to the output note number NTo and conducts the tone generation processing. After the tone generation processing, the converted note number NTc is substituted for the current note information (<figref idref="DRAWINGS">FIG. 11</figref>), the preceding depressed keys NTio is renewed by the output note number NTo (<figref idref="DRAWINGS">FIG. 12</figref>), the preceding key-on time is renewed by the key-on time of the output note number NTo (same as the key-on time of the key-on note number NTi) (<figref idref="DRAWINGS">FIG. 12</figref>), when the key range of the note number NTc as processed for tone generation is the chord key range. That is, every time the tone generation processing is conducted, the current note information (note number) is renewed, and in the case of the chord key range, the preceding key-on time is also renewed.</p>
<p id="p-0157" num="0158">On the other hand, when there is an overlap in the note numbers, the process moves forward from the step S<b>5</b> to a step S<b>7</b> (<figref idref="DRAWINGS">FIG. 11</figref>) to conduct the following overlap avoid processing (<figref idref="DRAWINGS">FIG. 12</figref>). In the overlap avoid processing, the step S<b>7</b> recognizes the key range (whether melody range or chord range) and the playing condition (whether arpeggio or block). The process of recognizing the key range and the playing condition (S<b>7</b>) first recognizes the key range with reference to the key range information, and in the case of the chord range, judges whether the arpeggio playing or the block chord playing from the time difference between the current key-on time and the preceding key-on time, and determines whether to generate the note NTc which overlaps with the preceding note or to search for the next candidate note number in accordance with the recognized playing condition in the case of the chord key range or other key range information (bass range or melody range).</p>
<p id="p-0158" num="0159">When the step S<b>7</b> recognizes that the input note events are in the bass range or a block chord in the chord range, the process flow goes to a step S<b>8</b> to generate no tones for the note number NTc. The block chord is defined to be the condition (state) where a plurality of keys are depressed simultaneously or substantially simultaneously. Where the chord type is “cancel,” it may be considered that there is no overlap. Even in the case where the step S<b>8</b> determines to generate no tones, the preceding depressed keys NTio is renewed by the current NTio. In other word, whether the tone is to be generated (S<b>6</b> in <figref idref="DRAWINGS">FIG. 11</figref>) or not to be generated (S<b>8</b> in <figref idref="DRAWINGS">FIG. 12</figref>), the data of the preceding depressed keys NTio will be renewed.</p>
<p id="p-0159" num="0160">On the other hand, when the step S<b>7</b> recognizes that the key events are in the melody key range or of the arpeggio playing in the chord range, process flow proceeds to a step S<b>9</b> to search upward/downward for the next note candidate. The arpeggio playing is defined, for example, herein, as the case where the current note event has occurred more than 80 milliseconds apart from the preceding note event. In order to search for the next candidate, the current key-on note number NTi is compared with the preceding depressed key NTio to determine whether to search upward or downward in order to maintain the note pitch travel direction.</p>
<p id="p-0160" num="0161">Next, a step S<b>11</b> renews the key-on note number NTi by incrementing or decrementing the key-on note number NTi by “+1” or “−1” to obtain the renewed key-on note number NTi′, and further convert the renewed key-on note number NTi′ to derive a new converted note number NTc at the step S<b>4</b> (<figref idref="DRAWINGS">FIG. 11</figref>).</p>
<p id="p-0161" num="0162">The new converted note number NTc is then subjected to the overlap check at the step S<b>5</b> (<figref idref="DRAWINGS">FIG. 11</figref>). These steps of the upward/downward search (S<b>9</b>), the key-on note number renewal (S<b>10</b>), the note conversion (S<b>4</b>) and the overlap check (S<b>5</b>) are repeated in a loop until a note number which does not overlap with another existing note number is found. When a non-overlapping note number is found, the process goes forward to the step S<b>6</b> for the tone generation processing.</p>
<p id="p-0162" num="0163">The above described key-on event processing will be specifically explained in detail using the following two examples.</p>
<heading id="h-0012" level="1">EXAMPLE 1</heading>
<heading id="h-0013" level="1">The case where the chord is “C major” and the keys are depressed in the melody key range:</heading>
<p id="p-0163" num="0000">
<ul id="ul0002" list-style="none">
    <li id="ul0002-0001" num="0164">1) It is assumed that the user plays (i.e. depresses) “A5” note in the melody key range initially and that there is no other notes are played. The “A5” note is the only one input note at this moment.</li>
    <li id="ul0002-0002" num="0165">1a) The row of “Major” in the note conversion table of <figref idref="DRAWINGS">FIG. 10</figref> is referred to (looked up) to find the priority order of “1.” The note having this priority order “1” is “E” note. Thus, the input note “A5” (NTc) is converted to note “E5” (NTc). The note “E5” is immediately outputted as the output note information NTo, which is now the current note information, and the played input note “A5” is the preceding depressed key NTio (through S<b>4</b>, S<b>5</b> and S<b>6</b>).</li>
    <li id="ul0002-0003" num="0166">2) It is then assumed that the user plays the second note “F5” in the melody key range, while the “E5” note is being generated (for “A5” depression).</li>
    <li id="ul0002-0004" num="0167">2a) As the “F5” note is the second note for simultaneous generation, the row of “Major” in the table gives two priorities “1” and “2” which respectively indicate the “E” note and the “G” note for the input note NTi of “F5,” and the step S<b>4</b> selects the “E” note which is the closer of the two to the input “F” and outputs the note number (i.e. note name) of “E5” as a candidate of the converted note number NTc.</li>
    <li id="ul0002-0005" num="0168">2b) As the “E5” note is being generated, the step S<b>5</b> (<figref idref="DRAWINGS">FIG. 11</figref>) checks overlapping to find the overlap of note numbers.</li>
    <li id="ul0002-0006" num="0169">2c) As the key range is the “melody range,” the step S<b>7</b> (<figref idref="DRAWINGS">FIG. 12</figref>) recognizes the key range to direct the process flow to the step S<b>9</b> for searching the next candidate. Where the preceding depressed key NTio is “A5” which is higher than the depressed second note “F5” (F5&lt;A5), the step S<b>10</b> subtracts “1” from the key-on note number NTi to produce an “E5” note as a converted key-on note number NTi′. The step S<b>4</b> (<figref idref="DRAWINGS">FIG. 11</figref>) refers to the note conversion table TB (<figref idref="DRAWINGS">FIG. 10</figref>) with the converted note number of “E5.”</li>
    <li id="ul0002-0007" num="0170">2d) Although the note conversion table TB (<figref idref="DRAWINGS">FIG. 10</figref>) affirms the “E5” note with the first priority, the step S<b>5</b> checks the overlap of the notes, and the process flow passes through the steps S<b>7</b> and S<b>9</b>, and the step S<b>10</b> again subtracts “1” from the converted key-on note number NTi′. These process steps are repeated in loop as explained in <b>2</b><i>a</i>) through <b>2</b><i>c</i>) above.</li>
    <li id="ul0002-0008" num="0171">2e) When the converted note number NTi′ becomes “B4,” the table TB shows “G” note with the priority “2” near the converted note number “B4.” Thus, the “G4” note is selected as a candidate converted note number NTc. This “G4” note does not overlap with another note, and therefore is outputted as NTo for the tone generation processing.</li>
    <li id="ul0002-0009" num="0172">3) It is further assumed that the player releases the first key “A5,” keeps on depressing the second key “F5” (the note being generated is “G5”) and depresses the third key “B5” anew.</li>
    <li id="ul0002-0010" num="0173">3a) As two keys are being depressed (two input notes), the table TB presents “E” and “G” as available notes, among which the note “G” which is closer to “B” is employed, and the note “G5” is outputted as a converted note number NTc at the step S<b>4</b>.</li>
    <li id="ul0002-0011" num="0174">3b) As the note which is being generated at this moment is “G4,” the step S<b>5</b> does not find overlap of notes, and the note “G5” is outputted as an output note NTo for the tone generation at the step S<b>6</b>.</li>
</ul>
</p>
<heading id="h-0014" level="1">EXAMPLE 2</heading>
<p id="p-0164" num="0175">The case where the chord “GM7” (G major seventh) is played in the chord key range:
<ul id="ul0003" list-style="none">
    <li id="ul0003-0001" num="0176">1) It is assumed that the user plays (i.e. depresses) “F3” key (NTi) in the chord key range, while there is no other keys being depressed and there is no preceding key-on time stored.</li>
    <li id="ul0003-0002" num="0177">1a) For this single key depression, the table TB shows in the row of “M7” the first priority “1” at the note distance “11” (this note is “B” for the root of “C,” but “F#” for the root of “G”) and then the note “F#3” is outputted as a converted note NTc and in turn as an output note NTo via the steps S<b>4</b>-S<b>6</b>. The current note information is NTo, i.e. “F#3.”</li>
    <li id="ul0003-0003" num="0178">1b) After the note “F#3” is generated, the key-on time of the actually depressed key “F3” is stored as the preceding key-on time, and also “F3” is stored as the preceding depressed key.</li>
    <li id="ul0003-0004" num="0179">2) It is then assumed that the user further depress the key “E3” in the chord key range almost simultaneously (i.e. with a time difference less than 80 ms) with the key “F3.”</li>
    <li id="ul0003-0005" num="0180">2a) The first and the second priority “1” and “2” in the row of “M7” shows the note distances “11” and “4.” As the played key “E3” corresponds to the note distance “9” for the root of “G,” the selected note from the table TB will be the note distance “11” and then the note “F#3” (i.e. the note distance “11” for the root of “G”) is outputted as a candidate of a converted note NTc at the step S<b>4</b>.</li>
    <li id="ul0003-0006" num="0181">2b) As the note “F#3” is now being generated, the step S<b>5</b> judges that there is an overlap of notes, and next the step S<b>7</b> recognizes a block chord (the playing condition) in the chord key range (the key range). The step S<b>8</b> decides to generate no tones but renew the preceding depressed key NTio by “E3.” (The preceding key-on time is not renewed.)</li>
    <li id="ul0003-0007" num="0182">3) While the “F3” key is being depressed, the user plays the “C3” key in the chord key range a little (e.g. 100 ms) after the “F3” depression.</li>
    <li id="ul0003-0008" num="0183">3a) The played key “C3” corresponds to the note distance “5” for the root of “G” and among the two priorities “1” and “2” in the row of “M7” the table TB presents two available notes at the note distances “11” and “4.” The closer of the two to the note distance “5” is “4,” and then the note “B2” (i.e. the note distance “4” for the root of “G”) is outputted as a candidate of a converted note NTc at the step S<b>4</b>.</li>
    <li id="ul0003-0009" num="0184">3b) As the note “B2” does not overlap with the preceding note under generation, the step S<b>5</b> directs the process flow to the step S<b>6</b> for the tone generation processing, and this “B2” is added to the current note information, and the preceding key-on time is renewed by the key-on time of the key “C3,” and the preceding depressed key NTio is renewed by the depressed key “C3.”</li>
    <li id="ul0003-0010" num="0185">4) While the “F3” key and the “C3” key are both kept depressed, user further plays the “G3” key in the chord key range a little (e.g. 100 ms) after the “C3” depression.</li>
    <li id="ul0003-0011" num="0186">4a) The row of “M7” in the table TB presents three priorities “11,” “4” and “7” as the available note distances. As the now-played key “G3” corresponds to the note distance “0” for the root of “G,” the note distance “11” is selected as being nearest to the note distance “0” and accordingly the note “F#3” is outputted as a candidate NTc at the step S<b>4</b>.</li>
    <li id="ul0003-0012" num="0187">4b) As the note “F#3” is now being generated as the first played note, and therefore the candidate output of “F#3” overlaps with the note under generation, and the step S<b>5</b> directs the process flow to the step S<b>7</b> for the recognition of the arpeggio playing in the chord key range. The step S<b>9</b> conducts search upward or downward.</li>
    <li id="ul0003-0013" num="0188">4c) As the current played key “G3” is higher than the preceding depressed key “C3” (NTio), the key-on number NTi will be successively renewed by “+1” every time the process flow loops the steps through S<b>9</b>, S<b>10</b>, S<b>4</b> and S<b>5</b> until the table TB presents a converted note number NTc which does not overlap with another generated note.</li>
    <li id="ul0003-0014" num="0189">4d) When the converted note number NTi′ becomes “A3” which is the note distance of “2,” the note distance “4” becomes closest to “2,” and accordingly the note “B3” is selected as the candidate note NTc, and the step S<b>5</b> judges there is no overlap and directs the process flow to the step S<b>6</b> for the tone generation. The output note number NTo is now “B3” and is supplied to the current note information for renewal.
<br/>
(Modifications of Input Note Conversion Processing #<b>1</b>)
</li>
</ul>
</p>
<p id="p-0165" num="0190">While preferred embodiments of the input note conversion processing #<b>1</b> as conducted in the input note conversion system of the present invention have been described with reference to the associated drawings, various modifications will be possible without departing from the spirit of the present invention so that the present invention can be practiced in various forms. For example, the note conversion table may be of a type having plural sub-tables to be used in various combinations, and also may be subjectable to edition, and may comprise many kinds of sub-tables. In the described embodiments, the candidate note numbers are searched with consideration to the number of simultaneously inputted notes (keys) when referring to the tables, but the table may be prepared individually for the respective number of simultaneously depressed keys.</p>
<p id="p-0166" num="0191">The distance at which plural simultaneous note generation is prohibited (allowance for overlap detection) may be arbitrarily set by the user, or may be factory-set as a default setting (fixed), or may be commonly provided through the entire key range. For the keys in the same key range, the prohibition distance may be set different between white keys and black keys (stem note keys and accidental note keys).</p>
<p id="p-0167" num="0192">The distance at which plural note generation should be avoided may be determined based on the low interval limit (the frequency or note pitch below which two tones of close frequencies sound mumbling with their harmonics interfering with each other). For example, in the case of two notes separated by a major second interval, the low interval limit is applied below the notes “F3” (175 Hz) and “Eb3” (156 HZ). In the case of two notes separated by a minor third interval, the low interval limit is applied below the notes “Eb3” (156 Hz) and “C3” (131 Hz). In the case of major seventh interval separation, the low interval limit is applied below the notes “E3” (165 Hz) and “F2” (87 Hz).</p>
<p id="p-0168" num="0193">The methods for avoiding overlap (including coincidence and close vicinity) of converted notes with the currently sounding notes are preferably different for different playing conditions for the note conversion system of the present invention. The different methods (solutions) may be, for example, to suppress tone generation, to generate notes in another octave, to replace by an adjacent chord note, and to utilize look-up tables. In the above described embodiments, the differentiation by the playing conditions is employed only in the chord key range, in which the method allotted to the arpeggio playing is to utilize tables, while the method allotted to the block chord playing is to suppress tone generation. However, in other key ranges (the melody range and the bass range) also, the detection process of music playing conditions can be employed and appropriate overlap avoiding methods can be allotted to different playing conditions. For example, in the melody key range, the method of utilizing look-up tables is allotted to the arpeggio playing, whereas the method of generating notes in another octave is allotted to the block chord playing. In the bass key range, the method of utilizing look-up tables is allotted to the arpeggio playing, whereas the method of replacing by an adjacent chord note is allotted to the block chord playing. The combinations of a playing condition and a method for searching for a candidate note are not limited to the above examples. Further, the kinds of playing conditions may be anything else than the above examples. For example, a legato performance may be so recognized when the preceding note (key) is still being inputted (depressed), that is, while the preceding key-on event is still continuing, and the next note (key) is then, inputted (depressed) some amount of time (e.g. more than 0.5 s) after the preceding key-on time. When the chord type is designated as “Cancel,” no overlap check takes place before tone generation.</p>
<p id="p-0169" num="0194">The key range division may not necessarily be as described above, but may be otherwise such as dividing into two ranges: a melody key range and a chord key range.</p>
<p id="p-0170" num="0195">The time differences for recognizing the playing conditions (styles) may be arbitrarily set by the user, or may be factory-set at default values. In place of the milli-second counting, time length may be counted on the basis of music progressing tempo (e.g. 16th note duration and 8th note duration).</p>
<p id="p-0171" num="0196">The chord information to be applied to a piece of music to be played is not limited to one set (series) of chord progression, but may be provided in plural sets. The chord information may be previously stored in the apparatus as explained above, and also may be inputted real time.</p>
<p id="p-0172" num="0197">With respect to the chord information, the processing system may have a function of recognizing chord functions and may chose different methods of note conversion (table utilization or else) according to the chord functions. Then the note conversion to the notes which will meet the chord functions will be possible. Further, at the process step of overlap avoidance after the note conversion, the chord functions may be taken into consideration. In order to recognize the chord functions, the tonality key information and the chord degree information of the respective chords are necessary. The tonality key information may be provided, for example, through the user's setting with the panel controls, or by extracting from the source data (file) containing chord information. The chord degree information may be obtained through calculation based on the chord root and the tonality key given by any means, or by attaching the chord degrees in the chord information as provided.</p>
<p id="p-0173" num="0198">Examples will be as follows:
<ul id="ul0004" list-style="none">
    <li id="ul0004-0001" num="0199">(a1) In the case of Am chord in C major key: As the Am chord is the sixth degree chord (i.e. VIm) and has a function of tonic chord, an inputted note is converted to a “C” note. (The rule is: In the case of a chord having the tonic function, an inputted note is converted to the root note of the prevailing key, i.e. the key note.)</li>
    <li id="ul0004-0002" num="0200">(b1) In the case of G7 chord in C major key: As the G7 chord is the fifth degree chord (i.e. V7) and has a function of a dominant chord, an inputted note is converted to a “G” note or a “B” note. (The rule is: In the case of a chord having the dominant function, an inputted note is converted to the root or third note of the chord.)</li>
    <li id="ul0004-0003" num="0201">(c1) In the case of Dm chord in C major key: As the Dm chord is the second degree chord (i.e. IIm) and has a function of a subdominant chord, an inputted note is converted to a “D” note. (The rule is: In the case of a chord having the subdominant function, an inputted note is converted to the root note of the chord.)</li>
</ul>
</p>
<p id="p-0174" num="0202">Examples of above cited chords but in another keys will be as follows:
<ul id="ul0005" list-style="none">
    <li id="ul0005-0001" num="0203">(a2) In the case of Am chord in A minor key: As the Am chord is the first degree chord (Im) and has a function of tonic chord, an inputted note is converted to an “A” note.</li>
    <li id="ul0005-0002" num="0204">(b2) In the case of G7 chord in G major key: As the G7 chord is the first degree chord (i.e. I7) and has a function of tonic chord, an inputted note is converted to a “G” note.</li>
    <li id="ul0005-0003" num="0205">(c2) In the case of Dm chord in F major key: As the Dm chord is the sixth degree chord (i.e. VIm) and has a function of tonic chord, an inputted note is converted to an “F” note.</li>
</ul>
</p>
<p id="p-0175" num="0206">Examples of E major chord in various keys will be as follows:
<ul id="ul0006" list-style="none">
    <li id="ul0006-0001" num="0207">(a3) In the case of E chord in C major key: As the E chord is the third degree chord (i.e. III) and has a function of tonic chord, an inputted note is converted to a “C” note.</li>
    <li id="ul0006-0002" num="0208">(b3) In the case of E chord in A major key: As the E chord is the fifth degree chord (i.e. V) and has a function of dominant chord, an inputted note is converted to an “E” note or a “G#” note.</li>
    <li id="ul0006-0003" num="0209">(c3) In the case of E chord in B major key: As the E chord is the fourth degree chord (i.e. IV) and has a function of subdominant chord, an inputted note is converted to an “E” note.</li>
</ul>
</p>
<p id="p-0176" num="0210">Where the chord function is to be considered in controlling the process of note overlap avoidance, an example of how to determine the converted note is as follows:</p>
<p id="p-0177" num="0211">When a “G4” note is now being generated for the C major chord as provided in the chord progression under the G major key as designated by the user's setting and a first candidate of converted note is also “G4,” the C major chord is the fourth degree chord (IV) and has a function of subdominant chord, an inputted note is converted to a “C” note as the root of the chord, and thus the note “C4” will be generated in place of the first candidate note “G4.”</p>
<p id="h-0015" num="0000">Input Note Conversion Processing #<b>2</b> and #<b>3</b></p>
<p id="p-0178" num="0212">In an input note conversion system according to another embodiment of the present invention, the notes inputted by musical playing are converted to notes which will better fit the chords and the voices (timbres) for the music piece to be performed through a note conversion processing #<b>2</b> and through a note conversion processing #<b>3</b> (second type and third type input note conversion processing) called “key-on processing #<b>2</b> and #<b>3</b>.” <figref idref="DRAWINGS">FIG. 13</figref> is a block diagram illustrating a module configuration of an input note conversion system according to an embodiment of the present invention to describe the outline of a note conversion function in a second and a third fashion.</p>
<p id="p-0179" num="0213">According to the input note conversion processing #<b>2</b> in this input note conversion system, as illustrated in <figref idref="DRAWINGS">FIG. 13</figref>, the input notes NTi as inputted from the keyboard <b>35</b> according to the user's actual music playing are converted by the note conversion module NC to output notes NTo which will fit the chord information supplied from the sequencer SQ, in which the key depression state (note input conditions) MC of the keyboard <b>35</b> by the user controls whether an input note is converted to a basic note or to a non-basic note. In a specific embodiment, the note conversion tables which contain note employment (deciding) factors for converting notes in compliance with the respective chord types are prepared in two types, a first type table TBa, TBb, . . . for converting to basic notes, and a second type table TBt<b>1</b>, . . . , TBs for converting to non-basic notes or to either of basic notes and non-basic notes, in which the type to be used is determined according to the note input conditions so that non-basic notes may be employed as converted notes depending on the note input conditions.</p>
<p id="p-0180" num="0214">According to the input note conversion processing #<b>3</b> in this input note conversion system, note conversion condition information is stored for each voices (timbres), and there are prepared a plurality of note conversion tables indicating note employment factors for available converted notes concerning respective chord types. Through the note conversion in this system, briefly speaking, the note conversion module NC converts the input notes NTi as inputted by the user's playing on the keyboard <b>35</b> to notes NTo which fit the chord information from the sequencer SQ using the note conversion tables, in which the voices (timbres) as designated by the voice information are taken into consideration. For example, the note conversion tables (NT, TT) are selectively utilized according to the designated voices VS, and the note numbers to be outputted as converted notes NTo using the tables are controlled to fit the designated voices VS based on the note conversion conditions (SM through RC) relating to such designated voices VS.</p>
<p id="p-0181" num="0215">The embodiment will be described in more detail hereunder. Referring to <figref idref="DRAWINGS">FIG. 13</figref>, the keyboard module (music playing controls) <b>35</b> outputs input key-on/key-off data (key-on note numbers) NTi according to successive on/off manipulations of the keys on the keyboard <b>35</b> along with the progression of music playing, thus providing input note information. The sequencer module SQ provides chord information constituting the chord progression for the music piece to be played based on the chord progression data as read out from the ROM <b>32</b> or the external storage device <b>34</b>. The note numbers NTi from the keyboard <b>35</b> and the chord information from the sequencer SQ are inputted to the note conversion module NC for the note conversion processing.</p>
<p id="p-0182" num="0216">The note conversion module NC includes note conversion tables (<figref idref="DRAWINGS">FIGS. 15</figref>, <b>16</b><i>a</i>, <b>16</b><i>b </i>and <b>16</b><i>c</i>) listing note employment factors to be used corresponding to the respective chord types, and upon receipt of the chord information from the sequencer module SQ and the key-on note number NTi from the keyboard module <b>35</b>, it looks up in the prescribed note conversion table which is selected according to the designated voice (timbre) VS and converts the inputted key-on note number NTi to an output note number NTo based on the chord information and the predetermined conversion rule, to finally outputs the note number of the output note information NTo (key-on processing #<b>2</b>).</p>
<p id="p-0183" num="0217">In the key-on processing #<b>2</b>, the note numbers of the input note information NTi are converted to the note numbers which will fit the voice VS and the chord types to be outputted as the output note information NTo, in which the note conversion module NC is also controlled so that the converted note can be a note other than the basic note like a chord constituent note depending on the key depression state MC. The output note information NTo created through the key-on processing #<b>2</b> is outputted to the tone generator module <b>38</b> to be finally emitted as audible sounds by the sound system <b>42</b> (<figref idref="DRAWINGS">FIG. 8</figref>).</p>
<p id="h-0016" num="0000">(Conversion Conditions for Voices)</p>
<p id="p-0184" num="0218">In the input note conversion system according to an embodiment of the present invention, the key-on processing #<b>2</b> conducts the desired note conversion using conversion information indicating note conversion conditions for the respective voices (timbres) to be designated. <figref idref="DRAWINGS">FIG. 14</figref> shows an example of the conversion information for voices.</p>
<p id="p-0185" num="0219">The conversion information for voices is the information to indicate the conditions for the note conversion with respect to each of the voices available. Designation of the voice can be made by the user's voice selecting operation on the panel controls <b>36</b>, or by extracting voice information (program change message) from the music data stored in the ROM <b>32</b> or the external storage device <b>34</b>. The conversion information for voices contains, as shown in <figref idref="DRAWINGS">FIG. 14</figref>, for example, conversion conditions or factors with respect to various parameter items like the maximum number of simultaneously available tones SM (representing the maximum number of musical tones to be generated simultaneously), the highest note number NH and the lowest note number NL (representing the upper and the lower limit of the note range for the output note information NTo), the playing condition RC (representing conditions peculiarly dependent on the voices according to the manners of playing so-named instruments), and the normal table NT and the tension table TT (representing the tables to be looked up among the normal note conversion tables TBa, TBb, . . . and the tension note conversion tables TBt<b>1</b>, TBt<b>2</b>, . . . ) with respect to various instrumental voices VS (including guitar, soprano recorder, violin, piano, etc.).</p>
<p id="p-0186" num="0220">The maximum number of simultaneously available tones SM is used to limit, within this value, the number of tones to be generated simultaneously by the musical tone producing section <b>38</b> and <b>42</b> in connection with the number of simultaneously depressed keys on the keyboard <b>35</b>, and the highest and the lowest note number NH and NL are used to limit the note numbers for the tones to be generated within the note range represented by these note numbers NH through NL depending on the designated voice.</p>
<p id="p-0187" num="0221">The playing condition RC is information representing conditions according to the manners of playing so-named instruments as identified by the voice names. For example, in the case of a string instrument, there is peculiar conditions that all of the simultaneously generated notes should be assigned to individual strings in one note to one string correspondence and that all the frets to be pressed should be reached by the fingers of one hand (usually, left hand), and in the case of a piano, there is also peculiar conditions that all of the simultaneously generated notes should be of the keys reached by the right and the left hand and also that the finger travelling for successive keys are actually possible by the right and the left hand. The table shown in <figref idref="DRAWINGS">FIG. 14</figref> says in the guitar voice that all the notes (maximum is “6,” i.e. SM=6) to be generated should be shared among six strings individually without an overlap.</p>
<p id="p-0188" num="0222">In the input note conversion system according to an embodiment of the present invention, the key-on processing #<b>2</b> uses note conversion tables to realize the desired note conversion, in which the example of <figref idref="DRAWINGS">FIG. 14</figref> uses two kinds of note conversion tables called normal note conversion tables NT and tension note conversion tables TT to obtain converted note numbers of the basic notes and the tension notes corresponding to the key depression state (which keys are played). For this purpose, there are prepared a plurality of normal conversion tables TBa, TBb, . . . and a plurality of tension conversion tables TBt<b>1</b>, TBt<b>2</b>, . . . , among which a particular normal conversion table or a particular tension conversion table is selectively designated according to the voice designated for the playing output. The normal table information NT and the tension table information TT are information to designate the normal table and the tension table to be set (used) according to the voice to be used, and for example, designate tables in terms of table numbers.</p>
<p id="h-0017" num="0000">(Note Conversion Table)</p>
<p id="p-0189" num="0223">Some examples of the note conversion tables are shown in <figref idref="DRAWINGS">FIGS. 15</figref>, <b>16</b><i>a</i>, <b>16</b><i>b </i>and <b>16</b><i>c</i>. According to the conversion parameter condition table of <figref idref="DRAWINGS">FIG. 14</figref>, a guitar voice of this example in the first column of the voice kinds designates a normal conversion table TBa of <figref idref="DRAWINGS">FIG. 15</figref> with respect to the parameter of normal table NT for the note conversion of basic notes and designates a tension conversion table TBt<b>1</b> of <figref idref="DRAWINGS">FIG. 16</figref><i>b </i>with respect to the parameter of tension table TT for the note conversion of tension imparting note. A recorder (soprano) voice in the second column of the voice kinds designates a normal conversion table TBb of <figref idref="DRAWINGS">FIG. 16</figref><i>a </i>with respect to the parameter of normal table NT and a tension conversion table TBt<b>1</b> of <figref idref="DRAWINGS">FIG. 16</figref><i>b </i>with respect to the parameter of tension table TT.</p>
<p id="p-0190" num="0224">The note conversion table lists availability factors of the respective notes in terms of distances from the chord root note with respect to the respective chord types in converting the notes NTi of the note information as inputted by the user (e.g. from the keyboard) to acceptable notes NTc. In <figref idref="DRAWINGS">FIGS. 15</figref>, <b>16</b><i>a</i>, <b>16</b><i>b </i>and <b>16</b><i>c</i>, the availability factors are represented by particular predetermined numerals for the respective note distances from the chord root with respect to the respective chord types in a matrix form, in which the numeral “0” indicates that the note of the distance on this column is not available for a converted note, and numerals “1” or else indicate that the note of the distance on this column is available for a converted note. The values of the numerals mean the priority orders to be employed when a number of keys are simultaneously depressed (i.e. plural notes are inputted simultaneously). For example, when there are three simultaneous input notes, the note distances designated by the priority orders of “3” or less are available for the converted note, i.e. may be outputted as a converted notes. The availability factors are also termed here as “note employment factors.”</p>
<p id="p-0191" num="0225">To describe more specifically, for example, with respect to <figref idref="DRAWINGS">FIG. 15</figref>, the notes are represented in terms of the distances from the root of the chord using numerals “0” through “11” (twelve notes in an octave), and respectively correspond to the note names “C” through “B” as aligned under the heading of “Note Names for Root of C.” The note names are omitted from illustration in <figref idref="DRAWINGS">FIGS. 16</figref><i>a</i>, <b>16</b><i>b </i>and <b>16</b><i>c</i>. The numerals “1” or more indicates the notes which can be used for converted notes, with respect to the types of chords of Major (a major chord), M7 (a major seventh chord), M6 (a major sixth chord), and so forth. In looking up the table, find a factor of “1” or more (but not more than the number of simultaneously inputted notes) that is closest to the input note NTi in the row of the designated chord type (current chord type) and employ such a found note as a converted note NTc.</p>
<p id="p-0192" num="0226">In case the chord information is not utilized, for example, by not inputting chord information or by setting chord negligence designation, the chord type is indicated as “Cancel” and the factors in the bottom row are applied, i.e. “1” for all note distances. When the “Cancel” is designated, every inputted key-on note number NTi itself will be the converted output note number NTo, which means no conversion takes place onto the inputted note number.</p>
<p id="p-0193" num="0227">By providing a number of different types of note conversion tables based on the similar principle, different conversion rules can be applied to the input notes. For example, the inputted notes on an ordinary performance (music playing) can be converted to chord constituent notes by using a note conversion table as labeled “Normal Note Conversion Table” such as exemplified in <figref idref="DRAWINGS">FIGS. 15 and 16</figref><i>a</i>. Further, particular ones in the inputted notes can be converted to tension notes for the particular chord by using a note conversion table as labeled “Tension Note Conversion Table” such as exemplified in <figref idref="DRAWINGS">FIG. 16</figref><i>b. </i></p>
<p id="p-0194" num="0228">The normal note conversion table TBa shown in <figref idref="DRAWINGS">FIG. 15</figref> is an example of a normal note conversion table in which the priority orders of the notes to be employed are placed in a certain pattern for the case of plural keys depressed simultaneously so that the notes having the priority orders which is equal to or less than the number of simultaneously depressed keys are available for the note conversion, while the notes having the numeral “0” should not be used for the note conversion. The numerals of the note employment factors are assigned to the available number of converted notes in the case a number of keys are depressed simultaneously, and each of the numerals indicates the priority order of each available note according to the number of simultaneously depressed keys. The maximum number in each row (e.g. “3” in the row of “Major”) indicates the maximum number of notes to be generated for the chord type. It should be understood that the notes to be generated and the notes not to be generated are variously determined depending on the number of simultaneously depressed keys.</p>
<p id="p-0195" num="0229">For example, in case the number of simultaneously depressed key is “2,” the notes having the priority order “1” and “2” can be employed as the converted notes. In case the note “F#5” is inputted as the key-on note number NTi over the C major chord, if the number of simultaneously depressed keys is “1,” the note “E” (distance is “4”) having the priority order “1” is immediately retrieved and the inputted note “F#5” is converted to the note “E5,” but if the number of simultaneously depressed keys is “2,” the available notes are “E” and “G” respectively having the priority orders “1” and “2,” and the note “G” (distance is “7”) having the priority order “2” and being closer to the inputted note “F#” (distance is “6”) is retrieved, and thus the inputted note “F#5” is converted to the note “G5.”</p>
<p id="p-0196" num="0230">The normal note conversion table TBb shown in <figref idref="DRAWINGS">FIG. 16</figref><i>a </i>is another example of a normal note conversion table in which only numerals “1” are placed at the available notes without indicating the priority orders. The normal conversion table having employment factors in this pattern are suitable for use in the case of a voice such as a recorder which can generate only one note at a time.</p>
<p id="p-0197" num="0231">The tension note conversion table TBt<b>1</b> shown in <figref idref="DRAWINGS">FIG. 16</figref><i>b </i>is an example of a tension note conversion table in which only numerals “1” are placed at the available notes. This tension note conversion table TBt<b>1</b> is used to retrieve a tension note for the chord according to the note employment factor “1” based on the note input information under a particular music playing conditions, and in reality is used together with a normal note conversion table. For example, the two tables designated by the table information (parameters) in the table of <figref idref="DRAWINGS">FIG. 14</figref> will be selectively used in the following manners:
<ul id="ul0007" list-style="none">
    <li id="ul0007-0001" num="0232">(Ex. 1) The normal note conversion table is applied to the note conversion of the input information from the white key manipulation, while the tension note conversion table is applied to the note conversion of the input information from the black key manipulation.</li>
    <li id="ul0007-0002" num="0233">(Ex. 2) The normal note conversion table is applied to the note conversion of the input information up to the predetermined number of simultaneously depressed keys, while the tension note conversion table is applied to the note conversion of the input information beyond that predetermined number of simultaneously depressed keys.</li>
    <li id="ul0007-0003" num="0234">(Ex. 3) The normal note conversion table is applied to the note conversion of the input information, if the input key-on event is more than a predetermined time length (e.g. 100 ms) after the preceding key-on event, while the tension note conversion table is applied to the note conversion of the input information, if the input key-event is within this predetermined time length from the predetermined key-on event.</li>
</ul>
</p>
<p id="p-0198" num="0235">In the case of above (Ex. 2), in which the inputted notes are converted to the chord constituent notes up to the predetermined number of simultaneously depressed keys, and the inputted notes are converted to the notes including non-chord constituent notes, a single table can be prepared and used. The overall note conversion table TBs of <figref idref="DRAWINGS">FIG. 16</figref><i>c </i>is an example of a table which can be used in such a case. This table TBs contains note employment factors in the pattern of priority orders corresponding to the number of simultaneously depressed keys “1” through “6” as in the table TBa of <figref idref="DRAWINGS">FIG. 15</figref>, in which the notes having the priority orders of numerals (other than “0”) equal to or less than the number of simultaneously depressed keys can be employed for the output converted notes.</p>
<p id="p-0199" num="0236">According to this overall note conversion table TBs, if the chord is C major and the number of simultaneously depressed keys is constantly “3,” the three inputted notes are converted to the chord constituent notes (basic notes) of “C,” “E” and “G.” However, if the number of simultaneously inputted notes exceeds “3” (i.e. “3”&lt;the number of simultaneously inputted notes&lt;the maximum number of simultaneously available notes SM=“6”), the inputted notes are converted to the notes among the three chord constituent notes “C,” “E” and “G” plus a number of non-chord constituent notes “B,” “D” and “A” having the priority orders within the number of simultaneously inputted notes. In this case, the inputted notes may be converted to any of the basic notes, or may be converted to any of the non-basic notes, depending on the conditions.</p>
<p id="h-0018" num="0000">(Key-On Event Processing #<b>2</b>)</p>
<p id="p-0200" num="0237"><figref idref="DRAWINGS">FIGS. 17</figref><i>a</i>, <b>17</b><i>b </i>and <b>18</b>, in combination, show a flow chart describing key-on processing #<b>2</b> according to another embodiment of the present invention. In these Figures, rectangular blocks and hexagonal blocks tagged with symbols S<b>21</b> through S<b>35</b> represent process steps as indicated by the attached legends, respectively, and solid line arrows show flows between the steps. Corner-rounded rectangular blocks represent information (data contents) and broken line arrows indicate the use of the respective information.</p>
<p id="p-0201" num="0238">As the user manipulates playing controls (i.e. depresses keys on the keyboard), a step S<b>21</b> recognizes the key depression state. At this step S<b>21</b>, key-on information including current key-on note numbers NTi is inputted, and the number of simultaneously depressed keys is renewed accordingly (by the number of note numbers NTi, i.e. with a “+1” count at every new key-on and a “−1” count at every key-off). The step S<b>21</b> also discriminates white/black key distinction according to the table selecting rules (above mentioned Ex. 1 through Ex. 3), and further measures every time intervals between every adjacent key-on events.</p>
<p id="p-0202" num="0239">Next, a step S<b>22</b> determines a conversion table to use for the note conversion. For example, corresponding to the voice kind VS as previously set in the system for the notes to be generated, the step S<b>22</b> determines the normal and the tension note conversion table as designated by the table numbers of normal table NT and of tension table TT according to the conversion conditions for voices in <figref idref="DRAWINGS">FIG. 14</figref>. Then, which of the two determined tables is to be used is decided depending on the key depression state MC according to the conditions for the set table change over method.</p>
<p id="p-0203" num="0240">Then, a step S<b>23</b> sets the range search flags L (downward) and H (upward) both to be “TRUE,” which will be used in a step S<b>26</b> later, and a step S<b>24</b> in turn converts the key-on note numbers NTi to output note numbers (i.e. converted note numbers) NTc with reference to the chord information and the number of simultaneously depressed keys using the determined table. A step S<b>25</b> (<figref idref="DRAWINGS">FIG. 17</figref><i>b</i>) then checks the number of tones to be generated, a step S<b>26</b> checks the note range, a step S<b>27</b> checks overlapping of notes, and a step S<b>28</b> checks the playing conditions.</p>
<p id="p-0204" num="0241">When all of the checks at the above described steps S<b>25</b>-S<b>28</b> (<figref idref="DRAWINGS">FIG. 17</figref><i>b</i>) are okayed, a step S<b>29</b> conducts tone generation processing with respect to the converted note numbers NTc and outputs the same to the tone generator <b>38</b> as output note numbers NTo. When the tone generation processing is conducted, current note information is renewed, and then a step S<b>30</b> (<figref idref="DRAWINGS">FIG. 18</figref>) renews the preceding key-depressed note number NTio by the current key-on note number NTi, and stands by (wait) for the next key manipulation (key-on event input).</p>
<p id="p-0205" num="0242">In the step S<b>25</b> for checking the number of tones to be generated, the maximum number of simultaneously available tones SM is obtained corresponding to the set voice kind from the conversion conditions for voices (<figref idref="DRAWINGS">FIG. 14</figref>), and whether the number of currently generated notes based on the current note information and the current key-on information is within the number limit of the simultaneously available notes as indicated by the maximum number of simultaneously available tones SM or not is examined. If the judgment at the step S<b>25</b> is “within the limit,” the process goes to the step S<b>26</b> for the note range check, but if the number of currently generated notes exceeds the limit, the process moves forward to a step S<b>31</b> (<figref idref="DRAWINGS">FIG. 18</figref>) to generate no tone (no further note). In case no tone is generated for the current key-on event, the process passes through the step S<b>30</b> to renew the preceding key-depressed note NTo by the current key-on note number NTi before standing by (waiting) for the next key manipulation.</p>
<p id="p-0206" num="0243">In the step S<b>26</b> for checking the note range, the upper and the lower limit note number NH and NL are obtained corresponding to the set voice kind from the conversion conditions for voices (<figref idref="DRAWINGS">FIG. 14</figref>), and whether the converted note number NTc is within the upper note range defined by the note number NH or the lower note range defined by the note number NL or neither is examined. If the judgment at the step S<b>26</b> is “the converted note number is below the lower limit note number NL,” the downward flag “L” is set to be “FALSE” to prohibit the downward search, and if the judgment at the step S<b>26</b> is “the converted note number is above the upper limit note number NH,” the upward flag “H” is set to be “FALSE” to prohibit the upward search.</p>
<p id="p-0207" num="0244">As long as the note range check judges the converted note number NTc is within either the upper or the lower note range, the process moves forward to the step S<b>27</b> for the overlap check, but if neither, the process goes to a step S<b>32</b> (<figref idref="DRAWINGS">FIG. 18</figref>) to check the limit for the converted note from the contents of the search flags H and L. If either of the search flags H and L is “TRUE,” the step S<b>32</b> judges a search in either direction is possible. In case the downward search flag L is “TRUE,” a step S<b>33</b> sets a downward search, while in case the upward search flag H is “TRUE,” the step S<b>33</b> sets an upward search. In either case, the process moves forward to a step S<b>34</b> to add or subtract “1” to or from the note number NTi′ for referring to the tables. The note number NTi′ is NTi at the time of the key-on event. After the step S<b>34</b>, the step S<b>24</b> (<figref idref="DRAWINGS">FIG. 17</figref><i>a</i>) converts this NTi′ using the note conversion table, and the reconverted note number NTc is subjected to the note range check at the step S<b>26</b>.</p>
<p id="p-0208" num="0245">If the limit check at the step S<b>32</b> (<figref idref="DRAWINGS">FIG. 18</figref>) reveals that both of the flags H and L are “FALSE” meaning the converted note is beyond the limit, the process proceeds to the step S<b>31</b> to decide not to generate the note for the current key-on event. The preceding key-depressed note NTio is renewed by the current key-on note number NTi at the step S<b>30</b>, before standing by for a next coming key-on event.</p>
<p id="p-0209" num="0246">The overlap check step S<b>27</b> (<figref idref="DRAWINGS">FIG. 17</figref><i>b</i>) checks whether the converted note number NTc overlaps with the current note information or not. In case the number of simultaneously generated tones is “1,” the step S<b>27</b> judges there is “no overlap.” When the chord type is “Cancel,” the step S<b>27</b> may automatically judge there is “no overlap.” When the judgment is made that there is no overlapping of notes, the process goes to the playing condition check S<b>28</b>, but when there is overlapping of notes, the process goes to a step S<b>35</b> (<figref idref="DRAWINGS">FIG. 18</figref>) to search for a next candidate upward or downward depending on the direction in which the key depressions travel according to the user's playing.</p>
<p id="p-0210" num="0247">The upward/downward search step S<b>35</b> judges the travel direction of the current key from the preceding key by comparing the key-on note number NTi with the preceding key-depressed note NTio, and set the direction for search (upward or downward) according to the judged travel direction. The note number NTi′ for referring to the tables is incremented or decremented by “1” (i.e. “+1” or “−1”) at the step S<b>34</b>, and such an incremented or decremented note number NTi′ is converted at the step S<b>24</b> to a further converted candidate NTc, which is then subjected to the overlap check at the step S<b>27</b>.</p>
<p id="p-0211" num="0248">The playing condition check step S<b>28</b> (<figref idref="DRAWINGS">FIG. 17</figref><i>b</i>) checks whether the converted note number NTc meets the playing conditions corresponding to the set voice kind in view of the table of conversion conditions for voices of <figref idref="DRAWINGS">FIG. 14</figref>. In this check, for example in the case of the guitar voice, the conditions include that the simultaneously generated notes should be assigned to individual strings on a one-to-one correspondence basis, and that all the frets to be pressed should reached by the left fingers without difficulty. Some voices (e.g. recorder) do not need the playing conditions check, and some voices may need the playing condition check about the reasonableness of the consecutive key-on times (i.e. the current note can be generated after the preceding key-on note NTio in view of time). If the playing condition check at the step S<b>29</b> is okayed, the process moves forward to the step S<b>29</b> for tone generation, but if not okayed (NG), the process goes to the step S<b>31</b> (<figref idref="DRAWINGS">FIG. 18</figref>) not to generate the tone of the converted note candidate, and then the step S<b>30</b> renews the preceding key-depressed note NTio by the current key-on note number NTi before standing by for a coming note input playing.</p>
<p id="h-0019" num="0000">(Examples of Table Use)</p>
<p id="p-0212" num="0249">Description will be herein below made with respect to the case in which the guitar voice is set among the conversion conditions for voices of <figref idref="DRAWINGS">FIG. 14</figref>, the normal conversion table TBa of <figref idref="DRAWINGS">FIG. 15</figref> is used in connection with the white key manipulations, while the tension conversion table TBtl is used in connection with the black keys of <figref idref="DRAWINGS">FIG. 16</figref><i>b </i>as exemplified in (Ex. 1) above. The following example cases (1) and (2) will specifically explain how to use the note conversion tables in the above described key-on event processing #<b>2</b>.</p>
<p id="h-0020" num="0000">(1) The case where the chord is C major, and the maximum number of simultaneously available notes is six (SM=6).</p>
<p id="h-0021" num="0000">1) First, while there is no note being generated now, the user plays a first note “A5” (MIDI note number “81”) on the keyboard <b>35</b>.</p>
<p id="p-0213" num="0250">1a) As the played input note “A5” (NTi) is a white-key note and a first note for generation, the normal conversion table TBa is referred to in the row of “Major” (at the step S<b>22</b>), the note “E” having the note employment factor of the priority order “1” is picked up, and the inputted “A5” is converted to the note “E5” (NTc). The note “E5” is immediately outputted as the output note number NTo and is generated as the current sounding note, and on the other hand the played key “A5” is stored as the preceding key-depressed note NTio (through the steps S<b>24</b>-S<b>30</b>).
<br/>
2) While the note “E5” is being generated, the user plays a second note “F5” (MIDI note number “77”).
<br/>
2a) As the played input note “F5” (NTi) is a white-key note and now constitutes a two-simultaneous-tone generation state (less than the maximum number “6” of simultaneously available tones), the normal conversion table TBa is referred to in the row of “Major” at the step S<b>22</b>, the notes “E” and “G” having the note employment factors of the priority orders “1” and “G” are available, and the note “E” which is closer to “F” is picked up, and the inputted “F5” is converted to the note “E5” (NTc) as a candidate through the step S<b>24</b>.
<br/>
2b) The note “E5” is already being generated, and the step S<b>27</b> finds overlapping.
<br/>
2c) Thus, the step S<b>35</b> conducts an upward/downward search, determining which way to search. As the preceding key-depressed note NTio is “A5” and the current key-on note NTi is “F5,” which constitutes a downward travel of key depressions (“F5”&lt;“A5”), the key-on note number NTi is decremented by “1” to obtain a note number NTi′ (=“E5”) for referring to table at the step S<b>34</b> (<figref idref="DRAWINGS">FIG. 18</figref>).
<br/>
2d) The step S<b>24</b> (<figref idref="DRAWINGS">FIG. 17</figref><i>a</i>) converts this note number NTi′ to a candidate note “E5” by referring to the table TBa. But the step S<b>27</b> (<figref idref="DRAWINGS">FIG. 17</figref><i>b</i>) finds overlapping of notes, and then the step S<b>35</b> (<figref idref="DRAWINGS">FIG. 18</figref>) determines a downward search again, and the step S<b>34</b> decrement this note number NTi′ by “1” to obtain a note number NTi′ (=“Eb5”) for referring to table. The above mentioned processes through the steps S<b>27</b>, S<b>35</b>, S<b>34</b> and S<b>24</b> are repeated in a loop until the note number NTi′ is decremented down to “B4.”
<br/>
2e) When the note number NTi′ has become “B4” after the repeated loop processing, the table TBa gives out a note “G” as the closer note to “B4” at the step S<b>24</b>, and thus the candidate note number NTc “G4” passes through the steps S<b>27</b> and S<b>28</b> to come to the step S<b>29</b> for the tone generation of NTo which is now “G4.”
<br/>
3) The first note key “A5” is now released, and keeping the second note key “F5” depressed (the generated note is “G4”), the user now depresses a third note key “B5” (MIDI note number “83”).
<br/>
3a) As the played input note “B5” (NTi) is also a white-key note and now constitutes a two-simultaneous-tone generation state (less than the maximum number “6” of simultaneously available tones), the normal conversion table TBa is referred to in the row of “Major” at the step S<b>22</b>, the notes “E” and “G” having the note employment factors of the priority orders “1” and “2” are available, and the note “G” which is closer to “B” is picked up, and the inputted “B5” is converted to the note “G5” (NTc) as a candidate through the step S<b>24</b>.
<br/>
3b) As the note which is being generated is “G4,” the step S<b>27</b> does not find overlapping. Thus, the candidate note “G5” is outputted as the output note NTo, and the tone of the note “G5” is produced at the step S<b>29</b>.
<br/>
4) With the second and the third key “F5” and “B5” kept depressed, the user now depresses a fourth note key “C#5.”
<br/>
4a) As the played input note “C#5” is a black-key note, the tension table TBt<b>1</b> is referred to in the row of “Major” at the step S<b>22</b>, the notes “D,” “A” and “B” having the note employment factor “1” are available, and the note “D” which is closest to “C#” is picked up, and the inputted “C#5” is converted to the note “D5” (NTc) as a candidate through the step S<b>24</b>.
<br/>
4b) As the notes which are currently being generated are “G4” and “G5,” the note “D5” does not overlap with them, and therefore is generated as a sounding note through the steps S<b>27</b>-S<b>29</b>.
<br/>
(2) The case where the chord is G major seventh, and the maximum number of simultaneously available notes is six (SM=6).
<br/>
1) First, while there is no note being generated now, the user plays a first note “F3” (MIDI note number “53”).
<br/>
1a) As the played input note “F3” (NTi) is a white-key note, the normal note conversion table TBa (<figref idref="DRAWINGS">FIG. 15</figref>) is applied on the row of “M7” (major seventh) at the step S<b>22</b>. According to the row of “M<b>7</b>” in the table TBa, the note distance having the note employment factor of the priority order “1” is “11,” which falls on “F#” in the case of the chord “G,” and therefore the note “F#3” is picked up as the converted note NTc and is finally generated as a sounding tone, with the output note NTo substituted by NTc through the steps S<b>24</b>-S<b>29</b>.
<br/>
2) With the first key “F3” kept depressed, the player depresses a second key “Eb3.”
<br/>
2a) As the depressed key “Eb3” is a black-key, the tension table TBt<b>1</b> is referred to in the row of “M7” at the step S<b>22</b>. According to the “M7” row of the table TBt<b>1</b>, the note distances “2,” “6” and “8” having the note employment factor “1” are available, which means the notes “A,” “C#” and “Eb” are available in the case of the chord “G7,” and thus the note “Eb3” which is closest to the depressed key “Eb” (NTi) is picked up, and the inputted “Eb3” is converted to the note “Eb3” (NTc) as a candidate through the step S<b>24</b>.
<br/>
4b) The step S<b>25</b> judges that the there are two generated notes “Eb3” and “F#3” which is within the maximum number of simultaneously available notes SM (=“6”), and the step S<b>27</b> judges there is no overlap of notes, and therefore the note “Eb3” is generated as a sounding note at the step S<b>29</b>, with the output note number NTo being renewed by the NTc.
<br/>
(Modifications of Input Note Conversion Processing #<b>2</b> and #<b>3</b>)
</p>
<p id="p-0214" num="0251">While preferred embodiments of the input note conversion processing #<b>2</b> and #<b>3</b> as conducted in the input note conversion system of the present invention have been described with reference to the associated drawings, various modifications will be possible without departing from the spirit of the present invention so that the present invention can be practiced in various forms.</p>
<p id="p-0215" num="0252">Particularly with respect to the input note conversion processing #<b>2</b>, the basic notes and the non-basic notes may not necessarily be divided into chord constituent notes and other notes, but may be divided into scale notes and non-scale notes, or may be divided into a chord root and other notes. In the case where the basic notes are defined as chord constituent notes, other notes than the chord constituent notes may be the tension notes for the chord as in the embodiment, or may be potentially useful notes for ornaments (e.g. notes below the chord constituent notes by a minor second interval). Or may be the inputted note itself depending thereon.</p>
<p id="p-0216" num="0253">The step S<b>21</b> in the above described embodiment judges the key depression state to decide whether to convert to notes including non-basic notes and utilizes the distinction between the white keys and the black keys as mentioned at (Ex. 1) before. The judgment can be made by other ways to decide whether to use also the non-basic notes. For example, such a decision can be made depending on whether the number of simultaneously depressed keys exceeds a predetermined number (e.g. “8”) as mentioned at (Ex. 2) before. Or further, by the distinction as mentioned at (Ex. 3) before, or depending on whether the velocity (touch strength) is less than a predetermined value (e.g. “30”), or whether the particular assigned key or control is manipulated, the conversion can be conducted also to non-basic notes. Needless to say, the case of (Ex. 2) can use the overall note conversion table TBs.</p>
<p id="p-0217" num="0254">Although the above described embodiments used the tension note conversion table TBt<b>1</b>, TBt<b>2</b>, . . . to convert also to notes other than the chord constituent notes, such conversion notes may be determined by calculating some algorithms prepared in the system. For example, a conversion note (a note to which the inputted note is going to be converted) may be the closest non-chord constituent note to the inputted note, or may be the ninth note of the chord in the octave closest to the inputted note. A further alternative method may be that an inputted note is once converted to a chord constituent note (as a basic note) using the normal note conversion table, and thereafter modify the obtained chord constituent note to a tension note by calculation, which is the method of “a normal note conversion table+a calculation algorithm.”</p>
<p id="p-0218" num="0255">The note conversion tables may be combinable, modifiable, or may be of a type which can be edited. There may be prepared further kinds of conversion tables. For example, while the chord constituent notes are the basic notes, the conversion to non-chord constituent notes can be conducted by using different tables depending on the differences in key depressions by the user. While a same table is looked up in consideration of the number of simultaneously depressed keys, there may be prepared separate table to look up depending on the number of simultaneously depressed keys.</p>
<p id="p-0219" num="0256">Although the above described key-on event processing #<b>2</b> as an example in which the note data NTc after conversion us subject to various checks after the note number conversion step S<b>24</b>, the kinds of check are not limited thereto. The checks to decide not to generate (the step S<b>31</b>) the converted note are not limited to the step S<b>25</b> of checking the number of tones to be generated (over limit), the step S<b>28</b> of checking the playing conditions (NG) and the step S<b>32</b> of checking the limits of the note ranges (beyond limits), but may include further checks. In case the chord type is designated as “cancel,” the step S<b>27</b> of checking the note overlap may be omitted so that the converted note will be generated anyway.</p>
<p id="p-0220" num="0257">The number of chords to be applied to the note conversion is not limited. The chord data may be stored beforehand, or may be inputted in real time.</p>
<p id="p-0221" num="0258">Particularly in the input note conversion processing #<b>3</b>, the contents of the table of conversion conditions for the voices (<figref idref="DRAWINGS">FIG. 14</figref>) may be user-writable.</p>
<p id="p-0222" num="0259">While in the embodiment, the conversion table is determined with reference to the table of conversion conditions for voices (<figref idref="DRAWINGS">FIG. 14</figref>), separate conversion tables may be prepared for the respective voices. The tables for use in the step S<b>25</b> for checking the number of tones to be generated simultaneously, the tables for use in the step S<b>26</b> for checking the note ranges and the tables for use in the step S<b>28</b> for checking the playing conditions may be likewise prepared separately with respective to individual voices. Further, necessary condition values may be obtained based on the properties of individual voices during the respective checking processing.</p>
<p id="p-0223" num="0260">When referring to the note conversion tables TBa and TBs, the candidate converted notes are picked up in consideration of the number of simultaneously inputted notes (i.e. depressed keys) in the above explained embodiments, but separate conversion tables may be prepared individually for the different numbers of simultaneously inputted notes.</p>
<p id="p-0224" num="0261">The step S<b>25</b> of checking the number of tones to be simultaneously generated may be passed through (as within the limit) with respect to the voices which have nothing to do with the number of simultaneously generated notes.</p>
<p id="p-0225" num="0262">In case the step S<b>26</b> judges that the converted note NTc is not within the limit designated by the limit parameters NH or NL in the table of conversion conditions for the voices, the embodiment conducts the step S<b>32</b> of limit check and forward (S<b>33</b> and S<b>34</b>, or S<b>3</b> <b>1</b> and S<b>30</b>), but the processing may directly flow to the step S<b>31</b> to generate no tone, or may shift the converted note NTc and then conduct the note range check step S<b>26</b> again, or may involve other process steps.</p>
<p id="p-0226" num="0263">As will be understood from the foregoing description, the present invention has many advantages including the following.</p>
<p id="p-0227" num="0264">According to the assistive music playing system of the present invention, the player does not need to pay precise attention in playing (inputting) correct notes but to engage himself/herself in playing music rhythmically and emotionally according to his/her general feeling, thereby to present an acceptable music performance.</p>
<p id="p-0228" num="0265">According to the input note conversion processing #<b>1</b> in the input note conversion system of the present invention, the inputted notes according to the user's playing are converted to the notes which will fit the chord at the time of the note input using the conversion tables adapted for different chords, and further the note conversion is controlled so that a plurality of converted notes for simultaneous generation shall not be the same or very close notes depending on the note sub-ranges or on the playing conditions, thereby preventing the generation of overlapping notes, and therefore a natural acoustic feeling will be maintained.</p>
<p id="p-0229" num="0266">According to the input note conversion processing #<b>2</b> in the input note conversion system of the present invention, the inputted notes according to the user's playing are converted to the notes which will fit the chord at the time of the note input, and the note conversion is controlled so that the converted note may be basic notes (e.g. chord constituent notes or scale notes) or may be non-basic notes (e.g. tension notes or ornaments) based on the note input state such as the key depression state, thereby permitting the conversion to the notes other than basic notes depending on the note input state, and therefore the player can enjoy a music performance with full of variety including non-basic notes according to the player's desire.</p>
<p id="p-0230" num="0267">According to the input note conversion processing #<b>3</b> in the input note conversion system of the present invention, the inputted notes according to the user's playing are converted to the notes which will fit the chord at the time of the note input, in which the note conversion tables are selectively used according to the voices designated by the voice information, and the converted notes are further controlled to fit the voice according to the note conversion conditions corresponding to the designated voice, and therefore different note conversions are possible in connection with different voices, so that a realistic performance with peculiar features on an actual instrument (voice) will be presented without the user paying particular attention.</p>
<p id="p-0231" num="0268">While several forms of the invention have been shown and described, other forms will be apparent to those skilled in the art without departing from the spirit of the invention. Therefore, it will be understood that the embodiments shown in the drawings and described above are merely for illustrative purposes, and are not intended to limit the scope of the invention, which is defined by the appended claims.</p>
<?DETDESC description="Detailed Description" end="tail"?>
</description>
<us-claim-statement>What is claimed is:</us-claim-statement>
<claims id="claims">
<claim id="CLM-00001" num="00001">
<claim-text>1. An assistive music playing apparatus comprising:
<claim-text>a chord progression pattern providing device which provides a chord progression pattern representing a series of chords;</claim-text>
<claim-text>a note input device which inputs notes constituting music playing along with said chord progression, said inputted notes potentially including unacceptable notes to be subjected to note correction;</claim-text>
<claim-text>a note conversion device, including a note conversion table containing conversion parameters for converting notes, which converts said inputted notes, with reference to a current chord in said chord progression at the time of said inputted notes, to converted notes according to conversion characteristics which are differently predetermined for different note sub-ranges as divided in view of note pitches; and</claim-text>
<claim-text>a note range split device which splits the entire note range of the input notes into a first sub-range in which the inputted notes are subjected to the note conversion and a second sub-range in which the input notes are not subjected to the note conversion,</claim-text>
<claim-text>wherein said note conversion device conducts note conversion of the inputted notes in said first sub-range and does not conduct note conversion of the inputted notes in said second sub-range.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00002" num="00002">
<claim-text>2. An assistive music playing apparatus as claimed in <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein said note conversion device has different conversion algorithms for different note sub-ranges.</claim-text>
</claim>
<claim id="CLM-00003" num="00003">
<claim-text>3. An assistive music playing apparatus as claimed in <claim-ref idref="CLM-00002">claim 2</claim-ref>, further comprising: an additional note providing device which provides additional note to the converted notes based on said converted notes.</claim-text>
</claim>
<claim id="CLM-00004" num="00004">
<claim-text>4. An assistive music playing apparatus as claimed in <claim-ref idref="CLM-00001">claim 1</claim-ref>, further comprising: an additional note providing device which provides additional note to the converted notes based on said converted notes.</claim-text>
</claim>
<claim id="CLM-00005" num="00005">
<claim-text>5. An assistive music playing apparatus comprising:
<claim-text>a chord progression pattern providing device which provides a chord progression pattern representing a series of chords;</claim-text>
<claim-text>a note input device which inputs notes constituting music playing along with said chord progression, said inputted notes potentially including unacceptable notes to be subjected to note correction;</claim-text>
<claim-text>a note conversion device, including a note conversion table containing conversion parameters for converting notes, which converts said inputted notes to first converted notes with reference to a current chord in said chord progression at the time of said inputted notes;</claim-text>
<claim-text>a note reconversion device which reconverts, when a plurality of said first converted notes become the same notes, one of said same notes to another note; and</claim-text>
<claim-text>a note range split device which splits the entire note range of the input notes into a first sub-range in which the inputted notes are subjected to the note conversion and a second sub-range in which the input notes are not subjected to the note conversion,</claim-text>
<claim-text>wherein said note conversion device conducts note conversion of the inputted notes in said first sub-range and does not conduct note conversion of the inputted notes in said second sub-range.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00006" num="00006">
<claim-text>6. An assistive music playing apparatus as claimed in <claim-ref idref="CLM-00005">claim 5</claim-ref>, further comprising: an additional note providing device which provides additional note to the converted notes based on said converted notes.</claim-text>
</claim>
<claim id="CLM-00007" num="00007">
<claim-text>7. An assistive music playing apparatus comprising:
<claim-text>a chord progression pattern providing device which provides a chord progression pattern representing a series of chords;</claim-text>
<claim-text>a note input device which inputs notes constituting music playing along with said chord progression, said inputted notes potentially including unacceptable notes to be subjected to note correction;</claim-text>
<claim-text>a note conversion device, including a note conversion table containing conversion parameters for converting notes, which converts said inputted notes to converted notes with reference to a current chord in said chord progression at the time of said inputted notes according to the number of substantially simultaneously inputted notes, a note distance between the highest note and the lowest note in said substantially simultaneously inputted notes, and the note degree of said highest note from the root of said current chord in said chord progression; and</claim-text>
<claim-text>a note range split device which splits the entire note range of the input notes into a first sub-range in which the inputted notes are subjected to the note conversion and a second sub-range in which the input notes are not subjected to the note conversion,</claim-text>
<claim-text>wherein said note conversion device conducts note conversion of the inputted notes in said first sub-range and does not conduct note conversion of the inputted notes in said second sub-range.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00008" num="00008">
<claim-text>8. An assistive music playing apparatus as claimed in <claim-ref idref="CLM-00007">claim 7</claim-ref>, further comprising: an additional note providing device which provides additional note to the converted notes based on said converted notes.</claim-text>
</claim>
<claim id="CLM-00009" num="00009">
<claim-text>9. A computer-readable medium storing a computer program for executing assistive music playing processing which processes music playing information based on a given chord progression, said processing comprising:
<claim-text>a procedure of providing a chord progression pattern representing a series of chords;</claim-text>
<claim-text>a procedure of inputting notes constituting music playing along with said chord progression, said inputted notes potentially including unacceptable notes to be subjected to note correction;</claim-text>
<claim-text>a procedure of converting said inputted notes to converted notes with reference to a current chord in said chord progression at the time of said inputted notes and a note conversion table containing conversion parameters for converting notes; and</claim-text>
<claim-text>a procedure of splitting the entire note range of the input notes into a first sub-range in which the inputted notes are subjected to the note conversion and a second sub-range in which the input notes are not subjected to the note conversion,</claim-text>
<claim-text>wherein said procedure of converting conducts note conversion of the inputted notes in said first sub-range and does not conduct note conversion of the inputted notes in said second sub-range.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00010" num="00010">
<claim-text>10. A computer-readable medium as claimed in <claim-ref idref="CLM-00009">claim 9</claim-ref>, wherein said procedure of converting uses different conversion algorithms for different note sub-ranges.</claim-text>
</claim>
<claim id="CLM-00011" num="00011">
<claim-text>11. A computer-readable medium as claimed in <claim-ref idref="CLM-00010">claim 10</claim-ref>, wherein said processing further comprises: a procedure of providing additional note to the converted notes based on said converted notes.</claim-text>
</claim>
<claim id="CLM-00012" num="00012">
<claim-text>12. A computer-readable medium as claimed in <claim-ref idref="CLM-00009">claim 9</claim-ref>, wherein said processing further comprises: a procedure of providing additional note to the converted notes based on said converted notes.</claim-text>
</claim>
<claim id="CLM-00013" num="00013">
<claim-text>13. A computer-readable medium storing a computer program for executing assistive music playing processing which processes music playing information based on a given chord progression, said processing comprising:
<claim-text>a procedure of providing a chord progression pattern representing a series of chords;</claim-text>
<claim-text>a procedure of inputting notes constituting music playing along with said chord progression, said inputted notes potentially including unacceptable notes to be subjected to note correction;</claim-text>
<claim-text>a procedure of converting said inputted notes to first converted notes with reference to a current chord in said chord progression at the time of said inputted notes and a note conversion table containing conversion parameters for converting notes;</claim-text>
<claim-text>a procedure of reconverting, when a plurality of said first converted notes become the same notes, one of said same notes to another note; and</claim-text>
<claim-text>a procedure of splitting the entire note range of the input notes into a first sub-range in which the inputted notes are subjected to the note conversion and a second sub-range in which the input notes are not subjected to the note conversion,</claim-text>
<claim-text>wherein said procedure of converting conducts note conversion of the inputted notes in said first sub-range and does not conduct note conversion of the inputted notes in said second sub-range.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00014" num="00014">
<claim-text>14. A computer-readable medium as claimed in <claim-ref idref="CLM-00013">claim 13</claim-ref>, wherein said processing further comprises: a procedure of providing additional note to the converted notes based on said converted notes.</claim-text>
</claim>
<claim id="CLM-00015" num="00015">
<claim-text>15. A computer-readable medium storing a computer program for executing assistive music playing processing which processes music playing information based on a given chord progression, said processing comprising:
<claim-text>a procedure of providing a chord progression pattern representing a series of chords;</claim-text>
<claim-text>a procedure of inputting notes constituting music playing along with said chord progression, said inputted notes potentially including unacceptable notes to be subjected to note correction;</claim-text>
<claim-text>a procedure of converting said inputted notes to converted notes with reference to a current chord in said chord progression at the time of said inputted notes according to the number of substantially simultaneously inputted notes, a note distance between the highest note and the lowest note in said substantially simultaneously inputted notes, and the note degree of said highest note from the root of said current chord in said chord progression, and a note conversion table containing conversion parameters for converting notes; and</claim-text>
<claim-text>a procedure of splitting the entire note range of the input notes into a first sub-range in which the inputted notes are subjected to the note conversion and a second sub-range in which the input notes are not subjected to the note conversion,</claim-text>
<claim-text>wherein said procedure of converting conducts note conversion of the inputted notes in said first sub-range and does not conduct note conversion of the inputted notes in said second sub-range.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00016" num="00016">
<claim-text>16. A computer-readable medium as claimed in <claim-ref idref="CLM-00015">claim 15</claim-ref>, wherein said processing further comprises: a procedure of providing additional note to the converted notes based on said converted notes.</claim-text>
</claim>
<claim id="CLM-00017" num="00017">
<claim-text>17. An input note converting apparatus comprising:
<claim-text>a chord information acquiring device which acquires chord information from a chord information providing device;</claim-text>
<claim-text>an input note information acquiring device which acquires input note information indicating inputted notes from a musical note input device;</claim-text>
<claim-text>a note conversion table which contains note employment factors for indicating a number of notes to be employed for note conversion according to the number of substantially simultaneously inputted notes with respect to respective chord types;</claim-text>
<claim-text>a note conversion device which converts notes represented by said input note information to notes which fit the chord type represented by said chord information using said note conversion table; and</claim-text>
<claim-text>a note conversion control device which controls said note conversion device so that the converted note does not overlap with another note which is currently being generated.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00018" num="00018">
<claim-text>18. A computer-readable medium storing a computer program for executing input note conversion processing in a musical note information processing apparatus which includes a note conversion table containing note employment factors for indicating a number of notes to be employed for note conversion according to the number of substantially simultaneously inputted notes with respect to respective chord types, said input note conversion processing comprising:
<claim-text>a procedure of acquiring chord information from a chord information providing device;</claim-text>
<claim-text>a procedure of acquiring input note information indicating inputted notes from a musical note input device;</claim-text>
<claim-text>a procedure of converting notes represented by said input note information to notes which fit the chord type represented by said chord information using said note conversion table; and</claim-text>
<claim-text>a procedure of controlling said note conversion device so that the converted note does not overlap with another note which is currently being generated.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00019" num="00019">
<claim-text>19. An input note converting apparatus comprising:
<claim-text>a chord information acquiring device which acquires chord information from a chord information providing device;</claim-text>
<claim-text>an input note information acquiring device which acquires input note information indicating inputted notes from a musical note input device;</claim-text>
<claim-text>an input condition discriminating device which discriminates note input conditions from said input note information;</claim-text>
<claim-text>a note conversion table containing conversion parameters for converting notes,</claim-text>
<claim-text>a note conversion device which converts notes represented by said input note information to notes which fit the chord type represented by said chord information using said note conversion table; and</claim-text>
<claim-text>a note conversion control device which controls said note conversion device according to said note input condition as discriminated by said input condition discriminating device so that the converted note becomes a basic note or a non-basic note according to said chord information.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00020" num="00020">
<claim-text>20. An input note converting apparatus comprising:
<claim-text>a chord information acquiring device which acquires chord information representing chord types from a chord information providing device;</claim-text>
<claim-text>an input note information acquiring device which acquires input note information indicating inputted notes from a musical note input device;</claim-text>
<claim-text>an input condition discriminating device which discriminates note input conditions from said input note information;</claim-text>
<claim-text>a note conversion table containing note employment factors which decide available converted notes corresponding to the respective chord types, and including a first sub-table and a second sub-table, said first sub-table containing the note employment factors for converting input notes to basic notes in view of said chord type, and said second sub-table containing the note employment factors for converting input notes also to non-basic notes in view of said chord type; and</claim-text>
<claim-text>a table deciding device which decides which of said first and said second sub-table to use for the respective input notes according to the note input conditions of said input note information as discriminated by said input condition discriminating device.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00021" num="00021">
<claim-text>21. A computer-readable medium storing a computer program for executing input note conversion processing in a musical note information processing apparatus which includes a note conversion table containing conversion parameters for converting notes, said input note conversion processing comprising:
<claim-text>a procedure of acquiring chord information from a chord information providing device;</claim-text>
<claim-text>a procedure of acquiring input note information indicating inputted notes from a musical note input device;</claim-text>
<claim-text>a procedure of discriminating note input conditions from said input note information;</claim-text>
<claim-text>a procedure of converting notes represented by said input note information to notes which fit the chord type represented by said chord information using said note conversion table; and</claim-text>
<claim-text>a procedure of controlling said procedure of converting according to said note input condition as discriminated by said procedure of discriminating so that the converted note becomes a basic note or a non-basic note according to said chord information.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00022" num="00022">
<claim-text>22. A computer-readable medium storing a computer program for executing input note conversion processing in a musical note information processing apparatus which includes a note conversion table containing note employment factors which decide available converted notes corresponding to the respective chord types, and including a first sub-table and a second sub-table, said first sub-table containing the note employment factors for converting input notes to basic notes in view of said chord type, and said second sub-table containing the note employment factors for converting input notes also to non-basic notes in view of said chord type, said input note conversion processing comprising:
<claim-text>a procedure of acquiring chord information representing chord types from a chord information providing device;</claim-text>
<claim-text>a procedure of acquiring input note information indicating inputted notes from a musical note input device;</claim-text>
<claim-text>a procedure of discriminating note input conditions from said input note information; and</claim-text>
<claim-text>a procedure of deciding which of said first and said second sub-table to use for the respective input notes according to the note input conditions of said input note information as discriminated by said procedure of discriminating.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00023" num="00023">
<claim-text>23. A method of processing music playing information based on a given chord progression for assisting music playing, said method comprising:
<claim-text>a step of providing a chord progression pattern representing a series of chords;</claim-text>
<claim-text>a step of inputting notes constituting music playing along with said chord progression, said inputted notes potentially including unacceptable notes to be subjected to note correction;</claim-text>
<claim-text>a step of converting said inputted notes to converted notes with reference to a current chord in said chord progression at the time of said inputted notes based on a note conversion table containing conversion parameters for converting notes; and</claim-text>
<claim-text>a step of splitting the entire note range of the input notes into a first sub-range in which the inputted notes are subjected to the note conversion and a second sub-range in which the input notes are not subjected to the note conversion,</claim-text>
<claim-text>wherein said step of converting conducts note conversion of the inputted notes in said first sub-range and does not conduct note conversion of the inputted notes in said second sub-range.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00024" num="00024">
<claim-text>24. A method as claimed in <claim-ref idref="CLM-00023">claim 23</claim-ref>, further comprising a step of providing additional note to the converted notes based on said converted notes.</claim-text>
</claim>
</claims>
</us-patent-grant>
