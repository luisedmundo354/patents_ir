<us-patent-grant lang="EN" dtd-version="v4.2 2006-08-23" file="US07298740-20071120.XML" status="PRODUCTION" id="us-patent-grant" country="US" date-produced="20071106" date-publ="20071120">
<us-bibliographic-data-grant>
<publication-reference>
<document-id>
<country>US</country>
<doc-number>07298740</doc-number>
<kind>B2</kind>
<date>20071120</date>
</document-id>
</publication-reference>
<application-reference appl-type="utility">
<document-id>
<country>US</country>
<doc-number>10193569</doc-number>
<date>20020711</date>
</document-id>
</application-reference>
<us-application-series-code>10</us-application-series-code>
<us-term-of-grant>
<us-term-extension>1407</us-term-extension>
</us-term-of-grant>
<classifications-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>H</section>
<class>04</class>
<subclass>L</subclass>
<main-group>12</main-group>
<subgroup>28</subgroup>
<symbol-position>F</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20071120</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>H</section>
<class>04</class>
<subclass>L</subclass>
<main-group>12</main-group>
<subgroup>56</subgroup>
<symbol-position>L</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20071120</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
</classifications-ipcr>
<classification-national>
<country>US</country>
<main-classification>370389</main-classification>
<further-classification>370410</further-classification>
</classification-national>
<invention-title id="d0e53">Centralized service control for a telecommunication system</invention-title>
<references-cited>
<citation>
<patcit num="00001">
<document-id>
<country>US</country>
<doc-number>5418844</doc-number>
<kind>A</kind>
<name>Morrisey et al.</name>
<date>19950500</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00002">
<document-id>
<country>US</country>
<doc-number>5448633</doc-number>
<kind>A</kind>
<name>Jamaleddin</name>
<date>19950900</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00003">
<document-id>
<country>US</country>
<doc-number>5467388</doc-number>
<kind>A</kind>
<name>Redd et al.</name>
<date>19951100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>37921002</main-classification></classification-national>
</citation>
<citation>
<patcit num="00004">
<document-id>
<country>US</country>
<doc-number>5524146</doc-number>
<kind>A</kind>
<name>Morrisey et al.</name>
<date>19960600</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00005">
<document-id>
<country>US</country>
<doc-number>5566235</doc-number>
<kind>A</kind>
<name>Hetz</name>
<date>19961000</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00006">
<document-id>
<country>US</country>
<doc-number>5572583</doc-number>
<kind>A</kind>
<name>Wheeler, Jr. et al.</name>
<date>19961100</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00007">
<document-id>
<country>US</country>
<doc-number>5590187</doc-number>
<kind>A</kind>
<name>Greenspan</name>
<date>19961200</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00008">
<document-id>
<country>US</country>
<doc-number>5675635</doc-number>
<kind>A</kind>
<name>Vos et al.</name>
<date>19971000</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00009">
<document-id>
<country>US</country>
<doc-number>5684866</doc-number>
<kind>A</kind>
<name>Florindi et al.</name>
<date>19971100</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00010">
<document-id>
<country>US</country>
<doc-number>5694463</doc-number>
<kind>A</kind>
<name>Christie et al.</name>
<date>19971200</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00011">
<document-id>
<country>US</country>
<doc-number>5790634</doc-number>
<kind>A</kind>
<name>Kinser et al.</name>
<date>19980800</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>379 2901</main-classification></classification-national>
</citation>
<citation>
<patcit num="00012">
<document-id>
<country>US</country>
<doc-number>5793853</doc-number>
<kind>A</kind>
<name>Sbisa</name>
<date>19980800</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00013">
<document-id>
<country>US</country>
<doc-number>5825780</doc-number>
<kind>A</kind>
<name>Christie</name>
<date>19981000</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00014">
<document-id>
<country>US</country>
<doc-number>5828740</doc-number>
<kind>A</kind>
<name>Khuc et al.</name>
<date>19981000</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00015">
<document-id>
<country>US</country>
<doc-number>5864614</doc-number>
<kind>A</kind>
<name>Farris et al.</name>
<date>19990100</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00016">
<document-id>
<country>US</country>
<doc-number>5920562</doc-number>
<kind>A</kind>
<name>Christie et al.</name>
<date>19990700</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00017">
<document-id>
<country>US</country>
<doc-number>5923745</doc-number>
<kind>A</kind>
<name>Hurd</name>
<date>19990700</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00018">
<document-id>
<country>US</country>
<doc-number>5926538</doc-number>
<kind>A</kind>
<name>Deryugin et al.</name>
<date>19990700</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00019">
<document-id>
<country>US</country>
<doc-number>5933486</doc-number>
<kind>A</kind>
<name>Norby et al.</name>
<date>19990800</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00020">
<document-id>
<country>US</country>
<doc-number>5949869</doc-number>
<kind>A</kind>
<name>Sink et al.</name>
<date>19990900</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00021">
<document-id>
<country>US</country>
<doc-number>5987118</doc-number>
<kind>A</kind>
<name>Dickerman et al.</name>
<date>19991100</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00022">
<document-id>
<country>US</country>
<doc-number>5993486</doc-number>
<kind>A</kind>
<name>Tomatsu</name>
<date>19991100</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00023">
<document-id>
<country>US</country>
<doc-number>6075855</doc-number>
<kind>A</kind>
<name>Christiansen et al.</name>
<date>20000600</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00024">
<document-id>
<country>US</country>
<doc-number>6097803</doc-number>
<kind>A</kind>
<name>Sbisa</name>
<date>20000800</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00025">
<document-id>
<country>US</country>
<doc-number>6148069</doc-number>
<kind>A</kind>
<name>Ekstrom et al.</name>
<date>20001100</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00026">
<document-id>
<country>US</country>
<doc-number>6215864</doc-number>
<kind>B1</kind>
<name>Goyal et al.</name>
<date>20010400</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00027">
<document-id>
<country>US</country>
<doc-number>6262992</doc-number>
<kind>B1</kind>
<name>Nelson et al.</name>
<date>20010700</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00028">
<document-id>
<country>US</country>
<doc-number>6470081</doc-number>
<kind>B1</kind>
<name>Sbisa et al.</name>
<date>20021000</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00029">
<document-id>
<country>US</country>
<doc-number>6529504</doc-number>
<kind>B1</kind>
<name>Sbisa</name>
<date>20030300</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00030">
<document-id>
<country>US</country>
<doc-number>6567659</doc-number>
<kind>B1</kind>
<name>Sbisa</name>
<date>20030500</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00031">
<document-id>
<country>US</country>
<doc-number>6574319</doc-number>
<kind>B2</kind>
<name>Latter et al.</name>
<date>20030600</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00032">
<document-id>
<country>US</country>
<doc-number>6603851</doc-number>
<kind>B1</kind>
<name>Smith et al.</name>
<date>20030800</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00033">
<document-id>
<country>US</country>
<doc-number>6611590</doc-number>
<kind>B1</kind>
<name>Lu et al.</name>
<date>20030800</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00034">
<document-id>
<country>US</country>
<doc-number>6690656</doc-number>
<kind>B1</kind>
<name>Christie et al.</name>
<date>20040200</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00035">
<document-id>
<country>US</country>
<doc-number>2004/0032864</doc-number>
<kind>A1</kind>
<name>Sbisa et al.</name>
<date>20040200</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00036">
<document-id>
<country>US</country>
<doc-number>2005/0157739</doc-number>
<kind>A1</kind>
<name>Nelson et al.</name>
<date>20050700</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370426</main-classification></classification-national>
</citation>
<citation>
<patcit num="00037">
<document-id>
<country>US</country>
<doc-number>2006/0239268</doc-number>
<kind>A1</kind>
<name>Schneider et al.</name>
<date>20061000</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>3703951</main-classification></classification-national>
</citation>
<citation>
<patcit num="00038">
<document-id>
<country>DE</country>
<doc-number>199 54 224 A 1</doc-number>
<date>20010500</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00039">
<document-id>
<country>EP</country>
<doc-number>0 631 447</doc-number>
<kind>A2</kind>
<date>19941200</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00040">
<document-id>
<country>EP</country>
<doc-number>0 901 297</doc-number>
<kind>A2</kind>
<date>19990300</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00041">
<document-id>
<country>WO</country>
<doc-number>WO 99/35859</doc-number>
<date>19990700</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00042">
<document-id>
<country>WO</country>
<doc-number>WO 00/42782</doc-number>
<date>20000700</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<nplcit num="00043">
<othercit>Dehni, Tarek, et al., “Intelligent Networks and the HP OpenCall Technology,” Aug. 1997 Hewlett-Packard Journal, Article 6, XP-002259853, pp. 1-14.</othercit>
</nplcit>
<category>cited by other</category>
</citation>
<citation>
<nplcit num="00044">
<othercit>Briere, Daniel, “Sprint plans sweeping Network Revisions,” Network World, Sep. 20, 1993, Network World, Inc.</othercit>
</nplcit>
<category>cited by other</category>
</citation>
</references-cited>
<number-of-claims>36</number-of-claims>
<us-exemplary-claim>1</us-exemplary-claim>
<us-field-of-classification-search>
<classification-national>
<country>US</country>
<main-classification>370389</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>370401</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>370400</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>370410</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>370351</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>370356</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>370392</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>370422</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>370426</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>370398</main-classification>
</classification-national>
</us-field-of-classification-search>
<figures>
<number-of-drawing-sheets>7</number-of-drawing-sheets>
<number-of-figures>7</number-of-figures>
</figures>
<us-related-documents>
<related-publication>
<document-id>
<country>US</country>
<doc-number>20040032864</doc-number>
<kind>A1</kind>
<date>20040219</date>
</document-id>
</related-publication>
</us-related-documents>
<parties>
<applicants>
<applicant sequence="001" app-type="applicant-inventor" designation="us-only">
<addressbook>
<last-name>Sbisa</last-name>
<first-name>Daniel Charles</first-name>
<address>
<city>Blue Springs</city>
<state>MO</state>
<country>US</country>
</address>
</addressbook>
<nationality>
<country>omitted</country>
</nationality>
<residence>
<country>US</country>
</residence>
</applicant>
<applicant sequence="002" app-type="applicant-inventor" designation="us-only">
<addressbook>
<last-name>Khalil</last-name>
<first-name>Anis</first-name>
<address>
<city>Overland Park</city>
<state>KS</state>
<country>US</country>
</address>
</addressbook>
<nationality>
<country>omitted</country>
</nationality>
<residence>
<country>US</country>
</residence>
</applicant>
<applicant sequence="003" app-type="applicant-inventor" designation="us-only">
<addressbook>
<last-name>Cope</last-name>
<first-name>Warren B</first-name>
<address>
<city>Olathe</city>
<state>KS</state>
<country>US</country>
</address>
</addressbook>
<nationality>
<country>omitted</country>
</nationality>
<residence>
<country>US</country>
</residence>
</applicant>
<applicant sequence="004" app-type="applicant-inventor" designation="us-only">
<addressbook>
<last-name>Susbilla</last-name>
<first-name>John T</first-name>
<address>
<city>Milpitas</city>
<state>CA</state>
<country>US</country>
</address>
</addressbook>
<nationality>
<country>omitted</country>
</nationality>
<residence>
<country>US</country>
</residence>
</applicant>
<applicant sequence="005" app-type="applicant-inventor" designation="us-only">
<addressbook>
<last-name>Rangarajan</last-name>
<first-name>Ramaswami</first-name>
<address>
<city>Belmont</city>
<state>CA</state>
<country>US</country>
</address>
</addressbook>
<nationality>
<country>omitted</country>
</nationality>
<residence>
<country>US</country>
</residence>
</applicant>
</applicants>
</parties>
<assignees>
<assignee>
<addressbook>
<orgname>Sprint Communications Company L.P.</orgname>
<role>02</role>
<address>
<city>Overland Park</city>
<state>KS</state>
<country>US</country>
</address>
</addressbook>
</assignee>
</assignees>
<examiners>
<primary-examiner>
<last-name>Patel</last-name>
<first-name>Ajit</first-name>
<department>2616</department>
</primary-examiner>
</examiners>
</us-bibliographic-data-grant>
<abstract id="abstract">
<p id="p-0001" num="0000">A communication system includes a switching system and a service control system. The switching system receives and processes a communication request to transfer a query message. The service control system receives and processes the query message to generate and transfer a response message indicating a route. The switching system receives and processes the response message indicating the route and transfers a communication using the route. The service control system may process the query message with multiple parallel functions to generate an action message and process the action message to select the route.</p>
</abstract>
<drawings id="DRAWINGS">
<figure id="Fig-EMI-D00000" num="00000">
<img id="EMI-D00000" he="167.47mm" wi="196.77mm" file="US07298740-20071120-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00001" num="00001">
<img id="EMI-D00001" he="197.87mm" wi="168.06mm" orientation="landscape" file="US07298740-20071120-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00002" num="00002">
<img id="EMI-D00002" he="200.58mm" wi="155.11mm" orientation="landscape" file="US07298740-20071120-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00003" num="00003">
<img id="EMI-D00003" he="229.95mm" wi="133.94mm" file="US07298740-20071120-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00004" num="00004">
<img id="EMI-D00004" he="234.95mm" wi="159.34mm" file="US07298740-20071120-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00005" num="00005">
<img id="EMI-D00005" he="173.74mm" wi="161.63mm" orientation="landscape" file="US07298740-20071120-D00005.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00006" num="00006">
<img id="EMI-D00006" he="230.80mm" wi="158.24mm" orientation="landscape" file="US07298740-20071120-D00006.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00007" num="00007">
<img id="EMI-D00007" he="228.09mm" wi="166.03mm" file="US07298740-20071120-D00007.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
</drawings>
<description id="description">
<?BRFSUM description="Brief Summary" end="lead"?>
<heading id="h-0001" level="1">RELATED APPLICATIONS</heading>
<p id="p-0002" num="0001">Not applicable</p>
<heading id="h-0002" level="1">FEDERALLY SPONSORED RESEARCH OR DEVELOPMENT</heading>
<p id="p-0003" num="0002">Not applicable</p>
<heading id="h-0003" level="1">MICROFICHE APPENDIX</heading>
<p id="p-0004" num="0003">Not applicable</p>
<heading id="h-0004" level="1">BACKGROUND OF THE INVENTION</heading>
<p id="p-0005" num="0004">1. Field of the Invention</p>
<p id="p-0006" num="0005">The invention is related to the field of communications, and in particular, to centralized service control for a telecommunication system.</p>
<p id="p-0007" num="0006">2. Description of the Prior Art</p>
<p id="p-0008" num="0007">A telecommunication network uses service logic and connection logic to process telephone calls. The service logic determines the routes or other treatment for the calls. The connection logic transfers the call communications over the selected routes or applies the other treatment. Some examples of service logic include trigger detection logic, caller number validation logic, and called number translation logic.</p>
<p id="p-0009" num="0008">In current telecommunication networks, the connection logic resides in switching systems and the service logic is split between the switching systems and Service Control Points (SCPs). Although the SCPs are typically centralized, the switching systems are geographically dispersed throughout the telecommunications system. Thus, large portions of the service logic are also geographically dispersed and replicated throughout the telecommunications system. This situation leads to a host of problems.</p>
<p id="p-0010" num="0009">Switching systems are large and complex, so service logic must be tailored for each type of switching system. For example, service logic that checks the caller number before allowing a call (caller validation) has to be separately customized for switching systems from different manufacturers. This customization burden constrains a network's ability to deploy many types of switching systems, and thus, inhibits competition among switching system manufacturers. In addition, service logic modification is difficult when changes must be coordinated across multiple geographically dispersed switching systems. Modifications must be replicated in many copies of the service logic. Modifications typically must also be implemented with the cooperation of the switching system supplier—often at a steep cost to the telecommunication network. The service logic for a telecommunication system is continually updated. For example, the service logic in multiple switching systems are updated when a new area code is added or when traffic is re-homed.</p>
<p id="p-0011" num="0010">Various technologies have been developed to centralize service logic in a telecommunications network. For example, SCPs centralize “800” call routing and calling card logic. Sprint Corporation, the assignee of this application, has developed a robust set of technologies to centralize large portions of service logic externally to the switching systems, however, refinements and improvements to those technologies are still desired.</p>
<heading id="h-0005" level="1">SUMMARY OF THE INVENTION</heading>
<p id="p-0012" num="0011">The invention helps solve the above problems by centralizing service logic through a transaction agent. Advantageously, this centralization eliminates the need to deploy and modify service logic in geographically dispersed switching systems. The centralization also eliminates the need to customize the service logic for diverse switching systems. In addition, the transaction agent can provide an interface between multiple switching systems and multiple sets of service logic, so the switching systems and service logic may use their own specific message formats and data.</p>
<p id="p-0013" num="0012">Some examples of the invention comprise communication systems and methods. The communication systems include a first switching system and a service control system. The first switching system receives and processes a first communication request for a first communication to determine if the first communication request indicates a first route. If the first communication request does indicate the first route, then the first switching system transfers the first communication using the first route. If the first communication request does not indicate the first route, then the first switching system transfers a first query message, receives and processes a first response message indicating the first route, and transfers the first communication using the first route. The service control system receives and processes the first query message to generate and transfer the first response message indicating the first route. The first route identifies one of a downstream switch, network element, connection, switch/trunk, and packet address.</p>
<p id="p-0014" num="0013">In some examples of the invention, the communication systems include a second switching system that receives and processes a second communication request for a second communication to determine if the second communication request indicates a second route. If the second communication request does indicate the second route, then the second switching system transfers the second communication using the second route. If the second communication request does not indicate the second route, then the second switching system transfers a second query message, receives and processes a second response message indicating the second route, and transfers the second communication using the second route. The service control system receives and processes the second query message to generate and transfer the second response message indicating the second route. In some examples of the invention, the first query message and the second query message have different query message formats. In some examples of the invention, the first switching system and the second switching system are from different manufacturers. In some examples of the invention, the first switching system and the second switching system are in different communication systems. In some examples of the invention, the first switching system comprises one of a class four switch and a class five switch and the second switching system comprises one of a packet switch and a packet router. In some examples of the invention, the first switching system comprises one of a class four switch and a class five switch and the second switching system comprises a wireless switch. In some examples of the invention, the first switching system comprises one of a packet switch and a packet router and the second switching system comprises a wireless switch.</p>
<p id="p-0015" num="0014">In some examples of the invention, the service control system processes the query message with multiple parallel functions to generate an action message and processes the action message to select the first route. In some examples of the invention, one of the parallel functions comprises a called number function, nature of number function, caller number function, originating line identification function, originating switching system function, originating trunk function, trigger index function, call reference identification function, or carrier identification code function.</p>
<p id="p-0016" num="0015">Some examples of the invention include communication service control systems, methods, and software products. The systems include a transaction agent processing system and interface. The software products include software to direct a processing system and a storage system that stores the software. The transaction agent interface receives a first query message. The transaction agent processing system processes the first query message with a plurality of parallel functions to generate a first action message having data from the first query message. The transaction agent interface transfers the first action message. The transaction agent interface receives a return message. The transaction agent processing system processes the return message indicating communication handling data to generate a response message indicating the communication handling data. The transaction agent interface transfers the response message.</p>
<p id="p-0017" num="0016">In some examples of the invention, at least some of the parallel functions include data structures having entries, wherein the entries have corresponding scores and action types. The transaction agent processing system attempts to match data from the first query message with the entries, and transfers the first action message based on one of the action types for a matching one of the entries having a highest one of the scores. In some examples of the invention, one of the data structures comprises a called number data structure, nature of number data structure, caller number data structure, originating line identification data structure, originating switching system data structure, originating trunk data structure, trigger index data structure, call reference identification data structure, or carrier identification code data structure.</p>
<p id="p-0018" num="0017">In some examples of the invention, the communication service control systems includes a service control interface and a service control processing system. The service control interface receives the first action message. The service control processing system processes the first action message with an action function corresponding to the action message to generate the return message indicating the communication handling data. The service control interface transfers the return message. In some examples of the invention, the action function comprises local telephone call processing logic, domestic long distance telephone call processing logic, international telephone call processing logic, wireless telephone call processing logic, packet network telephone call processing logic, POTS telephone call processing logic, toll-free telephone call processing logic, or Virtual Private Network telephone call processing logic.</p>
<p id="p-0019" num="0018">In some examples of the invention, the call-handling data identifies one of a downstream switch, network element, connection, switch/trunk, and packet address.</p>
<p id="p-0020" num="0019">In some examples of the invention, the transaction agent processing system processes a second query message with the plurality of parallel functions to generate a second action message. The first query message and the second query message have different query message formats, and the first action message and the second action message have the same action message format.</p>
<?BRFSUM description="Brief Summary" end="tail"?>
<?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?>
<description-of-drawings>
<heading id="h-0006" level="1">BRIEF DESCRIPTION OF THE DRAWINGS</heading>
<p id="p-0021" num="0020">The same reference number represents the same element on all drawings.</p>
<p id="p-0022" num="0021"><figref idref="DRAWINGS">FIG. 1</figref> illustrates a communication system in an example of the invention.</p>
<p id="p-0023" num="0022"><figref idref="DRAWINGS">FIG. 2</figref> illustrates a service data point and a service processing system in an example of the invention.</p>
<p id="p-0024" num="0023"><figref idref="DRAWINGS">FIG. 3</figref> illustrates a logical architecture for centralized service control in an example of the invention.</p>
<p id="p-0025" num="0024"><figref idref="DRAWINGS">FIG. 4</figref> illustrates a telecommunication network in an example of the invention.</p>
<p id="p-0026" num="0025"><figref idref="DRAWINGS">FIG. 5</figref> illustrates a service control system in an example of the invention.</p>
<p id="p-0027" num="0026"><figref idref="DRAWINGS">FIG. 6</figref> illustrates a call flow in an example of the invention.</p>
<p id="p-0028" num="0027"><figref idref="DRAWINGS">FIG. 7</figref> illustrates a logical flow for centralized service control in an example of the invention.</p>
</description-of-drawings>
<?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?>
<?DETDESC description="Detailed Description" end="lead"?>
<heading id="h-0007" level="1">DETAILED DESCRIPTION OF THE PREFERRED EMBODIMENT</heading>
<p id="p-0029" num="0028"><figref idref="DRAWINGS">FIGS. 1-7</figref> and the following description depict specific examples to teach those skilled in the art how to make and use the best mode of the invention. For the purpose of teaching inventive principles, some conventional aspects have been simplified or omitted. Those skilled in the art will appreciate variations from these examples that fall within the scope of the invention. Those skilled in the art will appreciate that the features and examples described below can be combined in various ways to form multiple variations of the invention. As a result, the invention is not limited to the specific examples and details described below, but only by the claims and their equivalents.</p>
<p id="h-0008" num="0000">Communication System—<figref idref="DRAWINGS">FIGS. 1-3</figref></p>
<p id="p-0030" num="0029"><figref idref="DRAWINGS">FIG. 1</figref> illustrates communication system <b>100</b> in an example of the invention. Communication system <b>100</b> includes switching systems <b>101</b>-<b>103</b>, and service control system <b>110</b>. Service control system <b>110</b> includes transaction agent <b>105</b> and service processing systems <b>106</b>-<b>108</b>. Transaction agent <b>105</b> is linked to switching systems <b>101</b>-<b>103</b> and service processing systems <b>106</b>-<b>108</b>. Switching systems <b>101</b>-<b>103</b> are linked together and to external systems (not shown) according to the following data structure, and typically, there are more systems and links than are shown on <figref idref="DRAWINGS">FIG. 1</figref>, but the number is restricted for clarity.</p>
<p id="p-0031" num="0030">
<tables id="TABLE-US-00001" num="00001">
<table frame="none" colsep="0" rowsep="0">
<tgroup align="left" colsep="0" rowsep="0" cols="2">
<colspec colname="1" colwidth="21pt" align="center"/>
<colspec colname="2" colwidth="196pt" align="center"/>
<thead>
<row>
<entry namest="1" nameend="2" align="center" rowsep="1"/>
</row>
<row>
<entry>LINK</entry>
<entry>BETWEEN</entry>
</row>
<row>
<entry namest="1" nameend="2" align="center" rowsep="1"/>
</row>
</thead>
<tbody valign="top">
<row>
<entry/>
</row>
</tbody>
</tgroup>
<tgroup align="left" colsep="0" rowsep="0" cols="5">
<colspec colname="1" colwidth="21pt" align="char" char="."/>
<colspec colname="2" colwidth="77pt" align="left"/>
<colspec colname="3" colwidth="21pt" align="left"/>
<colspec colname="4" colwidth="77pt" align="left"/>
<colspec colname="5" colwidth="21pt" align="left"/>
<tbody valign="top">
<row>
<entry>131</entry>
<entry>SWITCHING SYSTEM</entry>
<entry>101</entry>
<entry>EXTERNAL SYSTEMS</entry>
<entry/>
</row>
<row>
<entry>132</entry>
<entry>SWITCHING SYSTEM</entry>
<entry>101</entry>
<entry>SWITCHING SYSTEM</entry>
<entry>102</entry>
</row>
<row>
<entry>133</entry>
<entry>SWITCHING SYSTEM</entry>
<entry>101</entry>
<entry>SWITCHING SYSTEM</entry>
<entry>103</entry>
</row>
<row>
<entry>134</entry>
<entry>SWITCHING SYSTEM</entry>
<entry>102</entry>
<entry>EXTERNAL SYSTEMS</entry>
</row>
<row>
<entry>135</entry>
<entry>SWITCHING SYSTEM</entry>
<entry>102</entry>
<entry>SWITCHING SYSTEM</entry>
<entry>103</entry>
</row>
<row>
<entry>136</entry>
<entry>SWITCHING SYSTEM</entry>
<entry>103</entry>
<entry>EXTERNAL SYSTEMS</entry>
</row>
<row>
<entry>137</entry>
<entry>SWITCHING SYSTEM</entry>
<entry>103</entry>
<entry>SWITCHING SYSTEM</entry>
<entry>104</entry>
</row>
<row>
<entry>138</entry>
<entry>SWITCHING SYSTEM</entry>
<entry>104</entry>
<entry>EXTERNAL SYSTEMS</entry>
</row>
<row>
<entry namest="1" nameend="5" align="center" rowsep="1"/>
</row>
</tbody>
</tgroup>
</table>
</tables>
</p>
<p id="p-0032" num="0031">Transaction agent <b>105</b> is linked to remote switching system <b>104</b> and remote service processing system <b>109</b>. Service processing system <b>108</b> is also linked to remote service processing system <b>109</b>. Systems <b>104</b> and <b>109</b> are not included in communication system <b>100</b>, and may be in separate systems themselves. For example, transaction agent <b>105</b> could be located within a telecommunication service provider, and remote systems <b>104</b> and <b>109</b> could be located at another business or other service provider. Remote system <b>104</b> could be located in one business or service provider and remote system <b>109</b> could be located in another business or service provider.</p>
<p id="p-0033" num="0032">Switching systems <b>101</b>-<b>104</b> transfer communications between users. The communications may include voice, data, video, audio, or some other user information. For example, a first user may be connected to switching system <b>101</b> over link <b>131</b> and a second user may be connected to switching system <b>103</b> over link <b>136</b>. Switching system <b>101</b> would receive communications from the first user over link <b>131</b> and transfer them to switching system <b>103</b> over link <b>133</b>. Switching system <b>103</b> would receive the communications from switching system <b>101</b> and transfer them to the second user over link <b>136</b>. Switching systems <b>101</b>-<b>104</b> could include class four and five switches, packet switches and routers, distributed switches (soft switches and media gateways), wireless switches, international switches, satellite switches, and other communication systems that transfer user communications.</p>
<p id="p-0034" num="0033">Service processing systems <b>106</b>-<b>109</b> provide communication-handling information in response to queries. For example, service processing system <b>107</b> may receive a message from transaction agent <b>105</b> requesting a communication route. Service processing system <b>107</b> would select the route and transfer a message back to transaction agent <b>105</b> indicating the route. Service processing systems <b>106</b>-<b>109</b> could include SCPs, call processors, communication databases, and other processing systems that control communications. Communication-handling information indicates a route or other treatment for handling the communications.</p>
<p id="p-0035" num="0034">In operation, switching systems <b>101</b>-<b>104</b> receive communication requests from the external systems. In response to the communication requests, switching systems <b>101</b>-<b>104</b> transfer queries to transaction agent <b>105</b>. Transaction agent <b>105</b> processes the queries with pre-discrimination logic to transfer action messages to service processing systems <b>106</b>-<b>109</b>. Service processing systems <b>106</b>-<b>109</b> process the action messages with action logic to return communication-handling data to transaction agent <b>105</b>. Transaction agent <b>105</b> transfers responses to switching systems <b>101</b>-<b>104</b> indicating the communication-handling data. Switching systems <b>101</b>-<b>104</b> provide the communication based on the communication-handling data.</p>
<p id="p-0036" num="0035">In some examples, a switching system transfers a query message to transaction agent <b>105</b> if the communication request does not identify a route. In the context of the invention, a route is a switch, network element, connection, switch/trunk or packet address that operates downstream from the switching system that receives the communication request. Consider that switching system <b>101</b> receives a communication request for communications from connection <b>131</b>. If the communication request identifies switching system <b>103</b> as the route, then switching system <b>101</b> transfers the communications to switching system <b>103</b> and does not transfer the query message to transaction agent <b>105</b>. If the communication request identifies connection <b>133</b> as the route, then switching system <b>101</b> transfers the communications over connection <b>133</b> and does not transfer the query message to transaction agent <b>105</b>. If the communication request identifies connection <b>136</b> as the route, then switching system <b>101</b> transfers the communications to switching system <b>103</b> for transfer to connection <b>136</b> and does not transfer the query message to transaction agent <b>105</b>. In some cases the route is indicated by both switch and connection—referred to as a switch/trunk. For example, the communication request to switching system <b>101</b> could identify switching system <b>103</b> and connection <b>136</b> as the switch/trunk and no query message would be required. In addition, the communication request to switching system <b>101</b> could identify a packet address (such as an ATM or IP address) as the route, so switching system <b>101</b> would transfer the call communications in packets having the address and would not need to transfer the query message to transaction agent <b>105</b>. Many call request messages will contain a called telephone number, but that is not a route in the context of the invention because the called telephone number must still be translated into a route. If the call request message identifies a called telephone number and not a route, then switching system <b>101</b> transfers a query message to transaction agent <b>105</b> to obtain the route.</p>
<p id="p-0037" num="0036">The query-action-return-response message sequence may follow many paths that pass through transaction agent <b>105</b>. Transaction agent <b>105</b> may receive a query from any of the switching systems, transfer an action message to any of the service processing systems in response to the query, receive call-handling information in return, and provide the communication-handling information in a response to the querying switching system. For example, the query-action-return-response sequence may follow the following paths as indicated by the reference numbers of <figref idref="DRAWINGS">FIG. 1</figref>: <b>103</b>-<b>105</b>-<b>106</b>-<b>105</b>-<b>103</b>; <b>102</b>-<b>105</b>-<b>109</b>-<b>105</b>-<b>102</b>; <b>104</b>-<b>105</b>-<b>107</b>-<b>105</b>-<b>104</b>; or <b>104</b>-<b>105</b>-<b>109</b>-<b>105</b>-<b>104</b>.</p>
<p id="p-0038" num="0037">Like switching systems <b>101</b>-<b>103</b>, remote switching system <b>104</b> may be simplified by using service control system <b>110</b> instead of its own service logic. In addition, remote service processing system may exert service control over switching systems <b>101</b>-<b>104</b> through service control system <b>110</b>.</p>
<p id="p-0039" num="0038">In some examples, transaction agent <b>105</b> would select which service processing system to query—as opposed to using a set assignment. This selection could be based on matching the type of call with the capabilities of given service processing system. The selection could also be based on resource utilization where an attempt is made to load balance and direct tasks away from over-busy links, processors, and databases.</p>
<p id="p-0040" num="0039">In some examples, transaction agent <b>105</b> may send multiple action messages to different service processing systems and correlate the call-handling data from the different service processing systems into a single response to the switching system. For example, transaction agent <b>105</b> may send an action message to service processing system <b>106</b> to validate the caller and send another action message to service processing system <b>109</b> to obtain a route. The transaction agent would receive call-handling information from service processing systems <b>106</b> and <b>109</b>. The transaction agent would respond to the switching system with the selected route if the caller is correctly validated, and if not, respond with a call termination instruction and possibly a message to the invalid caller.</p>
<p id="p-0041" num="0040">In some examples, transaction agent <b>105</b> may return multiple responses based on the call-handling data. For example, transaction agent <b>105</b> may receive a query from switching system <b>101</b>, transfer a corresponding action message to service processing system <b>106</b> and receive call-handling data, respond to switching system <b>101</b> with the call-handling data, and also transfer the call-handling data to switching system <b>102</b>. Transaction agent <b>105</b> may also transfer the call-handling data to other systems, such as interactive service platforms or billing systems.</p>
<p id="p-0042" num="0041">In some examples, transaction agent <b>105</b> adds billing information to the responses. The switching systems then add the billing information to billing files, and typically add their own billing information to the file. The switching systems transfer the billing files to a billing system.</p>
<p id="p-0043" num="0042">In some examples, transaction agent <b>105</b> communicates with systems that handle the communications, but that may not be considered to be switching systems. For example, an interactive service platform may provide messages to a caller to prompt caller inputs in return. The caller inputs may indicate account numbers, menu selections, or other information. Transaction agent <b>105</b> may transfer information or instructions to a platform to assist in call-handling. Such information could include the caller number or called number. Such instructions could identify a particular call-handling application to execute on the call.</p>
<p id="p-0044" num="0043">In some examples, transaction agent <b>105</b> may transfer information or instructions to processing systems that may not be considered as service processing systems. For example, transaction agent <b>105</b> may transfer information to a billing systems indicating characteristics of the communications and the processing that was used for the communication. In another example, transaction agent may transfer information or instructions to a context server. Such information could include call reference identification, caller number, information collected from a caller, called number, and other call or caller related data. Typically, other systems may query the context server to obtain the information.</p>
<p id="p-0045" num="0044"><figref idref="DRAWINGS">FIG. 2</figref> illustrates transaction agent <b>105</b> and service processing system <b>106</b> in an example of the invention. Transaction agent <b>105</b> includes communication interface <b>211</b> and processing system <b>212</b> that are linked together. Processing system <b>212</b> includes storage system <b>213</b> that stores software <b>214</b>. Communication interface <b>211</b> is also linked to switching systems <b>101</b>-<b>104</b> and service processing systems <b>106</b>-<b>109</b>. Service processing system <b>106</b> includes communication interface <b>215</b> and processing system <b>216</b> that are linked together. Processing system <b>215</b> includes storage system <b>217</b> that stores software <b>218</b>. Communication interface <b>215</b> is also linked to communication interface <b>211</b>.</p>
<p id="p-0046" num="0045">Communication interfaces <b>211</b> and <b>215</b> could be comprised of network interface cards, communication ports, or some other type of communication devices. Processing systems <b>212</b> and <b>216</b> could be comprised of computer circuitry and equipment or some other type of automated processing system. Storage systems <b>213</b> and <b>217</b> could be comprised of memory circuits, memory drives, or some other type of memory devices. Processing systems <b>212</b> and <b>216</b> respectively retrieve and execute software <b>214</b> and <b>218</b> from storage systems <b>213</b> and <b>217</b>.</p>
<p id="p-0047" num="0046">Software <b>214</b> and <b>218</b> may include operating systems, utilities, drivers, networking software, application software, and other software typically loaded onto a communications computer system. Software <b>214</b> and <b>218</b> could comprise program code, firmware, or some other form of machine-readable processing instructions. When executed by processing systems <b>212</b> and <b>216</b>, software <b>214</b> and <b>218</b> directs processing systems <b>212</b> and <b>216</b> to operate in accord with this disclosure. Based on this disclosure, those skilled in the art could modify the Open Call Platform from Hewlett-Packard to make and use transaction agent <b>105</b>. Based on this disclosure, those skilled in the art could modify the Service Control Point from Compaq to make and use service processing system <b>106</b>.</p>
<p id="p-0048" num="0047"><figref idref="DRAWINGS">FIG. 3</figref> illustrates a logical architecture in an example of the invention. The logical architecture includes pre-discrimination logic <b>320</b> and action logic <b>325</b>. Pre-discrimination logic <b>320</b> includes branch logic <b>321</b>, parallel logic <b>322</b>, and merge logic <b>323</b>. Parallel logic <b>322</b> includes pre-discrimination functions 1-N. Action logic <b>325</b> includes selection logic <b>326</b>, action functions <b>327</b>, and result logic <b>328</b>. Action logic <b>325</b> includes action functions 1-N. Action functions 1-N could reside locally in service processing systems <b>106</b>-<b>108</b> or remotely in service processing system <b>109</b>.</p>
<p id="p-0049" num="0048">In operation, parallel branch logic <b>321</b> receives a query message from a switching system and selects pertinent data from the query message. Parallel branch logic <b>321</b> provides the pertinent data in parallel to the pre-discrimination functions 1-N in parallel logic <b>322</b>. All pre-discrimination functions 1-N execute concurrently on the data and pass their output to merge logic <b>323</b>. Merge logic <b>323</b> processes the outputs to transfer an action message to selection logic <b>326</b> in action logic <b>325</b>. Selection logic <b>326</b> transfers pertinent data from the action message to the selected action function. The selected action function processes the pertinent data to produce the communication-handling data. Typically the communication-handling data is routing information. The selected action function transfers the communication-handling data to return logic <b>328</b>. Return logic <b>328</b> transfers a return message indicating the communication-handling data to transaction agent <b>105</b>. Transaction agent <b>105</b> transfers a response message indicating the communication-handling data to the switching system that sent the query.</p>
<p id="p-0050" num="0049">In some examples, some or all of the pre-discrimination functions 1-N may first determine if the function needs to run, so unnecessary pre-discrimination functions may self-terminate instead of running. Various tests on the data could be devised to cause self-termination.</p>
<p id="p-0051" num="0050">In some examples of the invention, pre-discrimination logic <b>320</b> resides in transaction agent <b>105</b> and action logic <b>325</b> resides in service processing system <b>106</b>. In these examples, the remote action functions could reside in service processing system <b>109</b> or other remote systems.</p>
<p id="p-0052" num="0051">Typically, transaction agent <b>105</b> receives multiple query messages in a concurrent fashion. There can be multiple concurrent instances of pre-discrimination logic <b>320</b> to process the multiple concurrent query messages. Typically, the same functions occurring in different instances of pre-discrimination logic <b>320</b> will use the same data. Typically, action logic <b>325</b> receives action messages in a concurrent fashion. There can be multiple concurrent instances of action logic <b>325</b> to process the multiple concurrent action messages. Typically, the same action functions occurring in different instances of action logic <b>325</b> will use the same data.</p>
<p id="p-0053" num="0052">In some examples, some pre-discrimination functions 1-N have an associated data structure. Each data structure has entries, and each entry has an associated score and action type. Each action type points to one of the action functions <b>327</b> in action logic <b>325</b>. Thus, the entries in a given data structure may have different scores and may point to different action functions. A pre-discrimination function first extracts specific data from the query and then attempts to match the extracted data with an entry in its data structure. For example, a called number pre-discrimination function would extract the called number from the query, and then try to match the called number with an entry in its called number data structure. The entries may use wildcards, ranges, and other techniques for matching. If matches occur, the pre-discrimination functions 1-N provide the scores and action types for the matches to merge logic <b>328</b> along with the extracted data. Merge logic <b>328</b> selects the action type with the highest score and populates an action message for the action type with the pertinent extracted data.</p>
<p id="p-0054" num="0053">In case of multiple matches with tie scores, the match that is more explicit is selected. Matches having specific digits are more explicit than matches having wildcards. A match is also more explicit if it has more specific digits than another match. The most explicit match is an exact match of the most specific digits without wildcards or ranges.</p>
<p id="p-0055" num="0054">In some examples, some of the pre-discrimination functions 1-N may provide additional information to merge logic <b>328</b> for inclusion in the action message. For example, a pre-discrimination function may determine if the requested communication is between two specific parties, and if so, provide such information to merge logic <b>328</b> for inclusion in the action message. In another example, a pre-discrimination function may determine a set of interactive service platforms or service processing systems with the best current availability, and provide such information to merge logic <b>328</b> for inclusion in the action message.</p>
<p id="p-0056" num="0055">The action functions are typically comprised of action blocks. Various blocks may be re-used in numerous action functions. For example, a caller number validation block may be used in each action function that needs to validate a caller number. In some examples, each block is a software object, and an action function is a collection of objects that are linked together in some sequence.</p>
<p id="h-0009" num="0000">Telecommunication Network—<figref idref="DRAWINGS">FIGS. 4-6</figref></p>
<p id="p-0057" num="0056"><figref idref="DRAWINGS">FIG. 4</figref> illustrates telecommunication network <b>400</b> in an example of the invention. Telecommunication network <b>400</b> includes switching systems <b>401</b>-<b>403</b>, core transport system <b>404</b>, and service control system <b>405</b>. Switching system <b>401</b> includes soft switch <b>406</b> and media gateway <b>410</b>. Switching system <b>402</b> includes soft switch <b>407</b> and media gateway <b>411</b>. Switching system <b>403</b> includes soft switch <b>408</b> and media gateway <b>412</b>. Service control system <b>405</b> is linked to soft switches <b>406</b>-<b>408</b>. Core transport system <b>404</b> is linked to media gateways <b>410</b>-<b>412</b>. Soft switches <b>406</b>-<b>408</b> are respectively linked to media gateways <b>410</b>-<b>412</b>. Communication systems <b>421</b>-<b>423</b> are respectively linked to switching systems <b>401</b>-<b>403</b>. Note that the typical number of communication systems and switching systems has been restricted for clarity.</p>
<p id="p-0058" num="0057">Communication systems <b>421</b>-<b>423</b> comprise equipment that transfer call requests to soft switches <b>406</b>-<b>408</b> and transfer call communications to media gateways <b>410</b>-<b>412</b>. The communications may include voice, data, video, audio, or some other user information. Communication systems <b>421</b>-<b>423</b> could be equipment located at a business, residence, local telephone network, long distance telephone network, internet service provider, wireless communication system, satellite communication network, international communication network, packet communication network, or some other type of system that requires communication services.</p>
<p id="p-0059" num="0058">Soft switches <b>406</b>-<b>408</b> process call requests to obtain routes and transfer control messages indicating the routes to media gateways <b>410</b>-<b>412</b>. Media gateways <b>410</b>-<b>412</b> transfer the call communications over the routes indicated in the control messages. The routes are typically from media gateways <b>410</b>-<b>412</b> through core transport network <b>404</b> to a destination. Based on this disclosure, those skilled in the art could modify the CS2K system from Nortel Networks to make and use switching systems <b>401</b>-<b>403</b>.</p>
<p id="p-0060" num="0059">Core transport system <b>404</b> could be conventional and implement technologies such as Asynchronous Transfer Mode (ATM), Internet Protocol (IP), Time Division Multiplex (TDM), Synchronous Optical Network (SONET), Wavelength Division Multiplexing (WDM), satellite communications, wireless communications, optical communications, or some other communications technology.</p>
<p id="p-0061" num="0060"><figref idref="DRAWINGS">FIG. 5</figref> illustrates service control system <b>405</b> in an example of the invention. Service control system includes transaction agents <b>531</b>-<b>532</b> and SCPs <b>533</b>-<b>534</b>. In telecommunication network <b>400</b>, each soft switch is linked to at least two transaction agents, so soft switches <b>406</b>-<b>408</b> are each linked to transaction agents <b>531</b>-<b>532</b>. For a given soft switch, one of the transaction agents functions as a primary resource and the other transaction agent functions as a secondary resource. In telecommunication network <b>400</b>, each transaction agent is linked to at least two SCPs, so transaction agents <b>531</b>-<b>532</b> are each linked to SCPs <b>533</b>-<b>534</b>. For a given transaction agent, one of the SCPs functions as a primary resource, and the other SCP functions as a secondary resource. From <figref idref="DRAWINGS">FIG. 3</figref>, transaction agents <b>531</b>-<b>532</b> could include pre-discrimination logic <b>320</b>, and SCPs <b>533</b>-<b>534</b> could include action logic <b>325</b>.</p>
<p id="p-0062" num="0061">Referring to <figref idref="DRAWINGS">FIG. 6</figref>, communication system <b>422</b> transfers a call request to soft switch <b>407</b>. Examples of the call request include Signaling System #7 (SS7) Initial Address Messages (IAMs), Integrated Services Digital Network (ISDN) call set-up messages, GR-303 call set up messages, superframe signaling, in-band Dual Tone Multi-Frequency (DTMF) tones, Simple Internet Protocol (SIP) messages, or some other request for call communications. In response to the call request, soft switch <b>407</b> transfers a query to transaction agent <b>531</b>. One example of a query is Transaction Capability Application Part (TCAP) message that indicates the called number and nature of called number, calling number and nature of calling number, calling line identification, originating switching system identification, originating trunk identification, trigger index, and call reference identification. Another example of a query is a SIP query.</p>
<p id="p-0063" num="0062">Transaction agent <b>531</b> processes the query using parallel pre-discrimination logic to transfer an action message to SCP <b>533</b>. SCP <b>533</b> processes the action message with selected action logic to determine a route for the call. Examples of a route include a downstream switch, network element, connection, switch/trunk, or packet address (such as IP or ATM). The route is distinguishable from a telephone number that must be translated to a route.</p>
<p id="p-0064" num="0063">SCP <b>533</b> transfers a return message to transaction agent <b>531</b> indicating the route. Transaction agent <b>531</b> processes the return message to transfer a response message to soft switch <b>407</b> indicating the route. Soft switch <b>407</b> processes the response message to implement the route for the call. Soft switch <b>407</b> transfers a control message to media gateway <b>411</b> indicating the incoming call from communication system <b>422</b> and instructions to implement the selected route. Media gateway <b>411</b> receives call communications from communication system <b>422</b>, and in response to the control message, transfers the call communications through core transport network <b>404</b> to the proper destination using the route. If the route selected by the service control system is a switch/trunk, then the soft switch and media gateway would transfer the call communications to the switch, and the switch would transfer the call communications over the trunk. If the route selected by the service control system is a packet address, then the soft switch and media gateway would transfer the call communications in packets having the address.</p>
<p id="p-0065" num="0064">The decision by the soft switch to send the query may take many forms. The soft switch may first check for a route in the call request before transferring a query to the transaction agent. If there is no route, then the soft switch transfers the query to the transaction agent, but if there is a route in the call request, then the soft switch implements the route. For example, in response to a call request, the soft switch could transfer a query to the transaction agent unless the call request is an IAM that identifies a route in the generic digits field. In response to a call request, the soft switch could transfer a query to the transaction agent unless the call request indicates a switch/trunk or a packet address. The soft switch could also transfer a query in response to every call request.</p>
<p id="p-0066" num="0065">As described for <figref idref="DRAWINGS">FIG. 3</figref>, a set of a parallel pre-discrimination functions operate on data from the query. The parallel functions extract appropriate data, attempt to match the extracted data in data structures, and provide corresponding scores and action types for any matches. An action message for the action type with the highest score is then populated with the appropriate extracted data. Examples of the parallel pre-discrimination functions include: trigger index, originating switching system, originating trunk, nature of called number, nature of calling number, called number prefix digits, called number, caller number, Originating Line Indicator (OLI), Carrier Identification Code (CIC), calling line identification, and call reference identification. If desired combinations of elements may also be grouped in a single function. For example, a pre-discrimination function could look for a particular match of both caller and called number. A highly simplified version of a called number data structure is given below where asterisks represent wild cards.</p>
<p id="p-0067" num="0066">
<tables id="TABLE-US-00002" num="00002">
<table frame="none" colsep="0" rowsep="0">
<tgroup align="left" colsep="0" rowsep="0" cols="1">
<colspec colname="1" colwidth="217pt" align="center"/>
<tbody valign="top">
<row>
<entry namest="1" nameend="1" align="center" rowsep="1"/>
</row>
<row>
<entry>CALLED NUMBER DATA STRUCTURE</entry>
</row>
</tbody>
</tgroup>
<tgroup align="left" colsep="0" rowsep="0" cols="3">
<colspec colname="1" colwidth="63pt" align="center"/>
<colspec colname="2" colwidth="35pt" align="center"/>
<colspec colname="3" colwidth="119pt" align="center"/>
<tbody valign="top">
<row>
<entry>ENTRIES</entry>
<entry>SCORE</entry>
<entry>ACTION TYPE</entry>
</row>
<row>
<entry namest="1" nameend="3" align="center" rowsep="1"/>
</row>
</tbody>
</tgroup>
<tgroup align="left" colsep="0" rowsep="0" cols="3">
<colspec colname="1" colwidth="63pt" align="center"/>
<colspec colname="2" colwidth="35pt" align="char" char="."/>
<colspec colname="3" colwidth="119pt" align="center"/>
<tbody valign="top">
<row>
<entry>1-800-***-****</entry>
<entry>.5</entry>
<entry>GENERIC TOLL FREE</entry>
</row>
<row>
<entry>1-800-555-1000</entry>
<entry>1</entry>
<entry>CUSTOMER X PROGRAM</entry>
</row>
<row>
<entry>1-703-***-****</entry>
<entry>.5</entry>
<entry>WASHINGTON DC POTS ROUTE</entry>
</row>
<row>
<entry/>
<entry/>
<entry>PLAN</entry>
</row>
<row>
<entry>1-703-123-****</entry>
<entry>.7</entry>
<entry>CUSTOMER Y PROGRAM</entry>
</row>
<row>
<entry namest="1" nameend="3" align="center" rowsep="1"/>
</row>
</tbody>
</tgroup>
</table>
</tables>
</p>
<p id="p-0068" num="0067">For example, the called number pre-discrimination function extracts the called number (if any) from the query data and attempts to match the called number with entries in a called number data structure. If multiple matches are found the more explicit match is used. The score and the action type for a selected called number match are output along with the extracted called number. Likewise, the caller number pre-discrimination function extracts the caller number (if any) from the query data and attempts to match the caller number with entries in a caller number data structure. If multiple matches are found, then the more explicit match is used. The score and the action type for a selected caller number match are output along with the extracted caller number. Other pre-discrimination functions would operate in a similar fashion for their particular data. From all pre-discrimination function outputs, the action type with the highest score is selected, and in the case of a tie, the more explicit match is used. The selected action type corresponds to a specific action message that is populated with the extracted data—including the extracted caller number and extracted called number if appropriate. The action message points to a specific action function.</p>
<p id="p-0069" num="0068">The SCP processes the action message with the specific action function that corresponds to the action message. Examples of action logic include: local telephone call processing, domestic long distance telephone call processing, international telephone call processing, wireless telephone call processing, packet network telephone call processing, Internet telephone call processing, toll-free telephone call processing, calling card telephone call processing, Virtual Private Network (VPN) telephone call processing, POTS telephone call processing, Dedicated Access Line (DAL) telephone call processing, Wireless Government Emergency Telephone System processing, operator services telephone call processing, packet network data communication processing, Internet data communication processing, exception processing, and remote system call processing. In addition, specific customers may have their own telephone call processing and data communication processing action functions.</p>
<p id="p-0070" num="0069"><figref idref="DRAWINGS">FIG. 7</figref> illustrates a logical flow in an example of the invention. In this simple example, various data from the call request message are extracted and provided in parallel to a set of data structures that operate concurrently. The extracted data comprises the called number, caller number, originating switch ID, and originating trunk ID, and there are four corresponding data structures with one each for called number, caller number, originating switch, and originating trunk. The data structures represent the parallel pre-discrimination functions described above. Each data structure attempts to match its extracted data with data structure entries. In case of multiple matches, the more explicit match is used. Each of the data structures transfers its extracted data along with the score and action type for their match (if any). The action type with highest score across all data structures is selected, and an action message for the selected action type is populated with the appropriate extracted data—called number, caller number, originating switch, and originating trunk. The action message is transferred to the action function that corresponds to the action message, and thus, to the selected action type. The action function processes the action message to provide a route.</p>
<p id="h-0010" num="0000">Service Examples</p>
<p id="p-0071" num="0070">The following examples serve to further illustrate the invention and to distinguish features of the invention from the prior art.</p>
<p id="p-0072" num="0071">Consider the example where a network centralizes all POTS call processing logic through the transaction agent and service processing system. If a new area code is added, then the POTS called number processing logic in the centralized system would be modified to handle the new area code. Advantageously, the logic in multiple switching systems would not have to be modified in response to the new area code.</p>
<p id="p-0073" num="0072">Consider the example where a network adds packet-based switching systems in addition to their legacy TDM-based switching systems to handle traffic growth. With service logic deployed through a transaction agent and service processing system, extensive service logic does not need to be deployed in each of the new packet-based systems.</p>
<p id="p-0074" num="0073">Consider the example where a customer desires to host their own routing plan for calls to a given toll-free number. A new action function to implement the desired routing plan would be devised—typically using some existing action blocks. An action message would be defined to include the appropriate data for the action function. An action type and score would be placed with an entry for the toll-free number in the called number data structure of the transaction agent. The customer would also set up their own remote call processor to process the new action messages with the action function that implements their routing plan. Since calls to the toll-free number would receive the highest score for the called number match, the new action message would be populated with the appropriate data and transferred to the remote call processor for route selection. Advantageously, switching systems do not need to be programmed to recognize the toll-free number or to transfer queries to the remote call processor.</p>
<p id="p-0075" num="0074">Consider the example where a wireless network transfers calls to a long distance network. The wireless switching system could transfer a query to a transaction agent shared by both wireless and long distance networks, and a service processing system could perform both the wireless network and long distance network caller validations from a central location. Advantageously, neither of the switching systems need to host the caller validation logic.</p>
<p id="p-0076" num="0075">Consider the example where both class 4 switches and Internet routers handle toll free calls. The transaction agent may receive TCAP queries from the class 4 switches and receive SIP queries from the routers. Both types of queries may result in the same type of action messages that are handled by the same toll-free action function. Advantageously, the action function does not need to be customized to handle TCAP and SIP messages. In addition, the switches and routers may use their own query formats.</p>
<p id="p-0077" num="0076">Consider the example where a major event congests traffic in a given trunk group, switch, or region. Instead of re-programming multiple switching systems to avoid the congestion, the centralized service logic may be changed—possibly in only a few locations—to route traffic away from the congestion.</p>
<p id="p-0078" num="0077">Consider the example where a communication between two parties must be specially handled. For example, it must be encrypted or monitored. The transaction agent could be modified to identify such a communication and send an action message to the logic to implement the special handling. Advantageously, the logic in the switching systems could remain unaffected.</p>
<p id="p-0079" num="0078">From the above description, it should be appreciated that multiple different types of systems may send various types of queries to the transaction agent, and these systems do not require their own service logic. This eases the introduction of different types of switching systems and network elements. The transaction agent effectively selects the action function and provides the selected action function with the proper data in the format suitable for the action function. Thus, the actions functions do not need custom interfaces for each type of switching system. In addition, the transaction agent provides a central point of access to service logic. Fewer copies of the service logic now reside in fewer locations, so modifications and updates are much easier. The relative ease of changes allows more dynamic customer programs and traffic control techniques to be implemented.</p>
<?DETDESC description="Detailed Description" end="tail"?>
</description>
<us-claim-statement>The invention claim is:</us-claim-statement>
<claims id="claims">
<claim id="CLM-00001" num="00001">
<claim-text>1. A communication system comprising:
<claim-text>a first switching system configured to receive and process a first communication request for a first communication to determine if the first communication request indicates a first route, if the first communication request does not indicate the first route, to transfer a first query message, receive and process a first response message indicating the first route, and transfer the first communication using the first route, and if the first communication request does indicate the first route, then to transfer the first communication using the first route;</claim-text>
<claim-text>a service control system configured to receive and process the first query message to generate and transfer the first response message indicating the first route; and</claim-text>
<claim-text>wherein the first route identifies one of a downstream switch, network element, connection, switch/trunk, and packet address.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00002" num="00002">
<claim-text>2. The communication system of <claim-ref idref="CLM-00001">claim 1</claim-ref> further comprising:
<claim-text>a second switching system configured to receive and process a second communication request for a second communication to determine if the second communication request indicates a second route, if the second communication request does not indicate the second route, to transfer a second query message, receive and process a second response message indicating the second route, and transfer the second communication using the second route, and if the second communication request does indicate the second route, then to transfer the second communication using the second route; and wherein</claim-text>
<claim-text>the service control system is configured to receive and process the second query message to generate and transfer the second response message indicating the second route.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00003" num="00003">
<claim-text>3. The communication system of <claim-ref idref="CLM-00002">claim 2</claim-ref> wherein the first query message and the second query message have different query message formats.</claim-text>
</claim>
<claim id="CLM-00004" num="00004">
<claim-text>4. The communication system of <claim-ref idref="CLM-00002">claim 2</claim-ref> wherein the first switching system and the second switching system are from different manufacturers.</claim-text>
</claim>
<claim id="CLM-00005" num="00005">
<claim-text>5. The communication system of <claim-ref idref="CLM-00002">claim 2</claim-ref> wherein the first switching system and the second switching system are in different communication systems.</claim-text>
</claim>
<claim id="CLM-00006" num="00006">
<claim-text>6. The communication system of <claim-ref idref="CLM-00002">claim 2</claim-ref> wherein the first switching system comprises a one of a class four switch and a class five switch and the second switching system comprises one of a packet switch and a packet router.</claim-text>
</claim>
<claim id="CLM-00007" num="00007">
<claim-text>7. The communication system of <claim-ref idref="CLM-00002">claim 2</claim-ref> wherein the first switching system comprises one of a class four switch and a class five switch and the second switching system comprises a wireless switch.</claim-text>
</claim>
<claim id="CLM-00008" num="00008">
<claim-text>8. The communication system of <claim-ref idref="CLM-00002">claim 2</claim-ref> wherein the first switching system comprises one of a packet switch and a packet router and the second switching system comprises a wireless switch.</claim-text>
</claim>
<claim id="CLM-00009" num="00009">
<claim-text>9. The communication system of <claim-ref idref="CLM-00001">claim 1</claim-ref> wherein the service control system is configured to process the query message with multiple parallel functions to generate an action message and to process the action message to select the first route.</claim-text>
</claim>
<claim id="CLM-00010" num="00010">
<claim-text>10. The communication system of <claim-ref idref="CLM-00009">claim 9</claim-ref> wherein one of the parallel functions comprises a called number function.</claim-text>
</claim>
<claim id="CLM-00011" num="00011">
<claim-text>11. The communication system of <claim-ref idref="CLM-00009">claim 9</claim-ref> wherein one of the parallel functions comprises a nature of number function.</claim-text>
</claim>
<claim id="CLM-00012" num="00012">
<claim-text>12. The communication system of <claim-ref idref="CLM-00009">claim 9</claim-ref> wherein one of the parallel functions comprises a caller number function.</claim-text>
</claim>
<claim id="CLM-00013" num="00013">
<claim-text>13. The communication system of <claim-ref idref="CLM-00009">claim 9</claim-ref> wherein one of the parallel functions comprises an originating line identification function.</claim-text>
</claim>
<claim id="CLM-00014" num="00014">
<claim-text>14. The communication system of <claim-ref idref="CLM-00009">claim 9</claim-ref> wherein one of the parallel functions comprises a originating switching system function.</claim-text>
</claim>
<claim id="CLM-00015" num="00015">
<claim-text>15. The communication system of <claim-ref idref="CLM-00009">claim 9</claim-ref> wherein one of the parallel functions comprises a originating trunk function.</claim-text>
</claim>
<claim id="CLM-00016" num="00016">
<claim-text>16. The communication system of <claim-ref idref="CLM-00009">claim 9</claim-ref> wherein one of the parallel functions comprises a trigger index function.</claim-text>
</claim>
<claim id="CLM-00017" num="00017">
<claim-text>17. The communication system of <claim-ref idref="CLM-00009">claim 9</claim-ref> wherein one of the parallel functions comprises a call reference identification function.</claim-text>
</claim>
<claim id="CLM-00018" num="00018">
<claim-text>18. The communication system of <claim-ref idref="CLM-00009">claim 9</claim-ref> wherein one of the parallel functions comprises a carrier identification code function.</claim-text>
</claim>
<claim id="CLM-00019" num="00019">
<claim-text>19. A communication method comprising:
<claim-text>in a first switching system, receiving and processing a first communication request for a first communication to determine if the first communication request indicates a first route;</claim-text>
<claim-text>in the first switching system, if the first communication request does indicate the first route, then transferring the first communication using the first route;</claim-text>
<claim-text>in the first switching system, if the first communication request does not indicate the first route, transferring a first query message, receiving and processing a first response message indicating the first route, and transferring the first communication using the first route;</claim-text>
<claim-text>in a service control system, receiving and processing the first query message to generate and transfer the first response message indicating the first route; and</claim-text>
<claim-text>wherein the first route identifies one of a one of a downstream switch, network element, connection, switch/trunk, and packet address.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00020" num="00020">
<claim-text>20. The communication method of <claim-ref idref="CLM-00019">claim 19</claim-ref> further comprising:
<claim-text>in a second switching system, receiving and processing a second communication request for a second communication to determine if the second communication request indicates a second route;</claim-text>
<claim-text>in the second switching system, if the second communication request does indicate the second route, then transferring the second communication using the second route;</claim-text>
<claim-text>in the second switching system, if the second communication request does not indicate the second route, transferring a second query message, receiving and processing a second response message indicating the second route, and transferring the second communication using the second route; and</claim-text>
<claim-text>in the service control system, receiving and processing the second query message to generate and transfer the second response message indicating the second route.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00021" num="00021">
<claim-text>21. The communication method of <claim-ref idref="CLM-00020">claim 20</claim-ref> wherein the first query message and the second query message have different query message formats.</claim-text>
</claim>
<claim id="CLM-00022" num="00022">
<claim-text>22. The communication method of <claim-ref idref="CLM-00020">claim 20</claim-ref> wherein the first switching system and the second switching system are from different manufacturers.</claim-text>
</claim>
<claim id="CLM-00023" num="00023">
<claim-text>23. The communication method of <claim-ref idref="CLM-00020">claim 20</claim-ref> wherein the first switching system and the second switching system are in different communication systems.</claim-text>
</claim>
<claim id="CLM-00024" num="00024">
<claim-text>24. The communication method of <claim-ref idref="CLM-00020">claim 20</claim-ref> wherein the first switching system comprises one of a class four switch and a class five switch and the second switching system comprises one of a packet switch and a packet router.</claim-text>
</claim>
<claim id="CLM-00025" num="00025">
<claim-text>25. The communication method of <claim-ref idref="CLM-00020">claim 20</claim-ref> wherein the first switching system comprises one of a class four switch and a class five switch and the second switching system comprises a wireless switch.</claim-text>
</claim>
<claim id="CLM-00026" num="00026">
<claim-text>26. The communication method of <claim-ref idref="CLM-00020">claim 20</claim-ref> wherein the first switching system comprises one of a packet switch and a packet router and the second switching system comprises a wireless switch.</claim-text>
</claim>
<claim id="CLM-00027" num="00027">
<claim-text>27. The communication method of <claim-ref idref="CLM-00019">claim 19</claim-ref> wherein, in the service control system, processing the first query message to generate and transfer the first response message comprises processing the first query message with multiple parallel functions to generate an action message and processing the action message to select the first route.</claim-text>
</claim>
<claim id="CLM-00028" num="00028">
<claim-text>28. The communication method of <claim-ref idref="CLM-00027">claim 27</claim-ref> wherein one of the parallel functions comprises a called number function.</claim-text>
</claim>
<claim id="CLM-00029" num="00029">
<claim-text>29. The communication method of <claim-ref idref="CLM-00027">claim 27</claim-ref> wherein one of the parallel functions comprises a nature of number function.</claim-text>
</claim>
<claim id="CLM-00030" num="00030">
<claim-text>30. The communication method of <claim-ref idref="CLM-00027">claim 27</claim-ref> wherein one of the parallel functions comprises a caller number function.</claim-text>
</claim>
<claim id="CLM-00031" num="00031">
<claim-text>31. The communication method of <claim-ref idref="CLM-00027">claim 27</claim-ref> wherein one of the parallel functions comprises an originating line identification function.</claim-text>
</claim>
<claim id="CLM-00032" num="00032">
<claim-text>32. The communication method of <claim-ref idref="CLM-00027">claim 27</claim-ref> wherein one of the parallel functions comprises a originating switching system function.</claim-text>
</claim>
<claim id="CLM-00033" num="00033">
<claim-text>33. The communication method of <claim-ref idref="CLM-00027">claim 27</claim-ref> wherein one of the parallel functions comprises a originating trunk function.</claim-text>
</claim>
<claim id="CLM-00034" num="00034">
<claim-text>34. The communication method of <claim-ref idref="CLM-00027">claim 27</claim-ref> wherein one of the parallel functions comprises a trigger index function.</claim-text>
</claim>
<claim id="CLM-00035" num="00035">
<claim-text>35. The communication method of <claim-ref idref="CLM-00027">claim 27</claim-ref> wherein one of the parallel functions comprises a call reference identification function.</claim-text>
</claim>
<claim id="CLM-00036" num="00036">
<claim-text>36. The communication method of <claim-ref idref="CLM-00027">claim 27</claim-ref> wherein one of the parallel functions comprises a carrier identification code function.</claim-text>
</claim>
</claims>
</us-patent-grant>
