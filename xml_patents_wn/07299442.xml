<us-patent-grant lang="EN" dtd-version="v4.2 2006-08-23" file="US07299442-20071120.XML" status="PRODUCTION" id="us-patent-grant" country="US" date-produced="20071106" date-publ="20071120">
<us-bibliographic-data-grant>
<publication-reference>
<document-id>
<country>US</country>
<doc-number>07299442</doc-number>
<kind>B2</kind>
<date>20071120</date>
</document-id>
</publication-reference>
<application-reference appl-type="utility">
<document-id>
<country>US</country>
<doc-number>11032878</doc-number>
<date>20050111</date>
</document-id>
</application-reference>
<us-application-series-code>11</us-application-series-code>
<us-term-of-grant>
<us-term-extension>227</us-term-extension>
</us-term-of-grant>
<classifications-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>G</section>
<class>06</class>
<subclass>F</subclass>
<main-group>17</main-group>
<subgroup>50</subgroup>
<symbol-position>F</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20071120</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
</classifications-ipcr>
<classification-national>
<country>US</country>
<main-classification>716 12</main-classification>
<further-classification>716 13</further-classification>
<further-classification>716 14</further-classification>
</classification-national>
<invention-title id="d0e53">Probabilistic congestion prediction with partial blockages</invention-title>
<references-cited>
<citation>
<patcit num="00001">
<document-id>
<country>US</country>
<doc-number>6952815</doc-number>
<kind>B2</kind>
<name>Teig et al.</name>
<date>20051000</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>716 14</main-classification></classification-national>
</citation>
<citation>
<patcit num="00002">
<document-id>
<country>US</country>
<doc-number>2003/0233627</doc-number>
<kind>A1</kind>
<name>Konno et al.</name>
<date>20031200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>716 14</main-classification></classification-national>
</citation>
<citation>
<nplcit num="00003">
<othercit>J. Westra et al., “Probabilistic Congestion Prediction”, Proceedings of ISPD, pp. 204-209 (Apr. 2004).</othercit>
</nplcit>
<category>cited by other</category>
</citation>
<citation>
<nplcit num="00004">
<othercit>J. Lou et al., “Estimating Routing Congestion Using Probabilistic Analysis”, IEEE Transactions on CADICS, vol. 21, No. 1, pp. 32-41 (Jan. 2002).</othercit>
</nplcit>
<category>cited by other</category>
</citation>
</references-cited>
<number-of-claims>18</number-of-claims>
<us-exemplary-claim>1</us-exemplary-claim>
<us-field-of-classification-search>
<classification-national>
<country>US</country>
<main-classification>716 12- 14</main-classification>
<additional-info>unstructured</additional-info>
</classification-national>
</us-field-of-classification-search>
<figures>
<number-of-drawing-sheets>7</number-of-drawing-sheets>
<number-of-figures>11</number-of-figures>
</figures>
<us-related-documents>
<related-publication>
<document-id>
<country>US</country>
<doc-number>20060156266</doc-number>
<kind>A1</kind>
<date>20060713</date>
</document-id>
</related-publication>
</us-related-documents>
<parties>
<applicants>
<applicant sequence="001" app-type="applicant-inventor" designation="us-only">
<addressbook>
<last-name>Alpert</last-name>
<first-name>Charles Jay</first-name>
<address>
<city>Round Rock</city>
<state>TX</state>
<country>US</country>
</address>
</addressbook>
<nationality>
<country>omitted</country>
</nationality>
<residence>
<country>US</country>
</residence>
</applicant>
<applicant sequence="002" app-type="applicant-inventor" designation="us-only">
<addressbook>
<last-name>Li</last-name>
<first-name>Zhuo</first-name>
<address>
<city>College Station</city>
<state>TX</state>
<country>US</country>
</address>
</addressbook>
<nationality>
<country>omitted</country>
</nationality>
<residence>
<country>US</country>
</residence>
</applicant>
<applicant sequence="003" app-type="applicant-inventor" designation="us-only">
<addressbook>
<last-name>Quay</last-name>
<first-name>Stephen Thomas</first-name>
<address>
<city>Austin</city>
<state>TX</state>
<country>US</country>
</address>
</addressbook>
<nationality>
<country>omitted</country>
</nationality>
<residence>
<country>US</country>
</residence>
</applicant>
</applicants>
<agents>
<agent sequence="01" rep-type="attorney">
<addressbook>
<last-name>Salys</last-name>
<first-name>Casimer K.</first-name>
<address>
<country>unknown</country>
</address>
</addressbook>
</agent>
<agent sequence="02" rep-type="attorney">
<addressbook>
<last-name>Musgrove</last-name>
<first-name>Jack V.</first-name>
<address>
<country>unknown</country>
</address>
</addressbook>
</agent>
</agents>
</parties>
<assignees>
<assignee>
<addressbook>
<orgname>International Business Machines Corporation</orgname>
<role>02</role>
<address>
<city>Armonk</city>
<state>NY</state>
<country>US</country>
</address>
</addressbook>
</assignee>
</assignees>
<examiners>
<primary-examiner>
<last-name>Whitmore</last-name>
<first-name>Stacy</first-name>
<department>2825</department>
</primary-examiner>
</examiners>
</us-bibliographic-data-grant>
<abstract id="abstract">
<p id="p-0001" num="0000">A method of estimating routing congestion between pins in a net of an integrated circuit design, by establishing one or more potential routes between the pins which pass through buckets in the net, assigning a probabilistic usage to each bucket based on any partial blockage of the wiring tracks in each bucket, and computing routing congestion for each bucket using its probabilistic usage. When the net is a two-pin net that is a part of a larger multi-pin net, and a tree is constructed to bridge the two-pin net to another pin of the multi-pin net. The routing congestion for each bucket is computed as a ratio of the bucket usage to bucket capacity. For L-shaped routes (having at least one bend in a bucket), the probabilistic usage is proportional to a scale factor a which is a ratio of a minimum number of available wiring tracks for a given route to a sum of minimum numbers of available wiring tracks for all possible routes. For Z-shaped routes (having at least two bends in two respective buckets), the probabilistic usage is equal to a ratio of a minimum capacity of a given route to a sum of minimum capacities of all routes having an associated orientation with the given route. Assignment of the usage values may entail the creation of a temporary usage map of the net buckets with an initial value of zero usage in every temporary usage map bucket, thereafter storing usage values in corresponding buckets of the temporary usage map, and deriving a final usage map from the temporary usage map.</p>
</abstract>
<drawings id="DRAWINGS">
<figure id="Fig-EMI-D00000" num="00000">
<img id="EMI-D00000" he="134.45mm" wi="98.64mm" file="US07299442-20071120-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00001" num="00001">
<img id="EMI-D00001" he="210.82mm" wi="103.38mm" file="US07299442-20071120-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00002" num="00002">
<img id="EMI-D00002" he="234.53mm" wi="162.22mm" orientation="landscape" file="US07299442-20071120-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00003" num="00003">
<img id="EMI-D00003" he="207.77mm" wi="136.48mm" orientation="landscape" file="US07299442-20071120-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00004" num="00004">
<img id="EMI-D00004" he="190.08mm" wi="157.65mm" orientation="landscape" file="US07299442-20071120-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00005" num="00005">
<img id="EMI-D00005" he="221.23mm" wi="148.17mm" orientation="landscape" file="US07299442-20071120-D00005.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00006" num="00006">
<img id="EMI-D00006" he="198.54mm" wi="112.44mm" file="US07299442-20071120-D00006.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00007" num="00007">
<img id="EMI-D00007" he="149.69mm" wi="118.03mm" file="US07299442-20071120-D00007.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
</drawings>
<description id="description">
<?BRFSUM description="Brief Summary" end="lead"?>
<heading id="h-0001" level="1">BACKGROUND OF THE INVENTION</heading>
<p id="p-0002" num="0001">1. Field of the Invention</p>
<p id="p-0003" num="0002">The present invention generally relates to the fabrication and design of semiconductor chips and integrated circuits, and more specifically to routing tools which predict wire congestion.</p>
<p id="p-0004" num="0003">2. Description of the Related Art</p>
<p id="p-0005" num="0004">Integrated circuits are used for a wide variety of electronic applications, from simple devices such as wristwatches, to the most complex computer systems. A microelectronic integrated circuit (IC) chip can generally be thought of as a collection of logic cells with electrical interconnections between the cells, formed on a semiconductor substrate (e.g., silicon). An IC may include a very large number of cells and require complicated connections between the cells. A cell is a group of one or more circuit elements such as transistors, capacitors, resistors, inductors, and other basic circuit elements grouped to perform a logic function. Cell types include, for example, core cells, scan cells and input/output (I/O) cells. Each of the cells of an IC may have one or more pins, each of which in turn may be connected to one or more other pins of the IC by wires. The wires connecting the pins of the IC are also formed on the surface of the chip. For more complex designs, there are typically at least four distinct layers of conducting media available for routing, such as a polysilicon layer and three metal layers (metal-1, metal-2, and metal-3). The polysilicon layer, metal-1, metal-2, and metal-3 are all used for vertical and/or horizontal routing.</p>
<p id="p-0006" num="0005">An IC chip is fabricated by first conceiving the logical circuit description, and then converting that logical description into a physical description, or geometric layout. This process is usually carried out using a “netlist,” which is a record of all of the nets, or interconnections, between the cell pins. A layout typically consists of a set of planar geometric shapes in several layers. The layout is then checked to ensure that it meets all of the design requirements, particularly timing requirements. The result is a set of design files known as an intermediate form that describes the layout. The design files are then converted into pattern generator files that are used to produce patterns called masks by an optical or electron beam pattern generator. During fabrication, these masks are used to pattern a silicon wafer using a sequence of photolithographic steps. The component formation requires very exacting details about geometric patterns and separation between them. The process of converting the specifications of an electrical circuit into a layout is called the physical design.</p>
<p id="p-0007" num="0006">Cell placement in semiconductor fabrication involves a determination of where particular cells should optimally (or near-optimally) be located on the surface of a integrated circuit device. Due to the large number of components and the details required by the fabrication process for very large scale integrated (VLSI) devices, physical design is not practical without the aid of computers. As a result, most phases of physical design extensively use computer-aided design (CAD) tools, and many phases have already been partially or fully automated. Automation of the physical design process has increased the level of integration, reduced turn around time and enhanced chip performance. Several different programming languages have been created for electronic design automation (EDA), including Verilog, VHDL and TDML.</p>
<p id="p-0008" num="0007">Physical synthesis is prominent in the automated design of integrated circuits such as high performance processors and application specific integrated circuits (ASICs). Physical synthesis is the process of concurrently optimizing placement, timing, power consumption, crosstalk effects and the like in an integrated circuit design. This comprehensive approach helps to eliminate iterations between circuit analysis and place-and-route. Physical synthesis has the ability to repower gates, insert buffers, clone gates, etc., so the area of logic in the design remains fluid. However, physical synthesis can take days to complete.</p>
<p id="p-0009" num="0008">Routability is a key factor when performing floorplanning or trying to close on timing via physical synthesis. A designer can expend considerable effort trying to get the design into a good state in terms of timing and signal integrity, only to subsequently find that it is unroutable. Ideally, the designer should be able to invoke a snapshot routability analysis that allows him or her to understand the routability issues involved from making floorplanning or optimization decisions.</p>
<p id="p-0010" num="0009">During physical synthesis, wire congestion may be examined as part of the routing process. Circuit designers have devised various routing tools to provide reliable congestion information when designing the circuit, including empirical models, global routers, and probabilistic analysis. Among these, only probabilistic routing congestion analysis is particularly efficiently, since it avoids actually performing global routing. Instead, for a given placement, it examines the set of nets in the design and uses probability theory to compute the expected congestion for each routing tile.</p>
<p id="p-0011" num="0010">In one probabilistic analysis algorithm, all possible pin-to-pin routes within the bounding box of the pins are considered, and each route is assigned an equal usage probability. This approach invariably produces biased congestion towards the middle of the bounding box instead of the periphery. Since routers usually try to minimize the insertion of vias, the periphery of the bounding box actually has more congestion than the interior, so this approach can lead to unsatisfactory results.</p>
<p id="p-0012" num="0011">In another approach, the probabilistic analysis depends on the different types (shapes) of the routes. Every net is classified into one of four different categories: short nets, flat nets, L-shaped nets, and Z-shaped nets. These types of nets are illustrated in <figref idref="DRAWINGS">FIG. 1</figref>. A short net <b>2</b> is a net that locates in one tile or bin. A flat net <b>4</b> spans at most one tile in either the vertical or horizontal direction. An L-shaped net <b>6</b> or a Z-shaped net <b>8</b> spans more than one tile in either direction and have one or two bends, respectively. Probabilistic routing analysis is done exclusively for two-pin nets. Multi-pin nets are broken up into sets of two-pin nets by constructing a tree over the pins. For each net, a number of likely paths is considered and the probabilistic usages are assigned to each bin in the bounding box of the net. The net can be seen as spreading over its possible paths where each path has the same probability. Routing congestion is defined as the ratio of usage to capacity.</p>
<p id="p-0013" num="0012">While this approach leads to better probabilistic routing usage along the boundary of a net's bounding box, it still does not adequately address the problem of wiring blockages. Before global routing occurs, several requirements may stake claim to wiring resources which then become fixed for global routing. These requirements include local wiring on the bottom layers for the internal pin connections of a gate, power grids on multiple layers, pre-routed clock wires, planned buses, or datapaths, and hierarchical logic, memory, or propriety (IP) blocks. Those features may already have been completely routed; even if not, their routes may be hidden from the top-level routing congestion map. The corresponding bins are unlikely to block 100% of the routing resources since generally there will be some routing resources allocated on the top layers.</p>
<p id="p-0014" num="0013">Wiring blockage for a given bin can be complete, or partial. Complete blockages can be handled by simply omitting the bin from the possible paths. In practice, however, blockages with absolutely no available tracks are rarely seen, and previous approaches fail to realistically model that essentially every tile of a routing congestion map is neither completely empty or completely full. There is almost always some amount of wiring blockage that a global router will take into account, yet probabilistic routers do not take this reality into account. In conventional probabilistic analysis, if there are partial blockages in some bins, the usage of these bins is not changed at all. Rather, a simple model is applied in which the number of blocked tracks are subtracted from the capacity of the bin. A global router is thus more likely to route a net in a lower congestion region than in a higher one.</p>
<p id="p-0015" num="0014">In light of the foregoing, it would be desirable to devise an improved probabilistic method of predicting wire congestion which provides a practical approach to handling partial wiring blockages. It would be further advantageous if the method could improve the complexity the probabilistic analysis while still maintaining quality routing solutions.</p>
<heading id="h-0002" level="1">SUMMARY OF THE INVENTION</heading>
<p id="p-0016" num="0015">It is therefore one object of the present invention to provide an improved method of predicting wiring congestion when modeling routes of a net of an integrated circuit design.</p>
<p id="p-0017" num="0016">It is another object of the present invention to provide such a method which takes into consideration partial wiring blockages in the net.</p>
<p id="p-0018" num="0017">It is yet another object of the present invention to provide fast and accurate routing congestion estimation using a probabilistic metric that is more efficient than a global router but still achieves comparable results.</p>
<p id="p-0019" num="0018">The foregoing objects are achieved in a method of estimating routing congestion between pins in a net of an integrated circuit design, by establishing one or more potential routes between the pins which pass through buckets in the net (each bucket having a set of wiring tracks), assigning a probabilistic usage to each bucket based on any partial blockage of the wiring tracks in each bucket, and computing routing congestion for each bucket using its probabilistic usage. When the net is a two-pin net that is a part of a larger multi-pin net, and a tree is constructed to bridge the two-pin net to another pin of the multi-pin net. The routing congestion for each bucket is computed as a ratio of the bucket usage to bucket capacity. For L-shaped routes (having at least one bend in a bucket), the probabilistic usage is proportional to a scale factor a which is a ratio of a minimum number of available wiring tracks for a given route to a sum of minimum numbers of available wiring tracks for all possible routes. For Z-shaped routes (having at least two bends in two respective buckets), the probabilistic usage is equal to a ratio of a minimum capacity of a given route to a sum of minimum capacities of all routes having an associated orientation with the given route. In particular, the minimum capacity F(n) of the given route n is
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>F</i>(<i>n</i>)=min{<i>F</i>(<i>u</i><sub>1</sub>)·<i>F</i>(i d<sub>n</sub>)/<i>F</i><sub>R</sub>(<i>d</i><sub>1</sub>), . . . , <i>F</i>(<i>u</i><sub>n</sub>)·<i>F</i>(<i>d</i><sub>n</sub>)/<i>F</i><sub>R</sub>(<i>d</i><sub>n</sub>), <i>F</i>(<i>d</i><sub>n</sub>), <i>F</i>(<i>e</i><sub>n</sub>)·<i>F</i>(<i>d</i><sub>n</sub>)/<i>F</i><sub>L</sub>(<i>d</i><sub>n</sub>), . . . , <i>F</i>(<i>e</i><sub>Q</sub>)·<i>F</i>(<i>d</i><sub>Q</sub>)/<i>F</i><sub>L</sub>(<i>d</i><sub>Q</sub>)},<?in-line-formulae description="In-line Formulae" end="tail"?>
<br/>
where Q is the number of potential routes, d is one of a plurality of central span portions of the potential routes, u is one of a first plurality of edge portions of the potential routes that lie on a first side of the central span portions, e is one of a second plurality of edge portions of the potential routes that lie on a second side of the central span portions, F(u<sub>n</sub>) is the capacity associated with edge u<sub>n</sub>, F(d<sub>n</sub>) is the capacity associated with edge d<sub>n</sub>, F(e<sub>n</sub>) is the capacity associated with edge e<sub>n</sub>, F<sub>L</sub>(d<sub>n</sub>) is the total capacities of all central spans d to the left of span d<sub>n </sub>having an associated orientation with the given route, and F<sub>R</sub>(d<sub>n</sub>) is the total capacities of all central spans d to the right of span d<sub>n </sub>having the associated orientation with the given route. Assignment of the usage values may entail the creation of a temporary usage map of the net buckets with an initial value of zero usage in every temporary usage map bucket, thereafter storing usage values in corresponding buckets of the temporary usage map, and deriving a final usage map from the temporary usage map.
</p>
<p id="p-0020" num="0019">The above as well as additional objectives, features, and advantages of the present invention will become apparent in the following detailed written description.</p>
<?BRFSUM description="Brief Summary" end="tail"?>
<?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?>
<description-of-drawings>
<heading id="h-0003" level="1">BRIEF DESCRIPTION OF THE DRAWINGS</heading>
<p id="p-0021" num="0020">The present invention may be better understood, and its numerous objects, features, and advantages made apparent to those skilled in the art by referencing the accompanying drawings.</p>
<p id="p-0022" num="0021"><figref idref="DRAWINGS">FIG. 1</figref> is a plan view of a net of an integrated circuit design, illustrating different types (shapes) of routes according to the prior art;</p>
<p id="p-0023" num="0022"><figref idref="DRAWINGS">FIG. 2</figref> is a block diagram of a computer system programmed to carry out computer-aided design of an integrated circuit in accordance with one implementation of the present invention;</p>
<p id="p-0024" num="0023"><figref idref="DRAWINGS">FIG. 3</figref> is a plan view of a bin in a net route which has partial wiring blockage as viewed in accordance with one implementation of the present invention;</p>
<p id="p-0025" num="0024"><figref idref="DRAWINGS">FIG. 4</figref> is a plan view of a short net located in a single tile or bin, which is analyzed for wire congestion in accordance with one implementation of the present invention;</p>
<p id="p-0026" num="0025"><figref idref="DRAWINGS">FIG. 5</figref> is a plan view of a flat net spanning at most one tile in either the vertical or horizontal direction, which is analyzed for wire congestion in accordance with one implementation of the present invention;</p>
<p id="p-0027" num="0026"><figref idref="DRAWINGS">FIG. 6</figref> is a plan view of an L-shaped net, which is analyzed for wire congestion in accordance with one implementation of the present invention;</p>
<p id="p-0028" num="0027"><figref idref="DRAWINGS">FIG. 7</figref> is a plan view of a Z-shaped net, which is analyzed for wire congestion in accordance with one implementation of the present invention;</p>
<p id="p-0029" num="0028"><figref idref="DRAWINGS">FIG. 8</figref> is a generalized routing graph for a Z-shaped net constructed in accordance with one implementation of the present invention; and</p>
<p id="p-0030" num="0029"><figref idref="DRAWINGS">FIGS. 9A and 9B</figref> are routing graphs for two examples of wire congestion prediction for Z-shaped nets in accordance with one implementation of the present invention;</p>
<p id="p-0031" num="0030"><figref idref="DRAWINGS">FIG. 10</figref> is a chart illustrating the logical flow of the invention according to one implementation.</p>
</description-of-drawings>
<?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?>
<?DETDESC description="Detailed Description" end="lead"?>
<p id="p-0032" num="0031">The use of the same reference symbols in different drawings indicates similar or identical items.</p>
<heading id="h-0004" level="1">DESCRIPTION OF THE PREFERRED EMBODIMENT(S)</heading>
<p id="p-0033" num="0032">With reference now to the figures, and in particular with reference to <figref idref="DRAWINGS">FIG. 2</figref>, there is depicted one embodiment <b>10</b> of a computer system programmed to carry out computer-aided design of an integrated circuit in accordance with one implementation of the present invention. System <b>10</b> includes a central processing unit (CPU) <b>12</b> which carries out program instructions, firmware or read-only memory (ROM) <b>14</b> which stores the system's basic input/output logic, and a dynamic random access memory (DRAM) <b>16</b> which temporarily stores program instructions and operand data used by CPU <b>12</b>. CPU <b>12</b>, ROM <b>14</b> and DRAM <b>16</b> are all connected to a system bus <b>18</b>. There may be additional structures in the memory hierarchy which are not depicted, such as on-board (L1) and second-level (L2) caches. In high performance implementations, system <b>10</b> may include multiple CPUs and a distributed system memory.</p>
<p id="p-0034" num="0033">CPU <b>12</b>, ROM <b>14</b> and DRAM <b>16</b> are also coupled to a peripheral component interconnect (PCI) local bus <b>20</b> using a PCI host bridge <b>22</b>. PCI host bridge <b>22</b> provides a low latency path through which processor <b>12</b> may access PCI devices mapped anywhere within bus memory or I/O address spaces. PCI host bridge <b>22</b> also provides a high bandwidth path to allow the PCI devices to access DRAM <b>16</b>. Attached to PCI local bus <b>20</b> are a local area network (LAN) adapter <b>24</b>, a small computer system interface (SCSI) adapter <b>26</b>, an expansion bus bridge <b>28</b>, an audio adapter <b>30</b>, and a graphics adapter <b>32</b>. LAN adapter <b>24</b> may be used to connect computer system <b>10</b> to an external computer network <b>34</b>, such as the Internet. A small computer system interface (SCSI) adapter <b>26</b> is used to control high-speed SCSI disk drive <b>36</b>. Disk drive <b>36</b> stores the program instructions and data in a more permanent state, including the program which embodies the present invention as explained further below. Expansion bus bridge <b>28</b> is used to couple an industry standard architecture (ISA) expansion bus <b>38</b> to PCI local bus <b>20</b>. As shown, several user input devices are connected to ISA bus <b>38</b>, including a keyboard <b>40</b>, a microphone <b>42</b>, and a graphical pointing device (mouse) <b>44</b>. Other devices may also be attached to ISA bus <b>38</b>, such as a CD-ROM drive <b>46</b>. Audio adapter <b>30</b> controls audio output to a speaker <b>48</b>, and graphics adapter <b>32</b> controls visual output to a display monitor <b>50</b>, to allow the user to carry out the integrated circuit design as taught herein.</p>
<p id="p-0035" num="0034">While the illustrative implementation provides the program instructions embodying the present invention on disk drive <b>36</b>, those skilled in the art will appreciate that the invention can be embodied in a program product utilizing other computer-readable media, including transmission media. The program instructions may be written in the C++ programming language for an AIX environment.</p>
<p id="p-0036" num="0035">Computer system <b>10</b> carries out program instructions for an interconnect optimization process which predicts wire congestion using a novel method that includes consideration of partial wiring blockages. Accordingly, a program embodying the invention may include conventional aspects of various placement and timing tools, and these details will become apparent to those skilled in the art upon reference to this disclosure.</p>
<p id="p-0037" num="0036">In one embodiment, computer system <b>10</b> divides the layout of the integrated circuit (IC) chip into rows and columns of buckets (tiles or bins). As illustrated in <figref idref="DRAWINGS">FIG. 3</figref>, each bucket <b>60</b> contains a set of wiring tracks <b>62</b><i>a</i>-<b>62</b><i>f</i>. The height and width of all buckets are assumed to be same, and defined as H and W; the bucket size can be varied to trade off speed for solution quality. An exemplary bucket size is 30×30 wiring tracks. The distance between the left, right, bottom, or top border of a bucket and a pin p is denoted by l<sub>p</sub>, r<sub>p</sub>, b<sub>p</sub>, and t<sub>p</sub>, respectively. The pin's coordinates are given by (x<sub>p</sub>, y<sub>p</sub>). A 2-pin net f may span a number of buckets. The number of horizontal and vertical buckets net f spans are defined as the width and height of the bounding box containing f, respectively. In the discussion that follows, U<sub>h</sub><sup>f</sup>(i,j) and U<sub>v</sub><sup>f</sup>(i,j) are the horizontal and vertical usages due to a net f in the bucket with coordinates (i,j), wherein the i coordinate is the vertical direction and the j coordinate is the horizontal direction. The available horizontal and vertical capacities of the bucket at (i,j), denoted as A<sub>h</sub>(i,j) and A<sub>v</sub>(i,j), are the number of available horizontal and vertical wiring tracks <b>62</b> inside the bucket. In the example of <figref idref="DRAWINGS">FIG. 3</figref>, A<sub>v</sub>(i,j) is four, that is, four of the wire tracks are available (<b>62</b><i>b</i>, <b>6</b><i>d</i>, <b>62</b><i>e </i>and <b>62</b><i>f</i>) and two have partial blockages as indicated with darkened lines (<b>62</b><i>a</i>, <b>62</b><i>c</i>). The probabilistic horizontal and vertical congestion of a bucket is defined as the ratio of its total probabilistic usages contributed by all nets to its available capacity. In this implementation, the terms congestion and usage represents an average of horizontal and vertical congestion and usage. The probabilistic computations for each of the four different classes of nets (short, flat, L-shaped, and Z-shaped) proceed with the conventional assumption that the two pins of a net lie in the lower-left and upper-right corners of their bounding boxes.</p>
<p id="p-0038" num="0037">Multi-pin nets are broken up into sets of two-pin nets by constructing either a minimum spanning tree (MST) or rectilinear Steiner tree (RST) to bridge the pins. The results can reflect pin-to-pin, pin-to-Steiner, or Steiner-to-Steiner congestion.</p>
<p id="p-0039" num="0038"><figref idref="DRAWINGS">FIG. 4</figref> illustrates a short net <b>64</b>, that is, a net having two pins a and b located in a single tile. Short nets are the easiest to analyze, and may be handled conventionally by computing horizontal (vertical) usage as the horizontal (vertical) span of the net divided by the width (height) of the bucket.</p>
<p id="p-0040" num="0039"><figref idref="DRAWINGS">FIG. 5</figref> illustrates a flat net <b>66</b>, that is, a net that spans at most one tile in either the vertical or horizontal direction (a horizontal or vertical flat net). Net <b>66</b> is shown as a vertical flat net that spans from (i,j) to (i+k,j). The vertical usage U<sub>v </sub>of each bucket may be computed conventionally as
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>U</i><sub>v</sub>(<i>i,j</i>)=<i>t</i><sub>a</sub><i>/H,</i><?in-line-formulae description="In-line Formulae" end="tail"?>
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>U</i><sub>v</sub>(<i>+k,j</i>)=<i>b</i><sub>b</sub><i>/H</i>, and<?in-line-formulae description="In-line Formulae" end="tail"?>
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>U</i><sub>v</sub>(<i>i+m,j</i>)=1, for 0&lt;<i>m&lt;k.</i><?in-line-formulae description="In-line Formulae" end="tail"?>
<br/>
The wire traveling through the bucket will occupy a full vertical track.
</p>
<p id="p-0041" num="0040">The short horizontal route between a and b in the vertical flat net <b>66</b> could occur in any of the buckets. In the illustrative implementation, it is deemed more likely to occur in a bucket with less partial routing blockage. In particular, the horizontal usage U<sub>h </sub>of each bucket may be made proportional to the available routing capacity
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>U</i><sub>h</sub>(<i>i+m,j</i>)=[|<i>x</i><sub>a</sub><i>−x</i><sub>b</sub><i>|·A</i><sub>h</sub>(<i>i+m,j</i>)]/(<i>W·S</i>), for 0≦<i>m≦k, </i><?in-line-formulae description="In-line Formulae" end="tail"?>
<br/>
where S=Σ<sup>k</sup><sub>m=0</sub>A<sub>h</sub>(i+m,j). If one assumes equal bucket capacities, this formula reduces to
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>U</i><sub>h</sub>(<i>i+m,j</i>)=|<i>x</i><sub>a</sub><i>−x</i><sub>b</sub><i>|/Wh</i><sub>f</sub>, for 0≦<i>m≦k.</i><?in-line-formulae description="In-line Formulae" end="tail"?>
</p>
<p id="p-0042" num="0041">L-shaped nets with w<sub>f</sub>&gt;1 and h<sub>f</sub>&gt;1 have at least one bend. An L-shaped route generally has two possible configurations <b>68</b><i>a </i>and <b>68</b><i>b </i>as shown in <figref idref="DRAWINGS">FIG. 6</figref>. The probability of using route A is denoted as α, and the probability of using route B is 1−α. Conventional congestion analysis effectively assumes that α is 0.5, but if one of the two routes has more wiring blockage than the other, then the present invention assigns an alternative value. The number of available tracks S<sub>hA </sub>and S<sub>vA </sub>at the horizontal and vertical directions for L-shaped route A may be given as
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>S</i><sub>hA</sub>=min<sub>0≦n≦l</sub><i>A</i><sub>h</sub>(<i>i,j+n</i>), and<?in-line-formulae description="In-line Formulae" end="tail"?>
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>S</i><sub>vA</sub>=min<sub>0≦m≦k</sub><i>A</i><sub>v</sub>(<i>i+m,j+</i>1).<?in-line-formulae description="In-line Formulae" end="tail"?>
<br/>
The number of available tracks S<sub>hB </sub>and S<sub>vB </sub>at the horizontal and vertical directions for L-shaped route B are derived similarly. The scale factor α is then defined as
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?>α=min(<i>S</i><sub>hA</sub><i>, S</i><sub>vA</sub>)/[min(<i>S</i><sub>hA</sub><i>, S</i><sub>vA</sub>)+min(<i>S</i><sub>hB</sub><i>, S</i><sub>vB</sub>)].<?in-line-formulae description="In-line Formulae" end="tail"?>
<br/>
The horizontal and vertical usage of each bucket on route A in <figref idref="DRAWINGS">FIG. 6</figref> may be computed conventionally as
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>U</i><sub>h</sub>(<i>i,j</i>)=<i>r</i><sub>a</sub><i>/W</i><?in-line-formulae description="In-line Formulae" end="tail"?>
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>U</i><sub>h</sub>(<i>i,j+l</i>)=<i>l</i><sub>b</sub><i>/W</i><?in-line-formulae description="In-line Formulae" end="tail"?>
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>U</i><sub>v</sub>(<i>i,j+l</i>)=<i>t</i><sub>a</sub><i>/H</i><?in-line-formulae description="In-line Formulae" end="tail"?>
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>U</i><sub>v</sub>(<i>i+k,j+l</i>)=<i>b</i><sub>b</sub><i>/H</i><?in-line-formulae description="In-line Formulae" end="tail"?>
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>U</i><sub>h</sub>(<i>i,j+n</i>)=1, for 0&lt;<i>n&lt;</i>1<?in-line-formulae description="In-line Formulae" end="tail"?>
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>U</i><sub>v</sub>(<i>i+m,j+l</i>)=1, for 0&lt;<i>m&lt;k.</i><?in-line-formulae description="In-line Formulae" end="tail"?>
</p>
<p id="p-0043" num="0042">L-shaped nets with w<sub>f</sub>=h<sub>f</sub>=2 are different from other L-shaped nets since no Z-shape is possible. However, if both w<sub>f </sub>and h<sub>f </sub>are greater than 2, there can be two different Z-shaped orientations, denoted horizontal and vertical, based on the orientation of the center span of the Z-shapes. A generalized vertical Z-shaped net <b>70</b> is illustrated in <figref idref="DRAWINGS">FIG. 7</figref>. A routing graph <b>72</b> which shows all possible choices for vertical Z-shaped net <b>70</b> is also shown in <figref idref="DRAWINGS">FIG. 8</figref> (a directed graph). The number of possible Z-shapes (different vertical spans) is given by the number Q=w<sub>f</sub>−2. Each edge u<sub>n </sub>corresponds to a part of the net entering from the bucket (i,j+n−1) to the bucket (i,j+n), each edge d<sub>n </sub>corresponds to a part of the net entering from the bucket (i,j+n) to the bucket (i+k,j+n), and each edge e<sub>n </sub>corresponds a part of the net entering from the bucket (i+k,j+n) to the bucket (i+k,j+n+1) for n=1, . . . , Q. There is a capacity F associated with each edge, where
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>F</i>(<i>u</i><sub>n</sub>)=min(<i>A</i><sub>h</sub>(<i>i,j+n−</i>1), <i>A</i><sub>h</sub>(<i>i,j+n</i>)),<?in-line-formulae description="In-line Formulae" end="tail"?>
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>F</i>(<i>d</i><sub>n</sub>)=min<sub>0≦m≦l</sub><i>A</i><sub>v</sub>(<i>i+m,j+n</i>), and<?in-line-formulae description="In-line Formulae" end="tail"?>
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>F</i>(<i>e</i><sub>n</sub>)=min(<i>A</i><sub>h</sub>(<i>i+k,j+n</i>), <i>A</i><sub>h</sub>(<i>i+k,j+n+</i>1)).<?in-line-formulae description="In-line Formulae" end="tail"?>
<br/>
Given Q possible routes denoted as R(n)={u<sub>l</sub>, . . . , u<sub>n</sub>, d<sub>n</sub>, e<sub>n</sub>, . . . , e<sub>Q</sub>} for n=1, . . . , Q, a vertical Z-shaped net routed by a global router must be one of shape R(n). The present invention utilizes the probability of a vertical Z-shaped net routed with the shape R(n), denoted as P(n). The value for P(n) must satisfy two properties: 0≦P(n)≦1, for n=1, . . . , Q; and Σ<sup>Q</sup><sub>n=1 </sub>P(n)=1. If these probabilities are already known, then the usage of each bucket can be derived as follows.
</p>
<p id="p-0044" num="0043">For the leftmost bucket in the bottom row, the horizontal and the vertical cost are
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>U</i><sub>h</sub>(<i>i,j</i>)=<i>r</i><sub>a</sub><i>/W,</i><?in-line-formulae description="In-line Formulae" end="tail"?>
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>U</i><sub>v</sub>(<i>i,j</i>)=0.<?in-line-formulae description="In-line Formulae" end="tail"?>
<br/>
For the other buckets in the bottom row, the horizontal usage consists of two terms. The first term is for the case in which the vertical segment d(n) on route R(n) will start in this bucket. The horizontal usage in that case is 0.5 since the bend would on average be in the middle of the bucket. The other term is for the case in which d(n) is at the right of the bucket, and the usage is 1. A bucket has vertical usage only if the bend occurs in that bucket. The total vertical usage (t<sub>a</sub>/H) is spread over the candidate buckets. Therefore, the usages can be defined as
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>U</i><sub>h</sub>(<i>i,j+n</i>)=<i>P</i>(<i>n</i>)/2<i>+P</i><sub>R</sub>(<i>n</i>), and<?in-line-formulae description="In-line Formulae" end="tail"?>
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>U</i><sub>v</sub>(<i>i,j+n</i>)=<i>t</i><sub>a</sub><i>·P</i>(<i>n</i>)/<i>H</i>, for 1≦<i>n≦</i>1,<?in-line-formulae description="In-line Formulae" end="tail"?>
<br/>
where P<sub>R</sub>(n)=Σ<sup>Q</sup><sub>m=n+1 </sub><i>P</i>(<i>m</i>).
</p>
<p id="p-0045" num="0044">For the top row, the derivation is similar. Horizontal bucket usage consists of two terms, one for the case wherein the bend occurs in that bucket, and one for the case wherein the bend occurs to its left. Vertical usage is spread over the buckets. The horizontal and vertical cost for these buckets are</p>
<p id="p-0046" num="0045">
<maths id="MATH-US-00001" num="00001">
<math overflow="scroll">
  <mrow>
    <mrow>
      <mrow>
        <msub>
          <mi>U</mi>
          <mi>h</mi>
        </msub>
        <mo>⁡</mo>
        <mrow>
          <mo>(</mo>
          <mrow>
            <mrow>
              <mi>i</mi>
              <mo>+</mo>
              <mi>k</mi>
            </mrow>
            <mo>,</mo>
            <mrow>
              <mi>j</mi>
              <mo>+</mo>
              <mi>l</mi>
            </mrow>
          </mrow>
          <mo>)</mo>
        </mrow>
      </mrow>
      <mo>=</mo>
      <mrow>
        <msub>
          <mi>l</mi>
          <mi>b</mi>
        </msub>
        <mo>/</mo>
        <mi>W</mi>
      </mrow>
    </mrow>
    <mo>,</mo>
    <mstyle>
      <mtext>
</mtext>
    </mstyle>
    <mo>⁢</mo>
    <mrow>
      <mrow>
        <msub>
          <mi>U</mi>
          <mi>v</mi>
        </msub>
        <mo>⁡</mo>
        <mrow>
          <mo>(</mo>
          <mrow>
            <mrow>
              <mi>i</mi>
              <mo>+</mo>
              <mi>k</mi>
            </mrow>
            <mo>,</mo>
            <mrow>
              <mi>j</mi>
              <mo>+</mo>
              <mi>l</mi>
            </mrow>
          </mrow>
          <mo>)</mo>
        </mrow>
      </mrow>
      <mo>=</mo>
      <mn>0</mn>
    </mrow>
    <mo>,</mo>
    <mstyle>
      <mtext>
</mtext>
    </mstyle>
    <mo>⁢</mo>
    <mrow>
      <mrow>
        <msub>
          <mi>U</mi>
          <mi>h</mi>
        </msub>
        <mo>⁡</mo>
        <mrow>
          <mo>(</mo>
          <mrow>
            <mrow>
              <mi>i</mi>
              <mo>+</mo>
              <mi>k</mi>
            </mrow>
            <mo>,</mo>
            <mrow>
              <mi>j</mi>
              <mo>+</mo>
              <mi>n</mi>
            </mrow>
          </mrow>
          <mo>)</mo>
        </mrow>
      </mrow>
      <mo>=</mo>
      <mrow>
        <mrow>
          <mi>P</mi>
          <mo>⁢</mo>
          <mstyle>
            <mspace width="0.6em" height="0.6ex"/>
          </mstyle>
          <mo>⁢</mo>
          <mrow>
            <mrow>
              <mo>(</mo>
              <mi>n</mi>
              <mo>)</mo>
            </mrow>
            <mo>/</mo>
            <mn>2</mn>
          </mrow>
        </mrow>
        <mo>+</mo>
        <mrow>
          <msub>
            <mi>P</mi>
            <mi>L</mi>
          </msub>
          <mo>⁡</mo>
          <mrow>
            <mo>(</mo>
            <mi>n</mi>
            <mo>)</mo>
          </mrow>
        </mrow>
      </mrow>
    </mrow>
    <mo>,</mo>
    <mrow>
      <mrow>
        <mi>for</mi>
        <mo>⁢</mo>
        <mstyle>
          <mspace width="0.6em" height="0.6ex"/>
        </mstyle>
        <mo>⁢</mo>
        <mn>1</mn>
      </mrow>
      <mo>≤</mo>
      <mi>n</mi>
      <mo>&lt;</mo>
      <mi>l</mi>
    </mrow>
    <mo>,</mo>
    <mi>and</mi>
  </mrow>
</math>
</maths>
<maths id="MATH-US-00001-2" num="00001.2">
<math overflow="scroll">
  <mrow>
    <mrow>
      <mrow>
        <msub>
          <mi>U</mi>
          <mi>v</mi>
        </msub>
        <mo>⁡</mo>
        <mrow>
          <mo>(</mo>
          <mrow>
            <mrow>
              <mi>i</mi>
              <mo>+</mo>
              <mi>k</mi>
            </mrow>
            <mo>,</mo>
            <mrow>
              <mi>j</mi>
              <mo>+</mo>
              <mi>n</mi>
            </mrow>
          </mrow>
          <mo>)</mo>
        </mrow>
      </mrow>
      <mo>=</mo>
      <mrow>
        <mrow>
          <msub>
            <mi>b</mi>
            <mi>b</mi>
          </msub>
          <mo>·</mo>
          <mi>P</mi>
        </mrow>
        <mo>⁢</mo>
        <mstyle>
          <mspace width="0.6em" height="0.6ex"/>
        </mstyle>
        <mo>⁢</mo>
        <mrow>
          <mrow>
            <mo>(</mo>
            <mi>n</mi>
            <mo>)</mo>
          </mrow>
          <mo>/</mo>
          <mi>H</mi>
        </mrow>
      </mrow>
    </mrow>
    <mo>,</mo>
    <mrow>
      <mrow>
        <mi>for</mi>
        <mo>⁢</mo>
        <mstyle>
          <mspace width="0.6em" height="0.6ex"/>
        </mstyle>
        <mo>⁢</mo>
        <mn>1</mn>
      </mrow>
      <mo>≤</mo>
      <mi>n</mi>
      <mo>&lt;</mo>
      <mi>l</mi>
    </mrow>
    <mo>,</mo>
    <mstyle>
      <mtext>
</mtext>
    </mstyle>
    <mo>⁢</mo>
    <mrow>
      <mrow>
        <mi>where</mi>
        <mo>⁢</mo>
        <mstyle>
          <mspace width="0.8em" height="0.8ex"/>
        </mstyle>
        <mo>⁢</mo>
        <mrow>
          <msub>
            <mi>P</mi>
            <mi>L</mi>
          </msub>
          <mo>⁡</mo>
          <mrow>
            <mo>(</mo>
            <mi>n</mi>
            <mo>)</mo>
          </mrow>
        </mrow>
      </mrow>
      <mo>=</mo>
      <mrow>
        <munderover>
          <mo>∑</mo>
          <mrow>
            <mi>m</mi>
            <mo>=</mo>
            <mn>1</mn>
          </mrow>
          <mrow>
            <mi>n</mi>
            <mo>-</mo>
            <mn>1</mn>
          </mrow>
        </munderover>
        <mo>⁢</mo>
        <mstyle>
          <mspace width="0.3em" height="0.3ex"/>
        </mstyle>
        <mo>⁢</mo>
        <mrow>
          <mi>P</mi>
          <mo>⁢</mo>
          <mstyle>
            <mspace width="0.6em" height="0.6ex"/>
          </mstyle>
          <mo>⁢</mo>
          <mrow>
            <mrow>
              <mo>(</mo>
              <mi>m</mi>
              <mo>)</mo>
            </mrow>
            <mo>.</mo>
          </mrow>
        </mrow>
      </mrow>
    </mrow>
  </mrow>
</math>
</maths>
</p>
<p id="p-0047" num="0046">The horizontal and vertical usage for bucket (i+m,j+n) in the center of the netbox are
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>U</i><sub>v</sub>(<i>i+m,j+n</i>)=<i>P</i>(<i>n</i>), and<?in-line-formulae description="In-line Formulae" end="tail"?>
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>U</i><sub>h</sub>(<i>i+m,j+n</i>)=0,<?in-line-formulae description="In-line Formulae" end="tail"?>
<br/>
where 0&lt;m&lt;k, and 0≦n≦l.
</p>
<p id="p-0048" num="0047">The total “Z-usage” can be found using another scale factor β, which is a function of the total capacities of vertically and horizontally oriented Z-shapes, S<sub>v </sub>and S<sub>h</sub>. In the illustrative implementation, the horizontal and vertical Z-usages are scaled with β=S<sub>h</sub>/(S<sub>h</sub>+S<sub>v</sub>) and 1−β=S<sub>v</sub>/(S<sub>h</sub>+S<sub>v</sub>), respectively, as was done with scale factor α for the L-shapes, and then summed.</p>
<p id="p-0049" num="0048">As mentioned in the Background section, the conventional approach is to assign each route an equal usage probability, i.e., P(n)=1/Q for every route, n=1, . . . , Q, and β=(w<sub>f</sub>−2)/(w<sub>f</sub>+h<sub>f</sub>−4). This assumption is valid only when there is no partial blockage. For example, in the routing graph <b>74</b> of <figref idref="DRAWINGS">FIG. 9A</figref>, three are three possible L-shapes, so each route has the same probability of ⅓ according to the prior art. However, it is more intuitive for a global router to route a net in an area with less wiring blockages. The present invention utilizes a novel metric to define P(n) that takes into consideration the partial blockage information. There are many different assumptions that one could make that lead to different probabilities assigned to routes, but the preferred embodiment defines P(n) based on the minimum capacities of each route. For each vertical Z-shaped route R(n), its probability P(n) is
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>P</i>(<i>n</i>)=<i>F</i>(<i>n</i>)<i>S</i><sub>v</sub>,<?in-line-formulae description="In-line Formulae" end="tail"?>
<br/>
where F(n) is the minimum capacity of route R(n) and S<sub>v</sub>=Σ<sup>Q</sup><sub>n=1 </sub>F(n) is the total minimum capacities of all the vertical Z-shaped routes. The minimum capacity F(n) is related to the capacities of every edge on route R(n). However, for every edge u<sub>m </sub>(for m=1, . . . , Q) its capacity is shared by Q−m−1 routes, and for every edge e<sub>m </sub>(for m=1, . . . , Q) its capacity is shared by m routes. Therefore, for one specific route R(n), it is hard to know the exact capacities of edge u<sub>m </sub>and e<sub>m </sub>that are contributed to R(n). If the capacities of all u and e edges are infinite, F(n) is equal to the capacity of a unique edge d<sub>n </sub>of each route. In other cases, for each route R(n), n=1, . . . , Q, the capacity of every edge u<sub>m </sub>(for m=1, . . . , n) on route R(n) is redistributed according to the ratio between the capacity of unique edge d<sub>n </sub>of R(n) and the total capacities of all unique edges of routes sharing edge u<sub>m</sub>. The capacity of every edge e<sub>m </sub>(for m=n, . . . , Q) is redistributed in a similar way. After deriving the new capacity of every edge on route R(n), the minimum capacity F(n) can be easily computed.
</p>
<p id="p-0050" num="0049">The total vertical capacities all edges d to the left and right of edge d<sub>n</sub>, including edge d<sub>n </sub>itself, are denoted as F<sub>L</sub>(d<sub>n</sub>) and F<sub>R</sub>(d<sub>n</sub>) for n=1, . . . , Q, and are defined as</p>
<p id="p-0051" num="0050">
<maths id="MATH-US-00002" num="00002">
<math overflow="scroll">
<mrow>
  <mrow>
    <mrow>
      <msub>
        <mi>F</mi>
        <mi>L</mi>
      </msub>
      <mo>⁡</mo>
      <mrow>
        <mo>(</mo>
        <msub>
          <mi>d</mi>
          <mi>n</mi>
        </msub>
        <mo>)</mo>
      </mrow>
    </mrow>
    <mo>=</mo>
    <mrow>
      <munderover>
        <mo>∑</mo>
        <mrow>
          <mi>m</mi>
          <mo>=</mo>
          <mn>1</mn>
        </mrow>
        <mi>n</mi>
      </munderover>
      <mo>⁢</mo>
      <mrow>
        <mi>F</mi>
        <mo>⁢</mo>
        <mstyle>
          <mspace width="0.6em" height="0.6ex"/>
        </mstyle>
        <mo>⁢</mo>
        <mrow>
          <mo>(</mo>
          <msub>
            <mi>d</mi>
            <mi>m</mi>
          </msub>
          <mo>)</mo>
        </mrow>
      </mrow>
    </mrow>
  </mrow>
  <mo>,</mo>
  <mrow>
    <mrow>
      <mi>and</mi>
      <mo>⁢</mo>
      <mstyle>
        <mspace width="0.8em" height="0.8ex"/>
      </mstyle>
      <mo>⁢</mo>
      <mrow>
        <msub>
          <mi>F</mi>
          <mi>R</mi>
        </msub>
        <mo>⁡</mo>
        <mrow>
          <mo>(</mo>
          <msub>
            <mi>d</mi>
            <mi>n</mi>
          </msub>
          <mo>)</mo>
        </mrow>
      </mrow>
    </mrow>
    <mo>=</mo>
    <mrow>
      <munderover>
        <mo>∑</mo>
        <mrow>
          <mi>m</mi>
          <mo>=</mo>
          <mi>n</mi>
        </mrow>
        <mi>Q</mi>
      </munderover>
      <mo>⁢</mo>
      <mrow>
        <mi>F</mi>
        <mo>⁢</mo>
        <mstyle>
          <mspace width="0.6em" height="0.6ex"/>
        </mstyle>
        <mo>⁢</mo>
        <mrow>
          <mrow>
            <mo>(</mo>
            <msub>
              <mi>d</mi>
              <mi>m</mi>
            </msub>
            <mo>)</mo>
          </mrow>
          <mo>.</mo>
        </mrow>
      </mrow>
    </mrow>
  </mrow>
</mrow>
</math>
</maths>
<br/>
The minimum capacity F(n) of each route R(n) (for n 1, . . . , Q) can be computed as
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>F</i>(<i>n</i>)=min{<i>F</i>(<i>u</i><sub>1</sub>)·<i>F</i>(<i>d</i><sub>n</sub>)/<i>F</i><sub>R</sub>(<i>d</i><sub>1</sub>), . . . , <i>F</i>(<i>u</i><sub>n</sub>)·<i>F</i>(<i>d</i><sub>n</sub>)/<i>F</i><sub>R</sub>(<i>d</i><sub>n</sub>), <i>F</i>(<i>d</i><sub>n</sub>), <i>F</i>(<i>e</i><sub>n</sub>)·<i>F</i>(<i>d</i><sub>n</sub>)/<i>F</i><sub>L</sub>(<i>d</i><sub>n</sub>), . . . , <i>F</i>(<i>e</i><sub>Q</sub>)·<i>F</i>(<i>d</i><sub>Q</sub>)/<i>F</i><sub>L</sub>(<i>d</i><sub>Q</sub>)},<?in-line-formulae description="In-line Formulae" end="tail"?>
<br/>
which can be rewritten as
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>F</i>(<i>n</i>)=<i>F</i>(<i>d</i><sub>n</sub>)·min{<i>K</i><sub>u</sub>(<i>n</i>), 1, <i>K</i><sub>e</sub>(<i>n</i>)},<?in-line-formulae description="In-line Formulae" end="tail"?>
<br/>
where
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>K</i><sub>u</sub>(<i>n</i>)=min{<i>F</i>(<i>u</i><sub>1</sub>)/<i>F</i><sub>R</sub>(<i>d</i><sub>1</sub>), . . . , <i>F</i>(<i>u</i><sub>n</sub>)/<i>F</i><sub>R</sub>(<i>d</i><sub>n</sub>)}, and<?in-line-formulae description="In-line Formulae" end="tail"?>
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>K</i><sub>e</sub>(<i>n</i>)=min{<i>F</i>(<i>e</i><sub>n</sub>)/<i>F</i><sub>L</sub>(<i>d</i><sub>n</sub>), . . . , <i>F</i>(<i>e</i><sub>Q</sub>)/<i>F</i><sub>L</sub>(<i>d</i><sub>Q</sub>)}.<?in-line-formulae description="In-line Formulae" end="tail"?>
</p>
<p id="p-0052" num="0051">Similar analysis can be done for horizontal Z-shaped routes, and S<sub>h </sub>and β can be derived accordingly. When there are no partial blockages and the capacities of each bucket are same, this model degenerates into the aforementioned conventional approach for P(n).</p>
<p id="p-0053" num="0052">Returning to <figref idref="DRAWINGS">FIG. 9A</figref>, in that example the minimum capacities are given as F<sub>L</sub>(d<sub>1</sub>)=F<sub>R</sub>(d<sub>3</sub>)=20, F<sub>L</sub>(d<sub>2</sub>)=F<sub>R</sub>(d<sub>2</sub>)=25, and F<sub>L</sub>(d<sub>3</sub>)=F<sub>R</sub>(d<sub>1</sub>)=45. Substituting these values in the foregoing equations yield
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>F</i>(1)=20·min(20/45, 1, 1, 20/25, 20/45)=400/45,<?in-line-formulae description="In-line Formulae" end="tail"?>
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>F</i>(2)=5·min(20/45, 20/25, 1, 20/25, 20/45)=100/45, and<?in-line-formulae description="In-line Formulae" end="tail"?>
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>F</i>(3)=400/45.<?in-line-formulae description="In-line Formulae" end="tail"?>
<br/>
These capacities results in usage probabilities of P(1)=4/9, P(2)=1/9 and P(3)=4/9. Compared to the prior art approach of assigning equal probabilities to each route, the probability of path R(2) is reduced by 2/9 which is evenly distributed to R(1) and R(3). If 20 two-pin nets are routed in this example where all lower left pins are in the same bucket, and all upper right pins are in the same bucket, then the vertical probabilistic congestion of d<sub>1</sub>, d<sub>2 </sub>and d<sub>3 </sub>would be 4/9·20/20=4/9, 1/9 20/5=4/9, and 4/9·20/20=4/9, respectively. Comparable congestion of d<sub>1</sub>, d<sub>2 </sub>and d<sub>3 </sub>derived from the conventional method would be 1/3, 4/3 and 1/3, respectively. The present invention thus predicts that the congestion for all three routes is equal. This outcome is more likely to occur since this solution leaves even space for each route and predicts that the router will take less probability to route this Z-shaped net with the second route.
</p>
<p id="p-0054" num="0053">Another example is illustrated in <figref idref="DRAWINGS">FIG. 9B</figref>, wherein F<sub>L</sub>(d<sub>1</sub>)=20, F<sub>R</sub>(d<sub>3</sub>)=5, F<sub>L</sub>(d<sub>2</sub>)=28, F<sub>R</sub>(d<sub>2</sub>)=13, F<sub>L</sub>(d<sub>3</sub>)=F<sub>R</sub>(d<sub>1</sub>)=33, leading to F(1)=100/28, F(2)=40/28 and F(3)=100/33, and P(1)=0.4447, P(2)=0.1779 and P(3)=0.3774. If 10 two-pin nets are routed in this example where all lower left pins are in the same bucket, and all upper right pins are in the same buckets, then the horizontal probabilistic congestion of e<sub>2 </sub>(the edge on the top row with capacity 5) is 0.996 compared to 1.067 derived from the conventional approach. The metric of the present invention thus places more routes on the third path than the second since the first path occupies most of tracks of e<sub>2 </sub>and therefore the usage probability of the second path is decreased.</p>
<p id="p-0055" num="0054">It is useful to decide what the relative probabilities of L-shapes versus Z-shapes should be, since the analysis must assume that a certain number are L-shaped and a certain number are Z-shaped. The probability of taking an L-route over a Z-route can be expressed as a parameter γ=#nets<sub>L</sub>/(#nets<sub>L</sub>+#nets<sub>Z</sub>). The value for γ can be chosen by previous design experience, i.e., how many routes are optimally routed or fixed by the designer. Actual routing results can be examined to determine a reasonable percentage. The combination probabilistic usages are U<sub>LZ</sub>=γU<sub>L</sub>+(1−γ)U<sub>Z</sub>.</p>
<p id="p-0056" num="0055">The following algorithm can be used to predict the congestion map of a given set N of nets in accordance with the foregoing:</p>
<p id="p-0057" num="0056">
<tables id="TABLE-US-00001" num="00001">
<table frame="none" colsep="0" rowsep="0">
<tgroup align="left" colsep="0" rowsep="0" cols="3">
<colspec colname="offset" colwidth="14pt" align="left"/>
<colspec colname="1" colwidth="35pt" align="left"/>
<colspec colname="2" colwidth="168pt" align="left"/>
<thead>
<row>
<entry/>
<entry namest="offset" nameend="2" align="center" rowsep="1"/>
</row>
</thead>
<tbody valign="top">
<row>
<entry/>
<entry> 1:</entry>
<entry>Create maps with loaded partial wiring blockage</entry>
</row>
<row>
<entry/>
<entry> 2:</entry>
<entry>For each net f ε N</entry>
</row>
</tbody>
</tgroup>
<tgroup align="left" colsep="0" rowsep="0" cols="3">
<colspec colname="offset" colwidth="14pt" align="left"/>
<colspec colname="1" colwidth="49pt" align="left"/>
<colspec colname="2" colwidth="154pt" align="left"/>
<tbody valign="top">
<row>
<entry/>
<entry> 3:</entry>
<entry>pin-pairs = MST(n) or pin-pairs = RST(n)</entry>
</row>
</tbody>
</tgroup>
<tgroup align="left" colsep="0" rowsep="0" cols="3">
<colspec colname="offset" colwidth="14pt" align="left"/>
<colspec colname="1" colwidth="35pt" align="left"/>
<colspec colname="2" colwidth="168pt" align="left"/>
<tbody valign="top">
<row>
<entry/>
<entry> 4:</entry>
<entry>For each pin-pair (a, b)</entry>
</row>
</tbody>
</tgroup>
<tgroup align="left" colsep="0" rowsep="0" cols="3">
<colspec colname="offset" colwidth="14pt" align="left"/>
<colspec colname="1" colwidth="49pt" align="left"/>
<colspec colname="2" colwidth="154pt" align="left"/>
<tbody valign="top">
<row>
<entry/>
<entry> 4:</entry>
<entry>If (a, b) is a short net</entry>
</row>
</tbody>
</tgroup>
<tgroup align="left" colsep="0" rowsep="0" cols="3">
<colspec colname="offset" colwidth="14pt" align="left"/>
<colspec colname="1" colwidth="63pt" align="left"/>
<colspec colname="2" colwidth="140pt" align="left"/>
<tbody valign="top">
<row>
<entry/>
<entry> 5:</entry>
<entry>update short-congestion((a, b))</entry>
</row>
</tbody>
</tgroup>
<tgroup align="left" colsep="0" rowsep="0" cols="3">
<colspec colname="offset" colwidth="14pt" align="left"/>
<colspec colname="1" colwidth="49pt" align="left"/>
<colspec colname="2" colwidth="154pt" align="left"/>
<tbody valign="top">
<row>
<entry/>
<entry> 6:</entry>
<entry>Else if (a, b) is a flat net</entry>
</row>
</tbody>
</tgroup>
<tgroup align="left" colsep="0" rowsep="0" cols="3">
<colspec colname="offset" colwidth="14pt" align="left"/>
<colspec colname="1" colwidth="63pt" align="left"/>
<colspec colname="2" colwidth="140pt" align="left"/>
<tbody valign="top">
<row>
<entry/>
<entry> 7:</entry>
<entry>update flat-congestion((a, b))</entry>
</row>
</tbody>
</tgroup>
<tgroup align="left" colsep="0" rowsep="0" cols="3">
<colspec colname="offset" colwidth="14pt" align="left"/>
<colspec colname="1" colwidth="49pt" align="left"/>
<colspec colname="2" colwidth="154pt" align="left"/>
<tbody valign="top">
<row>
<entry/>
<entry> 8:</entry>
<entry>Else</entry>
</row>
<row>
<entry/>
<entry> 9:</entry>
<entry>update γ × L-shape-congestion((a, b))</entry>
</row>
<row>
<entry/>
<entry>10:</entry>
<entry>update (1 − γ) × Z-shape-congestion((a, b))</entry>
</row>
<row>
<entry/>
<entry namest="offset" nameend="2" align="center" rowsep="1"/>
</row>
</tbody>
</tgroup>
</table>
</tables>
</p>
<p id="p-0058" num="0057">It is easy to see that for short nets, flat nets and L-shaped nets the algorithm takes linear time with respect to the maximum between horizontal buckets and vertical buckets the net spans, max(w<sub>f</sub>, h<sub>f</sub>). For Z-shaped nets, it is also easy to prove that with dynamic programming it takes a time-complexity of O(max(w<sub>f</sub>, h<sub>f</sub>)) in the bounding box to compute all of the F<sub>L</sub>(d<sub>n</sub>), F<sub>R</sub>(d<sub>n</sub>), K<sub>u</sub>(n), K<sub>e</sub>(n), F(n), P(n), P<sub>L</sub>(n) and PR(n) values for both vertical and horizontal Z-shaped nets, i.e., F<sub>L</sub>(d<sub>n</sub>)=F<sub>L</sub>(d<sub>n−1</sub>)+F(d<sub>1</sub>) (the time-complexity value O indicates how the algorithm scales with time). It also takes O(max(w<sub>f</sub>, h<sub>f</sub>)) to update the usage value of the top and bottom rows for the vertical Z-shaped net, and the left and right columns for the horizontal Z-shaped net. However, it still takes O(w<sub>j</sub>·h<sub>f</sub>) time to update the usage value for all other buckets, which results in the complexity O(#nets·#buckets) as proposed in the prior art. This complexity can, however, be improved. Using a vertical Z-shaped net as an example, we know that the horizontal usages for all center buckets are zero. The vertical usage for all buckets on an edge d<sub>n </sub>are as given above, which is P(n). Instead of updating these buckets explicitly, for all buckets in one column, a temporary usage map may be created with an initial value of zero in every bucket. A positive value is then stored before bucket (i,j+n), e.g., P(n), and a negative value is stored after bucket (i+k−1, j+n), e.g., −P(n). After obtaining this temporary map, the usage of each bucket in the final map can be derived by scanning from the first bucket in the temporary map and summing up all usage values in the temporary map that occur before this bucket. Experimental results show that predicted congestion according to the present invention matches quite well with the real congestion seen by a global router.</p>
<p id="p-0059" num="0058">The invention may be further understood with reference to the flow chaff of <figref idref="DRAWINGS">FIG. 10</figref>. The process for estimating routing congestion begins by establishing routes betweens pins of a net that pass through buckets of the net (<b>80</b>). The route may be flat, L-shaped or Z-shaped (short routes are handled conventionally). A probabilistic usage is then assigned to each bucket based on any partial blockage of the bucket (<b>82</b>). The usage is proportional to a scale factor that depends on the number of available tracks: for a flat route, the usage is proportional to the available routing capacity; for an L-shaped route, the usage is proportional to the scale factor α which is a ratio of a minimum number of available wiring tracks for a given route to a sum of minimum numbers of available wiring tracks for all possible routes; and for a Z-shaped route the usage is proportional to a ratio of a minimum capacity of a given route to a sum of minimum capacities of all routes having an associated orientation with the given route. The routing congestion is then computed for each bucket based on its probabilistic usage (<b>84</b>). In this implementation, the congestion is defined as the ratio of the probabilistic usage to the available capacity.</p>
<p id="p-0060" num="0059">Although the invention has been described with reference to specific embodiments, this description is not meant to be construed in a limiting sense. Various modifications of the disclosed embodiments, as well as alternative embodiments of the invention, will become apparent to persons skilled in the art upon reference to the description of the invention. For example, while the invention has been described in the context of particular shaped nets, it could be implemented for other shapes as well. It is therefore contemplated that such modifications can be made without departing from the spirit or scope of the present invention as defined in the appended claims.</p>
<?DETDESC description="Detailed Description" end="tail"?>
</description>
<us-math idrefs="MATH-US-00001 MATH-US-00001-2" nb-file="US07299442-20071120-M00001.NB">
<img id="EMI-M00001" he="23.96mm" wi="76.20mm" file="US07299442-20071120-M00001.TIF" alt="embedded image " img-content="math" img-format="tif"/>
</us-math>
<us-math idrefs="MATH-US-00002" nb-file="US07299442-20071120-M00002.NB">
<img id="EMI-M00002" he="9.14mm" wi="76.20mm" file="US07299442-20071120-M00002.TIF" alt="embedded image " img-content="math" img-format="tif"/>
</us-math>
<us-claim-statement>What is claimed is:</us-claim-statement>
<claims id="claims">
<claim id="CLM-00001" num="00001">
<claim-text>1. A method of estimating routing congestion between pins in a net of an integrated circuit design using a computer system, comprising:
<claim-text>establishing one or more potential routes between the pins which pass through one or more buckets in the net, each bucket having a set of wiring tracks;</claim-text>
<claim-text>assigning a probabilistic usage to each bucket based on any partial blockage of the wiring tracks in each bucket, wherein said assigning includes creating a temporary usage map of the net buckets with an initial value of zero usage in every temporary usage map bucket, storing usage values in corresponding buckets of the temporary usage map, and deriving a final usage map from the temporary usage map;</claim-text>
<claim-text>computing routing congestion for each bucket using its probabilistic usage; and</claim-text>
<claim-text>storing the routing congestion for each bucket in said computer system.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00002" num="00002">
<claim-text>2. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref> wherein the net is a two-pin net that is a part of a larger multi-pin net, and further comprising constructing a tree to bridge the two-pin net to another pin of the multi-pin net.</claim-text>
</claim>
<claim id="CLM-00003" num="00003">
<claim-text>3. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref> wherein the routing congestion for each bucket is computed as a ratio of the bucket usage to bucket capacity.</claim-text>
</claim>
<claim id="CLM-00004" num="00004">
<claim-text>4. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref> wherein the routes are L-shaped having at least one bend in a bucket, and the probabilistic usage is proportional to a scale factor α which is a ratio of a minimum number of available wiring tracks for a given route to a sum of minimum numbers of available wiring tracks for all possible routes.</claim-text>
</claim>
<claim id="CLM-00005" num="00005">
<claim-text>5. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref> wherein the routes are Z-shaped having at least two bends in two respective buckets, and the probabilistic usage is equal to a ratio of a minimum capacity of a given route to a sum of minimum capacities of all routes having an associated orientation with the given route.</claim-text>
</claim>
<claim id="CLM-00006" num="00006">
<claim-text>6. The method of <claim-ref idref="CLM-00005">claim 5</claim-ref> wherein the minimum capacity F(n) of the given route n is
<claim-text>
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>F</i>(<i>n</i>)=min{<i>F</i>(<i>u</i><sub>1</sub>)·<i>F</i>(<i>d</i><sub>n</sub>)/<i>F</i><sub>R</sub>(<i>d</i><sub>1</sub>), . . . , <i>F</i>(<i>u</i><sub>n</sub>)·<i>F</i>(<i>d</i><sub>n</sub>)/<i>F</i><sub>R</sub>(<i>d</i><sub>n</sub>), <i>F</i>(<i>d</i><sub>n</sub>), <i>F</i>(<i>e</i><sub>n</sub>)·<i>F</i>(<i>d</i><sub>n</sub>)/<i>F</i><sub>L</sub>(<i>d</i><sub>n</sub>), . . . , <i>F</i>(<i>e</i><sub>Q</sub>)·<i>F</i>(<i>d</i><sub>Q</sub>)/<i>F</i><sub>L</sub>(<i>d</i><sub>Q</sub>)},<?in-line-formulae description="In-line Formulae" end="tail"?>
</claim-text>
</claim-text>
<claim-text>where Q is the number of potential routes, d is one of a plurality of central span portions of the potential routes, u is one of a first plurality of edge portions of the potential routes that lie on a first side of the central span portions, e is one of a second plurality of edge portions of the potential routes that lie on a second side of the central span portions, F(u<sub>n</sub>) is the capacity associated with edge u<sub>n</sub>, F(d<sub>n</sub>) is the capacity associated with edge d<sub>n</sub>, F(e<sub>n</sub>) is the capacity associated with edge e<sub>n</sub>, F<sub>L</sub>(d<sub>n</sub>) is the total capacities of all central spans d to the left of span d<sub>n </sub>having an associated orientation with the given route, and F<sub>R</sub>(d<sub>n</sub>) is the total capacities of all central spans d to the right of span d<sub>n </sub>having the associated orientation with the given route.</claim-text>
</claim>
<claim id="CLM-00007" num="00007">
<claim-text>7. A computer system comprising:
<claim-text>one or more processors which process program instructions;</claim-text>
<claim-text>a memory device connected to said processing means; and</claim-text>
<claim-text>program instructions residing in said memory device for estimating routing congestion between pins in a net of an integrated circuit design by establishing one or more potential routes between the pins which pass through one or more buckets in the net, each bucket having a set of wiring tracks, assigning a probabilistic usage to each bucket based on any partial blockage of the wiring tracks in each bucket wherein said assigning includes creating a temporary usage map of the net buckets with an initial value of zero usage in every temporary usage map bucket, storing usage values in corresponding buckets of the temporary usage map, and deriving a final usage map from the temporary usage map, and computing routing congestion for each bucket using its probabilistic usage.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00008" num="00008">
<claim-text>8. The computer system of <claim-ref idref="CLM-00007">claim 7</claim-ref> wherein the net is a two-pin net that is a part of a larger multi-pin net, and said program instructions further construct a tree to bridge the two-pin net to another pin of the multi-pin net.</claim-text>
</claim>
<claim id="CLM-00009" num="00009">
<claim-text>9. The computer system of <claim-ref idref="CLM-00007">claim 7</claim-ref> wherein the routing congestion for each bucket is computed as a ratio of the bucket usage to bucket capacity.</claim-text>
</claim>
<claim id="CLM-00010" num="00010">
<claim-text>10. The computer system of <claim-ref idref="CLM-00007">claim 7</claim-ref> wherein the routes are L-shaped having at least one bend in a bucket, and the probabilistic usage is proportional to a scale factor α which is a ratio of a minimum number of available wiring tracks for a given route to a sum of minimum numbers of available wiring tracks for all possible routes.</claim-text>
</claim>
<claim id="CLM-00011" num="00011">
<claim-text>11. The computer system of <claim-ref idref="CLM-00007">claim 7</claim-ref> wherein the routes are Z-shaped having at least two bends in two respective buckets, and the probabilistic usage is equal to a ratio of a minimum capacity of a given route to a sum of minimum capacities of all routes having an associated orientation with the given route.</claim-text>
</claim>
<claim id="CLM-00012" num="00012">
<claim-text>12. The computer system of <claim-ref idref="CLM-00011">claim 11</claim-ref> wherein the minimum capacity F(n) of the given route n is
<claim-text>
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>F</i>(<i>n</i>)=min{<i>F</i>(<i>u</i><sub>1</sub>)·<i>F</i>(<i>d</i><sub>n</sub>)/<i>F</i><sub>R</sub>(<i>d</i><sub>1</sub>), . . . , <i>F</i>(<i>u</i><sub>n</sub>)·<i>F</i>(<i>d</i><sub>n</sub>)/<i>F</i><sub>R</sub>(<i>d</i><sub>n</sub>), <i>F</i>(<i>d</i><sub>n</sub>), <i>F</i>(<i>e</i><sub>n</sub>)·<i>F</i>(<i>d</i><sub>n</sub>)/<i>F</i><sub>L</sub>(<i>d</i><sub>n</sub>), . . . , <i>F</i>(<i>e</i><sub>Q</sub>)·<i>F</i>(<i>d</i><sub>Q</sub>)/<i>F</i><sub>L</sub>(<i>d</i><sub>Q</sub>)},<?in-line-formulae description="In-line Formulae" end="tail"?>
</claim-text>
</claim-text>
<claim-text>where Q is the number of potential routes, d is one of a plurality of central span portions of the potential routes, u is one of a first plurality of edge portions of the potential routes that lie on a first side of the central span portions, e is one of a second plurality of edge portions of the potential routes that lie on a second side of the central span portions, F(u<sub>n</sub>) is the capacity associated with edge u<sub>n</sub>, F(d<sub>n</sub>) is the capacity associated with edge d<sub>n</sub>, F(e<sub>n</sub>) is the capacity associated with edge e<sub>n</sub>, F<sub>L</sub>(d<sub>n</sub>) is the total capacities of all central spans d to the left of span d<sub>n </sub>having an associated orientation with the given route, and F<sub>R</sub>(d<sub>n</sub>) is the total capacities of all central spans d to the right of span d<sub>n </sub>having the associated orientation with the given route.</claim-text>
</claim>
<claim id="CLM-00013" num="00013">
<claim-text>13. A computer program product comprising:
<claim-text>a computer-readable medium; and</claim-text>
<claim-text>program instructions residing in said medium for estimating routing congestion between pins in a net of an integrated circuit design by establishing one or more potential routes between the pins which pass through one or more buckets in the net, each bucket having a set of wiring tracks, assigning a probabilistic usage to each bucket based on any partial blockage of the wiring tracks in each bucket wherein said assigning includes creating a temporary usage map of the net buckets with an initial value of zero usage in every temporary usage map bucket, storing usage values in corresponding buckets of the temporary usage map, and deriving a final usage map from the temporary usage map, and computing routing congestion for each bucket using its probabilistic usage.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00014" num="00014">
<claim-text>14. The computer program product of <claim-ref idref="CLM-00013">claim 13</claim-ref> wherein the net is a two-pin net that is a part of a larger multi-pin net, and said program instructions further construct a tree to bridge the two-pin net to another pin of the multi-pin net.</claim-text>
</claim>
<claim id="CLM-00015" num="00015">
<claim-text>15. The computer program product of <claim-ref idref="CLM-00013">claim 13</claim-ref> wherein the routing congestion for each bucket is computed as a ratio of the bucket usage to bucket capacity.</claim-text>
</claim>
<claim id="CLM-00016" num="00016">
<claim-text>16. The computer program product of <claim-ref idref="CLM-00013">claim 13</claim-ref> wherein the routes are L-shaped having at least one bend in a bucket, and the probabilistic usage is proportional to a scale factor α which is a ratio of a minimum number of available wiring tracks for a given route to a sum of minimum numbers of available wiring tracks for all possible routes.</claim-text>
</claim>
<claim id="CLM-00017" num="00017">
<claim-text>17. The computer program product of <claim-ref idref="CLM-00013">claim 13</claim-ref> wherein the routes are Z-shaped having at least two bends in two respective buckets, and the probabilistic usage is equal to a ratio of a minimum capacity of a given route to a sum of minimum capacities of all routes having an associated orientation with the given route.</claim-text>
</claim>
<claim id="CLM-00018" num="00018">
<claim-text>18. The computer program product of <claim-ref idref="CLM-00017">claim 17</claim-ref> wherein the minimum capacity F(n) of the given route n is
<claim-text>
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>F</i>(<i>n</i>)=min{<i>F</i>(<i>u</i><sub>1</sub>)·<i>F</i>(<i>d</i><sub>n</sub>)/<i>F</i><sub>R</sub>(<i>d</i><sub>1</sub>), . . . , <i>F</i>(<i>u</i><sub>n</sub>)·<i>F</i>(<i>d</i><sub>n</sub>)/<i>F</i><sub>R</sub>(<i>d</i><sub>n</sub>), <i>F</i>(<i>d</i><sub>n</sub>), <i>F</i>(<i>e</i><sub>n</sub>)·<i>F</i>(<i>d</i><sub>n</sub>)/<i>F</i><sub>L</sub>(<i>d</i><sub>n</sub>), . . . , <i>F</i>(<i>e</i><sub>Q</sub>)·<i>F</i>(<i>d</i><sub>Q</sub>)/<i>F</i><sub>L</sub>(<i>d</i><sub>Q</sub>)},<?in-line-formulae description="In-line Formulae" end="tail"?>
</claim-text>
</claim-text>
<claim-text>where Q is the number of potential routes, d is one of a plurality of central span portions of the potential routes, u is one of a first plurality of edge portions of the potential routes that lie on a first side of the central span portions, e is one of a second plurality of edge portions of the potential routes that lie on a second side of the central span portions, F(u<sub>n</sub>) is the capacity associated with edge u<sub>n</sub>, F(d<sub>n</sub>) is the capacity associated with edge d<sub>n</sub>, F(e<sub>n</sub>) is the capacity associated with edge e<sub>n</sub>, F<sub>L</sub>(d<sub>n</sub>) is the total capacities of all central spans d to the left of span d<sub>n </sub>having an associated orientation with the given route, and F<sub>R</sub>(d<sub>n</sub>) is the total capacities of all central spans d to the right of span d<sub>n </sub>having the associated orientation with the given route.</claim-text>
</claim>
</claims>
</us-patent-grant>
