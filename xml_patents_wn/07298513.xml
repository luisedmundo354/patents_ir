<us-patent-grant lang="EN" dtd-version="v4.2 2006-08-23" file="US07298513-20071120.XML" status="PRODUCTION" id="us-patent-grant" country="US" date-produced="20071106" date-publ="20071120">
<us-bibliographic-data-grant>
<publication-reference>
<document-id>
<country>US</country>
<doc-number>07298513</doc-number>
<kind>B2</kind>
<date>20071120</date>
</document-id>
</publication-reference>
<application-reference appl-type="utility">
<document-id>
<country>US</country>
<doc-number>10405367</doc-number>
<date>20030403</date>
</document-id>
</application-reference>
<us-application-series-code>10</us-application-series-code>
<priority-claims>
<priority-claim sequence="01" kind="national">
<country>JP</country>
<doc-number>2002-109440</doc-number>
<date>20020411</date>
</priority-claim>
</priority-claims>
<us-term-of-grant>
<us-term-extension>981</us-term-extension>
</us-term-of-grant>
<classifications-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>G</section>
<class>06</class>
<subclass>F</subclass>
<main-group>15</main-group>
<subgroup>00</subgroup>
<symbol-position>F</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20071120</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
</classifications-ipcr>
<classification-national>
<country>US</country>
<main-classification>358  115</main-classification>
<further-classification>358  19</further-classification>
<further-classification>358  113</further-classification>
<further-classification>358504</further-classification>
<further-classification>358518</further-classification>
</classification-national>
<invention-title id="d0e71">Image processing system and method of controlling same</invention-title>
<references-cited>
<citation>
<patcit num="00001">
<document-id>
<country>US</country>
<doc-number>6064359</doc-number>
<kind>A</kind>
<name>Lin et al.</name>
<date>20000500</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>345 89</main-classification></classification-national>
</citation>
<citation>
<patcit num="00002">
<document-id>
<country>US</country>
<doc-number>6574002</doc-number>
<kind>B1</kind>
<name>Paczewitz</name>
<date>20030600</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>358  113</main-classification></classification-national>
</citation>
<citation>
<patcit num="00003">
<document-id>
<country>US</country>
<doc-number>6752082</doc-number>
<kind>B2</kind>
<name>Derhak et al.</name>
<date>20040600</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>101484</main-classification></classification-national>
</citation>
<citation>
<patcit num="00004">
<document-id>
<country>US</country>
<doc-number>6888648</doc-number>
<kind>B2</kind>
<name>Odagiri et al.</name>
<date>20050500</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>358  19</main-classification></classification-national>
</citation>
<citation>
<patcit num="00005">
<document-id>
<country>US</country>
<doc-number>6952493</doc-number>
<kind>B2</kind>
<name>Zeng</name>
<date>20051000</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>382162</main-classification></classification-national>
</citation>
<citation>
<patcit num="00006">
<document-id>
<country>US</country>
<doc-number>7068380</doc-number>
<kind>B2</kind>
<name>Milton et al.</name>
<date>20060600</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>358  113</main-classification></classification-national>
</citation>
<citation>
<patcit num="00007">
<document-id>
<country>US</country>
<doc-number>7075678</doc-number>
<kind>B2</kind>
<name>Ohkubo</name>
<date>20060700</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>358  19</main-classification></classification-national>
</citation>
<citation>
<patcit num="00008">
<document-id>
<country>US</country>
<doc-number>2002/0031258</doc-number>
<kind>A1</kind>
<name>Namikata</name>
<date>20020300</date>
</document-id>
</patcit>
<category>cited by other</category>
<classification-national><country>US</country><main-classification>382165</main-classification></classification-national>
</citation>
<citation>
<patcit num="00009">
<document-id>
<country>US</country>
<doc-number>2002/0060797</doc-number>
<kind>A1</kind>
<name>Namikata</name>
<date>20020500</date>
</document-id>
</patcit>
<category>cited by other</category>
<classification-national><country>US</country><main-classification>358  19</main-classification></classification-national>
</citation>
<citation>
<patcit num="00010">
<document-id>
<country>US</country>
<doc-number>2003/0133138</doc-number>
<kind>A1</kind>
<name>Namikata</name>
<date>20030700</date>
</document-id>
</patcit>
<category>cited by other</category>
<classification-national><country>US</country><main-classification>358  19</main-classification></classification-national>
</citation>
<citation>
<patcit num="00011">
<document-id>
<country>JP</country>
<doc-number>8-297734</doc-number>
<date>19961100</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00012">
<document-id>
<country>JP</country>
<doc-number>11-4353</doc-number>
<date>19990100</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00013">
<document-id>
<country>JP</country>
<doc-number>2002-77661</doc-number>
<date>20020300</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00014">
<document-id>
<country>JP</country>
<doc-number>2002-84433</doc-number>
<date>20020300</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
</references-cited>
<number-of-claims>7</number-of-claims>
<us-exemplary-claim>1</us-exemplary-claim>
<us-field-of-classification-search>
<classification-national>
<country>US</country>
<main-classification>358  19</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>358  113</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>358  115</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>358504</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>358518</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>345 89</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>382162</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>101484</main-classification>
</classification-national>
</us-field-of-classification-search>
<figures>
<number-of-drawing-sheets>11</number-of-drawing-sheets>
<number-of-figures>11</number-of-figures>
</figures>
<us-related-documents>
<related-publication>
<document-id>
<country>US</country>
<doc-number>20030193688</doc-number>
<kind>A1</kind>
<date>20031016</date>
</document-id>
</related-publication>
</us-related-documents>
<parties>
<applicants>
<applicant sequence="001" app-type="applicant-inventor" designation="us-only">
<addressbook>
<last-name>Namikata</last-name>
<first-name>Takeshi</first-name>
<address>
<city>Kanagawa</city>
<country>JP</country>
</address>
</addressbook>
<nationality>
<country>JP</country>
</nationality>
<residence>
<country>JP</country>
</residence>
</applicant>
</applicants>
<agents>
<agent sequence="01" rep-type="attorney">
<addressbook>
<orgname>Fitzpatrick, Cella, Harper &amp; Scinto</orgname>
<address>
<country>unknown</country>
</address>
</addressbook>
</agent>
</agents>
</parties>
<assignees>
<assignee>
<addressbook>
<orgname>Canon Kabushiki Kaisha</orgname>
<role>03</role>
<address>
<city>Tokyo</city>
<country>JP</country>
</address>
</addressbook>
</assignee>
</assignees>
<examiners>
<primary-examiner>
<last-name>Lamb</last-name>
<first-name>Twyler</first-name>
<department>2625</department>
</primary-examiner>
<assistant-examiner>
<last-name>Hang</last-name>
<first-name>Vu</first-name>
</assistant-examiner>
</examiners>
</us-bibliographic-data-grant>
<abstract id="abstract">
<p id="p-0001" num="0000">In a system in which color matching is performed upon downloading a profile from a profile management server (<b>100</b>), the profile of a target printer may not be available under the management of the profile management server. In such case the profile management server decides a similar profile based upon information relating to the target printer. This information is composed of colorimetric values obtained on a print sample from the target computer and image data values of the print sample. The profile management server evaluates color differences with respect to color values of profiles under its management and selects a profile for which the color difference is smallest as the similar profile.</p>
</abstract>
<drawings id="DRAWINGS">
<figure id="Fig-EMI-D00000" num="00000">
<img id="EMI-D00000" he="140.89mm" wi="198.63mm" file="US07298513-20071120-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00001" num="00001">
<img id="EMI-D00001" he="213.19mm" wi="170.26mm" orientation="landscape" file="US07298513-20071120-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00002" num="00002">
<img id="EMI-D00002" he="185.42mm" wi="150.28mm" orientation="landscape" file="US07298513-20071120-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00003" num="00003">
<img id="EMI-D00003" he="239.78mm" wi="116.67mm" orientation="landscape" file="US07298513-20071120-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00004" num="00004">
<img id="EMI-D00004" he="201.08mm" wi="103.38mm" orientation="landscape" file="US07298513-20071120-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00005" num="00005">
<img id="EMI-D00005" he="107.02mm" wi="110.49mm" file="US07298513-20071120-D00005.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00006" num="00006">
<img id="EMI-D00006" he="229.53mm" wi="177.63mm" orientation="landscape" file="US07298513-20071120-D00006.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00007" num="00007">
<img id="EMI-D00007" he="210.40mm" wi="141.82mm" orientation="landscape" file="US07298513-20071120-D00007.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00008" num="00008">
<img id="EMI-D00008" he="228.60mm" wi="129.29mm" orientation="landscape" file="US07298513-20071120-D00008.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00009" num="00009">
<img id="EMI-D00009" he="167.98mm" wi="141.31mm" orientation="landscape" file="US07298513-20071120-D00009.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00010" num="00010">
<img id="EMI-D00010" he="261.11mm" wi="177.88mm" file="US07298513-20071120-D00010.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00011" num="00011">
<img id="EMI-D00011" he="195.07mm" wi="155.02mm" file="US07298513-20071120-D00011.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
</drawings>
<description id="description">
<?BRFSUM description="Brief Summary" end="lead"?>
<heading id="h-0001" level="1">FIELD OF THE INVENTION</heading>
<p id="p-0002" num="0001">This invention relates to an image processing system and to a method of controlling the same. More particularly, the invention relates to an image processing system, in which color reproducibility of a printer belonging to the system is controlled, and to a method of controlling this system.</p>
<heading id="h-0002" level="1">BACKGROUND OF THE INVENTION</heading>
<p id="p-0003" num="0002">The color reproducibility of printers has improved markedly in recent years and such printers are now capable of meeting various demands. For example, these include a proof output for calibrating the output of the printer, and a print service for printing images captured by a digital camera.</p>
<p id="p-0004" num="0003">In order to improve the color reproducibility of an output image in an application for satisfying the above-mentioned demands, it is extremely important to
<ul id="ul0001" list-style="none">
    <li id="ul0001-0001" num="0000">
    <ul id="ul0002" list-style="none">
        <li id="ul0002-0001" num="0004">match colors between printers of different models; and</li>
        <li id="ul0002-0002" num="0005">accommodate individual differences between printers of the same model.</li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0005" num="0006">The Color Management System (CMS), which is based on an ICC profile, has been into practice as a color management arrangement for implementing the above points.</p>
<p id="p-0006" num="0007">An ICC profile is mainly divided into a tag portion, which describes the correspondence between device-independent color space (Lab, XYZ, etc.) and device color space (RGB, CMYK, etc.), and a header portion that describes the attributes of the profile itself. In CMS, the profile of a target printer to undergo color matching and the profile of a printer that actually produces the output are set in a CMM (Color Matching Module) as a source profile and output profile, respectively, and color matching is then executed according to the following flow: target-device color space, device-independent color space, output-device color space.</p>
<p id="p-0007" num="0008">Owing to the strong non-linearity of the device characteristic in the printer profile, generally the correspondence between device-independent color space and device color space in the tag is implemented in the form of a LUT. Lab color space often is adopted as device-independent color space. In other words, in the case of an RGB printer, the corresponding relationship between color values in the tag is retained in the form of a LUT of RGB-Lab and a LUT of Lab-RGB.</p>
<p id="p-0008" num="0009">In order to create such a profile, it is required that a number of color patches for describing the characteristics of the printer be printed out by the printer and that the color patches be measured by a colorimetry device.</p>
<p id="p-0009" num="0010">Thus, since it is necessary to output a number of color patches and measure the colors thereof in order to create the profile of a printer, a great deal of time is required. Naturally, the profile of a printer cannot be created unless the printer is at hand.</p>
<p id="p-0010" num="0011">Further, there is also demand to perform color matching using as a reference a print sample that has been printed out by a certain specific printer. In such case a profile cannot be created in the above-described manner because a color-patch output from the printer cannot be acquired.</p>
<p id="p-0011" num="0012">Thus, if the profile of a printer that is the target of an output cannot be created, suitable color matching to which CMS is applied is difficult to carry out at this printer.</p>
<heading id="h-0003" level="1">SUMMARY OF THE INVENTION</heading>
<p id="p-0012" num="0013">Accordingly, an object of the present invention is to provide an image processing system and a method of controlling the same through which simple color matching can be applied to a printer for which it is difficult to create a unique profile.</p>
<p id="p-0013" num="0014">According to an aspect of the present invention, the foregoing object is attained by providing an image processing system comprising: a plurality of printers; a profile management server for managing a plurality of profiles that express color characteristics of respective ones of the plurality of printers; a client for outputting data to the plurality of printers and for being connected to the profile management server; and a network connecting the printers, the profile management server and the client; the printers downloading profiles from the profile management server and performing color matching; wherein if a profile of a target printer that is the destination of the data output from the client is not under management, the profile management server decides a similar profile based upon information relating to the target printer.</p>
<p id="p-0014" num="0015">According to another aspect of the present invention, the foregoing object is attained by providing An image processing system comprising:</p>
<p id="p-0015" num="0016">a plurality of printers;</p>
<p id="p-0016" num="0017">a profile management server for managing a plurality of profiles that express color characteristics of respective ones of the plurality of printers;</p>
<p id="p-0017" num="0018">a client for outputting data to the plurality of printers and for being connected to the profile management server;</p>
<p id="p-0018" num="0019">a color matching server for downloading profiles from the profile management server and performing color matching; and</p>
<p id="p-0019" num="0020">a network connecting the printers, the profile management server, the client and the color matching server;</p>
<p id="p-0020" num="0021">the color matching server sending color-matched data to the printers;</p>
<p id="p-0021" num="0022">wherein if a profile of a target printer that is the destination of the data output from the client is not under management, the profile management server decides a similar profile based upon information relating to the target printer.</p>
<p id="p-0022" num="0023">Other features and advantages of the present invention will be apparent from the following description taken in conjunction with the accompanying drawings, in which like reference characters designate the same or similar parts throughout the figures thereof.</p>
<?BRFSUM description="Brief Summary" end="tail"?>
<?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?>
<description-of-drawings>
<heading id="h-0004" level="1">BRIEF DESCRIPTION OF THE DRAWINGS</heading>
<p id="p-0023" num="0024">The accompanying drawings, which are incorporated in and constitute a part of the specification, illustrate embodiments of the invention and, together with the description, serve to explain the principles of the invention.</p>
<p id="p-0024" num="0025"><figref idref="DRAWINGS">FIG. 1</figref> is a diagram illustrating the configuration of a system according to a first embodiment of the present invention;</p>
<p id="p-0025" num="0026"><figref idref="DRAWINGS">FIG. 2</figref> is a block diagram illustrating an example of the structure of a profile management server according to the first embodiment;</p>
<p id="p-0026" num="0027"><figref idref="DRAWINGS">FIG. 3</figref> is a diagram illustrating an example of a profile management table according to the first embodiment;</p>
<p id="p-0027" num="0028"><figref idref="DRAWINGS">FIG. 4</figref> is a block diagram illustrating an example of the structure of a printer according to the first embodiment;</p>
<p id="p-0028" num="0029"><figref idref="DRAWINGS">FIG. 5</figref> is a block diagram illustrating an example of the structure of a color matching server according to the first embodiment;</p>
<p id="p-0029" num="0030"><figref idref="DRAWINGS">FIG. 6</figref> illustrates an example of a GUI of a profile management client according to the first embodiment;</p>
<p id="p-0030" num="0031"><figref idref="DRAWINGS">FIG. 7</figref> illustrates an example of a GUI of a printer driver according the first embodiment;</p>
<p id="p-0031" num="0032"><figref idref="DRAWINGS">FIG. 8</figref> illustrates an example of a GUI for a profile search according to the first embodiment;</p>
<p id="p-0032" num="0033"><figref idref="DRAWINGS">FIG. 9</figref> is a diagram useful in describing a method of acquiring RGB-Lab correspondence according to the first embodiment;</p>
<p id="p-0033" num="0034"><figref idref="DRAWINGS">FIG. 10</figref> is a flowchart illustrating profile selection processing based upon a color-difference evaluation according to the first embodiment; and</p>
<p id="p-0034" num="0035"><figref idref="DRAWINGS">FIG. 11</figref> is a diagram illustrating the concept of profile synthesis based upon a color-difference evaluation according to a second embodiment of the present invention.</p>
</description-of-drawings>
<?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?>
<?DETDESC description="Detailed Description" end="lead"?>
<heading id="h-0005" level="1">DESCRIPTION OF THE PREFERRED EMBODIMENTS</heading>
<p id="p-0035" num="0036">Preferred embodiments of the present invention will now be described in detail with reference to the drawings.</p>
<heading id="h-0006" level="1">First Embodiment</heading>
<p id="p-0036" num="0037">System Configuration</p>
<p id="p-0037" num="0038"><figref idref="DRAWINGS">FIG. 1</figref> illustrates an example of the configuration of a system according to a first embodiment of the present invention. The system includes a network <b>106</b> to which are connected a plurality of laser printers <b>102</b> of different models, an ink-jet printer <b>103</b> and a multifunction printer (MFP) <b>1</b>. These printers are capable of printing in accordance with a request from a client personal computer (PC) <b>107</b>. The user selects one of these multiple printers in accordance with the particular purpose and the printer responds by producing an output. For example, the criteria used in making the selection is whether the desired printer should provide an image quality suited to the printing of a natural image such as a photograph even though the printing speed will be slow, or whether the desired printer should be one that prints at high speed with an image quality satisfactory for the printing of document data.</p>
<p id="p-0038" num="0039">A profile management server <b>100</b> retains and manages the ICC profiles of the multiple printers on the network <b>106</b> and of a target output device such as an externally registered printer. The profile management server <b>100</b> responds to requests for profile search and profile creation from a client <b>107</b> and to a request for profile download from the printers <b>101</b>, <b>102</b>, <b>103</b>.</p>
<p id="p-0039" num="0040">The profile management server <b>100</b> is provided internally with a profile creation module for creating a module for each printer on the network <b>106</b> automatically or in response to a command from the user. The details of the profile creation module will be described later. A profile that has been created by the program creation module is registered and managed in the profile management server <b>100</b> together with information indicating the model of the color printer/multifunction printer, serial number and creation date and time.</p>
<p id="p-0040" num="0041">A colorimetry device <b>108</b> is connected to the profile management server <b>100</b>. The colorimetry device <b>108</b> outputs measurement values of device-independent color space (Lab, XYZ, etc.) by measuring the colors of color patches formed on a printing medium. The colorimetry device <b>108</b> is used primarily when a profile is created in the profile creation module.</p>
<p id="p-0041" num="0042">A color matching server <b>105</b> uses a source profile, which is an ICC profile of an output target device, and an output profile, which is a profile specific to a printer on the network <b>106</b>, to perform color matching of image data delivered from the client personal computer <b>107</b>, and sends the matched image data to a printer specified by the user.</p>
<p id="p-0042" num="0043">The color matching server <b>105</b> is used primarily in a case where a color matching engine is not available on the side of the printers <b>102</b>, <b>103</b> and multifunction printer <b>101</b>. If the printer side has the ability to perform color matching, then it will suffice to use a color matching module on the printer side rather than the color matching server <b>105</b>.</p>
<p id="p-0043" num="0044">The client personal computer <b>107</b> outputs image data to any printer by way of an output application. Further, the client personal computer <b>107</b> has a profile management client, which is connected to the profile management server <b>100</b> and issues various requests and inquiries, as a software module.</p>
<p id="p-0044" num="0045">Details of Profile Management Server</p>
<p id="p-0045" num="0046">The profile management server <b>100</b> will now be described in detail. The profile management server <b>100</b> (referred to simply as server <b>100</b> below) is implemented as software in a general-purpose computer. <figref idref="DRAWINGS">FIG. 2</figref> illustrates the software modules of the server <b>100</b>.</p>
<p id="p-0046" num="0047">A network interface <b>201</b> in <figref idref="DRAWINGS">FIG. 2</figref> is used to receive a request from the client personal computer <b>107</b> via the network <b>106</b> or to transmit the results of processing by the server <b>100</b> via the network <b>106</b>. Data received from the client personal computer <b>107</b> has its content analyzed by a request receiver/analyzer <b>202</b>. The transmission of processed results is performed by creating transmit data in an answer transmitter <b>203</b> and sending the data via the network interface <b>201</b>. These operations are controlled by a server controller <b>208</b>. It is assumed that a packet used in a request from the client personal computer <b>107</b> and in an answer to the client personal computer <b>107</b> comprises a command portion and a data portion.</p>
<p id="p-0047" num="0048">A profile creation module <b>206</b> is driven by the server controller <b>208</b>, acquires the result of color measurement of a predetermined patch image, which has been output from a printer, by the colorimetry device <b>108</b> via a colorimetry controller <b>207</b>, and produces an ICC profile by calculating a color LUT, through a well-known method, based upon correspondence between signal values and colorimetric values when the patch image is formed.</p>
<p id="p-0048" num="0049">The created profile is stored in a profile database <b>205</b> controlled by a database control module <b>204</b>. The profile database <b>205</b> stores the profile and, at the same time, creates a profile management table of the kind shown in <figref idref="DRAWINGS">FIG. 3</figref> and carries out profile management based upon this table. The management table according to this embodiment has the following items: printer product name <b>301</b>, printer name <b>302</b>, which is the name by which the printer is identified on the network, device category <b>303</b> primarily indicating which printing method is used by the printer, profile name <b>304</b> for indicating the substance of the profile in the database, and profile creation date <b>305</b>, which indicates the date and time at which the profile was created.</p>
<p id="p-0049" num="0050">Printer Operation</p>
<p id="p-0050" num="0051">The internal operation of the printers <b>102</b>, <b>103</b> in this embodiment will be described in simple terms with reference to <figref idref="DRAWINGS">FIG. 4</figref>. The printer receives image data by an image data receiving unit <b>402</b> via a network interface <b>401</b> and subjects the received image data to color matching processing using a color matching unit <b>403</b>. An image data rasterizing unit <b>404</b> expands the color-matched image data into raster form, an image processor <b>405</b> submits the rasterized image data to image correction processing, etc., that is specific to the printer, and a printing unit <b>406</b> prints the processed image on printing paper.</p>
<p id="p-0051" num="0052">The multifunction printer <b>101</b> further includes a scanner, but since the printing operation of the multifunction printer <b>101</b> is similar to that of the printers <b>102</b>, <b>103</b>, this need not be described.</p>
<p id="p-0052" num="0053">Further, of the operations performed at the printers <b>102</b>, <b>103</b> shown in <figref idref="DRAWINGS">FIG. 4</figref>, the color matching server <b>105</b> executes only the color matching function of the color matching unit <b>403</b>. That is, as shown in FIG. <b>5</b>, the color matching server <b>105</b> receives image data using an image data receiving unit <b>502</b> via a network interface <b>501</b> and subjects the received image data to color matching processing in a color matching module <b>503</b>. The color-matched image data is transmitted from a transmitting unit <b>504</b> via the network interface <b>501</b>.</p>
<p id="p-0053" num="0054">Color Matching Processing (in a Case Where a Profile Exists)</p>
<p id="p-0054" num="0055">Color matching processing for when image data output from the client personal computer <b>107</b> is output from any printer in the above-described image processing system according to this embodiment will now be described in detail.</p>
<p id="p-0055" num="0056">Cases where the profile of an output device targeted for color matching (a printer for output purposes) is and is not present within the profile management server <b>100</b> will be considered in describing color matching processing in this embodiment.</p>
<p id="p-0056" num="0057">Described first will be processing in a case where the source profile of the target output device is present within the profile management server <b>100</b>.</p>
<p id="p-0057" num="0058">In this case, the client personal computer <b>107</b> uses a profile management client (the above-mentioned software module) having a GUI screen of the kind shown in <figref idref="DRAWINGS">FIG. 6</figref> to determine whether the profile of interest exists in the profile management server <b>100</b>. Specifically, in response to clicking of a “PROFILE LIST” button <b>602</b>, the client personal computer <b>107</b> transmits a packet, in which a command indicating “PROFILE LIST REQUEST” has been set in the command portion thereof, to the profile management server (the profile management server <b>100</b> in this embodiment) indicated in area <b>601</b> in <figref idref="DRAWINGS">FIG. 6</figref>.</p>
<p id="p-0058" num="0059">Image data from the client personal computer <b>107</b> is subsequently output to the printer of interest via an output application and printer driver.</p>
<p id="p-0059" num="0060">If the printer per se has a color matching module, then color matching is caused to be executed by specifying a source profile <b>701</b> and an output profile <b>702</b> on a printer-driver setting GUI shown in <figref idref="DRAWINGS">FIG. 7</figref>.</p>
<p id="p-0060" num="0061">If the printer per se does not have a color matching module, then color matching processing is executed by the color matching server <b>105</b>. After color matching is performed by the color matching server <b>105</b>, the resultant data is transmitted to the designated printer and print processing is executed. When data is transmitted to the color matching server <b>105</b>, the source profile and output profile are specified using a GUI (not shown) for connecting to the color matching server and the printer that is to output the image data after color matching is specified.</p>
<p id="p-0061" num="0062">When color matching processing thus starts based upon user commands entered via the GUIs, the printer or color matching server <b>105</b> sets the profile, which has been specified by the user, in the color matching module and executes a color matching operation.</p>
<p id="p-0062" num="0063">At this time the printer or color matching server <b>105</b> issues a download request to the profile management server <b>100</b> and sets the downloaded profile if the printer or color matching server <b>105</b> does not internally incorporate the profile. If the printer or color matching server <b>105</b> has the profile, on the other hand, then, upon acquiring the time stamp of the profile, the printer or color matching server <b>105</b> queries the profile management server <b>100</b> as to whether this is the latest profile. If the latest profile is located in the server, then the printer or color matching server <b>105</b> downloads this profile at sets the same.</p>
<p id="p-0063" num="0064">Creation of Approximate Profile (in a Case Where a Profile Does not Exist)</p>
<p id="p-0064" num="0065">Described next will be color matching processing in a case where the profile management server <b>100</b> does not possess the source profile of the target output device. In this embodiment, it will be assumed that the printer which is the target output device is not at hand, as a result of which it is not possible to execute the usual profile creation procedure, namely the procedure for outputting an image patch, measuring the color thereof and then creating the profile.</p>
<p id="p-0065" num="0066">This embodiment is characterized in that the profile management server <b>100</b> approximates the source profile of the target printer under the above circumstances. Processing for selecting an approximate profile in this embodiment will be described below.</p>
<p id="h-0007" num="0000">Selection of Similar Profile Based Upon Ancillary Information</p>
<p id="p-0066" num="0067">If a “PROFILE SEARCH” button <b>603</b> on the GUI of <figref idref="DRAWINGS">FIG. 6</figref> controlled by the profile management client is clicked at the client personal computer <b>107</b>, a search condition GUI <b>801</b> of the kind shown in <figref idref="DRAWINGS">FIG. 8</figref> is activated. By entering information relating to an unknown printer in a search-condition input area <b>802</b> and clicking a “EXECUTE SEARCH” button <b>803</b> on this GUI, the client personal computer <b>107</b> issues an inquiry command to the profile management server <b>100</b>.</p>
<p id="p-0067" num="0068">In response to the command, the, profile management server <b>100</b> extracts the entered information using the request receiver/analyzer <b>202</b> and instructs the database control module <b>204</b> to search for a profile that is in conformity with the extracted information. When this is done, the profile database <b>205</b> executes matching with respect to its own profile management table, extracts the profile name from the database and sends the profile name back to the profile management client in the client personal computer <b>107</b>.</p>
<p id="p-0068" num="0069">The printer product name and printer-scheme category (electrophotography, ink-jet, etc.) can be mentioned as examples of the information entered as the search key in the search-condition input area <b>802</b> shown in <figref idref="DRAWINGS">FIG. 8</figref>. With regard to the search of product name, a partial hit is acceptable. If the color reproducing scheme is approximately similar, as when product line-ups are similar, the model will be regarded as being “similar”, even if the name is different, and the profile name of this similar model will be presented to the profile management client. One example of a method of determining whether a model is a similar model is to make the determination based upon a list of similar models that have been registered beforehand in the profile management server <b>100</b>.</p>
<p id="p-0069" num="0070">Thus, in the above embodiment, on the basis of ancillary information concerning a target printer, it is possible to select a profile specific to this printer or a profile having the most similar characteristics.</p>
<p id="h-0008" num="0000">Selection of Approximate Profile Based Upon Color LUT Evaluation</p>
<p id="p-0070" num="0071">Consider a case where the above-mentioned ancillary information concerning a printer cannot be utilized when selecting an approximate profile, or a case where the result of a color-matched output in accordance with a profile selected based upon ancillary information is unsatisfactory.</p>
<p id="p-0071" num="0072">Assume that the target printer is an unknown printer that is not being managed by the profile management server <b>100</b> and is not at hand, and that only a print sample output from this printer and image data of this print sample exist. In such case it is not possible to execute the usual profile creation procedure, namely the procedure for outputting an image patch, measuring the color thereof and then creating the profile.</p>
<p id="p-0072" num="0073">In this embodiment, it is assumed that a request for output of electronic data in a color made to conform to the print sample has been issued under the above circumstances, and the embodiment is characterized in that the profile management server <b>100</b> approximates the source profile of the unknown printer. That is, the profile management server <b>100</b> obtains the correspondence between colors reproduced by the print sample and electronic data, makes a comparison with the color LUT values in the profile table held by the profile management server <b>100</b>, thereby measuring degree of similarity, and selects a similar profile.</p>
<p id="p-0073" num="0074">Processing for selecting a similar profile based upon color LUT evaluation in a case where ancillary information cannot be utilized will now be described.</p>
<p id="p-0074" num="0075">The profile management client within the client personal computer <b>107</b> sends the profile management server <b>100</b> the correspondence between colorimetric values and image data (pixel values) with regard to a plurality of points suitably sampled from the print sample.</p>
<p id="p-0075" num="0076">Specifically, as shown in <figref idref="DRAWINGS">FIG. 9</figref>, if an area large enough to sufficiently cover a measurement window in a colorimetric unit (not shown) connected to the client personal computer <b>107</b> is present in the print sample, then, by measuring the colors in the print sample using the colorimetric unit, the client personal computer <b>107</b> will obtain the correspondence between the measured values and the image data (pixel values). In the example of <figref idref="DRAWINGS">FIG. 9</figref>, points I, II, III undergo color measurement and the pixel values (assumed here to be RGB values) corresponding to these points are picked up, whereupon three points of RGB-Lab correspondence are obtained. This correspondence data is transmitted to the profile management server <b>100</b>.</p>
<p id="p-0076" num="0077">In response, the profile management server <b>100</b> evaluates the color differences between this correspondence information and the color LUT of each existing profile and selects the approximate profile based upon the results of evaluation.</p>
<p id="p-0077" num="0078">Reference will now be had to the flowchart of <figref idref="DRAWINGS">FIG. 10</figref> to describe processing for selecting an approximate profile by color LUT evaluation according to this embodiment. The processing of <figref idref="DRAWINGS">FIG. 10</figref> for selecting the approximate profile is started by clicking a “SELECT LUT EVALUATION” button <b>804</b> on the GUI (<figref idref="DRAWINGS">FIG. 8</figref>) of the client personal computer <b>107</b>, the LUT being controlled by the profile management client of the computer <b>107</b>.</p>
<p id="p-0078" num="0079">First, at step S<b>1000</b> in <figref idref="DRAWINGS">FIG. 10</figref>, the profile management client in the client personal computer <b>107</b> sends the profile management server <b>100</b> a packet in which a command indicating “SELECT LUT EVALUATION” has been set in the command portion and “RGB<b>1</b>Lab<b>1</b>, RGB<b>2</b>Lab<b>2</b>, RGB<b>3</b>Lab<b>3</b>” has been set in the data portion. Next, at step S<b>1001</b>, the profile management server <b>100</b> receives and analyzes the packet and starts color LUT evaluation.</p>
<p id="p-0079" num="0080">In color LUT evaluation processing executed by the profile management server <b>100</b>, one profile is extracted from the profile database <b>205</b> at step S<b>1002</b>. If an RGB value is contained in the received data, the profile management server <b>100</b> extracts a profile that places the RGB value in device color space. This is followed by step S<b>1003</b>, at which the profile management server <b>100</b> uses the RGB-Lab color LUT of the ICC profile to obtain the Lab value corresponding to the received RGB value by a well-known LUT interpolation method. Next, at step S<b>1004</b>, the profile management server <b>100</b> obtains the error (color difference) between the Lab value found at step S<b>1003</b> and the received Lab value. It is determined at step S<b>1005</b> whether the color-difference calculations of steps S<b>1003</b>, S<b>1004</b> have been completed with regard to all received RGB values (three in the example of <figref idref="DRAWINGS">FIG. 9</figref>). If the calculations have been completed for all received RGB values, the profile management server <b>100</b> obtains the average value of the color differences regarding all of the received RGB values at step S<b>1006</b>.</p>
<p id="p-0080" num="0081">The profile management server <b>100</b> determines at step S<b>1007</b> whether evaluation regarding all profiles has been executed, selects a profile for which the color-difference average is smallest at step S<b>1008</b> and sends the name of this profile back to the client personal computer <b>107</b>.</p>
<p id="p-0081" num="0082">The client personal computer <b>107</b> displays the received profile name on a GUI (not shown) of selected results and then terminates processing at step S<b>1009</b>.</p>
<p id="p-0082" num="0083">By downloading the thus selected profile to the unknown printer, optimum color reproduction becomes possible.</p>
<p id="p-0083" num="0084">Thus, in accordance with this embodiment as described above, simple color matching can be performed with regard to an unknown printer for which the profile does not exist even in a situation in which only the print-out sample from this printer and the electronic data are available.</p>
<heading id="h-0009" level="1">Second Embodiment</heading>
<p id="p-0084" num="0085">A second embodiment according to the present invention will now be described. The system configuration according to the second embodiment is similar to that of the first embodiment and need not be described again.</p>
<p id="p-0085" num="0086">In the first embodiment, an example is described in which a single most similar profile is selected by evaluating an existing color LUT based upon the correspondence between reproduced colors of a print sample and image data. However, this evaluation method adopts average color difference as an evaluation item. In actuality, it is conceivable that a profile having a color LUT for which the smallest color error is obtained will differ from one RGB point to another in the print sample.</p>
<p id="p-0086" num="0087">Accordingly, the second embodiment is characterized in that when a most similar profile differs from one point to another in the print sample, a single profile is synthesized from these multiple profiles.</p>
<p id="h-0010" num="0000">Synthesizing Similar Profile by Color LUT Evaluation</p>
<p id="p-0087" num="0088">In the second embodiment, the profile management server <b>100</b> synthesizes a similar profile based upon evaluation of a color LUT.</p>
<p id="p-0088" num="0089"><figref idref="DRAWINGS">FIG. 11</figref> illustrates the concept of processing for synthesizing a similar profile according to the second embodiment. In <figref idref="DRAWINGS">FIG. 11</figref>, reference numerals <b>1101</b>, <b>1102</b>, <b>1103</b> denote RGB lattice spaces of profiles for which the color differences calculated at steps S<b>1003</b>, S<b>1004</b> in <figref idref="DRAWINGS">FIG. 10</figref> are minimized. These correspond to the RGB values which are the colorimetric values at the three points I, II, III, respectively, shown in <figref idref="DRAWINGS">FIG. 9</figref> of the first embodiment. It should be noted that the lattice spaces shown in <figref idref="DRAWINGS">FIG. 11</figref> are obtained by expressing an RGB lattice space, which is originally three-dimensional, in two dimensions.</p>
<p id="p-0089" num="0090">The points marked by the black dots in each of the RGB lattice spaces indicate RGB points for which the color differences are smallest with regard to respective ones of the profiles. According to the second embodiment, a range of lattice points adopted as the color values of a combined profile are found about the black dots as center with regard to respective ones of the profiles.</p>
<p id="p-0090" num="0091">A specific method of achieving this is to subject the three RGB points to Voronoi partitioning and adopt the partitioned areas as respective ones of spheres of influence. These areas are indicated by the hatching in <figref idref="DRAWINGS">FIG. 11</figref>. The combined profile is created by storing the Lab values corresponding to the RGB lattice points in respective ones of these hatched areas as a profile. In order to eliminate the discontinuity at boundaries of the hatched areas, smoothing should be performed at the boundaries.</p>
<p id="p-0091" num="0092">The profile management server <b>100</b> communicates with the client personal computer <b>107</b> so as to set the name of the combined profile created at as described above. The combined profile is registered anew in the profile database <b>205</b> of the profile management server <b>100</b> by the profile name sent back from the client personal computer <b>107</b>.</p>
<p id="p-0092" num="0093">The profile synthesized in the second embodiment only assures matching with respect to a specific color at the point of measurement in the print sample. If the number of points on the print sample of <figref idref="DRAWINGS">FIG. 9</figref> is increased, therefore, i.e., if the corresponding relationships between obtained colorimetric values obtained and signal values increase, the number of colors for which optimum color matching can be achieved will increase.</p>
<p id="p-0093" num="0094">Thus, in accordance with the second embodiment as described above, it is so arranged that even if an approximate profile differs for every point on the print sample, it is possible to synthesize a single profile that reflects all of these profiles. As a result, it is possible to carry out color matching that better reflects the reproduced colors of a print sample.</p>
<p id="p-0094" num="0095">Thus, in accordance with the present invention as described above, simple color matching can be applied to a printer for which it is difficult to create a unique profile.</p>
<p id="p-0095" num="0096">The present invention is not limited to the above embodiments and various changes and modifications can be made within the spirit and scope of the present invention. Therefore, to apprise the public of the scope of the present invention, the following claims are made.</p>
<?DETDESC description="Detailed Description" end="tail"?>
</description>
<us-claim-statement>What is claimed is:</us-claim-statement>
<claims id="claims">
<claim id="CLM-00001" num="00001">
<claim-text>1. An image processing system comprising:
<claim-text>a plurality of printers;</claim-text>
<claim-text>a profile management server for managing a plurality of profiles that express color characteristics of respective ones of said plurality of printers;</claim-text>
<claim-text>a client for outputting data to any one of said plurality of printers and for being connected to said profile management server; and</claim-text>
<claim-text>a network connecting said printers, said profile management server and said client,</claim-text>
<claim-text>wherein said printers download profiles from said profile management server and perform color matching, and</claim-text>
<claim-text>wherein if a profile of a target printer that is the destination of the data output from said client is not under management, said profile management server creates a similar profile by evaluating color differences with respect to color values of profiles under management on the basis of colorimetric values on a print sample printed by the target printer and image data values of the print sample and combining a plurality of profiles selected based upon results of the evaluation.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00002" num="00002">
<claim-text>2. An image processing system comprising:
<claim-text>a plurality of printers;</claim-text>
<claim-text>a profile management server for managing a plurality of profiles that express color characteristics of respective ones of said plurality of printers;</claim-text>
<claim-text>a client for outputting data to any one of said plurality of printers and for being connected to said profile management server;</claim-text>
<claim-text>a color matching server for downloading profiles from said profile management server and performing color matching; and</claim-text>
<claim-text>a network connecting said printers, said profile management server, said client and said color matching server,</claim-text>
<claim-text>wherein said color matching server sends color-matched data to said printers, and</claim-text>
<claim-text>wherein if a profile of a target printer that is the destination of the data output from said client is not under management, said profile management server creates a similar profile by evaluating color differences with respect to color values of profiles under management on the basis of the colorimetric values on a print sample printed by the target printer and image data values of the print sample and combining a plurality of profiles selected based upon results of the evaluation.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00003" num="00003">
<claim-text>3. The system according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein said profile management server selects a profile for which the color difference is smallest for every colorimetric value on the print sample.</claim-text>
</claim>
<claim id="CLM-00004" num="00004">
<claim-text>4. A method of controlling an image processing system in which a plurality of printers, a profile management server for managing a plurality of profiles that express color characteristics of respective ones of the plurality of printers, and a client for outputting data to any one of the plurality of printers and for being connected to the profile management server are connected by a network, said method comprising the steps of:
<claim-text>the printers downloading profiles from the profile management server and performing color matching; and</claim-text>
<claim-text>if a profile of a target printer that is the destination of the data output from the client is not under management, the profile management server creating a similar profile by evaluating color differences with respect to color values of profiles under management on the basis of colorimetric values on a print sample printed by the target printer and image data values of the print sample and combining a plurality of profiles selected based upon results of the evaluation.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00005" num="00005">
<claim-text>5. A computer-readable recording medium storing, in executable form, a program executed by a computer for causing said computer to operate as the profile management server set forth in <claim-ref idref="CLM-00001">claim 1</claim-ref>.</claim-text>
</claim>
<claim id="CLM-00006" num="00006">
<claim-text>6. The system according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein said profile management server further performs a smoothing of the boundaries of the plurality of profiles upon the combination of the plurality of profiles.</claim-text>
</claim>
<claim id="CLM-00007" num="00007">
<claim-text>7. An image processing method for managing a plurality of profiles that express color characteristics of respective ones of a plurality of printers, the method comprising the steps of:
<claim-text>if a profile of a target printer that is one of the plurality of printers is not under management, evaluating color differences with respect to color values of profiles under management on the basis of colorimetric values on a print sample printed by the target printer and image data values of the print sample; and</claim-text>
<claim-text>combining a plurality of profiles selected based upon results of the evaluation, to create a similar profile for the target printer.</claim-text>
</claim-text>
</claim>
</claims>
</us-patent-grant>
