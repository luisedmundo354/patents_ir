<us-patent-grant lang="EN" dtd-version="v4.2 2006-08-23" file="US07298772-20071120.XML" status="PRODUCTION" id="us-patent-grant" country="US" date-produced="20071106" date-publ="20071120">
<us-bibliographic-data-grant>
<publication-reference>
<document-id>
<country>US</country>
<doc-number>07298772</doc-number>
<kind>B1</kind>
<date>20071120</date>
</document-id>
</publication-reference>
<application-reference appl-type="utility">
<document-id>
<country>US</country>
<doc-number>10934276</doc-number>
<date>20040903</date>
</document-id>
</application-reference>
<us-application-series-code>10</us-application-series-code>
<us-term-of-grant>
<us-term-extension>615</us-term-extension>
</us-term-of-grant>
<classifications-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>H</section>
<class>04</class>
<subclass>B</subclass>
<main-group>1</main-group>
<subgroup>00</subgroup>
<symbol-position>F</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20071120</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
</classifications-ipcr>
<classification-national>
<country>US</country>
<main-classification>375136</main-classification>
<further-classification>375260</further-classification>
<further-classification>375355</further-classification>
</classification-national>
<invention-title id="d0e53">Packet detection, symbol timing, and coarse frequency estimation in an OFDM communications system</invention-title>
<references-cited>
<citation>
<patcit num="00001">
<document-id>
<country>US</country>
<doc-number>5732113</doc-number>
<kind>A</kind>
<name>Schmidl et al.</name>
<date>19980300</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00002">
<document-id>
<country>US</country>
<doc-number>5889759</doc-number>
<kind>A</kind>
<name>McGibney</name>
<date>19990300</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00003">
<document-id>
<country>US</country>
<doc-number>6021110</doc-number>
<kind>A</kind>
<name>McGibney</name>
<date>20000200</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00004">
<document-id>
<country>US</country>
<doc-number>6151295</doc-number>
<kind>A</kind>
<name>Ma et al.</name>
<date>20001100</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00005">
<document-id>
<country>US</country>
<doc-number>6320915</doc-number>
<kind>B1</kind>
<name>Stott et al.</name>
<date>20011100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>375340</main-classification></classification-national>
</citation>
<citation>
<patcit num="00006">
<document-id>
<country>US</country>
<doc-number>6363084</doc-number>
<kind>B1</kind>
<name>Dejonghe</name>
<date>20020300</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370480</main-classification></classification-national>
</citation>
<citation>
<patcit num="00007">
<document-id>
<country>US</country>
<doc-number>6381263</doc-number>
<kind>B1</kind>
<name>Suzuki</name>
<date>20020400</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00008">
<document-id>
<country>US</country>
<doc-number>6459679</doc-number>
<kind>B1</kind>
<name>Kim</name>
<date>20021000</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00009">
<document-id>
<country>US</country>
<doc-number>6539063</doc-number>
<kind>B1</kind>
<name>Peyla et al.</name>
<date>20030300</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00010">
<document-id>
<country>US</country>
<doc-number>6628606</doc-number>
<kind>B1</kind>
<name>Hong et al.</name>
<date>20030900</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00011">
<document-id>
<country>US</country>
<doc-number>6658063</doc-number>
<kind>B1</kind>
<name>Mizoguchi et al.</name>
<date>20031200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>375260</main-classification></classification-national>
</citation>
<citation>
<patcit num="00012">
<document-id>
<country>US</country>
<doc-number>6675012</doc-number>
<kind>B2</kind>
<name>Gray</name>
<date>20040100</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00013">
<document-id>
<country>US</country>
<doc-number>6700866</doc-number>
<kind>B1</kind>
<name>Heinonen et al.</name>
<date>20040300</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00014">
<document-id>
<country>US</country>
<doc-number>6754170</doc-number>
<kind>B1</kind>
<name>Ward</name>
<date>20040600</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00015">
<document-id>
<country>US</country>
<doc-number>7203245</doc-number>
<kind>B1</kind>
<name>Murphy</name>
<date>20070400</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>375260</main-classification></classification-national>
</citation>
</references-cited>
<number-of-claims>34</number-of-claims>
<us-exemplary-claim>1</us-exemplary-claim>
<us-field-of-classification-search>
<classification-national>
<country>US</country>
<main-classification>375136</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>375260</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>375355</main-classification>
</classification-national>
</us-field-of-classification-search>
<figures>
<number-of-drawing-sheets>6</number-of-drawing-sheets>
<number-of-figures>6</number-of-figures>
</figures>
<parties>
<applicants>
<applicant sequence="001" app-type="applicant-inventor" designation="us-only">
<addressbook>
<last-name>Neerudu</last-name>
<first-name>Ravikumar</first-name>
<address>
<city>Khammam</city>
<country>IN</country>
</address>
</addressbook>
<nationality>
<country>IN</country>
</nationality>
<residence>
<country>IN</country>
</residence>
</applicant>
<applicant sequence="002" app-type="applicant-inventor" designation="us-only">
<addressbook>
<last-name>Venkatesh</last-name>
<first-name>Narasimhan</first-name>
<address>
<city>Hyberabad</city>
<country>IN</country>
</address>
</addressbook>
<nationality>
<country>IN</country>
</nationality>
<residence>
<country>IN</country>
</residence>
</applicant>
<applicant sequence="003" app-type="applicant-inventor" designation="us-only">
<addressbook>
<last-name>Sekhar</last-name>
<first-name>Ponnamanda Venkata Chandra</first-name>
<address>
<city>Hyderabad</city>
<country>IN</country>
</address>
</addressbook>
<nationality>
<country>IN</country>
</nationality>
<residence>
<country>IN</country>
</residence>
</applicant>
</applicants>
<agents>
<agent sequence="01" rep-type="attorney">
<addressbook>
<last-name>Chesavage</last-name>
<first-name>Jay A.</first-name>
<address>
<country>unknown</country>
</address>
</addressbook>
</agent>
</agents>
</parties>
<assignees>
<assignee>
<addressbook>
<orgname>Redpine Signals, Inc.</orgname>
<role>02</role>
<address>
<city>San Jose</city>
<state>CA</state>
<country>US</country>
</address>
</addressbook>
</assignee>
</assignees>
<examiners>
<primary-examiner>
<last-name>Payne</last-name>
<first-name>David C.</first-name>
<department>2611</department>
</primary-examiner>
<assistant-examiner>
<last-name>Guarino</last-name>
<first-name>Rahel</first-name>
</assistant-examiner>
</examiners>
</us-bibliographic-data-grant>
<abstract id="abstract">
<p id="p-0001" num="0000">A integrated system for generation of packet detection, symbol timing, and coarse frequency offset for an orthogonal frequency division multiplexed (OFDM) receiver having a stream of input symbols applied comprises a first multiplier performing a multiplication on a delayed and conjugated stream of input symbols multiplied by the input symbol stream. The output of the first multiplier is summed over a symbol length. A second multiplier has an output formed from multiplying the delayed symbol stream by its conjugate, thereby providing a signal strength term Pn. The output of the second multiplier is summed over two symbol periods, and multiplied by a known threshold to form a threshold value. When the magnitude of cn term rises above the known threshold, this generates a packet detect output, and when the magnitude of Cn terms thereafter falls below the known threshold, this generates a symbol timing output.</p>
</abstract>
<drawings id="DRAWINGS">
<figure id="Fig-EMI-D00000" num="00000">
<img id="EMI-D00000" he="171.28mm" wi="252.05mm" file="US07298772-20071120-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00001" num="00001">
<img id="EMI-D00001" he="208.96mm" wi="161.88mm" orientation="landscape" file="US07298772-20071120-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00002" num="00002">
<img id="EMI-D00002" he="255.95mm" wi="174.84mm" orientation="landscape" file="US07298772-20071120-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00003" num="00003">
<img id="EMI-D00003" he="254.00mm" wi="128.19mm" orientation="landscape" file="US07298772-20071120-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00004" num="00004">
<img id="EMI-D00004" he="252.05mm" wi="183.56mm" file="US07298772-20071120-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00005" num="00005">
<img id="EMI-D00005" he="252.39mm" wi="171.28mm" orientation="landscape" file="US07298772-20071120-D00005.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00006" num="00006">
<img id="EMI-D00006" he="230.46mm" wi="185.00mm" orientation="landscape" file="US07298772-20071120-D00006.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
</drawings>
<description id="description">
<?BRFSUM description="Brief Summary" end="lead"?>
<heading id="h-0001" level="1">FIELD OF THE INVENTION</heading>
<p id="p-0002" num="0001">The present invention is related to wireless systems for receiving data, including Orthogonal Frequency Division Multiplexed (OFDM) wireless systems, as described in IEEE standard 802.11a and 802.11g.</p>
<heading id="h-0002" level="1">BACKGROUND OF THE INVENTION</heading>
<p id="p-0003" num="0002">On an OFDM system, symbols are transmitted using a plurality of simultaneous windowed sinusoidal sources operating over a series of regular time intervals, typically 3.2 us in duration, with a gap between symbols of 0.8 us to allow for separation between individual OFDM symbols. Transmission of data using OFDM modulation provides intrinisic resistance to multipath reflection at the receiver by virtue of using a plurality of subcarriers within each symbol such that each symbol carries a large amount of information in the form of a large plurality of subcarrier pilots, and each symbol has a temporal duration longer than multi-path reflection. In this manner, multi-path reflections along the communications channel and superimposed at the receiver tend to occur within the duration of a symbol time, and the symbols are separated by a guard band to ensure that bleeding from one symbol into another is minimized. One of the requirements for proper demodulation of OFDM symbols is detection of the packet and synchronization of the local receiver to the stream of symbols, as offsets between the transmitted frequency and local oscillator will result in phase ramps of the demodulated pilots. Packet detection and symbol synchronization are achieved using a short preamble part of the packet comprising a series of short symbols. Coarse adjustment of the local oscillator is achieved during a first preamble time, and fine adjustment is accomplished during a second long preamble time.</p>
<p id="p-0004" num="0003"><figref idref="DRAWINGS">FIG. 1</figref> shows a typical IEEE 802.11a or 802.11g OFDM packet <b>10</b> and includes a short preamble section <b>12</b> comprising ten identical short symbols shown as t<b>1</b>-t<b>10</b>. One of the short symbol t<b>1</b> <b>14</b> is expanded to show that it comprises a pattern of 16 OFDM samples shown as s<b>0</b> through s<b>15</b>. The first preamble section <b>12</b> is used to achieve receiver synchronization whereby the receiver detects the short preamble and initially synchronizes to the repeating pattern t<b>1</b>-t<b>10</b> of short preamble, each of which is 0.8 us in duration and comprises 16 OFDM samples s<b>0</b> through s<b>15</b>, as shown for exemplar short symbol t<b>1</b> <b>14</b>. A packet start output is asserted when the second short symbol is received, and a symbol timing output is asserted upon the passing of the final short symbol t<b>10</b> of short preamble <b>12</b>, as will be explained later. The packet detection signal is used to gate the operation of the symbol timing function, and when the symbol timing output is asserted, this signal is used to establish the symbol timing of all subsequent symbols in the packet, including the placement of guard bands to exclude certain areas between OFDM symbols in the data area of the packet. During short preamble section <b>12</b>, an estimate of coarse frequency offset is made and fed back to the Numerically controller oscillator (NCO) for compensating frequency offset. In this manner, when the symbol timing output is asserted, the coarse frequency correction is completed, thereby allowing the symbol timing output to be more accurate over the rest of the packet. The coarse frequency correction derived from the short preamble is fed back as a first correction to tune the NCO, and during a Long preamble interval, a longer and more accurate estimate of frequency offset is made and fed back to the NCO, as is known to one skilled in the art of wireless receivers. The short preamble section <b>12</b> comprising a plurality of short symbols t<b>1</b> through t<b>10</b> is followed by a guard band <b>18</b> to separate the short preamble and long preamble section, and this is followed by long preamble section <b>20</b>, which comprises two long symbols, shown as T<b>1</b> <b>22</b> and T<b>2</b> <b>24</b>. The long symbols T<b>1</b> <b>22</b> and T<b>2</b> <b>24</b> are used to establish a more precise estimate of frequency offset after the initial oscillator adjustment is made based on the short preamble coarse frequency offset measurement.</p>
<p id="p-0005" num="0004">The functions of packet detection, symbol timing, and coarse frequency offset have been performed by separate or combined circuit functions in the prior art.</p>
<p id="p-0006" num="0005">U.S. Pat. No. 6,320,915 by Stott et al describes a symbol synchronization system whereby an incoming stream of symbols is delayed and multiplied by the complex conjugate of the incoming stream of symbols, thereby generating a synchronization pulse for further processing. U.S. Pat. No. 6,539,063 by Peyla et al describes a system for recovering symbol timing and carrier frequency error using the product of multiplication of an OFDM symbol stream with a slightly delayed version, thereby extracting symbol synchronization and timing from the energy introduced by shaping the leading and trailing edges of the subcarriers used in OFDM. U.S. Pat. No. 6,658,063 by Mizoguchi et al. describes a symbol timing recovery mechanism for 802.11 OFDM WANs, and includes a coarse frequency offset. U.S. Pat. No. 6,675,012 by Gray describes the use of multiplying a signal with a conjugated version of the signal which has been delayed by one symbol time, thereby providing a means for packet detection.</p>
<p id="p-0007" num="0006">U.S. Pat. No. 6,363,084 by Dejohnge describes a method for extracting coarse frequency offset by performing an FFT on the same sample point of multiple preamble symbols to detect the offset frequency. U.S. Pat. No. 6,381,263 by Suzuki describes a system for measuring frequency offset in a multi-channel system, and U.S. Pat. No. 6,459,679 by Kim describes a system for extracting frequency offsets in a single channel OFDM system.</p>
<p id="p-0008" num="0007"><figref idref="DRAWINGS">FIG. 2</figref> shows a prior art packet detection system <b>60</b> and a prior art frequency offset measurement system <b>40</b>, while <figref idref="DRAWINGS">FIG. 3</figref> shows a prior art symbol timing generator <b>100</b>. These may be best understood in combination with the waveforms of <figref idref="DRAWINGS">FIG. 4</figref>. Packet detection is performed in <figref idref="DRAWINGS">FIG. 2</figref> by examining a stream of complex OFDM symbols <b>92</b>, as would be generated by the baseband detection of a modulated stream of OFDM symbols. One of the requirements of the demodulation system is to determine the start of the packet, which is asserted by packet detection signal <b>90</b>. The incoming complex OFDM symbols <b>92</b> are delayed by one short preamble symbol interval L (shown for the case L=16) by delay element <b>62</b>. A first multiplier <b>66</b> multiplies each incoming symbol from the incoming stream <b>92</b> (shown as stream <b>120</b> in <figref idref="DRAWINGS">FIG. 4</figref>) with a delayed and conjugated stream from conjugator <b>64</b>. The modulation of OFDM symbols uses a cosine weighting function, which produces a real and imaginary component which is found in an OFDM symbol stream, and first multiplier <b>66</b> produces an output stream which is complex and has a large magnitude component, as shown in waveform <b>122</b> of <figref idref="DRAWINGS">FIG. 4</figref>. A sum of the previous sixteen symbols forming the correlation with the present symbol and previous symbols is performed in first summer <b>70</b>, which produces the waveform <b>126</b> of <figref idref="DRAWINGS">FIG. 4</figref>, and the magnitude of this value is determined in absolute value <b>80</b>, thereby producing a value <b>84</b> which is the absolute value of Cn, which is related to a running correlation of a current symbol with a previous symbol. When noise is entering the system, there is little or no correlation between these two intervals, and the output <b>74</b> has only noise level components. At the time the second preamble is received, the correlation is very high between the first preamble and second, as shown in waveform <b>122</b> of <figref idref="DRAWINGS">FIG. 4</figref>, and the first summer <b>70</b> accumulates an increasing value, which has a maximum value at the terminus of the second preamble t<b>2</b> of <figref idref="DRAWINGS">FIG. 1</figref>, since the value is maximized at this point, as seen in waveform <b>126</b> of <figref idref="DRAWINGS">FIG. 4</figref>. The second multiplier <b>68</b> of <figref idref="DRAWINGS">FIG. 2</figref> is simply finding the power of the previous symbol by multiplying the delay <b>62</b> output with a conjugate value generated by conjugator <b>64</b>, which has the value of the signal plus noise power. The output of second multiplier <b>68</b> as shown by waveform <b>124</b> in <figref idref="DRAWINGS">FIG. 4</figref> and represents the magnitude of the incoming signal regardless of correlation to previous symbols, while the output of the first multiplier <b>66</b> represents the magnitude of incoming signal which is correlated one short preamble time (shown for preamble length L=16) earlier. The first multiplier <b>66</b> output (waveform <b>122</b> of <figref idref="DRAWINGS">FIG. 4</figref>) tracks correlation and signal level, and the second multiplier output <b>68</b> (waveform <b>124</b> of <figref idref="DRAWINGS">FIG. 4</figref>) tracks signal level only. By finding the absolute value, or magnitude, of the output of the first summer <b>70</b> and generating C<sub>n </sub><b>84</b> representing the correlated power, and dividing by P<sub>n </sub><b>76</b>, we may generate a packet detection function:
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>u=|C</i><sub>n</sub>|/(<i>P</i><sub>n</sub>)<?in-line-formulae description="In-line Formulae" end="tail"?>
</p>
<p id="p-0009" num="0008">and when u is above a threshold level <b>132</b> as shown in waveform <b>130</b> of <figref idref="DRAWINGS">FIG. 4</figref> as determined by comparator <b>88</b>, we may assert packet detection signal <b>90</b>, shown as waveform <b>134</b> of <figref idref="DRAWINGS">FIG. 4</figref>.</p>
<p id="p-0010" num="0009">The coarse frequency offset estimation is performed by block <b>40</b> of <figref idref="DRAWINGS">FIG. 2</figref>. The incoming symbol stream is delayed and conjugated and multiplied together by multiplier <b>44</b> to generate an output which contains frequency offset equivalent constant phase offset, which is provided as an_input to a phase finder <b>46</b>, which is a CORDIC (COordination Rotation DIgital Computer) function as is known to one skilled in the art. Phase finder <b>46</b> takes a complex-valued input and generates an output which is a phase value. Averaging the output of this phase finder generates an output which is the coarse frequency offset <b>50</b>, however it can be shown that averaging <b>48</b> this output does not improve the noise rejection of the coarse frequency offset <b>50</b> in poor s/n conditions.</p>
<p id="p-0011" num="0010"><figref idref="DRAWINGS">FIG. 3</figref> shows a prior art symbol timing generator <b>100</b>. Input complex OFDM symbol stream <b>92</b> as was applied to <figref idref="DRAWINGS">FIG. 2</figref>, is input to a tapped delay element <b>102</b> having a number of taps equal to the short preamble length (shown for preamble length L=16), which performs a cross correlation of incoming complex OFDM symbol stream <b>92</b> to a short preamble symbol <b>104</b> using multiplier <b>106</b> to multiply the moving OFDM stream against the fixed preamble symbols <b>104</b>. The cross correlation contributions of each multiplication are summed in adder <b>108</b>, which produces a cross correlation output stream <b>111</b> which is converted to a magnitude in absolute value function <b>113</b>, which produces the output <b>115</b> shown as waveform <b>136</b> of <figref idref="DRAWINGS">FIG. 4</figref>, where each correlation between the incoming symbol stream and short symbol produce a correlation peak, as shown. This cross-correlation output stream <b>115</b> is fed to a second tapped delay element <b>110</b>, where each delay is equal to the length of an entire short symbol (shown for L=16), such that the correlation peaks for all 10 short symbols are summed in adder <b>112</b>. This results in the adder <b>112</b> output <b>118</b> increasing, shown as waveform <b>138</b> of <figref idref="DRAWINGS">FIG. 4</figref>, where each additional correlation peak causes the adder <b>112</b> output <b>118</b> to increase to a maximum at the final correlation peak, as shown. After the final correlation peak, the output <b>118</b> of the adder <b>112</b> begins to decrease, and this is detected by max peak finder <b>114</b>, which generates the output <b>116</b> symbol timing pulse shown in waveform <b>139</b> of <figref idref="DRAWINGS">FIG. 4</figref>. In this manner, a prior art symbol timing output is generated.</p>
<p id="p-0012" num="0011">There are several shortcomings of the prior art circuitry. While these system perform well in high signal to noise conditions, the operation in low signal to noise conditions is compromised. As the noise level of waveforms <b>122</b> and <b>124</b> of <figref idref="DRAWINGS">FIG. 4</figref> increases, the values of Cn and Pn <b>126</b> and <b>128</b> become increasingly noisy, and when generate a function u which has a high level or rms noise, thereby causing the start of packet signal to become unreliable. Further, the cross-correlation output stream <b>117</b> of <figref idref="DRAWINGS">FIG. 3</figref> is also effected by this noise, which results in generation of spurious symbol timing output <b>116</b>.</p>
<p id="p-0013" num="0012">It is desired to integrate the functions of symbol timing, packet detection, and coarse frequency offset measurement. It is also desired to provide an improved symbol timing signal which operates reliably in the presence of high levels of noise compared to prior art symbol timing and start of packet detectors.</p>
<heading id="h-0003" level="1">OBJECTS OF THE INVENTION</heading>
<p id="p-0014" num="0013">A first object of the invention is an integrated packet detection, symbol timing, and coarse frequency offset estimator.</p>
<p id="p-0015" num="0014">A second object of the invention is a system for packet detection.</p>
<p id="p-0016" num="0015">A third object of the invention is a system for determination of symbol timing.</p>
<p id="p-0017" num="0016">A fourth object of the invention is a system for determining symbol timing and packet detection using a variable first threshold.</p>
<heading id="h-0004" level="1">SUMMARY OF THE INVENTION</heading>
<p id="p-0018" num="0017">An integrated coarse frequency measurement, packet detector, and symbol timing function receives as an input a stream of complex OFDM baseband symbols, as would be produced by baseband detection of an radio frequency (RF) OFDM symbol stream in a wireless packet, where the input stream includes a plurality of symbols from a short preamble, including a repeated short symbols. The input stream of complex OFDM symbols is correlated against a delayed version of itself, where the delay is equal to a short symbol. This is done by applying the input signal stream to a delay element having a number of taps equal to the number of samples in a short symbol, and the delay element thereby generates an output with a delay substantially equal to a short symbol duration. The output of this delay line is coupled to a conjugator which inverts the sign of imaginary component of the delayed signal and provides this to a first multiplier, which multiplies the conjugated and delayed symbol with a symbol one preamble time earlier. The first multiplier output is summed over the length of a short symbol, which produces a first summer output C<sub>n</sub>, and the magnitude of this complex value is determined. This value is comparable to the correlated short preamble part of the signal, and also includes the magnitude of the received signal when the correlation between input and delayed input is high during the preamble interval. A second multiplier has an output which is formed by multiplying the input signal stream and its conjugate outputs together, thereby generating a magnitude of the present symbol. A complex symbol is of the form a+jb, so conjugating and multiplying this term produces the magnitude value a<sup>2</sup>+b<sup>2</sup>, which is summed over two preamble lengths to form a real value P<sub>n</sub>, which is multiplied by a known threshold to produce a comparison threshold. A first comparator compares the value of absolute value of C<sub>n </sub>with the first threshold, and generates an output Packet Detect when the absolute value of C<sub>n </sub>is greater than the threshold value. A second comparator compares the value of absolute value of C<sub>n </sub>with the threshold value, and produces a symbol timing output when the value of absolute value of C<sub>n </sub>falls below the threshold value. In this manner, absolute value of C<sub>n </sub>rising above the first threshold signals packet detection, and absolute value of C<sub>n </sub>falling below this threshold indicates end of preamble, and start of symbol timing. A phase finder operating on the output of the first summer determines the coarse frequency offset by averaging the phase values of the complex stream leaving the first summer.</p>
<?BRFSUM description="Brief Summary" end="tail"?>
<?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?>
<description-of-drawings>
<heading id="h-0005" level="1">BRIEF DESCRIPTION OF THE DRAWINGS</heading>
<p id="p-0019" num="0018"><figref idref="DRAWINGS">FIG. 1</figref> shows a timing diagram of an IEEE 802.11a or 802.11g packet.</p>
<p id="p-0020" num="0019"><figref idref="DRAWINGS">FIG. 2</figref> shows the block diagram for a prior art packet detection system and a coarse frequency offset estimator.</p>
<p id="p-0021" num="0020"><figref idref="DRAWINGS">FIG. 3</figref> shows a block diagram for a prior art symbol timing function.</p>
<p id="p-0022" num="0021"><figref idref="DRAWINGS">FIG. 4</figref> shows the waveforms for the packet detection system of <figref idref="DRAWINGS">FIGS. 2 and 3</figref>.</p>
<p id="p-0023" num="0022"><figref idref="DRAWINGS">FIG. 5</figref> shows the block diagram for a combined packet detection, symbol timing, and coarse frequency offset measurement.</p>
<p id="p-0024" num="0023"><figref idref="DRAWINGS">FIG. 6</figref> shows the waveforms for the packet detection system of <figref idref="DRAWINGS">FIG. 5</figref>.</p>
</description-of-drawings>
<?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?>
<?DETDESC description="Detailed Description" end="lead"?>
<heading id="h-0006" level="1">DETAILED DESCRIPTION OF THE INVENTION</heading>
<p id="p-0025" num="0024"><figref idref="DRAWINGS">FIG. 5</figref> shows an integrated coarse frequency offset measurement, packet detection, and symbol timing function processor <b>150</b>, and may be best understood in combination with <figref idref="DRAWINGS">FIG. 6</figref> showing the waveforms of operation. It is clear to one skilled in the art that these functions could be separated into individual functions, although the reuse of existing computed terms provides for reduced overall complexity when these functions are combined. An input stream of complex OFDM baseband symbols <b>152</b> such as results from baseband detection of an OFDM symbol stream and presented as stream <b>92</b> of <figref idref="DRAWINGS">FIGS. 2 and 3</figref> is input to the processor <b>150</b>. In a short preamble interval, such as shown as short preamble section <b>12</b> in <figref idref="DRAWINGS">FIG. 1</figref>, a repeating pattern of 16 samples comprises a short symbol, which is repeated 10 times during the short preamble section <b>12</b>, also shown as waveform <b>200</b> of <figref idref="DRAWINGS">FIG. 6</figref>. Each incoming symbol is sampled and provided to a delay function <b>154</b> in <figref idref="DRAWINGS">FIG. 5</figref>, where the delay function has a number of storage elements L (shown for L=16) which is equal to the number of samples in a short symbol. The output of the delay element <b>154</b> is fed to conjugator <b>156</b>, which reverses the sign of the imaginary part of the symbol, such that a+jb becomes a−jb. First multiplier <b>158</b> generates an output by multiplying the complex OFDM symbol input <b>152</b> with the delayed and conjugated complex output of conjugator <b>156</b>, and the first multiplier <b>158</b> output is also shown in waveform <b>202</b> of <figref idref="DRAWINGS">FIG. 6</figref>. The second multiplier <b>160</b> generates an output by multiplying the input signal stream with its conjugate output of conjugator <b>159</b>, thereby generating a value which represents the uncorrelated signal level, and is shown in waveform <b>204</b> of <figref idref="DRAWINGS">FIG. 6</figref>. The multiplication of a complex value a+bj and its conjugate a−bj produces the value a<sup>2</sup>+b<sup>2</sup>, and represents the uncorrelated signal level. The output of the second multiplier <b>160</b> is provided to second summer <b>164</b>, which sums over an interval equal to two short symbol lengths (2L), thereby producing an output value P<sub>n </sub><b>168</b> shown as waveform <b>208</b> of <figref idref="DRAWINGS">FIG. 6</figref>. The output P<sub>n </sub><b>176</b> is multiplied by a known threshold <b>178</b> in multiplier <b>180</b> to generate a comparator threshold <b>182</b>. The output of the first multiplier <b>158</b> is summed over a single symbol length L=16 to produce C<sub>n </sub><b>166</b>, also shown as waveform <b>206</b> of <figref idref="DRAWINGS">FIG. 6</figref>, and function <b>170</b> takes the magnitude of value C<sub>n</sub>, which represents the correlated value of signal power over a short preamble interval of L=16 samples. The magnitude of C<sub>n </sub>is compared to the comparator threshold <b>182</b>, and when it is greater than the comparator threshold, the ramp up comparator <b>184</b> asserts packet detect output <b>188</b>, which indicates the start of the short preamble part of the OFDM packet, and when the short preamble period ends, the magnitude of C<sub>n </sub><b>174</b> drops, thereby causing ramp down comparator <b>186</b> to assert the output symbol timing <b>190</b>. This is also shown with relationship to the other signals in waveform <b>210</b> of <figref idref="DRAWINGS">FIG. 6</figref>, which is examined by ramp up comparator <b>184</b> against comparator threshold <b>182</b> shown as level <b>216</b> in <figref idref="DRAWINGS">FIG. 6</figref>, and generating start of packet waveform <b>212</b> at time <b>216</b>, and symbol timing waveform <b>214</b> at time <b>217</b> when waveform <b>210</b> crosses below the threshold level <b>215</b>. It is possible to combine the packet detect output <b>188</b> (waveform <b>212</b> of <figref idref="DRAWINGS">FIG. 6</figref>) and symbol timing output <b>190</b> (waveform <b>214</b> of <figref idref="DRAWINGS">FIG. 6</figref>) into a single waveform such that the rising edge of the packet detect output <b>130</b> of <figref idref="DRAWINGS">FIG. 4</figref> indicates start of packet, and the falling edge indicates start of symbol timing <b>190</b>. In this manner, the detection of a packet, and the reference datum used to provide symbol timing is provided using the processing of a single set of circuitry.</p>
<p id="p-0026" num="0025">The phase finder <b>46</b> of <figref idref="DRAWINGS">FIG. 2</figref> may be improved by coupling to the output of first summer <b>162</b> as shown in <figref idref="DRAWINGS">FIG. 5</figref>. Phase finder <b>134</b> may be implemented as a CORDIC as described earlier, and first summer <b>162</b> provides a reduced noise input to phase finder <b>134</b>, thereby producing an improved estimate of coarse frequency offset <b>138</b> under poor s/n conditions compared to the prior art of <figref idref="DRAWINGS">FIG. 2</figref>. In this manner, an improved and integrated packet detection, symbol timing, and coarse frequency offset measurement system is described. While specific short preamble lengths are described, it is clear to one skilled in the art that the method is adaptable to any length of short preamble other than L=16, and it is adaptable to any OFDM receiving system which includes the transmission of two or more short preambles during a first preamble time.</p>
<?DETDESC description="Detailed Description" end="tail"?>
</description>
<us-claim-statement>We claim:</us-claim-statement>
<claims id="claims">
<claim id="CLM-00001" num="00001">
<claim-text>1. A system for the detection of data packets from a baseband signal where said baseband signal includes data packets which are encoded with symbols which use orthogonal frequency division multiplexing (OFDM), said packets include a short preamble part and a data part, said short preamble part being formed from a plurality of short symbols, each said short symbol comprising a pattern of L said samples, said detection of said data packets comprising:
<claim-text>said baseband signal coupled to a first delay line having a delay equal to the time required to receive said L samples, said delay line having an output;</claim-text>
<claim-text>a conjugator coupled to said delay line output, said conjugator inverting the sign of imaginary part of said delay line output;</claim-text>
<claim-text>a first multiplier having an output, said first multiplier output substantially equal to said baseband signal multiplied by said conjugator output;</claim-text>
<claim-text>a first summer having an output equal the sum of L previous said first multiplier output values;</claim-text>
<claim-text>a magnitude having an output which has a value equal to the magnitude of the output of said first summer;</claim-text>
<claim-text>a second multiplier having a real output, said second multiplier generating said output substantially equal to said baseband signal multiplied by the conjugate of baseband signal;</claim-text>
<claim-text>a second summer having an output equal to the to sum of twice said L previous said second multiplier output values;</claim-text>
<claim-text>a third multiplier having an output equal to said second summer output multiplied by a first baseline, said output forming a threshold value;</claim-text>
<claim-text>said packet detect output asserted when said magnitude output exceeds said threshold value.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00002" num="00002">
<claim-text>2. The system of <claim-ref idref="CLM-00001">claim 1</claim-ref> where each said short symbol said L=16.</claim-text>
</claim>
<claim id="CLM-00003" num="00003">
<claim-text>3. The system of <claim-ref idref="CLM-00001">claim 1</claim-ref> where each said short symbol includes 16 said OFDM samples.</claim-text>
</claim>
<claim id="CLM-00004" num="00004">
<claim-text>4. The system of <claim-ref idref="CLM-00001">claim 1</claim-ref> where said short preamble comprises 10 said short symbols.</claim-text>
</claim>
<claim id="CLM-00005" num="00005">
<claim-text>5. The system of <claim-ref idref="CLM-00001">claim 1</claim-ref> where said short preamble includes a long preamble following said plurality of short symbols.</claim-text>
</claim>
<claim id="CLM-00006" num="00006">
<claim-text>6. The system of <claim-ref idref="CLM-00001">claim 1</claim-ref> where said first summer operates over 16 said samples of said short symbol.</claim-text>
</claim>
<claim id="CLM-00007" num="00007">
<claim-text>7. The system of <claim-ref idref="CLM-00001">claim 1</claim-ref> where said second summer operates over two said short symbols.</claim-text>
</claim>
<claim id="CLM-00008" num="00008">
<claim-text>8. The system of <claim-ref idref="CLM-00001">claim 1</claim-ref> where said known threshold is between 0.125 and 0.5 of the maximum output value produced by said second summer.</claim-text>
</claim>
<claim id="CLM-00009" num="00009">
<claim-text>9. The system of <claim-ref idref="CLM-00001">claim 1</claim-ref> where said known threshold is 0.25 of the maximum output value produced by said second summer.</claim-text>
</claim>
<claim id="CLM-00010" num="00010">
<claim-text>10. A system for the detection of symbol timing from a baseband signal where said baseband signal includes data packets which are encoded with symbols which use orthogonal frequency division multiplexing (OFDM), said packets include a short preamble part and a data part, said short preamble part being formed from a plurality of short symbols, each said short symbol comprising a pattern of L said samples, said detection of said data packets comprising:
<claim-text>said baseband signal coupled to a first delay line having a delay equal to the time required to receive said L samples, said delay line having an output;</claim-text>
<claim-text>a conjugator coupled to said delay line output, said conjugator inverting the sign of imaginary part of said delay line output;</claim-text>
<claim-text>a first multiplier having an output, said first multiplier generating an output from multiplying said baseband signal and said conjugator output;</claim-text>
<claim-text>a first summer having an output equal the sum of L previous said first multiplier output values;</claim-text>
<claim-text>a magnitude having an output which has a value equal to the magnitude of the output of said first summer;</claim-text>
<claim-text>a second multiplier having a real output, said second multiplier forming said real output by multiplying said baseband signal with the conjugate of said baseband signal;</claim-text>
<claim-text>a second summer having an output equal to the to sum of twice said L previous said second correlator output values;</claim-text>
<claim-text>a a third multiplier having an output equal to said second summer output multiplied by a first baseline, said output forming a threshold value;</claim-text>
<claim-text>said symbol timing output asserted when said magnitude square output falls below said threshold value.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00011" num="00011">
<claim-text>11. The system of <claim-ref idref="CLM-00010">claim 10</claim-ref> where each said short symbols said L=16.</claim-text>
</claim>
<claim id="CLM-00012" num="00012">
<claim-text>12. The system of <claim-ref idref="CLM-00010">claim 10</claim-ref> where each said short symbol includes 16 said OFDM samples.</claim-text>
</claim>
<claim id="CLM-00013" num="00013">
<claim-text>13. The system of <claim-ref idref="CLM-00010">claim 10</claim-ref> where said short preamble comprises 10 said short symbols.</claim-text>
</claim>
<claim id="CLM-00014" num="00014">
<claim-text>14. The system of <claim-ref idref="CLM-00010">claim 10</claim-ref> where said short preamble includes a long preamble following said plurality of short symbols.</claim-text>
</claim>
<claim id="CLM-00015" num="00015">
<claim-text>15. The system of <claim-ref idref="CLM-00010">claim 10</claim-ref> where said first summer operates over 16 said samples of said short symbols.</claim-text>
</claim>
<claim id="CLM-00016" num="00016">
<claim-text>16. The system of <claim-ref idref="CLM-00010">claim 10</claim-ref> where said second summer operates over two said short symbols.</claim-text>
</claim>
<claim id="CLM-00017" num="00017">
<claim-text>17. The system of <claim-ref idref="CLM-00010">claim 10</claim-ref> where said known threshold is between 0.125 and 0.5 of the maximum output value produced by said second summer.</claim-text>
</claim>
<claim id="CLM-00018" num="00018">
<claim-text>18. The system of <claim-ref idref="CLM-00010">claim 10</claim-ref> where said known threshold is 0.25 of the maximum output value produced by said second summer.</claim-text>
</claim>
<claim id="CLM-00019" num="00019">
<claim-text>19. The system of <claim-ref idref="CLM-00010">claim 10</claim-ref> where said packet detection is indicated by one edge of an output signal and said symbol timing is indicated by a different edge of same said output signal.</claim-text>
</claim>
<claim id="CLM-00020" num="00020">
<claim-text>20. A system for the estimation of coarse frequency offset from a baseband signal where said baseband signal includes data packets which are encoded with symbols which use orthogonal frequency division multiplexing (OFDM), said packets include a short preamble part and a data part, said short preamble part being formed from a plurality of short symbols, each said short symbol comprising a pattern of L said samples, said detection of said data packets comprising:
<claim-text>said baseband signal coupled to a first delay line having a delay equal to the time required to receive said L samples, said delay line having an output;</claim-text>
<claim-text>a conjugator coupled to said delay line output, said conjugator inverting the sign of imaginary part of said delay line output;</claim-text>
<claim-text>a multiplier having an output, said first multiplier output formed from the multiplication of said baseband signal and said conjugator output;</claim-text>
<claim-text>an averager coupled to said multiplier and producing an average of the output of said multiplier;</claim-text>
<claim-text>a phase finder for converting a complex value into an angle, said phase finder receiving as an input the output of said averager.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00021" num="00021">
<claim-text>21. The system of <claim-ref idref="CLM-00020">claim 20</claim-ref> where said averager finds the average value of a previous 16 said multiplications.</claim-text>
</claim>
<claim id="CLM-00022" num="00022">
<claim-text>22. The system of <claim-ref idref="CLM-00020">claim 20</claim-ref> where said phase finder converts a complex input value into an angular value.</claim-text>
</claim>
<claim id="CLM-00023" num="00023">
<claim-text>23. The system of <claim-ref idref="CLM-00020">claim 20</claim-ref> where said phase finder is a CORDIC.</claim-text>
</claim>
<claim id="CLM-00024" num="00024">
<claim-text>24. The system of <claim-ref idref="CLM-00020">claim 20</claim-ref> where said L is 16.</claim-text>
</claim>
<claim id="CLM-00025" num="00025">
<claim-text>25. A system for the detection of symbol timing and packet detection from a baseband signal where said baseband signal includes data packets which are encoded with symbols which use orthogonal frequency division multiplexing (OFDM), said packets include a short preamble part and a data part, said short preamble part being formed from a plurality of short symbols, each said short symbol comprising a pattern of L said samples, said detection of said data packets comprising:
<claim-text>said baseband signal coupled to a first delay line having a delay equal to the time required to receive said L symbols, said delay line having an output;</claim-text>
<claim-text>a conjugator coupled to said delay line output, said conjugator inverting the imaginary part of said delay line output;</claim-text>
<claim-text>a first multiplier having an output, said first multiplier generating an output by multiplying said baseband signal and said conjugator output;</claim-text>
<claim-text>a first summer having an output equal the sum of L previous said first correlator output values;</claim-text>
<claim-text>a magnitude having an output which has a value equal to the magnitude of the output of said first summer;</claim-text>
<claim-text>a second multiplier having a real output, said second multiplier output formed from multiplying said baseband signal and the conjugate of said baseband signal;</claim-text>
<claim-text>a second summer having an output equal to the to sum of twice said L previous said second multiplier output values;</claim-text>
<claim-text>a third multiplier having an output equal to said second summer output multiplied by a first baseline, said output forming a threshold value;</claim-text>
<claim-text>said packet detect output asserted when said magnitude square output rises above said threshold value;</claim-text>
<claim-text>said symbol timing output asserted when said magnitude square output falls below said threshold value.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00026" num="00026">
<claim-text>26. The system of <claim-ref idref="CLM-00025">claim 25</claim-ref> where each said short symbol said L=16.</claim-text>
</claim>
<claim id="CLM-00027" num="00027">
<claim-text>27. The system of <claim-ref idref="CLM-00025">claim 25</claim-ref> where each said short symbol includes 16 said OFDM samples.</claim-text>
</claim>
<claim id="CLM-00028" num="00028">
<claim-text>28. The system of <claim-ref idref="CLM-00025">claim 25</claim-ref> where said short preamble comprises 10 said short symbols.</claim-text>
</claim>
<claim id="CLM-00029" num="00029">
<claim-text>29. The system of <claim-ref idref="CLM-00025">claim 25</claim-ref> where said short preamble includes a long preamble following said plurality of short symbols.</claim-text>
</claim>
<claim id="CLM-00030" num="00030">
<claim-text>30. The system of <claim-ref idref="CLM-00025">claim 25</claim-ref> where said first summer operates over 16 said samples of said short symbol.</claim-text>
</claim>
<claim id="CLM-00031" num="00031">
<claim-text>31. The system of <claim-ref idref="CLM-00025">claim 25</claim-ref> where said second summer operates over two said short symbols.</claim-text>
</claim>
<claim id="CLM-00032" num="00032">
<claim-text>32. The system of <claim-ref idref="CLM-00025">claim 25</claim-ref> where said known threshold is between 0.125 and 0.5 of the maximum output value produced by said second summer.</claim-text>
</claim>
<claim id="CLM-00033" num="00033">
<claim-text>33. The system of <claim-ref idref="CLM-00025">claim 25</claim-ref> where said known threshold is 0.25 of the maximum output value produced by said second summer.</claim-text>
</claim>
<claim id="CLM-00034" num="00034">
<claim-text>34. The system of <claim-ref idref="CLM-00025">claim 25</claim-ref> where said packet detection is indicated by one edge of an output signal and said symbol timing is indicated by a different edge of same said output signal.</claim-text>
</claim>
</claims>
</us-patent-grant>
