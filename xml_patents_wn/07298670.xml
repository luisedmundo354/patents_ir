<us-patent-grant lang="EN" dtd-version="v4.2 2006-08-23" file="US07298670-20071120.XML" status="PRODUCTION" id="us-patent-grant" country="US" date-produced="20071106" date-publ="20071120">
<us-bibliographic-data-grant>
<publication-reference>
<document-id>
<country>US</country>
<doc-number>07298670</doc-number>
<kind>B2</kind>
<date>20071120</date>
</document-id>
</publication-reference>
<application-reference appl-type="utility">
<document-id>
<country>US</country>
<doc-number>11460325</doc-number>
<date>20060727</date>
</document-id>
</application-reference>
<us-application-series-code>11</us-application-series-code>
<classifications-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>G</section>
<class>11</class>
<subclass>C</subclass>
<main-group>8</main-group>
<subgroup>00</subgroup>
<symbol-position>F</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20071120</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
</classifications-ipcr>
<classification-national>
<country>US</country>
<main-classification>365233</main-classification>
<further-classification>36523008</further-classification>
</classification-national>
<invention-title id="d0e43">Integrated circuit with analog or multilevel storage cells and user-selectable sampling frequency</invention-title>
<references-cited>
<citation>
<patcit num="00001">
<document-id>
<country>US</country>
<doc-number>4890259</doc-number>
<kind>A</kind>
<name>Simko</name>
<date>19891200</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00002">
<document-id>
<country>US</country>
<doc-number>5220531</doc-number>
<kind>A</kind>
<name>Blyth et al.</name>
<date>19930600</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00003">
<document-id>
<country>US</country>
<doc-number>5241494</doc-number>
<kind>A</kind>
<name>Blyth et al.</name>
<date>19930800</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00004">
<document-id>
<country>US</country>
<doc-number>5388064</doc-number>
<kind>A</kind>
<name>Khan</name>
<date>19950200</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00005">
<document-id>
<country>US</country>
<doc-number>5623436</doc-number>
<kind>A</kind>
<name>Sowards et al.</name>
<date>19970400</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00006">
<document-id>
<country>US</country>
<doc-number>5629890</doc-number>
<kind>A</kind>
<name>Engh</name>
<date>19970500</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00007">
<document-id>
<country>US</country>
<doc-number>5638320</doc-number>
<kind>A</kind>
<name>Wong et al.</name>
<date>19970600</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00008">
<document-id>
<country>US</country>
<doc-number>5680341</doc-number>
<kind>A</kind>
<name>Wong et al.</name>
<date>19971000</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00009">
<document-id>
<country>US</country>
<doc-number>5687115</doc-number>
<kind>A</kind>
<name>Wong et al.</name>
<date>19971100</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00010">
<document-id>
<country>US</country>
<doc-number>5694356</doc-number>
<kind>A</kind>
<name>Wong et al.</name>
<date>19971200</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00011">
<document-id>
<country>US</country>
<doc-number>5745409</doc-number>
<kind>A</kind>
<name>Wong et al.</name>
<date>19980400</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00012">
<document-id>
<country>US</country>
<doc-number>5748533</doc-number>
<kind>A</kind>
<name>Dunlap et al.</name>
<date>19980500</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00013">
<document-id>
<country>US</country>
<doc-number>5748534</doc-number>
<kind>A</kind>
<name>Dunlap et al.</name>
<date>19980500</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00014">
<document-id>
<country>US</country>
<doc-number>5774702</doc-number>
<kind>A</kind>
<name>Mitsuishi et al.</name>
<date>19980600</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>713501</main-classification></classification-national>
</citation>
<citation>
<patcit num="00015">
<document-id>
<country>US</country>
<doc-number>5801980</doc-number>
<kind>A</kind>
<name>Wong et al.</name>
<date>19980900</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00016">
<document-id>
<country>US</country>
<doc-number>5818757</doc-number>
<kind>A</kind>
<name>So et al.</name>
<date>19981000</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00017">
<document-id>
<country>US</country>
<doc-number>5828592</doc-number>
<kind>A</kind>
<name>Tran et al.</name>
<date>19981000</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00018">
<document-id>
<country>US</country>
<doc-number>6141671</doc-number>
<kind>A</kind>
<name>Adams et al.</name>
<date>20001000</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00019">
<document-id>
<country>US</country>
<doc-number>6185119</doc-number>
<kind>B1</kind>
<name>Haeberli et al.</name>
<date>20010200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>365 45</main-classification></classification-national>
</citation>
<citation>
<patcit num="00020">
<document-id>
<country>US</country>
<doc-number>6208542</doc-number>
<kind>B1</kind>
<name>Wang et al.</name>
<date>20010300</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00021">
<document-id>
<country>US</country>
<doc-number>6549041</doc-number>
<kind>B2</kind>
<name>Waldrop</name>
<date>20030400</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00022">
<document-id>
<country>WO</country>
<doc-number>WO 96/26523</doc-number>
<date>19960800</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00023">
<document-id>
<country>WO</country>
<doc-number>WP 97/05620</doc-number>
<date>19970200</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<nplcit num="00024">
<othercit>European Office Action for Application No. 99 930 821.6 dated Aug. 16, 2006, 3 pages.</othercit>
</nplcit>
<category>cited by other</category>
</citation>
<citation>
<nplcit num="00025">
<othercit>Office Action for European Patent Application No. 99 930 821.6 mailed Sep. 19, 2005 for SanDisk Corporation, 5 pages.</othercit>
</nplcit>
<category>cited by other</category>
</citation>
<citation>
<nplcit num="00026">
<othercit>Listing of Claims as filed in European Patent Application No. 99 930 821.6, 3 pages.</othercit>
</nplcit>
<category>cited by other</category>
</citation>
<citation>
<nplcit num="00027">
<othercit>User's Manual “ISD-T266SA CompactSPEECH™ Digital Speech Processor With Serial Flash Interface,” ISD, San Jose, CA, Jul. 1997, 88 pages.</othercit>
</nplcit>
<category>cited by other</category>
</citation>
<citation>
<nplcit num="00028">
<othercit>Data Sheet “IVS1530,” Invox Technology, Campbell, CA Oct. 1997, 8 pages.</othercit>
</nplcit>
<category>cited by other</category>
</citation>
<citation>
<nplcit num="00029">
<othercit>Data Sheet “IVS1560,” Invox Technology, Campbell, CA, Feb. 1998, 14 pages.</othercit>
</nplcit>
<category>cited by other</category>
</citation>
<citation>
<nplcit num="00030">
<othercit>Data Sheet “ISD1520,” ISD, San Jose, CA, Apr. 1998, 18 pages.</othercit>
</nplcit>
<category>cited by other</category>
</citation>
<citation>
<nplcit num="00031">
<othercit>Data Sheet “ISD33060/075/090/120-4 Products,” ISD, San Jose, CA, Apr. 1998, 31 pages.</othercit>
</nplcit>
<category>cited by other</category>
</citation>
<citation>
<nplcit num="00032">
<othercit>Data Sheet “ISD4003 Series,” ISD, San Jose, CA, Apr. 1998, 27 pages.</othercit>
</nplcit>
<category>cited by other</category>
</citation>
<citation>
<nplcit num="00033">
<othercit>Data Sheet “ISD4004 Series,” ISD, San Jose, CA, Sep. 1998, 28 pages.</othercit>
</nplcit>
<category>cited by other</category>
</citation>
<citation>
<nplcit num="00034">
<othercit>Advanced Information “ISD5008,” ISD, San Jose, CA, Nov. 1998, 2 pages.</othercit>
</nplcit>
<category>cited by other</category>
</citation>
<citation>
<nplcit num="00035">
<othercit>Press Release “ISD Announces the Only Fully-Integrated Voice Storage Microchip Designated for Every Digital Cellular Handset,” ISD, San Jose, CA, Nov. 16, 1998, 2 pages.</othercit>
</nplcit>
<category>cited by other</category>
</citation>
<citation>
<nplcit num="00036">
<othercit>Haeberli et al., “Compensation and Calibration of IC Microsensors,” Thesis submitted Swiss Federal Institute of Technology, Zurich, 1997, DISS. ETH No. 12090, title page, copyright page, and pp. 48-51, 54-55.</othercit>
</nplcit>
<category>cited by other</category>
</citation>
<citation>
<nplcit num="00037">
<othercit>Supplementary European Search Report, EP 99 93 0821, Dec. 3, 2001, 1 page.</othercit>
</nplcit>
<category>cited by other</category>
</citation>
</references-cited>
<number-of-claims>3</number-of-claims>
<us-exemplary-claim>1</us-exemplary-claim>
<us-field-of-classification-search>
<classification-national>
<country>US</country>
<main-classification>365233</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>36523005</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>36523006</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>36523008</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>365239-241</main-classification>
<additional-info>unstructured</additional-info>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>327  2- 12</main-classification>
<additional-info>unstructured</additional-info>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>327146-163</main-classification>
<additional-info>unstructured</additional-info>
</classification-national>
</us-field-of-classification-search>
<figures>
<number-of-drawing-sheets>47</number-of-drawing-sheets>
<number-of-figures>54</number-of-figures>
</figures>
<us-related-documents>
<division>
<relation>
<parent-doc>
<document-id>
<country>US</country>
<doc-number>10359476</doc-number>
<kind>00</kind>
<date>20030205</date>
</document-id>
<parent-grant-document>
<document-id>
<country>US</country>
<doc-number>7106632</doc-number>
<kind>A </kind>
</document-id>
</parent-grant-document>
</parent-doc>
<child-doc>
<document-id>
<country>US</country>
<doc-number>11460325</doc-number>
</document-id>
</child-doc>
</relation>
</division>
<division>
<relation>
<parent-doc>
<document-id>
<country>US</country>
<doc-number>09343117</doc-number>
<kind>00</kind>
<date>19990629</date>
</document-id>
<parent-grant-document>
<document-id>
<country>US</country>
<doc-number>6549456</doc-number>
<kind>A </kind>
</document-id>
</parent-grant-document>
</parent-doc>
<child-doc>
<document-id>
<country>US</country>
<doc-number>10359476</doc-number>
</document-id>
</child-doc>
</relation>
</division>
<us-provisional-application>
<document-id>
<country>US</country>
<doc-number>60116760</doc-number>
<kind>00</kind>
<date>19990122</date>
</document-id>
</us-provisional-application>
<us-provisional-application>
<document-id>
<country>US</country>
<doc-number>60091326</doc-number>
<kind>00</kind>
<date>19980630</date>
</document-id>
</us-provisional-application>
<related-publication>
<document-id>
<country>US</country>
<doc-number>20060256626</doc-number>
<kind>A1</kind>
<date>20061116</date>
</document-id>
</related-publication>
</us-related-documents>
<parties>
<applicants>
<applicant sequence="001" app-type="applicant-inventor" designation="us-only">
<addressbook>
<last-name>Werner</last-name>
<first-name>Carl W.</first-name>
<address>
<city>San Jose</city>
<state>CA</state>
<country>US</country>
</address>
</addressbook>
<nationality>
<country>omitted</country>
</nationality>
<residence>
<country>US</country>
</residence>
</applicant>
<applicant sequence="002" app-type="applicant-inventor" designation="us-only">
<addressbook>
<last-name>Haeberli</last-name>
<first-name>Andreas M.</first-name>
<address>
<city>Campbell</city>
<state>CA</state>
<country>US</country>
</address>
</addressbook>
<nationality>
<country>omitted</country>
</nationality>
<residence>
<country>US</country>
</residence>
</applicant>
<applicant sequence="003" app-type="applicant-inventor" designation="us-only">
<addressbook>
<last-name>Wong</last-name>
<first-name>Leon Sea Jiunn</first-name>
<address>
<city>Sunnyvale</city>
<state>CA</state>
<country>US</country>
</address>
</addressbook>
<nationality>
<country>omitted</country>
</nationality>
<residence>
<country>US</country>
</residence>
</applicant>
<applicant sequence="004" app-type="applicant-inventor" designation="us-only">
<addressbook>
<last-name>Wang</last-name>
<first-name>Cheng-Yuan Michael</first-name>
<address>
<city>San Jose</city>
<state>CA</state>
<country>US</country>
</address>
</addressbook>
<nationality>
<country>omitted</country>
</nationality>
<residence>
<country>US</country>
</residence>
</applicant>
<applicant sequence="005" app-type="applicant-inventor" designation="us-only">
<addressbook>
<last-name>So</last-name>
<first-name>Hock C.</first-name>
<address>
<city>Redwood City</city>
<state>CA</state>
<country>US</country>
</address>
</addressbook>
<nationality>
<country>omitted</country>
</nationality>
<residence>
<country>US</country>
</residence>
</applicant>
<applicant sequence="006" app-type="applicant-inventor" designation="us-only">
<addressbook>
<last-name>Wong</last-name>
<first-name>Sau C.</first-name>
<address>
<city>Hillsborough</city>
<state>CA</state>
<country>US</country>
</address>
</addressbook>
<nationality>
<country>omitted</country>
</nationality>
<residence>
<country>US</country>
</residence>
</applicant>
</applicants>
<agents>
<agent sequence="01" rep-type="attorney">
<addressbook>
<orgname>Davis Wright Tremaine LLP</orgname>
<address>
<country>unknown</country>
</address>
</addressbook>
</agent>
</agents>
</parties>
<assignees>
<assignee>
<addressbook>
<orgname>SanDisk Corporation</orgname>
<role>02</role>
<address>
<city>Milpitas</city>
<state>CA</state>
<country>US</country>
</address>
</addressbook>
</assignee>
</assignees>
<examiners>
<primary-examiner>
<last-name>Dinh</last-name>
<first-name>Son</first-name>
<department>2824</department>
</primary-examiner>
<assistant-examiner>
<last-name>Nguyen</last-name>
<first-name>Hien N</first-name>
</assistant-examiner>
</examiners>
</us-bibliographic-data-grant>
<abstract id="abstract">
<p id="p-0001" num="0000">Techniques are used to store information in a medium such as the memory cells of an integrated circuit, and also retrieval of information from the medium. The integrated circuit includes nonvolatile memory cells (<b>416</b>) capable of multilevel or analog voltage level storage. The integrated circuit may store or record information in analog or digital form, or both. Information is stored in and retrieved from the integrated circuit using a user-selected sampling frequency. The user's selection of the sampling frequency is stored within the integrated circuit.</p>
</abstract>
<drawings id="DRAWINGS">
<figure id="Fig-EMI-D00000" num="00000">
<img id="EMI-D00000" he="128.10mm" wi="199.56mm" file="US07298670-20071120-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00001" num="00001">
<img id="EMI-D00001" he="214.55mm" wi="139.78mm" orientation="landscape" file="US07298670-20071120-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00002" num="00002">
<img id="EMI-D00002" he="165.61mm" wi="73.83mm" file="US07298670-20071120-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00003" num="00003">
<img id="EMI-D00003" he="148.93mm" wi="64.94mm" file="US07298670-20071120-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00004" num="00004">
<img id="EMI-D00004" he="196.43mm" wi="132.33mm" orientation="landscape" file="US07298670-20071120-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00005" num="00005">
<img id="EMI-D00005" he="197.10mm" wi="93.13mm" orientation="landscape" file="US07298670-20071120-D00005.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00006" num="00006">
<img id="EMI-D00006" he="234.44mm" wi="167.39mm" orientation="landscape" file="US07298670-20071120-D00006.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00007" num="00007">
<img id="EMI-D00007" he="80.43mm" wi="146.30mm" file="US07298670-20071120-D00007.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00008" num="00008">
<img id="EMI-D00008" he="257.64mm" wi="149.01mm" orientation="landscape" file="US07298670-20071120-D00008.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00009" num="00009">
<img id="EMI-D00009" he="212.43mm" wi="146.56mm" orientation="landscape" file="US07298670-20071120-D00009.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00010" num="00010">
<img id="EMI-D00010" he="173.91mm" wi="161.21mm" orientation="landscape" file="US07298670-20071120-D00010.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00011" num="00011">
<img id="EMI-D00011" he="142.75mm" wi="142.75mm" file="US07298670-20071120-D00011.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00012" num="00012">
<img id="EMI-D00012" he="136.23mm" wi="129.88mm" file="US07298670-20071120-D00012.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00013" num="00013">
<img id="EMI-D00013" he="214.55mm" wi="148.67mm" orientation="landscape" file="US07298670-20071120-D00013.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00014" num="00014">
<img id="EMI-D00014" he="126.58mm" wi="145.88mm" file="US07298670-20071120-D00014.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00015" num="00015">
<img id="EMI-D00015" he="129.20mm" wi="101.77mm" file="US07298670-20071120-D00015.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00016" num="00016">
<img id="EMI-D00016" he="174.84mm" wi="145.63mm" orientation="landscape" file="US07298670-20071120-D00016.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00017" num="00017">
<img id="EMI-D00017" he="114.72mm" wi="137.58mm" file="US07298670-20071120-D00017.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00018" num="00018">
<img id="EMI-D00018" he="193.29mm" wi="162.98mm" orientation="landscape" file="US07298670-20071120-D00018.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00019" num="00019">
<img id="EMI-D00019" he="255.10mm" wi="154.26mm" orientation="landscape" file="US07298670-20071120-D00019.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00020" num="00020">
<img id="EMI-D00020" he="196.85mm" wi="123.11mm" orientation="landscape" file="US07298670-20071120-D00020.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00021" num="00021">
<img id="EMI-D00021" he="244.43mm" wi="167.30mm" orientation="landscape" file="US07298670-20071120-D00021.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00022" num="00022">
<img id="EMI-D00022" he="191.77mm" wi="141.73mm" orientation="landscape" file="US07298670-20071120-D00022.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00023" num="00023">
<img id="EMI-D00023" he="176.36mm" wi="125.39mm" orientation="landscape" file="US07298670-20071120-D00023.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00024" num="00024">
<img id="EMI-D00024" he="160.36mm" wi="156.97mm" file="US07298670-20071120-D00024.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00025" num="00025">
<img id="EMI-D00025" he="169.16mm" wi="122.34mm" orientation="landscape" file="US07298670-20071120-D00025.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00026" num="00026">
<img id="EMI-D00026" he="229.70mm" wi="144.78mm" orientation="landscape" file="US07298670-20071120-D00026.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00027" num="00027">
<img id="EMI-D00027" he="218.02mm" wi="123.70mm" orientation="landscape" file="US07298670-20071120-D00027.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00028" num="00028">
<img id="EMI-D00028" he="211.33mm" wi="168.91mm" file="US07298670-20071120-D00028.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00029" num="00029">
<img id="EMI-D00029" he="177.12mm" wi="150.37mm" file="US07298670-20071120-D00029.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00030" num="00030">
<img id="EMI-D00030" he="188.55mm" wi="124.38mm" orientation="landscape" file="US07298670-20071120-D00030.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00031" num="00031">
<img id="EMI-D00031" he="212.17mm" wi="137.41mm" file="US07298670-20071120-D00031.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00032" num="00032">
<img id="EMI-D00032" he="201.93mm" wi="178.48mm" orientation="landscape" file="US07298670-20071120-D00032.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00033" num="00033">
<img id="EMI-D00033" he="230.12mm" wi="161.54mm" file="US07298670-20071120-D00033.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00034" num="00034">
<img id="EMI-D00034" he="176.61mm" wi="100.50mm" orientation="landscape" file="US07298670-20071120-D00034.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00035" num="00035">
<img id="EMI-D00035" he="223.10mm" wi="94.32mm" orientation="landscape" file="US07298670-20071120-D00035.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00036" num="00036">
<img id="EMI-D00036" he="221.57mm" wi="131.66mm" orientation="landscape" file="US07298670-20071120-D00036.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00037" num="00037">
<img id="EMI-D00037" he="225.64mm" wi="169.08mm" orientation="landscape" file="US07298670-20071120-D00037.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00038" num="00038">
<img id="EMI-D00038" he="209.97mm" wi="121.41mm" orientation="landscape" file="US07298670-20071120-D00038.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00039" num="00039">
<img id="EMI-D00039" he="234.53mm" wi="157.31mm" file="US07298670-20071120-D00039.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00040" num="00040">
<img id="EMI-D00040" he="168.66mm" wi="128.27mm" orientation="landscape" file="US07298670-20071120-D00040.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00041" num="00041">
<img id="EMI-D00041" he="126.15mm" wi="158.07mm" file="US07298670-20071120-D00041.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00042" num="00042">
<img id="EMI-D00042" he="234.87mm" wi="164.76mm" orientation="landscape" file="US07298670-20071120-D00042.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00043" num="00043">
<img id="EMI-D00043" he="239.18mm" wi="116.42mm" orientation="landscape" file="US07298670-20071120-D00043.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00044" num="00044">
<img id="EMI-D00044" he="153.16mm" wi="130.05mm" orientation="landscape" file="US07298670-20071120-D00044.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00045" num="00045">
<img id="EMI-D00045" he="260.10mm" wi="142.07mm" orientation="landscape" file="US07298670-20071120-D00045.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00046" num="00046">
<img id="EMI-D00046" he="217.25mm" wi="159.68mm" orientation="landscape" file="US07298670-20071120-D00046.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00047" num="00047">
<img id="EMI-D00047" he="148.51mm" wi="153.84mm" file="US07298670-20071120-D00047.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
</drawings>
<description id="description">
<?RELAPP description="Other Patent Relations" end="lead"?>
<heading id="h-0001" level="1">CROSS-REFERENCE TO RELATED APPLICATIONS</heading>
<p id="p-0002" num="0001">This application is a divisional of Application Ser. No. 10/359,476, filed Feb. 5, 2003, now U.S. Pat. No. 7,106,632, which is a divisional of application Ser. No. 09/343,117, filed Jun. 29, 1999, now U.S. Pat. No. 6,549,456, which application is incorporated herein in its entirety by this reference.</p>
<?RELAPP description="Other Patent Relations" end="tail"?>
<?BRFSUM description="Brief Summary" end="lead"?>
<heading id="h-0002" level="1">BACKGROUND OF THE INVENTION</heading>
<p id="p-0003" num="0002">The present invention relates to the field of information storage and retrieval using integrated circuit technology. More specifically, the present invention relates to techniques for storing (and retrieving) analog or digital data, or both, within an integrated circuit using multilevel nonvolatile cells.</p>
<p id="p-0004" num="0003">Among the most important and pioneering innovations in history are devices, techniques, and mediums that have been devised to record and playback sights, sounds, actions, and other information. Many of these innovations have led to the rise and growth of the media and entertainment industries, and also the personal and consumer electronics industries.</p>
<p id="p-0005" num="0004">For example, among the most notable inventions are Thomas Alva Edison's phonograph and record with which Edison recorded and played his first recording “Mary Had a Little Lamb.” Other achievements in this field are the audio tape recorder, cassette tape recorder, motion picture, talking motion picture (“talkies”), video cassette recorder (VCR), compact disc (CD and CD-ROM), video disc, digital video disc (DVD), and many, many more of such innovations. In the present day, full-length motion pictures with stereo sound may be contained on a single optical disk.</p>
<p id="p-0006" num="0005">Although these technologies have met with substantial success there is a continuing desire to improve on the techniques, devices, mediums used to record information. For example, there is a need to provide techniques that provide dense storage of information. Denser storage facilitates storing information in a compact area, and provides a relatively long recording time.</p>
<p id="p-0007" num="0006">There is a need to provide reliable and robust techniques. The stored reproduction should be a faithful reproduction of the original information. Despite repeated use, the stored reproduction should retain its original form, and also not degrade over time. Furthermore, the techniques should be compatible with and interface easily with present and emerging technologies in electronics and with devices facilitating electronic commerce (such as the Internet and World Wide Web).</p>
<p id="p-0008" num="0007">Integrated circuit technology has been used to implement many electronic devices including computers, video recorders, digital cameras, microprocessors, DRAMs, SRAMs, Flash memory, and many others. As integrated technology continues to improve, it becomes practical to use this technology to record and playback sights, sounds, actions, and other information.</p>
<p id="p-0009" num="0008">Data has typically been stored within integrated circuits using a digital or binary format. For applications where the input is analog, however, this requires conversion of signals to digital format, generally by an analog-to-digital (A/D) converter or similar means. And playback of analog signal from a digital storage format may require a digital-to-analog (D/A) converter or similar means. As can be appreciated, these conversions add complexity and extra expense to the entire procedure. Further, a conversion of the signal to digital form quantizes the signal and will lead to quantization noise in the reproduced signal.</p>
<p id="p-0010" num="0009">Information such as sounds and voices, stereo and multichannel sounds, pictures, video, and others requires many bits of data storage. Storage of data in digital format may be inefficient because one bit (i.e., two different levels) of data is stored in a single memory cell. Further, it may be desirable to store an input signal using a sampling rate the user selects.</p>
<p id="p-0011" num="0010">Therefore, techniques are needed for compactly storing (and retrieving) analog and digital information including sights, sounds, and actions using integrated circuit technology.</p>
<heading id="h-0003" level="1">SUMMARY OF THE INVENTION</heading>
<p id="p-0012" num="0011">The present invention provides techniques for the storage of information in a medium such as the memory cells of an integrated circuit, and also retrieval of information from the medium. In a particular embodiment, the present invention provides an integrated circuit with nonvolatile memory cells capable of multilevel or analog voltage level storage. The integrated circuit may store or record analog or digital information, or both.</p>
<p id="p-0013" num="0012">An input signal or other data to be stored in the integrated circuit may be sampled at various sampling rates that are user selectable or user controllable. The sampling rate or sampling frequency may also be dynamically changed while operating the integrated circuit to allow a user to optimize for maximum recording duration or improved recording sound quality, as desired. This sampling frequency may be changed by configuring the integrated circuit. Some of the techniques of the present invention include a series of commands to the integrated circuit (e.g., by way of serial bits or an SPI interface to the integrated circuit); configuring memory cells, registers, combinatorial or sequential logic, or logic gates within the integrated circuit; or many other techniques to permit a user to select a sampling frequency and store the user's selection on the integrated circuit. This aspect of the present invention permits changing the sampling frequency while the integrated circuit is operating or resident on a system board, without the need to change components external to the integrated circuit (e.g., without the need of changing an external resistor). This feature of the present invention provides greater flexibility in the operation of the integrated circuit.</p>
<p id="p-0014" num="0013">A plurality of digital bits may be stored in a single multilevel memory cell. Since more than one bit is stored in a memory cell, techniques of the present invention permit denser and more compact storage of digital data.</p>
<p id="p-0015" num="0014">Further, real world information such as in the form of voices, sounds, images, videos, or actions, and combinations of these, may be converted to electrical signal equivalents using a transducer or other similar device. The resulting analog signal may be stored using the techniques of the present invention directly in the analog memory cells of the integrated circuit. The analog data may be stored without the need for an analog-to-digital (A/D) conversion. And, the present invention also provides techniques for playback or re-creation of the original signal from the stored data. The analog data may be retrieved without the need for a digital-to-analog (D/A) conversion.</p>
<p id="p-0016" num="0015">In a specific embodiment, a technique of storing data in the integrated circuit includes filtering the input signal and sampling the input signal to obtain data samples. Each data sample is stored or programmed in a memory cell. The sampling rate may be user-selected to allow flexibility in the storage of information. For example, a slower sampling rate may be selected to obtain a lower quality copy of the original signal, but also permits storage of a longer duration of the original signal. On the other hand, if desirable, the sampling rate can be increased to obtain a greater fidelity reproduction, or to store a higher frequency analog signal. The signal path for the analog signal within the integrated signal may also be fully differential to allow for storage of a more precise copy of the original signal.</p>
<p id="p-0017" num="0016">The data sample is programmed into a memory cell, for example, by adjusting the threshold voltage of a floating gate transistor such as a Flash or EEPROM transistor. The programming technique may use high voltages and level shifting circuitry. The data sample will be level shifted into a voltage range to facilitate programming of the memory cell. For an embodiment of the present invention, the level shifter circuitry is trimmable to allow for adjustments in the output voltage.</p>
<p id="p-0018" num="0017">A technique of retrieving data stored in the memory cells of the present invention is an inverse of the storage technique. A voltage ramp circuit and sense amplifier is be used to evaluate and determine the threshold voltage of a memory cell. This threshold voltage is then shifted back to the voltage range of the original signal for playback. By playing back the level-shifted threshold voltages for a plurality of memory cells at the original sampling rate, the original signal is re-created.</p>
<p id="p-0019" num="0018">An analog or digital signal can be stored in an integrated circuit using the techniques of the present invention. Information is more densely stored in an analog or multilevel memory cell. A/D and D/A conversion circuitry is not required, which saves board space and integrated circuit area. When data is stored in digital form, digital compression is used to obtain denser storage. However, because these digital compression techniques (e.g., lossy compression) do not allow an accurate reproduction of the original, there can be artifacts in the playback signal that are not present when stored in analog form. Thus, storing the data in analog form permits greater fidelity in playback, especially without the artifacts due to digital compression.</p>
<p id="p-0020" num="0019">If even more compact storage of data is desirable, however, the techniques of the present invention can be combined with analog or digital compression techniques to provide for even more storage of information. Digital compression techniques can be used with the multilevel storage scheme of the present invention to provide even denser storage. For example, MP3 format data can be stored using multilevel memory cells of the present invention. MP3 format refers to digitally compressed data stored in an MPEG 1 layer 3 format. MP3 is a popular format for storing and transferring audio and music files, especially over the Internet.</p>
<p id="p-0021" num="0020">In a specific embodiment of the present invention, the present invention provides a fully integrated single-chip recording and playback device with a long recording duration. Analog signals are directly stored in the integrated circuit without the need for an analog-to-digital conversion. In a specific application of voice recording, it is desirable to have good sound quality in the reproduced signal. A flexible architecture is provided, so recording quality and recording duration may be adjusted as a user desires. The integrated recording device also retains its recorded information indefinitely, even when power is removed from the integrated circuit. The form factor of the present invention is compact and can be used in many applications where other devices or techniques are not suitable.</p>
<p id="p-0022" num="0021">Other objects, features, and advantages of the present invention will become apparent upon consideration of the following detailed description and the accompanying drawings, in which like reference designations represent like features throughout the figures.</p>
<?BRFSUM description="Brief Summary" end="tail"?>
<?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?>
<description-of-drawings>
<heading id="h-0004" level="1">BRIEF DESCRIPTION OF THE DRAWINGS</heading>
<p id="p-0023" num="0022"><figref idref="DRAWINGS">FIG. 1</figref> shows an electronic system in which techniques according to the present invention may be used;</p>
<p id="p-0024" num="0023"><figref idref="DRAWINGS">FIG. 2</figref> shows an overall flow diagram of a technique for storing or “recording” an analog signal input into a memory cell;</p>
<p id="p-0025" num="0024"><figref idref="DRAWINGS">FIG. 3</figref> shows a flow diagram of a technique for reproducing or “playing back” an analog signal stored in a memory cell;</p>
<p id="p-0026" num="0025"><figref idref="DRAWINGS">FIG. 4</figref> shows a diagram of an overall block diagram of an integrated circuit of the present invention;</p>
<p id="p-0027" num="0026"><figref idref="DRAWINGS">FIG. 5</figref> shows a diagram of an integrated circuit of the present invention incorporating digital-to-analog converter and analog-to-digital converter circuits;</p>
<p id="p-0028" num="0027"><figref idref="DRAWINGS">FIG. 6</figref> shows a block diagram of circuitry for implementing a user selectable sampling frequency;</p>
<p id="p-0029" num="0028"><figref idref="DRAWINGS">FIG. 7</figref> shows a diagram of clock generation circuitry;</p>
<p id="p-0030" num="0029"><figref idref="DRAWINGS">FIG. 8</figref> shows a circuit diagram for a prescaler circuit;</p>
<p id="p-0031" num="0030"><figref idref="DRAWINGS">FIG. 9</figref> shows a circuit diagram for internal clock divider circuitry;</p>
<p id="p-0032" num="0031"><figref idref="DRAWINGS">FIG. 10</figref> shows a delay locked loop (DLL) circuit for clock generation;</p>
<p id="p-0033" num="0032"><figref idref="DRAWINGS">FIG. 11</figref> shows waveforms for a delay locked loop circuit;</p>
<p id="p-0034" num="0033"><figref idref="DRAWINGS">FIG. 12</figref> shows a circuit diagram for a phase detector for a DLL;</p>
<p id="p-0035" num="0034"><figref idref="DRAWINGS">FIG. 13</figref> shows a circuit diagram of a charge pump for a DLL;</p>
<p id="p-0036" num="0035"><figref idref="DRAWINGS">FIG. 14</figref> shows a number of delay cells arranged in series;</p>
<p id="p-0037" num="0036"><figref idref="DRAWINGS">FIG. 15</figref> shows a circuitry for one delay cell;</p>
<p id="p-0038" num="0037"><figref idref="DRAWINGS">FIG. 16</figref> shows circuitry for the first stage of the combinatorial logic circuit;</p>
<p id="p-0039" num="0038"><figref idref="DRAWINGS">FIG. 17</figref> shows circuitry for the second stage of the combinatorial logic circuit;</p>
<p id="p-0040" num="0039"><figref idref="DRAWINGS">FIG. 18</figref> shows a feedback multiplexer;</p>
<p id="p-0041" num="0040"><figref idref="DRAWINGS">FIG. 19</figref> shows a phase locked loop circuit for the clock generation circuitry of the present invention;</p>
<p id="p-0042" num="0041"><figref idref="DRAWINGS">FIG. 20</figref> shows a specific implementation of a preamplifier;</p>
<p id="p-0043" num="0042"><figref idref="DRAWINGS">FIG. 21</figref> shows a more detailed diagram of the preamplifier of <figref idref="DRAWINGS">FIG. 20</figref>;</p>
<p id="p-0044" num="0043"><figref idref="DRAWINGS">FIG. 22</figref> shows a block diagram of a low pass filter;</p>
<p id="p-0045" num="0044"><figref idref="DRAWINGS">FIG. 23</figref> shows a more detailed diagram of a low pass filter;</p>
<p id="p-0046" num="0045"><figref idref="DRAWINGS">FIG. 24</figref> shows an implementation of a clock buffer;</p>
<p id="p-0047" num="0046"><figref idref="DRAWINGS">FIG. 25</figref> shows an implementation of a switch;</p>
<p id="p-0048" num="0047"><figref idref="DRAWINGS">FIG. 26</figref> shows a diagram of an arrangement of a master-slave biasing scheme;</p>
<p id="p-0049" num="0048"><figref idref="DRAWINGS">FIG. 27</figref> shows circuitry that may be used to implement the master bias voltage or other bias voltages for an integrated circuit of the present invention;</p>
<p id="p-0050" num="0049"><figref idref="DRAWINGS">FIG. 28</figref> shows a more detailed diagram of a slave bias circuit;</p>
<p id="p-0051" num="0050"><figref idref="DRAWINGS">FIG. 29</figref> shows a diagram of a memory array;</p>
<p id="p-0052" num="0051"><figref idref="DRAWINGS">FIG. 30</figref> shows a diagram of an organization of a memory array;</p>
<p id="p-0053" num="0052"><figref idref="DRAWINGS">FIG. 31</figref> shows a plurality of memory cells sharing a common source line;</p>
<p id="p-0054" num="0053"><figref idref="DRAWINGS">FIG. 32</figref> shows circuitry for writing information in a memory cell;</p>
<p id="p-0055" num="0054"><figref idref="DRAWINGS">FIG. 33</figref> shows a waveform of the programming voltage during programming;</p>
<p id="p-0056" num="0055"><figref idref="DRAWINGS">FIG. 34</figref> shows a timing diagram illustrating the operation of the write circuitry;</p>
<p id="p-0057" num="0056"><figref idref="DRAWINGS">FIG. 35</figref> shows a simplified schematic of a combination voltage level shifter and sample and hold circuit of the present invention;</p>
<p id="p-0058" num="0057"><figref idref="DRAWINGS">FIG. 36</figref> shows a timing diagram of clocks for use with the circuitry in <figref idref="DRAWINGS">FIG. 35</figref>;</p>
<p id="p-0059" num="0058"><figref idref="DRAWINGS">FIG. 37</figref> shows a graph of the relationship between the programming and target VT voltage from a level shifter circuit;</p>
<p id="p-0060" num="0059"><figref idref="DRAWINGS">FIG. 38</figref> shows an implementation for a trimmable level shifter circuit;</p>
<p id="p-0061" num="0060"><figref idref="DRAWINGS">FIG. 39</figref> shows a more detailed circuit diagram for a switch for a trimmable capacitor of the present invention;</p>
<p id="p-0062" num="0061"><figref idref="DRAWINGS">FIG. 40</figref> shows a simplified schematic of circuitry for retrieving information from the memory cells;</p>
<p id="p-0063" num="0062"><figref idref="DRAWINGS">FIG. 41</figref> shows a timing diagram illustrating the operation of the read circuitry;</p>
<p id="p-0064" num="0063"><figref idref="DRAWINGS">FIG. 42</figref> shows a schematic of an implementation of a playback level shifter circuit;</p>
<p id="p-0065" num="0064"><figref idref="DRAWINGS">FIG. 43</figref> shows a simplified schematic of an implementation of the playback level shifter circuit, also including sample and hold circuitry;</p>
<p id="p-0066" num="0065"><figref idref="DRAWINGS">FIG. 44</figref> shows circuitry for producing the playback signal, including a squelch circuit, at an output of an integrated circuit;</p>
<p id="p-0067" num="0066"><figref idref="DRAWINGS">FIG. 45</figref> shows a diagram of an implementation of squelch circuit;</p>
<p id="p-0068" num="0067"><figref idref="DRAWINGS">FIG. 46</figref> shows a signal diagram of an operation of the squelch circuit of <figref idref="DRAWINGS">FIG. 45</figref>;</p>
<p id="p-0069" num="0068"><figref idref="DRAWINGS">FIG. 47</figref> shows a diagram of an implementation of circuitry a power supply level detection;</p>
<p id="p-0070" num="0069"><figref idref="DRAWINGS">FIG. 48</figref> shows a state diagram of some operational modes of the present invention.</p>
<p id="p-0071" num="0070"><figref idref="DRAWINGS">FIG. 49</figref> shows a diagram of a power supply level detection circuit;</p>
<p id="p-0072" num="0071"><figref idref="DRAWINGS">FIG. 50</figref> shows a diagram of a charge pump circuit;</p>
<p id="p-0073" num="0072"><figref idref="DRAWINGS">FIG. 51</figref> shows a diagram of an implementation of a stage of a charge pump;</p>
<p id="p-0074" num="0073"><figref idref="DRAWINGS">FIG. 52</figref> shows a plurality of trim bits;</p>
<p id="p-0075" num="0074"><figref idref="DRAWINGS">FIG. 53</figref> shows a sensing and latch circuitry for a trim bit; and</p>
<p id="p-0076" num="0075"><figref idref="DRAWINGS">FIG. 54</figref> shows a multiplexer circuit for a trim bit.</p>
</description-of-drawings>
<?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?>
<?DETDESC description="Detailed Description" end="lead"?>
<heading id="h-0005" level="1">DETAILED DESCRIPTION</heading>
<p id="p-0077" num="0076"><figref idref="DRAWINGS">FIG. 1</figref> shows an electronic system in which techniques according to the present invention may be used. An integrated circuit according to the present invention may be used in many market segments including, to name a few, the communications market, medical market, consumer market, and industrial market. Some applications of such devices include cellular phones, telephone answer machines, mobile radios, telephone announcement systems, pagers and voice pagers, medical monitoring equipment, cash registers, bar code readers, vending machines, security systems, instrumentations, automobiles, interactive media, cameras, calculators, pocket recorders, recordable postcards and greeting cards, toys and games, watches and clocks, consumer recording media, video players and recorders, imaging, personal digital assistants (PDAs), palm-sized PC, desktop and notebook computers, portable electronic commerce devices, internet appliances, electronic information storage media, and many other applications.</p>
<p id="p-0078" num="0077"><figref idref="DRAWINGS">FIG. 2</figref> shows an overall flow diagram of a technique for storing or “recording” an analog signal input into a memory cell. An analog signal input <b>210</b> is provided. This analog signal may be amplified or otherwise processed, if desired or needed. In step <b>220</b>, the signal is filtered using a low pass or bandpass filter to filter out or eliminate components of the signal which are not of interest. This can help prevent aliasing. Multiple stages of filtering can be used.</p>
<p id="p-0079" num="0078">In step <b>230</b>, the signal is sampled. Sampling the signal breaks the signal into a series of discrete analog values or samples. In order to prevent aliasing, the signal should be sampled at a rate sufficient to prevent aliasing errors. According to Nyquist's Sampling Theorem, the signal should be sampled at a rate at least twice the highest frequency component of the signal output from the filter to allow for a faithful reproduction of the original signal. Further, it is desirable to sample the signal at a much higher rate in order to obtain better bandwidth, and hence, a better quality reproduction.</p>
<p id="p-0080" num="0079">A sampled data point is “held” for sufficient time to process this data point. The sampled data point may also be held while determining the next sampled data point. In a step <b>240</b>, for each sampled data point, the analog value is level shifted into a voltage range suitable to facilitate storage of the information in a memory cell. For example, an analog input in the range from about 0 volts to about 2.5 volts may be shifted to a range from about 3 volts to about 5.5 volts.</p>
<p id="p-0081" num="0080">In a step <b>250</b>, the sampled data point is stored into a memory cell.</p>
<p id="p-0082" num="0081"><figref idref="DRAWINGS">FIG. 3</figref> shows a flow diagram of a technique for reproducing or “playing back” an analog signal stored in a memory cell. The playback process is essentially an inverse of the recording process. There may also be amplification or other processing of the output signal.</p>
<p id="p-0083" num="0082"><figref idref="DRAWINGS">FIG. 4A</figref> shows a diagram of an overall block diagram of an integrated circuit <b>400</b> of the present invention. This integrated circuit stores information in the analog or multilevel memory cells of the integrated circuit. The information may be provided in analog or digital form. An analog signal <b>402</b> to be stored is differentially input at ANAIN+ and ANAIN− inputs. Other embodiments may have a single-ended input instead of a differential input. A differential input provides greater accuracy when recording the signal. The input signal is amplified using a preamplifier <b>405</b>. For example, in one implementation, the preamplifier has a gain of about 25 decibels. The gain can be user-selected so the user can match the preamplification needed or desired for a particular input signal.</p>
<p id="p-0084" num="0083">An output <b>408</b> of preamplifier <b>405</b> is also fully differential. A single-ended output can also be provided in addition or instead of the differential output. Output <b>408</b> is passed to a low pass filter <b>411</b>. Low pass filter <b>411</b> can be implemented using a sampled data filter, where the output of filter <b>411</b> will be the samples of the input signal.</p>
<p id="p-0085" num="0084">Using a write circuit <b>414</b>, each sampled data point is stored in a memory cell <b>412</b>. Memory cells such as DRAM, SRAM, EEPROM, EPROM, and Flash cells typically only store or can represent two possible logic levels. In a digital system, these levels would represent a logic low or a logic high. To store a sampled data point in a digital memory cell, the sampled data point is converted into a binary or digital representation. For example, if the sampled data point were converted to a value having 256 different discrete levels, then 8 binary memory cells (i.e., 2<sup>8</sup>) are required. However, storing a sampled data signal is inefficient because numerous memory cells are used to store only one sample.</p>
<p id="p-0086" num="0085">In the present invention, however, the sampled data point is stored in a single analog or multilevel memory cell. This permits much greater density of storage compared to the binary memory cell. Using the memory cell techniques of the present invention, integrated circuits can be designed to store data more compactly than integrated circuits using binary memory cells. Techniques of the present invention are also applicable to allow a single digital memory cell to store multiple digital bits by using multilevel storage.</p>
<p id="p-0087" num="0086">The memory cell of the present invention may be referred as an analog or multilevel memory cell since the memory cell can store a relatively large range of analog and digital values. The analog values can be thought of as having discrete steps such as, for example, 10 millivolt steps. In other embodiments, the analog values are essentially continuous. Although an analog memory cell can store an analog (or digital value), a degree of precision for such a memory cell can be quantified by the number of discrete steps the memory cell can store. Higher resolutions for an individual memory cell are limited by the process technology. Such factors including memory cell's charge, the charge on an electron, leakage to and from the memory cell, and accuracy of other support circuitry are important considerations.</p>
<p id="p-0088" num="0087">Analog and digital storage of data is described in U.S. Pat. Nos. 5,694,356, 5,680,341, 5,745,409, 5,748,534, 5,748,533, 5,818,757, and U.S. patent application Ser. No. 09/324,902, filed Jun. 2, 1999, which are all incorporated by reference.</p>
<p id="p-0089" num="0088">In a specific embodiment of the present invention, the analog or multilevel memory cells are implemented using Flash or EEPROM cells. Flash or EEPROM cells are memory transistors with a floating gate, and may be referred to as a floating gate device. Flash and EEPROM cells are nonvolatile. Once programmed or configured, these floating gate devices will hold their data even when power is removed. The Flash or EEPROM transistor can be n-channel or p-channel; n-channel floating gate devices are presently more widely available.</p>
<p id="p-0090" num="0089">Flash and EEPROM cells are configured or programmed by altering a threshold voltage or VT of the device. Floating gate devices can have a range of stored VTs. This range of stored VTs is used to provide analog or multilevel storage. Flash and EEPROM cells can also be erased; the VTs are returned to an initialized state.</p>
<p id="p-0091" num="0090">In an embodiment of the invention, the degree of precision for storing information in a memory cell is selected by the design to be appropriate for a particular application. The degree of precision can be a user-selectable option. For example, when storing voice signals, relatively less precision is needed since the human voice is understandable and recognizable when less resolution is employed. For human voice, the memory cell can be designed to store about 2<sup>8 </sup>or 256 levels. For some applications, such as high-resolution color images, photographs, and video, greater precision is typically needed for an accurate reproduction. The memory cell or multiple memory cells used in conjunction with another can be designed to store effectively 2<sup>24 </sup>or 16,777,216 levels in order to produce the colors accurately. The memory cell or cells will effectively store 2<sup>16 </sup>or 65,536 levels if less color accuracy is acceptable.</p>
<p id="p-0092" num="0091">In short, the memory cell or multiple memory cells of the present invention can be designed to store any number of data levels, for example, 2<sup>8</sup>, 2<sup>10</sup>, and 2<sup>12 </sup>or more levels. Other numbers of levels are also possible. A greater number of levels permits greater compression of data into a fewer number of memory cells. The greater number of levels each memory cell is capable of storing, the more data that can be stored in an array of these memory cells. The ultimate precision of the memory cell available with the analog memory cell depends on many factors such as the process technology used and stability and speed of the circuitry used to store and resolve the different levels.</p>
<p id="p-0093" num="0092">Using present technology, it is practical to implement an integrated circuit according to the present invention having memory cells, each capable of storing about 2<sup>8 </sup>levels. A memory cell with 8 bits of resolution is readily manufacturable and can be easily interfaced with and processed using the circuitry of the present invention. Further, a memory cell with 8-bit resolution provides adequate resolution for recording and playback of voice data with a relatively high fidelity. As technology further improves, the present invention may be used to provide an interface with memory cells having greater than 8-bit resolution.</p>
<p id="p-0094" num="0093">Furthermore, instead of storing a data sample of the input signal into a single cell, multiple cells of the present invention can be combined to increase the resolution. Additional cells are added until the desired resolution is achieved. Generally the relationship for providing greater resolution by using multiple cells is given by 2<sup>n*m</sup>, where n is the number of memory cells and m is the bit resolution per cell. For example, three cells having 10-bit resolution each can be combined to have an effective resolution of 30 bits. The number of bits resolution for multiple 10-bit cells is given by the following relationship, 2<sup>n*10</sup>, where n is the number of cells. As a further example, for three cells each having 8-bit resolution, the combined effective resolution is 24 bits (i.e., 2<sup>n*8 </sup>where n is 3). This particular implementation may be useful for imaging applications, where each cell corresponds to the intensity of one of the red (R), green (G), and blue (B) parameters.</p>
<p id="p-0095" num="0094">Although sometimes referred to as an analog memory cell, the memory cell of the present invention can also be used for applications other than analog applications. For analog applications, analog values are stored into the memory cell without the need for an analog-to-digital converter. The memory cell can also be used in digital applications. The analog memory cell capable of storing multiple or continuous levels is equally well suited for digital and analog applications. For digital applications, the techniques of the present invention will permit much more compact storage of digital data. For example, the present invention can be used to implement nonvolatile mass storage PCMCIA or PC Cards. This permits an analog memory integrated circuit to be relatively compact. For digital applications, discrete levels may be stored, and an A/D and D/A converter may be utilized. Other techniques for storing and retrieving data from analog memory cells are described in U.S. Pat. Nos. 5,638,320, 5,687,115, 5,694,356, and 5,748,533, which are incorporated by reference.</p>
<p id="p-0096" num="0095"><figref idref="DRAWINGS">FIG. 5</figref> shows an example of a portion of an integrated circuit of the present invention for storing digital information. The circuitry of the integrated circuitry is similar to what is shown in <figref idref="DRAWINGS">FIG. 4</figref>. In addition to an array <b>490</b> of analog memory cells for storing digital or analog information, there is a D/A converter <b>493</b> and A/D converter <b>495</b>. To store digital data, D/A converter <b>493</b> takes digital information on input <b>497</b> and converts this to multilevel or analog information for storage in array <b>490</b>. To retrieve digital data, A/D converter <b>495</b> takes the multilevel or analog information stored in array <b>490</b> and converts it to digital data on output <b>499</b>. Input <b>497</b> may be in the form of parallel or serial bits of data. Output <b>499</b> can be in the form of parallel or serial bits of data.</p>
<p id="p-0097" num="0096">Returning to <figref idref="DRAWINGS">FIG. 4</figref>, memory cells are organized in an array <b>416</b> of memory cells having rows and columns. In a specific embodiment, there are about 1.92 million analog or multilevel memory cells. With 1.92 million memory cells, this will store about eight minutes of voice data at a 4 kilohertz sampling frequency. An integrated circuit embodiment with 1.92 million memory cells is a practical implementation of the present invention using present technology. Clearly, an integrated circuit having fewer than 1.92 million memory cells is also be easily manufacturable. For example, a reduced-size version of the present invention having 960K memory cells provides half the data storage capacity. Given the size of the memory cell of the present invention and the desire to provide a large amount of storage at reasonable cost, an integrated circuit with 1.92 million analog memory cells (e.g., fabricated using Flash technology) is practical. As technology improves and memory transistor sizes decrease, it will become possible, and practical, to manufacture integrated circuits having greater than 1.92 million memory cells. Rows and columns are addressable by row and column addresses and a row decoder <b>420</b> and column decoder <b>424</b>. A master control circuit <b>429</b> controls operation of the integrated circuit. External or off-chip connections to the master control circuit are made via pins /RESET, BUSY, SAC, /INT, DO, DI, /CS, and SCLK.</p>
<p id="p-0098" num="0097">Operation of the integrated circuit is controlled by the master control circuit. Commands or instructions are input to the master control circuit, which will then perform the desired function. Some of the functions the integrated circuit provides includes record, playback, cue, and erase. In this implementation, the command and data for the command is clocked into the device in serial form using the DI and SCLK pins. If there is output data, it is clocked out, also in serial form, through DO. The command interface to the integrated circuit is referred to as a serial port interface (SPI). The commands are referred to as SPI commands. More details of the SPI interface may be found in U.S. provisional application 60/091,326.</p>
<p id="p-0099" num="0098">Information stored in array <b>416</b> is read or played back using a read circuit <b>435</b>. Read circuit <b>435</b> is functionally the inverse of write circuit <b>414</b>. An output of the read circuit has a one-to-one correspondence to the original analog value that was stored in the memory cell using the write circuit. The output is passed through a low pass filter <b>440</b> to reconstruct the original waveform. If recording and playback do not occur at the same time, low pass filter <b>440</b> and low pass filter <b>411</b> may be implemented using the same on-chip circuit to reduce die size. Multiplexers will select whether the low pass filter is coupled to the recording or the playback circuitry. This reduces the die size since the same circuitry is used for these two purposes. Another benefit of using the same filter is there will be better matching of the electrical characteristics for both recording and playback.</p>
<p id="p-0100" num="0099">In the particular embodiment of <figref idref="DRAWINGS">FIG. 4</figref>, there is a squelch circuit <b>445</b> before an AUDOUT pin or differential ANAOUT+ and ANAOUT− pins. The squelch circuit will give the user an impression of a greater signal-to-noise ratio at the output, much like the squelch function of radio receivers or some two-way radios. The user sets a particular delay by placing a particular size of capacitor at a SQLCAP input. When the signal input to the squelch circuit is above a certain threshold level which is set by squelch circuit <b>445</b>, the stored signal is output at AUDOUT or ANAOUT+ and ANAOUT−. However, if the signal drops below this squelch threshold level for a period of time set by the value of the capacitor, the output is a greatly attenuated version of the originally stored signal. The squelch feature can be used to reduce undesirable background noise from the output. Although a squelch feature is provided in <figref idref="DRAWINGS">FIG. 4</figref>, other embodiments of the invention may not include this squelch feature and the associated circuitry.</p>
<p id="p-0101" num="0100">An output amplifier <b>450</b> is connected to provide an amplified differential output of the stored signal at ANAOUT+ and ANAOUT− pins. An output amplifier <b>454</b> provides a single-ended output of the stored signal at an AUDOUT pin. In a specific embodiment, when a signal is being recorded at inputs ANAIN+ and ANAIN−, the signal may be monitored at ANAOUT+ and ANAOUT− and AUDOUT pins. This monitor feature can be used by a user to ensure the circuitry is operating properly.</p>
<p id="p-0102" num="0101">A clock for low pass filter <b>411</b>, write circuit <b>414</b>, read circuit <b>435</b>, and low pass filter <b>440</b>, is selected using a multiplexer <b>460</b>. The clock is either internally generated or provided by an external source. This clock provides the sampling frequency at which the analog input is sampled. The clock is supplied from a programmable internal oscillator <b>466</b> or a programmable divider <b>471</b>, which is connected to an external clock source EXTCLK. The SCLK input may also be selected to provide the clock during operations such as testing. In a specific embodiment, programmable internal clock <b>466</b> is implemented using a relaxation oscillator and a delay locked loop (DLL) frequency synthesizer. However, there are many other techniques to implement the programmable internal clock including a delay, a phase locked loop (PLL), phase frequency loop (PFL), crystal oscillator, and frequency synthesizer.</p>
<p id="p-0103" num="0102">The clock from multiplexer <b>460</b> is used to control the sampling frequency of the input waveform. Internal oscillator <b>466</b> generates a range of clock frequencies. For example, internal oscillator may be used to generate a clock frequency from about 4 kilohertz to about 8 kilohertz. Depending on the desired application, the frequency ranges may vary. The internal oscillator may generate frequencies from the hundreds of kilohertz to the megahertz ranges. The user can select the frequency of the internal oscillator. To permit even greater flexibility, an external clock source input through the EXTCLK pin can be used instead of the internal oscillator. This external clock source is frequency divided using programmable divider <b>471</b>. The user can change the divider ratio to change the frequency of the clock without changing the EXTCLK.</p>
<p id="p-0104" num="0103">Therefore, in the present invention, the user can select the sampling frequency. In a specific embodiment of the present invention, the user can select a 4 kilohertz, 5.3 kilohertz, 6.4 kilohertz, or 8 kilohertz sampling frequency. The internal oscillator is programmable to provide a range of sampling frequencies. And, an even greater range of sampling frequencies is available by having the user supply an external clock. This permits the user to control the bandwidth of the signal that is recorded. If the user desires greater bandwidth, the user will select a higher sampling frequency. A higher sampling frequency also means there will be a greater number of sampled data points, which will require a greater number of memory cells for storage for a given duration of a signal.</p>
<p id="p-0105" num="0104">The programmable internal frequency generator and provision for an external clock source are features of the present invention. The user can vary the sampling rate as desired, and as can be appreciated, this provides greater flexibility than a integrated circuit having a fixed sampling frequency. In an integrated circuit that only provides a fixed sampling frequency, when different sampling frequencies are desired by customers, there would have to be different versions of the same integrated circuit. The user-selectable sampling rate permits the same integrated circuit to be used in various applications. The manufacturer of the integrated circuit does not need to fabricate different parts for different customers and applications. And, the customer or user does not need to stock different parts having different sampling frequencies.</p>
<p id="p-0106" num="0105">An aspect of the present invention is that as the sampling is increased, the integrated circuit will record at a higher bandwidth, but the maximum duration of the recording will be less. If the user selects a sampling rate of 2000 samples per second, this gives a recording time of about 960 seconds or 16 minutes of recording time for 1.92 million cells. If the user selects a sampling rate of 8000 samples per second, this results in about 240 seconds or 4 minutes of recording time. Using a sampling rate of 8 kilohertz will provide a higher quality recording of the original signal than the case when using a 4 kilohertz sampling rate. See table B below for more examples.</p>
<p id="p-0107" num="0106"><figref idref="DRAWINGS">FIG. 6</figref> shows a block diagram of circuitry for implementing a user-selectable sampling frequency feature of the present invention. A feature of the present invention is to provide a user-selectable or user-controllable sampling frequency that can be dynamically changed. The sampling frequency can be changed while the integrated circuit is operating. The user-selected sampling frequency will be used for recording or playback, or both. The sampling frequency may be dynamically changed during the recording or playback operation. The sampling frequency can be changed while the memory integrated circuit remains resident on a printed circuit board. The user's selection of the sampling frequency is stored internally in the integrated circuit: there is no need to change external components such as the value of an external resistor or capacitor to change the sampling frequency. The user configures the analog memory integrated circuit to use the user-selected sampling frequency. This selection can be held in logic, volatile, or nonvolatile storage circuitry on the integrated circuit. As discussed above, a sampling clock output <b>625</b> is provided to internal circuits on the integrated circuit such as the read and write circuitry. The source of this sampling clock output may be from an external clock input pad <b>630</b>, where the user provides an external clock frequency f<sub>ext</sub>. Or, the source may be from an internal oscillator <b>634</b>, providing an internal sampling frequency f<sub>int</sub>. In a specific embodiment of the present invention, f<sub>int </sub>is 4096 kilohertz, although other frequencies may be used.</p>
<p id="p-0108" num="0107">Although the <figref idref="DRAWINGS">FIG. 6</figref> implementation provides both internal and external frequencies, in other embodiments, only the internal or external frequencies are provided. For example, the integrated circuit can include only a programmable internal oscillator and not provide for input of an external clock frequency, or vice versa.</p>
<p id="p-0109" num="0108">The internal sampling clock f<sub>int </sub>or external sampling frequency f<sub>ext </sub>is selected by a switch <b>638</b> to be passed to sampling clock output <b>625</b>. An output from switch <b>638</b> can be further amplified using a buffer <b>642</b>, if desired or needed. Switch <b>638</b> can be implemented using one of the many techniques to design a switch on an electronic device. For example, switch <b>638</b> can be a multiplexer implemented with pass gates or logic gates. An alternative to a multiplexer is a summing amplifier, where the unselected signal is set to zero.</p>
<p id="p-0110" num="0109">The control <b>650</b> of switch <b>638</b> can come from various sources. The switch may be controlled by user-programmed cells such as Flash, EEPROM, EPROM, antifuses, SRAM, DRAM, laser trimmable bits and other similar technologies. For example, the user can specify the use of the internal or external clock through the SPI interface. In the embodiment of <figref idref="DRAWINGS">FIG. 6</figref>, an activity detector <b>648</b> controls switch <b>638</b>. Activity detector <b>648</b> is coupled to pad <b>630</b> and provides an output <b>650</b> to switch <b>638</b> to detect and indicate whether there is activity at pad <b>630</b>. If no clock frequency is detected at pad <b>630</b>, switch <b>638</b> will select the internal oscillator path. No clock frequency is detected at pad <b>630</b> when, for example, pad <b>630</b> is set at ground, VDD, or another voltage. However, if a clock frequency is detected at pad <b>630</b>, switch <b>638</b> will select the external clock path. This feature of the present invention allows a user to use an external sampling frequency without the need to additionally configure special bits to so indicate.</p>
<p id="p-0111" num="0110">The external sampling frequency is provided at pad <b>630</b>. This signal may be amplified by a buffer <b>655</b> (if desired or needed). Then, f<sub>ext </sub>is coupled to a prescaler circuit <b>658</b> that adjusts f<sub>ext </sub>based on a control logic circuit <b>661</b>. For example, the prescaler circuit frequency divides the f<sub>ext </sub>frequency by an amount the user desires. The user provides information on how much to frequency divide to the control logic circuit. This information may be provided by using the SPI interface discussed in a section of U.S. provisional application 60/091,326, filed Jun. 30, 1998. In a specific embodiment, an output of the prescaler circuit is a sampling frequency that is 128 times the user-desired or user-selected sampling frequency f<sub>samp</sub>.</p>
<p id="p-0112" num="0111">Internal oscillator <b>634</b> is coupled to an internal clock divider <b>667</b> that frequency divides f<sub>int</sub>. Similar as to the case for prescaler <b>658</b>, the amount of frequency division for internal clock divider <b>667</b> is user-selectable and controlled by control logic circuit <b>661</b>. The user can select the divider ratio through the SPI interface. Also, in a specific embodiment of the invention, an output of internal clock divider <b>667</b> will be 128 times the user-desired sampling frequency.</p>
<p id="p-0113" num="0112">The user's selection of the internal sampling frequency is stored internally in the integrated circuit. This selection can be stored, for example, in a register, flip-flop, latch, or other storage or logic circuits. The user's selection can also be stored into memory cells such as Flash, EEPROM, EPROM, SRAM, DRAM, laser programmable fuse, fuse, antifuse, and other technologies on the integrated circuit. For example, there may be trim bits on the integrated circuits that specifically control and determine the internal sampling frequency. Trim bits are bits within the integrated circuit that are used to configure characteristics and operating parameters of the integrated circuit. The trim bits may be implemented using any memory technology including Flash, EEPROM, analog Flash or EEPROM, or multilevel Flash or EEPROM. When the user's selection for the sampling frequency is stored internally using Flash technology, since this is a nonvolatile storage technology, the user's selection for the sampling frequency will be retained even after power is removed from the integrated circuit. In this case, the user does not need to configure the integrated circuit with the selected sampling frequency again upon power up. When not using a nonvolatile technology, the user needs to input the desired sampling frequency before reading or writing to the memory.</p>
<p id="p-0114" num="0113">Since the user's sampling frequency selection is stored internally on the integrated circuit, this selection may also be changed or adjusted during the operation of the integrated circuit. Therefore, the sampling frequency can be dynamically changed. No components external to the integrated circuit such as an external register need to be changed or adjusted. For example, the user may change (e.g., via the SPI interface) the value stored in a register or latch, one or more memory cells, or other storage circuit to dynamically change the sampling frequency. In a specific embodiment, the user value to select the sampling frequency is a digital value (e.g., a binary number). However, in other implementations, this value may be an analog value.</p>
<p id="p-0115" num="0114">In one implementation, clock output <b>625</b> of the circuitry in <figref idref="DRAWINGS">FIG. 6</figref> provides a clock that will be 128 times the user-desired sampling frequency (i.e., 128*f<sub>samp</sub>). This specific multiple of the sampling frequency was selected to permit greater ease in logical manipulation of the signal by on-chip circuitry to generate derivative clock signals. In particular, 128*f<sub>samp </sub>is the highest common frequency of the clock signals needed for a particular embodiment of the present invention.</p>
<p id="p-0116" num="0115"><figref idref="DRAWINGS">FIG. 7</figref> shows clock generation circuitry <b>670</b> that uses clock output <b>625</b> to generate a number of clock outputs <b>673</b>. Clock generation circuitry <b>670</b> generates clock signals for other circuitry on the integrated circuit. Clock signals <b>673</b> can include one or more higher frequency clocks (i.e., higher than f<sub>samp</sub>) used, for example, by charge pump circuitry. Clock signals <b>673</b> can include one or more lower frequency clocks (i.e., equal to or lower than f<sub>samp</sub>) used by the write and read circuits. For example, a clock at the sampling frequency is used by the write circuit. Clock signals <b>673</b> can also include one or more clocks that are at a lower or high frequency that may have a desired duty cycle for operating the on-chip circuitry.</p>
<p id="p-0117" num="0116"><figref idref="DRAWINGS">FIG. 8</figref> shows a circuit schematic for a specific implementation of prescaler <b>658</b>. The external clock f<sub>ext </sub>is input at <b>676</b> and an 8-bit binary number is input at <b>679</b>. The external clock frequency is divided by a value represented by the 8-bit binary number to obtain 128*f<sub>samp </sub>at an FOUT output <b>682</b>. This circuitry has an enable input EN <b>684</b> to enable or disable FOUT <b>682</b>. This circuitry includes a number of flip-flop circuits <b>686</b> similarly arranged in parallel. Output of flip-flop circuits <b>686</b> are coupled into NOR gates and then an AND gate for generating FOUT <b>682</b>. The output frequency at FOUT <b>682</b> will be the f<sub>ext </sub>frequency divided by d, where d is the value represented by the 8-bit binary number.</p>
<p id="p-0118" num="0117"><figref idref="DRAWINGS">FIG. 9</figref> shows a circuit schematic for internal clock divider <b>667</b>. However, the internal clock divider <b>667</b> performs a similar function as the prescaler <b>658</b>. Therefore, the specific circuit implementation in <figref idref="DRAWINGS">FIG. 8</figref> or a variation may also be used to implement clock divider <b>667</b>. The circuitry in <figref idref="DRAWINGS">FIG. 9</figref> or its variation may also be used for prescaler <b>658</b>. In the <figref idref="DRAWINGS">FIG. 9</figref> implementation, the internal clock divider uses a decoding-style technique for generating different output frequencies. The internal clock frequency f<sub>int </sub>is input at <b>688</b>, and the 128*f<sub>samp </sub>output is taken at an F<sub>OUT </sub>output <b>690</b>. A 2-bit value is input using A1 and A0 to divide the clock into four possible output frequencies. The following table A provides a listing of the F<sub>OUT </sub>outputs for the A0 and A1 inputs based on an input frequency of 4.096 MHz. Based on A0 and A1, the input frequency is divided to obtain the output frequency.</p>
<p id="p-0119" num="0118">
<tables id="TABLE-US-00001" num="00001">
<table frame="none" colsep="0" rowsep="0">
<tgroup align="left" colsep="0" rowsep="0" cols="5">
<colspec colname="offset" colwidth="21pt" align="left"/>
<colspec colname="1" colwidth="21pt" align="center"/>
<colspec colname="2" colwidth="56pt" align="center"/>
<colspec colname="3" colwidth="49pt" align="center"/>
<colspec colname="4" colwidth="70pt" align="center"/>
<thead>
<row>
<entry/>
<entry namest="offset" nameend="4" rowsep="1">TABLE A</entry>
</row>
<row>
<entry/>
<entry namest="offset" nameend="4" align="center" rowsep="1"/>
</row>
<row>
<entry/>
<entry>A0</entry>
<entry>A1</entry>
<entry>F<sub>OUT </sub>690</entry>
<entry>f<sub>samp</sub></entry>
</row>
<row>
<entry/>
<entry namest="offset" nameend="4" align="center" rowsep="1"/>
</row>
</thead>
<tbody valign="top">
<row>
<entry/>
<entry>0</entry>
<entry>0</entry>
<entry>512 kHz</entry>
<entry>  4 kHz</entry>
</row>
<row>
<entry/>
<entry>0</entry>
<entry>1</entry>
<entry>682 kHz</entry>
<entry>5.3 kHz</entry>
</row>
<row>
<entry/>
<entry>1</entry>
<entry>0</entry>
<entry>819 kHz</entry>
<entry>6.4 kHz</entry>
</row>
<row>
<entry/>
<entry>1</entry>
<entry>1</entry>
<entry>1024 kHz </entry>
<entry>  8 kHz</entry>
</row>
<row>
<entry/>
<entry namest="offset" nameend="4" align="center" rowsep="1"/>
</row>
</tbody>
</tgroup>
</table>
</tables>
</p>
<p id="p-0120" num="0119">As the table shows, this specific embodiment of the present invention provides four possible internal sampling frequencies 4 kilohertz, 5.3 kilohertz, 6.4 kilohertz, or 8 kilohertz. This circuitry is merely an example of the circuitry that may be used in the present invention. Similar circuitry may also be used to provide other specific frequencies. The user can also be given choice of more frequencies or a range of frequencies. For example, there may be eight or more different frequencies to choose from. By providing a greater number of inputs An, the sampling frequency may be essentially any frequency within a desired frequency range.</p>
<p id="p-0121" num="0120"><figref idref="DRAWINGS">FIG. 10</figref> shows a block diagram of delay locked loop (DLL) circuitry that is used for clock generation circuit <b>670</b>. Other circuitry besides a DLL may be used to perform frequency multiplication. For example, a phase locked loop (PLL) circuitry may also be used. <figref idref="DRAWINGS">FIG. 10</figref> shows a DLL circuit including a phase detector <b>4105</b> that is coupled in clock output <b>625</b>. The phase detector generates PU (pull-up) and PD (pull-down) outputs that are coupled to a charge pump <b>4110</b>. The charge pump is coupled to a number of delay cells <b>4115</b>, which may be in a simple embodiment, inverting buffers. Each delay cell generates a phase output PHI<b>1</b> to PHIN. Phase output PHI<b>1</b> is coupled to clock output <b>625</b>. The phase outputs are logically combined using combinatorial logic <b>4120</b> such as a XOR gate or another type of logic gate to generate f<sub>OUT </sub><b>4130</b>. <figref idref="DRAWINGS">FIG. 11</figref> shows a timing diagram of phases of the clock, ø<sub>1 </sub>to ø<sub>n</sub>, and the resulting f<sub>OUT</sub>. Signal f<sub>OUT </sub><b>4130</b> is generated from the ø<sub>1 </sub>to ø<sub>n </sub>waveforms by using XOR gate <b>4120</b>. Signal f<sub>OUT </sub>will be high only when one and only one of the clock phases is high.</p>
<p id="p-0122" num="0121">In <figref idref="DRAWINGS">FIG. 10</figref>, to obtain the desired f<sub>OUT </sub><b>4130</b> output frequency, a multiplexer or switch <b>4135</b> is selectively connected at various points in the delay chain to feedback an output of one of the delay cells <b>4115</b> to phase detector <b>4105</b>. Depending on which point of the delay chain is fed back to the phase detector, a higher or lower frequency f<sub>OUT </sub><b>4130</b> is derived. Switch <b>4135</b> essentially shortens or lengthens the delay chain. This will change the frequency.</p>
<p id="p-0123" num="0122"><figref idref="DRAWINGS">FIG. 12</figref> shows a schematic of a phase detector circuit <b>4105</b>. Clock ø<sub>IN </sub>is input at IN and clock ø<sub>OUT </sub>is input at REF. The outputs are pull-up (PU),/pull-up (NPU), pull-down (PD), and /pull-down (NPD). RE is an active high signal that goes low with the rising edge of REF. When RE is high, PU and PD will be low. The phase detector is implemented with NOR logic gates. Other types of logic gates may also be used.</p>
<p id="p-0124" num="0123"><figref idref="DRAWINGS">FIG. 13</figref> shows a schematic of a charge pump circuit <b>4110</b>. From the phase detector, PU is connected to AD. NPU is connected to NAD. PD is connected to SU. NPD is connected to NSU. VSP, VSPC, VSNC, and VSN are bias voltages from a bias voltage generator. This bias voltage may be from a slave bias generator of a master-slave biasing scheme discussed later. An output of the charge pump is VD.</p>
<p id="p-0125" num="0124"><figref idref="DRAWINGS">FIG. 14</figref> shows a schematic of a number of delays cells <b>4115</b> coupled in series. <figref idref="DRAWINGS">FIG. 15</figref> shows a schematic of a single delay cell <b>4115</b>. VD from the charge pump is connected to each of the delay cells. VSP and VSPC are bias voltages as described above. C<b>1</b> and C<b>8</b> are the different output phases from each of the delay cells.</p>
<p id="p-0126" num="0125"><figref idref="DRAWINGS">FIG. 16</figref> shows a more detailed schematic of a first stage of combinatorial logic <b>4120</b>. Each of the phases of the clock C<b>1</b> to C<b>8</b> is connected to PH<b>0</b> to PH<b>7</b>, respectively.</p>
<p id="p-0127" num="0126"><figref idref="DRAWINGS">FIG. 17</figref> shows a second stage of combinatorial logic <b>4120</b> that takes input from the first stage of combinatorial logic and synthesizes the final clock output.</p>
<p id="p-0128" num="0127"><figref idref="DRAWINGS">FIG. 18</figref> shows a schematic of the feedback multiplexer <b>4135</b>. Based on A<b>0</b> and A<b>1</b>, this multiplexer connects an output of a delay cell input at IN<b>00</b>, IN<b>01</b>, IN<b>10</b>, and IN<b>11</b> to an OUT. OUT is connected to ø<sub>OUT </sub>of the phase detector.</p>
<p id="p-0129" num="0128"><figref idref="DRAWINGS">FIG. 19</figref> shows a schematic of a frequency multiplier using PLL circuit arrangement. Clock <b>625</b> is input to a phase detector. The phase detector generates PU and PD signals for a charge pump. An output of the charge pump is coupled to a number of delay cells arranged in a ring oscillator arrangement. An output from one of the delay cells is fed back through a frequency divider (÷N) circuit to the phase detector.</p>
<p id="p-0130" num="0129"><figref idref="DRAWINGS">FIG. 20</figref> shows a specific implementation of preamplifier <b>405</b> of <figref idref="DRAWINGS">FIG. 4</figref>. The circuitry uses a fully differential operational amplifier <b>525</b> connected with common mode feedback. ANAIN+ and ANAIN− are input at Vid+ and Vid−, respectively. A differential output is taken at Vod+ and Vod−. The gain of this preamplifier <b>405</b> is about 17.667 or about 25 decibels (dB). The gain of the preamplifier may range from about 20 to 30 decibels. For example, the gain may be about 23 decibels. <figref idref="DRAWINGS">FIG. 21</figref> shows a circuit schematic of the differential operational amplifier circuitry of <figref idref="DRAWINGS">FIG. 20</figref>. This design uses MOS transistors. The inputs are INP and INN. Output is taken from OUTP and OUTN.</p>
<p id="p-0131" num="0130"><figref idref="DRAWINGS">FIG. 22</figref> shows a block diagram of low pass filter <b>411</b> of <figref idref="DRAWINGS">FIG. 4</figref>. In this implementation, a filter <b>725</b> is a fifth-order Butterworth filter where f<sub>CLK</sub>/f<sub>CUTOFF </sub>is at least 50. In further embodiments of the present invention, the f<sub>CLK</sub>/f<sub>CUTOFF </sub>is 75 or greater. Moreover, the filter may have an f<sub>CLK</sub>/f<sub>CUTOFF </sub>in a range from about 50 to about 100. This filter is sampled data filter that provides sampled data at its differential outputs, OUT and NOUT. A bandgap reference <b>735</b> generates a bias voltage reference for filter <b>725</b>. Other types of sampled data filters may also be used. These include Chebychev, Bessel, elliptic, polynomial and various implementations of switched capacitor filters, among others. The filter used may also be a continuous time filter, where the data is sampled in a different manner.</p>
<p id="p-0132" num="0131"><figref idref="DRAWINGS">FIG. 23</figref> shows a more detailed diagram of the sampled data Butterworth filter of <figref idref="DRAWINGS">FIG. 22</figref>. The circuitry includes five operational amplifiers <b>810</b>, <b>815</b>, <b>819</b>, <b>823</b>, and <b>828</b>. A number of switches <b>835</b>, <b>837</b>, <b>839</b>, <b>841</b>, <b>843</b>, <b>845</b>, <b>847</b>, <b>851</b>, <b>853</b>, <b>855</b>, <b>857</b>, <b>859</b>, <b>861</b>, <b>863</b>, <b>865</b>, <b>867</b>, <b>869</b>, <b>871</b>, <b>873</b>, <b>875</b>, <b>877</b>, and <b>879</b> are coupled to the amplifiers. The switches are coupled to clocks generated by a nonoverlapping clock buffer <b>882</b>. The switches are AC switches of the type used to implement switched capacitor circuitry.</p>
<p id="p-0133" num="0132"><figref idref="DRAWINGS">FIG. 24</figref> shows an implementation of nonoverlapping clock buffer <b>882</b>. A clock signal is input at CLK. The resulting complementary pairs of clock signals are K<b>1</b> and NK<b>1</b>, and K<b>2</b> and NK<b>2</b>. These clock signals are input to the AC switches and are nonoverlapping. Nonoverlapping means the active phase K<b>1</b> is terminated before the next active phase K<b>2</b>. In other words, only one of the complementary clock signals is high, or low, at a time. <figref idref="DRAWINGS">FIG. 36</figref> shows an example of nonoverlapping clock signals CLK<b>1</b> and CLK<b>2</b>.</p>
<p id="p-0134" num="0133"><figref idref="DRAWINGS">FIG. 25</figref> shows an embodiment of a switch circuit. Many of such switches are used to implement the filter in <figref idref="DRAWINGS">FIG. 23</figref>. Such switches are also used to implement the other AC switches on the integrated circuit. IN<b>1</b> and IN<b>2</b> are the inputs. OUT is the output. FN<b>1</b> and FP<b>1</b> are complementary, nonoverlapping clock signals. FN<b>2</b> and FP<b>2</b> are also complementary, nonoverlapping clock signals. When FN<b>1</b> and FP<b>2</b> are high and FP<b>1</b> and FN<b>2</b> are low, OUT will be IN<b>1</b>. When FN<b>1</b> and FP<b>2</b> are low and FP<b>1</b> and FN<b>2</b> are high, OUT will be IN<b>2</b>.</p>
<p id="p-0135" num="0134"><figref idref="DRAWINGS">FIG. 26</figref> shows a diagram of a master-slave bias arrangement of the present invention. The master bias generator <b>1210</b> generates a bias voltage <b>1215</b> for a number of slave bias circuits <b>1225</b>. There is typically only one master bias generator. The master bias generator has a master enable input <b>1230</b> to control whether the master bias generator is enabled. When enabled or on, the master bias generator generates the bias voltage or bias voltages. When on, the master bias generator consumes power. When disabled or off, the master bias generator does not generate the bias voltage or bias voltages and does not consume power. It is desirable to have only one or very few master bias generators on the chip in order to provide uniform bias voltages and reduce power consumption.</p>
<p id="p-0136" num="0135">The master bias generator is connected to a number of slave bias circuits, each of which outputs a bias voltage derived or based on the master bias generator. Each slave bias circuit <b>1225</b> also has a local enable (EN) input <b>1235</b>. The local enable input is used in the same way as the master enable input. When the local enable is off, the slave bias circuit will not output a bias voltage and does not consume power. When the local enable is on, the slave bias circuit output the bias voltage and consumes power.</p>
<p id="p-0137" num="0136">By using the master-slave bias arrangement of the present invention, local circuits receiving the bias voltage through one slave bias circuit are isolated from other local circuits receiving the bias voltage through a different slave bias circuit. Thus, noise and other artifacts generated at a particular location are less likely to be coupled back to the master bias generator, and through other slave bias circuits, to circuits in another location. This is especially important in facilitating a stable bias reference voltage. Furthermore, individual slave bias circuits <b>1225</b> have individual local enable pins <b>1235</b>. This allows power to be saved since the slave circuit can be turned off when particular circuits do not require the bias voltage. For example, a particular portion of the circuitry may be used only during the testing of the device. To conserve power, the slave bias circuit for that portion of the circuitry will be turned off for operations other than testing.</p>
<p id="p-0138" num="0137"><figref idref="DRAWINGS">FIG. 26</figref> also shows circuit or functional blocks of the integrated circuit that are connected to individual slave bias circuits. The preamplifier, switch capacitor filter or low pass filter, output buffer, VPP and VVFY level shifter, squelch circuit, internal ring oscillator (to run the charge pumps), internal relaxation oscillator (to generate the sampling frequency), and end-of-battery detector are connected to individual slave circuits. The functionality of these blocks is described in more detail elsewhere in this specification.</p>
<p id="p-0139" num="0138">While operating the integrated circuit, certain functional blocks are not used when other functional blocks are being used. For example, the VPP and VVFY level shifters are not typically used at the same time as the playback level shifter. This is because the memory cells are generally not written to and read from at the same time. In cases such as this, the slave bias circuit for the unused or nonoperated circuitry can be turned off. This will save power and also further enhance the isolation between the bias voltage output lines of the slave bias circuits.</p>
<p id="p-0140" num="0139">Further, it is desirable to have separate slave bias circuits for the circuit blocks where isolation of the bias output lines is important. For example, the slave bias circuit for the internal ring oscillator is separate from that for the internal relaxation oscillator. This will help prevent noise or other effects of one oscillator from affecting the other oscillator. Another example of where separate slave bias circuits are desirable is for the digital and analog circuitry. The analog circuit will be connected to different slave bias circuits from the digital circuits.</p>
<p id="p-0141" num="0140"><figref idref="DRAWINGS">FIG. 27</figref> shows a diagram of circuitry that may be used to implement the master bias voltage or other bias voltages. The particular circuitry shown in <figref idref="DRAWINGS">FIG. 27</figref> is for a bandgap reference voltage generator. The bandgap reference voltage provides a stable, constant voltage reference relative to changes in power supply voltages, temperature, and pressure, among other factors. Other circuitry, other than a bandgap reference, may be used to generate a reference voltage. These may also be used to implement the master bias voltage.</p>
<p id="p-0142" num="0141"><figref idref="DRAWINGS">FIG. 28</figref> shows a more detailed diagram of a slave bias circuit. This specific configuration has an enable input EN to control whether bias voltages are generated at outputs VSP, VSPC, VSNC, and VSN. When EN is a logic high, bias voltages are generated. When EN is a logic low, the slave circuit will not generate bias voltages, and the circuitry will consume essentially zero power. A VM input is a bias voltage input used to generate the bias voltages. VM is connected to the master bias generator. The slave bias circuit used VM to generate multiple bias voltages. VSP will be about a VT below VDD. VSPC will be about 2*VT below VDD. VSNC will be about 2*VT above ground. VSN will be about a VT above ground.</p>
<p id="p-0143" num="0142"><figref idref="DRAWINGS">FIG. 29</figref> shows a diagram of a portion of a memory array of the present invention. Individual memory cells are arranged in rows and columns. <figref idref="DRAWINGS">FIG. 15</figref> shows eight memory cells M<b>1</b>, M<b>2</b>, M<b>3</b>, M<b>4</b>, M<b>5</b>, M<b>6</b>, M<b>7</b>, and M<b>8</b>. The memory-transistors are floating gate memory cells such as EEPROM or Flash. As many memory cells as desired may be added to the array by repeating or mirroring this structure. Word lines WL<b>1</b> and WL<b>2</b> coupled to the control electrodes or gates for two different rows of memory cells. Bit lines BL<b>1</b>, BL<b>2</b>, BL<b>3</b>, and BL<b>4</b> coupled to four different columns of memory cells. These memory cells share a common source line SL<b>1</b>. Moreover, for example, an array may have 1K, 10K, 100K, 500K, 1M, 2M, 4M, 6M, 8M, 10M, 12M, 16M, 20M, 32M, 64M cells or more. As discussed previously, a practical implementation of the present invention using present technology has about 1.92 million or less memory cells. As technology advances,l it will undoubtedly be possible to have more memory cells on the integrated circuit. For example, a chip twice the size will have 3.84 million memory cells. This “double sized” memory will store approximately sixteen minutes of voice data when using a 4 kilohertz sampling frequency. The cells are organized by rows and columns.</p>
<p id="p-0144" num="0143"><figref idref="DRAWINGS">FIG. 29</figref> shows a sector or page of memory cells. Since the memory cells have a common source line, all the memory cells in the sector are erased at the same time. Memory cells in one sector will have a different source line from memory cells in other sectors. The memory is organized in sectors to allow a group of memory cells to be more easily erased. It is undesirable to use too large a sector size or else too much data is erased at one time. Then, it is likely much of the data will need to be rewritten into the memory.</p>
<p id="p-0145" num="0144">In a specific embodiment, the nonvolatile analog memory cells are fabricated using Flash technology. Flash technology provides reprogrammable, nonvolatile memory cells. Flash transistor may be written, erased, and rewritten an indefinite number of times. In this written description, writing the Flash memory cells may also be referred to as “programming” the cells. And, programming the cells means a stored threshold voltage (VT) of the memory cells will be increased. For example, Flash transistor may be operated for about 300,000 or more erase and write cycles. Also, Flash transistors retain their stored value even when power is removed from the integrated circuit. It is expected the data retention time is better than 100 years.</p>
<p id="p-0146" num="0145">A memory cell may be a single Flash transistor having a floating gate. Electrons are transferred to and from the floating gate. The quantity of electrons stored on the floating gate will be representative of the memory cell's stored value. The quantity of electronics stored on the floating gate, and hence the cell's stored value is determined by finding a threshold voltage (VT) of the transistor. For example, the threshold voltages for a Flash transistor typically range from about 3 volts to about 5.5 volts. The voltages or stored VTs in this range are used to represent the different stored values. The range for VT is technology dependent and will vary. The threshold voltage for the Flash transistor may also be negative in some applications of the present invention. For EEPROM cells, the VT range will be from about −2 volts to about 3 volts.</p>
<p id="p-0147" num="0146">A Flash transistor is programmed or written by placing electrons on the floating gate. Programming can be accomplished by generating a programming current through the transistor sufficient to generate hot electrons. The programming current through a Flash transistor may range from about 200 microamps to about 3 milliamps, or more. A typical programming current would be about 0.5 milliamps to about 2 milliamps. For some Flash transistors, programming currents of less than 200 microamps are used. For example, some Flash transistor are programmed with about 10 microamps. Some hot electrons will jump the potential barrier and become embedded in the floating gate of the Flash transistor. Flash transistors are erased by removing electrons from the floating gate using such mechanisms as Fowler-Nordheim tunneling. Essentially, electrons are attracted out of the floating gate by placing a relatively large positive voltage on the source line.</p>
<p id="p-0148" num="0147">Many other technologies may also be used to implement the memory cells of the present invention. For example, EEPROM or EPROM technology may also be used instead of, or in combination with, Flash technology. For EEPROM technology, the EEPROM transistors having a floating gate can be programmed using Fowler-Nordheim tunneling. Analog memory cells may be implemented using other technologies including dynamic RAM (DRAM) cells by controlling the amount of charge stored on the capacitor; ferroelectric RAM (FRAM) cells by controlling the electric polarization of the ferroelectric material; and antifuses by controlling the resistance or other electrical property of the antifuse link. Other technologies may include charge-coupled devices (CCDs) and fuses, among others.</p>
<p id="p-0149" num="0148">Flash transistor technology provides certain advantages compared to EEPROM technology. The time for hot electron programming of Flash cells is much shorter than the programming time of EEPROM cells. Typically, Flash cells may be programmed about 100 times faster than EEPROM cells. The programming time for Flash cells is typically about 125 microseconds, although less time (e.g., 63 microseconds) is often sufficient. Since the programming time is shorter with Flash cells, an integrated circuit with Flash technology can be operated with a higher sampling frequency because less time is needed before taking the next sample. Furthermore, the samples are “fresher” since less time has elapsed between the time the sample was taken and the sampled data is stored. “Fresher samples” refers to samples that are free of sample and hold “droop” errors, which can be caused by charge loss or leakage during the hold mode. By using fresher samples, this results in less distortion. Flash cells are also smaller than EEPROM cells, so larger numbers of Flash cells may be fabricated on the same integrated circuit area. The circuitry overhead for interfacing with and configuring Flash transistors is also comparatively less than for EEPROM transistors. Generally, there are many benefits to using Flash technology as compared to other floating gate technologies including EEPROM technology.</p>
<p id="p-0150" num="0149">In other embodiments of the present invention, the memory cells or a portion of the memory cells may be one-time programmable (OTP) instead of reprogrammable. The OTP cells can be used for setting options on the integrated circuit. An example of another use of OTP memory is to store prerecorded sound, music, video, or pictures. OTP integrated circuits of the present invention may be sold much like prerecorded cassettes, CDs, minidiscs, videotapes, videodiscs, and DVDs. OTP cells can be implemented using the same technology used to implement the reprogrammable cells. However, OTP cells cannot be erased because the circuitry is designed not to allow erasure.</p>
<p id="p-0151" num="0150"><figref idref="DRAWINGS">FIG. 30</figref> shows a diagram of an organization of a memory array of the present invention. There are many possible arrangements for memory cells in an integrated circuit of the present invention. <figref idref="DRAWINGS">FIG. 30</figref> shows one specific example where the memory cells are organized in subarrays. Subarrays on a left side are labeled LA, LB, LC, and LD. Subarrays on a right side are labeled RA, RB, RC, and RD. A subarray has row or word lines (WLs) and column or bit lines (BLs). The subarray is further segmented in sectors. A sector of memory cells can have different bit lines, but these memory cells share the same source line (SL). As discussed above, this permits the erasure of a sector of memory cells at one time.</p>
<p id="p-0152" num="0151">Another example of a configuration for a sector of memory cells is shown in <figref idref="DRAWINGS">FIG. 31</figref>. In <figref idref="DRAWINGS">FIG. 31</figref>, there are a number of memory cells M<b>11</b> to Mmn having a source line SL connected in common for the cells. The memory cells have word lines WL<b>1</b> to WLm and bit lines BL<b>1</b> to BLn. Other configurations for sectors of memory cells may share one or more word lines, or one or more bit lines. There may be any number of cells in a sector. For example, in one embodiment, there are 1504 cells in a single sector that is organized as 4 bit lines and 376 word lines.</p>
<p id="p-0153" num="0152"><figref idref="DRAWINGS">FIG. 30</figref> shows circuitry for a Y-address decoder <b>1610</b> for the subarrays on left side, and for a Y-address decoder <b>1620</b> for the right side. Further, there are X-address decoders <b>1630</b> and <b>1640</b> for the each of the subarrays. The X-address decoders are located between the subarrays. There are global bit line decoders <b>1645</b> and <b>1647</b> for left and right subarrays, respectively. The subarrays have local bit line and source line select circuitry <b>1652</b> and source decode to V<sub>erase </sub>circuitry <b>1655</b>. Also, there is a word line decoder <b>1660</b> for each of the subarrays. The decoders are divided into pull-up and pull-down decoders. All decoders may be on one side, either the pull-up or pull-down side. In a specific embodiment of the present invention, decoders <b>1640</b> are pull-up decoders while decoders <b>1660</b> are pull-down decoders.</p>
<p id="p-0154" num="0153">Within each subarray, one word line is designated as an end of message (EOM) word line (i.e., EOM WL) that is used to gate memory cells to indicate whether a message ends within a sector. Also, there is a trim word line (i.e., TRIM WL) in one or more of the subarrays. The trim word line includes memory cells that are configured to enable or disable options for the integrated circuit. The memory cells along the trim word line may be one-time programmable.</p>
<p id="p-0155" num="0154">In a specific layout of the cells in <figref idref="DRAWINGS">FIG. 31</figref>, in the vertical direction, the bit lines of the memory cells are run in diffusion and metal-1. There will be polysilicon-1 stripes. Source lines are run in metal-1. To allow signals to pass, two global bit lines are in metal-2, one global source line is in metal-2, and two passing source lines are in metal-1. In the horizontal direction, word lines are run in polysilicon-2. And, a common source diffusion is shared by the bit lines.</p>
<p id="p-0156" num="0155">U.S. provisional application 60/091,326 provides a further description of the memory array. In brief, in a specific example of an integrated circuit of the present invention, there are a total of 1.92 million bits of Flash cells for user voice or digital data storage. The cells are segmented into eight subarrays of about 240K bits. A subarray is arranged to have 640 bit lines by 376 word lines. The actual physical layout for each subarray will typically have more bit lines and word lines. For example, there are 648 bit lines and 384 word lines. The additional bit lines and word lines are used for end of message, trim, and array-edge protection purposes. Global bit lines and global source lines are run in metal-2 above or on top of the subarrays. These global lines are subsequently coupled to local bit lines and local source lines in order to address each cell individually.</p>
<p id="p-0157" num="0156">Furthermore, each of the subarrays is further divided into 160 bit-line-based sectors. Each bit-line-based sector contains four bit lines that can be erased together through one common source line shared by the four bit lines. Each sector is made of 1504 user cells (4 rows*376 cells/row). A user sector includes a sector located within a left subarray and a sector located within a right subarray. There are 3008 cells per user sector, and each user sector may be selected by using a unique address. There are 640 (4*160) user-addressable sectors on a single chip.</p>
<p id="p-0158" num="0157">There are many different techniques of implementing circuitry for writing or programming information into the memory array. Some techniques are discussed in U.S. Pat. No. 5,694,356, which is incorporated by reference. <figref idref="DRAWINGS">FIG. 32</figref> shows an example of a specific implementation of the write circuit <b>414</b> of <figref idref="DRAWINGS">FIG. 4</figref>. Circuit blocks <b>1810</b> and <b>1815</b> each contain a combination of voltage level shifter and sample and hold (S/H) amplifier circuit. The level shifter and S/H circuit may also be implemented in separate or different circuit blocks. For example, the S/H circuit can be part of the low pass filter circuitry <b>411</b> of <figref idref="DRAWINGS">FIG. 4</figref>. This circuitry holds the data and generates voltage levels for storing the sampled data into a memory cell. The S/H circuit samples when the clock runs and holds when the clock is stopped on a low phase.</p>
<p id="p-0159" num="0158">Inputs to the circuit blocks are a signal <b>1817</b> (which is typically analog) to be stored or recorded and clock inputs <b>1819</b>. The analog signal comes from an antialiasing filter, such as low pass filter <b>411</b> or the Butterworth filter of <figref idref="DRAWINGS">FIG. 23</figref>. The clock inputs are from a nonoverlapping clock buffer such as shown in <figref idref="DRAWINGS">FIG. 24</figref>. Level shifter circuit block <b>1810</b> provides an output <b>1820</b>. This level shifter can be referred to as a programming voltage or VPP level shifter circuit. Level shifter circuit <b>1815</b> provides an output <b>1825</b>. This level shifter can be referred to as a target or verify (VVFY) voltage level shifter circuit. Output <b>1825</b> provides a level shifted voltage VS<b>1</b> (or VVFY) corresponding to the target threshold voltage (VT) to be programmed into the memory cell. For typical Flash memory cells, the range of target VTs will be from about 2.5 volts to about 6 volts. Output <b>1820</b> provides a level shifted voltage VS<b>2</b>, which is the target VT plus an offset. During programming, VS<b>2</b> is coupled to the control electrode or control gate of the memory cell so the memory will be programmed to the desired or target VT. In a specific embodiment, the offset voltage is about 5 volts. In this case, if the desired VT is 3.5 volts and the offset is 5 volts, the VS<b>2</b> voltage will be 8.5 volts. Using two level shifters provides the advantage that the two level shifters may be independently adjusted in order to program memory cells more precisely.</p>
<p id="p-0160" num="0159">The voltages generated and provided by the level shifters may be above the supply voltages for the integrated circuit. These high voltages are used to program and verify the memory cells. In order for the level shifters to provide these high voltages, high voltages can be generated on-chip using charge pump circuitry (discussed below). These high voltages are connected to the amplifiers of level shifters. Specifically, the generated high voltages are connected to the supply rails of level shifter circuitry. The level shifter will be able to generate a range of output voltages up to its supply voltage.</p>
<p id="p-0161" num="0160">The writing techniques of the present invention use two level shifter circuits <b>1810</b> and <b>1815</b>. By having the two level shifters, each may be adjusted independently from another to allow for proper and more precise programming of memory cells. Other programming methodologies may use a single level shifter or more than two level shifters. In a particular embodiment, in order to program multiple memory cells at one time, a number of level shifters are used in conjunction with another at the same time.</p>
<p id="p-0162" num="0161">In a technique of programming the analog memory cell according to the present invention, VS<b>1</b> and VS<b>2</b> are coupled alternatively to the control electrode or word line of the Flash cell. Typically, VS<b>1</b> will be in a range from about 2 volts to about 7 volts. VS<b>2</b> will be in a range from about 5 volts to about 13 volts. As shown in <figref idref="DRAWINGS">FIG. 33</figref>, at the control gate, there will be pulses between a target or desired VT level (VS<b>1</b> level) and a desired VT level plus an offset voltage level (VS<b>2</b> level). When VS<b>1</b> is coupled to the control gate of the memory cell, the memory cell is evaluated whether or not it conducts current. Programming is completed when the memory cell no longer conducts. When VS<b>2</b> is coupled to the control gate of the memory cell, the memory cell is being programmed. And, after repeated pulses of this VS<b>2</b> voltage, the VT of the memory will eventually reach the desired VT level. The larger the offset voltage, the faster the memory cell will program.</p>
<p id="p-0163" num="0162">The VS<b>2</b> voltage is pulsed at the control electrode until the VT of the memory cell reaches the desired or target VT value. <figref idref="DRAWINGS">FIG. 33</figref> shows a diagram of a waveform at the control gate of the Flash cell. A memory cell will be programmed using anywhere from a single pulse to about forty pulses, or more. Pulsing of VS<b>2</b> continues until current stops flowing through the memory cell when VS<b>1</b> is applied to its control electrode. At the point the memory cell no longer conducts current with VS<b>1</b> at its gate, the memory cell's VT will be at the target VT level. As the analog signal varies, the VS<b>1</b> and VS<b>2</b> levels will also track the variation. A higher voltage analog sample will result in higher VS<b>1</b> and VS<b>2</b> voltages.</p>
<p id="p-0164" num="0163">By selecting the appropriate values for the VS<b>1</b> and VS<b>2</b> voltages, the resolution and programming time for the memory cells are also adjusted. In an embodiment of the present invention, level shifters <b>1810</b> and <b>1815</b> are trinmmable to allow adjustment of the VS<b>1</b> and VS<b>2</b> voltages without mask changes. The VS<b>1</b> and VS<b>2</b> voltages can be adjusted during testing (before or after packaging, or both) of the integrated circuits to account for manufacturing and other variations. To provide better resolution, a technique of the present invention is to select the VS<b>1</b> and VS<b>2</b> voltages so that about fifty percent or more of the allowed time for programming is used. Better resolution is desirable because this results in the most precise storage representation of the original signal.</p>
<p id="p-0165" num="0164">Generally, if fewer pulses are required to program a memory cell, this means the cell is programmed using coarser steps. However, the maximum amount of time available to program per sample is dictated by the sampling frequency, as shown in table B below.</p>
<p id="p-0166" num="0165">
<tables id="TABLE-US-00002" num="00002">
<table frame="none" colsep="0" rowsep="0">
<tgroup align="left" colsep="0" rowsep="0" cols="3">
<colspec colname="1" colwidth="84pt" align="center"/>
<colspec colname="2" colwidth="35pt" align="center"/>
<colspec colname="3" colwidth="98pt" align="center"/>
<thead>
<row>
<entry namest="1" nameend="3" rowsep="1">TABLE B</entry>
</row>
<row>
<entry namest="1" nameend="3" align="center" rowsep="1"/>
</row>
<row>
<entry>Sampling</entry>
<entry>Time Per</entry>
<entry>Max Recording Time</entry>
</row>
<row>
<entry>Frequency f<sub>samp</sub></entry>
<entry>Sample</entry>
<entry>For 1.92 M Cells</entry>
</row>
<row>
<entry namest="1" nameend="3" align="center" rowsep="1"/>
</row>
</thead>
<tbody valign="top">
<row>
<entry> 2 kHz</entry>
<entry>500 μs</entry>
<entry>16 minutes </entry>
</row>
<row>
<entry> 4 kHz</entry>
<entry>250 μs</entry>
<entry>8 minutes</entry>
</row>
<row>
<entry>5.3 kHZ </entry>
<entry>188 μs</entry>
<entry>6 minutes</entry>
</row>
<row>
<entry>6.4 kHz </entry>
<entry>156 μs</entry>
<entry>5 minutes</entry>
</row>
<row>
<entry> 8 kHz</entry>
<entry>125 μs</entry>
<entry>4 minutes</entry>
</row>
<row>
<entry>16 kHz</entry>
<entry> 63 μs</entry>
<entry>2 minutes</entry>
</row>
<row>
<entry>32 kHz</entry>
<entry> 31 μs</entry>
<entry>1 minute </entry>
</row>
<row>
<entry>44 kHz</entry>
<entry> 23 μs</entry>
<entry>43 seconds </entry>
</row>
<row>
<entry>128 kHz </entry>
<entry> 8 μs</entry>
<entry>15 seconds </entry>
</row>
<row>
<entry namest="1" nameend="3" align="center" rowsep="1"/>
</row>
</tbody>
</tgroup>
</table>
</tables>
</p>
<p id="p-0167" num="0166">A memory cell should be programmed before the next sample. Shorter programming times are desirable to facilitate higher sampling frequencies. Therefore, level shifters <b>1810</b> and <b>1815</b> should be designed to support the desired level of resolution and fidelity. By providing trimmable circuitry so the VS<b>1</b> and VS<b>2</b> voltages are easily adjusted, this permits greater flexibility in addressing manufacturing variations and “tuning” parts to provide an optimum level of resolution. Particular integrated circuits may also be adjusted to suit the intended application.</p>
<p id="p-0168" num="0167"><figref idref="DRAWINGS">FIG. 34</figref> shows a timing diagram illustrating operation of the level shifter circuitry. An input signal <b>1910</b> is representative of a signal at signal input <b>1817</b>. A clock signal <b>1920</b> is representative of a signal at clock input <b>1819</b>. A level shift output <b>1930</b> is representative of an output of the level shifter circuit (e.g., either VS<b>1</b> or VS<b>2</b> outputs). In operation, the level shifter provides a level shifted output <b>1930</b> representative of input <b>1910</b>. The sample and hold circuit, samples when the clock runs, and holds when the clock is stopped on a low phase. In particular, during a period T<b>1</b>, the input signal <b>1910</b> is sampled using the clock signal as a sampling clock. Note that during period T<b>1</b>, the output of the level shifter changes to become the level of the input signal v(t) plus a constant, which is the level-shifted value. By the beginning of a period T<b>2</b>, the level shifter output has become its target or final value (i.e., v(t) plus a constant). During period T<b>2</b> when the clock is low, the value of the input <b>1910</b> which has been sampled is held. The output of the level shifter does not change. The level shifter output <b>1930</b> is used for programming the memory cell or other purposes. During period T<b>2</b>, the sampled value is stored into a single memory cell by pulsing the level shifter output <b>1930</b> at the control gate of the memory cell. After period T<b>2</b>, during a period T<b>3</b>, the analog value is again sampled, similarly as described for period T<b>1</b>. This technique of sampling and holding is repeated as many times and for the duration desired to store the input signal into the memory cells. For example, to store one minute of an analog signal such as a voice, the process is repeated for the duration of one minute.</p>
<p id="p-0169" num="0168"><figref idref="DRAWINGS">FIG. 35</figref> shows a more simplified schematic of a combination voltage level shifter and sample and hold circuit of the present invention. This circuitry can be used to implement level shifter circuit blocks <b>1810</b> or <b>1815</b> of <figref idref="DRAWINGS">FIG. 32</figref>. The circuitry has a number of AC switches that are connected depending on a clock input CLK<b>1</b> or CLK<b>2</b>, which are nonoverlapping clock signals. For example, the switching of a switch <b>2003</b> is controlled by CLK<b>1</b>, and the switching of a switch <b>2005</b> is controlled by a CLK<b>2</b>. <figref idref="DRAWINGS">FIG. 36</figref> shows a timing diagram for nonoverlapping clock signals CLK<b>1</b> and CLK<b>2</b>. CLK<b>1</b> and CLK<b>2</b> are nonoverlapping because only CLK<b>1</b> or CLK<b>2</b> is high at the same time. A switch will be “closed” when the controlling clock signal is a high. Otherwise, the switch will be “open.” For example, when CLK<b>2</b> is high, and CLK<b>1</b> is low, the circuitry in <figref idref="DRAWINGS">FIG. 35</figref> will be in a HOLD mode. Because CLK<b>1</b> and CLK<b>2</b> are nonoverlapping, a switch controlled by CLK<b>1</b> and a switch controlled by CLK<b>2</b> will not be closed at the same time.</p>
<p id="p-0170" num="0169">The circuitry takes as input a fully differential input signal (e.g., input <b>1817</b> of <figref idref="DRAWINGS">FIG. 32</figref>) at Vi+ and Vi−. An offset voltage is input at Vos. These inputs are coupled to an operational amplifier <b>2020</b>. An output is provided at Vout. A signal ground (SG) potential is representative of a signal reference voltage. The circuitry provides a level-shifted output depending on the sizes of the capacitances C<b>1</b>, C<b>2</b>, and C<b>3</b> according to the following equation: (Vout−Vsg)=(C<b>2</b>/C<b>3</b>*(Vi+−Vi−))−(2*C<b>1</b>/C<b>3</b>(Vos−Vsg)).</p>
<p id="p-0171" num="0170">The level shifter circuit also performs a differential input to single-ended output conversion. The level shifter output is single ended because the memory is single ended. The level shifter can be designed to have a fully differential output if a fully differential memory is used, but a fully differential memory would use about twice the integrated circuit area as a single-ended memory.</p>
<p id="p-0172" num="0171">When implemented using the circuit in <figref idref="DRAWINGS">FIG. 35</figref>, the VPP level shifter has a trimmable output voltage where (V<sub>out</sub>−V<sub>sg</sub>) is adjusted by changing the sizes of capacitances C<b>1</b>, C<b>2</b>, and C<b>3</b>. Adjusting C<b>1</b> adjusts the offset component of the equation. <figref idref="DRAWINGS">FIG. 37</figref> shows offset component <b>2150</b>. Therefore, by adjusting C<b>1</b>, for a given target VT voltage, a desired value for VPP or VS<b>2</b> can be obtained. The range of voltages for VS<b>2</b> is technology dependent, varying depending on parameters such as oxide thickness and channel length. By adjusting C<b>1</b>, the yield of good die may be improved. In a specific embodiment, VS<b>2</b> ranges from about 5 volts to about 13 volts. The offset voltage between VS<b>1</b> and VS<b>2</b> is programmably selectable by adjusting C<b>1</b>. This offset voltage is about 5 volts in a typical case.</p>
<p id="p-0173" num="0172">The C<b>2</b> capacitance can also be adjusted. This will adjust the signal component and vary the slope of the VS<b>2</b> curve (see <figref idref="DRAWINGS">FIG. 37</figref>). It is generally desirable for the VS<b>1</b> and VS<b>2</b> curves to be parallel because the offset voltage will be constant. In some cases, however, it may be desirable to have a relationship between VS<b>1</b> and VS<b>2</b> not having a constant offset voltage.</p>
<p id="p-0174" num="0173">The C<b>3</b> capacitance is also trimmable. Adjusting C<b>3</b> will affect both the offset and signal components since it is a factor in both offset and signal components of the equation.</p>
<p id="p-0175" num="0174"><figref idref="DRAWINGS">FIG. 38</figref> shows circuitry for implementing a trimmable capacitance that may be used for C<b>1</b>, C<b>2</b>, or C<b>3</b> of the level shifter in <figref idref="DRAWINGS">FIG. 20</figref>. In <figref idref="DRAWINGS">FIG. 38</figref>, the size or capacitance for C<b>1</b> may be programmably selected. A number of capacitors C<b>1</b>A, C<b>1</b>B, C<b>1</b>C, C<b>1</b>D, and C<b>1</b>E are programmably connected in parallel. By combining one or more of these capacitors with C<b>1</b>E, other capacitance values for C<b>1</b> are obtainable. Capacitors C<b>1</b>A, C<b>1</b>B, C<b>1</b>C, and C<b>1</b>D may be combined or added together with C<b>1</b>E by closing the appropriate switches T<b>1</b>, T<b>2</b>, T<b>3</b>, or T<b>4</b>. In one embodiment, the sizes of capacitors C<b>1</b>A, C<b>1</b>B, C<b>1</b>C, and C<b>1</b>D are weighted in order to obtain a wider range of capacitance values for C<b>1</b>. For example, the capacitor sizes may be binary weighted. In other embodiments, the capacitors are each different sizes (giving different capacitance values), or are the same size (giving the same capacitance value). Capacitors C<b>1</b>A, C<b>1</b>B, C<b>1</b>C, C<b>1</b>D, and any others may be formed using MOS transistors, polysilicon-1 to polysilicon-2 coupling, or other techniques commonly used to form a capacitance on an integrated circuit.</p>
<p id="p-0176" num="0175">Similar techniques may also be used to form variable sized capacitances for C<b>2</b>, C<b>3</b>, and C<b>4</b>, if desired. In a specific implementation of the circuitry in <figref idref="DRAWINGS">FIG. 38</figref>, the VPP output voltage is about 9 volts when signal ground is applied to Vin. The VPP output voltage is programmably adjustable in about 0.13 volt steps.</p>
<p id="p-0177" num="0176"><figref idref="DRAWINGS">FIG. 38</figref> shows a single-ended version of the level shifter. A fully differential version may be constructed similarly as shown in <figref idref="DRAWINGS">FIG. 35</figref>. The programmably connectable capacitors would be connectable to both positive and negative inputs of the operational amplifier. To adjust the value of a particular capacitance, the capacitance value at both positive and negative inputs are charged at the same time. For example, in <figref idref="DRAWINGS">FIG. 35</figref>, C<b>1</b> on both positive and negative inputs is programmably adjustable and will have the same value after adjustment.</p>
<p id="p-0178" num="0177"><figref idref="DRAWINGS">FIG. 39</figref> shows a specific embodiment of a switch and a capacitor C that may be used to make a trimmable capacitor of the present invention. In this embodiment, the switch is formed using an NMOS pass gate <b>2145</b> and an NMOS pass gate <b>2150</b>. Other types of pass gates may be used instead; these include a fully complementary pass gate with an NMOS device and a PMOS device. In this embodiment, an on or off state of the pass gates are controlled by a bit stored in a register <b>2163</b>. The register may be loaded based on information programmed into one-time programmable (OTP) cells <b>2165</b>. Pass gates <b>2145</b> and <b>2150</b> receive complementary versions of the control signal from the register. Further pass gate <b>2145</b> or <b>2150</b> is on at one time. When pass gate <b>2145</b> is on, capacitor C is connected between points A and B. When pass gate <b>2150</b> is on, capacitor C is connected between A and a fixed potential voltage <b>2170</b>, which is typically ground. This ensures there will be no problems during operation due to a “floating” capacitor.</p>
<p id="p-0179" num="0178">Switches T<b>1</b>, T<b>2</b>, T<b>3</b>, and T<b>4</b> of <figref idref="DRAWINGS">FIG. 38</figref> are static or DC switches. During normal operation, these switches will be in one state or another. However, the other switches in <figref idref="DRAWINGS">FIG. 38</figref> are AC switches that switch, based on a clock, during the normal operation of the circuitry. <figref idref="DRAWINGS">FIG. 38</figref> shows a switched capacitance version of the circuitry. An analogous timed continuous circuit can be implemented using impedances or resistances. In other words, an impedance may be substituted for the switch and capacitor.</p>
<p id="p-0180" num="0179">The timed continuous implementation can also have a programmable offset. Using a similar technique as for capacitors, a number of resistances can be connected together in such a fashion to allow the total resistance value to be programmably variable. Also, a technique to implement a variable impedance such as in U.S. patent application Ser. No. 09/159,848, which is incorporated by reference, may be used.</p>
<p id="p-0181" num="0180">There are many other possible implementations for a switch used to make a trimmable capacitor. For example, a switch may be controlled by way of Flash, EEPROM, EPROM, nonvolatile cell, floating gate cell, RAM, DRAM, antifuse, input from the SPI interface, or many other possible sources. Further, in some embodiments, the switches may be laser programmable or directly programmable memory cells coupled to the capacitor. The memory cells will be programmed by the user.</p>
<p id="p-0182" num="0181">There are many other techniques of implementing a trimmable or variable capacitor, and these techniques may also be used in implementing the level shifter of the present invention.</p>
<p id="p-0183" num="0182">The procedure to read information from a memory cell is essentially the reverse of the procedure described above to store information into the memory cell. A read circuit <b>435</b> (shown in <figref idref="DRAWINGS">FIG. 4</figref>) is used to read data from the memory cells.</p>
<p id="p-0184" num="0183"><figref idref="DRAWINGS">FIG. 40</figref> shows a simplified schematic of a ramp circuit and playback level shifter of the present invention. This circuitry is used in one implementation of read circuit <b>435</b>. The ramp circuit determined the stored VT of a memory cell. The ramp circuitry includes an operational amplifier <b>2407</b> having a first input coupled to a VINV signal and a second input coupled to a reference voltage. This reference voltage is 1.2 volts and comes from the master bias generator or a slave bias generator. The first input is connected through a switch <b>2420</b> which is controlled by a signal RAMP, to a current source <b>2425</b>. When RAMP is high, switch <b>2420</b>, will be closed, coupling the current source to the first input of operational amplifier <b>2407</b>. When RAMP is low, switch <b>2420</b> is open, decoupling the current source from the first input. Operational amplifier <b>2407</b> provides a RAMP OUTPUT. A HDUMP switch is coupled to discharge the ramp output based on a DUMP signal. The input to the ramp circuit is single ended because the memory is single ended. The output of the ramp circuit is single ended. A playback level shifter circuit <b>2430</b> receives the RAMP OUTPUT and provides a fully differential balanced output for playback. In an embodiment of the present invention, the playback level shifter may also include sample and hold circuitry, which is similar to the case for the record level shifters, VPP and VVFY level shifters, above.</p>
<p id="p-0185" num="0184"><figref idref="DRAWINGS">FIG. 41</figref> shows a timing diagram illustrating the operation of the read circuit or playback circuitry. This circuitry determines the VT of the memory cell to be read. The stored VT represents the stored information. The circuitry in <figref idref="DRAWINGS">FIG. 40</figref> is run at the sampling frequency used to store the data. The RAMP signal indicates that switch <b>2415</b> is closed to begin ramping the voltage at RAMP OUTPUT. As long as the switch is closed, the voltage at RAMP OUTPUT will continue to rise. The initial starting voltage at RAMP OUTPUT is 1.2 volts, which is the reference voltage. A DUMP signal closes the HDUMP switch to reset the circuit to the 1.2-volt level at RAMP OUTPUT. The initial starting voltage can be any voltage other than 1.2 volts, as long as it is below the minimum VT range of the memory cells. Instead of ramping up, the RAMP OUTPUT can ramp down from a predetermined high voltage, higher than the maximum VT range of the memory cells.</p>
<p id="p-0186" num="0185">To determine the stored VT of a memory cell, the RAMP OUTPUT is connected to the gate of the memory cell. The memory cell is connected to a sense amplifier or other circuit to determine whether the memory cell is conducting or not conducting current. The ramp circuitry continues to ramp the voltage at the gate of the memory cell. The memory cell will not conduct when the control electrode voltage is below its stored VT. The memory cell will conduct when it is above its VT. And, the sense amplifier is low when the memory cell does not conduct, and high when the memory cell conducts, or vice versa. Therefore, the ramp circuitry ramps the control electrode until the output of the sense amplifier changes from low to high, or vice versa. The voltage at RAMP OUTPUT at the point in time when the sense amplifier toggles is representative of the stored VT of the memory cell. This value, representative of the stored VT, at RAMP OUTPUT is provided to the playback level shifter circuitry. The playback level shifter level shifts down this voltage back to the voltage level of the original signal. This is the reverse operation of the VPP and VVFY level shifter.</p>
<p id="p-0187" num="0186"><figref idref="DRAWINGS">FIG. 42</figref> shows a diagram of a playback level shifter circuit <b>2430</b>. The voltage from the ramp circuit and a clock signal is input to level shifter circuit <b>2430</b>. An output of the level shifter circuit is a voltage which is level shifted down to the appropriate voltage for playback and re-creation of the originally stored signal.</p>
<p id="p-0188" num="0187">The voltage ranges input to the ramp circuit and playback level shifter circuit may be above the supply voltage of the integrated circuit, depending on the stored VT of the memory cell. Therefore, similar to the case with the VPP and VVFM level shifters, supply rails for the ramp circuit and playback level shifter circuit are connected to a high voltage above the supply voltage for the integrated circuit. This high voltage can be generated by charge pumps on the integrated circuit.</p>
<p id="p-0189" num="0188"><figref idref="DRAWINGS">FIG. 43</figref> shows a circuit diagram of an implementation of the playback level shifter circuit. This circuit includes a sample and hold circuit. This circuitry is similar to that described in <figref idref="DRAWINGS">FIG. 36</figref> above. The discussion for the record level shifter applies analogously to the playback level shifter. The playback level shifter also converts the single-ended input from the ramp circuit to a fully differential output. The voltage from the ramp circuit is input to Vsense. A v(t) output of the circuitry has the following relationship: v(t)=C<b>2</b>/C<b>3</b>*(2*(Vsense−Vsg))−C<b>1</b>/C<b>3</b>(2*(Vos−Vsg)). By varying the sizes of capacitors C<b>1</b>, C<b>2</b>, and C<b>3</b>, the amount of the level shifting is adjustable just as it is for the VPP and VVFY level shifters. In a specific embodiment, capacitor C<b>1</b> is a programmably variable capacitance. By adjusting the size of capacitance C<b>1</b>, the offset between V(t) and (Vsense−Vsg) is changed. The circuitry to implement a programmable, variable capacitance was discussed above, and is especially applicable to this circuitry.</p>
<p id="p-0190" num="0189">As shown in <figref idref="DRAWINGS">FIG. 4</figref>, an output from the read circuit <b>435</b> is coupled to a low pass filter <b>440</b>. This filter is sometimes referred to as a smoothing filter. This filter produces a continuous output for the playback signal. There are many possible implementations of low pass filter <b>440</b>. A specific implementation is the low pass filter circuitry, shown in <figref idref="DRAWINGS">FIGS. 22 and 23</figref>, and described above. In a specific embodiment of the present invention, the same on-chip circuitry is used for low pass filter <b>411</b> and low pass filter <b>440</b>. This reduces overall die size. For example, when used for recording, the output of preamplifier is coupled to the low pass filter circuitry. When used for playback, the output of the read circuit is coupled to the same low pass filter circuitry. In other embodiments, separate circuitry is used for the low pass filter for record and playback.</p>
<p id="p-0191" num="0190"><figref idref="DRAWINGS">FIG. 44</figref> shows circuitry for producing the playback signal at an output of an integrated circuit. This particular implementation includes a squelch circuit <b>3005</b>. Other implementations of the present invention may not include a squelch circuitry. This is one implementation of squelch circuit <b>445</b> of <figref idref="DRAWINGS">FIG. 4</figref>. The squelch circuit of the present invention attenuates the output voltage by about six decibels when the input signal level stays below a defined threshold for a defined time. If the signal level is low for a certain time, the background noise is attenuated by this feature. The user can select the defined threshold and defined time, or these parameters may be set by the design. This circuitry is active when used during playback and inactive at other times in order to reduce power consumption.</p>
<p id="p-0192" num="0191">An output <b>3010</b> from the low pass or smoothing filter is input to an output amplifier <b>3015</b> and squelch circuit <b>3005</b>. Output amplifier <b>3015</b> has an ANOUT signal output that is representative of the information stored in the memory cells. For example, if voice or other sounds were stored in the memory cells, ANOUT can be used to drive an external speaker driver <b>3025</b> and speaker <b>3030</b>. The voice or other sounds are then played out of the speaker. Output amplifier <b>3015</b> provides a gain A<b>0</b>.</p>
<p id="p-0193" num="0192">Squelch circuit <b>3005</b> generates a SQ signal output <b>3040</b> to indicate whether the ANOUT signal should be attenuated. Output amplifier <b>3015</b> takes as an input the SQ signal <b>3040</b>. When the SQ input is low, ANOUT will not be attenuated. Output amplifier <b>3015</b> provides a gain A<b>0</b>. However, when the SQ input is high, ANOUT will attenuated by the desired amount. Output amplifier <b>3015</b> provides a gain A<b>0</b> of −6 decibels, which is less than in the normal case. The SQ signal can also be provided as an external signal SQUELCH OUT. SQUELCH OUT can be used, for example, to enable or disable the attenuation of external speaker driver <b>3025</b>.</p>
<p id="p-0194" num="0193"><figref idref="DRAWINGS">FIG. 45</figref> shows a diagram of an implementation of squelch circuit <b>3005</b>. This implementation includes a peak detector, comparator, and zero-crossing detector. The circuitry operates as follow: The peak detector signal is level shifted by resistor R<sub>1</sub>. The resulting signal V<sub>1 </sub>is compared to the signal ground level which is equal to the bandgap reference voltage V<sub>BG</sub>. If V<sub>1 </sub>is smaller, squelch becomes active at the next crossing of the signals IN and NIN (i.e., the signal SQ becomes active). The time constant is set by capacitor C and the current I which discharges the node V<sub>2 </sub>with the rate I/C.</p>
<p id="p-0195" num="0194">IN is connected to a positive signal from the low pass or smoothing filter. In a specific embodiment, IN is a fully differential signal. NIN is connected to a negative signal from the low pass or smoothing filter. In a specific embodiment, NIN is also a fully differential signal. C is an external capacitor. R<b>1</b> and R<b>2</b> are internal resistors or resistances. I is a current source. STROBE is used to indicate a comparison between V<sub>1 </sub>and V<sub>BG</sub>. V<sub>BG </sub>is the bandgap reference voltage. A value of (IN+NIN)/2 will be equal to V<sub>BG</sub>, as set by a common mode feedback circuit in the low pass or smoothing filter.</p>
<p id="p-0196" num="0195"><figref idref="DRAWINGS">FIG. 46</figref> shows a signal diagram illustrating the operation of the squelch circuit. When SQ is high, the signal is attenuated.</p>
<p id="p-0197" num="0196">It is contemplated the integrated circuit of the present invention will operate in a relatively wide range of supply voltage conditions. For example, the integrated circuit may be battery powered. Different types of battery packs (e.g., air, lithium, nickel metal hydride, nickel cadmium, lead acid, gel cell, alkaline, zinc manganese) will provide different voltage levels. Furthermore, the voltage levels may also change depending on how much charge remains in the battery.</p>
<p id="p-0198" num="0197">Depending on the voltage level of the power supply, certain on-chip circuitry may need to be adjusted to reflect this change in operating conditions. An example of such circuitry is the charge pump circuitry used to provide the voltages to program a memory cell. The charge pump voltages are used by the level shifter circuits. Since it is desirable to program multiple data levels in a single memory cell, it is important to maintain precise programming voltages in order to ensure information is properly stored. For example, when the power supply voltage level is relatively high, fewer charge pump stages may be needed compared to the case when the power voltage level is relatively low. By adjusting the charge pump output voltage levels to compensate for supply voltage variation, this allows the integrated circuit to store analog and digital data more precisely—effectively more bits of storage per memory cell.</p>
<p id="p-0199" num="0198"><figref idref="DRAWINGS">FIG. 47</figref> shows an embodiment of circuitry for power supply level detection and adjustment circuitry of the present invention. The circuitry includes three voltage detect circuits <b>3410</b>, <b>3415</b>, and <b>3420</b> to detect the voltage level of the supply voltage. A number of charge pumps <b>3610</b>, <b>3615</b>, and <b>3620</b> are adjusted based on the voltage level. If the voltage level is now too low, an EOB signal will indicate this situation. A low supply voltage may mean the battery is low. EOB stands for end of battery life. Each voltage detect circuit has an input for external voltage (V<sub>ext</sub>), logic signal to update voltage detection (PH<b>1</b>), power-on reset (PORN), and internal reference voltage (VREF). When PH<b>1</b> or PORN is asserted, the voltage level detect circuit makes a detection of the supply voltage level at V<sub>ext</sub>.</p>
<p id="p-0200" num="0199">V<sub>ext </sub>is an external voltage. PH<b>1</b> is a logic signal used to indicate that the voltage detect circuit will perform an updated check of the external voltage. PORN is a power-on reset signal. V<sub>ref </sub>is an internal reference voltage. EN[2:0] are three enable signals used to enable respective ones of the charge pumps I, II, and III. VCP is an output of charge pump I. This voltage may be about 12 volts. VW is an output of charge pump II. This voltage may be about 6 volts. VSH is an output of charge pump III. This voltage may be about 8 volts. EOB is a logic signal used to indicate a low battery voltage or end-of-battery life.</p>
<p id="p-0201" num="0200"><figref idref="DRAWINGS">FIG. 49</figref> shows a more detailed schematic of a voltage detect circuit. This circuitry can be used to implement the voltage detect circuits <b>3410</b>, <b>3415</b>, and <b>3420</b> of <figref idref="DRAWINGS">FIG. 47</figref>. The voltage detect circuit performs a comparison of a VIN voltage, connected to V<sub>ext</sub>, to a VREF voltage. The voltage detect circuit provides a high output at node Q when VIN/VREF is greater than C<b>2</b>/C<b>1</b>.</p>
<p id="p-0202" num="0201">In <figref idref="DRAWINGS">FIG. 47</figref>, three voltage detect circuits are coupled together to permit the detection of a number of power supply threshold levels. For example, in a specific embodiment of the present invention, a first level for the power supply may be set at 2.4 volts, a second threshold set at 2.7 volts, and a third threshold set at 3.1 volts. These threshold levels may be set, for example, by inputting the appropriate bias voltage to the VREF of voltage detect circuits <b>3420</b>, <b>3410</b>, and <b>3415</b>, respectively. Another technique of setting the threshold levels is to appropriately select the sizes of capacitors C<b>1</b> and C<b>2</b> within the voltage detect circuit. Typical values are a C<b>1</b> of about 1 picofarad and a C<b>2</b> of about 2.2 picofarads, depending on the threshold level to be set.</p>
<p id="p-0203" num="0202">In operation, the circuitry in <figref idref="DRAWINGS">FIG. 47</figref> evaluates the power supply level once upon power-up of the integrated circuit. For example, after supplying power to the integrated circuit, the integrated circuit will be in a “power down” mode. A PWRUP command is input through the SPI interface to initialize the circuitry. Within about 100 microseconds of the PWRUP command, the VDD supply level is detected and any adjustments to the charge pump circuitry is made. The integrated circuit is ready for functional use. In other embodiments of the present invention, the circuitry periodically or continuously evaluates the power supply level. For example, in a specific implementation, the VDD supply voltage level is detected upon the entering of a different mode of operation. As shown in <figref idref="DRAWINGS">FIG. 48</figref>, the analog memory integrated circuit has operation modes including playback <b>3430</b>, record <b>3433</b>, power down <b>3435</b>, stop or idle <b>3437</b>, digital read <b>3439</b>, digital write <b>3441</b>, and cue or fast forward <b>3443</b>. Therefore, when switching from the idle node to playback, the supply voltage level is detected. The supply voltage is detected upon entering any of the modes shown in <figref idref="DRAWINGS">FIG. 48</figref>.</p>
<p id="p-0204" num="0203">Note that in the operational scheme shown in <figref idref="DRAWINGS">FIG. 48</figref>, idle mode <b>3437</b> is an intermediate mode when switching from any of the other modes in the figure. In other words, there is, for example, no direct path between record and digital read; the idle mode must be entered before switching from record to digital read. This ensures the integrated circuit is operated properly.</p>
<p id="p-0205" num="0204">Once the power supply level has been determined, this information may be passed to other circuitry on the integrated circuit. The operation of the other circuit can be altered to compensate or account for the power supply level. There may also be an external signal indicative of the power supply level. For example, if the power voltage level is below 2.4 volts, other circuitry on the integrated circuit will receive the EOB signal indicating a low battery condition. Such an EOB signal may also be used to warn the user of the low battery condition. The user can then replace or recharge the battery.</p>
<p id="p-0206" num="0205">Although <figref idref="DRAWINGS">FIG. 47</figref> shows three voltage detect circuits, other embodiments of a power supply level detection circuit may have any number of voltage detect circuits depending on the number of desired threshold levels. For example, the circuitry will have a single voltage detect circuit if there will only be one voltage threshold level. The circuitry will have two voltage detect circuits if there will be two voltage threshold levels. And, the circuitry may have greater than three voltage detect circuits if it is desirable to have more then three voltage threshold levels.</p>
<p id="p-0207" num="0206">The circuitry in <figref idref="DRAWINGS">FIG. 47</figref> includes three charge pump circuits: a VCP charge pump <b>3610</b>, a VW charge pump <b>3615</b>, and a VSH charge pump <b>3620</b>. Other embodiments of the present invention include a single charge pump, two charge pumps, or more than three charge pumps. The charge pump circuits <b>3610</b>, <b>3615</b>, and <b>3620</b> are coupled to different circuitry on the integrated circuit. This permits the generation of various voltages for the operation of the circuitry. For example, VCP charge pump circuit <b>3610</b> outputs a VCP voltage that is connected to the supply lines of the VPP level shifter circuit for recording (e.g., level shifter circuit <b>1810</b> of <figref idref="DRAWINGS">FIG. 32</figref>). VSH charge pump circuit <b>3620</b> outputs a VSH voltage that is connected to the target or VVFY level shifter circuit (e.g., level shifter circuit <b>1815</b> of <figref idref="DRAWINGS">FIG. 32</figref>). VSH charge pump circuit <b>3620</b> is also connected to a shield or isolation device for the array. VSH charge pump circuit <b>3620</b> is also coupled to the playback level shifter and ramp circuit (see <figref idref="DRAWINGS">FIG. 40</figref>). VW charge pump circuit <b>3615</b> outputs a VW voltage that is coupled to the drain or bit lines of the selected memory cells during programming.</p>
<p id="p-0208" num="0207"><figref idref="DRAWINGS">FIG. 50</figref> shows a circuit implementation of a charge pump circuit of <figref idref="DRAWINGS">FIG. 47</figref>. EN[2:0] are the enable inputs from <figref idref="DRAWINGS">FIG. 47</figref> used to enable the charge pump. CK[2:0] are clock inputs to the individual charge pump stages. V<sub>in </sub>is an input voltage to the charge pump. V<sub>cp </sub>is the charge pump output. This charge pump circuit has eleven stages. Circuitry for each of the stages is in <figref idref="DRAWINGS">FIG. 51</figref>. The number of stages used in the charge pump depends many factors including the output voltage desired, the process technology used, size of the capacitors, and other considerations. A charge pump circuit of the present invention may have fewer than eleven stages, or more than eleven stages. In a specific embodiment, the VCP charge pump has at most eleven stages, the VW charge pump has at most five stages, and the VSH charge pump has at most six stages.</p>
<p id="p-0209" num="0208">The number of stages used during the operation of the charge pump will vary depending on the operating conditions of the integrated circuit. The number of stages used will ensure generation of a proper voltage output despite variations in operating conditions such as changes in the voltage supply level. The voltage level of the power supply is possibly detected using the power supply level detection circuitry of <figref idref="DRAWINGS">FIG. 47</figref>. Logic circuitry <b>3423</b> takes the information from the voltage level detect circuitry and adjusts the charge pump to use only a particular number of stages.</p>
<p id="p-0210" num="0209">A general relationship is that the number of stages to be used will increase as the power supply voltage level decreases. Additional stages in the charge pump circuit provide an additional boost in the voltage level and current level at the output of the pump. For example, if the power supply voltage level is below about 2.7 volts, all eleven stages of the VCP charge pump are used. If the power supply voltage is between about 2.7 volts and about 3.3 volts, nine stages are used. And, if the power supply voltage is above about 3.3 volts, seven stages are used.</p>
<p id="p-0211" num="0210">Similarly, for the VW charge pump, when VDD is below about 2.7 volts, all five stages are used. When VDD is between about 2.7 volts and about 3.3 volts, four stages are used. And if VDD is above about 3.3 volts, three stages are used. For the VSH charge pump, when VDD is below about 2.7 volts, all six stages are used. When VDD is between about 2.7 volts and about 3.3 volts, five stages are used. And when VDD is above about 3.3 volts, four stages are used.</p>
<p id="p-0212" num="0211">The voltage range output of the charge pump circuit may be in any desired range. For example, the VCP charge pump circuitry generates a VCP voltage of about 12.8 volts to facilitate the program and erase of Flash memory cells. The VCP voltage will range from about 11.8 volts to about 13.8 volts. In other embodiments, voltages for programming the memory cells are in a range from about 5 volts to about 16 volts. The VW charge pump generates a VW voltage of about 6.4 volts, which can range from about 5.4 volts to about 7.4 volts. The VSH charge pump generates a VSH voltage of about 7.8 volts, which can range from about 6 volts to about 9 volts.</p>
<p id="p-0213" num="0212">The charge pump circuitry may be adjusted by using metal options, trim bits, and other similar techniques. For example, the level of the output voltage of the charge pump is adjusted by programming one or more trim bits appropriately. By allowing for such adjustments in the charge pump circuitry, especially after the integrated circuit has been fabricated, this may increase the yield of good product die. The circuitry will be functional because the trim bits allow adjustments to account for skews in the process parameters.</p>
<p id="p-0214" num="0213"><figref idref="DRAWINGS">FIG. 51</figref> shows an embodiment of a stage of a charge pump. A transistor <b>3810</b> is connected between an input <b>3813</b> and an output <b>3815</b>. A transistor <b>3818</b> is connected between the gate of transistor <b>3810</b> and input <b>3813</b>. A gate of transistor <b>3818</b> is connected to output <b>3815</b>. A capacitor <b>3820</b> is connected between a clock signal and output <b>3815</b>. A capacitor <b>3822</b> is connected between a /clock signal and the gate of transistor <b>3810</b>. In a specific embodiment, transistors <b>3810</b> and <b>3818</b> are lower VT transistors than other transistors on the integrated circuit. These transistors may be native devices having a VT of from about 0.2 volts to about 0.4 volts. Although standard VT transistors may be used, native transistors will improve the efficiency of the pump stage.</p>
<p id="p-0215" num="0214">In operation, when the clock is pulsing, transistor <b>3810</b> acts as a diode, passing charge from input <b>3813</b> to output <b>3815</b>. Charge builds up at output <b>3815</b>, and the voltage level increases. Transistor <b>3818</b> is used to bootstrap the gate of transistor <b>3810</b> to the VT plus the voltage level at input <b>3813</b> (passed from the previous stage). With multiple stages, charge is passed from stage to stage until the desired voltage level output level is obtained.</p>
<p id="p-0216" num="0215"><figref idref="DRAWINGS">FIG. 52</figref> shows a plurality of trim bits <b>3925</b> of the present invention. In particular, trim bits are memory bits that are programmed to control the operation of the on-chip circuitry. There are many different ways to implement trim bits including using one-time programmable cells, digital memory cells, analog memory cells, fuses, antifuse, and many others. In a specific embodiment, the trim bits are implemented using one-time programmable cells which are formed within or nearby the analog array area of the integrated circuit. There may be any number of trim bits. For example, there may be four bits for controlling the bandgap voltage generator (VBG), eight bits for controlling the internal oscillator (OSC) clock frequency, four bits for controlling the charge pump generating the VCP voltage, and four bits for controlling the charge pump generating the VW voltage.</p>
<p id="p-0217" num="0216">Each of the trim bits includes sense amplifier circuitry to sense a state of the trim bit. In a specific embodiment, the trim bit is sensed only once during power-up of the integrated circuit. A sense amplifier generally consumes power while the sense amplifier is actively sensing. Therefore, by turning off the sense amplifier after the state of the trim bit has been determined, this conserves power. The state of the trim bit is not expected to change during the normal operation of the device.</p>
<p id="p-0218" num="0217">After sensing, the state of a trim bit is stored in a storage block such as a latch, flip-flop, register, or SRAM cell. <figref idref="DRAWINGS">FIG. 53</figref> shows an implementation of sensing and latch circuitry for a trim bit. This is one particular implementation, among others, of a latch circuit. The latch circuit holds the state or value of the trim bit after the trim has been sensed.</p>
<p id="p-0219" num="0218"><figref idref="DRAWINGS">FIG. 54</figref> shows multiplexer and latch circuitry for selectively coupling either the trim bit <b>4110</b> or user-selected data <b>4113</b> to the circuitry to which the trim bit adjusts the operation of via output <b>4116</b>. The multiplexer circuit allows the circuitry to be adjusted using user-selected data instead of what is stored in the trim bit. Under some cases such as testing, it is desirable to “override” the trim bit with user data. In particular, a user may input user-selected data into a register, shift register, or other storage block. The user data may input in parallel or in serial, such as through the SPI interface. Then, by appropriately configuring the multiplexer, the user-selected data will be used for testing or evaluation of the circuitry on the integrated circuit instead of the trim bit.</p>
<p id="p-0220" num="0219">This detailed description of the invention has been presented for the purposes of illustration and description. It is not intended to be exhaustive or to limit the invention to the precise form described, and many modifications and variations are possible in light of the teaching above. The embodiments were chosen and described in order to best explain the principles of the invention and its practical applications. This detailed description will enable others skilled in the art to best utilize and practice the invention in various embodiments and with various modifications as are suited to the particular use contemplated. The scope of the invention is defined by the following claims.</p>
<?DETDESC description="Detailed Description" end="tail"?>
</description>
<us-claim-statement>What is claimed is:</us-claim-statement>
<claims id="claims">
<claim id="CLM-00001" num="00001">
<claim-text>1. A clock selection circuit for an integrated circuit comprising:
<claim-text>an external clock input;</claim-text>
<claim-text>an internal oscillator;</claim-text>
<claim-text>a prescaler coupled to the external clock input;</claim-text>
<claim-text>an internal clock divider coupled to the internal oscillator;</claim-text>
<claim-text>a selection circuit coupled to the select one of an output from the prescaler or an output of the internal clock divider; and</claim-text>
<claim-text>an activity detector to detect a clock signal at the external clock input, and when a clock signal is detected at the external clock input, provide a signal to the selection circuit to select the output from the prescaler.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00002" num="00002">
<claim-text>2. The circuit of <claim-ref idref="CLM-00001">claim 1</claim-ref> wherein an output of the selection circuit is used as a sampling frequency for the integrated circuit.</claim-text>
</claim>
<claim id="CLM-00003" num="00003">
<claim-text>3. The circuit of <claim-ref idref="CLM-00001">claim 1</claim-ref> wherein the internal oscillator generates an output frequency of about N Hertz, and the internal clock divider generates at its output a frequency greater than N Hertz.</claim-text>
</claim>
</claims>
</us-patent-grant>
