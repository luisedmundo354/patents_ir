<us-patent-grant lang="EN" dtd-version="v4.2 2006-08-23" file="US07299058-20071120.XML" status="PRODUCTION" id="us-patent-grant" country="US" date-produced="20071106" date-publ="20071120">
<us-bibliographic-data-grant>
<publication-reference>
<document-id>
<country>US</country>
<doc-number>07299058</doc-number>
<kind>B2</kind>
<date>20071120</date>
</document-id>
</publication-reference>
<application-reference appl-type="utility">
<document-id>
<country>US</country>
<doc-number>11201249</doc-number>
<date>20050811</date>
</document-id>
</application-reference>
<us-application-series-code>11</us-application-series-code>
<priority-claims>
<priority-claim sequence="01" kind="national">
<country>JP</country>
<doc-number>2004-278656</doc-number>
<date>20040927</date>
</priority-claim>
</priority-claims>
<us-term-of-grant>
<us-term-extension>280</us-term-extension>
</us-term-of-grant>
<classifications-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>H</section>
<class>04</class>
<subclass>Q</subclass>
<main-group>7</main-group>
<subgroup>20</subgroup>
<symbol-position>F</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20071120</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
</classifications-ipcr>
<classification-national>
<country>US</country>
<main-classification>4554561</main-classification>
<further-classification>4554566</further-classification>
<further-classification>3423571</further-classification>
</classification-national>
<invention-title id="d0e71">Position calculation method and storage medium storing a program therefor</invention-title>
<references-cited>
<citation>
<patcit num="00001">
<document-id>
<country>US</country>
<doc-number>6252543</doc-number>
<kind>B1</kind>
<name>Camp</name>
<date>20010600</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>34235706</main-classification></classification-national>
</citation>
<citation>
<patcit num="00002">
<document-id>
<country>US</country>
<doc-number>6587692</doc-number>
<kind>B1</kind>
<name>Chen et al.</name>
<date>20030700</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>4554561</main-classification></classification-national>
</citation>
<citation>
<patcit num="00003">
<document-id>
<country>US</country>
<doc-number>7064706</doc-number>
<kind>B2</kind>
<name>King et al.</name>
<date>20060600</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>34235702</main-classification></classification-national>
</citation>
<citation>
<patcit num="00004">
<document-id>
<country>JP</country>
<doc-number>2004-101254</doc-number>
<date>20040400</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<nplcit num="00005">
<othercit>4.1.1 Single unit measurement principle, “Foundation of GPS Measurement”, Japan Measurement Association, 1995 by Atushi Tuchiya and Hiromichi Tuji.</othercit>
</nplcit>
<category>cited by other</category>
</citation>
</references-cited>
<number-of-claims>10</number-of-claims>
<us-exemplary-claim>1</us-exemplary-claim>
<us-field-of-classification-search>
<classification-national>
<country>US</country>
<main-classification>4554561</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>4554566</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>3423571</main-classification>
</classification-national>
</us-field-of-classification-search>
<figures>
<number-of-drawing-sheets>7</number-of-drawing-sheets>
<number-of-figures>7</number-of-figures>
</figures>
<us-related-documents>
<related-publication>
<document-id>
<country>US</country>
<doc-number>20060068810</doc-number>
<kind>A1</kind>
<date>20060330</date>
</document-id>
</related-publication>
</us-related-documents>
<parties>
<applicants>
<applicant sequence="001" app-type="applicant-inventor" designation="us-only">
<addressbook>
<last-name>Ogino</last-name>
<first-name>Atsushi</first-name>
<address>
<city>Kodaira</city>
<country>JP</country>
</address>
</addressbook>
<nationality>
<country>JP</country>
</nationality>
<residence>
<country>JP</country>
</residence>
</applicant>
</applicants>
<agents>
<agent sequence="01" rep-type="attorney">
<addressbook>
<orgname>Antonelli, Terry, Stout &amp; Kraus, LLP.</orgname>
<address>
<country>unknown</country>
</address>
</addressbook>
</agent>
</agents>
</parties>
<assignees>
<assignee>
<addressbook>
<orgname>Hitachi, Ltd.</orgname>
<role>03</role>
<address>
<city>Tokyo</city>
<country>JP</country>
</address>
</addressbook>
</assignee>
</assignees>
<examiners>
<primary-examiner>
<last-name>Corsaro</last-name>
<first-name>Nick</first-name>
<department>2617</department>
</primary-examiner>
<assistant-examiner>
<last-name>Goetze</last-name>
<first-name>Simon A</first-name>
</assistant-examiner>
</examiners>
</us-bibliographic-data-grant>
<abstract id="abstract">
<p id="p-0001" num="0000">A position calculation method includes a step of calculating error degradation quantities about respective measurement results (“distance-ranging results”) on distances between respective reference stations and a detection-target station from the respective distance-ranging results and positions of the respective reference stations, a step of calculating weight-assigning factors about the respective distance-ranging results based on the respective error degradation quantities, a step of checking the number of valid distance-ranging results, and a step of calculating the position of the detection-target station based on the respective distance-ranging results, the positions of the respective reference stations, and the respective weight-assigning factors.</p>
</abstract>
<drawings id="DRAWINGS">
<figure id="Fig-EMI-D00000" num="00000">
<img id="EMI-D00000" he="191.01mm" wi="160.53mm" file="US07299058-20071120-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00001" num="00001">
<img id="EMI-D00001" he="135.47mm" wi="158.33mm" file="US07299058-20071120-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00002" num="00002">
<img id="EMI-D00002" he="239.69mm" wi="164.17mm" file="US07299058-20071120-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00003" num="00003">
<img id="EMI-D00003" he="228.94mm" wi="128.78mm" file="US07299058-20071120-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00004" num="00004">
<img id="EMI-D00004" he="223.01mm" wi="162.73mm" file="US07299058-20071120-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00005" num="00005">
<img id="EMI-D00005" he="259.93mm" wi="154.77mm" file="US07299058-20071120-D00005.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00006" num="00006">
<img id="EMI-D00006" he="221.23mm" wi="165.44mm" file="US07299058-20071120-D00006.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00007" num="00007">
<img id="EMI-D00007" he="188.98mm" wi="165.27mm" file="US07299058-20071120-D00007.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
</drawings>
<description id="description">
<?BRFSUM description="Brief Summary" end="lead"?>
<heading id="h-0001" level="1">INCORPORATION BY REFERENCE</heading>
<p id="p-0002" num="0001">The present application claims priority from Japanese application JP2004-278656 filed on Sep. 27, 2004, the content of which is hereby incorporated by reference into this application.</p>
<heading id="h-0002" level="1">BACKGROUND OF THE INVENTION</heading>
<p id="p-0003" num="0002">1. Field of the Invention</p>
<p id="p-0004" num="0003">The present invention relates to a position calculation method. More particularly, it relates to a method for calculating position of a radio device on the basis of distance-ranging results using electromagnetic waves.</p>
<p id="p-0005" num="0004">2. Description of the Related Art</p>
<p id="p-0006" num="0005">For example, according to Atushi Tuchiya and Hiromichi Tuji, “Foundation of GPS Measurement”, Japan Measurement Association, 1995, a GPS receiver receives signals from a plurality of GPS satellites. Moreover, these respective reception signals allow position of the GPS receiver to be detected.</p>
<p id="p-0007" num="0006">Also, according to JP-A-2004-101254, a plurality of radio base stations receive signals from a radio terminal. Moreover, these respective reception signals allow position of the radio terminal to be detected.</p>
<p id="p-0008" num="0007">In both of the above-described technologies, as illustrated in <figref idref="DRAWINGS">FIG. 1</figref>, based on measurements of reception timings of radio signals between each of a plurality of radio devices (hereinafter, referred to as “reference stations”) <b>101</b>, <b>102</b>, . . . , <b>10</b><i>n </i>whose positions P<sub>i </sub>(i=1, 2, . . . , n) have been already known and a radio device (hereinafter, referred to as “a detection-target station”) <b>100</b> whose position P has been unknown, distances between each of the reference stations and the detection-target station are measured, letting the distances be R<sub>i </sub>(i=1, 2, . . . , n) respectively. Furthermore, the position P is calculated based on the above-described R<sub>i </sub>(i=1, 2, . . . , n) and P<sub>i </sub>(i=1, 2, . . . , n).</p>
<p id="p-0009" num="0008">Between the above-described two technologies, there exists a difference that the sides for measuring the reception timings differ from each other. In principle, however, the position P is acquired as the solution of the following simultaneous equations, which are designated as Expression 1.
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?>{<i>R</i><sub>i</sub><i>+cT−∥P</i><sub>i</sub><i>−P</i>∥}=0<i>, i=</i>1<i>, . . . , n</i>  Expression 1<?in-line-formulae description="In-line Formulae" end="tail"?>
</p>
<p id="p-0010" num="0009">In Expression 1, ||x|| denotes magnitude of a vector x, c denotes speed of the radio waves, and T denotes offset of a clock selected as the reference when the distances R<sub>i </sub>(i=1, 2, . . . , n) are measured.</p>
<p id="p-0011" num="0010">In Expression 1, the unknowns are P and T. In addition, the above-described solution can be acquired in the case where n≧3 if P is a point on a two-dimensional space, and in the case where of n≧4 if P is a point on a three-dimensional space. By the way, when operating the radio position detection systems like this in environments such as indoors where reflections of the radio signals can happen easily, waveform distortions in the radio signals are likely to occur because of multiple signal reflections. On account of this, the measurements of the respective reception timings of the radio signals, i.e., the measurements of the distances between each of the reference stations and the detection-target station, turn out to contain large quantities of offsets. As a result, offset in the position calculation result P increases in quantity.</p>
<heading id="h-0003" level="1">SUMMARY OF THE INVENTION</heading>
<p id="p-0012" num="0011">Accordingly, it is an object of the present invention to reduce the offset in the calculation position of the detection-target station in the multipath environment by predicting the offsets contained in the measurements of the distances between each of the reference stations and the detection-target station.</p>
<p id="p-0013" num="0012">In order to accomplish the above-described object, a position calculation method according to the present invention includes the following steps: Calculating error degradation quantities about the respective measurement results on the distances between the respective reference stations and the detection-target station (hereinafter, referred to as “distance-ranging results”) from the respective distance-ranging results and the positions of the respective reference stations, evaluating the respective distance-ranging results based on the respective error degradation quantities, and determining weight-assigning factors about the respective distance-ranging results, checking the number of valid distance-ranging results, and calculating the position of the detection-target station based on the respective distance-ranging results, the positions of the respective reference stations, and the respective weight-assigning factors.</p>
<p id="p-0014" num="0013">According to the present invention, the offsets are predicted which are contained in the measurements of the distances between the respective reference stations and the detection-target station, thereby controlling influences which the offsets exert on the position calculation. This makes it possible to reduce the offset contained in the position calculation result.</p>
<p id="p-0015" num="0014">Other objects, features and advantages of the invention will become apparent from the following description of the embodiments of the invention taken in conjunction with the accompanying drawings.</p>
<?BRFSUM description="Brief Summary" end="tail"?>
<?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?>
<description-of-drawings>
<heading id="h-0004" level="1">BRIEF DESCRIPTION OF THE DRAWINGS</heading>
<p id="p-0016" num="0015"><figref idref="DRAWINGS">FIG. 1</figref> is the configuration diagram of the position detection system which becomes the background art;</p>
<p id="p-0017" num="0016"><figref idref="DRAWINGS">FIG. 2</figref> is a flow diagram for illustrating a first embodiment of the position calculation according to the present invention;</p>
<p id="p-0018" num="0017"><figref idref="DRAWINGS">FIG. 3</figref> is a flow diagram for illustrating steps of evaluation of distance-ranging results and updating of weight-assigning factors in the position calculation according to the present invention;</p>
<p id="p-0019" num="0018"><figref idref="DRAWINGS">FIG. 4</figref> is a flow diagram for illustrating checking of the number of valid distance-ranging results;</p>
<p id="p-0020" num="0019"><figref idref="DRAWINGS">FIG. 5</figref> is a flow diagram for illustrating a second embodiment of the position calculation according to the present invention;</p>
<p id="p-0021" num="0020"><figref idref="DRAWINGS">FIG. 6</figref> is a configuration diagram of the position detection system relating to the present invention; and</p>
<p id="p-0022" num="0021"><figref idref="DRAWINGS">FIG. 7</figref> is another configuration diagram of the position detection system relating to the present invention.</p>
</description-of-drawings>
<?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?>
<?DETDESC description="Detailed Description" end="lead"?>
<heading id="h-0005" level="1">DETAILED DESCRIPTION OF THE INVENTION</heading>
<p id="p-0023" num="0022">First, assume that Expression 1 is overdetermined simultaneous equations (i.e., simultaneous equations where the number of the equations is larger than the number of unknowns). Namely, assume that n≧4 holds if P is a point on a two-dimensional space, and that n≧5 holds if P is a point on a three-dimensional space.</p>
<heading id="h-0006" level="1">1. EMBODIMENT 1</heading>
<p id="p-0024" num="0023">Next, quoting the notations in <figref idref="DRAWINGS">FIG. 1</figref> and Expression 1 and referring to <figref idref="DRAWINGS">FIG. 2</figref>, the explanation will be given below concerning an embodiment of the position calculation method according to the present invention.</p>
<p id="p-0025" num="0024">In <figref idref="DRAWINGS">FIG. 2</figref>, S<b>11</b> is a step of calculating a reference error E<sub>0 </sub>based on the respective distance-ranging results and the positions of the respective reference stations. At the present step, as indicated in the following Expression 2, the above-described reference error E<sub>0 </sub>is given as the minimum value of an error function E (P, T) with P and T selected as the variables, or an approximate value of the minimum value.</p>
<p id="p-0026" num="0025">
<maths id="MATH-US-00001" num="00001">
<math overflow="scroll">
<mtable>
  <mtr>
    <mtd>
      <mrow>
        <mrow>
          <msub>
            <mi>E</mi>
            <mn>0</mn>
          </msub>
          <mo>=</mo>
          <mrow>
            <munder>
              <mi>min</mi>
              <mrow>
                <mi>P</mi>
                <mo>,</mo>
                <mi>T</mi>
              </mrow>
            </munder>
            <mo>⁢</mo>
            <mrow>
              <mo>(</mo>
              <mrow>
                <mi>E</mi>
                <mo>⁡</mo>
                <mrow>
                  <mo>(</mo>
                  <mrow>
                    <mi>P</mi>
                    <mo>,</mo>
                    <mi>T</mi>
                  </mrow>
                  <mo>)</mo>
                </mrow>
              </mrow>
              <mo>)</mo>
            </mrow>
          </mrow>
        </mrow>
        <mo>,</mo>
        <mrow>
          <mrow>
            <mi>E</mi>
            <mo>⁡</mo>
            <mrow>
              <mo>(</mo>
              <mrow>
                <mi>P</mi>
                <mo>,</mo>
                <mi>T</mi>
              </mrow>
              <mo>)</mo>
            </mrow>
          </mrow>
          <mo>⁢</mo>
          <mstyle>
            <mtext>
</mtext>
          </mstyle>
          <mo>⁢</mo>
          <mstyle>
            <mspace width="1.4em" height="1.4ex"/>
          </mstyle>
          <mo>=</mo>
          <mrow>
            <munderover>
              <mo>∑</mo>
              <mrow>
                <mi>k</mi>
                <mo>=</mo>
                <mn>1</mn>
              </mrow>
              <mi>n</mi>
            </munderover>
            <mo>⁢</mo>
            <mrow>
              <msub>
                <mi>W</mi>
                <mi>k</mi>
              </msub>
              <mo>⁢</mo>
              <msup>
                <mrow>
                  <mo>{</mo>
                  <mrow>
                    <msub>
                      <mi>R</mi>
                      <mi>k</mi>
                    </msub>
                    <mo>+</mo>
                    <mrow>
                      <mi>c</mi>
                      <mo>⁢</mo>
                      <mstyle>
                        <mspace width="0.3em" height="0.3ex"/>
                      </mstyle>
                      <mo>⁢</mo>
                      <mi>T</mi>
                    </mrow>
                    <mo>-</mo>
                    <mrow>
                      <mo></mo>
                      <mrow>
                        <msub>
                          <mi>P</mi>
                          <mi>k</mi>
                        </msub>
                        <mo>-</mo>
                        <mi>P</mi>
                      </mrow>
                      <mo></mo>
                    </mrow>
                  </mrow>
                  <mo>}</mo>
                </mrow>
                <mn>2</mn>
              </msup>
            </mrow>
          </mrow>
        </mrow>
      </mrow>
    </mtd>
    <mtd>
      <mrow>
        <mi>Expression</mi>
        <mo>⁢</mo>
        <mstyle>
          <mspace width="0.8em" height="0.8ex"/>
        </mstyle>
        <mo>⁢</mo>
        <mn>2</mn>
      </mrow>
    </mtd>
  </mtr>
</mtable>
</math>
</maths>
</p>
<p id="p-0027" num="0026">In the same expression, assume that weight-assigning factors W<sub>k </sub>are equal to 1 all (i.e., W<sub>k</sub>=1, k=1, . . . , n). If, however, quality of the measurements on the distance-ranging results R<sub>k </sub>can be acquired, the weight-assigning factors W<sub>k </sub>may be defined as being positive numbers or 0 as numerical values for indicating the quality of the measurements on the distance-ranging results R<sub>k</sub>. In this case, a function value may be given which will increase for the quality of the measurements. Here, the minimum value is defined as being 0. Moreover, in this case, a limitation may be imposed such that total sum of W<sub>k </sub>up to k=1, . . . , n becomes equal to a constant number (e.g., n).</p>
<p id="p-0028" num="0027">Incidentally, a concrete method for determining the reference error E<sub>0 </sub>is equivalent to the method for solving the function minimization problem. Accordingly, this concrete method has been publicly known, and thus will be omitted.</p>
<p id="p-0029" num="0028">Also, when determining the reference error E<sub>0</sub>, if P<sub>prv </sub>and T<sub>prv </sub>satisfying the following Expression 3 had been acquired in the past attempt, the reference error E<sub>0</sub>=E(P<sub>prv</sub>, T<sub>prv</sub>) may be definable.</p>
<p id="p-0030" num="0029">
<maths id="MATH-US-00002" num="00002">
<math overflow="scroll">
<mtable>
  <mtr>
    <mtd>
      <mrow>
        <mrow>
          <munder>
            <mi>min</mi>
            <mrow>
              <mi>P</mi>
              <mo>,</mo>
              <mi>T</mi>
            </mrow>
          </munder>
          <mo>⁢</mo>
          <mrow>
            <mo>(</mo>
            <mrow>
              <mi>E</mi>
              <mo>⁡</mo>
              <mrow>
                <mo>(</mo>
                <mrow>
                  <mi>P</mi>
                  <mo>,</mo>
                  <mi>T</mi>
                </mrow>
                <mo>)</mo>
              </mrow>
            </mrow>
            <mo>)</mo>
          </mrow>
        </mrow>
        <mo>≈</mo>
        <mrow>
          <mi>E</mi>
          <mo>⁡</mo>
          <mrow>
            <mo>(</mo>
            <mrow>
              <msub>
                <mi>P</mi>
                <mi>prv</mi>
              </msub>
              <mo>,</mo>
              <msub>
                <mi>T</mi>
                <mi>prv</mi>
              </msub>
            </mrow>
            <mo>)</mo>
          </mrow>
        </mrow>
      </mrow>
    </mtd>
    <mtd>
      <mrow>
        <mi>Expression</mi>
        <mo>⁢</mo>
        <mstyle>
          <mspace width="0.8em" height="0.8ex"/>
        </mstyle>
        <mo>⁢</mo>
        <mn>3</mn>
      </mrow>
    </mtd>
  </mtr>
</mtable>
</math>
</maths>
</p>
<p id="p-0031" num="0030">S<b>12</b> is a step of calculating error degradation quantities about the respective distance-ranging results. At the present step, the error degradation quantities ΔE<sub>i </sub>about the respective distance-ranging results R<sub>i </sub>are given by the following Expression 4.
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?>Δ<i>E</i><sub>i</sub><i>=E</i><sub>0</sub><i>−E</i><sub>i0</sub><i>, i=</i>1<i>, . . . , n</i>  Expression 4<?in-line-formulae description="In-line Formulae" end="tail"?>
<br/>
Here, as indicated in the following Expression 5 and Expression 6, E<sub>io </sub>is given as the minimum value of an error function E<sub>i </sub>(P, T) with P and T selected as the variables, or an approximate value of the minimum value.
</p>
<p id="p-0032" num="0031">
<maths id="MATH-US-00003" num="00003">
<math overflow="scroll">
<mtable>
  <mtr>
    <mtd>
      <mrow>
        <mrow>
          <mrow>
            <msub>
              <mi>E</mi>
              <mi>i</mi>
            </msub>
            <mo>⁡</mo>
            <mrow>
              <mo>(</mo>
              <mrow>
                <mi>P</mi>
                <mo>,</mo>
                <mi>T</mi>
              </mrow>
              <mo>)</mo>
            </mrow>
          </mrow>
          <mo>=</mo>
          <mrow>
            <munderover>
              <mo>∑</mo>
              <munder>
                <mrow>
                  <mi>k</mi>
                  <mo>=</mo>
                  <mn>1</mn>
                </mrow>
                <mrow>
                  <mi>k</mi>
                  <mo>≠</mo>
                  <mi>i</mi>
                </mrow>
              </munder>
              <mi>n</mi>
            </munderover>
            <mo>⁢</mo>
            <mrow>
              <msub>
                <mi>W</mi>
                <mi>k</mi>
              </msub>
              <mo>⁢</mo>
              <msup>
                <mrow>
                  <mo>{</mo>
                  <mrow>
                    <msub>
                      <mi>R</mi>
                      <mi>k</mi>
                    </msub>
                    <mo>+</mo>
                    <mrow>
                      <mi>c</mi>
                      <mo>⁢</mo>
                      <mstyle>
                        <mspace width="0.3em" height="0.3ex"/>
                      </mstyle>
                      <mo>⁢</mo>
                      <mi>T</mi>
                    </mrow>
                    <mo>-</mo>
                    <mrow>
                      <mo></mo>
                      <mrow>
                        <msub>
                          <mi>P</mi>
                          <mi>k</mi>
                        </msub>
                        <mo>-</mo>
                        <mi>P</mi>
                      </mrow>
                      <mo></mo>
                    </mrow>
                  </mrow>
                  <mo>}</mo>
                </mrow>
                <mn>2</mn>
              </msup>
            </mrow>
          </mrow>
        </mrow>
        <mo>,</mo>
      </mrow>
    </mtd>
    <mtd>
      <mrow>
        <mi>Expression</mi>
        <mo>⁢</mo>
        <mstyle>
          <mspace width="0.8em" height="0.8ex"/>
        </mstyle>
        <mo>⁢</mo>
        <mn>5</mn>
      </mrow>
    </mtd>
  </mtr>
  <mtr>
    <mtd>
      <mrow>
        <mrow>
          <mi>i</mi>
          <mo>=</mo>
          <mn>1</mn>
        </mrow>
        <mo>,</mo>
        <mi>…</mi>
        <mo>⁢</mo>
        <mstyle>
          <mspace width="0.6em" height="0.6ex"/>
        </mstyle>
        <mo>,</mo>
        <mi>n</mi>
      </mrow>
    </mtd>
    <mtd>
      <mstyle>
        <mspace width="0.3em" height="0.3ex"/>
      </mstyle>
    </mtd>
  </mtr>
  <mtr>
    <mtd>
      <mrow>
        <mrow>
          <mrow>
            <msub>
              <mi>E</mi>
              <mi>i0</mi>
            </msub>
            <mo>=</mo>
            <mrow>
              <munder>
                <mi>min</mi>
                <mrow>
                  <mi>P</mi>
                  <mo>,</mo>
                  <mi>T</mi>
                </mrow>
              </munder>
              <mo>⁢</mo>
              <mrow>
                <mo>(</mo>
                <mrow>
                  <msub>
                    <mi>E</mi>
                    <mi>i</mi>
                  </msub>
                  <mo>⁡</mo>
                  <mrow>
                    <mo>(</mo>
                    <mrow>
                      <mi>P</mi>
                      <mo>,</mo>
                      <mi>T</mi>
                    </mrow>
                    <mo>)</mo>
                  </mrow>
                </mrow>
                <mo>)</mo>
              </mrow>
            </mrow>
          </mrow>
          <mo>,</mo>
          <mrow>
            <mi>i</mi>
            <mo>=</mo>
          </mrow>
        </mrow>
        <mo>⁣</mo>
        <mrow>
          <mn>1</mn>
          <mo>,</mo>
          <mi>…</mi>
          <mo>⁢</mo>
          <mstyle>
            <mspace width="0.6em" height="0.6ex"/>
          </mstyle>
          <mo>,</mo>
          <mi>n</mi>
        </mrow>
      </mrow>
    </mtd>
    <mtd>
      <mrow>
        <mi>Expression</mi>
        <mo>⁢</mo>
        <mstyle>
          <mspace width="0.8em" height="0.8ex"/>
        </mstyle>
        <mo>⁢</mo>
        <mn>6</mn>
      </mrow>
    </mtd>
  </mtr>
</mtable>
</math>
</maths>
</p>
<p id="p-0033" num="0032">Also, for simplifying the calculation, E<sub>io </sub>may be given by Expression 5 and the following Expression 7. Here, P and T yielding the reference error E<sub>0 </sub>are set as being P<sub>0 </sub>and T<sub>0</sub>, respectively.
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>E</i><sub>i0</sub><i>=E</i><sub>i</sub>(<i>P</i><sub>0</sub><i>, T</i><sub>0</sub>) <i>E</i>(<i>P</i><sub>0</sub><i>, T</i><sub>0</sub>)=<i>E</i><sub>0</sub><i>, i=</i>1<i>, . . . , n</i>  Expression 7<?in-line-formulae description="In-line Formulae" end="tail"?>
</p>
<p id="p-0034" num="0033">It can be interpreted that the error degradation quantities ΔE<sub>i </sub>indicate quantities of errors by which the distance-ranging results R<sub>i </sub>influence the reference error E<sub>0</sub>.</p>
<p id="p-0035" num="0034">S<b>13</b> is a step of evaluating the respective distance-ranging results based on the respective error degradation quantities calculated at the preceding step, and updating the weight-assigning factors about the respective distance-ranging results.</p>
<p id="p-0036" num="0035"><figref idref="DRAWINGS">FIG. 3</figref> illustrates an example of the details of carrying-out of the above-described step. In the same drawing, S<b>1311</b> to S<b>1315</b> indicate the details of S<b>13</b> in <figref idref="DRAWINGS">FIG. 2</figref>. These steps make comparisons between a threshold value Th<b>3</b> and the error degradation quantities ΔE<sub>i </sub>for i=1, . . . , n. Then, the steps update, to 0, the weight-assigning factors W<sub>i </sub>about the error degradation quantities ΔE<sub>i </sub>which have exceeded the threshold value Th<b>3</b>.</p>
<p id="p-0037" num="0036">Here, updating the weight-assigning factors W<sub>i </sub>to 0 means to eliminate the distance-ranging results R<sub>i </sub>in the position calculation later. The reason for this elimination is that, based on the error degradation quantities ΔE<sub>i</sub>, the error contained in the distance-ranging results R<sub>i </sub>has been evaluated as being large up to the degree of having exceeded the limit. Incidentally, at the present step, the threshold value Th<b>3</b> may be determined in advance. Otherwise, the threshold value Th<b>3</b> may be determined based on the number n of the distance-ranging results. Also, values of the weight-assigning factors W<sub>i </sub>may be updated such that, for example, the values become functions which will decrease with respect to increases in ΔE<sub>i </sub>(however, its minimum value is made equal to 0).</p>
<p id="p-0038" num="0037">S<b>14</b> is a step of checking the valid distance-ranging-results number. The valid distance-ranging-results number refers to the number of the distance-ranging results which remain intact without being eliminated at the preceding step.</p>
<p id="p-0039" num="0038"><figref idref="DRAWINGS">FIG. 4</figref> illustrates an example of the details of carrying-out of the above-described step. At first, the number of W<sub>i </sub>(i=1, . . . , n) which have turned out to become non-zero at the preceding step, i.e., the valid distance-ranging-results number Nvr, is determined (S<b>1411</b> to S<b>1415</b>). Moreover, a comparison is made between a threshold value Th<b>4</b> determined in advance and the valid distance-ranging-results number Nvr (S<b>1416</b>). Then, if the valid distance-ranging-results number Nvr has been found to be larger than the predetermined value (i.e., Nvr≧Th<b>4</b>), the processing proceeds to the next step S<b>15</b>.</p>
<p id="p-0040" num="0039">Otherwise, the processing may be aborted, judging that the number of the valid distance-ranging results has been not prepared in the necessary number. In this case, the failure of the position calculation is reported to a higher-order function layer which is controlling the present step.</p>
<p id="p-0041" num="0040">S<b>15</b> is a step of calculating the position of the detection-target station based on the respective valid distance-ranging results and the positions of the respective reference stations. At the present step, using the weight-assigning factors W<sub>k </sub>(k=1, . . . , n) updated at S<b>13</b>, P and T are determined which will yield the minimum value of the error function E (P, T) indicated in Expression 2. Then, the determined P is outputted as calculation result of the position of the detection-target station.</p>
<heading id="h-0007" level="1">2. EMBODIMENT 2</heading>
<p id="p-0042" num="0041">Next, quoting the notations in <figref idref="DRAWINGS">FIG. 1</figref> and Expression 1 and referring to <figref idref="DRAWINGS">FIG. 5</figref>, the explanation will be given below concerning a second embodiment of the position calculation method according to the present invention.</p>
<p id="p-0043" num="0042">In <figref idref="DRAWINGS">FIG. 5</figref>, respective steps from S<b>21</b> to S<b>24</b> are the same as the respective steps from S<b>11</b> to S<b>14</b> in <figref idref="DRAWINGS">FIG. 2</figref>, respectively. The details of these steps have been already explained in the first embodiment, and thus will be omitted.</p>
<p id="p-0044" num="0043">S<b>25</b> is a step of calculating the position of the detection-target station based on the respective valid distance-ranging results and the positions of the respective reference stations. At the present step, using the weight-assigning factors W<sub>k </sub>(k=1, . . . , n) updated at S<b>23</b>, P and T are determined which will yield the minimum value of the error function E (P, T) indicated in Expression 2. Then, the processing proceeds to the next step.</p>
<p id="p-0045" num="0044">S<b>26</b> is a step of calculating Dilution of Precision (DOP) based on the position P of the detection-target station determined at the preceding step and the positions of the respective reference stations. In the calculation of DOP, however, the positions P<sub>k </sub>(k=1, 2, . . . , n) of the reference stations will be eliminated for which the weight-assigning factors W<sub>k </sub>(k=1, 2, . . . , n) updated at S<b>23</b> become equal to 0. Incidentally, as DOP, HDOP (Horizontal Dilution of Precision) will be calculated if P is a point on a two-dimensional space, and PDOP (Position Dilution of Precision) will be calculated if P is a point on a three-dimensional space. The calculation method for HDOP and PDOP has been publicly known, and thus will be omitted.</p>
<p id="p-0046" num="0045">S<b>26</b> is a step of checking the Dilution of Precision (DOP) determined at the preceding step. At the present step, a comparison is made between a threshold value Th<b>5</b> determined in advance and the Dilution of Precision (DOP) determined at the preceding step. Then, if the Dilution of Precision (DOP) has been found to be smaller than the predetermined value (i.e., DOP≦Th<b>5</b>), it is judged that the DOP has passed the above-described checking. Accordingly, the determined P is outputted as calculation result of the position of the detection-target station.</p>
<p id="p-0047" num="0046">Otherwise, the processing may be aborted, judging that the DOP has failed in the above-described checking. In this case, the failure of the position calculation is reported to a higher-order function layer which is controlling the present step.</p>
<p id="p-0048" num="0047"><figref idref="DRAWINGS">FIG. 6</figref> is a configuration diagram of the position detection system relating to the present invention. In the same drawing, respective reference stations receive radio signals from a detection-target station. Then, distance-ranging units of the respective reference stations measure physical quantities for indicating distances up to the detection-target station. Here, the physical quantities for indicating the distances include RSS (Received Signal Strength) of a radio signal from the detection-target station, or TDOA (Time Difference of Arrival) of the radio signal from the detection-target station.</p>
<p id="p-0049" num="0048">An input unit <b>611</b> includes a configuration component such as, e.g., NIC (Network Interface Card). The input unit <b>611</b> receives, via a network, the above-described respective physical quantities for indicating the distances from the respective reference stations. A processing unit <b>612</b> includes a configuration component such as, e.g., a CPU (Central Processing Unit) for executing programs. The processing unit <b>612</b> acquires the above-described measured physical quantities from the input unit <b>611</b>, then making the conversion to the respective distances R<sub>i </sub>(i=1, 2, . . . , n) as required. In addition thereto, the processing unit <b>612</b> acquires the positions P<sub>i </sub>(i=1, 2, . . . , n) of the reference stations from a memory unit <b>613</b> so as to execute the position calculation program illustrated in <figref idref="DRAWINGS">FIG. 2</figref> or <figref idref="DRAWINGS">FIG. 5</figref>, then outputting the position calculation result to the memory unit <b>613</b>. The memory unit <b>613</b>, which includes a configuration component such as, e.g., a hard disc or memory, stores therein the positions P<sub>i </sub>(i=1, 2, . . . , n) of the reference stations and the position calculation result P. An output unit <b>614</b> includes a configuration component, such as, e.g., NIC (Network Interface Card) or an external output port to a display or printer. The output unit <b>614</b> outputs the position calculation result stored in the memory unit <b>613</b>.</p>
<p id="p-0050" num="0049"><figref idref="DRAWINGS">FIG. 7</figref> is another configuration diagram of the position detection system relating to the present invention. In the same drawing, a detection-target station receives radio signals from respective reference stations, respectively. Then, a distance-ranging unit of the detection-target station measures physical quantities for indicating distances up to the respective reference stations. Here, the physical quantities for indicating the distances include RSS (Received Signal Strength) of a radio signal from a reference station, or TDOA (Time Difference of Arrival) of the radio signal from the reference station.</p>
<p id="p-0051" num="0050">An input unit <b>711</b> includes a configuration component such as, e.g., a serial communications module. The input unit <b>711</b> receives the above-described respective physical quantities for indicating the distances from the distance-ranging unit. A processing unit <b>712</b> includes a configuration component such as, e.g., a CPU (Central Processing Unit) for executing programs. The processing unit <b>712</b> acquires the above-described physical quantities from the input unit <b>711</b>, then making the conversion to the respective distances R<sub>i </sub>(i=1, 2, . . . , n) as required. In addition thereto, the processing unit <b>712</b> acquires the positions P<sub>i </sub>(i=1, 2, . . . , n) of the reference stations from a memory unit <b>713</b> so as to execute the position calculation program illustrated in <figref idref="DRAWINGS">FIG. 2</figref> or <figref idref="DRAWINGS">FIG. 5</figref>, then outputting the position calculation result to the memory unit <b>713</b>. The memory unit <b>713</b>, which includes a configuration component such as, e.g., a hard disc or memory, stores therein the positions P<sub>i </sub>(i=1, 2, . . . , n) of the reference stations and the position calculation result P. An output unit <b>714</b> includes a configuration component, such as, e.g., NIC (Network Interface Card) or an external output port to a display or printer. The output unit <b>714</b> outputs the position calculation result stored in the memory unit <b>713</b>.</p>
<p id="p-0052" num="0051">The position calculation method according to the present invention, in a multipath environment in particular, is effective in reducing an error of position calculation of a radio device based on distance-ranging results using electromagnetic waves. Consequently, the position calculation method, in an indoors environment, serves satisfactorily to enhance a precision of position detection of a radio terminal.</p>
<p id="p-0053" num="0052">It should be further understood by those skilled in the art that although the foregoing description has been made on embodiments of the invention, the invention is not limited thereto and various changes and modifications may be made without departing from the spirit of the invention and the scope of the appended claims.</p>
<?DETDESC description="Detailed Description" end="tail"?>
</description>
<us-math idrefs="MATH-US-00001" nb-file="US07299058-20071120-M00001.NB">
<img id="EMI-M00001" he="14.82mm" wi="76.20mm" file="US07299058-20071120-M00001.TIF" alt="embedded image " img-content="math" img-format="tif"/>
</us-math>
<us-math idrefs="MATH-US-00002" nb-file="US07299058-20071120-M00002.NB">
<img id="EMI-M00002" he="5.33mm" wi="76.20mm" file="US07299058-20071120-M00002.TIF" alt="embedded image " img-content="math" img-format="tif"/>
</us-math>
<us-math idrefs="MATH-US-00003" nb-file="US07299058-20071120-M00003.NB">
<img id="EMI-M00003" he="22.27mm" wi="76.20mm" file="US07299058-20071120-M00003.TIF" alt="embedded image " img-content="math" img-format="tif"/>
</us-math>
<us-math idrefs="MATH-US-00004 MATH-US-00004-2 MATH-US-00004-3" nb-file="US07299058-20071120-M00004.NB">
<img id="EMI-M00004" he="26.50mm" wi="76.20mm" file="US07299058-20071120-M00004.TIF" alt="embedded image " img-content="math" img-format="tif"/>
</us-math>
<us-math idrefs="MATH-US-00005 MATH-US-00005-2 MATH-US-00005-3" nb-file="US07299058-20071120-M00005.NB">
<img id="EMI-M00005" he="24.38mm" wi="76.20mm" file="US07299058-20071120-M00005.TIF" alt="embedded image " img-content="math" img-format="tif"/>
</us-math>
<us-claim-statement>The invention claimed is:</us-claim-statement>
<claims id="claims">
<claim id="CLM-00001" num="00001">
<claim-text>1. A position calculation method, comprising the steps of:
<claim-text>receiving radio signals between a plurality of respective reference stations and a detection-target station by either said plurality of reference stations or said detection-target station, said plurality of reference stations being radio devices whose positions have been already known, said detection-target station being a radio device whose position has been unknown,</claim-text>
<claim-text>measuring physical quantities about distances thereby to measure absolute distances or relative distances between said plurality of respective reference stations and said detection-target station, respectively, and</claim-text>
<claim-text>calculating position of said detection-target station based on distance-ranging results and positions of said respective reference stations, said distance-ranging results being said respective distances measured,</claim-text>
<claim-text>wherein said calculating step comprises the steps of:</claim-text>
<claim-text>calculating respective error degradation quantities ΔEi from said respective distance-ranging results Ri and said positions Pi of said respective reference stations, said respective error degradation quantities being quantities of respective errors by which said respective distance-ranging results influence minimum value of square error function to solve the position of said detection-target station,</claim-text>
<claim-text>evaluating said respective distance-ranging results based on said respective error degradation quantities, and updating weight-assigning factors Wi about said respective distance-ranging results, and</claim-text>
<claim-text>calculating said position P of said detection-target station based on said respective distance-ranging results, said positions of said respective reference stations, and said respective weight-assigning factors updated.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00002" num="00002">
<claim-text>2. The position calculation method according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein said error degradation quantities ΔE<sub>i </sub>are defined using
<claim-text>
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>ΔE</i><sub>i</sub><i>=E</i><sub>0</sub><i>−E</i><sub>i0</sub><i>, i=</i>1, . . . , n<?in-line-formulae description="In-line Formulae" end="tail"?>
</claim-text>
</claim-text>
<claim-text>where Eo is the minimum value of said square error function using all measurements, n is a number of measurements, and Eio is a minimum value of square error function E not including distance-ranging result R.</claim-text>
</claim>
<claim id="CLM-00003" num="00003">
<claim-text>3. The position calculation method according to <claim-ref idref="CLM-00002">claim 2</claim-ref>, wherein said error degradation quantities ΔE<sub>i </sub>are determined using variable values P and T acquired using</claim-text>
<claim-text>
<maths id="MATH-US-00004" num="00004">
<math overflow="scroll">
  <mrow>
    <mrow>
      <msub>
        <mi>E</mi>
        <mn>0</mn>
      </msub>
      <mo>=</mo>
      <mrow>
        <munder>
          <mi>min</mi>
          <mrow>
            <mi>P</mi>
            <mo>,</mo>
            <mi>T</mi>
          </mrow>
        </munder>
        <mo>⁢</mo>
        <mrow>
          <mo>(</mo>
          <mrow>
            <mi>E</mi>
            <mo>⁡</mo>
            <mrow>
              <mo>(</mo>
              <mrow>
                <mi>P</mi>
                <mo>,</mo>
                <mi>T</mi>
              </mrow>
              <mo>)</mo>
            </mrow>
          </mrow>
          <mo>)</mo>
        </mrow>
      </mrow>
    </mrow>
    <mo>,</mo>
    <mrow>
      <mrow>
        <mi>E</mi>
        <mo>⁡</mo>
        <mrow>
          <mo>(</mo>
          <mrow>
            <mi>P</mi>
            <mo>,</mo>
            <mi>T</mi>
          </mrow>
          <mo>)</mo>
        </mrow>
      </mrow>
      <mo>=</mo>
      <mrow>
        <munderover>
          <mo>∑</mo>
          <mrow>
            <mi>k</mi>
            <mo>=</mo>
            <mn>1</mn>
          </mrow>
          <mi>n</mi>
        </munderover>
        <mo>⁢</mo>
        <mrow>
          <msub>
            <mi>W</mi>
            <mi>k</mi>
          </msub>
          <mo>⁢</mo>
          <msup>
            <mrow>
              <mo>{</mo>
              <mrow>
                <msub>
                  <mi>R</mi>
                  <mi>k</mi>
                </msub>
                <mo>+</mo>
                <mrow>
                  <mi>c</mi>
                  <mo>⁢</mo>
                  <mstyle>
                    <mspace width="0.3em" height="0.3ex"/>
                  </mstyle>
                  <mo>⁢</mo>
                  <mi>T</mi>
                </mrow>
                <mo>-</mo>
                <mrow>
                  <mo></mo>
                  <mrow>
                    <msub>
                      <mi>P</mi>
                      <mi>k</mi>
                    </msub>
                    <mo>-</mo>
                    <mi>P</mi>
                  </mrow>
                  <mo></mo>
                </mrow>
              </mrow>
              <mo>}</mo>
            </mrow>
            <mn>2</mn>
          </msup>
        </mrow>
      </mrow>
    </mrow>
  </mrow>
</math>
</maths>
<maths id="MATH-US-00004-2" num="00004.2">
<math overflow="scroll">
  <mrow>
    <mrow>
      <mrow>
        <msub>
          <mi>E</mi>
          <mi>i</mi>
        </msub>
        <mo>⁡</mo>
        <mrow>
          <mo>(</mo>
          <mrow>
            <mi>P</mi>
            <mo>,</mo>
            <mi>T</mi>
          </mrow>
          <mo>)</mo>
        </mrow>
      </mrow>
      <mo>=</mo>
      <mrow>
        <munderover>
          <mo>∑</mo>
          <munder>
            <mrow>
              <mi>k</mi>
              <mo>=</mo>
              <mn>1</mn>
            </mrow>
            <mrow>
              <mi>k</mi>
              <mo>≠</mo>
              <mi>i</mi>
            </mrow>
          </munder>
          <mi>n</mi>
        </munderover>
        <mo>⁢</mo>
        <mrow>
          <msub>
            <mi>W</mi>
            <mi>k</mi>
          </msub>
          <mo>⁢</mo>
          <msup>
            <mrow>
              <mo>{</mo>
              <mrow>
                <msub>
                  <mi>R</mi>
                  <mi>k</mi>
                </msub>
                <mo>+</mo>
                <mrow>
                  <mi>c</mi>
                  <mo>⁢</mo>
                  <mstyle>
                    <mspace width="0.3em" height="0.3ex"/>
                  </mstyle>
                  <mo>⁢</mo>
                  <mi>T</mi>
                </mrow>
                <mo>-</mo>
                <mrow>
                  <mo></mo>
                  <mrow>
                    <msub>
                      <mi>P</mi>
                      <mi>k</mi>
                    </msub>
                    <mo>-</mo>
                    <mi>P</mi>
                  </mrow>
                  <mo></mo>
                </mrow>
              </mrow>
              <mo>}</mo>
            </mrow>
            <mn>2</mn>
          </msup>
        </mrow>
      </mrow>
    </mrow>
    <mo>,</mo>
    <mrow>
      <mi>i</mi>
      <mo>=</mo>
      <mn>1</mn>
    </mrow>
    <mo>,</mo>
    <mi>…</mi>
    <mo>⁢</mo>
    <mstyle>
      <mspace width="0.6em" height="0.6ex"/>
    </mstyle>
    <mo>,</mo>
    <mi>n</mi>
  </mrow>
</math>
</maths>
<maths id="MATH-US-00004-3" num="00004.3">
<math overflow="scroll">
  <mrow>
    <mrow>
      <msub>
        <mi>E</mi>
        <mi>i0</mi>
      </msub>
      <mo>=</mo>
      <mrow>
        <munder>
          <mi>min</mi>
          <mrow>
            <mi>P</mi>
            <mo>,</mo>
            <mi>T</mi>
          </mrow>
        </munder>
        <mo>⁢</mo>
        <mrow>
          <mo>(</mo>
          <mrow>
            <msub>
              <mi>E</mi>
              <mi>i</mi>
            </msub>
            <mo>⁡</mo>
            <mrow>
              <mo>(</mo>
              <mrow>
                <mi>P</mi>
                <mo>,</mo>
                <mi>T</mi>
              </mrow>
              <mo>)</mo>
            </mrow>
          </mrow>
          <mo>)</mo>
        </mrow>
      </mrow>
    </mrow>
    <mo>,</mo>
    <mrow>
      <mi>i</mi>
      <mo>=</mo>
      <mn>1</mn>
    </mrow>
    <mo>,</mo>
    <mi>…</mi>
    <mo>⁢</mo>
    <mstyle>
      <mspace width="0.6em" height="0.6ex"/>
    </mstyle>
    <mo>,</mo>
    <mi>n</mi>
  </mrow>
</math>
</maths>
</claim-text>
<claim-text>where P is a position, T is offset of a clock selected as the reference, W<sub>k </sub>are weight-assigning factors, c is a speed of the radio waves, and R<sub>k </sub>are distance-ranging results.</claim-text>
</claim>
<claim id="CLM-00004" num="00004">
<claim-text>4. The position calculation method according to <claim-ref idref="CLM-00002">claim 2</claim-ref>, wherein said error degradation quantities ΔE<sub>i </sub>are determined using variable values P and T acquired using</claim-text>
<claim-text>
<maths id="MATH-US-00005" num="00005">
<math overflow="scroll">
  <mrow>
    <mrow>
      <msub>
        <mi>E</mi>
        <mn>0</mn>
      </msub>
      <mo>=</mo>
      <mrow>
        <munder>
          <mi>min</mi>
          <mrow>
            <mi>P</mi>
            <mo>,</mo>
            <mi>T</mi>
          </mrow>
        </munder>
        <mo>⁢</mo>
        <mrow>
          <mo>(</mo>
          <mrow>
            <mi>E</mi>
            <mo>⁡</mo>
            <mrow>
              <mo>(</mo>
              <mrow>
                <mi>P</mi>
                <mo>,</mo>
                <mi>T</mi>
              </mrow>
              <mo>)</mo>
            </mrow>
          </mrow>
          <mo>)</mo>
        </mrow>
      </mrow>
    </mrow>
    <mo>,</mo>
    <mrow>
      <mrow>
        <mi>E</mi>
        <mo>⁡</mo>
        <mrow>
          <mo>(</mo>
          <mrow>
            <mi>P</mi>
            <mo>,</mo>
            <mi>T</mi>
          </mrow>
          <mo>)</mo>
        </mrow>
      </mrow>
      <mo>=</mo>
      <mrow>
        <munderover>
          <mo>∑</mo>
          <mrow>
            <mi>k</mi>
            <mo>=</mo>
            <mn>1</mn>
          </mrow>
          <mi>n</mi>
        </munderover>
        <mo>⁢</mo>
        <mrow>
          <msub>
            <mi>W</mi>
            <mi>k</mi>
          </msub>
          <mo>⁢</mo>
          <msup>
            <mrow>
              <mo>{</mo>
              <mrow>
                <msub>
                  <mi>R</mi>
                  <mi>k</mi>
                </msub>
                <mo>+</mo>
                <mrow>
                  <mi>c</mi>
                  <mo>⁢</mo>
                  <mstyle>
                    <mspace width="0.3em" height="0.3ex"/>
                  </mstyle>
                  <mo>⁢</mo>
                  <mi>T</mi>
                </mrow>
                <mo>-</mo>
                <mrow>
                  <mo></mo>
                  <mrow>
                    <msub>
                      <mi>P</mi>
                      <mi>k</mi>
                    </msub>
                    <mo>-</mo>
                    <mi>P</mi>
                  </mrow>
                  <mo></mo>
                </mrow>
              </mrow>
              <mo>}</mo>
            </mrow>
            <mn>2</mn>
          </msup>
        </mrow>
      </mrow>
    </mrow>
  </mrow>
</math>
</maths>
<maths id="MATH-US-00005-2" num="00005.2">
<math overflow="scroll">
  <mrow>
    <mrow>
      <mrow>
        <msub>
          <mi>E</mi>
          <mi>i</mi>
        </msub>
        <mo>⁡</mo>
        <mrow>
          <mo>(</mo>
          <mrow>
            <mi>P</mi>
            <mo>,</mo>
            <mi>T</mi>
          </mrow>
          <mo>)</mo>
        </mrow>
      </mrow>
      <mo>=</mo>
      <mrow>
        <munderover>
          <mo>∑</mo>
          <munder>
            <mrow>
              <mi>k</mi>
              <mo>=</mo>
              <mn>1</mn>
            </mrow>
            <mrow>
              <mi>k</mi>
              <mo>≠</mo>
              <mi>i</mi>
            </mrow>
          </munder>
          <mi>n</mi>
        </munderover>
        <mo>⁢</mo>
        <mrow>
          <msub>
            <mi>W</mi>
            <mi>k</mi>
          </msub>
          <mo>⁢</mo>
          <msup>
            <mrow>
              <mo>{</mo>
              <mrow>
                <msub>
                  <mi>R</mi>
                  <mi>k</mi>
                </msub>
                <mo>+</mo>
                <mrow>
                  <mi>c</mi>
                  <mo>⁢</mo>
                  <mstyle>
                    <mspace width="0.3em" height="0.3ex"/>
                  </mstyle>
                  <mo>⁢</mo>
                  <mi>T</mi>
                </mrow>
                <mo>-</mo>
                <mrow>
                  <mo></mo>
                  <mrow>
                    <msub>
                      <mi>P</mi>
                      <mi>k</mi>
                    </msub>
                    <mo>-</mo>
                    <mi>P</mi>
                  </mrow>
                  <mo></mo>
                </mrow>
              </mrow>
              <mo>}</mo>
            </mrow>
            <mn>2</mn>
          </msup>
        </mrow>
      </mrow>
    </mrow>
    <mo>,</mo>
    <mrow>
      <mi>i</mi>
      <mo>=</mo>
      <mn>1</mn>
    </mrow>
    <mo>,</mo>
    <mi>…</mi>
    <mo>⁢</mo>
    <mstyle>
      <mspace width="0.6em" height="0.6ex"/>
    </mstyle>
    <mo>,</mo>
    <mi>n</mi>
  </mrow>
</math>
</maths>
<maths id="MATH-US-00005-3" num="00005.3">
<math overflow="scroll">
  <mrow>
    <mrow>
      <msub>
        <mi>E</mi>
        <mi>i0</mi>
      </msub>
      <mo>=</mo>
      <mrow>
        <msub>
          <mi>E</mi>
          <mi>i</mi>
        </msub>
        <mo>⁡</mo>
        <mrow>
          <mo>(</mo>
          <mrow>
            <msub>
              <mi>P</mi>
              <mn>0</mn>
            </msub>
            <mo>,</mo>
            <msub>
              <mi>T</mi>
              <mn>0</mn>
            </msub>
          </mrow>
          <mo>)</mo>
        </mrow>
      </mrow>
    </mrow>
    <mo>,</mo>
    <mrow>
      <mrow>
        <mi>E</mi>
        <mo>⁡</mo>
        <mrow>
          <mo>(</mo>
          <mrow>
            <msub>
              <mi>P</mi>
              <mn>0</mn>
            </msub>
            <mo>,</mo>
            <msub>
              <mi>T</mi>
              <mn>0</mn>
            </msub>
          </mrow>
          <mo>)</mo>
        </mrow>
      </mrow>
      <mo>=</mo>
      <msub>
        <mi>E</mi>
        <mn>0</mn>
      </msub>
    </mrow>
    <mo>,</mo>
    <mrow>
      <mi>i</mi>
      <mo>=</mo>
      <mn>1</mn>
    </mrow>
    <mo>,</mo>
    <mi>…</mi>
    <mo>⁢</mo>
    <mstyle>
      <mspace width="0.6em" height="0.6ex"/>
    </mstyle>
    <mo>,</mo>
    <mi>n</mi>
  </mrow>
</math>
</maths>
</claim-text>
<claim-text>where P is a position, T is offset of a clock selected as the reference, Po and To are P and T providing Eo, W<sub>k </sub>are weight-assigning factors, c is a speed of the radio waves, and R<sub>k </sub>are distance-ranging results.</claim-text>
</claim>
<claim id="CLM-00005" num="00005">
<claim-text>5. The position calculation method according to <claim-ref idref="CLM-00003">claim 3</claim-ref>, wherein said step of updating said weight-assigning factors is a step of updating values of said weight-assigning factors based on comparisons between said respective error degradation quantities and a threshold value determined in advance.</claim-text>
</claim>
<claim id="CLM-00006" num="00006">
<claim-text>6. The position calculation method according to <claim-ref idref="CLM-00005">claim 5</claim-ref>, wherein said step of updating said weight-assigning factors about said distance-ranging results is a step of updating said values of said weight-assigning factors to zero if said error degradation quantities about said distance-ranging results have exceeded said threshold value determined in advance.</claim-text>
</claim>
<claim id="CLM-00007" num="00007">
<claim-text>7. The position calculation method according to <claim-ref idref="CLM-00006">claim 6</claim-ref>, wherein, before executing said step of calculating said position of said detection-target station, a step of checking the number of valid distance-ranging results is executed in order to judge possibility or impossibility of said execution of said position calculating step.</claim-text>
</claim>
<claim id="CLM-00008" num="00008">
<claim-text>8. The position calculation method according to <claim-ref idref="CLM-00007">claim 7</claim-ref>, wherein said checking of the number of said valid distance-ranging results is a checking based on a comparison between the number of said weight-assigning factors which become non-zero with respect to said respective distance-ranging results and a threshold value determined in advance.</claim-text>
</claim>
<claim id="CLM-00009" num="00009">
<claim-text>9. The position calculation method according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, further comprising a step of calculating Dilution of Precision after having executed said step of calculating said position of said detection-target station, and judging success or failure of said position calculation of said detection-target station in accordance with a calculation value of said Dilution of Precision.</claim-text>
</claim>
<claim id="CLM-00010" num="00010">
<claim-text>10. A computer-readable storage medium for storing a position calculation program for implementing a position calculation method in a position calculation apparatus,
<claim-text>said position calculation apparatus, comprising:</claim-text>
<claim-text>an input unit for inputting physical quantities about distances,</claim-text>
<claim-text>a processing unit, and</claim-text>
<claim-text>an output unit, said physical quantities about said distances being measured such that radio signals between a plurality of respective reference stations and a detection-target station are received by either said plurality of reference stations or said detection-target station, said plurality of reference stations being radio devices whose positions have been already known, said detection-target station being a radio device whose position has been unknown,</claim-text>
<claim-text>said position calculation method being executed by said processing unit, comprising the steps of:</claim-text>
<claim-text>calculating, from said physical quantities about said distances, absolute distances or relative distances between said plurality of respective reference stations and said detection-target station, respectively, and</claim-text>
<claim-text>calculating position of said detection-target station based on distance-ranging results and positions of said respective reference stations, said distance-ranging results being said respective distances measured,</claim-text>
<claim-text>wherein the calculating step includes the steps of:</claim-text>
<claim-text>calculating respective error degradation quantities from said respective distance-ranging results and said positions of said respective reference stations, said respective error degradation quantities being quantities of respective errors by which said respective distance-ranging results influence least square error,</claim-text>
<claim-text>evaluating said respective distance-ranging results based on said respective error degradation quantities, and updating weight-assigning factors about said respective distance-ranging results, and</claim-text>
<claim-text>calculating said position of said detection-target station based on said respective distance-ranging results, said positions of said respective reference stations, and said respective weight-assigning factors updated.</claim-text>
</claim-text>
</claim>
</claims>
</us-patent-grant>
