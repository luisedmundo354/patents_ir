<us-patent-grant lang="EN" dtd-version="v4.2 2006-08-23" file="US07298192-20071120.XML" status="PRODUCTION" id="us-patent-grant" country="US" date-produced="20071106" date-publ="20071120">
<us-bibliographic-data-grant>
<publication-reference>
<document-id>
<country>US</country>
<doc-number>07298192</doc-number>
<kind>B2</kind>
<date>20071120</date>
</document-id>
</publication-reference>
<application-reference appl-type="utility">
<document-id>
<country>US</country>
<doc-number>11510721</doc-number>
<date>20060828</date>
</document-id>
</application-reference>
<us-application-series-code>11</us-application-series-code>
<priority-claims>
<priority-claim sequence="01" kind="national">
<country>JP</country>
<doc-number>2004-094364</doc-number>
<date>20040329</date>
</priority-claim>
</priority-claims>
<us-term-of-grant>
<disclaimer>
<text>This patent is subject to a terminal disclaimer.</text>
</disclaimer>
</us-term-of-grant>
<classifications-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>H</section>
<class>03</class>
<subclass>L</subclass>
<main-group>7</main-group>
<subgroup>06</subgroup>
<symbol-position>F</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20071120</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
</classifications-ipcr>
<classification-national>
<country>US</country>
<main-classification>327158</main-classification>
<further-classification>327159</further-classification>
<further-classification>327161</further-classification>
<further-classification>327270</further-classification>
</classification-national>
<invention-title id="d0e69">Digital DLL device, digital DLL control method, and digital DLL control program</invention-title>
<references-cited>
<citation>
<patcit num="00001">
<document-id>
<country>US</country>
<doc-number>5801559</doc-number>
<kind>A</kind>
<name>Sawai et al.</name>
<date>19980900</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00002">
<document-id>
<country>US</country>
<doc-number>5939913</doc-number>
<kind>A</kind>
<name>Tomita</name>
<date>19990800</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00003">
<document-id>
<country>US</country>
<doc-number>6346837</doc-number>
<kind>B1</kind>
<name>Shibayama</name>
<date>20020200</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00004">
<document-id>
<country>US</country>
<doc-number>6373307</doc-number>
<kind>B1</kind>
<name>Takai</name>
<date>20020400</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00005">
<document-id>
<country>US</country>
<doc-number>6441657</doc-number>
<kind>B1</kind>
<name>Saeki</name>
<date>20020800</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00006">
<document-id>
<country>US</country>
<doc-number>6492851</doc-number>
<kind>B2</kind>
<name>Watarai</name>
<date>20021200</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00007">
<document-id>
<country>US</country>
<doc-number>6573776</doc-number>
<kind>B2</kind>
<name>Miyamoto</name>
<date>20030600</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00008">
<document-id>
<country>US</country>
<doc-number>7116146</doc-number>
<kind>B2</kind>
<name>Tokuhiro</name>
<date>20061000</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>327158</main-classification></classification-national>
</citation>
<citation>
<patcit num="00009">
<document-id>
<country>JP</country>
<doc-number>11-86545</doc-number>
<date>19990300</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00010">
<document-id>
<country>JP</country>
<doc-number>11-88153</doc-number>
<date>19990300</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00011">
<document-id>
<country>JP</country>
<doc-number>2001-285266</doc-number>
<date>20011000</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00012">
<document-id>
<country>JP</country>
<doc-number>2003-133948</doc-number>
<date>20030500</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
</references-cited>
<number-of-claims>2</number-of-claims>
<us-exemplary-claim>1</us-exemplary-claim>
<us-field-of-classification-search>
<classification-national>
<country>US</country>
<main-classification>None</main-classification>
</classification-national>
</us-field-of-classification-search>
<figures>
<number-of-drawing-sheets>4</number-of-drawing-sheets>
<number-of-figures>7</number-of-figures>
</figures>
<us-related-documents>
<division>
<relation>
<parent-doc>
<document-id>
<country>US</country>
<doc-number>10921216</doc-number>
<kind>00</kind>
<date>20040819</date>
</document-id>
<parent-grant-document>
<document-id>
<country>US</country>
<doc-number>7116146</doc-number>
<kind>A </kind>
</document-id>
</parent-grant-document>
</parent-doc>
<child-doc>
<document-id>
<country>US</country>
<doc-number>11510721</doc-number>
</document-id>
</child-doc>
</relation>
</division>
<related-publication>
<document-id>
<country>US</country>
<doc-number>20060290395</doc-number>
<kind>A1</kind>
<date>20061228</date>
</document-id>
</related-publication>
</us-related-documents>
<parties>
<applicants>
<applicant sequence="001" app-type="applicant-inventor" designation="us-only">
<addressbook>
<last-name>Tokuhiro</last-name>
<first-name>Noriyuki</first-name>
<address>
<city>Kawasaki</city>
<country>JP</country>
</address>
</addressbook>
<nationality>
<country>JP</country>
</nationality>
<residence>
<country>JP</country>
</residence>
</applicant>
</applicants>
<agents>
<agent sequence="01" rep-type="attorney">
<addressbook>
<orgname>Arent Fox LLP</orgname>
<address>
<country>unknown</country>
</address>
</addressbook>
</agent>
</agents>
</parties>
<assignees>
<assignee>
<addressbook>
<orgname>Fujitsu Limited</orgname>
<role>03</role>
<address>
<city>Kawasaki</city>
<country>JP</country>
</address>
</addressbook>
</assignee>
</assignees>
<examiners>
<primary-examiner>
<last-name>Wells</last-name>
<first-name>Kenneth B.</first-name>
<department>2816</department>
</primary-examiner>
<assistant-examiner>
<last-name>Luu</last-name>
<first-name>An T.</first-name>
</assistant-examiner>
</examiners>
</us-bibliographic-data-grant>
<abstract id="abstract">
<p id="p-0001" num="0000">A digital DLL device is provided which can reduce an error with respect to a target delay amount. The device provides a delay to an input clock signal so as to equally divide a clock cycle T thereof into N parts, and includes first variable delay sections and second variable delay sections, each of which is formed of an arbitrary number of unit delay buffers connected in series with one another. A phase comparison section makes a compare between the phase of the input clock signal and the phase of an output signal which is the input signal having been delayed while passing through all the first and second variable delay sections, and outputs a result of the comparison. A delay control section calculates a total number of unit delay buffers S required based on the phase comparison result, sets a quotient Q of S divided by N to be the number of unit delay buffers for each of the first variable delay sections, and allocates a remainder R of S divided by N to the second variable delay sections, respectively.</p>
</abstract>
<drawings id="DRAWINGS">
<figure id="Fig-EMI-D00000" num="00000">
<img id="EMI-D00000" he="181.44mm" wi="170.01mm" file="US07298192-20071120-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00001" num="00001">
<img id="EMI-D00001" he="246.21mm" wi="173.06mm" file="US07298192-20071120-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00002" num="00002">
<img id="EMI-D00002" he="229.53mm" wi="171.87mm" file="US07298192-20071120-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00003" num="00003">
<img id="EMI-D00003" he="252.05mm" wi="174.67mm" file="US07298192-20071120-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00004" num="00004">
<img id="EMI-D00004" he="170.01mm" wi="171.53mm" file="US07298192-20071120-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
</drawings>
<description id="description">
<?RELAPP description="Other Patent Relations" end="lead"?>
<p id="p-0002" num="0001">This is a Divisional of application Ser. No. 10/921,216, filed on Aug. 19, 2004, now U.S. Pat. No. 7,116,146, which is based upon and claims the benefit of priority from the prior Japanese Patent Application No. 2004-094364. The entire contents of these prior applications is hereby incorporated by reference.</p>
<?RELAPP description="Other Patent Relations" end="tail"?>
<?BRFSUM description="Brief Summary" end="lead"?>
<heading id="h-0001" level="1">BACKGROUND OF THE INVENTION</heading>
<p id="p-0003" num="0002">1. Field of the Invention</p>
<p id="p-0004" num="0003">The present invention relates to a digital DLL device, a digital DLL control method and a digital DLL control program capable of providing a delay to an input clock signal so as to equally divide the clock cycle thereof.</p>
<p id="p-0005" num="0004">2. Description of the Related Art</p>
<p id="p-0006" num="0005">First of all, as an example of a DLL device, reference will be made to a memory interface used for DDR (Double Data Rate) memories, DDR2 memories, or the like. <figref idref="DRAWINGS">FIG. 5</figref> is a timing chart showing one example of the timing of a DQS (read data strobe) signal and a DQ (read data) signal in the DDR memory interface. The DQS signal has a clock cycle T. The DQS signal and the DQ signal passed from a DDR memory to an ASIC are aligned with each other in phase at points of changes, and the DQ signal changes at an interval of T/2. Accordingly, it is necessary to provide the DQS signal with a delay of T/4 so as to accurately read data of the DQ signal. Thus, a DLL (Delay Locked Loop) device is used to obtain such a delay as to equally divide the arbitrary clock cycle T in an exact manner.</p>
<p id="p-0007" num="0006">Next, reference will be made to the configuration of a known DLL device. Here, the DLL device will be described which is able to obtain a delay of a multiple of T/N when assuming that the clock cycle is T and the number by which the clock cycle is equally divided is N. By way of example, a DLL device with the number N being 4 as used with the above-mentioned DDR memory interface will be described.</p>
<p id="p-0008" num="0007"><figref idref="DRAWINGS">FIG. 6</figref> is a block diagram showing one example of the configuration of such a known DLL device. This DLL device is provided with four serially connected variable delay sections <b>1</b><i>a</i>, <b>1</b><i>b</i>, <b>1</b><i>c</i>, <b>1</b><i>d</i>, a phase comparison section <b>2</b> and a delay control section <b>3</b>. The variable delay sections <b>1</b><i>a </i>through <b>1</b><i>d </i>output a first output clock signal of a T/4 delay, a second output clock signal of a 2T/4 delay, a third output clock signal of a 3T/4 delay, and a forth output clock signal of a 4T/4 delay, respectively.</p>
<p id="p-0009" num="0008">Now, the operation of this known DLL device will be explained below. Each of the variable delay sections <b>1</b><i>a</i>, <b>1</b><i>b</i>, <b>1</b><i>c</i>, <b>1</b><i>d </i>has an amount of delay of about T/4, and is able to adjust their delay amount in accordance with a control signal from the delay control section <b>3</b>. The phase comparison section <b>2</b> compares the phase of an input clock signal supplied from the outside to the first variable delay section <b>1</b><i>a </i>and the phase of the fourth output clock signal output from the last variable delay section <b>1</b><i>d</i>, and generates a resultant output to the delay control section <b>3</b> as phase difference information. The delay control section <b>3</b> determines, based on the phase difference information, a delay amount for each of the variable delay sections <b>1</b><i>a</i>, <b>1</b><i>b</i>, <b>1</b><i>c</i>, <b>1</b><i>d</i>, and outputs a control signal representative of the delay amount thus determined to all the variable delay sections <b>1</b><i>a</i>, <b>1</b><i>b</i>, <b>1</b><i>c</i>, <b>1</b><i>d</i>, so that the delay amounts of the variable delay sections <b>1</b><i>a</i>, <b>1</b><i>b</i>, <b>1</b><i>c</i>, <b>1</b><i>d </i>can be adjusted at a time.</p>
<p id="p-0010" num="0009">In general, there are two types, analog and digital, in DLL devices. In analog DLL devices, the control signal from the delay control section <b>3</b> to the variable delay sections <b>1</b><i>a</i>, <b>1</b><i>b</i>, <b>1</b><i>c</i>, <b>1</b><i>d </i>is of an analog quantity, and hence the delay amount of each variable delay section can be adjusted steplessly, but they are vulnerable to noise since a subtle or slight change in the control signal results in a corresponding change in the delay amount. On the other hand, in digital DLL devices, the variable delay sections <b>1</b><i>a</i>, <b>1</b><i>b</i>, <b>1</b><i>c</i>, <b>1</b><i>d </i>are each formed of a plurality of unit delay buffers connected in series with each other in a variable manner, so that the total amount of delay is controlled by adjusting the number of stages of unit delay buffers actually or effectively connected with each other. Thus, only discrete amounts of delay can be obtained, but the control signal is of a digital quantity and hence highly resistant to noise. Therefore, digital DLL devices are generally used as DLL devices for memory interfaces.</p>
<p id="p-0011" num="0010"><figref idref="DRAWINGS">FIG. 7</figref> is a block diagram showing one example of the configuration of such a known digital DLL device. This digital DLL device is provided with four serially connected variable delay sections <b>11</b><i>a</i>, <b>11</b><i>b</i>, <b>11</b><i>c</i>, <b>11</b><i>d</i>, a phase comparison section <b>12</b> and a delay control section <b>13</b>. Each of the variable delay sections <b>11</b><i>a</i>, <b>11</b><i>b</i>, <b>11</b><i>c</i>, <b>11</b><i>d </i>is comprised of a plurality of unit delay buffers which are connected in series with one another in such a manner that the number of stages of the unit delay buffers to be electrically or effectively connected with one another is changed by a control signal from the delay control section <b>13</b>. In the variable delay sections <b>11</b><i>a</i>, <b>11</b><i>b</i>, <b>11</b><i>c</i>, <b>11</b><i>d </i>of <figref idref="DRAWINGS">FIG. 7</figref>, those unit delay buffers <b>15</b> which are electrically or effectively connected with one another are represented by black square boxes, whereas those unit delay buffers <b>15</b><i>a </i>which are not electrically or effectively connected with one another are represented by white square boxes.</p>
<p id="p-0012" num="0011">The phase comparison section <b>12</b> outputs either one of +1, 0 and −1 as phase difference information. Specifically, when the phase of a fourth output clock signal from the last variable delay section <b>11</b><i>d </i>advances with respect to the phase of an input clock signal supplied to the first variable delay section <b>11</b><i>a</i>, the phase difference information is set to +1; when the phase of the input clock signal and the phase of the fourth output clock signal coincide with each other, the phase difference information is set to 0; and when the output phase of the fourth output clock signal lags with respect to the phase of the input clock signal, the phase difference information is set to−1.</p>
<p id="p-0013" num="0012">The delay control section <b>13</b> determines the number of stages of unit delay buffers in each of the variable delay sections <b>11</b><i>a</i>, <b>11</b><i>b</i>, <b>11</b><i>c</i>, <b>11</b><i>d </i>in accordance with the phase difference information from the phase comparison section <b>12</b>, and outputs it to all the variable delay sections <b>11</b><i>a</i>, <b>11</b><i>b</i>, <b>11</b><i>c</i>, <b>11</b><i>d </i>as a control signal. Specifically, when the phase difference information is +1, the number of stages of unit delay buffers for each of all the variable delay sections is increased by 1; when the phase difference information is 0, the number of stages of unit delay buffers for each of all the variable delay sections is not changed; when the phase difference information is −1, the number of stages of unit delay buffers for each of all the variable delay sections is decreased by 1.</p>
<p id="p-0014" num="0013">Here, note that the amount of delay of each unit delay buffer in an actual digital DLL device is about 30-80 ps (pico seconds) in the case of using a 0.13 μm CMOS process for example, though it varies depending upon the power supply voltage and the operating temperature.</p>
<p id="p-0015" num="0014">Here, note that the following patent documents are known to be relevant to the present invention.</p>
<p id="p-0016" num="0015">Japanese patent application laid-open No. H11-86545 (pages 4 through 9 and <figref idref="DRAWINGS">FIG. 1</figref>)</p>
<p id="p-0017" num="0016">Japanese patent application laid-open No. H11-88153</p>
<p id="p-0018" num="0017">Japanese patent application laid-open No. 2003-133948</p>
<p id="p-0019" num="0018">Japanese patent application laid-open No. 2001-285266</p>
<p id="p-0020" num="0019">In the above-mentioned known digital DLL device, however, in order to divide the clock cycle T into equal parts, one and the same control signal is output from the delay control section <b>13</b> to all the variable delay sections <b>11</b><i>a</i>, <b>11</b><i>b</i>, <b>11</b><i>c</i>, <b>11</b><i>d</i>. In the case of a digital DLL device obtaining a delay of a multiple of T/4 as in the above-mentioned example, four times the delay amount of each unit delay buffer becomes the unit of adjustment of the entire digital DLL device. Let us consider, as a concrete example, the case in which the amount of delay of each unit delay buffer is 75 ps. In this case, a minimum unit for adjustment of the delay amount of the entire digital DLL device becomes 300 ps.</p>
<p id="p-0021" num="0020">Further, let us assume that the digital DLL device as employed in this case has a data rate of 400 Mbps, i.e., the entire digital DLL device has a target delay amount in the form of a clock cycle T of 5,000 ps. At this time, the target delay amount T will be obtained if the number of 75 ps unit delay buffers used in the entire digital DLL device is 5,000/75=66.7.</p>
<p id="p-0022" num="0021">However, in actuality, the number of stages of unit delay buffers for the entire digital DLL device has always to be a natural number which can be devided by 4. Accordingly, when a sufficient time has elapsed after the delay control section <b>13</b> starts control operation, the number of stages of unit delay buffers for the entire digital DLL device moves between 64 and 68. At this time, the number of stages of the unit delay buffers used for the first output clock signal moves between 64/4=16 and 68/4=17, so the delay amount of the first output clock signal moves between 75 ps×16=1,200 ps and 75 ps×17=1,275 ps. Comparing the delay amount of the first output clock signal with the target delay amount of T/4=1,250 ps, an error becomes 50 ps at the maximum. In addition, the delay amount of the fourth output clock signal moves between 75 ps×64=4,800 ps and 75 ps×68=5,100 ps, and hence an error becomes 200 ps at the maximum.</p>
<heading id="h-0002" level="1">SUMMARY OF THE INVENTION</heading>
<p id="p-0023" num="0022">In view of the above, the present invention has been made to solve the problems as referred to above, and has for its object to provide a digital DLL device, a digital DLL control method and a digital DLL control program which are capable of reducing an error with respect to a target amount of delay in a final output clock signal.</p>
<p id="p-0024" num="0023">In order to solve the above problems, in one aspect of the present invention, there is provided a digital DLL device which comprises: a digital DLL device that provides a delay to an input clock signal so as to equally divide a clock cycle T into N parts (N being an integer); N variable delay sections each of which is formed of an arbitrary number of unit delay buffers connected in series with one another; a phase comparison section that makes a compare between the phase of the input clock signal and the phase of an output signal which is the input signal having been delayed while passing through all the variable delay sections, and outputs a result of the comparison; and a delay control section that calculates a total number of unit delay buffers required based on the phase comparison result, and allocates the total number of unit delay buffers thus calculated to the individual variable delay sections, respectively.</p>
<p id="p-0025" num="0024">In another aspect of the present invention, there is provided a digital DLL device which comprises: a digital DLL device that provides a delay to an input clock signal so as to equally divide a clock cycle T into N parts (N being an integer); N first variable delay sections each of which is formed of an arbitrary number of unit delay buffers connected in series with one another; N second variable delay sections each of which is connected with the last stage of the first variable delay sections, each of the second variable delay sections being formed of an arbitrary number of unit delay buffers connected in series with one another; a phase comparison section that makes a compare between the phase of the input clock signal and the phase of an output signal which is the input signal having been delayed while passing through all the first and second variable delay sections, and outputs a result of the comparison; and a delay control section that calculates a total number of unit delay buffers S required based on the phase comparison result, sets a quotient Q of S divided by N to be the number of unit delay buffers for each of the first variable delay sections, sets a remainder R of S divided by N to be a total number of unit delay buffers for the second variable delay sections, and allocates R to the second variable delay sections, respectively.</p>
<p id="p-0026" num="0025">Preferably, in the digital DLL device according to the present invention, when N is 2 raised to the M-th power (M being an integer), the delay control section represents S in a binary number, controls the second variable delay sections based on R which is represented by lower-order M bits of S, and controls the first variable delay sections based on Q which is represented by the remaining higher-order bits of S.</p>
<p id="p-0027" num="0026">In a further aspect of the present invention, there is provided a digital DLL control method for providing a delay to an input clock signal so as to equally divide a clock cycle T into N parts (N being an integer), the method comprising: N variable delay steps each of which is formed of an arbitrary number of unit delay buffers connected in series with one another; a phase comparison step for making a compare between the phase of the input clock signal and the phase of an output signal which is the input signal having been delayed while passing through all the variable delay steps, and outputs a result of the comparison; and a delay control step for calculating a total number of unit delay buffers required based on the phase comparison result, and allocating the total number of unit delay buffers thus calculated to the individual variable delay steps, respectively.</p>
<p id="p-0028" num="0027">In a still further aspect of the present invention, there is provided a digital DLL control method for providing a delay to an input clock signal so as to equally divide a clock cycle T into N parts (N being an integer), the method comprising: N first variable delay steps each of which is formed of an arbitrary number of unit delay buffers connected in series with one another; N second variable delay steps each of which is connected with the last stage of the first variable delay sections, each of the second variable delay sections being formed of an arbitrary number of unit delay buffers connected in series with one another; a phase comparison step for making a compare between the phase of the input clock signal and the phase of an output signal which is the input signal having been delayed while passing through all the first and second variable delay steps, and outputs a result of the comparison; and a delay control step for calculating a total number of unit delay buffers S required based on the phase comparison result, sets a quotient Q of S divided by N to be the number of unit delay buffers for each of the first variable delay steps, sets a remainder R of S divided by N to be a total number of unit delay buffers for the second variable delay steps, and allocates R to the second variable delay steps, respectively.</p>
<p id="p-0029" num="0028">In a yet further aspect of the present invention, there is provided a digital DLL control program that makes a computer perform a digital DLL control method for providing a delay to an input clock signal so as to equally divide a clock cycle T into N parts (N being an integer), the digital DLL control program serving to make the computer perform the steps comprising: N variable delay steps each of which is formed of an arbitrary number of unit delay buffers connected in series with one another; a phase comparison step for making a compare between the phase of the input clock signal and the phase of an output signal which is the input signal having been delayed while passing through all the variable delay steps, and outputs a result of the comparison; and a delay control step for calculating a total number of unit delay buffers required based on the phase comparison result, and allocating the total number of unit delay buffers thus calculated to the individual variable delay steps, respectively.</p>
<p id="p-0030" num="0029">In a further aspect of the present invention, there is provided a digital DLL control program that makes a computer perform a digital DLL control method for providing a delay to an input clock signal so as to equally divide a clock cycle T into N parts (N being an integer), the digital DLL control program serving to make the computer perform the steps comprising: N first variable delay steps each of which is formed of an arbitrary number of unit delay buffers connected in series with one another; N second variable delay steps each of which is connected with the last stage of the first variable delay sections, each of the second variable delay sections being formed of an arbitrary number of unit delay buffers connected in series with one another; a phase comparison step for making a compare between the phase of the input clock signal and the phase of an output signal which is the input signal having been delayed while passing through all the first and second variable delay steps, and outputs a result of the comparison; and a delay control step for calculating a total number of unit delay buffers S required based on the phase comparison result, sets a quotient Q of S divided by N to be the number of unit delay buffers for each of the first variable delay steps, sets a remainder R of S divided by N to be a total number of unit delay buffers for the second variable delay steps, and allocates R to the second variable delay steps, respectively. Here, note that this program can be stored in a computer readable medium, and the computer readable medium includes a portable storage medium such as a CD-ROM, a flexible disk, a DVD disk, a magneto-optical disk, an IC card or the like, or a database that holds therein computer programs, or another computer and its database, or a transmission medium on a communication line.</p>
<p id="p-0031" num="0030">According to the present invention, it is possible to improve the accuracy of a delay amount in a digital DLL device with a limited increase of its circuit size and by the use of an easy control method.</p>
<p id="p-0032" num="0031">The above and other objects, features and advantages of the present invention will become more readily apparent to those skilled in the art from the following detailed description of preferred embodiments of the present invention taken in conjunction with the accompanying drawings.</p>
<?BRFSUM description="Brief Summary" end="tail"?>
<?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?>
<description-of-drawings>
<heading id="h-0003" level="1">BRIEF DESCRIPTION OF THE DRAWINGS</heading>
<p id="p-0033" num="0032"><figref idref="DRAWINGS">FIG. 1</figref> is a block diagram showing one example of the configuration of a digital DLL device according to a first embodiment of the present invention.</p>
<p id="p-0034" num="0033"><figref idref="DRAWINGS">FIG. 2</figref> shows one example of a table for the allocation of the numbers of unit delay buffers to second variable delay sections.</p>
<p id="p-0035" num="0034"><figref idref="DRAWINGS">FIG. 3</figref> is a view showing one example of a control signal being generated.</p>
<p id="p-0036" num="0035"><figref idref="DRAWINGS">FIG. 4</figref> is a block diagram showing one example of the configuration of a digital DLL device according to a second embodiment of the present invention.</p>
<p id="p-0037" num="0036"><figref idref="DRAWINGS">FIG. 5</figref> is a timing chart showing one example of the timing of a DQS signal and a DQ signal in a DDR memory interface.</p>
<p id="p-0038" num="0037"><figref idref="DRAWINGS">FIG. 6</figref> is a block diagram showing one example of the configuration of a known DLL device.</p>
<p id="p-0039" num="0038"><figref idref="DRAWINGS">FIG. 7</figref> is a block diagram showing one example of the configuration of a known digital DLL device.</p>
</description-of-drawings>
<?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?>
<?DETDESC description="Detailed Description" end="lead"?>
<heading id="h-0004" level="1">DESCRIPTION OF THE PREFERRED EMBODIMENTS</heading>
<p id="p-0040" num="0039">Hereinafter, preferred embodiments of the present invention will be described in detail while referring to the accompanying drawings. In the embodiments of the present invention, similar to the known one as described above, reference will be made to a digital DLL device which is able to obtain a delay of a multiple of T/N with the assumption that a clock cycle is T and a number by which the clock cycle is equally divided is N. As an example, the following description will be given in the case of N being 4.</p>
<heading id="h-0005" level="1">Embodiment 1</heading>
<p id="p-0041" num="0040">First of all, reference will be made to the construction of a digital DLL device according to a first embodiment of the present invention. <figref idref="DRAWINGS">FIG. 1</figref> is a block diagram that shows one example of the construction of the digital DLL device according to the first embodiment. In <figref idref="DRAWINGS">FIG. 1</figref>, the same symbols as those in <figref idref="DRAWINGS">FIG. 7</figref> designate the same or corresponding parts as those shown in <figref idref="DRAWINGS">FIG. 7</figref>, and an explanation thereof is omitted here. In this first embodiment, a delay control section <b>23</b> is provided instead of the delay control section <b>13</b> in <figref idref="DRAWINGS">FIG. 7</figref>. In addition, a first variable delay section <b>21</b><i>a </i>and a second variable delay section <b>22</b><i>a </i>are provided instead of the first variable delay section <b>11</b><i>a</i>; a first variable delay section <b>21</b><i>b </i>and a second variable delay section <b>22</b><i>b </i>are provided instead of the first variable delay section <b>11</b><i>b</i>; a first variable delay section <b>21</b><i>c </i>and a second variable delay section <b>22</b><i>c </i>are provided instead of the first variable delay section <b>11</b><i>c</i>; and a first variable delay section <b>21</b><i>d </i>and a second variable delay section <b>22</b><i>d </i>are provided instead of the first variable delay section <b>11</b><i>d. </i></p>
<p id="p-0042" num="0041">The first variable delay sections <b>21</b><i>a</i>, <b>21</b><i>b</i>, <b>21</b><i>c</i>, <b>21</b><i>d </i>and the second variable delay sections <b>22</b><i>a</i>, <b>22</b><i>b</i>, <b>22</b><i>c</i>, <b>22</b><i>d </i>are each formed of at least one unit delay buffer, and if there are two or more unit delay buffers for each variable delay section, they are connected in series with each other in such a manner that the number of stages of unit delay buffers electrically connected with one another is changed in accordance with a control signal from the delay control section <b>23</b>. In the first variable delay sections <b>21</b><i>a</i>, <b>21</b><i>b</i>, <b>21</b><i>c</i>, <b>21</b><i>d </i>and the second variable delay sections <b>22</b><i>a</i>, <b>22</b><i>b</i>, <b>22</b><i>c</i>, <b>22</b><i>d </i>of <figref idref="DRAWINGS">FIG. 1</figref>, those unit delay buffers <b>15</b> which are electrically connected with one another are represented by black square boxes, whereas those which are not electrically connected are represented by white square boxes.</p>
<p id="p-0043" num="0042">Now, the operation of the digital DLL device according to this embodiment will be described below. The delay control section <b>23</b> determines a new total S by adding a phase difference value to a current total S of the number of stages of unit delay buffers for the entire digital DLL device in accordance with the phase difference information from the phase comparison section <b>12</b>. In other words, when the phase difference information or value is +1, S is increased by 1; when the phase difference information or value is 0, S is not changed; when the phase difference information or value is −1, S is decreased by 1.</p>
<p id="p-0044" num="0043">Then, the delay control section <b>23</b> determines the number of stages Q of unit delay buffers for each first variable delay section and a total R of the numbers of stages of unit delay buffers for the second variable delay sections in accordance with S, wherein Q is a quotient of S divided by N, and R is a remainder of S divided by N, that is, S=Q×N+R.</p>
<p id="p-0045" num="0044">Then, by referring to a table to be described later, the delay control section <b>23</b> allocates the numbers of stages of unit delay buffers to the second variable delay sections <b>22</b><i>a</i>, <b>22</b><i>b</i>, <b>22</b><i>c</i>, <b>22</b><i>d</i>, respectively, in such a manner that the total of the numbers of stages of unit delay buffers becomes R. <figref idref="DRAWINGS">FIG. 2</figref> shows one example of such a table for allocating the numbers of unit delay buffers to the second variable delay sections, respectively. In this example, the numbers of stages E<b>1</b>, E<b>2</b>, E<b>3</b>, E<b>4</b> of unit delay buffers are allocated to the second variable delay sections <b>22</b><i>a</i>, <b>22</b><i>b</i>, <b>22</b><i>c</i>, <b>22</b><i>d</i>, respectively, according to R, that is, the allocation being made as follows: E<b>1</b>+E<b>2</b>+E<b>3</b>+E<b>4</b>=R.</p>
<p id="p-0046" num="0045">Subsequently, the delay control section <b>23</b> outputs the number of stages Q of unit delay buffers to all the first variable delay sections <b>21</b><i>a</i>, <b>21</b><i>b</i>, <b>21</b><i>c</i>, <b>21</b><i>d </i>as a control signal, and also outputs the numbers of stages E<b>1</b>, E<b>2</b>, E<b>3</b>, E<b>4</b> of unit delay buffers to the second variable delay sections <b>22</b><i>a</i>, <b>22</b><i>b</i>, <b>22</b><i>c</i>, <b>22</b><i>d</i>, respectively, as control signals. The first variable delay sections <b>21</b><i>a</i>, <b>21</b><i>b</i>, <b>21</b><i>c</i>, <b>21</b><i>d </i>and the second variable delay sections <b>22</b><i>a</i>, <b>22</b><i>b</i>, <b>22</b><i>c</i>, <b>22</b><i>d </i>act to change their numbers of stages of unit delay buffers, respectively, in accordance with the control signals.</p>
<p id="p-0047" num="0046">Next, a concrete example of delay amounts will be described below. Here, let us consider the case in which the target delay amount T of the entire digital DLL device is 5,000 ps, and the amount of delay of each unit delay buffer is 75 ps, as in the above-mentioned example of the known digital DLL device.</p>
<p id="p-0048" num="0047">In this case, the target delay amount T will be obtained if the number of 75 ps unit delay buffers used in the entire digital DLL device is 5,000/75=66.7. In this first embodiment, the number of stages S of unit delay buffers for the entire digital DLL device can be controlled in units of one buffer. As a result, when a sufficient time has elapsed after the delay control section <b>23</b> starts controlling, S will move between 66 (16×4+2) and 67 (16×4+3). At this time, a sum of the number of stages Q of unit delay buffers for one of the first variable delay sections and the total R of the numbers of stages of unit delay buffers for the second variable delay sections moves between 18 {i.e., Q=16 and R=2 (E<b>1</b>=1, E<b>2</b>=0, E<b>3</b>=1, E<b>4</b>=0)} and 19 {i.e., Q=16 and R=3 (E<b>1</b>=1, E<b>2</b>=1, E<b>3</b>=1, E<b>4</b>=0)}. However, the number of stages of unit delay buffers used for the first output clock signal becomes stable in such a manner that Q is 16 for the first variable delay section <b>21</b><i>a</i>, and E<b>1</b> is 1 for the second variable delay section <b>22</b><i>a</i>. Accordingly, the delay amount of the first output clock signal becomes 75 ps×(16+1)=1,275 ps in a stable manner. Comparing the delay amount of the first output clock signal with the target delay amount of T/4=1,250 ps, an error is suppressed to 25 ps in a stable manner. In addition, the delay amount of the fourth output clock signal moves between 75 ps×66=4,950 ps and 75 ps×67=5,025 ps, and hence an error becomes 50 ps at the maximum.</p>
<p id="p-0049" num="0048">Now, reference will be made in detail to the generation of control signals. Particularly, description will be made to the case in which when M is an integer, N is 2 raised to the M-th power. When the value of S is represented by a binary number, the lower-order M bits represent R, and the second variable delay sections <b>22</b><i>a</i>, <b>22</b><i>b</i>, <b>22</b><i>c</i>, <b>22</b><i>d </i>are controlled by using this value R while referring to the table. The remaining higher-order bits represent Q, by the use of which the first variable delay sections <b>21</b><i>a</i>, <b>21</b><i>b</i>, <b>21</b><i>c</i>, <b>21</b><i>d </i>are controlled.</p>
<p id="p-0050" num="0049">When N=4, M becomes 2, so the lower-order two bits represent R and the remaining higher-order bits represent Q. <figref idref="DRAWINGS">FIG. 3</figref> is a view that shows one example of generating control signals. <figref idref="DRAWINGS">FIG. 3</figref> shows a case of S=66, in which R represents 10 in a binary number, and it also represents 2 in a decimal number. In addition, Q represents 10,000 in a binary number, and it also represents 16 in a decimal number. Accordingly, the number of stages Q of unit delay buffers for each of the first variable delay sections <b>21</b><i>a</i>, <b>21</b><i>b</i>, <b>21</b><i>c</i>, <b>21</b><i>d </i>becomes 16, and the numbers of stages of unit delay buffers for the second variable delay sections <b>22</b><i>a</i>, <b>22</b><i>b</i>, <b>22</b><i>c</i>, <b>22</b><i>d </i>become as follows according to the table of <figref idref="DRAWINGS">FIG. 2</figref>: E<b>1</b>=1, E<b>2</b>=0, E<b>3</b>=1, E<b>4</b>=0.</p>
<heading id="h-0006" level="1">Embodiment 2</heading>
<p id="p-0051" num="0050">A second embodiment of the present invention is provided with only variable delay sections <b>31</b><i>a</i>, <b>31</b><i>b</i>, <b>31</b><i>c</i>, <b>31</b><i>d </i>that can control the number of stages of individual unit buffers, as in the second variable delay sections <b>22</b><i>a</i>, <b>22</b><i>b</i>, <b>22</b><i>c</i>, <b>22</b><i>d </i>of the above-mentioned first embodiment.</p>
<p id="p-0052" num="0051">First, reference will be made to the construction of a digital DLL device according to the second embodiment of the present invention. <figref idref="DRAWINGS">FIG. 4</figref> is a block diagram that shows one example of the construction of the digital DLL device according to the second embodiment. In <figref idref="DRAWINGS">FIG. 4</figref>, the same symbols as those in <figref idref="DRAWINGS">FIG. 7</figref> designate the same or corresponding parts as those shown in <figref idref="DRAWINGS">FIG. 7</figref>, and an explanation thereof is omitted here. In this second embodiment, a delay control section <b>33</b> is provided instead of the delay control section <b>13</b> in <figref idref="DRAWINGS">FIG. 7</figref>. In addition, a variable delay section <b>31</b><i>a </i>is provided instead of the first variable delay section <b>11</b><i>a</i>; a variable delay section <b>31</b><i>b </i>is provided instead of the first variable delay section <b>11</b><i>b</i>; a variable delay section <b>31</b><i>c </i>is provided instead of the first variable delay section <b>11</b><i>c</i>; and a variable delay section <b>31</b><i>d </i>is provided instead of the first variable delay section <b>11</b><i>d. </i></p>
<p id="p-0053" num="0052">The variable delay sections <b>31</b><i>a</i>, <b>31</b><i>b</i>, <b>31</b><i>c</i>, <b>31</b><i>d </i>are each comprised of a plurality of unit delay buffers which are connected in series with one another in such a manner that the numbers of stages of the unit delay buffers electrically connected with one another for these variable delay sections are changed in accordance with corresponding control signals, respectively, from the delay control section <b>33</b>. In the variable delay sections <b>31</b><i>a</i>, <b>31</b><i>b</i>, <b>31</b><i>c</i>, <b>31</b><i>d </i>of <figref idref="DRAWINGS">FIG. 4</figref>, those unit delay buffers <b>15</b> which are electrically or effectively connected with one another are represented by black square boxes, whereas those unit delay buffers <b>15</b><i>a </i>which are not electrically or effectively connected with one another are represented by white square boxes.</p>
<p id="p-0054" num="0053">Now, the operation of the digital DLL device according to this second embodiment will be described below. The delay control section <b>33</b> determines a new total S by adding a phase difference value to a current total S of the number of stages of unit delay buffers for the entire digital DLL device in accordance with phase difference information from the phase comparison section <b>12</b>.</p>
<p id="p-0055" num="0054">Then, by referring to a table, the delay control section <b>33</b> allocates the numbers of stages F<b>1</b>, F<b>2</b>, F<b>3</b>, F<b>4</b> of unit delay buffers to the variable delay sections <b>31</b><i>a</i>, <b>31</b><i>b</i>, <b>31</b><i>c</i>, <b>31</b><i>d</i>, respectively, according to S in such a manner that the total of the numbers of stages of the unit delay buffers becomes S, that is, F<b>1</b>+F<b>2</b>+F<b>3</b>+F<b>4</b>=S. Thereafter, the delay control section <b>33</b> outputs the numbers of stages F<b>1</b>, F<b>2</b>, F<b>3</b>, F<b>4</b> of unit delay buffers to the variable delay sections <b>31</b><i>a</i>, <b>31</b><i>b</i>, <b>31</b><i>c</i>, <b>31</b><i>d</i>, respectively, as control signals. The variable delay sections <b>31</b><i>a</i>, <b>31</b><i>b</i>, <b>31</b><i>c</i>, <b>31</b><i>d </i>serve to change the numbers of stages of unit delay buffers electrically connected with one another in accordance with the control signals from the delay control section <b>33</b>.</p>
<p id="p-0056" num="0055">Next, a concrete example of delay amounts will be described below. Here, let us consider the case in which the target delay amount T of the entire digital DLL device is 5,000 ps, and the amount of delay of each unit delay buffer is 75 ps, as in the above-mentioned concrete example of the first embodiment. In this second embodiment, the number of stages S of unit delay buffers for the entire digital DLL device can be controlled in units of one buffer. As a result, when a sufficient time has elapsed after the delay control section <b>33</b> starts controlling, S will move between 66 and 67. At this time, the number of stages of unit delay buffers used for a first output clock signal from the initial or first variable delay section <b>31</b><i>a </i>becomes 17 in a stable manner. Accordingly, the delay amount of the first output clock signal becomes 75 ps×17=1,275 ps in a stable manner, as in the first embodiment. Comparing the delay amount of the first output clock signal with the target delay amount of T/4=1,250 ps, an error is suppressed to 25 ps in a stable manner. In addition, the delay amount of a final or fourth output clock signal moves between 75 ps×66=4,950 ps and 75 ps×67=5,025 ps, and hence an error becomes 50 ps at the maximum.</p>
<p id="p-0057" num="0056">The present invention as described in detail above can be constructed by hardware alone, or by a combination of a computer and software. In the latter case, a program that makes the computer perform the digital DLL method of the present invention provides a digital DLL control program of the present invention.</p>
<p id="p-0058" num="0057">While the invention has been described in terms of preferred embodiments, those skilled in the art will recognize that the invention can be practiced with modifications within the spirit and scope of the appended claims.</p>
<?DETDESC description="Detailed Description" end="tail"?>
</description>
<us-claim-statement>What is claimed is:</us-claim-statement>
<claims id="claims">
<claim id="CLM-00001" num="00001">
<claim-text>1. A computer-readable storage medium storing a computer-readable program/codes for executing a digital DLL control method for providing a delay to an input clock signal so as to equally divide a clock cycle T into N parts (N being an integer),
<claim-text>said digital DLL control method comprising:</claim-text>
<claim-text>N first variable delay steps each of which is formed of an arbitrary number of unit delay buffers connected in series with one another;</claim-text>
<claim-text>N second variable delay steps each of which is connected with the last stage of said first variable delay sections, each of said second variable delay sections being formed of an arbitrary number of unit delay buffers connected in series with one another;</claim-text>
<claim-text>a phase comparison step of making a compare between the phase of said input clock signal and the phase of an output signal which is said input signal having been delayed while passing through all said first and second variable delay steps, and outputting a result of said comparison; and</claim-text>
<claim-text>a delay control step of calculating a total number of unit delay buffers S required based on said phase comparison result, setting a quotient Q of S divided by N to be the number of unit delay buffers for each of said first variable delay steps, setting a remainder R of S divided by N to be a total number of unit delay buffers for said second variable delay steps, and allocating R to said second variable delay steps, respectively.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00002" num="00002">
<claim-text>2. A computer-readable storage medium storing a computer-readable program/codes for executing a digital DLL control method for providing a delay to an input clock signal so as to equally divide a clock cycle T into N parts (N being an integer),
<claim-text>said digital DLL control method comprising:</claim-text>
<claim-text>N first variable delay steps each of which is formed of an arbitrary number of unit delay buffers connected in series with one another;</claim-text>
<claim-text>N second variable delay steps each of which is connected with the last stage of said first variable delay sections, each of said second variable delay sections being formed of an arbitrary number of unit delay buffers connected in series with one another;</claim-text>
<claim-text>a phase comparison step of making a compare between the phase of said input clock signal and the phase of an output signal which is said input signal having been delayed while passing through all said first and second variable delay steps, and outputting a result of said comparison; and</claim-text>
<claim-text>a delay control step of calculating a total number of unit delay buffers S required based on said phase comparison result, setting a quotient Q of S divided by N to be the number of unit delay buffers for each of said first variable delay steps, setting a remainder R of S divided by N to be a total number of unit delay buffers for said second variable delay steps, and allocating R to said second variable delay steps, respectively.</claim-text>
</claim-text>
</claim>
</claims>
</us-patent-grant>
