<us-patent-grant lang="EN" dtd-version="v4.2 2006-08-23" file="US07298800-20071120.XML" status="PRODUCTION" id="us-patent-grant" country="US" date-produced="20071106" date-publ="20071120">
<us-bibliographic-data-grant>
<publication-reference>
<document-id>
<country>US</country>
<doc-number>07298800</doc-number>
<kind>B2</kind>
<date>20071120</date>
</document-id>
</publication-reference>
<application-reference appl-type="utility">
<document-id>
<country>US</country>
<doc-number>10091432</doc-number>
<date>20020307</date>
</document-id>
</application-reference>
<us-application-series-code>10</us-application-series-code>
<priority-claims>
<priority-claim sequence="01" kind="national">
<country>JP</country>
<doc-number>2001-244524</doc-number>
<date>20010810</date>
</priority-claim>
</priority-claims>
<us-term-of-grant>
<us-term-extension>670</us-term-extension>
</us-term-of-grant>
<classifications-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>H</section>
<class>04</class>
<subclass>L</subclass>
<main-group>27</main-group>
<subgroup>06</subgroup>
<symbol-position>F</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20071120</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
</classifications-ipcr>
<classification-national>
<country>US</country>
<main-classification>375344</main-classification>
<further-classification>375345</further-classification>
<further-classification>375346</further-classification>
<further-classification>375359</further-classification>
<further-classification>4552341</further-classification>
</classification-national>
<invention-title id="d0e71">Analog signal control method, analog signal controller, and automatic gain controller</invention-title>
<references-cited>
<citation>
<patcit num="00001">
<document-id>
<country>US</country>
<doc-number>4272648</doc-number>
<kind>A</kind>
<name>Agrawal et al.</name>
<date>19810600</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>381108</main-classification></classification-national>
</citation>
<citation>
<patcit num="00002">
<document-id>
<country>US</country>
<doc-number>4439864</doc-number>
<kind>A</kind>
<name>Qureshi</name>
<date>19840300</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>375345</main-classification></classification-national>
</citation>
<citation>
<patcit num="00003">
<document-id>
<country>US</country>
<doc-number>4785352</doc-number>
<kind>A</kind>
<name>Burrowes et al.</name>
<date>19881100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>348678</main-classification></classification-national>
</citation>
<citation>
<patcit num="00004">
<document-id>
<country>US</country>
<doc-number>4884192</doc-number>
<kind>A</kind>
<name>Terada et al.</name>
<date>19891100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>709251</main-classification></classification-national>
</citation>
<citation>
<patcit num="00005">
<document-id>
<country>US</country>
<doc-number>5243412</doc-number>
<kind>A</kind>
<name>Goukura et al.</name>
<date>19930900</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>348505</main-classification></classification-national>
</citation>
<citation>
<patcit num="00006">
<document-id>
<country>US</country>
<doc-number>5305351</doc-number>
<kind>A</kind>
<name>Mizoguchi</name>
<date>19940400</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>375232</main-classification></classification-national>
</citation>
<citation>
<patcit num="00007">
<document-id>
<country>US</country>
<doc-number>5400148</doc-number>
<kind>A</kind>
<name>Kashida et al.</name>
<date>19950300</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>386 46</main-classification></classification-national>
</citation>
<citation>
<patcit num="00008">
<document-id>
<country>US</country>
<doc-number>5566211</doc-number>
<kind>A</kind>
<name>Choi</name>
<date>19961000</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>375332</main-classification></classification-national>
</citation>
<citation>
<patcit num="00009">
<document-id>
<country>US</country>
<doc-number>5721546</doc-number>
<kind>A</kind>
<name>Tsutsumishita</name>
<date>19980200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>341116</main-classification></classification-national>
</citation>
<citation>
<patcit num="00010">
<document-id>
<country>US</country>
<doc-number>6005889</doc-number>
<kind>A</kind>
<name>Chung et al.</name>
<date>19991200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>375140</main-classification></classification-national>
</citation>
<citation>
<patcit num="00011">
<document-id>
<country>US</country>
<doc-number>6122331</doc-number>
<kind>A</kind>
<name>Dumas</name>
<date>20000900</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>375345</main-classification></classification-national>
</citation>
<citation>
<patcit num="00012">
<document-id>
<country>US</country>
<doc-number>6148045</doc-number>
<kind>A</kind>
<name>Taura et al.</name>
<date>20001100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>375344</main-classification></classification-national>
</citation>
<citation>
<patcit num="00013">
<document-id>
<country>US</country>
<doc-number>6192089</doc-number>
<kind>B1</kind>
<name>Corleto et al.</name>
<date>20010200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>375344</main-classification></classification-national>
</citation>
<citation>
<patcit num="00014">
<document-id>
<country>US</country>
<doc-number>6222478</doc-number>
<kind>B1</kind>
<name>Bright</name>
<date>20010400</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>341162</main-classification></classification-national>
</citation>
<citation>
<patcit num="00015">
<document-id>
<country>US</country>
<doc-number>6252464</doc-number>
<kind>B1</kind>
<name>Richards et al.</name>
<date>20010600</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>331  4</main-classification></classification-national>
</citation>
<citation>
<patcit num="00016">
<document-id>
<country>US</country>
<doc-number>6563859</doc-number>
<kind>B1</kind>
<name>Oishi et al.</name>
<date>20030500</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>375148</main-classification></classification-national>
</citation>
<citation>
<patcit num="00017">
<document-id>
<country>US</country>
<doc-number>6897724</doc-number>
<kind>B2</kind>
<name>Gurvich et al.</name>
<date>20050500</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>330151</main-classification></classification-national>
</citation>
<citation>
<patcit num="00018">
<document-id>
<country>US</country>
<doc-number>6937176</doc-number>
<kind>B2</kind>
<name>Freeman et al.</name>
<date>20050800</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>341143</main-classification></classification-national>
</citation>
<citation>
<patcit num="00019">
<document-id>
<country>CN</country>
<doc-number>441168</doc-number>
<date>20010600</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<nplcit num="00020">
<othercit>Turner P. G. et al “Chip Rate Processing For Software Defined Radios”, 3G Mobile Communication Technologies, 2001. Second International Conference, Mar. 2001, pp. 292-296.</othercit>
</nplcit>
<category>cited by examiner</category>
</citation>
<citation>
<nplcit num="00021">
<othercit>Lovrich, A. Troullinos, G. Chirayil, R.: “An all digital automatic gain control”, Texas Instrum. Inc., Houston, TX, USA, Acoustics, Speech, and Signal Processing, 1988, ICASSP-88, 1988 International Conference on Publication, Apr. 11-14, 1988, pp. 3-12.</othercit>
</nplcit>
<category>cited by examiner</category>
</citation>
<citation>
<nplcit num="00022">
<othercit>Camilleri, P.F. Sobelman, G.E., “Digital automatic gain control for hearing aids”, Dept. Of Electrical Eng., Minnesota Univ., Minneapolis, MN, VLSI Signal Processing, VII, Oct. 1994, pp. 3-12.</othercit>
</nplcit>
<category>cited by examiner</category>
</citation>
</references-cited>
<number-of-claims>23</number-of-claims>
<us-exemplary-claim>1</us-exemplary-claim>
<us-field-of-classification-search>
<classification-national>
<country>US</country>
<main-classification>375344</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>375345</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>375346</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>375316</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>375341</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>375342</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>375343</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>375362</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>375373</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>375226</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>375327</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>375376</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>455344</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>455345</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>4552341</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>341116</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>341151</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>341155</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>341160</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>341161</main-classification>
</classification-national>
</us-field-of-classification-search>
<figures>
<number-of-drawing-sheets>25</number-of-drawing-sheets>
<number-of-figures>35</number-of-figures>
</figures>
<us-related-documents>
<related-publication>
<document-id>
<country>US</country>
<doc-number>20030032402</doc-number>
<kind>A1</kind>
<date>20030213</date>
</document-id>
</related-publication>
</us-related-documents>
<parties>
<applicants>
<applicant sequence="001" app-type="applicant-inventor" designation="us-only">
<addressbook>
<last-name>Asano</last-name>
<first-name>Shigetaka</first-name>
<address>
<city>Kasugai</city>
<country>JP</country>
</address>
</addressbook>
<nationality>
<country>JP</country>
</nationality>
<residence>
<country>JP</country>
</residence>
</applicant>
</applicants>
<agents>
<agent sequence="01" rep-type="attorney">
<addressbook>
<orgname>Staas &amp; Halsey LLP</orgname>
<address>
<country>unknown</country>
</address>
</addressbook>
</agent>
</agents>
</parties>
<assignees>
<assignee>
<addressbook>
<orgname>Fujitsu Limited</orgname>
<role>03</role>
<address>
<city>Kawasaki</city>
<country>JP</country>
</address>
</addressbook>
</assignee>
</assignees>
<examiners>
<primary-examiner>
<last-name>Ghayour</last-name>
<first-name>Mohammed</first-name>
<department>2611</department>
</primary-examiner>
<assistant-examiner>
<last-name>Ghulamali</last-name>
<first-name>Qutub</first-name>
</assistant-examiner>
</examiners>
</us-bibliographic-data-grant>
<abstract id="abstract">
<p id="p-0001" num="0000">An analog signal control method for accurately controlling an analog signal irrespective of a latency. The analog signal control method includes the steps of converting the analog signal to a digital signal, performing an arithmetic processing of the digital signal to generate a control signal for controlling the analog signal, delaying the analog signal corresponding to a latency caused by the generation of the control signal to generate a delayed analog signal, and controlling the delayed analog signal in accordance with the control signal.</p>
</abstract>
<drawings id="DRAWINGS">
<figure id="Fig-EMI-D00000" num="00000">
<img id="EMI-D00000" he="71.37mm" wi="135.64mm" file="US07298800-20071120-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00001" num="00001">
<img id="EMI-D00001" he="207.43mm" wi="166.88mm" file="US07298800-20071120-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00002" num="00002">
<img id="EMI-D00002" he="230.55mm" wi="72.47mm" orientation="landscape" file="US07298800-20071120-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00003" num="00003">
<img id="EMI-D00003" he="186.61mm" wi="153.75mm" file="US07298800-20071120-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00004" num="00004">
<img id="EMI-D00004" he="205.40mm" wi="151.89mm" file="US07298800-20071120-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00005" num="00005">
<img id="EMI-D00005" he="235.37mm" wi="144.53mm" file="US07298800-20071120-D00005.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00006" num="00006">
<img id="EMI-D00006" he="232.41mm" wi="135.38mm" file="US07298800-20071120-D00006.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00007" num="00007">
<img id="EMI-D00007" he="243.33mm" wi="132.93mm" orientation="landscape" file="US07298800-20071120-D00007.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00008" num="00008">
<img id="EMI-D00008" he="244.09mm" wi="136.48mm" file="US07298800-20071120-D00008.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00009" num="00009">
<img id="EMI-D00009" he="241.22mm" wi="135.81mm" file="US07298800-20071120-D00009.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00010" num="00010">
<img id="EMI-D00010" he="193.04mm" wi="95.33mm" orientation="landscape" file="US07298800-20071120-D00010.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00011" num="00011">
<img id="EMI-D00011" he="221.23mm" wi="110.66mm" orientation="landscape" file="US07298800-20071120-D00011.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00012" num="00012">
<img id="EMI-D00012" he="226.31mm" wi="136.23mm" orientation="landscape" file="US07298800-20071120-D00012.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00013" num="00013">
<img id="EMI-D00013" he="197.44mm" wi="100.75mm" orientation="landscape" file="US07298800-20071120-D00013.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00014" num="00014">
<img id="EMI-D00014" he="236.05mm" wi="69.51mm" orientation="landscape" file="US07298800-20071120-D00014.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00015" num="00015">
<img id="EMI-D00015" he="220.22mm" wi="95.76mm" orientation="landscape" file="US07298800-20071120-D00015.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00016" num="00016">
<img id="EMI-D00016" he="229.11mm" wi="69.43mm" orientation="landscape" file="US07298800-20071120-D00016.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00017" num="00017">
<img id="EMI-D00017" he="237.15mm" wi="137.24mm" orientation="landscape" file="US07298800-20071120-D00017.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00018" num="00018">
<img id="EMI-D00018" he="259.16mm" wi="143.76mm" orientation="landscape" file="US07298800-20071120-D00018.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00019" num="00019">
<img id="EMI-D00019" he="212.43mm" wi="118.70mm" orientation="landscape" file="US07298800-20071120-D00019.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00020" num="00020">
<img id="EMI-D00020" he="223.77mm" wi="163.49mm" orientation="landscape" file="US07298800-20071120-D00020.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00021" num="00021">
<img id="EMI-D00021" he="237.32mm" wi="104.31mm" orientation="landscape" file="US07298800-20071120-D00021.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00022" num="00022">
<img id="EMI-D00022" he="235.46mm" wi="103.80mm" orientation="landscape" file="US07298800-20071120-D00022.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00023" num="00023">
<img id="EMI-D00023" he="239.44mm" wi="85.34mm" orientation="landscape" file="US07298800-20071120-D00023.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00024" num="00024">
<img id="EMI-D00024" he="195.07mm" wi="102.70mm" orientation="landscape" file="US07298800-20071120-D00024.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00025" num="00025">
<img id="EMI-D00025" he="211.16mm" wi="76.45mm" orientation="landscape" file="US07298800-20071120-D00025.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
</drawings>
<description id="description">
<?BRFSUM description="Brief Summary" end="lead"?>
<heading id="h-0001" level="1">BACKGROUND OF THE INVENTION</heading>
<p id="p-0002" num="0001">The present invention relates to an analog signal control method, an analog signal controller, and an AGC.</p>
<p id="p-0003" num="0002">In recent years, analog signals are controlled by digital signals. Data read from a recording medium, for example, a magnetic disk is an analog signal which is converted to a digital signal. An amplification ratio of GCA (gain control amplifier) is calculated from the digital signal. The calculated amplification ratio is fed back to control the amplitude of the analog signal. The feedback loop is repeated to control the amplitude of the analog signal to be constant. In this event, since processing time (control delay: latency) on a calculating path for the digital processing affects the controllability of the analog signal, improved digital processing is required.</p>
<p id="p-0004" num="0003"><figref idref="DRAWINGS">FIG. 1</figref> is a schematic block diagram illustrating the configuration of a conventional analog signal controller <b>111</b>. The analog signal controller <b>111</b> includes an analog control circuit <b>112</b>, an A/D converter circuit (hereinafter referred to as ADC) <b>113</b>, and a digital arithmetic circuit <b>114</b>.</p>
<p id="p-0005" num="0004">The analog signal controller <b>111</b> receives an analog input signal IN which is data read, for example, from a recording medium. After performing predetermined processing on the analog input signal IN, the analog signal controller <b>111</b> supplies the processed signal to a next circuit <b>115</b>. The ADC <b>113</b> and the digital arithmetic circuit <b>114</b> operate in accordance with a clock signal CLK supplied from a PLL circuit, not shown.</p>
<p id="p-0006" num="0005">The analog control circuit <b>112</b> processes the analog input signal IN in accordance with a control signal S<b>31</b> to generate an analog processed signal S<b>32</b>. The analog control circuit <b>112</b> receives the control signal S<b>31</b> from the digital arithmetic circuit <b>114</b>. The analog processed signal S<b>32</b> is supplied to the ADC <b>113</b> and the next circuit <b>115</b>.</p>
<p id="p-0007" num="0006">The ADC <b>113</b> converts the analog processed signal S<b>32</b> to a digital signal S<b>33</b> which is supplied to the digital arithmetic circuit <b>114</b>.</p>
<p id="p-0008" num="0007">The digital arithmetic circuit <b>114</b> executes various forms of calculation processing in accordance with the digital signal S<b>33</b> to generate the control signal S<b>31</b>. The digital arithmetic circuit <b>114</b> feeds back the control signal S<b>31</b> to the analog control circuit <b>112</b>.</p>
<p id="p-0009" num="0008">The analog signal controller <b>111</b> generates the control signal S<b>31</b> in accordance with the analog processed signal S<b>32</b>, and controls the analog input signal IN in accordance with the control signal S<b>31</b> in a feedback manner.</p>
<p id="p-0010" num="0009">However, the analog signal controller <b>111</b> experiences a control delay (latency) caused by a control loop (comprised of the ADC <b>113</b> and digital arithmetic circuit <b>114</b>) for controlling the analog input signal IN.</p>
<p id="p-0011" num="0010"><figref idref="DRAWINGS">FIG. 2</figref> is a block diagram of an automatic gain controller (hereinafter referred to as AGC), for example, in which the conventional analog signal controller <b>111</b> is embodied. The AGC <b>121</b> includes a gain control amplifier (hereinafter referred to as GCA) <b>112</b>, a low pass filter (hereinafter referred to as LPF) <b>123</b>, an ADC <b>124</b>, an error calculating circuit <b>125</b>, and a D/A converter circuit (hereinafter referred to as DAC) <b>126</b>. The ADC <b>124</b> and the error calculating circuit <b>125</b> operate in accordance with a clock signal CLK supplied from a PLL circuit.</p>
<p id="p-0012" num="0011">The GCA <b>122</b> receives an analog input signal IN. The GCA <b>122</b> amplifies the analog input signal IN with a predetermined gain in accordance with a control signal S<b>41</b> to generate an analog amplified signal S<b>42</b>. The analog amplified signal S<b>42</b> is supplied to the LPF <b>123</b>.</p>
<p id="p-0013" num="0012">The LPF <b>123</b> removes high frequency components from the analog amplified signal S<b>42</b> amplified by the GCA <b>122</b> to generate an analog signal S<b>43</b>. The analog signal S<b>43</b> is supplied to the ADC <b>124</b>. The ADC <b>124</b> converts the analog signal S<b>43</b> to a digital signal S<b>44</b> which is supplied to the error calculating circuit <b>125</b>.</p>
<p id="p-0014" num="0013">The error calculating circuit <b>125</b> compares the digital signal S<b>44</b> with a predetermined target value, and integrates its error components to generate an error digital signal S<b>45</b> which is supplied to the DAC <b>126</b>. The GCA <b>122</b> amplifies the analog input signal IN such that the target value causes the amplitude of the analog signal S<b>43</b> to substantially cover a full input range of the ADC <b>124</b>.</p>
<p id="p-0015" num="0014">The DAC <b>126</b> converts the error digital signal S<b>45</b> to an analog signal to generate the control signal S<b>41</b> which is fed back to the GCA <b>122</b>.</p>
<p id="p-0016" num="0015"><figref idref="DRAWINGS">FIG. 3</figref> is a block diagram illustrating the specific configuration of the error calculating circuit <b>125</b>. The error calculating circuit <b>125</b> includes first to third calculating circuits <b>131</b> to <b>133</b>, and first to third flip-flops (hereinafter referred to as FFs) <b>134</b> to <b>136</b>.</p>
<p id="p-0017" num="0016">The first calculating circuit <b>131</b> is an arithmetic circuit which takes an absolute value of the digital signal S<b>44</b> and outputs the absolute digital signal. The first FF <b>134</b> latches the output signal of the first calculating circuit <b>131</b> in response to a clock signal CLK to generate a first latch signal D<b>1</b>. The first latch signal D<b>1</b> is supplied to the second calculating circuit <b>132</b>.</p>
<p id="p-0018" num="0017">The second calculating circuit <b>132</b> calculates an error component between a target value previously stored in a register (not shown) and the first latch signal D<b>1</b> to generate an error signal D<b>2</b> in accordance with the result of the calculation. The error signal D<b>2</b> is supplied to the second FF <b>135</b>. The second FF <b>135</b> latches the error signal D<b>2</b> in response to the clock signal CLK to generate a second latch signal A. The second latch signal A is supplied to the third calculating circuit <b>133</b>.</p>
<p id="p-0019" num="0018">The third calculating circuit <b>133</b> integrates the second latch signal A to generate an integration signal S. The integration signal S is fed back to the input side of the third calculating circuit <b>133</b>. The third FF <b>136</b> latches the integration signal S in response to the clock signal CLK to generate an error digital signal S<b>45</b>. The error digital signal S<b>45</b> is supplied to the DAC <b>126</b>.</p>
<p id="p-0020" num="0019">The AGC <b>121</b> optimizes the gain of the GCA <b>122</b> by a control loop which feeds back the control signal S<b>41</b> in accordance with the analog amplified signal S<b>42</b>. The AGC <b>121</b> supplies the digital signal S<b>44</b> to a next digital circuit.</p>
<p id="p-0021" num="0020">However, in the AGC <b>121</b>, a processing time taken by the ADC <b>124</b> and the error calculating circuit <b>125</b> in the control loop causes a latency for the analog input signal IN.</p>
<p id="p-0022" num="0021">The error calculating circuit <b>125</b> is provided with the first to third FFs <b>134</b> to <b>136</b> at the input and output stages of the second and third calculating circuits <b>132</b>, <b>133</b> (see <figref idref="DRAWINGS">FIG. 3</figref>) for increasing the calculating speed of these circuits. A latency occurring in the error calculating circuit due to the first to third FFs <b>134</b> to <b>136</b> at three stages corresponds to three clock pulses of the clock signal CLK, and particularly, the error calculating circuit <b>125</b> is significantly affected by the latency.</p>
<p id="p-0023" num="0022">For example, as illustrated in <figref idref="DRAWINGS">FIG. 4</figref>, the analog input signal IN is sampled at time T<b>1</b>, and the GCA <b>122</b> is supplied at time T<b>2</b> with the control signal S<b>41</b> which is generated from a digital signal having a sampling value through the ADC <b>124</b> and the error calculating circuit <b>125</b>. The control signal S<b>41</b> generated from the analog input signal IN at time T<b>1</b> acts on the analog input signal IN at time T<b>2</b>.</p>
<p id="p-0024" num="0023">A difference between the times T<b>1</b>, T<b>2</b> (=T<b>2</b>−T<b>1</b>) indicates the processing time taken by the ADC <b>124</b> and error calculating circuit <b>125</b>, i.e., the control delay (latency). The control signal S<b>41</b> supplied at time T<b>2</b> is not suitable for the analog input signal IN at that time. Although the control signal S<b>41</b> includes a calculated value based on a difference between the value of the analog input signal IN at time T<b>1</b> and a target value, it does not include any calculated value based on a difference between the value of the analog input signal IN at time T<b>2</b> and the target value. Therefore, the error calculating circuit suffers from low accuracy for analog signal control, and a long time for convergence of the amplitude of the analog input signal IN to a fixed value.</p>
<heading id="h-0002" level="1">SUMMARY OF THE INVENTION</heading>
<p id="p-0025" num="0024">It is an object of the present invention to provide an analog signal control method, an analog signal controller, and an AGC which are capable of accurately controlling an analog signal irrespective of a latency.</p>
<p id="p-0026" num="0025">To achieve the above object, the present invention provides an analog signal control method. The method includes the steps of converting the analog signal to a digital signal, performing an arithmetic processing of the digital signal to generate a control signal for controlling the analog signal, delaying the analog signal corresponding to a latency caused by the generation of the control signal to generate a delayed analog signal, and controlling the delayed analog signal in accordance with the control signal.</p>
<p id="p-0027" num="0026">A further perspective of the present invention is an analog signal control method. The method includes the steps of converting the analog signal to a digital signal, performing an arithmetic processing of the digital signal to generate a control signal for controlling the analog signal, delaying the analog signal corresponding to a latency caused by the generation of the control signal in synchronism with a clock signal to generate a delayed analog signal, and controlling the delayed analog signal in accordance with the control signal.</p>
<p id="p-0028" num="0027">A further perspective of the present invention is an analog signal controller. The controller includes an ADC for analog-to-digital converting an analog signal to generate a digital signal. A digital arithmetic circuit is connected to the ADC for performing an arithmetic processing of the digital signal to generate a control signal for controlling the analog signal. A delay circuit receives the analog signal, and delays the analog signal corresponding to a latency caused by the ADC and the digital arithmetic circuit to generate a delayed analog signal. An analog control circuit is connected to the digital arithmetic circuit and the delay circuit for controlling the delayed analog input signal in accordance with the control signal.</p>
<p id="p-0029" num="0028">A further perspective of the present invention is an automatic gain controller. The controller includes a first control loop for receiving an analog signal to generate a control signal for setting a predetermined gain for use in amplifying the analog signal. A delay circuit receives the analog signal, and delays the analog signal corresponding to a latency caused by the first control loop to generate a delayed analog signal. A GCA is connected to the delay circuit and the first control loop for amplifying the delayed analog signal in accordance with a predetermined gain set by the control signal to generate an amplified analog signal.</p>
<p id="p-0030" num="0029">A further perspective of the present invention is an automatic gain controller. The controller includes a first control loop, a delay circuit, and a second GCA. The first control loop includes a first GCA, an ADC, an error calculating circuit, and a DAC. The first GCA amplifies the analog signal in accordance with a first predetermined gain to generate a first amplified analog signal. The ADC is connected to the first GCA for analog-to-digital converting the first amplified analog signal to generate a digital signal. The error calculating circuit is connected to the ADC for calculating an error between a target value which is set such that the first amplified analog signal substantially covers a full range for an input level of the ADC, and the digital signal to generate an error digital signal in accordance with the error. The DAC is connected to the error calculating circuit for digital-to-analog converting the error digital signal to generate a control signal for setting a second predetermined gain. The delay circuit delays the analog signal corresponding to a latency occurring in the first control loop to generate a delayed analog signal. The second GCA is connected to the delay circuit and the first control loop for amplifying the delayed analog signal in accordance with the second predetermined gain set by the control signal to generate a second amplified analog signal.</p>
<p id="p-0031" num="0030">A further perspective of the present invention is an automatic gain controller. The controller includes a first ADC for sampling an analog signal to generate a first plurality of sampling values the first ADC generates a first digital signal in accordance with the first plurality of sampling values. A first average processing circuit is connected to the first ADC for calculating an average value of the first plurality of sampling values in accordance with the first digital signal to generate a first average value signal indicative of the calculated average value. A first gain selector circuit is connected to the first average processing circuit for selecting a first gain for controlling the analog signal in accordance with the average value of the first average value signal, and generating a first control signal in accordance with the selected first gain. A first delay circuit receives the analog signal, and delays the analog signal corresponding to a first latency occurring in the first ADC, the first average processing circuit, and the first gain selector circuit to generate a first delayed analog signal. A gain switching amplifier is connected to the first delay circuit and the first gain selector circuit for amplifying the first delayed analog signal in accordance with the first gain selected by the first control signal to generate a first amplified analog signal.</p>
<p id="p-0032" num="0031">Other aspects and advantages of the invention will become apparent from the following description, taken in conjunction with the accompanying drawings, illustrating by way of example the principles of the invention.</p>
<?BRFSUM description="Brief Summary" end="tail"?>
<?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?>
<description-of-drawings>
<heading id="h-0003" level="1">BRIEF DESCRIPTION OF THE DRAWINGS</heading>
<p id="p-0033" num="0032">The invention, together with objects and advantages thereof, may best be understood by reference to the following description of the presently preferred embodiments together with the accompanying drawings in which:</p>
<p id="p-0034" num="0033"><figref idref="DRAWINGS">FIG. 1</figref> is a schematic block diagram of a conventional analog signal controller;</p>
<p id="p-0035" num="0034"><figref idref="DRAWINGS">FIG. 2</figref> is a schematic block diagram of a conventional AGC;</p>
<p id="p-0036" num="0035"><figref idref="DRAWINGS">FIG. 3</figref> is a schematic block diagram of an error calculating circuit included in the AGC of <figref idref="DRAWINGS">FIG. 2</figref>;</p>
<p id="p-0037" num="0036"><figref idref="DRAWINGS">FIG. 4</figref> is a timing waveform chart associated with the conventional AGC;</p>
<p id="p-0038" num="0037"><figref idref="DRAWINGS">FIG. 5</figref> is a schematic block diagram of an analog signal controller according to a first embodiment of the present invention;</p>
<p id="p-0039" num="0038"><figref idref="DRAWINGS">FIG. 6</figref> is a waveform chart of analog signals in the analog signal controller of <figref idref="DRAWINGS">FIG. 5</figref>;</p>
<p id="p-0040" num="0039"><figref idref="DRAWINGS">FIG. 7</figref> is a schematic diagram showing a capacitor of the analog signal controller of <figref idref="DRAWINGS">FIG. 5</figref>;</p>
<p id="p-0041" num="0040"><figref idref="DRAWINGS">FIG. 8</figref> is a schematic block diagram of an analog signal controller according to a second embodiment of the present invention;</p>
<p id="p-0042" num="0041"><figref idref="DRAWINGS">FIG. 9</figref> is a schematic circuit diagram of a delay circuit in the analog signal controller of <figref idref="DRAWINGS">FIG. 8</figref>;</p>
<p id="p-0043" num="0042"><figref idref="DRAWINGS">FIG. 10</figref> is a schematic circuit diagram of a buffer in the analog signal controller of <figref idref="DRAWINGS">FIG. 8</figref>;</p>
<p id="p-0044" num="0043"><figref idref="DRAWINGS">FIG. 11</figref> is a circuit diagram for explaining the operation of the delay circuit in <figref idref="DRAWINGS">FIG. 9</figref>;</p>
<p id="p-0045" num="0044"><figref idref="DRAWINGS">FIG. 12</figref> is a circuit diagram for explaining the operation of the delay circuit in <figref idref="DRAWINGS">FIG. 9</figref>;</p>
<p id="p-0046" num="0045"><figref idref="DRAWINGS">FIG. 13</figref> is a waveform chart showing respective input signals to the delay circuit in <figref idref="DRAWINGS">FIG. 9</figref>;</p>
<p id="p-0047" num="0046"><figref idref="DRAWINGS">FIGS. 14-19</figref> are circuit diagrams illustrating an operating state of the delay circuit in <figref idref="DRAWINGS">FIG. 9</figref>;</p>
<p id="p-0048" num="0047"><figref idref="DRAWINGS">FIG. 20</figref> is a timing chart showing a delay of an analog signal;</p>
<p id="p-0049" num="0048"><figref idref="DRAWINGS">FIG. 21</figref> is a schematic block diagram of an AGC according to a third embodiment of the present invention;</p>
<p id="p-0050" num="0049"><figref idref="DRAWINGS">FIG. 22</figref> is a schematic block diagram of an AGC according to a fourth embodiment of the present invention;</p>
<p id="p-0051" num="0050"><figref idref="DRAWINGS">FIG. 23</figref> is a schematic block diagram of an AGC according to a fifth embodiment of the present invention;</p>
<p id="p-0052" num="0051"><figref idref="DRAWINGS">FIG. 24</figref> is a schematic block diagram of an average processing circuit and a gain selector circuit in the AGC of <figref idref="DRAWINGS">FIG. 23</figref>;</p>
<p id="p-0053" num="0052"><figref idref="DRAWINGS">FIG. 25</figref> is a waveform chart showing exemplary sampling of an analog signal;</p>
<p id="p-0054" num="0053"><figref idref="DRAWINGS">FIG. 26</figref> is a schematic block diagram of the average processing circuit and the gain selector circuit in the AGC of <figref idref="DRAWINGS">FIG. 23</figref>;</p>
<p id="p-0055" num="0054"><figref idref="DRAWINGS">FIG. 27</figref> is a schematic block diagram of an AGC according to a sixth embodiment of the present invention;</p>
<p id="p-0056" num="0055"><figref idref="DRAWINGS">FIG. 28</figref> is a schematic block diagram of an AGC according to a seventh embodiment of the present invention;</p>
<p id="p-0057" num="0056"><figref idref="DRAWINGS">FIG. 29</figref> is a schematic block diagram of an AGC according to an eighth embodiment of the present invention;</p>
<p id="p-0058" num="0057"><figref idref="DRAWINGS">FIG. 30</figref> is a waveform chart showing an example of phase servo for a hard disk drive;</p>
<p id="p-0059" num="0058"><figref idref="DRAWINGS">FIG. 31</figref> is a schematic circuit diagram of a delay circuit in the AGC of <figref idref="DRAWINGS">FIG. 29</figref>;</p>
<p id="p-0060" num="0059"><figref idref="DRAWINGS">FIG. 32</figref> is a schematic block diagram of an average processing circuit and a gain selector circuit in the AGC of <figref idref="DRAWINGS">FIG. 29</figref>;</p>
<p id="p-0061" num="0060"><figref idref="DRAWINGS">FIG. 33</figref> is a schematic block diagram of another average processing circuit and gain selector circuit in the AGC of <figref idref="DRAWINGS">FIG. 29</figref>;</p>
<p id="p-0062" num="0061"><figref idref="DRAWINGS">FIG. 34</figref> is a schematic block diagram of another AGC; and</p>
<p id="p-0063" num="0062"><figref idref="DRAWINGS">FIG. 35</figref> is a schematic block diagram of an average processing circuit and a GCA control voltage generator circuit in the AGC of <figref idref="DRAWINGS">FIG. 34</figref>.</p>
</description-of-drawings>
<?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?>
<?DETDESC description="Detailed Description" end="lead"?>
<heading id="h-0004" level="1">DETAILED DESCRIPTION OF THE PREFERRED EMBODIMENTS</heading>
<p id="p-0064" num="0063">In the drawings, like numerals are used for like elements throughout.</p>
<heading id="h-0005" level="1">First Embodiment</heading>
<p id="p-0065" num="0064"><figref idref="DRAWINGS">FIG. 5</figref> is a schematic circuit block diagram of an analog signal controller <b>11</b> according to a first embodiment of the present invention. The analog signal controller <b>11</b> includes an analog delay circuit (hereinafter referred to as delay circuit) <b>12</b>, an analog control circuit <b>13</b>, an A/D converter circuit (hereinafter referred to as ADC) <b>14</b>, and a digital arithmetic circuit <b>15</b>.</p>
<p id="p-0066" num="0065">The analog signal controller <b>11</b> receives an analog input signal (for example, data read from a recording medium) IN, and performs predetermined processing on the analog input signal (analog signal) IN. The processed analog input signal IN is supplied to a next circuit <b>16</b>.</p>
<p id="p-0067" num="0066">The analog input signal IN is supplied to the delay circuit <b>12</b> and ADC <b>14</b>. The ADC <b>14</b> converts the analog input signal IN to generate a digital signal S<b>1</b>. The digital signal S<b>1</b> is supplied to the digital arithmetic circuit <b>15</b>.</p>
<p id="p-0068" num="0067">The arithmetic circuit <b>15</b> executes predetermined arithmetic processing in accordance with the digital signal S<b>1</b> to generate a control signal S<b>2</b> in accordance with the processing result. The control signal S<b>2</b> is supplied to the control circuit <b>13</b>. The ADC <b>14</b> and the digital arithmetic circuit <b>15</b> receive a clock signal CLK generated, for example, by a PLL circuit, not shown, and operate in accordance with the clock signal CLK.</p>
<p id="p-0069" num="0068">The delay circuit <b>12</b> delays the analog input signal IN in accordance with a predetermined delay value to generate an analog delay signal S<b>3</b>. The analog delay signal S<b>3</b> is supplied to the control circuit <b>13</b>. More specifically, the predetermined delay value is set to be equal to a control delay value (latency) in the ADC <b>14</b> and the digital arithmetic circuit <b>15</b> (i.e., a path for generating the control signal S<b>2</b>). The predetermined delay value is set by the capacitance of one or more capacitors provided in the delay circuit <b>12</b>. Therefore, the delay of the analog delay signal S<b>3</b> is equal to the sum of latencies of the ADC <b>14</b> and the arithmetic circuit <b>15</b>.</p>
<p id="p-0070" num="0069">The delay circuit <b>12</b> includes a capacitor (not shown) with a predetermined capacitance value. Alternatively, a variable capacitor C<b>1</b> capable of varying the capacitance may be connected to the delay circuit <b>12</b> to adjust the variable capacitor C<b>1</b> as appropriate, as illustrated in <figref idref="DRAWINGS">FIG. 7</figref>.</p>
<p id="p-0071" num="0070">The analog control circuit <b>13</b> controls the analog delay signal S<b>3</b> in accordance with the digital control signal S<b>2</b> supplied from the digital arithmetic circuit <b>15</b> to generate a control signal S<b>4</b>. The control signal S<b>4</b> is supplied to the next circuit <b>16</b>. The analog control circuit <b>13</b> generates the analog or digital control signal S<b>4</b> depending on the circuit configuration (an analog circuit or a digital circuit) of the next circuit <b>16</b>.</p>
<p id="p-0072" num="0071">The analog input signal IN is converted to the digital signal S<b>1</b> through the ADC <b>14</b>, and the digital arithmetic circuit <b>15</b> processes the digital signal S<b>1</b> to generate the digital control signal S<b>2</b>. The digital control signal S<b>2</b> is supplied to the analog control circuit <b>13</b>. The analog input signal IN is also supplied to the delay circuit <b>12</b>. The delay circuit <b>12</b> delays the analog input signal IN such that the delay is substantially equal to the latency in the ADC <b>14</b> and the arithmetic circuit <b>15</b> to generate the analog delay signal S<b>3</b>. The analog delay signal S<b>3</b> is supplied to the analog control circuit <b>13</b> which controls the analog delay signal S<b>3</b>, having substantially the same value as the signal value of the analog input signal IN sampled in the ADC <b>14</b>, in accordance with the digital control signal S<b>2</b>.</p>
<p id="p-0073" num="0072">Next, the action of the analog signal controller <b>11</b> will be described. <figref idref="DRAWINGS">FIG. 6</figref> is a waveform chart showing the action of the analog signal controller <b>11</b>.</p>
<p id="p-0074" num="0073">At time T<b>1</b> in <figref idref="DRAWINGS">FIG. 6</figref>, the ADC <b>14</b> receives an analog input signal IN, and samples the analog input signal IN. The ADC <b>14</b> converts the analog input signal IN, which is sampled and held thereby, to a digital signal S<b>1</b> (time T<b>2</b>). Next, the digital arithmetic circuit <b>15</b> processes the digital signal S<b>1</b> to generate a digital control signal S<b>2</b>, and supplies the digital control signal S<b>2</b> to the analog control circuit <b>13</b> at time T<b>3</b>.</p>
<p id="p-0075" num="0074">In this event, a delay value corresponding to a latency (T<b>3</b>−T<b>1</b>) is set in the delay circuit <b>12</b>, so that the delay circuit <b>12</b> delays the analog input signal IN by the delay value (T<b>3</b>−T<b>1</b>) to generate an analog delay signal S<b>3</b>. The analog delay signal S<b>3</b> is supplied to the control circuit <b>13</b>. As a result, the signal value (V<b>1</b>) of the analog input signal IN sampled by the ADC <b>14</b> at time T<b>1</b> is substantially identical to the signal value (V<b>1</b>′) of the analog delay signal S<b>4</b> controlled by the control circuit <b>13</b> at time T<b>3</b>.</p>
<p id="p-0076" num="0075">At time T<b>3</b> in <figref idref="DRAWINGS">FIG. 6</figref>, the signal value (V<b>2</b>) of the analog input signal IN is shown when the delay circuit <b>12</b> is not provided as is common in the prior art. Conventionally, due to the influence of the latency of the delay value (T<b>3</b>−T<b>1</b>), the digital control signal S<b>2</b> generated in accordance with the analog input signal sampled at time T<b>1</b> controls the analog input signal IN having the signal value (V<b>2</b>) at time T<b>3</b>.</p>
<p id="p-0077" num="0076">The analog signal controller <b>11</b> according to the first embodiment has the following advantages.</p>
<p id="p-0078" num="0077">(1) The delay circuit <b>12</b> of the analog signal controller <b>11</b> delays the analog input signal IN by a time substantially corresponding to the latency in the path (ADC <b>14</b> and digital arithmetic circuit <b>15</b>) for generating the digital control signal S<b>2</b>. The analog control circuit <b>13</b> controls the analog delay signal S<b>3</b> having substantially the same value as the signal of the analog input signal IN sampled and held by the ADC <b>14</b> in accordance with the digital control signal S<b>2</b>. This prevents a delay in the control timing for the analog input signal IN resulting from the latency in the path for generating the digital control signal S<b>2</b>.</p>
<p id="p-0079" num="0078">(2) By setting a delay corresponding to a possibly occurring latency in the delay circuit <b>12</b>, a delay in the control timing can be prevented irrespective of the latency, thereby achieving an appropriate control for an analog signal. A highly accurate analog signal control is provided to realize an analog signal control which is capable of rapidly converging an analog input signal IN.</p>
<heading id="h-0006" level="1">Second Embodiment</heading>
<p id="p-0080" num="0079"><figref idref="DRAWINGS">FIG. 8</figref> is a schematic block diagram of an analog signal controller <b>21</b> according to a second embodiment of the present invention. The analog signal controller <b>21</b> of the second embodiment differs from the analog signal controller <b>11</b> of the first embodiment only in the analog delay circuit.</p>
<p id="p-0081" num="0080">An analog delay circuit (hereinafter referred to as delay circuit) <b>22</b> in the analog signal controller <b>21</b> of the second embodiment receives a clock signal CLK, and delays an analog input signal IN in synchronism with the clock signal CLK. The delay circuit <b>22</b> includes a plurality of delay stages for generating a predetermined delay time.</p>
<p id="p-0082" num="0081">In the analog signal controller <b>21</b>, an analog control circuit <b>13</b> controls a signal value (V<b>1</b>′) of an analog delay signal S<b>3</b>, which is substantially identical to a signal value (V<b>1</b>) of the analog input signal IN sampled by an ADC <b>14</b>, with a digital control signal S<b>2</b> (see <figref idref="DRAWINGS">FIG. 6</figref>).</p>
<p id="p-0083" num="0082"><figref idref="DRAWINGS">FIG. 9</figref> is a schematic circuit diagram of the delay circuit <b>22</b>. The delay circuit <b>22</b> has two stages of delays to delay the analog input signal, for example, by a time corresponding to two clock pulses of the clock signal CLK.</p>
<p id="p-0084" num="0083">The delay circuit <b>22</b> includes first to fourth buffers <b>31</b><i>a </i>to <b>31</b><i>d</i>, first to eighth switching elements (hereinafter referred to as switches) <b>32</b><i>a </i>to <b>32</b><i>h</i>, and first to fourth capacitors <b>33</b><i>a </i>to <b>33</b><i>d. </i></p>
<p id="p-0085" num="0084">The first buffer <b>31</b><i>a </i>is connected to the second buffer <b>31</b><i>b </i>through the first and second switches <b>32</b><i>a</i>, <b>32</b><i>b</i>, while the second buffer <b>31</b><i>b </i>is connected to the fourth buffer <b>31</b><i>d </i>through the third and fourth switches <b>32</b><i>c</i>, <b>32</b><i>d</i>. The first buffer <b>31</b><i>a </i>is also connected to the third buffer <b>31</b><i>c </i>through the fifth and sixth switches <b>32</b><i>e</i>, <b>32</b><i>f</i>, while the buffer <b>31</b><i>c </i>is connected to the fourth buffer <b>31</b><i>d </i>through the seventh and eighth switches <b>32</b><i>g</i>, <b>32</b><i>h. </i></p>
<p id="p-0086" num="0085">The first capacitor <b>33</b><i>a </i>has a first end connected to a node N<b>1</b> between the first and second switches <b>32</b><i>a</i>, <b>32</b><i>b</i>, and a second end connected to a ground GND. The second capacitor <b>33</b><i>b </i>has a first end connected to a node N<b>2</b> between the third and fourth switches <b>32</b><i>c</i>, <b>32</b><i>d</i>, and a second end connected to the ground GND.</p>
<p id="p-0087" num="0086">The third capacitor <b>33</b><i>c </i>has a first end connected to a node N<b>3</b> between the fifth and sixth switches <b>32</b><i>e</i>, <b>32</b><i>f</i>, and a second end connected to the ground GND. The fourth capacitor <b>33</b><i>d </i>has a first end connected to a node N<b>4</b> between the seventh and eighth switches <b>32</b><i>g</i>, <b>32</b><i>h</i>, and a second end connected to the ground GND.</p>
<p id="p-0088" num="0087">The first to fourth buffers <b>31</b><i>a </i>to <b>31</b><i>d </i>of the second embodiment include an operational amplifier which has a voltage follower function with an amplification ratio equal to “1”, for example, as illustrated in <figref idref="DRAWINGS">FIG. 10</figref>. However, the first to fourth buffers <b>31</b><i>a </i>to <b>31</b><i>d </i>may include an operational amplifier with an amplification ratio other than “1”. The first to fourth capacitors <b>33</b><i>a </i>to <b>33</b><i>d </i>may be variable capacitors illustrated in <figref idref="DRAWINGS">FIG. 7</figref>.</p>
<p id="p-0089" num="0088">Each of the first to eighth switches <b>32</b><i>a </i>to <b>32</b><i>h </i>includes, for example, an N-channel MOS transistor, and the respective first to eighth switches <b>32</b><i>a </i>to <b>32</b><i>h </i>are substantially equal. Therefore, the first to eighth switches <b>32</b><i>a </i>to <b>32</b><i>h </i>turn on in response to a control signal at H level, and turn off in response to a control signal at L level.</p>
<p id="p-0090" num="0089">The first, fourth, sixth and seventh switches <b>32</b><i>a</i>, <b>32</b><i>d</i>, <b>32</b><i>f</i>, <b>32</b><i>g </i>(hereinafter referred to as the first switch group) and the second, third, fifth and eighth switches <b>32</b><i>b</i>, <b>32</b><i>c</i>, <b>32</b><i>e</i>, <b>32</b><i>h </i>(hereinafter referred to as the second switch group) turn on/off complementary to each other. The second switch group receives a second control signal SG<b>2</b> which is an inversion of a first control signal SG<b>1</b> for switching the first switching group. Therefore, the first and second switches <b>32</b><i>a</i>, <b>32</b><i>b</i>; the third and fourth switches <b>32</b><i>c</i>, <b>32</b><i>d</i>; the fifth and sixth switches <b>32</b><i>e</i>, <b>32</b><i>f</i>; and the seventh and eighth switches <b>32</b><i>g</i>, <b>32</b><i>h </i>turn on/off complementary to each other.</p>
<p id="p-0091" num="0090">As illustrated in <figref idref="DRAWINGS">FIG. 11</figref>, when the first switch group is turned on, for example, in response to the first control signal SG<b>1</b> at H level, the second switch group is turned off. In this event, a signal value (voltage) of an analog input signal IN supplied to the first buffer <b>31</b><i>a </i>is held on the first capacitor <b>33</b><i>a </i>through the first switch <b>32</b><i>a </i>which has turned on. A voltage held on the second capacitor <b>33</b><i>b </i>is supplied to the fourth buffer <b>31</b><i>d </i>through the fourth switch <b>32</b><i>d </i>which has turned on. A voltage held on the third capacitor <b>33</b><i>c </i>is held on the fourth capacitor <b>33</b><i>d </i>through the sixth and seventh switches <b>32</b><i>f</i>, <b>32</b><i>g</i>, which have turned on, and the third buffer <b>31</b><i>c. </i></p>
<p id="p-0092" num="0091">As illustrated in <figref idref="DRAWINGS">FIG. 12</figref>, when the first switch group is turned off in response to the first control signal SG<b>1</b> at L level, the second switch group is turned on. In this event, a voltage held on the first capacitor <b>33</b><i>a </i>is held on the second capacitor <b>33</b><i>b </i>through the second and third switches <b>32</b><i>b</i>, <b>32</b><i>c</i>, which have turned on, and the second buffer <b>31</b><i>b</i>. A voltage supplied to the first buffer <b>31</b><i>a </i>is held on the third capacitor <b>33</b><i>c </i>through the fifth switch <b>32</b><i>e </i>which has turned on. A voltage held on the fourth capacitor <b>33</b><i>d </i>is supplied to the fourth buffer <b>31</b><i>d </i>through the eighth switch <b>32</b><i>h </i>which has turned on.</p>
<p id="p-0093" num="0092"><figref idref="DRAWINGS">FIG. 13</figref> is a waveform chart showing respective input signals to the delay circuit <b>22</b>.</p>
<p id="p-0094" num="0093">The first control signal SG<b>1</b> and the second control signal SG<b>2</b> are generated in accordance with the clock signal CLK. At times T<b>1</b>, T<b>2</b>, T<b>3</b>, T<b>4</b>, T<b>5</b>, T<b>6</b> in <figref idref="DRAWINGS">FIG. 12</figref>, the ADC <b>14</b> samples a signal value (voltage) of an analog input signal IN. In this event, respective samples and held voltages are Vt<b>1</b>, Vt<b>2</b>, Vt<b>3</b>, Vt<b>4</b>, Vt<b>5</b>, Vt<b>6</b>, respectively.</p>
<p id="p-0095" num="0094">When the analog input signal IN is sampled in response to a rising edge (at time T<b>1</b> to T<b>6</b>) of the clock signal CLK, the first and second control signals SG<b>1</b>, SG<b>2</b> have a frequency half that of the clock signal CLK.</p>
<p id="p-0096" num="0095"><figref idref="DRAWINGS">FIGS. 14 to 19</figref> illustrate the operation of the delay circuit <b>22</b> in response to the first and second control signals SG<b>1</b>, SG<b>2</b>.</p>
<p id="p-0097" num="0096">At time T<b>1</b> in <figref idref="DRAWINGS">FIG. 13</figref>, the first switch group is turned on in response to the first control signal SG<b>1</b> at H level, while the second switch group is turned off in response to the second control signal SG<b>2</b> at L level. In this event, as illustrated in <figref idref="DRAWINGS">FIG. 14</figref>, the voltage Vt<b>1</b> supplied to the first buffer <b>31</b><i>a </i>is held on the first capacitor <b>33</b><i>a </i>through the first switch <b>32</b><i>a </i>which has turned on.</p>
<p id="p-0098" num="0097">Next, at time T<b>2</b>, the first switch group is turned off in response to the first control signal at L level, while the second switch group is turned on in response to the second control signal SG<b>2</b> at H level. In this event, as illustrated in <figref idref="DRAWINGS">FIG. 15</figref>, the voltage Vt<b>1</b> held on the first capacitor <b>33</b><i>a </i>is held on the second capacitor <b>33</b><i>b </i>through the second and third switches <b>32</b><i>b</i>, <b>32</b><i>c</i>, which have turned on, and the second buffer <b>31</b><i>b</i>. Further, the voltage Vt<b>2</b> supplied to the first buffer <b>31</b><i>a </i>is held on the third capacitor <b>33</b><i>c </i>through the fifth switch <b>32</b><i>e </i>which has turned on.</p>
<p id="p-0099" num="0098">Next, at time T<b>3</b>, the first switch group is turned on in response to the first control signal SG<b>1</b> at H level, while the second switch group is turned off in response to the second control signal SG<b>2</b> at L level. In other words, the switching state of the delay circuit <b>22</b> at time T<b>3</b> is substantially equal to that at time T<b>1</b>. In this event, as illustrated in <figref idref="DRAWINGS">FIG. 16</figref>, the voltage Vt<b>1</b> held on the second capacitor <b>33</b><i>b </i>is supplied to the fourth buffer <b>31</b><i>d </i>through the fourth switch <b>32</b><i>d </i>which has turned on. The voltage Vt<b>2</b> held on the third capacitor <b>33</b><i>c </i>is held on the fourth capacitor <b>33</b><i>d </i>through the sixth and seventh switches <b>32</b><i>f</i>, <b>32</b><i>g</i>, which have turned on, and the third buffer <b>31</b><i>c</i>. Further, the voltage Vt<b>3</b> supplied to the first buffer <b>31</b><i>a </i>at this time is held on the first capacitor <b>33</b><i>a </i>through the first switch <b>32</b><i>a </i>which has turned on.</p>
<p id="p-0100" num="0099">Subsequently, in a similar manner, the first switch group and the second switch group are alternately turned on and off at times T<b>4</b> to T<b>6</b>, so that the voltages Vt<b>4</b> to Vt<b>6</b> supplied to the first buffer <b>31</b><i>a </i>are transmitted to switches, which have turned on, and buffers, as illustrated in <figref idref="DRAWINGS">FIGS. 17 to 19</figref>. At each time T<b>4</b>, TS, T<b>6</b>, the voltages Vt<b>2</b>, Vt<b>3</b>, Vt<b>4</b> are sequentially supplied to the fourth buffer <b>31</b><i>d. </i></p>
<p id="p-0101" num="0100"><figref idref="DRAWINGS">FIG. 20</figref> is a timing chart illustrating delays for signal values (voltages Vt<b>1</b> to Vt<b>6</b>) of the analog input signal IN.</p>
<p id="p-0102" num="0101">As illustrated in <figref idref="DRAWINGS">FIG. 20</figref>, the voltage Vt<b>1</b> supplied to the first buffer <b>31</b><i>a </i>at time T<b>1</b> is supplied to the fourth buffer <b>31</b><i>d </i>at time T<b>3</b>. In this event, the voltage vt<b>1</b> is delayed by two clock pulses of the clock signals CLK, and the delayed voltage Vt<b>1</b> is supplied to the fourth buffer <b>31</b><i>d</i>. The voltages Vt<b>2</b> to Vt<b>6</b> sequentially supplied to the first buffer <b>31</b><i>a </i>at times T<b>2</b> to T<b>6</b> are similarly delayed by two clock pulses of the clock signal CLK, and the delayed voltages Vt<b>2</b> to Vt<b>6</b> are sequentially supplied to the fourth buffer <b>31</b><i>d. </i></p>
<p id="p-0103" num="0102">The analog signal controller <b>21</b> of the second embodiment has the following advantage.</p>
<p id="p-0104" num="0103">The delay circuit <b>22</b> delays the analog input signal IN in accordance with the clock signal CLK. For this reason, the delay circuit <b>22</b> can accurately delay the analog input signal IN, and a delay in the control timing is prevented for the analog input signal IN.</p>
<heading id="h-0007" level="1">Third Embodiment</heading>
<p id="p-0105" num="0104"><figref idref="DRAWINGS">FIG. 21</figref> is a schematic block diagram of an automatic gain controller (hereinafter referred to as AGC) <b>41</b> according to a third embodiment of the present invention. The analog signal controller <b>21</b> of the second embodiment is applied to the AGC <b>41</b>.</p>
<p id="p-0106" num="0105">The AGC <b>41</b> includes a low pass filter (hereinafter referred to as LPF) <b>42</b>, an analog delay circuit (hereinafter referred to as delay circuit) <b>43</b>, a first and a second gain control amplifier (hereinafter referred to as GCA) <b>44</b>, <b>45</b>, a first and a second A/D converter circuit (hereinafter referred to as ADC) <b>46</b>, <b>47</b>, an error calculating circuit <b>48</b>, and a D/A converter circuit (hereinafter referred to as DAC) <b>49</b>.</p>
<p id="p-0107" num="0106">The GCA <b>44</b>, the ADC <b>46</b>, the error calculating circuit <b>48</b> and the DAC <b>49</b> form a control loop (first control loop) R<b>1</b>. A control signal (an output signal of the DAC <b>49</b>) S<b>12</b> for the control loop R<b>1</b> is fed back to the first GCA <b>44</b> and the second GCA <b>45</b>. The delay circuit <b>43</b>, the first and second ADCs <b>46</b>, <b>47</b>, and the error calculating circuit <b>48</b> operate in accordance with a clock signal CLK supplied from a PLL circuit, not shown.</p>
<p id="p-0108" num="0107">The analog input signal IN is supplied to the LPF <b>42</b>. The LPF <b>42</b> removes high frequency components from the analog input signal IN to generate an analog signal S<b>11</b> which is supplied to the first GCA <b>44</b> and the delay circuit <b>43</b>.</p>
<p id="p-0109" num="0108">The first GCA <b>44</b> sets a first gain in accordance with the control signal S<b>12</b>. The first GCA <b>44</b> amplifies the analog signal S<b>11</b> in accordance with the first gain to generate a first amplified analog signal S<b>13</b> which is supplied to the first ADC <b>46</b>. The first ADC <b>46</b> analog-to-digital converts the first amplified analog signal S<b>13</b> to generate a digital signal S<b>14</b>. The digital signal S<b>14</b> is supplied to the error calculating circuit <b>48</b>.</p>
<p id="p-0110" num="0109">The error calculating circuit <b>48</b> compares the digital signal S<b>14</b> with a predetermined target value, and integrates an error component resulting from the comparison to generate an error digital signal S<b>15</b>. The error digital signal S<b>15</b> is supplied to the DAC <b>49</b>. The target value is such a value that causes the amplitude of the amplified analog signal S<b>13</b> to substantially cover the full range of the input level of the first ADC <b>46</b>. The error calculating circuit <b>48</b> is substantially equal in configuration to the error calculating circuit <b>125</b> in <figref idref="DRAWINGS">FIG. 2</figref>.</p>
<p id="p-0111" num="0110">The DAC <b>49</b> digital-to-analog converts the error digital signal S<b>15</b> to generate a control signal S<b>12</b>. That is, the control loop R<b>1</b> generates the control signal S<b>12</b> in accordance with the first amplified analog signal S<b>13</b> of the first GCA <b>44</b>, and optimizes the gain of the first GCA <b>44</b> in accordance with the control signal S<b>12</b>.</p>
<p id="p-0112" num="0111">A latency caused by the control loop R<b>1</b> is substantially equal to a latency caused by the error calculating circuit <b>48</b>. For this reason, the delay circuit <b>43</b> generates a delay which corresponds to the latency caused by the error calculating circuit <b>48</b>.</p>
<p id="p-0113" num="0112">Specifically, the delay circuit <b>43</b> delays the analog signal S<b>11</b> in synchronism with the clock signal CLK. The delay circuit <b>43</b> includes three delay stages (see <figref idref="DRAWINGS">FIG. 9</figref>) connected in series, for generating a delay equal to three clock pulses of the clock signal CLK. The delay circuit <b>43</b> delays the analog signal S<b>11</b> by a time corresponding to three clock pulses of the clock signal CLK in accordance with the clock signal CLK to generate a delayed analog signal S<b>16</b>. The delayed analog signal S<b>16</b> is supplied to the second GCA <b>45</b>.</p>
<p id="p-0114" num="0113">The second GCA <b>45</b> sets a second gain in accordance with the feedback signal S<b>12</b>. The second GCA <b>45</b> amplifies the delayed analog signal S<b>16</b> in accordance with the second gain to generate a second amplified analog signal S<b>17</b>. The second amplified analog signal S<b>17</b> is supplied to the second ADC <b>47</b>. The second ADC <b>47</b> analog-to-digital converts the second amplified analog signal S<b>17</b> to generate a second digital signal S<b>18</b>. The second digital signal S<b>18</b> is supplied to a digital circuit (next circuit).</p>
<p id="p-0115" num="0114">When the next circuit is an analog circuit, the analog circuit is supplied with the second amplified analog signal S<b>17</b> from the second GCA <b>45</b>.</p>
<p id="p-0116" num="0115">Next, the action of the AGC <b>41</b> will be described.</p>
<p id="p-0117" num="0116">The analog signal S<b>11</b> is supplied to the first GCA <b>44</b> and delay circuit <b>43</b> in the control loop R<b>1</b>. In the control loop R<b>1</b>, an error is calculated for the first amplified analog signal S<b>13</b> generated by the first GCA <b>44</b>, and the control signal S<b>12</b> generated to optimize the gain of the first GCA <b>44</b> is fed back to the first GCA <b>44</b>. The control signal S<b>12</b> is supplied to the second GCA <b>45</b>.</p>
<p id="p-0118" num="0117">The second GCA <b>45</b> receives the delayed analog signal S<b>16</b> from the delay circuit <b>43</b>. A delay substantially equal to the latency in the control loop R<b>1</b> has been set in the delay circuit <b>43</b>. For this reason, the second GCA <b>45</b> amplifies the delayed analog signal S<b>16</b> with a predetermined amplification ratio in accordance with the control signal S<b>12</b> to generate the second amplified analog signal S<b>17</b>, without being affected by the latency caused by the control loop R<b>1</b>.</p>
<p id="p-0119" num="0118">In the AGC <b>41</b>, the second GCA <b>45</b> is supplied as appropriate with the control signal S<b>12</b> for controlling the delayed analog signal S<b>16</b> irrespective of the latency caused by the control loop R<b>1</b>.</p>
<p id="p-0120" num="0119">In the third embodiment, the delay circuit <b>43</b> may generate the delayed analog signal S<b>16</b> which is delayed by the latency in the control loop R<b>1</b>. For example, the number of delay stages may be increased. In this case, a signal value of the delayed analog signal S<b>16</b> to be controlled can be controlled by the control signal S<b>12</b> which is generated in consideration of a signal value which is sampled after a signal value to be controlled. As a result, a more accurate analog signal control can be realized.</p>
<p id="p-0121" num="0120">The AGC <b>41</b> of the third embodiment has the following advantage.</p>
<p id="p-0122" num="0121">The delay circuit <b>43</b> generates the delayed analog signal S<b>16</b> which is delayed by a time substantially equal to the latency in the control loop R<b>1</b>. The second GCA <b>45</b> relies on the control signal S<b>12</b> to control the delayed analog signal S<b>16</b> which has a signal value substantially equal to the analog signal S<b>11</b> that is sampled in the control loop R<b>1</b>. Therefore, a delay in the control timing is prevented for the analog input signal IN, thereby making it possible to accomplish a highly accurate analog signal control.</p>
<heading id="h-0008" level="1">Fourth Embodiment</heading>
<p id="p-0123" num="0122"><figref idref="DRAWINGS">FIG. 22</figref> is a schematic block diagram of an AGC <b>51</b> according to a fourth embodiment of the present invention. The analog signal controller <b>21</b> of the second embodiment is applied to the AGC <b>51</b>. The AGC <b>51</b> of the fourth embodiment further includes a third GCA <b>52</b>, a second error calculating circuit <b>53</b>, and a second DAC <b>54</b>, in addition to the configuration of the AGC <b>41</b> in the third embodiment.</p>
<p id="p-0124" num="0123">The third GCA <b>52</b>, the second ADC <b>47</b>, the second error calculating circuit <b>53</b>, and the second DAC <b>54</b> form a second control loop R<b>2</b>. The second control loop is connected to the second GCA <b>45</b>. The second control loop R<b>2</b> is substantially equal in function to the first control loop R<b>1</b>.</p>
<p id="p-0125" num="0124">In the AGC <b>51</b>, a second amplified analog signal S<b>17</b> generated by the second GCA <b>45</b> is further subjected to an error calculation through the second control loop R<b>2</b> to optimize the gain of the third GCA <b>52</b>. For this reason, the second amplified analog signal S<b>17</b> can be satisfactorily provided with an amplitude corresponding to the input range of the second ADC <b>47</b>.</p>
<p id="p-0126" num="0125">In the fourth embodiment, first, the second GCA <b>45</b>, which is robust to the latency, roughly controls the gain, followed by the third GCA <b>52</b> which finely controls the gain. Therefore, the analog signal control is less affected by the latency caused by the control loop R<b>2</b>.</p>
<p id="p-0127" num="0126">The AGC <b>51</b> of the fourth embodiment has the following advantage.</p>
<p id="p-0128" num="0127">The second control loop R<b>2</b> again calculates an error for the second amplified analog signal S<b>17</b>. It is therefore possible to more finely control the gain as compared with the AGC <b>41</b> of the third embodiment. Since the third GCA <b>52</b> controls the second amplified analog signal S<b>17</b> which has been roughly controlled by the second GCA <b>45</b> for gain control, the analog signal control is less affected by the latency caused by the control loop R<b>2</b>.</p>
<heading id="h-0009" level="1">Fifth Embodiment</heading>
<p id="p-0129" num="0128"><figref idref="DRAWINGS">FIG. 23</figref> is a schematic block diagram of an AGC <b>61</b> according to a fifth embodiment of the present invention. The analog signal controller <b>21</b> of the second embodiment is applied to the AGC <b>61</b>. The AGC <b>61</b> of the fifth embodiment includes an LPF <b>62</b>, a first and a second ADC <b>63</b>, <b>64</b>, an analog delay circuit (hereinafter referred to as delay circuit) <b>65</b>, an average processing circuit <b>66</b>, a gain selector circuit <b>67</b>, and a gain switching amplifier <b>68</b>. The first and second ADCs <b>63</b>, <b>64</b>, the delay circuit <b>65</b>, the average processing circuit <b>66</b>, and the gain selector circuit <b>67</b> operate in accordance with the clock signal CLK.</p>
<p id="p-0130" num="0129">An analog input signal IN is supplied to the LPF <b>62</b>. The LPF <b>62</b> removes high frequency components from the analog input signal IN to generate an analog signal S<b>21</b>. The analog signal S<b>21</b> is supplied to the first ADC <b>63</b> and the delay circuit <b>65</b>.</p>
<p id="p-0131" num="0130">The first ADC <b>63</b> samples and holds the analog signal S<b>21</b>, and analog-to-digital converts the analog signal S<b>21</b> to generate a digital signal S<b>22</b>. The digital signal S<b>22</b> is supplied to the average processing circuit <b>66</b>. The average processing circuit <b>66</b> calculates an average value of a sampling value in accordance with the digital signal S<b>22</b>, which has the sampling value, to generate an average value signal S<b>23</b>. The average value signal S<b>23</b> is supplied to the gain selector circuit <b>67</b>.</p>
<p id="p-0132" num="0131">The gain selector circuit <b>67</b> selects a gain for the gain switching amplifier <b>68</b> in accordance with the average value signal S<b>23</b>, and generates a gain switching signal (control signal) S<b>24</b>. The gain switching signal S<b>24</b> is supplied to the gain switching amplifier <b>68</b>. The gain switching amplifier <b>68</b> switches the gain in accordance with the gain switching signal S<b>24</b>.</p>
<p id="p-0133" num="0132">The delay circuit <b>65</b> applies the analog signal S<b>21</b> with a delay corresponding to a latency occurring in the first ADC <b>63</b>, the average processing circuit <b>66</b> and the gain selector circuit <b>67</b> to generate a delayed analog signal S<b>25</b>. The delay circuit <b>65</b> delays the analog signal S<b>21</b> by a period equal to a number of clock pulses of the clock signal CLK corresponding to the latency.</p>
<p id="p-0134" num="0133">The gain switching amplifier <b>68</b> amplifies the delayed analog signal S<b>25</b> in accordance with a gain switched by the gain switching signal S<b>24</b> to generate an amplified analog signal S<b>26</b>. The amplified analog signal S<b>26</b> is supplied to the second ADC <b>46</b>. In this event, the gain switching amplifier <b>68</b> amplifies the delay analog signal S<b>25</b> which has substantially the same value as the signal value of the analog signal S<b>21</b>.</p>
<p id="p-0135" num="0134">The second ADC <b>64</b> analog-to-digital converts the amplified analog signal S<b>26</b> to generate a digital signal S<b>27</b>. The digital signal S<b>27</b> is supplied to a digital circuit (next circuit). When the next circuit is an analog circuit, the analog circuit receives the amplified analog signal S<b>26</b> from the gain switching amplifier <b>68</b>.</p>
<p id="p-0136" num="0135"><figref idref="DRAWINGS">FIG. 24</figref> is a schematic block diagram of the average processing circuit <b>66</b> and the gain selector circuit <b>67</b>.</p>
<p id="p-0137" num="0136">The average processing circuit <b>66</b> includes a plurality (for example, four) of flip-flops (hereinafter referred to as FFs) <b>66</b><i>a </i>to <b>66</b><i>d </i>which are connected in series on the input side. In the fifth embodiment, the average processing circuit <b>66</b> calculates an average value of four sampling values which are sampled by the first ADC <b>63</b>.</p>
<p id="p-0138" num="0137">Specifically, the FFs <b>66</b><i>a </i>to <b>66</b><i>d </i>latch sampling values D<b>1</b> to D<b>4</b>, sampled by the first ADC <b>63</b>, respectively, to output latched sampling values D<b>1</b> to D<b>4</b>. The average processing circuit <b>66</b> calculates an average value H of these sampling values D<b>1</b> to D<b>4</b> to generate the average value signal S<b>23</b> which has information on the average value H.</p>
<p id="p-0139" num="0138">A gain G corresponding to the average value H calculated by the average processing circuit <b>66</b> has been previously set in the gain selector circuit <b>67</b>. For example, the gain selector circuit <b>67</b> selects the gain G=G<b>1</b> (for example, twice) when the average value H is equal to or lower than a first reference value L<b>1</b>; the gain G=G<b>2</b> (for example, unity gain) when the average value H is higher than the first reference value L<b>1</b> and equal to or lower than a second reference value L<b>2</b>; and the gain G=G<b>3</b> (for example, 0.5 times) when the average value H is higher than the second reference value L<b>2</b>.</p>
<p id="p-0140" num="0139">The first and second reference values L<b>1</b>, L<b>2</b> have been previously set in the gain selector circuit <b>67</b> corresponding to a signal value of the analog signal S<b>1</b> sampled by the first ADC <b>63</b>. The gain selector circuit <b>67</b> selects any of the gains G=G<b>1</b>−G<b>3</b> in accordance with the calculated average value H, and generates the gain switching signal S<b>24</b> which has information on the selected gain G.</p>
<p id="p-0141" num="0140">The delay circuit <b>65</b> in the AGC <b>61</b> delays the analog signal S<b>21</b> by a delay time substantially equal to a latency caused by the average processing circuit <b>66</b> and the gain selector circuit <b>67</b>. Specifically, the delay circuit <b>65</b> includes, for example, four delay stages connected in series for generating a delay of four clock pulses of the clock signal CLK, corresponding to the four FFs <b>66</b><i>a </i>to <b>66</b><i>d. </i></p>
<p id="p-0142" num="0141">The average processing circuit <b>66</b> and the gain selector circuit <b>67</b> operate at high speeds. Therefore, FFs having a pipeline function may be provided on the output side of the gain selector circuit <b>67</b>. In this case, the number of delay stages in the delay circuit <b>65</b> is changed as appropriate in accordance with the number of FFs provided on the output side.</p>
<p id="p-0143" num="0142">Next, the action of the AGC <b>61</b> will be described.</p>
<p id="p-0144" num="0143"><figref idref="DRAWINGS">FIG. 25</figref> is a waveform chart showing exemplary sampling of an analog signal S<b>21</b> which is sampled by the first ADC <b>63</b>. <figref idref="DRAWINGS">FIG. 25</figref> shows that four signal values are sampled every period of the analog signal S<b>21</b> (sampling values p<b>1</b> to p<b>28</b>). <figref idref="DRAWINGS">FIG. 26</figref> is a schematic block diagram of the average processing circuit <b>66</b> for calculating an average value of, for example, the sampling values p<b>7</b> to p<b>10</b> out of the sampling values p<b>1</b> to p<b>28</b>, and the gain selector circuit <b>67</b>.</p>
<p id="p-0145" num="0144">Now, the number of connected delay stages in the delay circuit <b>65</b> (hereinafter referred to as the number of delay stages) is set to “0” (i.e., no delay is set in the delay circuit <b>65</b>). In this event, the average processing circuit <b>66</b> calculates an average value H of the sampling values p<b>7</b> to p<b>10</b>, while the gain selector circuit <b>67</b> selects the gain G in accordance with the average value H, and generates the gain switching signal S<b>24</b> which has information on the selected gain G.</p>
<p id="p-0146" num="0145">The gain switching amplifier <b>68</b> amplifies the delayed analog signal S<b>25</b>, which has a value corresponding to the sampling timing (time) of the sampling value p<b>10</b>, in accordance with the gain switching signal S<b>24</b>. Since no delay is set in the delay circuit <b>65</b>, the gain switching signal S<b>24</b> acts on the delayed analog signal S<b>25</b> which has substantially the same value as the signal value corresponding to the sampling timing of the sampling value p<b>10</b>.</p>
<p id="p-0147" num="0146">When the number of delay stages in the delay circuit <b>65</b> is set to “1”, the gain switching signal S<b>24</b> acts on the delayed analog signal S<b>25</b> which has substantially the same value as the signal value corresponding to the sampling timing of the sampling value p<b>9</b>. Also, when the number of delay stages in the delay circuit <b>65</b> is set to “2”, the gain switching signal S<b>24</b> acts on the delayed analog signal S<b>25</b> which has substantially the same value as the signal value corresponding to the sampling timing of the sampling value p<b>8</b>.</p>
<p id="p-0148" num="0147">In other words, the AGC <b>61</b> of the fifth embodiment can force the gain switching signal S<b>24</b> generated in accordance with an average value of a plurality of sampling values to act on an arbitrary signal value of the delayed analog signal S<b>25</b> by changing the number of delay stages in the delay circuit <b>65</b>.</p>
<p id="p-0149" num="0148">When the delay circuit <b>65</b> has a plurality of delay stages for generating a delay equal to or larger than the latency caused by the average processing circuit <b>66</b> and the gain selector circuit <b>67</b>, the gain switching signal S<b>24</b> can be generated in consideration of a sampling value which is sampled after a signal value of the delay analog signal S<b>25</b> to be controlled. For example, when the delay circuit <b>65</b> has four delay stages connected in series, the gain switching signal S<b>24</b> generated based on the average value H of the sampling values p<b>7</b> to p<b>10</b> can act on the delayed analog signal S<b>25</b> which has a value corresponding to the sampling timing of the sampling value p<b>6</b>.</p>
<p id="p-0150" num="0149">The AGC <b>61</b> of the fifth embodiment has the following advantages.</p>
<p id="p-0151" num="0150">(1) The average processing circuit <b>66</b> calculates the average value H of a plurality of sampling values. The gain selector circuit <b>67</b> selects the gain G in accordance with the average value H, and generates the gain switching signal S<b>24</b> which is used to switch the gain of the gain switching amplifier <b>68</b>. The delay circuit <b>65</b> delays the analog signal S<b>21</b> corresponding to the latency in the first ADC <b>63</b>, the average processing circuit <b>66</b> and the gain selector circuit <b>67</b>. It is therefore possible to prevent a delay in the control timing for the analog input signal IN, and perform a highly accurate analog signal control.</p>
<p id="p-0152" num="0151">(2) By changing a delay set in the delay circuit <b>65</b>, the gain switching signal S<b>24</b> generated in accordance with the average value H of a plurality of sampling values can act on the delayed analog signal S<b>25</b> which has a value corresponding to any of the plurality of sampling values. A latency equal to or larger than a possible latency can be set in the delay circuit <b>65</b>. In this case, for a signal value of the delay analog signal S<b>25</b> to be controlled, the gain switching signal S<b>24</b> can be generated in consideration of a sampling value which is sampled after the signal value to be controlled. Therefore, a more accurate analog signal control can be accomplished.</p>
<heading id="h-0010" level="1">Sixth Embodiment</heading>
<p id="p-0153" num="0152"><figref idref="DRAWINGS">FIG. 27</figref> is a schematic block diagram of an AGC <b>71</b> according to a sixth embodiment of the present invention. The analog signal controller <b>21</b> of the second embodiment is applied to the AGC <b>71</b>. The AGC <b>71</b> of the sixth embodiment further includes a GCA <b>72</b>, an error calculating circuit <b>73</b>, and a DAC <b>74</b>, in addition to the configuration of the AGC <b>61</b> in the fifth embodiment.</p>
<p id="p-0154" num="0153">The GCA <b>72</b>, the ADC <b>64</b>, the error calculating circuit <b>73</b>, and the DAC <b>54</b> form a third control loop R<b>3</b>. The third control loop R<b>3</b> is connected to the gain switching amplifier <b>68</b>. The third control loop R<b>3</b> is substantially equal in function to the first and the second control loops R<b>1</b>, R<b>2</b>.</p>
<p id="p-0155" num="0154">In the AGC <b>71</b> of the sixth embodiment, an error is calculated through the third control loop R<b>3</b> for an amplified analog signal S<b>26</b> output from the gain switching amplifier <b>68</b> to optimize the gain of the GCA <b>72</b>. For this reason, the analog signal amplified by the GCA <b>72</b> can be satisfactorily provided with an amplitude corresponding to the input range of the ADC <b>64</b>.</p>
<p id="p-0156" num="0155">A rough gain control is conducted for the gain switching amplifier <b>68</b> which is robust to the latency of the third control loop R<b>3</b>, and then a fine gain control is conducted for the GCA <b>72</b> in the third control loop R<b>3</b>. Therefore, the analog signal control is less affected by the latency caused by the third control loop R<b>3</b>.</p>
<p id="p-0157" num="0156">The AGC <b>71</b> of the sixth embodiment has the following advantage.</p>
<p id="p-0158" num="0157">An error is again calculated by the third control loop R<b>3</b> for the amplified analog signal S<b>26</b> output from the gain switching amplifier <b>68</b>. It is therefore possible to more finely control the gain as compared with the AGC <b>61</b> of the fifth embodiment. Since the GCA <b>72</b> controls the amplified analog signal S<b>26</b> which has been roughly controlled by the gain switching amplifier <b>68</b>, the influence of the latency in the third control loop R<b>3</b> is reduced.</p>
<heading id="h-0011" level="1">Seventh Embodiment</heading>
<p id="p-0159" num="0158"><figref idref="DRAWINGS">FIG. 28</figref> is a schematic block diagram of an AGC <b>81</b> according to a seventh embodiment of the present invention. The analog signal controller <b>21</b> of the second embodiment is applied to the AGC <b>81</b>. The AGC <b>81</b> of the seventh embodiment includes a first AGC <b>81</b><i>a </i>and a second AGC <b>81</b><i>b </i>which are connected in series. Each of the first AGC <b>81</b><i>a </i>and the second AGC <b>81</b><i>b </i>is substantially equal in configuration to the AGC <b>61</b> of the fifth embodiment.</p>
<p id="p-0160" num="0159">The second AGC <b>81</b><i>b </i>is connected to a first gain switching amplifier <b>68</b> in the first AGC <b>81</b><i>a</i>. The second AGC <b>81</b><i>b </i>includes a second ADC <b>82</b>, a second delay circuit <b>83</b>, a second average processing circuit <b>84</b>, a second gain selector circuit <b>85</b>, and a second gain switching amplifier <b>86</b>.</p>
<p id="p-0161" num="0160">The AGC <b>81</b> roughly controls the gain first by the first gain switching amplifier <b>68</b>, and then finely controls the gain by the second gain switching amplifier <b>86</b>. The ADC <b>64</b> analog-to-digital converts an analog signal generated by the second switching amplifier <b>68</b> to generate a digital signal S<b>29</b>. The digital signal S<b>29</b> is supplied to a next circuit (digital circuit).</p>
<p id="p-0162" num="0161">The second gain switching amplifier <b>86</b> controls a second delayed analog signal S<b>28</b> delayed by the second delay circuit <b>83</b> in accordance with a second gain switching signal (control signal) S<b>27</b> generated by the second gain selector circuit <b>85</b>. Therefore, the control of the second gain switching amplifier <b>86</b> will not be affected by a latency caused by the second ADC <b>82</b>, the second average processing circuit <b>84</b> and the gain selector circuit <b>85</b>.</p>
<p id="p-0163" num="0162">The AGC <b>81</b> of the seventh embodiment has the following advantage.</p>
<p id="p-0164" num="0163">The AGC <b>81</b> includes the first AGC <b>81</b><i>a </i>and the second AGC <b>81</b><i>b </i>connected in series. Each of the first AGC <b>81</b><i>a </i>and the second AGC <b>81</b><i>b </i>is substantially equal to the AGC <b>61</b> of the fifth embodiment illustrated in <figref idref="DRAWINGS">FIG. 23</figref>. For this reason, the analog signal control can be more finely conducted in accordance with the gain switching signals S<b>24</b>, S<b>27</b> generated by the AGCs <b>81</b><i>a</i>, <b>81</b><i>b</i>, respectively.</p>
<heading id="h-0012" level="1">Eighth Embodiment</heading>
<p id="p-0165" num="0164"><figref idref="DRAWINGS">FIG. 29</figref> is a schematic block diagram of an AGC <b>91</b> according to an eighth embodiment. The analog signal controller <b>21</b> of the second embodiment is applied to the AGC <b>91</b>. The AGC <b>91</b> of the eighth embodiment includes an LPF <b>92</b>, an ADC <b>93</b>, an analog delay circuit (hereinafter referred to as delay circuit) <b>94</b>, an average processing circuit <b>95</b>, a gain selector circuit <b>96</b>, and a gain switching amplifier <b>97</b>. The AGC <b>91</b> of the eighth embodiment is applied to a control of an analog input signal IN, the characteristic of which is roughly known beforehand, for example, a phase servo control for a hard disk drive.</p>
<p id="p-0166" num="0165"><figref idref="DRAWINGS">FIG. 30</figref> is a waveform chart of the phase servo for a hard disk drive. The analog input signal IN is divided into three sections: a section KA, a section KB, a section KC in accordance with the purpose of the phase servo. In the analog input signal IN divided into the sections KA to KC, the final purpose of the phase servo is to calculate the phase of the section KC. The section KB is provided for setting a reference point of a phase calculating period (hereinafter referred to as simply called the reference point) for calculating the phase of the section KC. The section KA is provided for detecting the reference point.</p>
<p id="p-0167" num="0166">The reference point is set at a point at which a zero level (sampling level) of the analog input signal IN continues n times. In the eighth embodiment, the reference point is a point at which the zero level continues three times.</p>
<p id="p-0168" num="0167">In <figref idref="DRAWINGS">FIG. 30</figref>, a zero detection signal SD<b>1</b> changes to H level when the zero level of the analog input signal IN continues three times. An amplitude detection signal SD<b>2</b> detects fluctuations of the analog input signal IN from the zero level. An amplitude detection signal SD<b>2</b> changes to H level when a non-zero level of the analog input signal IN continues three times.</p>
<p id="p-0169" num="0168">A period <b>4</b> signal SD<b>3</b> changes from H level to L level in response to the zero detection signal SD<b>1</b> at H level. When the period <b>4</b> signal SD<b>3</b> is at H level, one period of the analog input signal IN corresponds to a duration of four clock pulses of the clock signal CLK.</p>
<p id="p-0170" num="0169">A period <b>8</b> signal SD<b>4</b> changes from L level to H level in response to the amplitude signal SD<b>2</b> at H level. When the period <b>8</b> signal is at H level, one period of the analog input signal IN corresponds to a duration of eight clock pulses of the clock signal CLK. The period <b>4</b> signal SD<b>3</b> and the period <b>8</b> signal SD<b>4</b> are supplied to the delay circuit <b>94</b>, the average processing circuit <b>95</b>, and the gain selector circuit <b>96</b>.</p>
<p id="p-0171" num="0170"><figref idref="DRAWINGS">FIG. 31</figref> is a schematic circuit diagram of the delay circuit <b>94</b>. The delay circuit <b>94</b> includes eight delay stages connected in series (in <figref idref="DRAWINGS">FIG. 31</figref>, a portion of the circuit is omitted), an input buffer <b>94</b><i>a</i>, an output buffer <b>94</b><i>b</i>, and a selector circuit <b>94</b><i>c. </i></p>
<p id="p-0172" num="0171">The selector circuit <b>94</b><i>c </i>is connected to the output buffer <b>94</b><i>b</i>, and receives the period <b>4</b> signal SD<b>3</b> and the period <b>8</b> signal SD<b>4</b>. The selector circuit <b>94</b><i>c </i>selects the number of delay stages in the delay circuit <b>94</b> in accordance with detected levels of the respective signals SD<b>3</b>, SD<b>4</b>. For example, the selector circuit <b>94</b><i>c </i>sets the number of delay stages to “8” in response to the period <b>8</b> signal SD<b>4</b> at H level, and sets the number of delay stages to “0” (i.e., without delay) in response to the period <b>8</b> signal SD <b>4</b> at L level.</p>
<p id="p-0173" num="0172"><figref idref="DRAWINGS">FIG. 32</figref> is a schematic block diagram of the average processing circuit <b>95</b> and the gain selector circuit <b>96</b>. The average processing circuit <b>95</b> includes eight FFs connected in series on the input side (in <figref idref="DRAWINGS">FIG. 32</figref>, a portion of the circuit is omitted). The respective FFs latch sampling values D<b>1</b> to D<b>8</b>, respectively, sampled by the ADC <b>93</b>, and output the latched sampling values D<b>1</b> to D<b>8</b>. For example, the respective FFs latch sampling values s<b>1</b>-s<b>8</b> or t<b>4</b>-t<b>11</b> as illustrated in <figref idref="DRAWINGS">FIGS. 30 and 32</figref>.</p>
<p id="p-0174" num="0173">The average processing circuit <b>95</b> receives the period <b>4</b> signal SD<b>3</b> and period <b>8</b> signal SD<b>4</b>, and changes a method of calculating an average value H in response to the levels of the respective signals SD<b>3</b>, SD<b>4</b>. For example, the average processing circuit <b>95</b> calculates the average value H of sampling values D<b>5</b> to D<b>8</b> in response to the period <b>4</b> signal SD<b>3</b> at H level, and calculates the average value H of the sampling values D<b>1</b> to D<b>8</b> in response to the period <b>8</b> signal SD<b>4</b> at H level. The average processing circuit <b>95</b> fixes the average value H to a constant value in response to the period <b>4</b> signal SD<b>3</b> and the period <b>8</b> signal SD<b>4</b> at L level.</p>
<p id="p-0175" num="0174">Next, the action of the AGC <b>91</b> will be described.</p>
<p id="p-0176" num="0175">In the section KA of <figref idref="DRAWINGS">FIG. 30</figref>, the period <b>4</b> signal SD<b>3</b> is at H level. In this event, since the period <b>8</b> signal SD<b>4</b> is at L level, the number of delay stages in the delay circuit <b>94</b> is set to “0” (i.e., without delay). The average processing circuit <b>95</b> calculates the average value H of the sampling values D<b>5</b> to D<b>8</b> in response to the period <b>4</b> signal SD<b>3</b> at H level.</p>
<p id="p-0177" num="0176">Therefore, in the section KA, the gain switching amplifier <b>97</b> amplifies an analog value corresponding to the sampling timing of a sampling value s<b>8</b> in accordance with a gain G set in accordance with the average value H of the sampling values s<b>5</b> to s<b>8</b>. In other words, in the section KA, the signal value of the analog signal to be controlled is controlled in accordance with the gain G which is selected in accordance with the average value H of a plurality of sampling values that have been sampled previous to the signal value.</p>
<p id="p-0178" num="0177">Next, as the zero-level value continues three times to cause the zero detection signal SD<b>1</b> to change to H level, the level of the period <b>4</b> signal changes to L level in response to the signal SD<b>1</b> at H level (start of the section KB).</p>
<p id="p-0179" num="0178">In the section KB, the number of delay stages in the delay circuit <b>94</b> is set at “0”. The average processing circuit <b>95</b> sets the average value H to a constant value in response to the signals SD<b>3</b>, SD<b>4</b> at L level. Specifically, since the zero level continues in the section KB, the average value H calculated by the average processing circuit <b>95</b> in the section KB is fixed to an average value at the time the zero detection signal SD<b>1</b> rises (for example, an average value of sampling signals s<b>8</b> to s<b>11</b>).</p>
<p id="p-0180" num="0179">Next, as a non-zero level value continues three times, the level of the amplitude signal SD<b>2</b> changes to H level. In this event, the level of the period <b>8</b> signal SD<b>4</b> changes to H level in response to the signal SD<b>2</b> at H level (start of the section KC).</p>
<p id="p-0181" num="0180">In the section KC, the number of delay stages in the delay circuit <b>94</b> is set to “8” in response to the period <b>8</b> signal SD<b>4</b> at H level. The average processing circuit <b>95</b> calculates the average value H of the sampling values D<b>1</b> to D<b>8</b> in response to the period <b>8</b> signal SD<b>4</b> at H level.</p>
<p id="p-0182" num="0181">Thus, in the section KC, the gain switching amplifier <b>97</b> amplifies an analog value corresponding to the sampling timing of the sampling value t<b>4</b> in accordance with the gain G which is set in accordance with the average value H of the sampling values t<b>4</b> to t<b>11</b>. In other words, in the section KC, a signal value of an analog signal to be controlled is controlled in accordance with a gain G selected in accordance with an average value H of a plurality of sampling values which are sampled subsequent to the signal value.</p>
<p id="p-0183" num="0182">The AGC <b>91</b> of the eighth embodiment has the following advantage.</p>
<p id="p-0184" num="0183">When the waveform of the analog input signal IN has been roughly known beforehand, the AGC <b>91</b> changes the number of delay stages in the delay circuit <b>94</b>, and the number of sampling values (number of samples) as appropriate for use in the calculation of the average value H in accordance with the analog input signal IN. It is therefore possible to control an analog value to be actually controlled in accordance with the gain G which is set in accordance with a plurality of sampling values that are sampled previous or subsequent to the analog value.</p>
<p id="p-0185" num="0184">It should be apparent to those skilled in the art that the present invention may be embodied in many other specific forms without departing from the spirit or scope of the invention. Particularly, it should be understood that the invention may be embodied in the following forms.</p>
<p id="p-0186" num="0185">In the third to eighth embodiments, the analog signal may be delayed not in synchronism with the clock signal CLK.</p>
<p id="p-0187" num="0186">In the fifth to eighth embodiments, the gain selector circuits <b>67</b>, <b>85</b> may be changed to a GCA control circuit <b>106</b> in <figref idref="DRAWINGS">FIG. 34</figref>. In the AGC <b>101</b> in <figref idref="DRAWINGS">FIG. 34</figref>, a GCA control voltage generator circuit (hereinafter referred to as GCA control circuit) <b>106</b> is connected to an average processing circuit <b>105</b>. The gain is set for a GCA <b>107</b> in accordance with a GCA control signal of the GCA control circuit <b>106</b>. <figref idref="DRAWINGS">FIG. 35</figref> is a schematic block diagram of the average processing circuit <b>105</b> and the GCA control circuit <b>106</b> in <figref idref="DRAWINGS">FIG. 34</figref>. The average processing circuit <b>105</b> is substantially equal in configuration to the average processing circuit <b>66</b> (see <figref idref="DRAWINGS">FIG. 24</figref>). The GCA control circuit <b>106</b> includes a gain calculating circuit <b>106</b><i>a </i>for calculating a gain in accordance with an output signal (i.e., the average value H) of the average processing circuit <b>105</b>, and a DAC <b>106</b><i>b </i>for converting a calculated gain signal of the calculating circuit <b>106</b><i>a </i>to an analog signal to generate a GCA control signal. The AGC <b>101</b> has similar advantages to the AGCs of the fifth to eighth embodiments.</p>
<p id="p-0188" num="0187">In the eighth embodiment, the average processing circuit <b>95</b> in <figref idref="DRAWINGS">FIG. 32</figref> may be changed to an average processing circuit <b>95</b><i>a </i>in <figref idref="DRAWINGS">FIG. 33</figref>. The average processing circuit <b>95</b><i>a </i>includes <b>12</b> FFs (in <figref idref="DRAWINGS">FIG. 33</figref>, a portion of the circuit is omitted) on the input side. The respective FFs latch sampling values D<b>1</b> to D<b>12</b>, respectively. In the sampling values D<b>1</b> to D<b>12</b> latched by the respective FFs, for example, an analog value to be actually controlled is assumed to be the sampling value D<b>4</b>; data previous to the sampling value D<b>4</b> to be the sampling values D<b>1</b> to D<b>3</b>; and data subsequent to the sampling value D<b>4</b> to be the sampling values D<b>5</b> to D<b>12</b>. The average processing circuit <b>95</b><i>a </i>calculates an average value H of the sampling values D<b>1</b> to D<b>4</b> when the period <b>4</b> signal SD<b>3</b> is at H level, and calculates an average value H of the sampling values D<b>5</b> to D<b>12</b> when the period <b>8</b> signal SD<b>4</b> is at H level.</p>
<p id="p-0189" num="0188">Specifically, in the eighth embodiment, the positions of a plurality of sampling values employed for calculating the average value H in the average processing circuit <b>95</b><i>a </i>may be changed as appropriate in accordance with the characteristic of the waveform of a particular analog signal.</p>
<p id="p-0190" num="0189">In the eighth embodiment, as indicated by dotted lines in <figref idref="DRAWINGS">FIG. 31</figref>, a buffer <b>94</b><i>d </i>may be added to the delay circuit <b>94</b> to generate a plurality of delay analog signals, from the delay circuit <b>94</b>, which differ in delay time from one another.</p>
<p id="p-0191" num="0190">In the eighth embodiment, the number of delay stages in the delay circuit <b>94</b> may be set to eight at all times.</p>
<p id="p-0192" num="0191">Therefore, the present examples and embodiments are to be considered as illustrative and not restrictive and the present invention is not to be limited to the details given herein, but may be modified within the scope and equivalence of the appended claims.</p>
<?DETDESC description="Detailed Description" end="tail"?>
</description>
<us-claim-statement>What is claimed is:</us-claim-statement>
<claims id="claims">
<claim id="CLM-00001" num="00001">
<claim-text>1. An analog signal control method comprising the steps of:
<claim-text>converting the analog signal to a digital signal via an analog signal process path;</claim-text>
<claim-text>performing an arithmetic processing of the digital signal via the analog signal process path, to generate a control signal for controlling the analog signal;</claim-text>
<claim-text>delaying the analog signal corresponding to a latency caused by the generation of the control signal to generate a delayed analog signal in an analog signal transmission path that is different from the analog signal transmission path; and</claim-text>
<claim-text>controlling the delayed analog signal in accordance with the control signal in the analog signal transmission path.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00002" num="00002">
<claim-text>2. The analog signal control method according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein:
<claim-text>the step of converting the analog signal includes sampling the analog signal at a predetermined sampling timing to generate a sampling value;</claim-text>
<claim-text>the step of generating a control signal includes generating the control signal in accordance with the sampling value; and</claim-text>
<claim-text>the step of delaying includes delaying the analog signal to control the analog signal in accordance with the control signal, the analog signal having the sampling value corresponding to the predetermined sampling timing.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00003" num="00003">
<claim-text>3. The analog signal control method according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein:
<claim-text>the step of converting the analog signal includes sampling the analog signal at a predetermined sampling timing to generate a sampling value;</claim-text>
<claim-text>the step of generating a control signal includes generating the control signal in accordance with the sampling value; and</claim-text>
<claim-text>the step of delaying includes delaying the analog signal by a latency equal to or larger than a possible latency to control the analog signal in accordance with the control signal, the analog signal having a sampling value produced by sampling the analog signal at a timing previous to the predetermined sampling timing.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00004" num="00004">
<claim-text>4. The analog signal control method according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein:
<claim-text>the step of converting the analog signal includes sampling the analog signal at a plurality of predetermined timings to generate a plurality of sampling values;</claim-text>
<claim-text>the step of generating a control signal includes calculating the plurality of sampling values to generate the control signal; and</claim-text>
<claim-text>the step of delaying delays the analog signal to control the analog signal in accordance with the control signal, the analog signal having a sampling value corresponding to an arbitrary sampling timing.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00005" num="00005">
<claim-text>5. The analog signal control method according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein:
<claim-text>the step of converting the analog signal includes sampling the analog signal at a plurality of predetermined timings to generate a plurality of sampling values;</claim-text>
<claim-text>the step of generating a control signal includes calculating the plurality of sampling values to generate the control signal; and</claim-text>
<claim-text>the step of delaying includes delaying the analog signal to control the analog signal in accordance with the control signal, the analog signal having the plurality of sampling values produced by sampling the analog signal at a timing previous to each sampling timing.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00006" num="00006">
<claim-text>6. An analog signal control method comprising the steps of:
<claim-text>converting the analog signal to a digital signal and an analog signal process path;</claim-text>
<claim-text>performing an arithmetic processing of the digital signal via the analog signal process path, to generate a control signal for controlling the analog signal;</claim-text>
<claim-text>delaying the analog signal corresponding to a latency caused by the generation of the control signal in synchronism with a clock signal to generate a delayed analog signal via an analog signal transmission path that is different from the analog signal process path; and</claim-text>
<claim-text>controlling the delayed analog signal in accordance with the control signal, via the analog signal transmission path.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00007" num="00007">
<claim-text>7. An analog signal controller comprising:
<claim-text>an ADC for analog-to-digital conversion, the ADC configured to be located in an analog signal process path and converting an analog signal to generate a digital signal;</claim-text>
<claim-text>a digital arithmetic circuit located in the analog signal process path and connected to the ADC for performing an arithmetic processing of the digital signal to generate a control signal for controlling the analog signal;</claim-text>
<claim-text>a delay circuit, located in an analog signal transmission path that is different from the analog signal process path, for receiving the analog signal, and delaying the analog signal corresponding to a latency caused by the ADC and the digital arithmetic circuit to generate a delayed analog signal; and</claim-text>
<claim-text>an analog control circuit, located in the analog signal transmission path and connected to the digital arithmetic circuit and the delay circuit, for controlling the delayed analog input signal in accordance with the control signal.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00008" num="00008">
<claim-text>8. The analog signal controller according to <claim-ref idref="CLM-00007">claim 7</claim-ref>, wherein:
<claim-text>the analog signal controller operates in accordance with a clock signal; and</claim-text>
<claim-text>the delay circuit includes a pair of switches which operate complementary to each other in synchronism with the clock signal, and delays the analog signal by switching the pair of switches.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00009" num="00009">
<claim-text>9. The analog signal controller according to <claim-ref idref="CLM-00008">claim 8</claim-ref>, wherein:
<claim-text>the delay circuit includes a capacitor connected to a node between the pair of switches and a ground.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00010" num="00010">
<claim-text>10. The analog signal controller according to <claim-ref idref="CLM-00008">claim 8</claim-ref>, wherein:
<claim-text>the delay circuit includes a plurality of delay stages connected in series, each of the delay stages including the pair of switches;</claim-text>
<claim-text>the ADC samples the analog signal to generate a sampling value; and</claim-text>
<claim-text>the delay circuit further includes a selector circuit for selecting a number of connected ones of the plurality of delay stages in accordance with the sampling value of the analog signal.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00011" num="00011">
<claim-text>11. The analog signal controller according to <claim-ref idref="CLM-00010">claim 10</claim-ref>, wherein:
<claim-text>each of the plurality of delay stages includes a capacitor connected to a node between the pair of switches and a ground.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00012" num="00012">
<claim-text>12. The analog signal controller according to <claim-ref idref="CLM-00007">claim 7</claim-ref>, wherein:
<claim-text>the delay circuit includes a capacitor for delaying the analog signal; and</claim-text>
<claim-text>the capacitor has a capacitance value which is set such that the analog signal is delayed corresponding to the latency.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00013" num="00013">
<claim-text>13. The analog signal controller according to <claim-ref idref="CLM-00007">claim 7</claim-ref>, wherein:
<claim-text>the delay circuit includes a variable capacitor for delaying the analog signal; and</claim-text>
<claim-text>the variable capacitor is set such that the analog signal is delayed corresponding to the latency.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00014" num="00014">
<claim-text>14. An automatic gain controller comprising:
<claim-text>a first control loop, located in an analog signal process path, for receiving an analog signal to generate a control signal for setting a predetermined gain for use in amplifying the analog signal;</claim-text>
<claim-text>a delay circuit, located in an analog signal transmission path that is different from the analog signal process path, for receiving the analog signal, and delaying the analog signal corresponding to a latency caused by the first control loop to generate a delayed analog signal; and  gain control amplifier (GCA), located in the analog signal transmission path and connected to the delay circuit and the first control loop, for amplifying the delayed analog signal in accordance with a predetermined gain set by the control signal to generate an amplified analog signal.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00015" num="00015">
<claim-text>15. An automatic gain controller comprising:
<claim-text>a first control loop, the first control loop including:</claim-text>
<claim-text>a first gain control amplifier (GCA) for amplifying the analog signal in accordance with a first predetermined gain to generate a first amplified analog signal;</claim-text>
<claim-text>an analog to digital converter (ADC) connected to the first GCA for analog-to-digital converting the first amplified analog signal to generate a digital signal;</claim-text>
<claim-text>an error calculating circuit connected to the ADC for calculating an error between a target value which is set such that the first amplified analog signal substantially covers a full range for an input level of the ADC, and the digital signal to generate an error digital signal in accordance with the error;</claim-text>
<claim-text>a digital to analog converter (DAC) connected to the error calculating circuit for digital-to-analog converting the error digital signal to generate a control signal for setting a second predetermined gain;</claim-text>
<claim-text>a delay circuit for delaying the analog signal corresponding to a latency occurring in the first control loop to generate a delayed analog signal; and</claim-text>
<claim-text>a second GCA connected to the delay circuit and the first control loop for amplifying the delayed analog signal in accordance with the second predetermined gain set by the control signal to generate a second amplified analog signal.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00016" num="00016">
<claim-text>16. The automatic gain controller according to <claim-ref idref="CLM-00015">claim 15</claim-ref>, further comprising:
<claim-text>a control loop connected to the second GCA for calculating an error for the second amplified analog signal.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00017" num="00017">
<claim-text>17. The automatic gain controller according to <claim-ref idref="CLM-00015">claim 15</claim-ref>, wherein:
<claim-text>the AGC operates in accordance with a clock signal; and</claim-text>
<claim-text>the delay circuit includes a delay stage for delaying the analog signal in synchronism with the clock signal.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00018" num="00018">
<claim-text>18. The automatic gain controller according to <claim-ref idref="CLM-00017">claim 17</claim-ref>, wherein:
<claim-text>the delay stage is one of a plurality of delay stages connected in series; and</claim-text>
<claim-text>the delay circuit further includes a selector circuit for selecting the number of connected ones of the plurality of delay stages in accordance with a predictable waveform of the analog signal.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00019" num="00019">
<claim-text>19. An automatic gain controller comprising:
<claim-text>a first analog to digital converter (ADC) for sampling an analog signal to generate a first plurality of sampling values, the first ADC generating a first digital signal in accordance with the first plurality of sampling values;</claim-text>
<claim-text>a first average processing circuit connected to the first ADC for calculating an average value of the first plurality of sampling values in accordance with the first digital signal to generate a first average value signal indicative of the calculated average value;</claim-text>
<claim-text>a first gain selector circuit connected to the first average processing circuit for selecting a first gain for controlling the analog signal in accordance with the average value of the first average value signal, and generating a first control signal in accordance with the selected first gain;</claim-text>
<claim-text>a first delay circuit for receiving the analog signal, and delaying the analog signal corresponding to a first latency occurring in the first ADC, the first average processing circuit, and the first gain selector circuit to generate a first delayed analog signal; and</claim-text>
<claim-text>a gain switching amplifier connected to the first delay circuit and the first gain selector circuit for amplifying the first delayed analog signal in accordance with the first gain selected by the first control signal to generate a first amplified analog signal.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00020" num="00020">
<claim-text>20. The automatic gain controller according to <claim-ref idref="CLM-00019">claim 19</claim-ref>, further comprising:
<claim-text>a second AGC connected to the first gain switching amplifier for amplifying the first amplified analog signal, wherein the second AGC includes:</claim-text>
<claim-text>a second ADC for sampling the first amplified analog signal to generate a second plurality of sampling values, the second ADC generating a second digital signal in accordance with the second plurality of sampling values;</claim-text>
<claim-text>a second average processing circuit connected to the second ADC for calculating an average value of the second plurality of sampling values in accordance with the second digital signal to generate a second average value signal indicative of the calculated average value;</claim-text>
<claim-text>a second gain selector circuit connected to the second average processing circuit for selecting a second gain for controlling the first amplified analog signal in accordance with an average value of the second average value signal, and generating a second control signal in accordance with the selected second gain;</claim-text>
<claim-text>a second delay circuit for receiving the first amplified analog signal, and delaying the first amplified analog signal corresponding to a second latency occurring in the second ADC, the second average processing circuit, and the second gain selector circuit to generate a second delayed analog signal; and</claim-text>
<claim-text>a second gain switching amplifier connected to the second delay circuit and the second gain selector circuit for amplifying the second delay analog signal in accordance with the second gain selected by the second control signal to generate a second amplified analog signal.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00021" num="00021">
<claim-text>21. The automatic gain controller according to <claim-ref idref="CLM-00019">claim 19</claim-ref>, further comprising:
<claim-text>a control loop connected to the first gain switching amplifier for calculating an error of the first amplified analog signal.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00022" num="00022">
<claim-text>22. The automatic gain controller according to <claim-ref idref="CLM-00019">claim 19</claim-ref>, wherein:
<claim-text>the first average processing circuit changes sampling numbers of the first plurality of sampling values in accordance with a predicted waveform of the analog signal when the waveform of the analog signal is predictable.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00023" num="00023">
<claim-text>23. The automatic gain controller according to <claim-ref idref="CLM-00019">claim 19</claim-ref>, wherein:
<claim-text>the first average processing circuit changes sampling positions of the first plurality of sampling values in accordance with a predicted waveform of the analog signal when the waveform of the analog signal is predictable.</claim-text>
</claim-text>
</claim>
</claims>
</us-patent-grant>
