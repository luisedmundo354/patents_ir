<us-patent-grant lang="EN" dtd-version="v4.2 2006-08-23" file="US07298967-20071120.XML" status="PRODUCTION" id="us-patent-grant" country="US" date-produced="20071106" date-publ="20071120">
<us-bibliographic-data-grant>
<publication-reference>
<document-id>
<country>US</country>
<doc-number>07298967</doc-number>
<kind>B2</kind>
<date>20071120</date>
</document-id>
</publication-reference>
<application-reference appl-type="utility">
<document-id>
<country>US</country>
<doc-number>11111389</doc-number>
<date>20050421</date>
</document-id>
</application-reference>
<us-application-series-code>11</us-application-series-code>
<us-term-of-grant>
<us-term-extension>405</us-term-extension>
</us-term-of-grant>
<classifications-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>H</section>
<class>02</class>
<subclass>P</subclass>
<main-group>7</main-group>
<subgroup>29</subgroup>
<symbol-position>F</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20071120</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
</classifications-ipcr>
<classification-national>
<country>US</country>
<main-classification>388811</main-classification>
<further-classification>388812</further-classification>
<further-classification>388813</further-classification>
<further-classification>388814</further-classification>
<further-classification>318139</further-classification>
</classification-national>
<invention-title id="d0e53">Electromagnetic sensor direct communication algorithm to a digital microprocessor</invention-title>
<references-cited>
<citation>
<patcit num="00001">
<document-id>
<country>US</country>
<doc-number>6719089</doc-number>
<kind>B2</kind>
<name>Yoneda et al.</name>
<date>20040400</date>
</document-id>
</patcit>
<category>cited by other</category>
<classification-national><country>US</country><main-classification>180446</main-classification></classification-national>
</citation>
<citation>
<patcit num="00002">
<document-id>
<country>US</country>
<doc-number>6754610</doc-number>
<kind>B2</kind>
<name>Dudler et al.</name>
<date>20040600</date>
</document-id>
</patcit>
<category>cited by other</category>
<classification-national><country>US</country><main-classification>702151</main-classification></classification-national>
</citation>
<citation>
<patcit num="00003">
<document-id>
<country>US</country>
<doc-number>2004/0130442</doc-number>
<kind>A1</kind>
<name>Breed et al.</name>
<date>20040700</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>340443</main-classification></classification-national>
</citation>
</references-cited>
<number-of-claims>31</number-of-claims>
<us-exemplary-claim>1</us-exemplary-claim>
<us-field-of-classification-search>
<classification-national>
<country>US</country>
<main-classification>388812</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>388813</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>388814</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>318139</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>702151</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>180446</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>340443</main-classification>
</classification-national>
</us-field-of-classification-search>
<figures>
<number-of-drawing-sheets>3</number-of-drawing-sheets>
<number-of-figures>6</number-of-figures>
</figures>
<us-related-documents>
<related-publication>
<document-id>
<country>US</country>
<doc-number>20060241790</doc-number>
<kind>A1</kind>
<date>20061026</date>
</document-id>
</related-publication>
</us-related-documents>
<parties>
<applicants>
<applicant sequence="001" app-type="applicant-inventor" designation="us-only">
<addressbook>
<last-name>Chen</last-name>
<first-name>Shaotang</first-name>
<address>
<city>Troy</city>
<state>MI</state>
<country>US</country>
</address>
</addressbook>
<nationality>
<country>omitted</country>
</nationality>
<residence>
<country>US</country>
</residence>
</applicant>
<applicant sequence="002" app-type="applicant-inventor" designation="us-only">
<addressbook>
<last-name>Mir</last-name>
<first-name>Sayeed A.</first-name>
<address>
<city>Saginaw</city>
<state>MI</state>
<country>US</country>
</address>
</addressbook>
<nationality>
<country>omitted</country>
</nationality>
<residence>
<country>US</country>
</residence>
</applicant>
<applicant sequence="003" app-type="applicant-inventor" designation="us-only">
<addressbook>
<last-name>Wong</last-name>
<first-name>Tom C.</first-name>
<address>
<city>Saginaw</city>
<state>MI</state>
<country>US</country>
</address>
</addressbook>
<nationality>
<country>omitted</country>
</nationality>
<residence>
<country>US</country>
</residence>
</applicant>
<applicant sequence="004" app-type="applicant-inventor" designation="us-only">
<addressbook>
<last-name>Ross</last-name>
<first-name>Christian</first-name>
<address>
<city>Hemlock</city>
<state>MI</state>
<country>US</country>
</address>
</addressbook>
<nationality>
<country>omitted</country>
</nationality>
<residence>
<country>US</country>
</residence>
</applicant>
<applicant sequence="005" app-type="applicant-inventor" designation="us-only">
<addressbook>
<last-name>Sebastian</last-name>
<first-name>Tomy</first-name>
<address>
<city>Saginaw</city>
<state>MI</state>
<country>US</country>
</address>
</addressbook>
<nationality>
<country>omitted</country>
</nationality>
<residence>
<country>US</country>
</residence>
</applicant>
</applicants>
<agents>
<agent sequence="01" rep-type="attorney">
<addressbook>
<last-name>Smith</last-name>
<first-name>Michael D.</first-name>
<address>
<country>unknown</country>
</address>
</addressbook>
</agent>
</agents>
</parties>
<assignees>
<assignee>
<addressbook>
<orgname>Delphi Technologies, Inc.</orgname>
<role>02</role>
<address>
<city>Troy</city>
<state>MI</state>
<country>US</country>
</address>
</addressbook>
</assignee>
</assignees>
<examiners>
<primary-examiner>
<last-name>Masih</last-name>
<first-name>Karen</first-name>
<department>2837</department>
</primary-examiner>
</examiners>
</us-bibliographic-data-grant>
<abstract id="abstract">
<p id="p-0001" num="0000">A method of interfacing an electromagnetic sensor with a controller in a motor control system, the method including: applying an excitation signal to the electromagnetic sensor; receiving a first electromagnetic sensor output signal based on the excitation signal, the first electromagnetic sensor signal comprising an amplitude modulated signal corresponding to a position of a rotor of the electromagnetic sensor; and receiving a second electromagnetic sensor output signal based on the excitation signal, the second electromagnetic sensor signal comprising another amplitude modulated signal corresponding to the position of the rotor of the electromagnetic sensor. The method also includes sampling the first electromagnetic sensor signal and the second electromagnetic sensor signal at about an instance synchronous with the excitation signal to demodulate the first electromagnetic sensor signal and the second electromagnetic sensor signal and decoding a resultant of the sampling to identify the position of a rotor of the electromagnetic sensor.</p>
</abstract>
<drawings id="DRAWINGS">
<figure id="Fig-EMI-D00000" num="00000">
<img id="EMI-D00000" he="131.57mm" wi="178.56mm" file="US07298967-20071120-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00001" num="00001">
<img id="EMI-D00001" he="252.73mm" wi="180.85mm" file="US07298967-20071120-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00002" num="00002">
<img id="EMI-D00002" he="262.13mm" wi="178.99mm" file="US07298967-20071120-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00003" num="00003">
<img id="EMI-D00003" he="227.92mm" wi="167.39mm" file="US07298967-20071120-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
</drawings>
<description id="description">
<?BRFSUM description="Brief Summary" end="lead"?>
<heading id="h-0001" level="1">TECHNICAL FIELD</heading>
<p id="p-0002" num="0001">This invention relates to electric machines, and more particularly, position sensing of a motor employing a electromagnetic sensor.</p>
<heading id="h-0002" level="1">BACKGROUND OF THE INVENTION</heading>
<p id="p-0003" num="0002">Electric Steering applications such as Electric Power Steering (EPS), four wheel steering e.g., Quadrasteer (Qsteer) Active Front Steer (AFS), Active Rear Steer (ARS) are used in vehicles to improve performance fuel economy and stability of the vehicle. Commonly, in such systems an electronic controller is configured to drive an electric motor to provide torque, speed or positioning control.</p>
<p id="p-0004" num="0003">Electric steering systems often employ digital encoders for motor position feedback. Owing to their low cost and capability of operating at high temperature and in harsh environment, Hall type sensor based encoders are preferred in electric steering motor drive applications than those employing optical detection. Hall effect position sensors are, however, very limited in providing high resolution position and/or speed signals, often required for desirable performance of an electric steering system. Although, resolvers have traditionally been used to provide high precision position and speed information for servo drives, the cost of both the resolver itself and the associated electronics for interfacing a resolver with a digital motor controller have long prevented them from being used in the low cost automotive products. Advantageously, in the past few years, a variable reluctance resolver has been developed, which features a very simple, rugged structure and yet is cost competitive to Hall effect encoders. However, the additional cost of the associated electronics to interface a resolver to a microprocessor or digital controller still presents a significant impediment to commercial viability and the potential to replace the Hall encoders for automotive applications. Therefore, what is desired in the art is a means for interfacing a resolver with a digital motor controller or microprocessor without the expense of traditional electronic interfaces and conversion circuits.</p>
<heading id="h-0003" level="1">SUMMARY OF THE INVENTION</heading>
<p id="p-0005" num="0004">Disclosed herein in an exemplary embodiment is a method of interfacing an electromagnetic sensor with a controller in a motor control system, the method comprising: applying an excitation signal to the electromagnetic sensor; receiving a first electromagnetic sensor output signal based on the excitation signal, the first electromagnetic sensor signal comprising an amplitude modulated signal corresponding to a position of a rotor of the electromagnetic sensor; and receiving a second electromagnetic sensor output signal based on the excitation signal, the second electromagnetic sensor signal comprising another amplitude modulated signal corresponding to the position of the rotor of the electromagnetic sensor. The method also includes sampling the first electromagnetic sensor signal and the second electromagnetic sensor signal at about an instance synchronous with the excitation signal to demodulate the first electromagnetic sensor signal and the second electromagnetic sensor signal and decoding a resultant of the sampling to identify the position of a rotor of the electromagnetic sensor.</p>
<p id="p-0006" num="0005">Also disclosed herein in an exemplary embodiment is a system for interfacing a electromagnetic sensor with a controller comprising: a electromagnetic sensor, the electromagnetic sensor receptive to an excitation signal and transmitting a first electromagnetic sensor output signal based on the excitation signal and a second electromagnetic sensor output signal based on the excitation signal, the first electromagnetic sensor signal comprising an amplitude modulated signal corresponding to a position of a rotor of the electromagnetic sensor, the second electromagnetic sensor signal comprising another amplitude modulated signal corresponding to the position of said rotor of the electromagnetic sensor. The system also includes a controller receptive to the first electromagnetic sensor output signal and the second electromagnetic sensor signal; the controller sampling the first electromagnetic sensor signal and the second electromagnetic sensor signal at about an instance synchronous with the excitation signal to demodulate the first electromagnetic sensor signal and the second electromagnetic sensor signal; the controller further decoding a resultant of the sampling to identify the position of a rotor of the electromagnetic sensor.</p>
<p id="p-0007" num="0006">Further, disclosed herein in yet another exemplary embodiment is a system for interfacing a electromagnetic sensor with a controller comprising: means for applying an excitation signal to the electromagnetic sensor; means for receiving a first electromagnetic sensor output signal based on the excitation signal, the first electromagnetic sensor signal comprising an amplitude modulated signal corresponding to a position of a rotor of the electromagnetic sensor; and means for receiving a second electromagnetic sensor output signal based on the excitation signal, the second electromagnetic sensor signal comprising another amplitude modulated signal corresponding to the position of the rotor of the electromagnetic sensor. The system also includes: means for sampling the first electromagnetic sensor signal and the second electromagnetic sensor signal at about an instance synchronous with the excitation signal to demodulate the first electromagnetic sensor signal and the second electromagnetic sensor signal; and means for decoding a resultant of the sampling to identify the position of a rotor of the electromagnetic sensor.</p>
<p id="p-0008" num="0007">Further disclosed here in another embodiment is a storage medium encoded with machine-readable computer program code for of interfacing a electromagnetic sensor with a controller, the storage medium including instructions for causing a computer to implement the abovementioned method.</p>
<p id="p-0009" num="0008">Disclosed in yet another exemplary embodiment is a computer data signal embodied in a computer readable medium, the computer data signal comprising code configured to cause a computer to implement the abovementioned method for of interfacing a electromagnetic sensor with a controller.</p>
<?BRFSUM description="Brief Summary" end="tail"?>
<?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?>
<description-of-drawings>
<heading id="h-0004" level="1">BRIEF DESCRIPTION OF THE DRAWINGS</heading>
<p id="p-0010" num="0009">Referring to the exemplary drawings wherein like elements are numbered alike in the several Figures:</p>
<p id="p-0011" num="0010"><figref idref="DRAWINGS">FIG. 1</figref> is a block diagram of a electric steering system in accordance with an exemplary embodiment;</p>
<p id="p-0012" num="0011"><figref idref="DRAWINGS">FIG. 2</figref> is a block diagram of a system for controlling an electric machine with a position sensor in accordance with an exemplary embodiment;</p>
<p id="p-0013" num="0012"><figref idref="DRAWINGS">FIG. 3</figref> is of a more detailed diagram of an exemplary embodiment;</p>
<p id="p-0014" num="0013"><figref idref="DRAWINGS">FIG. 4</figref> is graph depicting signals and synchronous sampling of an exemplary embodiment;</p>
<p id="p-0015" num="0014"><figref idref="DRAWINGS">FIG. 5</figref> is a block diagram depicting a configuration for decoding position information from sin θ and cos θ in accordance with an exemplary embodiment; and</p>
<p id="p-0016" num="0015"><figref idref="DRAWINGS">FIG. 6</figref> is graph depicting signals and synchronous sampling of an exemplary embodiment to address phase delay.</p>
</description-of-drawings>
<?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?>
<?DETDESC description="Detailed Description" end="lead"?>
<heading id="h-0005" level="1">DESCRIPTION OF AN EXEMPLARY EMBODIMENT</heading>
<p id="p-0017" num="0016">Disclosed herein in an exemplary embodiment is an electric steering system, which employs an electromagnetic sensor e.g. resolver or synchro, hereinafter resolver for position and speed feedback. The system utilizes its controller microprocessor or DSP to generate the high frequency resolver excitation and to directly sample the resolver output signals. The resolver signals are then processed internally by the microprocessor or DSP to decode the position and speed information. Since the resolver interfaces are performed by the EPS microcontroller, it eliminates the needs for a dedicated hardware to do the resolver to digital conversion and cost of the steering system can be significantly reduced. Another obvious benefit is that it becomes relatively easy for the EPS controller to provide diagnosis of the resolver operating conditions and to provide compensation for phase delay in the cables and thus enhance the position accuracy.</p>
<p id="p-0018" num="0017">Referring to <figref idref="DRAWINGS">FIG. 1</figref>, reference numeral <b>10</b> generally designates an Electric Power Steering (EPS) system for a motor vehicle employing an exemplary embodiment of the resolver interfaces disclosed herein. In an exemplary embodiment, a steering mechanism <b>12</b> is a rack-and-pinion type mechanism that includes a toothed rack (not shown) and a pinion gear (also not shown) located under a gear housing <b>14</b>. A steering wheel <b>16</b> is coupled to an upper steering shaft <b>18</b>. As the steering wheel <b>16</b> is turned, the upper steering shaft <b>18</b>, which is connected to a lower steering shaft <b>20</b> through a universal joint <b>22</b>, turns the pinion gear. Rotation of the pinion gear moves the toothed rack, which moves tie rods <b>24</b> (only one shown) that, in turn, move steering knuckles <b>26</b> (only one shown), which turn wheels <b>28</b> (only one shown).</p>
<p id="p-0019" num="0018">EPS assist is provided through a control system generally designated by reference numeral <b>30</b>, which includes a controller <b>32</b> and an electric motor <b>34</b>. The controller <b>32</b> is powered by a vehicle power supply <b>36</b> through a supply line <b>38</b>. The controller <b>32</b> receives a signal indicative of the vehicle velocity on signal line <b>40</b>. Steering angle and/or motor position is measured by position sensor <b>42</b> and position signal θ is fed to the controller <b>32</b> through line <b>44</b>. It will be appreciated that position as measured may be based on the steering shaft and/or motor position as indicated in the figure and hereinafter referred to as motor position or position information θ. In an exemplary embodiment, position sensor <b>42</b> is a resolver coupled directly to controller <b>32</b>, and hereinafter referred to as resolver <b>42</b>. It will be appreciated that while in an exemplary embodiment a resolver is depicted for illustrative purposes, other types of position sensors (e.g., synchros) exhibiting similar qualities and capabilities may be employed. The controller <b>32</b> is usually implemented in a digital format and thus a microcontroller unit (MCU) or digital signal processor (DSP) is readily available. The controller <b>32</b> is responsible for processing the steering command from the operator, generating the required signal for driving the motor <b>34</b> through a power inverter (not shown, and optionally integral with the controller <b>32</b>). In addition, the system on an exemplary embodiment relies on the controller <b>32</b>, and particularly the MCU or DSP to perform the resolver signal processing functions, which decode the high-resolution position and speed feedback from the resolver <b>42</b>.</p>
<p id="p-0020" num="0019">Resolvers <b>42</b> measure the angular position of a rotating device. They are essentially rotating transformers with an excitation winding and two output windings exhibiting a mutual 90° (degree) electrical displacement. The transfer ratio of the resolver from the excitation winding to the two output windings is a sinusoidal function of the rotor position θ. The excitation winding is supplied with an AC voltage, usually a sinusoidal waveform, with a constant frequency and amplitude. The AC excitation produces a magnetic flux in the magnetic circuit of the resolver, which induces an output signal in each of the two output windings. Due to the rotor position dependent transfer ratio, the amplitudes of the two output signals will be modulated by the rotor position in a sinusoidal format. In other words, the amplitudes of the two output signals are a function of sin θ and cos θ, respectively, due to its 90-degree displacement. It will also be appreciated that for a synchro position sensor similar trigonometric relationships describe the synchro signals as is well known in the art. The synchro signals include information regarding sin θ, sin (θ+120), and sin(θ+240).</p>
<p id="p-0021" num="0020">To utilize this transformer property of the resolver, a high frequency generator is employed to produce the excitation, usually at around 10 KHz to 20 KHz. Also, to derive the position information θ, the sin θ and cos θ information carried over the high frequency signals needs to be demodulated to remove the high frequency carrier information. Finally, the sin θ and cos θ information is processed employing series expansions, trigonometric functions, and the like to obtain the position information θ. In existing systems a dedicated resolver to digital (R/D) converter is required to perform all these functions and supply the position information θ to a digital microcontroller. An exemplary embodiment of the system and methodology disclosed herein avoids the substantial cost and complexity of an R/D converter by directly interfacing the resolver <b>42</b> to a microcontroller and provides a method for direct decoding of resolver signals. It will be appreciated that as used herein position information and angle are treated synonymously. In an exemplary embodiment a resolver <b>42</b> is employed, the position information θ corresponding to a rotational angle of the device. It will be further appreciated that as used herein the position sensor, e.g., resolver <b>42</b> may be a multiple pole electrical machine, preferably where the number of poles therein is proportional to the number of poles in the motor <b>34</b>.</p>
<p id="p-0022" num="0021">Continuing with <figref idref="DRAWINGS">FIG. 1</figref>, for more on the steering system <b>10</b>, as the steering wheel <b>16</b> is turned, the torque sensor <b>43</b> senses the torque applied to the steering wheel <b>16</b> by a vehicle operator. The torque sensor <b>43</b> may include a torsion bar (not shown) and a variable-resistance type of sensor (also not shown) that outputs a variable resistance signal to controller <b>32</b> through line <b>46</b> in relation to the amount of twist on the torsion bar. Although this is the currently illustrative torque sensor, any other suitable torque-sensing device used with known signal processing techniques will suffice.</p>
<p id="p-0023" num="0022">In response to the inputs on lines <b>40</b>, <b>44</b>, <b>46</b>, and the like, the controller <b>32</b> sends a command signal through line <b>48</b> to the electric motor <b>34</b>. The motor <b>34</b>, in turn, supplies torque-assist to the steering system through a worm <b>50</b> and a worm gear <b>52</b>, in order to provide a steering torque assist to the vehicle steering system in addition to a steering force exerted by the vehicle operator.</p>
<p id="p-0024" num="0023"><figref idref="DRAWINGS">FIG. 2</figref> depicts a detailed block diagram of a control system <b>30</b> for controlling an electric machine. In an exemplary embodiment the system <b>30</b> is configured to control the position of an electric machine <b>34</b>, including, but not limited to a sinusoidally excited permanent magnet motor, hereinafter referred to as motor <b>34</b>. The system includes controller <b>32</b>, a power inverter <b>54</b> and a power source <b>36</b>, position sensor/resolver <b>42</b>, and an optional speed measuring device or function <b>60</b>. The power inverter <b>54</b> is coupled between power source <b>36</b> and the controller <b>32</b> to supply the phase voltages across the motor windings. The inverter <b>54</b> is controlled by pulse width modulated signals generated by the controller <b>32</b>. For the controller <b>32</b> to develop the correct voltages needed to produce/maintain the desired motor position, the position and/or speed of the rotor are often needed.</p>
<p id="p-0025" num="0024">From the position signal θ, the optional speed-measuring device or function <b>60</b> may be employed to determine the speed of the rotor and outputs a speed signal ω<sub>m </sub>at a line <b>26</b>. Alternatively, speed may be directly calculated as described at a later point herein. The speed-measuring device or function <b>60</b> is optionally, and preferably integral with the controller <b>32</b>. The speed measuring device or function <b>60</b> may include various methods for evaluating velocity from the position signal θ. For example the speed signal may be obtained by a method such as the derivative of the position signal from the equation ω<sub>m</sub>=Δθ<sub>m</sub>/Δt where Δt is the sampling time and Δθ<sub>m </sub>is the change in position during the sampling interval.</p>
<p id="p-0026" num="0025">The position signal θ, and/or speed signal ω<sub>m</sub>, are applied to the controller <b>32</b>. The controller <b>32</b> processes all input signals to generate values corresponding to each of the signals resulting in a rotor position value, and a motor speed value, being available for the processing in the algorithms as prescribed herein. Measurement signals, such as the abovementioned are also commonly linearized, compensated, and filtered as desired or necessary to enhance the characteristics or eliminate undesirable characteristics of the acquired signal. For example, the signals may be linearized to improve processing speed, or to address a large dynamic range of the signal. In addition, frequency or time based compensation and filtering may be employed to eliminate noise or avoid undesirable spectral characteristics.</p>
<p id="p-0027" num="0026">In order to perform the prescribed functions and desired processing, as well as the computations therefore (e.g., the execution of the motor control and resolver signal processing algorithm(s), prescribed herein, and the like), controller <b>32</b> may include, but not be limited to, a processor(s), microcontroller unit(s) MCU, digital signal processor (DSP), computer(s), memory, storage, register(s), timing, interrupt(s), communication interfaces, and input/output signal interfaces, as well as combinations comprising at least one of the foregoing. For example, controller <b>18</b> may include signal input signal filtering to enable accurate sampling and conversion or acquisitions of such signals from communications interfaces. Additional features of controller <b>18</b> and certain processes therein are thoroughly discussed at a later point herein.</p>
<p id="p-0028" num="0027">Turning now to <figref idref="DRAWINGS">FIG. 3</figref>, a block diagram depicting a portion of the interfaces between the resolver <b>42</b> with a MCU/controller <b>32</b> and direct decoding of resolver signals by the controller <b>32</b> without using the dedicated R/D converter. The interface shown generally as <b>100</b> includes a mechanism for generation of the excitation signals <b>102</b> to the resolver <b>42</b>, amplitude demodulation and decoding of the sine resolver signal <b>104</b> and cosine resolver signal <b>106</b>, as well as compensation for a phase shift introduced by cable length between the controller <b>32</b> and resolver <b>42</b>. This interface <b>100</b> utilizes part of the computational power of controller <b>32</b> or a microcontroller <b>110</b> therein, at least one or two analog to digital (A/D) input channels and one digital output from the microcontroller <b>110</b>, a filtering and amplifying circuit <b>112</b> and a decoding algorithm to compute the position information θ, and velocity ω<sub>m </sub>of the rotating shaft of the motor <b>34</b>. It also includes a method of timing and coordinating the A/D sampling to reduce the complexity of demodulation to acquire sin θ and cos θ and compute position information θ, and velocity ω<sub>m </sub>therefrom. Advantageously this approach eliminates the need for employing the optional speed measuring device/function <b>60</b> introduce above.</p>
<p id="p-0029" num="0028">Continuing with <figref idref="DRAWINGS">FIG. 3</figref>, a digital output port from the microcontroller unit (MCU) of controller <b>32</b> is used to generate a high frequency excitation signal <b>102</b>. In an exemplary embodiment a frequency of about 10 KHz is employed, however, other frequencies are possible. The frequency need only be within a range of effective operation for the transformer characteristics of the resolver <b>42</b> and the detection capabilities of the interface circuitry <b>100</b>. The excitation signal <b>102</b> may be generated in a square waveform or pulse width modulated sinusoid with a fundamental frequency at the specified frequency of 10 KHz. The excitation signal <b>102</b> can also come from a D/A channel from the microcontroller <b>110</b>. In an exemplary embodiment the output signal <b>114</b> from the microcontroller <b>110</b> is applied to the filter and amplifier <b>112</b> to be filtered to achieve a substantially sinusoidal waveform with little distortion. The excitation signal <b>102</b> is amplified and transmitted to the input winding of the resolver <b>42</b>. Advantageously, this approach relies on the MCU <b>110</b> to precisely generate the excitation source avoiding the need for a separate signal generator.</p>
<p id="p-0030" num="0029">Continuing with <figref idref="DRAWINGS">FIG. 3</figref> and now turning to <figref idref="DRAWINGS">FIG. 4</figref> as well, in an exemplary embodiment, the sine resolver signal <b>104</b> and cosine resolver signal <b>106</b> are sampled directly by the A/D converter of the MCU or DSP <b>110</b>. A level shift circuit or function may be employed to convert the AC signals into a unipolar format to facilitate the direct sampling by the A/D. Since the position information θ is encoded into the amplitude of the signals at the carrier frequency (10 KHz in this instance), the A/D may be configured to over sample and process the signals for the amplitude information. However, such oversampling for data encoded at a high carrier frequency is processing intensive and would require significant amounts of memory for storage of the data. The sampled data may then be demodulated employing any number of known techniques such as peak detection and the like.</p>
<p id="p-0031" num="0030">In another exemplary embodiment, a synchronous sampling method, which requires only a single sample per cycle of the excitation signal <b>102</b>, is disclosed to reduce the A/D sampling and processing requirements to achieve the demodulation. In this methodology, the A/D sampling relies on selective timing to sample and hold the resolver output signals <b>104</b>, <b>106</b> at the moment when they reach the peak in each half of the excitation cycle. In this manner, each resulting sample represents only the amplitude variation corresponding to the sin θ and cos θ information with the carrier frequency component removed.</p>
<p id="p-0032" num="0031">In steering control system, the steering algorithms may operate at a lower frequency, e.g. 10-1000 Hz, while the motor control portion e.g., pulse width modulation, may operate at a higher frequency (e.g., 20 KHz). In an exemplary embodiment, the motor control (e.g., PWM algorithm) is configured to run on the same processor (e.g., MCU, DSP, and the like) as the slower frequency section of steering algorithms. Furthermore, the resolver functionality and algorithms of an exemplary embodiment may readily be integrated with the high frequency motor control functions. In a controller structure where the motor control operates on a separate device as opposed to the main processor, a high frequency process loop may be created in the main processor to run the resolver algorithm.</p>
<p id="p-0033" num="0032">Continuing with <figref idref="DRAWINGS">FIGS. 3 and 4</figref> the synchronous sampling or over sampling yields the sin θ and cos θ information. However, to obtain the position and speed information θ and ω<sub>m </sub>respectively, a decoding algorithm is employed. In an exemplary embodiment the decoding of sin θ and cos θ may be accomplished by MCU/DSP <b>110</b> in software.</p>
<p id="p-0034" num="0033">As shown in <figref idref="DRAWINGS">FIG. 5</figref>, an exemplary decoding algorithm is implemented based on trigonometric principles and a basic feedback loop. An initial estimate of the actual position information θ denoted as φ is established to generate an corresponding estimate of sin θ and cos θ denoted as sin φ and cos φ respectively. Employing the well known trigonometric function:
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?>sin(θ−φ)=sin θcos φ−cos θsin φ.<?in-line-formulae description="In-line Formulae" end="tail"?>
<br/>
By calculating sin θ cos φ−cos θ sin φ, the sine of the error of sin (θ−φ) can be determined. A well-known simplification employing a small angle approximation yields the error θ−φ. Advantageously, as depicted in <figref idref="DRAWINGS">FIG. 5</figref>, this error can then be used to drive a feedback loop <b>120</b> configuration with a P-I type regulator <b>122</b> to generate a signal representing the estimated speed, denoted {circumflex over (ω)}<sub>m</sub>. Due to this closed loop correction mechanism, the estimate error will be driven to zero and the estimated angle φ, will converge to the actual angle θ. This feedback is thus capable of decoding both the speed and the position of the resolver <b>42</b>. It should once again be appreciated that similar trigonometric principles may be employed for other types of position sensors e.g., synchros to facilitate decoding the signals therefrom.
</p>
<p id="p-0035" num="0034">Turning now to <figref idref="DRAWINGS">FIG. 6</figref>, one of the errors that can be introduced by utilizing resolver <b>42</b> is due to signal phase/propagation delay in a long interconnection cable. Such a delay can become problematic if the synchronous sampling of an exemplary embodiment is controlled by timing only the peak of the excitation signal <b>102</b>. In other words, due to transmission of the excitation signal in the cable, the two output signals <b>104</b>, <b>106</b> of resolver <b>42</b> may exhibit a phase shift relative to the excitation signal <b>102</b>. Disclosed herein in another exemplary embodiment, is a method to address this potential error and compensate for phase delays introduced by the resolver <b>42</b> or any interconnection cabling. In an exemplary embodiment the timing and/or phase delay of the resolver output signals <b>104</b>, <b>106</b> relative to excitation signal <b>102</b> is measured by evaluating the zero crossings of the signals as generated and received. This time difference corresponds to a propagation delay and phase shift between input and output of the resolver <b>42</b>. The time shift may then be applied to correct the timing the synchronous sampling of the resolver output signals <b>104</b> and <b>106</b> to ensure that the peak of the signal is accurately sampled. Advantageously, this phase shift measurement would need to be performed only once whenever the system is powered. Therefore the phase shift error can be compensated for any cable length or resolver phase delay tolerance.</p>
<p id="p-0036" num="0035">The disclosed invention can be embodied in the form of computer, controller, or processor implemented processes and apparatuses for practicing those processes. The present invention can also be embodied in the form of computer program code containing instructions embodied in tangible media <b>56</b> such as floppy diskettes, CD-ROMs, hard drives, memory chips, or any other computer-readable storage medium, wherein, when the computer program code is loaded into and executed by a computer, controller, or processor <b>32</b>, the computer, controller, or processor <b>32</b> becomes an apparatus for practicing the invention. The present invention may also be embodied in the form of computer program code as a data signal <b>57</b> for example, whether stored in a storage medium <b>56</b>, loaded into and/or executed by a computer, controller, or processor <b>32</b> or transmitted over some transmission medium, such as over electrical wiring or cabling, through fiber optics, or via electromagnetic radiation, wherein, when the computer program code is loaded into and executed by a computer <b>32</b>, the computer <b>32</b> becomes an apparatus for practicing the invention. When implemented on a general-purpose processor the computer program code segments configure the processor to create specific logic circuits.</p>
<p id="p-0037" num="0036">It will be appreciated that the use of “first” and “second” or other similar nomenclature for denoting similar items is not intended to specify or imply any particular order unless otherwise specifically stated. Similarly, use of “a” or “an” shall be construed to mean “one or more” unless otherwise specifically stated.</p>
<p id="p-0038" num="0037">While the invention has been described with reference to an exemplary embodiment, it will be understood by those skilled in the art that various changes may be made and equivalents may be substituted for elements thereof without departing from the scope of the invention. In addition, many modifications may be made to adapt a particular situation or material to the teachings of the invention without departing from the essential scope thereof. Therefore, it is intended that the invention not be limited to the particular embodiment disclosed as the best mode contemplated for carrying out this invention, but that the invention will include all embodiments falling within the scope of the appended claims.</p>
<?DETDESC description="Detailed Description" end="tail"?>
</description>
<us-claim-statement>What is claimed is:</us-claim-statement>
<claims id="claims">
<claim id="CLM-00001" num="00001">
<claim-text>1. A method of interfacing an electromagnetic sensor with a controller in a control system comprising:
<claim-text>applying an excitation signal to the electromagnetic sensor;</claim-text>
<claim-text>receiving a first electromagnetic sensor output signal based on said excitation signal, said first electromagnetic sensor signal comprising an amplitude modulated signal corresponding to a position of a rotor of the electromagnetic sensor;</claim-text>
<claim-text>receiving a second electromagnetic sensor output signal based on said excitation signal, said second electromagnetic sensor signal comprising another amplitude modulated signal corresponding to said position of said rotor of the electromagnetic sensor;</claim-text>
<claim-text>sampling said first electromagnetic sensor signal and said second electromagnetic sensor signal at about an instance synchronous with said excitation signal to demodulate said first electromagnetic sensor signal and said second electromagnetic sensor signal; and</claim-text>
<claim-text>decoding a resultant of said sampling to identify said position of a rotor of the electromagnetic sensor.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00002" num="00002">
<claim-text>2. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref> further including generating said excitation signal.</claim-text>
</claim>
<claim id="CLM-00003" num="00003">
<claim-text>3. The method of <claim-ref idref="CLM-00002">claim 2</claim-ref> wherein said excitation signal is based on a frequency employed by said controller for existing control functions.</claim-text>
</claim>
<claim id="CLM-00004" num="00004">
<claim-text>4. The method of <claim-ref idref="CLM-00003">claim 3</claim-ref> wherein said frequency is about equivalent to another frequency employed for pulse width modulation control.</claim-text>
</claim>
<claim id="CLM-00005" num="00005">
<claim-text>5. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref> wherein said sampling is a direct sampling of said first electromagnetic sensor signal and said second electromagnetic sensor signal, independent of any intermediate conversion interfaces.</claim-text>
</claim>
<claim id="CLM-00006" num="00006">
<claim-text>6. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref> wherein said excitation signal is at a frequency in the range of about 2000 Hz to 25,000 Hz.</claim-text>
</claim>
<claim id="CLM-00007" num="00007">
<claim-text>7. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref> wherein one of said first electromagnetic sensor output and signal said second electromagnetic sensor output signal corresponds to a sine of said position of said rotor of the electromagnetic sensor, while the other corresponds to a cosine of said position of said rotor of the electromagnetic sensor.</claim-text>
</claim>
<claim id="CLM-00008" num="00008">
<claim-text>8. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref> wherein said electromagnetic sensor is a resolver and a first resultant of said sampling corresponds to a sine of said position of said rotor of the electromagnetic sensor and a second resultant of said sampling corresponds to a cosine of said position of said rotor of the electromagnetic sensor.</claim-text>
</claim>
<claim id="CLM-00009" num="00009">
<claim-text>9. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref> wherein said electromagnetic sensor is a synchro and a first resultant of said sampling corresponds to a first sine of said position of said rotor of the electromagnetic sensor, a second resultant of said sampling corresponds to a second sine of said position of said rotor of the electromagnetic sensor, and a third resultant of said sampling corresponds to a third sine of said position of said rotor of the electromagnetic sensor.</claim-text>
</claim>
<claim id="CLM-00010" num="00010">
<claim-text>10. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref> wherein said sampling is at about a frequency of said excitation signal.</claim-text>
</claim>
<claim id="CLM-00011" num="00011">
<claim-text>11. The method of <claim-ref idref="CLM-00010">claim 10</claim-ref> wherein said sampling is concurrent with about a peak of at least one of said first electromagnetic sensor signal or said second electromagnetic sensor signal.</claim-text>
</claim>
<claim id="CLM-00012" num="00012">
<claim-text>12. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref> further comprising ascertaining a phase difference between said excitation signal and at least one of said first electromagnetic sensor output signal or said second electromagnetic sensor output signal.</claim-text>
</claim>
<claim id="CLM-00013" num="00013">
<claim-text>13. The method of <claim-ref idref="CLM-00012">claim 12</claim-ref> wherein said sampling is at about a frequency of said excitation signal as well as synchronous with said excitation signal and said phase difference to compensate therefor.</claim-text>
</claim>
<claim id="CLM-00014" num="00014">
<claim-text>14. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref> wherein said decoding includes a trigonometric function.</claim-text>
</claim>
<claim id="CLM-00015" num="00015">
<claim-text>15. A system for interfacing an electromagnetic sensor with a controller in comprising:
<claim-text>a electromagnetic sensor, said electromagnetic sensor receptive to an excitation signal and transmitting a first electromagnetic sensor output signal based on said excitation signal and a second electromagnetic sensor output signal based on said excitation signal, said first electromagnetic sensor signal comprising an amplitude modulated signal corresponding to a position of a rotor of the electromagnetic sensor, said second electromagnetic sensor signal comprising another amplitude modulated signal corresponding to said position of said rotor of the electromagnetic sensor;</claim-text>
<claim-text>a controller receptive to said first electromagnetic sensor output signal and said second electromagnetic sensor signal; said controller sampling said first electromagnetic sensor signal and said second electromagnetic sensor signal at about an instance synchronous with said excitation signal to demodulate said first electromagnetic sensor signal and said second electromagnetic sensor signal; said controller further decoding a resultant of said sampling to identify said position of a rotor of the electromagnetic sensor.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00016" num="00016">
<claim-text>16. The system of <claim-ref idref="CLM-00015">claim 15</claim-ref> further including said controller generating said excitation signal.</claim-text>
</claim>
<claim id="CLM-00017" num="00017">
<claim-text>17. The system of <claim-ref idref="CLM-00016">claim 16</claim-ref> wherein said excitation signal is based on a frequency employed by said controller for existing control functions.</claim-text>
</claim>
<claim id="CLM-00018" num="00018">
<claim-text>18. The method of <claim-ref idref="CLM-00017">claim 17</claim-ref> wherein said frequency is about equivalent to another frequency employed for pulse width modulation control of a motor.</claim-text>
</claim>
<claim id="CLM-00019" num="00019">
<claim-text>19. The method of <claim-ref idref="CLM-00015">claim 15</claim-ref> wherein said sampling is a direct sampling of said first electromagnetic sensor signal and said second electromagnetic sensor signal, independent of any intermediate conversion interfaces.</claim-text>
</claim>
<claim id="CLM-00020" num="00020">
<claim-text>20. The system of <claim-ref idref="CLM-00015">claim 15</claim-ref> wherein said excitation signal is at a frequency in the range of about 2000 Hz to 25,000 Hz.</claim-text>
</claim>
<claim id="CLM-00021" num="00021">
<claim-text>21. The system of <claim-ref idref="CLM-00015">claim 15</claim-ref> wherein one of said first electromagnetic sensor output and signal said second electromagnetic sensor output signal corresponds to a sine of said position of said rotor of the electromagnetic sensor, while the other corresponds to a cosine of said position of said rotor of the electromagnetic sensor.</claim-text>
</claim>
<claim id="CLM-00022" num="00022">
<claim-text>22. The system of <claim-ref idref="CLM-00015">claim 15</claim-ref> wherein said electromagnetic sensor is a resolver and a first resultant of said sampling corresponds to a sine of said position of said rotor of the electromagnetic sensor and a second resultant of said sampling corresponds to a cosine of said position of said rotor of the electromagnetic sensor.</claim-text>
</claim>
<claim id="CLM-00023" num="00023">
<claim-text>23. The system of <claim-ref idref="CLM-00015">claim 15</claim-ref> wherein said electromagnetic sensor is a synchro and a first resultant of said sampling corresponds to a first sine of said position of said rotor of the electromagnetic sensor, a second resultant of said sampling corresponds to a second sine of said position of said rotor of the electromagnetic sensor, and a third resultant of said sampling corresponds to a third sine of said position of said rotor of the electromagnetic sensor.</claim-text>
</claim>
<claim id="CLM-00024" num="00024">
<claim-text>24. The system of <claim-ref idref="CLM-00015">claim 15</claim-ref> wherein said sampling is at about a frequency of said excitation signal.</claim-text>
</claim>
<claim id="CLM-00025" num="00025">
<claim-text>25. The system of <claim-ref idref="CLM-00024">claim 24</claim-ref> wherein said sampling is concurrent with about a peak of at least one of said first electromagnetic sensor signal or said second electromagnetic sensor signal.</claim-text>
</claim>
<claim id="CLM-00026" num="00026">
<claim-text>26. The system of <claim-ref idref="CLM-00012">claim 12</claim-ref> further comprising ascertaining a phase difference between said excitation signal and at least one of said first electromagnetic sensor output signal or said second electromagnetic sensor output signal.</claim-text>
</claim>
<claim id="CLM-00027" num="00027">
<claim-text>27. The system of <claim-ref idref="CLM-00026">claim 26</claim-ref> wherein said sampling is at about a frequency of said excitation signal as well as synchronous with said excitation signal and said phase difference to compensate therefor.</claim-text>
</claim>
<claim id="CLM-00028" num="00028">
<claim-text>28. The system of <claim-ref idref="CLM-00015">claim 15</claim-ref> wherein said decoding includes a trigonometric function.</claim-text>
</claim>
<claim id="CLM-00029" num="00029">
<claim-text>29. A system for interfacing a electromagnetic sensor with a controller comprising:
<claim-text>means for applying an excitation signal to the electromagnetic sensor;</claim-text>
<claim-text>means for receiving a first electromagnetic sensor output signal based on said excitation signal, said first electromagnetic sensor signal comprising an amplitude modulated signal corresponding to a position of a rotor of the electromagnetic sensor;</claim-text>
<claim-text>means for receiving a second electromagnetic sensor output signal based on said excitation signal, said second electromagnetic sensor signal comprising another amplitude modulated signal corresponding to said position of said rotor of the electromagnetic sensor;</claim-text>
<claim-text>means for sampling said first electromagnetic sensor signal and said second electromagnetic sensor signal at about an instance synchronous with said excitation signal to demodulate said first electromagnetic sensor signal and said second electromagnetic sensor signal; and</claim-text>
<claim-text>means for decoding a resultant of said sampling to identify said position of a rotor of the electromagnetic sensor.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00030" num="00030">
<claim-text>30. A storage medium encoded with machine-readable computer program code for of interfacing a electromagnetic sensor with a controller, said storage medium including instructions for causing a computer to implement a method comprising:
<claim-text>applying an excitation signal to the electromagnetic sensor;</claim-text>
<claim-text>receiving a first electromagnetic sensor output signal based on said excitation signal, said first electromagnetic sensor signal comprising an amplitude modulated signal corresponding to a position of a rotor of the electromagnetic sensor;</claim-text>
<claim-text>receiving a second electromagnetic sensor output signal based on said excitation signal, said second electromagnetic sensor signal comprising another amplitude modulated signal corresponding to said position of said rotor of the electromagnetic sensor;</claim-text>
<claim-text>sampling said first electromagnetic sensor signal and said second electromagnetic sensor signal at about an instance synchronous with said excitation signal to demodulate said first electromagnetic sensor signal and said second electromagnetic sensor signal; and</claim-text>
<claim-text>decoding a resultant of said sampling to identify said position of a rotor of the electromagnetic sensor.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00031" num="00031">
<claim-text>31. A computer data signal, said computer data signal embodied in a computer readable medium comprising code configured to cause a computer to implement a method for of interfacing a electromagnetic sensor with a controller comprising:
<claim-text>applying an excitation signal to the electromagnetic sensor;</claim-text>
<claim-text>receiving a first electromagnetic sensor output signal based on said excitation signal, said first electromagnetic sensor signal comprising an amplitude modulated signal corresponding to a position of a rotor of the electromagnetic sensor;</claim-text>
<claim-text>receiving a second electromagnetic sensor output signal based on said excitation signal, said second electromagnetic sensor signal comprising another amplitude modulated signal corresponding to said position of said rotor of the electromagnetic sensor;</claim-text>
<claim-text>sampling said first electromagnetic sensor signal and said second electromagnetic sensor signal at about an instance synchronous with said excitation signal to demodulate said first electromagnetic sensor signal and said second electromagnetic sensor signal; and</claim-text>
<claim-text>decoding a resultant of said sampling to identify said position of a rotor of the electromagnetic sensor.</claim-text>
</claim-text>
</claim>
</claims>
</us-patent-grant>
