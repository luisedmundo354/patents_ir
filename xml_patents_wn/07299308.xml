<us-patent-grant lang="EN" dtd-version="v4.2 2006-08-23" file="US07299308-20071120.XML" status="PRODUCTION" id="us-patent-grant" country="US" date-produced="20071106" date-publ="20071120">
<us-bibliographic-data-grant>
<publication-reference>
<document-id>
<country>US</country>
<doc-number>07299308</doc-number>
<kind>B2</kind>
<date>20071120</date>
</document-id>
</publication-reference>
<application-reference appl-type="utility">
<document-id>
<country>US</country>
<doc-number>10372172</doc-number>
<date>20030225</date>
</document-id>
</application-reference>
<us-application-series-code>10</us-application-series-code>
<priority-claims>
<priority-claim sequence="01" kind="national">
<country>JP</country>
<doc-number>2002-117858</doc-number>
<date>20020419</date>
</priority-claim>
</priority-claims>
<classifications-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>G</section>
<class>06</class>
<subclass>F</subclass>
<main-group>7</main-group>
<subgroup>00</subgroup>
<symbol-position>F</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20071120</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>G</section>
<class>06</class>
<subclass>F</subclass>
<main-group>17</main-group>
<subgroup>00</subgroup>
<symbol-position>L</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20071120</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>G</section>
<class>06</class>
<subclass>F</subclass>
<main-group>19</main-group>
<subgroup>00</subgroup>
<symbol-position>L</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20071120</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
</classifications-ipcr>
<classification-national>
<country>US</country>
<main-classification>710 52</main-classification>
<further-classification>710  6</further-classification>
<further-classification>710 29</further-classification>
<further-classification>710 36</further-classification>
<further-classification>710 45</further-classification>
<further-classification>710 53</further-classification>
<further-classification>710 58</further-classification>
<further-classification>710310</further-classification>
<further-classification>718102</further-classification>
<further-classification>701 29</further-classification>
<further-classification>701 36</further-classification>
<further-classification>701 48</further-classification>
<further-classification>701 49</further-classification>
<further-classification>701102</further-classification>
</classification-national>
<invention-title id="d0e61">Data transmission apparatus and electronic control unit</invention-title>
<references-cited>
<citation>
<patcit num="00001">
<document-id>
<country>US</country>
<doc-number>3781818</doc-number>
<kind>A</kind>
<name>Pardoe et al.</name>
<date>19731200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370538</main-classification></classification-national>
</citation>
<citation>
<patcit num="00002">
<document-id>
<country>US</country>
<doc-number>4099028</doc-number>
<kind>A</kind>
<name>Towson, IV</name>
<date>19780700</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370479</main-classification></classification-national>
</citation>
<citation>
<patcit num="00003">
<document-id>
<country>US</country>
<doc-number>4866597</doc-number>
<kind>A</kind>
<name>Kinoshita</name>
<date>19890900</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00004">
<document-id>
<country>US</country>
<doc-number>5235693</doc-number>
<kind>A</kind>
<name>Chinnaswamy et al.</name>
<date>19930800</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>711159</main-classification></classification-national>
</citation>
<citation>
<patcit num="00005">
<document-id>
<country>US</country>
<doc-number>5455920</doc-number>
<kind>A</kind>
<name>Muramatsu</name>
<date>19951000</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>709215</main-classification></classification-national>
</citation>
<citation>
<patcit num="00006">
<document-id>
<country>US</country>
<doc-number>5570347</doc-number>
<kind>A</kind>
<name>Bestler et al.</name>
<date>19961000</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370461</main-classification></classification-national>
</citation>
<citation>
<patcit num="00007">
<document-id>
<country>US</country>
<doc-number>5699250</doc-number>
<kind>A</kind>
<name>Kobayashi</name>
<date>19971200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>701 48</main-classification></classification-national>
</citation>
<citation>
<patcit num="00008">
<document-id>
<country>US</country>
<doc-number>5794244</doc-number>
<kind>A</kind>
<name>Brosch et al.</name>
<date>19980800</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>707100</main-classification></classification-national>
</citation>
<citation>
<patcit num="00009">
<document-id>
<country>US</country>
<doc-number>5832397</doc-number>
<kind>A</kind>
<name>Yoshida et al.</name>
<date>19981100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>701 29</main-classification></classification-national>
</citation>
<citation>
<patcit num="00010">
<document-id>
<country>US</country>
<doc-number>6208930</doc-number>
<kind>B1</kind>
<name>Uematsu</name>
<date>20010300</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>701110</main-classification></classification-national>
</citation>
<citation>
<patcit num="00011">
<document-id>
<country>US</country>
<doc-number>6374161</doc-number>
<kind>B1</kind>
<name>Iwai et al.</name>
<date>20020400</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>701  1</main-classification></classification-national>
</citation>
<citation>
<patcit num="00012">
<document-id>
<country>US</country>
<doc-number>6561428</doc-number>
<kind>B2</kind>
<name>Meier et al.</name>
<date>20030500</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>23546225</main-classification></classification-national>
</citation>
<citation>
<patcit num="00013">
<document-id>
<country>US</country>
<doc-number>6671565</doc-number>
<kind>B1</kind>
<name>Kobayashi</name>
<date>20031200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>700 75</main-classification></classification-national>
</citation>
<citation>
<patcit num="00014">
<document-id>
<country>US</country>
<doc-number>6704799</doc-number>
<kind>B1</kind>
<name>Kindorf et al.</name>
<date>20040300</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>719312</main-classification></classification-national>
</citation>
<citation>
<patcit num="00015">
<document-id>
<country>US</country>
<doc-number>2002/0078257</doc-number>
<kind>A1</kind>
<name>Nishimura</name>
<date>20020600</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>709318</main-classification></classification-national>
</citation>
<citation>
<patcit num="00016">
<document-id>
<country>EP</country>
<doc-number>1034982</doc-number>
<kind>A2</kind>
<date>20000900</date>
</document-id>
</patcit>
<category>cited by examiner</category>
</citation>
<citation>
<patcit num="00017">
<document-id>
<country>JP</country>
<doc-number>6-030472</doc-number>
<date>19940200</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00018">
<document-id>
<country>JP</country>
<doc-number>7-135686</doc-number>
<date>19950500</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00019">
<document-id>
<country>JP</country>
<doc-number>08-204756</doc-number>
<date>19960800</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00020">
<document-id>
<country>JP</country>
<doc-number>9-050421</doc-number>
<date>19970200</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00021">
<document-id>
<country>JP</country>
<doc-number>09-326779</doc-number>
<date>19971200</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
</references-cited>
<number-of-claims>12</number-of-claims>
<us-exemplary-claim>1</us-exemplary-claim>
<us-field-of-classification-search>
<classification-national>
<country>US</country>
<main-classification>710 52- 54</main-classification>
<additional-info>unstructured</additional-info>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>710 56</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>710  6</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>710 25</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>710 28</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>710 29</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>710 36</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>710 39</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>710 40</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>710 45</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>710 58</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>710 60</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>710 61</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>710107</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>710112</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>710310</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>718102</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>718103</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>718107</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>701 29</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>701 33</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>701 36</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>701 48</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>701 49</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>701102</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>701115</main-classification>
</classification-national>
</us-field-of-classification-search>
<figures>
<number-of-drawing-sheets>6</number-of-drawing-sheets>
<number-of-figures>9</number-of-figures>
</figures>
<us-related-documents>
<related-publication>
<document-id>
<country>US</country>
<doc-number>20030200366</doc-number>
<kind>A1</kind>
<date>20031023</date>
</document-id>
</related-publication>
</us-related-documents>
<parties>
<applicants>
<applicant sequence="001" app-type="applicant-inventor" designation="us-only">
<addressbook>
<last-name>Kondo</last-name>
<first-name>Haruhiko</first-name>
<address>
<city>Kasugai</city>
<country>JP</country>
</address>
</addressbook>
<nationality>
<country>JP</country>
</nationality>
<residence>
<country>JP</country>
</residence>
</applicant>
<applicant sequence="002" app-type="applicant-inventor" designation="us-only">
<addressbook>
<last-name>Komori</last-name>
<first-name>Hirokazu</first-name>
<address>
<city>Okazaki</city>
<country>JP</country>
</address>
</addressbook>
<nationality>
<country>JP</country>
</nationality>
<residence>
<country>JP</country>
</residence>
</applicant>
</applicants>
<agents>
<agent sequence="01" rep-type="attorney">
<addressbook>
<orgname>Nixon &amp; Vanderhye P.C.</orgname>
<address>
<country>unknown</country>
</address>
</addressbook>
</agent>
</agents>
</parties>
<assignees>
<assignee>
<addressbook>
<orgname>Denso Corporation</orgname>
<role>03</role>
<address>
<city>Kariya</city>
<country>JP</country>
</address>
</addressbook>
</assignee>
</assignees>
<examiners>
<primary-examiner>
<last-name>Nguyen</last-name>
<first-name>Tanh Q</first-name>
<department>2182</department>
</primary-examiner>
</examiners>
</us-bibliographic-data-grant>
<abstract id="abstract">
<p id="p-0001" num="0000">An electronic control unit has two microcomputers. Each microcomputer has a data buffer storing data first to be transmitted in every 8 ms, a second data buffer storing data to be transmitted in every 16 ms, and a third data buffer storing data to be transmitted in every 16 ms and being different from the first and second data buffers. The microcomputer transfers at the transmission timing of every 8 ms data in the first data buffer to the transmitting buffer, while it transfers alternately the data in the second data buffer and the data in the third data buffer to the transmitting buffer. The microcomputer also transfers an ID that indicates content of the present transmitting data to the transmitting buffer.</p>
</abstract>
<drawings id="DRAWINGS">
<figure id="Fig-EMI-D00000" num="00000">
<img id="EMI-D00000" he="69.77mm" wi="152.15mm" file="US07299308-20071120-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00001" num="00001">
<img id="EMI-D00001" he="175.51mm" wi="174.24mm" file="US07299308-20071120-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00002" num="00002">
<img id="EMI-D00002" he="171.87mm" wi="166.62mm" file="US07299308-20071120-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00003" num="00003">
<img id="EMI-D00003" he="149.01mm" wi="147.07mm" file="US07299308-20071120-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00004" num="00004">
<img id="EMI-D00004" he="200.66mm" wi="170.69mm" file="US07299308-20071120-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00005" num="00005">
<img id="EMI-D00005" he="239.86mm" wi="172.97mm" file="US07299308-20071120-D00005.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00006" num="00006">
<img id="EMI-D00006" he="236.22mm" wi="175.09mm" file="US07299308-20071120-D00006.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
</drawings>
<description id="description">
<?BRFSUM description="Brief Summary" end="lead"?>
<heading id="h-0001" level="1">CROSS REFERENCE TO RELATED APPLICATION</heading>
<p id="p-0002" num="0001">This application is based on and incorporates herein by reference Japanese Patent Application No. 2002-117858 filed on Apr. 19, 2002.</p>
<heading id="h-0002" level="1">SUMMARY OF THE INVENTION</heading>
<p id="p-0003" num="0002">The present invention relates to data communication.</p>
<heading id="h-0003" level="1">BACKGROUND OF THE INVENTION</heading>
<p id="p-0004" num="0003">In an electronic control unit (ECU) for controlling an engine of automobile, a plurality of microcomputers is used. In such an ECU, a plurality of microcomputers executes processes for controlling objects assigned thereto while sending and receiving calculated control data through communication (microcomputer communication).</p>
<p id="p-0005" num="0004">In the ECU of this type, each microcomputer transfers each data of every kind to be transmitted to the other microcomputers to its transmitting buffer in the predetermined sequence whenever it becomes the transmission timing of data. Here, a practical example is illustrated in <figref idref="DRAWINGS">FIGS. 8A and 8B</figref>. In this example, a main microcomputer and a sub-microcomputer respectively make two-way communications.</p>
<p id="p-0006" num="0005">In the example of <figref idref="DRAWINGS">FIG. 8A</figref>, the main microcomputer transmits to the sub-microcomputer various data including number of engine rotations, amount of intake air, ON/OFF state of brake switch, ON/OFF state of IG (Ignition) switch, and the like.</p>
<p id="p-0007" num="0006">Transmission sequence of all data is previously determined as follows. For example, the first data to be transmitted to the sub-microcomputer from the main microcomputer is the number of rotations, the second data is the amount of intake air and the third data is ON/OFF state of brake switch. The main microcomputer transfers all data to be transmitted to the sub-microcomputer to its transmitting buffer (TB) in the sequence described above whenever it becomes the transmission timing, and then transmits these data to the sub-microcomputer.</p>
<p id="p-0008" num="0007">Therefore, a receiving buffer (RB) of the sub-microcomputer stores respective data in the sequence in which the data is transferred from the main microcomputer. Accordingly, the sub-microcomputer in the receiving side can identify the data from the sequence of data stored in the receiving buffer.</p>
<p id="p-0009" num="0008">In the example of <figref idref="DRAWINGS">FIG. 8B</figref>, various data such as accelerator position, throttle position, vehicle speed and the like are transmitted from the sub-microcomputer. In regard to the data to be transmitted to the main microcomputer from the sub-microcomputer, transmission sequence of every data is also determined such that the first data is the accelerator position, second data is the throttle position, etc. The sub-microcomputer, whenever it becomes the transmission timing, transmits all data to be transmitted to the main microcomputer to its transmitting buffer (TB) in the sequence described above, and then transmits these data to the main microcomputer.</p>
<p id="p-0010" num="0009">Therefore, these data are stored in a receiving buffer (RB) of the main microcomputer in the sequence in which the sub-microcomputer transmits the data. From the sequence in which data are stored in the receiving buffer, the main microcomputer as a receiving side can identify the data.</p>
<p id="p-0011" num="0010">However, the above data transmission method is designed to perform transmission of all data that is to be transmitted every time it becomes the transmission timing. In a apparatus where communication is performed in every 8 ms, even data to be updated in every 32 ms has also been transmitted in every 8 ms. This means that the data to be transmitted in a longer transmission period, that is to say, data having the longer update period, are also transmitted in the same period as the data having the shorter update period. Accordingly, the method suffers from unnecessary period, confronting with difficulty in increasing the number of data to be transmitted.</p>
<p id="p-0012" num="0011">To cope with this problem, a method is considered that permits data transmission corresponding to various transmission timings by providing plural transmission timings therein. Specifically, assuming the apparatus in which communication is performed in every 8 ms, the data updated in every 32 ms is transmitted once in every four transmission timings having an interval of 8 ms (that is, in the transmission timing of every 32 ms).</p>
<p id="p-0013" num="0012">This transmission method is considered to need a program that controls all data to be transmitted with respect to which data should be transmitted and at which timing it should be transmitted. However, this method results in complication of data transmission process. Moreover, it is difficult to execute readily addition, deletion of data as the transmission object, and change of transmission timing.</p>
<p id="p-0014" num="0013">Specifically, in this case, its process is as follows: the current transmission timing is determined among a plurality of timings such as 8 ms and 32 ms from the routine which is determined at the transmission timing and thereby the data to be transmitted in the determined transmission timing to the transmitting buffer by reading this data from a memory area thereof.</p>
<p id="p-0015" num="0014">However, assuming that data d which has been transmitted at the transmission timing a is requested to be transmitted in another transmission timing b, a processing part that reads data d and transfers the data to the transmitting buffer needs to be deleted from the contents of the program which is executed when this transmission timing is determined as the transmission timing a. Then another processing part that reads data d and transfers the data to the transmitting buffer needs to be added into the contents of the program which is executed when this transmission timing is determined as the transmission timing b. Thus, the program must be revised in many parts and points.</p>
<p id="p-0016" num="0015">Therefore, an object of the present invention is to easily simplify a process for data transmission and to easily realize addition, deletion of data as the transmission object and change of transmission timing.</p>
<p id="p-0017" num="0016">A data transmission apparatus according to the present invention transfers, at transmission timing, data to be transmitted in this transmission timing among a plurality of data to a transmitting buffer, and then transmits the data stored in this transmitting buffer to other apparatuses. This transmission apparatus is provided with a plurality of data buffers, for a plurality of transmission timings, to which data to be transmitted in such transmission timings are stored. Moreover, in this transmission apparatus, a data buffer in which the data to be transmitted in the inputted transmission timing is stored is identified from the data buffers for the transmission timings and the data stored in the identified data buffer is then transmitted to the transmitting buffer.</p>
<p id="p-0018" num="0017">This transmission apparatus provides the following advantages.</p>
<p id="p-0019" num="0018">(1) Addition and deletion of data as the transmission object and change of transmission timing can be realized only by changing contents of data buffers provided for respective transmission timings (which data shall be stored to which data buffer). Particularly, when transmission timing of a certain data d is requested to be changed, such request can be satisfied only by changing destination of write operation of data d in the manner that the calculation program for obtaining data d writes such data d to the data buffer corresponding to the transmission timing b after the above change in place of the data buffer corresponding to the transmission timing a before the above change.
<br/>
(2) Data transmission process can be simplified because the data as transmission object is processed in unit of data buffer. Namely, each data as the transmission object is not required to be checked individually whether it is transmitted in the present transmission timing or not and since such transmission object data can be processed simultaneously for every data buffer, the data transmission can be processed effectively.
<br/>
(3) Since only the data to be transmitted in each transmission timing is transmitted, transmission efficiency is high and the number of data to be transmitted can be increased easily.
</p>
<p id="p-0020" num="0019">In an electronic control unit of the present invention, a plurality of microcomputers executes the process to control the control object while data communication is performed. Particularly the microcomputers in the transmitting side to transmit data among a plurality of microcomputers are respectively provided with data buffers storing data to be transmitted for the specified transmission timing of a plurality of transmission timings. Moreover, the microcomputers in the transmitting side identifies, at every transmission timing, the data buffer storing the data to be transmitted at the transmission timing among the data buffers for respective transmission timings and transmits the data in the identified data buffer to the other microcomputers.</p>
<p id="p-0021" num="0020">In the case of the electronic control unit wherein data can be transmitted from each one of a plurality of microcomputers, it is effective to apply the configuration of microcomputers in the transmitting side for all microcomputers, but it is also possible to apply the configuration of microcomputers in the transmitting side only to a part of the microcomputers.</p>
<?BRFSUM description="Brief Summary" end="tail"?>
<?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?>
<description-of-drawings>
<heading id="h-0004" level="1">BRIEF DESCRIPTION OF THE DRAWINGS</heading>
<p id="p-0022" num="0021">The above and other objects, features and advantages of the present invention will become more apparent from the following detailed description made with reference to the accompanying drawings. In the drawings:</p>
<p id="p-0023" num="0022"><figref idref="DRAWINGS">FIG. 1</figref> is a block diagram illustrating an electronic control unit according to a first embodiment of the present invention;</p>
<p id="p-0024" num="0023"><figref idref="DRAWINGS">FIG. 2</figref> is a diagram illustrating data buffers and transmitting buffers provided in a microcomputer in the first embodiment and the relationship between the buffers;</p>
<p id="p-0025" num="0024"><figref idref="DRAWINGS">FIG. 3</figref> is a flowchart illustrating transmitting data processes to be executed in the first embodiment;</p>
<p id="p-0026" num="0025"><figref idref="DRAWINGS">FIG. 4</figref> is a diagram illustrating an example where five data buffers are provided according to a second embodiment of the present invention;</p>
<p id="p-0027" num="0026"><figref idref="DRAWINGS">FIG. 5</figref> is a diagram illustrating a definition table used in the second embodiment;</p>
<p id="p-0028" num="0027"><figref idref="DRAWINGS">FIG. 6</figref> is a flowchart illustrating transmitting data processes to be executed in the second embodiment;</p>
<p id="p-0029" num="0028"><figref idref="DRAWINGS">FIG. 7</figref> is a diagram illustrating operations of the second embodiment; and</p>
<p id="p-0030" num="0029"><figref idref="DRAWINGS">FIGS. 8A and 8B</figref> are diagrams illustrating a related art.</p>
</description-of-drawings>
<?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?>
<?DETDESC description="Detailed Description" end="lead"?>
<heading id="h-0005" level="1">DETAILED DESCRIPTION OF THE PREFERRED EMBODIMENT</heading>
<heading id="h-0006" level="1">First Embodiment</heading>
<p id="p-0031" num="0030">Referring first to <figref idref="DRAWINGS">FIG. 1</figref>, an electronic control unit (ECU) <b>1</b> is provided to control an engine of an automobile and is provided with two microcomputers <b>3</b><i>a</i>, <b>3</b><i>b</i>. Each of the microcomputers <b>3</b><i>a</i>, <b>3</b><i>b </i>comprises a CPU <b>5</b> for executing a program, a ROM <b>7</b> for storing the program executed by the CPU <b>5</b> and fixed data which is referred when the program is executed, a RAM <b>9</b> for storing the data calculated by the CPU <b>5</b>, an I/O interface <b>11</b> for inputting and outputting data from and to external circuits, and a bustep <b>13</b> connecting these elements.</p>
<p id="p-0032" num="0031">The ECU <b>1</b> is further provided with an input/output circuit <b>15</b> for inputting to the microcomputers <b>3</b><i>a</i>, <b>3</b><i>b </i>the signals from various sensors (crank angle sensor, intake air sensor and the like) and various switches (brake switch, ignition switch and the like) provided for detecting the operating condition of the engine and for outputting drive signals to various actuators such as an injector and a motor for adjusting throttle position depending on commands from the microcomputers <b>3</b><i>a</i>, <b>3</b><i>b</i>. The ECU <b>1</b> is further provided with a power supply IC <b>19</b> for supplying a constant power source voltage Vdd to the microcomputers <b>3</b><i>a</i>, <b>3</b><i>b </i>and the input/output circuit <b>15</b> by receiving an electrical power from a battery <b>17</b> of the vehicle.</p>
<p id="p-0033" num="0032">In the ECU <b>1</b>, the microcomputers <b>3</b><i>a</i>, <b>3</b><i>b </i>are connected with a communication line <b>21</b>. The communication line <b>21</b> includes specifically a data transmission line to the microcomputer <b>3</b><i>b </i>from the microcomputer <b>3</b><i>a</i>, a data transmission line to the microcomputer <b>3</b><i>a </i>from the microcomputer <b>3</b><i>b </i>and a clock line for common use of clock for data transmission and reception by the microcomputers <b>3</b><i>a</i>, <b>3</b><i>b</i>. Meanwhile, the power supply IC <b>19</b> is provided with a watched-dog timer function (uncontrolled operation monitoring function) for outputting a reset signal RST to the microcomputer <b>3</b><i>a </i>when a watched-dog pulse WDP is not outputted within every predetermined time from the microcomputer <b>3</b><i>a</i>. Moreover, whether the microcomputer <b>3</b><i>b </i>is operated normally or not can be monitored by the microcomputer <b>3</b><i>a. </i></p>
<p id="p-0034" num="0033">In the ECU <b>1</b>, two microcomputers <b>3</b><i>a</i>, <b>3</b><i>b </i>execute the processes for controlling the control objects assigned thereto while sending and receiving each other the data obtained respectively via the communication line <b>21</b>. For example, the data including the number of rotations of an engine, amount of intake air, ON/OFF state of a brake switch and ON/OFF state of an IG switch is periodically transmitted to the microcomputer <b>3</b><i>b </i>from the microcomputer <b>3</b><i>a</i>. The data including accelerator position, throttle position and vehicle speed is periodically transmitted to the microcomputer <b>3</b><i>a </i>from the microcomputer <b>3</b><i>b. </i></p>
<p id="p-0035" num="0034">The microcomputer <b>3</b><i>a </i>executes the processes to control a fuel injector and an ignition device (namely, for controlling fuel injection and ignition timing) based on the data obtained by itself and data received from the microcomputer <b>3</b><i>b</i>. The microcomputer <b>3</b><i>b </i>executes the processes for controlling a motor for adjusting the throttle position based on the data obtained by itself and data received from the microcomputer <b>3</b><i>a. </i></p>
<p id="p-0036" num="0035">Data transmission to the microcomputer <b>3</b><i>b </i>from the microcomputer <b>3</b><i>a </i>will be described below. Data transmission to the microcomputer <b>3</b><i>b </i>from the microcomputer <b>3</b><i>a </i>can also be realized in the same manner.</p>
<p id="p-0037" num="0036">First, as illustrated in <figref idref="DRAWINGS">FIG. 2</figref>, the RAM <b>9</b> of the microcomputer <b>3</b><i>a </i>has the areas for a data buffer <b>31</b> to store the data to be transmitted in every 8 ms (8 ms data buffer), two data buffers <b>32</b>, <b>33</b> to store the data to be transmitted in every 16 ms, and a transmitting data buffer <b>41</b> to store the data (transmitting data) transmitted to a communication partner (the microcomputer <b>3</b><i>b</i>).</p>
<p id="p-0038" num="0037">The microcomputer <b>3</b><i>a </i>transmits the data in the transmitting buffer <b>41</b> to the microcomputer <b>3</b><i>b </i>by transferring the data to be transmitted in the timing of every 8 ms to the transmitting buffer <b>41</b> and the data stored in the 8 ms data buffer <b>31</b> is transmitted every time (namely, whenever it becomes the transmission timing in every 8 ms). Moreover, the data stored in the data buffer <b>32</b> and the data stored in the data buffer <b>33</b> are alternately transmitted.</p>
<p id="p-0039" num="0038">Namely, the transmission interval of data stored in the data buffer <b>32</b> and the transmission interval of data stored in the data buffer <b>33</b> are both 16 ms but these intervals are differentiated from each other by 8 ms in their transmission timings. Therefore, the data buffer <b>32</b> is referred to as a 16 ms-A data buffer <b>32</b>, while the data buffer <b>33</b> as a 16 ms-B data buffer <b>33</b>. Moreover, the timing for transmitting data in the 16 ms-A data buffer <b>32</b> is defined as the 8 ms timing &lt;1&gt;, while the timing for transmitting data in the 16 ms-B data buffer <b>33</b> is defined as the 8 ms timing &lt;2&gt;.</p>
<p id="p-0040" num="0039">Therefore, the microcomputer <b>3</b><i>a </i>transmits, in the 8 ms timing &lt;1&gt;, the data in the 8 ms data buffer <b>31</b> (8 ms data) and the data in the 16 ms-A data buffer <b>32</b> (16 ms-A data) to the transmitting buffer <b>41</b>, and then transmits these data to the microcomputer <b>3</b><i>b</i>. The microcomputer <b>3</b><i>a </i>further transfers, in the 8 sm timing &lt;2&gt; as the next transmission timing, the 8 ms data and the data in the 16 ms-B data buffer <b>33</b> (16 ms-B data) to the transmitting buffer <b>41</b> and then transmits these data to the microcomputer <b>3</b><i>b. </i></p>
<p id="p-0041" num="0040">Moreover, the microcomputer <b>3</b><i>a </i>transfers, to the beginning position of the transmitting buffer <b>41</b>, an ID (corresponding to data of identification information) indicating contents of the data to be transmitted this time (namely, the transmitting data format indicating the location of data in the transmitting data). Therefore, the ID is also transmitted to the microcomputer <b>3</b><i>b </i>of the transmission partner together with the usual transmission data. Thus the microcomputer <b>3</b><i>b </i>can detect contents of data received this time from the ID thereof.</p>
<p id="p-0042" num="0041">In this embodiment, the data which is updated in every 8 ms such as the number of rotations of engine and amount of intake air among those calculated by the calculation program in the microcomputer <b>3</b><i>a </i>are stored in the 8 ms data buffer <b>31</b>. The data which are updated in every 16 ms such as ON/OFF state of IG switch and ON/OFF state of brake switch are almost equally shared and stored in the 16 ms-A data buffer <b>32</b> and 16 ms-B data buffer <b>33</b>.</p>
<p id="p-0043" num="0042">Specifically, the CPU <b>5</b> of the microcomputer <b>3</b><i>a </i>performs operations of <figref idref="DRAWINGS">FIG. 2</figref> based on a program illustrated as a flowchart in <figref idref="DRAWINGS">FIG. 3</figref>. The data transmission is processed at every transmission timing of 8 ms.</p>
<p id="p-0044" num="0043">As illustrated in <figref idref="DRAWINGS">FIG. 3</figref>, when the CPU <b>5</b> of microcomputer <b>3</b><i>a </i>starts to process the data transmission, contents of the 8 ms data buffer <b>21</b> (namely, 8 ms data) are transferred to the transmitting buffer <b>41</b> in step <b>110</b>, and whether a count Cnt of a counter is 0 or not is determined in the following step <b>120</b>. The counter is provided to determine whether the present transmission timing is 8 ms timing&lt;1&gt; or 8 ms timing&lt;2&gt;, and a value of this transmission timing is initialized to 0 when the microcomputer <b>3</b><i>a </i>has started its operation.</p>
<p id="p-0045" num="0044">When the count Cnt of the counter is determined as 0 in step <b>120</b>, the present transmission timing is determined as 8 ms timing&lt;1&gt; and content of the 16 ms-A data buffer (namely, 16 ms-A data) is transferred to the transmitting buffer <b>41</b> in step <b>130</b>. Next, in step <b>140</b>, a value of ID is set to 0, and this ID (=0) is transferred to the leading position of the transmitting buffer <b>41</b>. Subsequently, in step <b>150</b>, the count Cnt of the counter is incremented by one (+1), and thereafter process of the relevant transmission data is completed. Accordingly, data in the transmitting buffer <b>41</b> is transmitted to the microcomputer <b>3</b><i>b </i>with the transmission process (not illustrated).</p>
<p id="p-0046" num="0045">Meanwhile, when it is determined that the count Cnt of the counter is not 0 in step <b>120</b>, the present transmission timing is determined as 8 ms timing&lt;2&gt; and content of 16 ms-B data buffer <b>33</b> (namely 16 ms-B data) is transferred to the transmitting buffer <b>41</b>. Next, a value of ID is set to 1 and this ID (=1) is transferred to the leading position of the transmitting buffer <b>41</b> in step <b>170</b>. In the following step <b>180</b>, the count Cnt of the counter is reset to 0 (initialized) and thereafter process of the relevant transmitting data is completed. Thereby, data in the transmitting buffer <b>41</b> is transmitted to the microcomputer <b>3</b><i>b </i>in the conventional manner.</p>
<p id="p-0047" num="0046">With the data transmitting process described above, the ID having the value 0, 8 ms data and 16 ms-A data are collected in this sequence to the transmitting buffer <b>41</b> and then transmitted to the microcomputer <b>3</b><i>b </i>at the 8 ms timing&lt;1&gt; (namely, at one timing of two transmission timings of every 8 ms) On the other hand, the ID having the value 1, 8 ms data and 16 ms-B data are collected in this sequence to the transmitting buffer <b>41</b> and are then transmitted to the microcomputer <b>3</b><i>b </i>at the 8 ms timing&lt;2&gt; (namely, at one timing of two transmission timings of every 8 ms).</p>
<p id="p-0048" num="0047">As described above, the microcomputers <b>3</b><i>a</i>, <b>3</b><i>b </i>in the ECU <b>1</b> of this embodiment are respectively provided, for each of a plurality of transmission timings, with data buffers <b>31</b>, <b>32</b>, <b>33</b> to which a plurality of data to be transmitted in respective transmission timings are stored. Therefore, the data to be transmitted to the communication partner in the same transmission timing are stored in the form of a block in the microcomputers <b>3</b><i>a</i>, <b>3</b><i>b</i>. Here, the microcomputers <b>3</b><i>a</i>, <b>3</b><i>b </i>identify in step <b>120</b>, whenever the transmission timing of every 8 ms is inputted, the data buffer to which the data to be transmitted in the latest transmission timing is stored from the data buffers <b>31</b> to <b>33</b> for each transmission timing, and transfers the data in the identified data buffer to the transmitting buffer <b>41</b> and then transmits this data to the communication partner.</p>
<p id="p-0049" num="0048">Therefore, according to the ECU <b>1</b> of this embodiment, the effects (1) to (3) described above can be attained. In the process of <figref idref="DRAWINGS">FIG. 3</figref>, a flag may be substituted for the counter Cnt. Moreover, three or more data buffers may also be used.</p>
<heading id="h-0007" level="1">Second Embodiment</heading>
<p id="p-0050" num="0049">In this embodiment, it is assumed that two data buffers <b>34</b>, <b>35</b> to which the data to be transmitted in every 32 ms (the data which is updated in every 32 ms) is stored are added as shown in <figref idref="DRAWINGS">FIG. 5</figref> in addition to the data buffers <b>31</b> to <b>33</b> in the microcomputer <b>3</b><i>a </i>as illustrated in <figref idref="DRAWINGS">FIG. 4</figref>. The data buffer <b>34</b> is referred to as the 32 ms-A data buffer, while the other data buffer <b>35</b> as the 32 ms-B data buffer.</p>
<p id="p-0051" num="0050">In this case, the microcomputer <b>3</b><i>a </i>switches the data buffer as the transmission object (namely, the data buffer as the transmission object to send data to the transmitting buffer <b>41</b>) in a manner, for example, that the data in the 32 ms-A data buffer <b>34</b> (32 ms-A data) is transferred to the transmitting buffer <b>41</b> in one transmission timing of two transmission timings for sending the 16 ms-A data, while the data in the 32 ms-B data buffer <b>35</b> (32 ms-B data) is transferred to the transmitting buffer <b>41</b> in one transmission timing of two transmission timings for sending the 16 ms-B data.</p>
<p id="p-0052" num="0051">Accordingly, the 32 ms-A data and 32 ms-B data are transmitted to the microcomputer <b>3</b><i>b </i>of the communication partner in one different transmission timing of four transmission timings of every 8 ms. In this case, the data buffers as the transmission objects in the transmission timing of every 8 ms can be combined in the four kinds of “31+32+34”, “31+33+35”, “31+32” and “31+33” among the five data buffers <b>31</b> to <b>35</b>.</p>
<p id="p-0053" num="0052">In this case, the value of ID transferred to the leading position of the transmitting buffer <b>41</b> is set to any one of 0 to 3 depending on the four kinds of combination of data buffers as the transmission objects. Moreover, the area defined as “16 ms data” in the transmitting buffer <b>41</b> of <figref idref="DRAWINGS">FIG. 4</figref> indicates that any one of the 16 ms-A data and 16 ms-B data is transferred thereto, while the area defined as “32 ms data” indicates that any one of the 32 ms-A data and 32 ms-B data is transferred thereto.</p>
<p id="p-0054" num="0053">Meanwhile, even when five data buffers are provided as illustrated in <figref idref="DRAWINGS">FIG. 4</figref>, a program may be formed so that the data buffers as the transmission objects may be switched depending on the count of counter as in the case of the process in <figref idref="DRAWINGS">FIG. 3</figref>.</p>
<p id="p-0055" num="0054">In the ECU <b>1</b> of the second embodiment, the RAM <b>9</b> of the microcomputer <b>3</b><i>a </i>is provided with five data buffers <b>31</b> to <b>35</b> as illustrated in <figref idref="DRAWINGS">FIG. 4</figref> (in detail, each area as the data buffers <b>31</b> to <b>35</b>).</p>
<p id="p-0056" num="0055">Moreover, the ROM <b>7</b> of the microcomputer <b>3</b><i>a </i>is provided with an area as a table storage area. In this table storage area, a definition table as illustrated in <figref idref="DRAWINGS">FIG. 5</figref> is stored to suggest that the data in which data buffer should be transmitted in which transmission timing (that is, which data buffer should be considered as the transmission object).</p>
<p id="p-0057" num="0056">In other words, in this second embodiment, the transmission timing in every 8 ms is sorted to four timings of 8 ms timing A, 8 ms timing B, 8 ms timing C and 8 ms timing D depending on content of the transmitting data. The definition table is formed as the two-dimensional table indicating that the data buffers <b>31</b> to <b>35</b> which should be defined as the transmission object are provided for the 8 ms timings A to D. In more detail, in this definition table, first to fourth lines correspond to 8 ms timings A to D, while the first to fifth columns correspond to data buffers <b>31</b> to <b>35</b>. In this table, “1” defines “transmission object”. Therefore, since data of the first line in the definition table is “1, 1, 0, 1, 0”, this data suggests that the 8 ms data buffer <b>31</b>, 16 ms-A data buffer <b>32</b> and 32 ms-A data buffer <b>34</b> are set as the transmission object in the 8 ms timing A. Since data of the second line in the definition table is “1, 0, 1, 0, 1”, this data suggests that the 8 ms data buffer <b>31</b>, 16 ms-B data buffer <b>33</b> and 32 ms-B data buffer <b>35</b> are set as the transmission object in the 8 ms timing B.</p>
<p id="p-0058" num="0057">Moreover, in the ECU <b>1</b> of the second embodiment, the CPU <b>5</b> of microcomputer <b>3</b><i>a </i>processes the data transmission illustrated in <figref idref="DRAWINGS">FIG. 6</figref> in place of the process of <figref idref="DRAWINGS">FIG. 3</figref>. Thereby, the data buffer which should be considered as the transmission object in the present transmission timing is identified from the definition table and the data in the identified data buffer is transferred to the transmitting buffer <b>41</b>.</p>
<p id="p-0059" num="0058">In the process of transmitting data of <figref idref="DRAWINGS">FIG. 6</figref> and the following description, the first line of definition table in <figref idref="DRAWINGS">FIG. 5</figref> is defined as the line 0, while the first column of definition table is defined as the column 0. Moreover, in <figref idref="DRAWINGS">FIG. 6</figref> and following description, Cnt is a variable indicating the number of lines of definition table, while i is a variable indicating the number of columns of definition table in <figref idref="DRAWINGS">FIG. 5</figref>. In addition, “Table[Cnt][i]” indicates a data value of the line Cnt and the column i of the definition table in <figref idref="DRAWINGS">FIG. 5</figref>. Moreover, a value of Cnt is initialized to 0 when the microcomputer <b>3</b><i>a </i>has started operation.</p>
<p id="p-0060" num="0059">When the CPU <b>5</b> of microcomputer <b>3</b><i>a </i>starts execution of the data transmitting process as illustrated in <figref idref="DRAWINGS">FIG. 6</figref>, a value of i is initialized first to 0 in step <b>210</b>. In the following step <b>220</b>, whether the value of i is smaller than the number of data buffers (5 in this example) or not is determined.</p>
<p id="p-0061" num="0060">Here, if the value of i is smaller than the number of data buffers (step <b>220</b>: YES), whether a value of “Table[Cnt][i]” is 1 or not is determined by referring to the definition table in step <b>230</b>. When the value is 1 (step <b>230</b>: YES), data in the data buffer (namely the i-th data buffer corresponding to the column i) corresponding to the value of i in the definition table is transferred to the transmitting buffer <b>41</b> in step <b>240</b>.</p>
<p id="p-0062" num="0061">When the process of step <b>240</b> is executed or when it is determined that a value of “Table[Cnt][i]” is not 1 in step <b>230</b> (step <b>230</b>: NO), the value of i is incremented by one (1) in step <b>250</b>, and thereafter the process returns to step <b>220</b>.</p>
<p id="p-0063" num="0062">Meanwhile, when it is determined in step <b>220</b> that the value of i is not smaller than the number <b>5</b> of data buffers (namely, the value of i reaches the number of data buffers), the process shifts to step <b>260</b>, upon determination that all data in the data buffers to be transmitted in the present transmission timing can be transferred to the transmitting buffer <b>41</b>.</p>
<p id="p-0064" num="0063">In this step <b>260</b>, the value of ID is set to the value of the present Cnt and its ID is transferred to the leading position of the transmitting buffer <b>41</b>.</p>
<p id="p-0065" num="0064">Moreover, in the subsequent step <b>270</b>, it is determined whether the value of Cnt is smaller than the value “Number of ID−1”, or not. When the value of Cnt is smaller than “Number of ID” (step <b>270</b>: YES), the value of Cnt is incremented by one (1), and thereafter process of the relevant transmitting data is terminated. In this timing, data in the transmitting buffer <b>41</b> is transmitted to the microcomputer <b>3</b><i>b </i>in the known manner.</p>
<p id="p-0066" num="0065">In this second embodiment, the transmission timing in every 8 ms is sorted to for timings A to D depending on the content of transmitting data and the IDs of different values are given to the transmitting data in the timings A to D. In more detail, as illustrated in <figref idref="DRAWINGS">FIG. 5</figref>, the ID of transmitting data of 8 ms timing A is set to “0”, the ID of transmitting data of 8 ms timing B is set to “1”n, the ID of transmitting data of 8 ms timing C is set to “2” and the ID of transmitting data of 8 ms timing D is set to “3”. Therefore, in this embodiment, the number of IDs is four (4).</p>
<p id="p-0067" num="0066">On the other hand, when it is determined in step <b>270</b> that the value of Cnt is not smaller than the value of “Number of ID —1” (step <b>270</b>: NO), the value of Cnt is initialized to 0 in step <b>290</b>. Thereafter, process of the relevant transmitting data is completed.</p>
<p id="p-0068" num="0067">According to this transmitting data process (<figref idref="DRAWINGS">FIG. 6</figref>), the value of Cnt is repeatedly updated in such an order of 0, 1, 2, 3, 0, and 1 whenever the relevant process is executed with the processes in step <b>270</b> to step <b>290</b>.</p>
<p id="p-0069" num="0068">When the value of Cnt is M (where, M is any one of 0 to 3), the M-th line in the definition table of <figref idref="DRAWINGS">FIG. 5</figref> is searched column by column up to the fourth column from the 0-th column and the data buffer corresponding to the column where the data value is 1 is identified as the data buffer to be the transmission object and data in this data buffer is transferred to the transmitting buffer <b>41</b>. Thereafter, the value of ID is set to M with the process in the step <b>260</b> and is then transferred to the transmitting buffer <b>41</b>.</p>
<p id="p-0070" num="0069">Accordingly, when the value of Cnt is, for example, 0, the 0-th line corresponding to the 8 ms timing A in the definition table is searched column by column. Thereby, the 8 ms data buffer <b>31</b> corresponding to the column where the data value is 1, 16 ms-A data buffer <b>32</b> and 32 ms-A data buffer <b>34</b> are identified as the data buffer of the transmission object. As a result, data in the data buffers <b>31</b>, <b>32</b>, <b>34</b> are transferred to the transmitting buffer <b>41</b>. In this case, moreover, the ID having the value 0 is transferred to the leading position of the transmitting buffer <b>41</b> with the process in the step <b>260</b>.</p>
<p id="p-0071" num="0070">In addition, when the value of Cnt is, for example, 3, the third line corresponding to the 8 ms timing D in the definition table is searched column by column. Thereby, the 8 ms data buffer <b>31</b> corresponding to the column where the data value is 1 and the 16 ms-B data buffer <b>33</b> are identified as the data buffer of the transmission object. As a result, data in the data buffers <b>31</b>, <b>33</b> are transferred to the transmitting buffer <b>41</b>. In this case, the ID having the value 3 is transferred to the leading position of the transmitting buffer <b>41</b> with the process in step <b>260</b>.</p>
<p id="p-0072" num="0071">According to the CPU of the second embodiment described above, even when content of process (process of transmitting data in <figref idref="DRAWINGS">FIG. 6</figref>) to be executed by the microcomputers <b>3</b><i>a</i>, <b>3</b><i>b </i>for data transmission is not changed, the data buffer storing the data to be transmitted and the transmission timing to transmit this data in the same data buffer may be updated only by changing content of the definition table. Moreover, addition and deletion of transmitting data in unit of data buffer can also be realized easily only by changing content of the definition table.</p>
<p id="p-0073" num="0072">For example, when it is requested to change the apparatus to transmit a certain data (additional data) in the timing of every 32 ms which is different from the two transmission timings of the 32 ms-A data buffer <b>34</b> and 32 ms-B data buffer <b>35</b>, it is possible to add a data buffer <b>36</b> (not shown) for storing such additional data (32 ms-C data buffer) is added and a fifth column corresponding to the 32 ms-C data buffer is provided additionally in the definition table as illustrated in <figref idref="DRAWINGS">FIG. 7</figref>. In this case, it is only required to change the number of data buffers to be compared with the value of i in step <b>220</b> of <figref idref="DRAWINGS">FIG. 6</figref> to “6” from “5”.</p>
<p id="p-0074" num="0073">According to the process of transmitting data of the second embodiment, various changes may be covered even when content of process is not changed. Therefore, such process of transmitting data can also be applied to the other CPUs of different transmission object data and transmission schedule.</p>
<p id="p-0075" num="0074">The preferred embodiments of the present invention have been described but the present invention, of course, allows various changes and modifications.</p>
<p id="p-0076" num="0075">For example, in the process of transmitting data (<figref idref="DRAWINGS">FIG. 6</figref>) of the second embodiment, the value of Cnt is updated whenever the process of transmitting data is completed to switch the ID in every process. However, if such switching is not performed correctly, it is possible that the value of Cnt is decremented by one (1) (namely, not updated) and the data of the same ID is transmitted in the next transmission timing.</p>
<p id="p-0077" num="0076">Moreover, in the above embodiments, it is also possible to provide a data buffer where the data to be transmitted in every 24 ms is stored and a data buffer where the data to be transmitted in every 40 ms is stored. Namely, it is possible to set the transmission period of each data buffer to any period that is equal to an integer times of the shortest transmission period (8 ms in above embodiments).</p>
<p id="p-0078" num="0077">Meanwhile, in the above embodiments, the transmission apparatus of the present invention has been applied to communication between microcomputers in the ECUs, but the transmission apparatus of the present invention can also be applied in the same manner to communication between ECUs forming the LAN within the vehicle and communication between other apparatuses.</p>
<?DETDESC description="Detailed Description" end="tail"?>
</description>
<us-claim-statement>What is claimed is:</us-claim-statement>
<claims id="claims">
<claim id="CLM-00001" num="00001">
<claim-text>1. A data transmission apparatus comprising:
<claim-text>a transmitting buffer for transmitting a plurality of data to other apparatuses;</claim-text>
<claim-text>a plurality of data buffers storing the plurality of data to be transmitted at specified transmission timings among a plurality of different transmission timings;</claim-text>
<claim-text>a transmission process means identifying one of the plurality of data buffers storing data to be transmitted at a specified transmission timing from the plurality of data buffers, thereby to transfer the data in the identified data buffer to the transmitting buffer; and</claim-text>
<claim-text>a memory for storing at least a two-dimensional definition table that defines a relation between a first variable and a second variable, the first variable having values corresponding to data buffer identifiers of the plurality of data buffers storing the data to be transmitted and the second variable having values corresponding to the plurality of the specified transmission timings so that the transmission process means identifies the data buffer storing the data to be transmitted at the specified transmission timing based on the two-dimensional definition table;</claim-text>
<claim-text>wherein at least two of the plurality of data buffers have a same transmission interval, wherein the at least two of the plurality of data buffers store data to be transmitted at different transmission timings so that a transmission of a first data buffer of the at least two of the plurality of data buffers always begins non-simultaneously with a transmission of a second data buffer of the at least two of the plurality of data buffers, wherein the first data buffer stores data of a first type and the second data buffer stores data of a second type, wherein the first type is different from the second type,</claim-text>
<claim-text>wherein the second variable has values that correspond to specified transmission timings of integer times of a minimum transmission timing, and</claim-text>
<claim-text>wherein the data buffers having the same transmission interval are identified by the transmission process means by varying the first variable and the second variable.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00002" num="00002">
<claim-text>2. The transmission apparatus according to <claim-ref idref="CLM-00001">claim 1</claim-ref>,
<claim-text>wherein the transmission process means transfers to the transmitting buffer data of identification information indicating content of the data to be transmitted from the transmitting buffer.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00003" num="00003">
<claim-text>3. An electronic control unit comprising:
<claim-text>a plurality of microcomputers for controlling control objects while performing data communications therebetween,</claim-text>
<claim-text>wherein the plurality of the microcomputers has a transmitting side microcomputer used for transmitting data and including a plurality of data buffers storing data to be transmitted at a plurality of specified transmission timings;</claim-text>
<claim-text>the transmitting side microcomputer identifies one of the data buffers storing the data to be transmitted from the plurality of data buffers thereby to transfer the data in the identified data buffer to a receiving side microcomputer;</claim-text>
<claim-text>the transmitting side microcomputer has a memory storing at least a two-dimensional definition table defining a relation between a first variable and a second variable, the first variable having values corresponding to data buffer identifiers of the data buffers and the second variable having values corresponding to the specified transmission timings;</claim-text>
<claim-text>the transmitting side microcomputer identifies the data buffer storing data to be transmitted at a specified transmission timing based on the relation between the first and second variables defined in the two-dimensional definition table;</claim-text>
<claim-text>wherein at least two of the plurality of data buffers have a same transmission interval, wherein the at least two of the plurality of data buffers store data to be transmitted at different transmission timings so that a transmission of a first data buffer of the at least two of the plurality of data buffers always begins non-simultaneously with a transmission of a second data buffer of the at least two of the plurality of data buffers, wherein the first data buffer stores data of a first type and the second data buffer stores data of a second type, wherein the first type is different from the second type;</claim-text>
<claim-text>wherein the second variable has values that correspond to specified transmission timings of integer times of a minimum transmission timing; and</claim-text>
<claim-text>wherein the data buffers having the same transmission interval are identified by the transmitting side microcomputer by varying the first variable and the second variable.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00004" num="00004">
<claim-text>4. The electronic control unit according to <claim-ref idref="CLM-00003">claim 3</claim-ref>,
<claim-text>wherein the transmitting side microcomputer transmits the data in the data buffer identified based on the two-dimensional definition table and identification information indicating content of data to be transmitted to the receiving side microcomputer.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00005" num="00005">
<claim-text>5. The transmission apparatus according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein:
<claim-text>the transmission process means identifies the data buffer at the specified transmission timing by using the first variable and the second variable.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00006" num="00006">
<claim-text>6. The transmission apparatus according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein:
<claim-text>the transmitting buffer, the data buffers, the transmission process means and the memory are mounted in a vehicle;</claim-text>
<claim-text>the memory for storing the two-dimensional definition table is a ROM; and</claim-text>
<claim-text>the transmitting buffer and the data buffers are provided in a RAM.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00007" num="00007">
<claim-text>7. The electronic control unit according to <claim-ref idref="CLM-00003">claim 3</claim-ref>, wherein:
<claim-text>the transmitting side microcomputer identifies the data buffer at the specified transmission timing by using the first variable and the second variable.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00008" num="00008">
<claim-text>8. The electronic control unit according to <claim-ref idref="CLM-00003">claim 3</claim-ref>, wherein:
<claim-text>the plurality of microcomputers and the memory are mounted in a vehicle;</claim-text>
<claim-text>the memory for storing the two-dimensional definition table is a ROM; and</claim-text>
<claim-text>the plurality of data buffers are provided in a RAM mounted in the vehicle.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00009" num="00009">
<claim-text>9. The transmission apparatus according to <claim-ref idref="CLM-00005">claim 5</claim-ref>, wherein the transmission process means specifies the one of the data buffers by varying the first variable.</claim-text>
</claim>
<claim id="CLM-00010" num="00010">
<claim-text>10. The transmission apparatus according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the transmission process means specifies the one of the data buffers by varying the first variable.</claim-text>
</claim>
<claim id="CLM-00011" num="00011">
<claim-text>11. The electronic control unit according to <claim-ref idref="CLM-00007">claim 7</claim-ref>, wherein the transmitting side microcomputer specifies the one of the data buffers by varying the first variable.</claim-text>
</claim>
<claim id="CLM-00012" num="00012">
<claim-text>12. The electronic control unit according to <claim-ref idref="CLM-00003">claim 3</claim-ref>, wherein the transmitting side microcomputer specifies the one of the data buffers by varying the first variable.</claim-text>
</claim>
</claims>
</us-patent-grant>
