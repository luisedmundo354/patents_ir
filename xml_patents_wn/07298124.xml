<us-patent-grant lang="EN" dtd-version="v4.2 2006-08-23" file="US07298124-20071120.XML" status="PRODUCTION" id="us-patent-grant" country="US" date-produced="20071106" date-publ="20071120">
<us-bibliographic-data-grant>
<publication-reference>
<document-id>
<country>US</country>
<doc-number>07298124</doc-number>
<kind>B2</kind>
<date>20071120</date>
</document-id>
</publication-reference>
<application-reference appl-type="utility">
<document-id>
<country>US</country>
<doc-number>11001366</doc-number>
<date>20041201</date>
</document-id>
</application-reference>
<us-application-series-code>11</us-application-series-code>
<us-term-of-grant>
<us-term-extension>166</us-term-extension>
</us-term-of-grant>
<classifications-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>G</section>
<class>05</class>
<subclass>F</subclass>
<main-group>1</main-group>
<subgroup>40</subgroup>
<symbol-position>F</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20071120</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
</classifications-ipcr>
<classification-national>
<country>US</country>
<main-classification>323283</main-classification>
<further-classification>323284</further-classification>
<further-classification>323235</further-classification>
<further-classification>323224</further-classification>
</classification-national>
<invention-title id="d0e53">PWM regulator with discontinuous mode and method therefor</invention-title>
<references-cited>
<citation>
<patcit num="00001">
<document-id>
<country>US</country>
<doc-number>5235254</doc-number>
<kind>A</kind>
<name>Ho</name>
<date>19930800</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>315219</main-classification></classification-national>
</citation>
<citation>
<patcit num="00002">
<document-id>
<country>US</country>
<doc-number>5475579</doc-number>
<kind>A</kind>
<name>John et al.</name>
<date>19951200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>363 2107</main-classification></classification-national>
</citation>
<citation>
<patcit num="00003">
<document-id>
<country>US</country>
<doc-number>5481178</doc-number>
<kind>A</kind>
<name>Wilcox et al.</name>
<date>19960100</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00004">
<document-id>
<country>US</country>
<doc-number>5912552</doc-number>
<kind>A</kind>
<name>Tateishi</name>
<date>19990600</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>323285</main-classification></classification-national>
</citation>
<citation>
<patcit num="00005">
<document-id>
<country>US</country>
<doc-number>6781356</doc-number>
<kind>B1</kind>
<name>Yang et al.</name>
<date>20040800</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00006">
<document-id>
<country>US</country>
<doc-number>6853174</doc-number>
<kind>B1</kind>
<name>Inn</name>
<date>20050200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>323285</main-classification></classification-national>
</citation>
<citation>
<nplcit num="00007">
<othercit>Maxim, “Notebook CPU Step-Down Controller for Intel Mobile Voltage Positioning (IMVP-II)”, 35 pages, No. 19-1960; Rev. 3; Aug. 2002; Maxim Integrated Products, Copyright 2002.</othercit>
</nplcit>
<category>cited by other</category>
</citation>
</references-cited>
<number-of-claims>19</number-of-claims>
<us-exemplary-claim>1</us-exemplary-claim>
<us-field-of-classification-search>
<classification-national>
<country>US</country>
<main-classification>323283</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>323284</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>323235</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>323224</main-classification>
</classification-national>
</us-field-of-classification-search>
<figures>
<number-of-drawing-sheets>2</number-of-drawing-sheets>
<number-of-figures>3</number-of-figures>
</figures>
<us-related-documents>
<related-publication>
<document-id>
<country>US</country>
<doc-number>20060113974</doc-number>
<kind>A1</kind>
<date>20060601</date>
</document-id>
</related-publication>
</us-related-documents>
<parties>
<applicants>
<applicant sequence="001" app-type="applicant-inventor" designation="us-only">
<addressbook>
<last-name>Kan</last-name>
<first-name>Kwok Kei Toby</first-name>
<address>
<city>Shatin</city>
<country>HK</country>
</address>
</addressbook>
<nationality>
<country>HK</country>
</nationality>
<residence>
<country>HK</country>
</residence>
</applicant>
<applicant sequence="002" app-type="applicant-inventor" designation="us-only">
<addressbook>
<last-name>Leung</last-name>
<first-name>Tak Ming</first-name>
<address>
<city>Kowloon</city>
<country>HK</country>
</address>
</addressbook>
<nationality>
<country>HK</country>
</nationality>
<residence>
<country>HK</country>
</residence>
</applicant>
</applicants>
<agents>
<agent sequence="01" rep-type="attorney">
<addressbook>
<last-name>Hightower</last-name>
<first-name>Robert F.</first-name>
<address>
<country>unknown</country>
</address>
</addressbook>
</agent>
</agents>
</parties>
<assignees>
<assignee>
<addressbook>
<orgname>Semiconductor Components Industries, L.L.C.</orgname>
<role>02</role>
<address>
<city>Phoenix</city>
<state>AZ</state>
<country>US</country>
</address>
</addressbook>
</assignee>
</assignees>
<examiners>
<primary-examiner>
<last-name>Riley</last-name>
<first-name>Shawn</first-name>
<department>2838</department>
</primary-examiner>
</examiners>
</us-bibliographic-data-grant>
<abstract id="abstract">
<p id="p-0001" num="0000">In one embodiment, a power supply controller has a variable frequency oscillator that is used for controlling a PWM controller. The power supply controller varies a frequency of the variable frequency oscillator.</p>
</abstract>
<drawings id="DRAWINGS">
<figure id="Fig-EMI-D00000" num="00000">
<img id="EMI-D00000" he="165.35mm" wi="257.73mm" file="US07298124-20071120-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00001" num="00001">
<img id="EMI-D00001" he="265.60mm" wi="172.30mm" orientation="landscape" file="US07298124-20071120-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00002" num="00002">
<img id="EMI-D00002" he="233.34mm" wi="128.35mm" file="US07298124-20071120-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
</drawings>
<description id="description">
<?BRFSUM description="Brief Summary" end="lead"?>
<heading id="h-0001" level="1">BACKGROUND OF THE INVENTION</heading>
<p id="p-0002" num="0001">The present invention relates, in general, to electronics, and more particularly, to methods of forming semiconductor devices and structure.</p>
<p id="p-0003" num="0002">In the past, the semiconductor industry utilized various methods and structures to form pulse width modulated (PWM) power supply controllers. One important characteristic of the PWM controllers was the efficiency. Many PWM power supply controllers changed operating modes based on the amount of current required by the load. In some controllers, a continuous conduction mode was used when the current required by the load was large and a burst mode was used when the current required by the load was low. However, the burst mode often resulted in a large ripple voltage in the output voltage. While operating in the burst mode, the operating frequency often resulted in the PWM controller producing audible noise. Additionally, the PWM controllers needed complicated logic to switch the PWM controller between the two operating modes.</p>
<p id="p-0004" num="0003">Accordingly, it is desirable to have a PWM controller that has high efficiency during light load conditions, that reduces the ripple voltage in light load conditions, that can reduce the audible noise, and that reduces the amount of control logic.</p>
<?BRFSUM description="Brief Summary" end="tail"?>
<?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?>
<description-of-drawings>
<heading id="h-0002" level="1">BRIEF DESCRIPTION OF THE DRAWINGS</heading>
<p id="p-0005" num="0004"><figref idref="DRAWINGS">FIG. 1</figref> schematically illustrates an embodiment of a portion of a power supply control system in accordance with the present invention;</p>
<p id="p-0006" num="0005"><figref idref="DRAWINGS">FIG. 2</figref> schematically illustrates an embodiment of a portion of the power supply control system of <figref idref="DRAWINGS">FIG. 1</figref> in accordance with the present invention; and</p>
<p id="p-0007" num="0006"><figref idref="DRAWINGS">FIG. 3</figref> is a plan view of an embodiment of a portion of a semiconductor device that includes a portion of the power supply control system of <figref idref="DRAWINGS">FIG. 1</figref> in accordance with the present invention.</p>
</description-of-drawings>
<?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?>
<?DETDESC description="Detailed Description" end="lead"?>
<p id="p-0008" num="0007">For simplicity and clarity of illustration, elements in the figures are not necessarily to scale, and the same reference numbers in different figures denote the same elements. Additionally, descriptions and details of well-known steps and elements are omitted for simplicity of the description. As used herein current carrying electrode means an element of a device that carries current through the device such as a source or a drain of an MOS transistor or an emitter or a collector of a bipolar transistor or a cathode or anode of a diode, and a control electrode means an element of the device that controls current through the device such as a gate of an MOS transistor or a base of a bipolar transistor. Although the devices are explained herein as certain N-channel or P-Channel devices, a person of ordinary skill in the art will appreciate that complementary devices are also possible in accordance with the present invention.</p>
<heading id="h-0003" level="1">DETAILED DESCRIPTION OF THE DRAWINGS</heading>
<p id="p-0009" num="0008"><figref idref="DRAWINGS">FIG. 1</figref> schematically illustrates an embodiment of a portion of a power supply control system <b>10</b> that includes a power supply controller <b>25</b>. Power supply controller <b>25</b> assists in providing system <b>10</b> with a high efficiency during light load conditions. System <b>10</b> receives power, such as a DC voltage or a rectified AC voltage, between a power input <b>11</b> and a power return <b>12</b> and responsively generates a regulated output voltage between an output voltage terminal <b>13</b> and return <b>12</b>. System <b>10</b> typically includes an energy storage inductor <b>14</b>, an energy storage capacitor <b>16</b>, a feedback network <b>17</b>, a power switch or transistor <b>22</b> that is coupled to supply charging current to inductor <b>14</b>, and a power switch or transistor <b>23</b> that is coupled to provide a discharge current for inductor <b>14</b>. In the preferred embodiment, feedback network <b>17</b> includes a voltage divider formed by resistors <b>18</b> and <b>19</b> that connected in series between terminal <b>13</b> and return <b>12</b>. A feedback node <b>20</b> is formed at the connection between resistors <b>18</b> and <b>19</b>, and generates a feedback voltage that is representative of the value of the output voltage between terminal <b>13</b> and return <b>12</b>. Network <b>17</b> and transistors <b>22</b> and <b>23</b> typically are external to controller <b>25</b>; however, in some embodiments transistors <b>22</b> and <b>23</b> or network <b>17</b> may be internal to controller <b>25</b>.</p>
<p id="p-0010" num="0009">Power supply controller <b>25</b> includes a PWM controller <b>32</b>, a zero crossing detector <b>43</b>, a zero crossing latch <b>44</b>, a pulse generator <b>45</b>, a transient comparator <b>30</b>, an oscillator circuit or oscillator <b>50</b>, an error amplifier <b>28</b>, a reference generator or reference <b>26</b>, and an internal voltage regulator <b>27</b>. Controller <b>25</b> receives power between a voltage input <b>80</b> and a voltage return <b>81</b>. Input <b>80</b> generally is connected to input <b>11</b> and return <b>81</b> generally is connected to return <b>12</b>. Regulator <b>27</b> receives the voltage from input <b>80</b> and forms an internal voltage for operating the elements within controller <b>25</b> as illustrated by the connection from an output <b>31</b> of regulator <b>27</b> to oscillator <b>50</b>. Reference <b>26</b> is formed to generate reference voltages for operating various elements of controller <b>25</b> including a first reference voltage that is coupled to error amplifier <b>28</b>, a second reference voltage that is coupled to a hysteresis comparator <b>56</b> of oscillator <b>50</b>, and a third reference voltage that is coupled to transient comparator <b>30</b>.</p>
<p id="p-0011" num="0010">PWM controller <b>32</b> is formed to generate a first PWM drive signal on an output <b>37</b> of controller <b>32</b> and a second PWM drive signal on a second output <b>38</b> of controller <b>32</b>. Controller <b>32</b> typically includes a PWM comparator <b>33</b>, a PWM latch <b>34</b>, and PWM control logic <b>36</b> that is used in controlling the timing of the PWM drive signals on outputs <b>37</b> and <b>38</b>. Transistor driver <b>40</b> and inverting transistor driver <b>39</b> are formed to provide a drive capability that can provide sufficient current to drive respective transistors <b>22</b> and <b>23</b>. Drivers <b>39</b> and <b>40</b> receive the respective first and second PWM drive signals from respective outputs <b>37</b> and <b>38</b> and responsively drive respective transistors <b>22</b> and <b>23</b> with the PWM drive signals through connections to respective outputs <b>82</b> and <b>83</b> of controller <b>25</b>. Such PWM controllers and transistor drivers are well known to those skilled in the art.</p>
<p id="p-0012" num="0011">Oscillator <b>50</b> is formed to provide a variable frequency clock signal (CLK) on an output <b>62</b> that is used as a timing reference for PWM controller <b>32</b>. Oscillator <b>50</b> is also formed to provide a variable frequency ramp signal (Ramp) that is used as a reference voltage by PWM controller <b>32</b>. Oscillator <b>50</b> includes a variable frequency oscillator (VFO) <b>51</b> that is formed to generate both the variable frequency ramp (Ramp) signal and a variable frequency oscillator signal that is used to form the variable frequency clock (CLK) signal. Oscillator <b>50</b> also includes a buffer <b>59</b> that isolates VFO <b>51</b> from controller <b>32</b> and also buffers the Ramp signal to provide sufficient drive for controller <b>32</b>. A pulse shaper <b>61</b> of oscillator <b>50</b> receives the variable frequency oscillator signal generated by VFO <b>51</b>, sharpens the edges of the variable frequency oscillator signal, and adjusts the duty cycle to form the CLK signal. In one embodiment, shaper <b>61</b> adjusts the duty cycle to approximately 50-50. Preferably, shaper <b>61</b> does not alter the frequency so that the CLK signal has the same variable frequency as the variable frequency oscillator signal. In some embodiments, either or both of shaper <b>61</b> and buffer <b>59</b> may be omitted. VFO <b>51</b> includes hysteresis comparator <b>56</b>, a variable current source <b>52</b>, a timing capacitor <b>53</b>, a discharge current source <b>58</b>, and a discharge switch or transistor <b>57</b>. The value of the current generated by variable current source <b>52</b> is controlled by the value of a frequency control signal that is applied to a current control input of source <b>52</b>. Oscillator <b>50</b> also includes a frequency control circuit <b>65</b> that is formed to generate the frequency control signal on a frequency control output <b>74</b>. As will be seen further hereinafter, increasing the value of the frequency control signal increases the frequency of the Ramp signal and the frequency of the variable frequency oscillator signal of VFO <b>51</b>, thus, the frequency of the CLK signal and the corresponding operating frequency of PWM controller <b>32</b>. The frequency of VFO <b>51</b>, the Ramp signal, and the CLK signal is represented by:
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>F</i>51=(<i>K*V</i>74)+<i>F</i>min<?in-line-formulae description="In-line Formulae" end="tail"?>
</p>
<p id="p-0013" num="0012">where
<ul id="ul0001" list-style="none">
    <li id="ul0001-0001" num="0000">
    <ul id="ul0002" list-style="none">
        <li id="ul0002-0001" num="0013">F51—is the oscillation frequency of VFO <b>51</b>,</li>
        <li id="ul0002-0002" num="0014">K—is the scaling actor of VFO <b>51</b>,</li>
        <li id="ul0002-0003" num="0015">V74—is the value of the variable frequency control signal on output <b>74</b>, and</li>
        <li id="ul0002-0004" num="0016">Fmin—is the minimum frequency of VFO <b>51</b>.
<br/>
Typically, Fmin is selected to be a frequency that is greater than the audible frequency range. For the example embodiment of VFO <b>51</b> illustrated in <figref idref="DRAWINGS">FIG. 1</figref>, the minimum frequency can be set by configuring source <b>52</b> to have a minimum current that results in the desired frequency. Circuit <b>65</b> includes a frequency increase current source <b>66</b>, a frequency increase switch or transistor <b>67</b>, a frequency decrease current source <b>71</b>, a frequency decrease switch <b>72</b>, a frequency capacitor <b>68</b>, a transient switch or transistor <b>70</b>, and a frequency control node <b>69</b> that is connected to output <b>74</b>.
</li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0014" num="0017">For normal load conditions, system <b>10</b> operates in a continuous conduction mode (CCM). For light load conditions, the current required by the load connected between terminal <b>13</b> and return <b>12</b> (not shown) decreases. Controller <b>25</b> responsively reduces the width of the drive pulse for transistor <b>22</b>. In some cases, the load current decreases sufficiently so that a discharge current <b>78</b> through inductor <b>14</b> reaches a value that is substantially zero. This type of operation is often referred to as a discontinuous conduction mode (DCM). The discontinuous conduction mode (DCM) typically is identified as a cycle of the CLK signal in which discharge current <b>78</b> through inductor <b>14</b> reaches a value that is substantially zero. The DCM operation of a particular CLK cycle begins approximately after current <b>78</b> through inductor <b>14</b> reaches the substantially zero value. DCM operation can occur for one cycle or for multiple cycles of the CLK signal based on current <b>78</b> becoming substantially zero for that particular cycle. As will be seen further hereinafter, the zero crossing of current <b>78</b> is detected by detector <b>43</b>. Discharge current <b>78</b> is the current through inductor <b>14</b>. The current through transistor <b>23</b> may be different than just current <b>78</b>. Thus, controller <b>25</b> is formed to be compatible with either CCM or DCM operation and continues to enable transistors <b>22</b> and <b>23</b> in the same manner during both CCM and DCM operation.</p>
<p id="p-0015" num="0018">The operation of controller <b>25</b> during the first portion of the CLK cycle is the same in for either CCM or DCM operation. This first portion of the CLK cycle is the time that the PWM drive signal on output <b>37</b> of controller <b>32</b> is asserted. During this first portion of the CLK cycle, oscillator <b>50</b> generates the variable frequency clock signal (CLK) which sets latch <b>34</b> and facilitates controller <b>32</b> asserting the PWM drive signal on output <b>82</b> to enable transistor <b>22</b>. Enabling transistor <b>22</b> supplies a charging current <b>77</b> to inductor <b>14</b>, capacitor <b>16</b>, and any load (not shown) connected between terminal <b>13</b> and return <b>12</b>. Charging current <b>77</b> is the current through inductor <b>14</b>. Asserting the CLK signal also resets latch <b>44</b> and prevents circuit <b>65</b> from decreasing the value of the frequency control signal on output <b>74</b> of circuit <b>65</b> while the PWM drive signal on output <b>37</b> of controller <b>32</b> is asserted. In the exemplary embodiment illustrated in <figref idref="DRAWINGS">FIG. 1</figref>, an edge detector circuit or edge detector <b>76</b> detects that the CLK signal is asserted and generates a pulse that resets latch <b>44</b>. Asserting the PWM drive signal on output <b>37</b> also enables transistor <b>67</b> to conduct current from current source <b>66</b> to capacitor <b>68</b> thereby charging capacitor <b>68</b> and increasing the value of the frequency control signal applied to current source <b>52</b>. Increasing the frequency control signal increases the amount of current supplied by source <b>52</b>. Increasing the current supplied by source <b>52</b> increases the current supplied to charge capacitor <b>53</b> thereby charging capacitor <b>53</b> faster and increasing the operating frequency of oscillator <b>50</b>. As the value of the voltage on capacitor <b>53</b> increases past the value of the second reference voltage applied to comparator <b>56</b>, an output of comparator <b>56</b> goes high thereby enabling transistor <b>57</b> to begin discharging capacitor <b>53</b> through current source <b>58</b>. Typically, the value of the discharge current supplied by source <b>58</b> is greater than the value of the current supplied by source <b>52</b>. When source <b>58</b> has discharged capacitor <b>53</b> to a value approximately equal to or less than the value of the second reference voltage, the output of comparator <b>56</b> goes low thereby disabling transistor <b>57</b> which allows source <b>52</b> to again charge capacitor <b>53</b>. Comparator <b>56</b> typically has a hysteresis input in order to prevent false triggering of comparator <b>56</b>. As can be seen, VFO <b>51</b> functions as a relaxation oscillator. The example embodiment of VFO <b>51</b> and frequency control circuit <b>65</b> that are illustrated in <figref idref="DRAWINGS">FIG. 1</figref> are example implementations of VFO <b>51</b> and circuit <b>65</b> but other implementations may be possible.</p>
<p id="p-0016" num="0019">Error amplifier <b>28</b> receives the feedback signal through a connection between a feedback input <b>84</b> of controller <b>25</b> and node <b>20</b>. In some embodiments, amplifier <b>28</b> may include a frequency compensation network <b>29</b>. Amplifier <b>28</b> generates an error signal that is received by comparator <b>33</b>. Comparator <b>33</b> also receives the Ramp signal from oscillator <b>50</b>. When the value of the ramp signal is approximately equal to or greater than the value of the error signal, comparator <b>33</b> resets latch <b>34</b>. The reset of latch <b>34</b> is received by logic <b>36</b> which responsively negates the PWM drive signal on output <b>82</b> and disable transistor <b>22</b>. Negating the PWM drive signal on output <b>37</b> of controller <b>32</b> also disables transistor <b>67</b> and decouples current source <b>66</b> from capacitor <b>68</b> thereby terminating the charging of capacitor <b>68</b>. Logic <b>36</b> also responsively generates a PWM drive signal on output <b>83</b> to enable transistor <b>23</b> to steer current <b>78</b> through transistor <b>23</b>. As is well known to those skilled in the art, transistor <b>23</b> has a body diode that may conduct some current when transistor <b>23</b> is not enabled, thus, enabling transistor <b>23</b> steers the current through transistor <b>23</b> to be controlled by transistor <b>23</b>.</p>
<p id="p-0017" num="0020">If the current required by the load (not shown) connected between terminal <b>13</b> and return <b>12</b> remains large enough to prevent current <b>78</b> from becoming substantially zero, the second portion of the CLK cycle proceeds with CCM operation. In CCM operation of the second portion of the CLK cycle, controller <b>32</b> keeps transistor <b>23</b> enabled for the second portion of the CLK cycle and the corresponding cycle of controller <b>32</b> until oscillator <b>50</b> generates another cycle of the CLK signal and another corresponding PWM drive signal cycle. Unless current <b>78</b> reaches substantially zero, the operation continues in CCM operation as described previously.</p>
<p id="p-0018" num="0021">As long as CCM operation continues, the value of the frequency control signal is increased by each PWM drive signal on output <b>37</b> until oscillator <b>50</b> reaches the maximum frequency of oscillator <b>50</b>. Typically, the maximum frequency is selected to be the desired operating frequency in the continuous conduction mode. After the maximum frequency is reached during CCM operation, the operating frequency of oscillator <b>50</b> remains substantially constant. Thus, during CCM operation the frequency gradually increases until reaching the maximum frequency. For the example embodiment illustrated in <figref idref="DRAWINGS">FIG. 1</figref>, the maximum frequency (Fmax) of oscillator <b>50</b> is represented by:
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>F</i>max=(<i>V</i>31<i>*K</i>)+<i>F</i>min<?in-line-formulae description="In-line Formulae" end="tail"?>
</p>
<p id="p-0019" num="0022">where
<ul id="ul0003" list-style="none">
    <li id="ul0003-0001" num="0000">
    <ul id="ul0004" list-style="none">
        <li id="ul0004-0001" num="0023">V31—is the value of the voltage on output <b>31</b> of regulator <b>27</b>, and</li>
        <li id="ul0004-0002" num="0024">K—is the scaling actor of VFO <b>51</b>.</li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0020" num="0025">If the current required by the load decreases sufficiently, DCM operation will begin. A CLK cycle for DCM operation begins similarly to CCM operation with the same operation during the first portion of the CLK cycle. Oscillator <b>50</b> asserts the CLK signal to initiate a CLK cycle and a corresponding PWM drive signal cycle. Controller <b>32</b> responsively asserts the PWM drive signal on output <b>37</b> which resets latch <b>44</b> and enables transistor <b>22</b> to form current <b>77</b>. Subsequently, comparator <b>33</b> resets latch <b>34</b> to terminate the PWM drive signal on output <b>37</b> of controller <b>32</b> and generate a PWM drive signal on output <b>38</b> to enable transistor <b>23</b>.</p>
<p id="p-0021" num="0026">Negating the PWM drive signal on output <b>37</b> of controller <b>32</b> also disables transistor <b>67</b> and decouples current source <b>66</b> from capacitor <b>68</b> thereby terminating the charging of capacitor <b>68</b>. The amount of charge stored on capacitor <b>68</b> during the first portion of the CLK cycle that output <b>37</b> is asserted is represented by:
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>Q</i>up=<i>T</i>on*<i>I</i>66<?in-line-formulae description="In-line Formulae" end="tail"?>
</p>
<p id="p-0022" num="0027">where
<ul id="ul0005" list-style="none">
    <li id="ul0005-0001" num="0000">
    <ul id="ul0006" list-style="none">
        <li id="ul0006-0001" num="0028">Qup—the charge stored on capacitor <b>68</b>,</li>
        <li id="ul0006-0002" num="0029">Ton—the time that output <b>37</b> is asserted, and</li>
        <li id="ul0006-0003" num="0030">I66—the current of source <b>66</b>.
<br/>
During DCM operation, time Ton is proportional to the square root of charging current <b>77</b>, thus, the charge added to capacitor <b>68</b> and the increase in the frequency of oscillator <b>50</b> is representative of the current through inductor <b>14</b>. As a result, the frequency of oscillator <b>50</b> will change gradually with current <b>77</b>. After the PWM drive signal on output <b>37</b> is negated, the value of the voltage stored on capacitor <b>68</b> and the corresponding frequency control signal remain substantially constant because source <b>52</b> has a high input impedance. Consequently, the operating frequency of VFO <b>51</b> remains substantially constant after transistor <b>67</b> is disabled. As is well known to those skilled in the art, there may be some change in the frequency due to leakage current, however, the change is usually small and the value remains substantially constant. Typically changes of up to ten percent (10%) are regarded by those skilled in the art as substantially constant.
</li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0023" num="0031">Approximately when current <b>78</b> becomes substantially zero, DCM operation begins. Zero crossing detector <b>43</b> is connected to node <b>21</b> to detect discharge current <b>78</b> through inductor <b>14</b> reaching a value that is substantially zero. When the value of current <b>78</b> becomes substantially equal to zero, the output of zero crossing detector <b>43</b> is asserted. As is well known to those skilled in the art, there may be minor offsets and variances that cause the output of detector <b>43</b> to be asserted slightly before or slightly after current <b>78</b> reaches a value of zero, however, the variance is usually small. Typically variances or errors of up to ten percent (10%) of the total cycle or period of the current through inductor <b>14</b> (the cycle of current <b>77</b> plus current <b>78</b>) are regarded by those skilled in the art as substantially zero. Such zero crossing detectors are well known to those skilled in the art. Control logic <b>36</b> receives the asserted output of detector <b>43</b> and responsively disables transistor <b>23</b>. The asserted output of detector <b>43</b> also sets latch <b>44</b> forcing the Q output high. Pulse generator <b>45</b> generates a pulse in response to the Q output going high. The high output of generator <b>45</b> enables transistor <b>72</b> thereby coupling source <b>71</b> to begin discharging capacitor <b>68</b> and decreasing the value of the frequency control signal applied to current source <b>52</b>. Oscillator <b>50</b> receives the frequency control signal and responsively decreases the operating frequency.</p>
<p id="p-0024" num="0032">When the asserted period of the output of generator <b>45</b> expires, the output is negated which disables transistor <b>72</b> and terminates the discharging of capacitor <b>68</b>. Thus, asserting the zero crossing signal (ZC) removes a fixed amount of charge from capacitor <b>68</b> that reduces the average value of the charge on capacitor <b>68</b>. The amount of charge removed is represented by:
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>Q</i>dn=<i>T</i>45<i>*I</i>71<?in-line-formulae description="In-line Formulae" end="tail"?>
</p>
<p id="p-0025" num="0033">where
<ul id="ul0007" list-style="none">
    <li id="ul0007-0001" num="0000">
    <ul id="ul0008" list-style="none">
        <li id="ul0008-0001" num="0034">Qdn—the charge removed from capacitor <b>68</b>,</li>
        <li id="ul0008-0002" num="0035">T45—the width of the pulse of generator <b>45</b>, and</li>
        <li id="ul0008-0003" num="0036">I71—the current of source <b>71</b>.</li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0026" num="0037">Reducing the value of the voltage on capacitor <b>68</b> reduces the value of the frequency control signal applied to source <b>52</b> and the current supplied by source <b>52</b>. Decreasing the current supplied to charge capacitor <b>53</b> charges capacitor <b>53</b> slower and decreases the operating frequency of the CLK and Ramp signals and increases the corresponding operating period of controller <b>25</b>. Decreasing the operating frequency of controller <b>25</b> increases the time between leading edges of the PWM drive signal on output <b>82</b>. It should be noted that the width of the PWM drive signal on output <b>82</b> is different from the period between leading edges. After disabling transistor <b>72</b>, the value of the frequency control signal remains substantially constant because of the high input impedance of source <b>52</b>. The value of the frequency control signal remains substantially constant until oscillator <b>50</b> generates another asserted CLK signal to assert another PWM drive signal. The amount of the change in the value of the variable frequency control signal and the corresponding frequency of the CLK signal can be adjusted by changing the ratio of the current from sources <b>66</b> and <b>71</b>, or changing the value of either of capacitor <b>68</b>, or changing the width of the pulse formed by generator <b>45</b>.</p>
<p id="p-0027" num="0038">Outputs <b>37</b> and <b>38</b> remains negated and transistors <b>22</b> and <b>23</b> remain disabled until oscillator <b>50</b> generates another cycle of the CLK signal. As long as the current required by the load remains light, the DCM operation continues for each cycle of the CLK signal. At some point during DCM operation, Qup and Qdn can become equal and controller <b>25</b> operates in an equilibrium condition that keeps the operating frequency of controller <b>25</b> substantially constant. The duration of the pulse formed by generator <b>45</b> affects where the equilibrium condition occurs. Consequently the width of the pulse generally is selected to ensure that the equilibrium can occur in a steady state condition. In one embodiment, the width of the pulse is between approximately twenty and two hundred (20-200) nanoseconds in order to remove the fixed charge from capacitor <b>68</b> to achieve the equilibrium.</p>
<p id="p-0028" num="0039">As explained previously, the value of the variable frequency control signal is reduced only during DCM operation.</p>
<p id="p-0029" num="0040">During large transient conditions, the output voltage on output terminal <b>13</b> may change a large amount and the load connected thereto may require a large change in the load current. Transient comparator <b>30</b> is used to form a quick change in the value of charging current <b>77</b> during transient conditions and during start-up conditions in order to provide the desired current to the load. Comparator <b>30</b> compares the error signal from amplifier <b>28</b> to the third reference voltage from reference <b>26</b>. The value of the third reference voltage is selected to be near a value the feedback signal that represents a large change in the output voltage. Typically, the value of the third reference voltage is larger than the first reference voltage in order to accomplish the quick change. When the output voltage decreases a large amount, the value of the error signal increases. If the error voltage increases to a value approximately equal to or greater than the third reference voltage, the output of comparator <b>30</b> is asserted which enables transistor <b>70</b> to connect capacitor <b>68</b> to the internal operating voltage from regulator <b>27</b>. Enabling transistor <b>70</b> quickly charges capacitor <b>68</b> thereby increasing the value of the frequency control signal and the corresponding frequency of the CLK signal.</p>
<p id="p-0030" num="0041">The width of the pulses created by generator <b>45</b> typically is dependent on the input voltage on input <b>80</b>. This is illustrated by the input of generator <b>45</b> that is connected to input <b>80</b>. As the voltage on input <b>80</b> increases, the width of the pulse from generator <b>45</b> may decrease. Such a decrease reduces the amount of charge removed from capacitor <b>68</b> thereby reducing the frequency dependency on the input voltage. In some embodiments, this voltage dependency is a result of current sources that are connected to receive power from input <b>80</b>.</p>
<p id="p-0031" num="0042">As illustrated in <figref idref="DRAWINGS">FIG. 1</figref>, system <b>10</b> is coupled in a buck configuration. However, those skilled in the art will realize that controller <b>25</b> may also be coupled in a any other type of dc-dc converter having a switching oscillator including boost or buck-boost configurations that have power supply controllers coupled as current mode, feed-forward, voltage mode or other types of controllers. Additionally, oscillator <b>50</b> may be used in other oscillator applications.</p>
<p id="p-0032" num="0043">In order to provide the functionality described for <figref idref="DRAWINGS">FIG. 1</figref>, regulator <b>27</b> has a first terminal connected to input <b>80</b>, a second terminal connected to return <b>81</b>, and output <b>31</b> connected to a first terminal of source <b>52</b>. A second terminal of source <b>52</b> is commonly connected to a first terminal of capacitor <b>53</b>, a drain of transistor <b>57</b>, an input of buffer <b>59</b>, and a non-inverting input of comparator <b>56</b>. A control input of source <b>52</b> is connected to a first terminal of capacitor <b>68</b>, a drain of transistor <b>72</b>, and a source of transistors <b>67</b> and <b>70</b>. A second terminal of capacitor <b>53</b> is connected to return <b>81</b> and to a first terminal of source <b>58</b>. A second terminal of source <b>58</b> is connected to a source of transistor <b>57</b>. A gate of transistor <b>57</b> is connected to the output of comparator <b>56</b> and an input of shaper <b>61</b>. An inverting input of comparator <b>56</b> is connected to a second reference output of reference <b>26</b>. A second terminal of capacitor <b>68</b> is connected to return <b>81</b> and to a first terminal of source <b>71</b>. A drain of transistor <b>67</b> is connected to a first terminal of source <b>66</b>. A second terminal of source <b>66</b> is commonly connected to a drain of transistor <b>70</b> and output <b>31</b> of regulator <b>27</b>. A gate of transistor <b>70</b> is connected to an output of comparator <b>30</b>. A second terminal of source <b>71</b> is connected to the source of transistor <b>72</b>. A gate of transistor <b>72</b> is connected to the output of generator <b>54</b> which has an input connected to the Q output of latch <b>44</b>. A set input of latch <b>44</b> is commonly connected to a control input of logic <b>36</b> and an output of detector <b>43</b>. A reset input of latch <b>44</b> is connected to an output of detect <b>76</b>. An input of detector <b>43</b> is connected to input <b>85</b>. The Ramp output of buffer <b>59</b> is connected to a non-inverting input of comparator <b>33</b>. Output <b>62</b> of shaper <b>61</b> is connected to a set input of latch <b>34</b> and to an input of detect <b>76</b>. A reset input of latch <b>34</b> is connected to an output of comparator <b>33</b>. An inverting input of comparator <b>33</b> is commonly connected to a non-inverting input of comparator <b>30</b> and to an output of amplifier <b>28</b>. An inverting input of comparator <b>30</b> is connected to a third output of reference <b>26</b>. A first output of reference <b>26</b> is connected to a non-inverting input of amplifier <b>28</b> which has an inverting input connected to input <b>84</b>. A Q output of latch <b>34</b> is connected to an input of logic <b>36</b> and a Q bar output of latch <b>34</b> is connected to another input of logic <b>36</b>. Output <b>37</b> of logic <b>36</b> is connected to an input of driver <b>39</b> which has an output connected to output <b>82</b>. Output <b>38</b> of logic <b>36</b> is connected to an input of driver <b>40</b> which has an output connected to output <b>83</b>.</p>
<p id="p-0033" num="0044"><figref idref="DRAWINGS">FIG. 2</figref> schematically illustrates a portion of an example of an embodiment of pulse generator <b>45</b>. Those skilled in the art will realize that the embodiment illustrated in <figref idref="DRAWINGS">FIG. 2</figref> is one example of a pulse generator configuration and that other configurations are possible. Generator <b>45</b> includes an inverter <b>91</b>, a timing switch or transistor <b>92</b>, a timing capacitor <b>94</b>, a timing current source <b>93</b>, and a NOR gate <b>95</b>. Typically current source <b>93</b> is a controllable current source that has a current that value that is controlled by a control input <b>80</b>. For example source <b>93</b> may be a voltage controlled current source that is controlled by the value of the voltage on input <b>80</b>. In the embodiment illustrated in <figref idref="DRAWINGS">FIG. 1</figref>, input <b>81</b> is connected to input <b>80</b> to be controlled by the value of the input voltage.</p>
<p id="p-0034" num="0045"><figref idref="DRAWINGS">FIG. 3</figref> schematically illustrates an enlarged plan view of a portion of an embodiment of a semiconductor device <b>96</b> that is formed on a semiconductor die <b>97</b>. Controller <b>25</b> is formed on die <b>97</b>. Die <b>97</b> may also include other circuits that are not shown in <figref idref="DRAWINGS">FIG. 3</figref> for simplicity of the drawing. Controller <b>25</b> and device <b>96</b> are formed on die <b>97</b> by semiconductor manufacturing techniques that are well known to those skilled in the art.</p>
<p id="p-0035" num="0046">In view of all of the above, it is evident that a novel device and method is disclosed. Included, among other features, is forming the oscillator of a power supply controller to have a frequency that is responsive to the charging current of a inductor of a power supply system in which the power supply controller is configured. Changing the frequency of the oscillator responsively to the current through the inductor improves the efficiency of the power supply controller in light load current conditions by reducing the operating frequency of the power supply controller during DCM operation. Additionally, changing the frequency to improve efficiency does not require a lot of control logic thereby reducing the cost of the power supply controller. Additionally, the oscillation frequency is more easily controlled.</p>
<p id="p-0036" num="0047">While the invention is described with specific exemplary embodiments, it is evident that many alternatives and variations will be apparent to those skilled in the semiconductor arts. More specifically VFO <b>51</b>, generator <b>45</b>, and circuit <b>65</b> may have many different embodiments as long as the oscillator has a variable frequency that is changed in the DCM operation mode. For example, circuit <b>65</b> may be replaced with any type of low pass filter or integrator. It should be noted that the word “connected” is used throughout for clarity of the description, however, it is intended to have the same meaning as the word “coupled”. Accordingly, “connected” should be interpreted as including either a direct connection or an indirect connection.</p>
<?DETDESC description="Detailed Description" end="tail"?>
</description>
<us-claim-statement>The invention claimed is:</us-claim-statement>
<claims id="claims">
<claim id="CLM-00001" num="00001">
<claim-text>1. A method of forming a power supply controller comprising:
<claim-text>configuring the power supply controller to form a PWM drive signal operable to control a power switch to form a current through an inductor of a power supply system;</claim-text>
<claim-text>configuring the power supply controller to receive a current sense signal that is representative of current flow through the inductor; and</claim-text>
<claim-text>configuring the power supply controller to reduce an operating frequency of the power supply controller responsively to the power supply controller detecting a zero crossing of the current through the inductor and responsively to operating in a discontinuous conduction mode wherein the operating frequency is greater than zero.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00002" num="00002">
<claim-text>2. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref> further including configuring the power supply controller to receive a feedback signal representative of an output voltage of the power supply system and responsively negate the PWM drive signal.</claim-text>
</claim>
<claim id="CLM-00003" num="00003">
<claim-text>3. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref> wherein configuring the power supply controller to reduce the operating frequency of the power supply controller includes configuring the power supply controller to decrease a frequency of an oscillator of the power supply controller responsively to the power supply controller operating in the discontinuous conduction mode and coupling a PWM controller of the power supply controller to receive a clock signal from the oscillator and responsively assert the PWM drive signal.</claim-text>
</claim>
<claim id="CLM-00004" num="00004">
<claim-text>4. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref> further including configuring the power supply controller to increase the operating frequency a least a portion of a time that the PWM drive signal is asserted.</claim-text>
</claim>
<claim id="CLM-00005" num="00005">
<claim-text>5. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref> wherein configuring the power supply controller to reduce the operating frequency of the power supply controller includes configuring the power supply controller to generate a frequency control signal having a value that is representative of the current through the inductor, and configuring the power supply controller to increase an average value of the frequency control signal responsively to asserting the PWM drive signal.</claim-text>
</claim>
<claim id="CLM-00006" num="00006">
<claim-text>6. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref> wherein configuring the power supply controller to form the PWM drive signal includes configuring the power supply controller to remove charge stored on a capacitor to decrease an average value of a frequency control signal responsively to the current through the inductor becoming substantially zero.</claim-text>
</claim>
<claim id="CLM-00007" num="00007">
<claim-text>7. The method of <claim-ref idref="CLM-00006">claim 6</claim-ref> wherein further including configuring the power supply controller to store charge on the capacitor responsively to asserting the PWM drive signal.</claim-text>
</claim>
<claim id="CLM-00008" num="00008">
<claim-text>8. The method of <claim-ref idref="CLM-00006">claim 6</claim-ref> further including configuring the power supply controller to couple the capacitor to a supply voltage responsively to a transient.</claim-text>
</claim>
<claim id="CLM-00009" num="00009">
<claim-text>9. A power supply control method comprising:
<claim-text>forming a control signal that is representative of a substantially zero crossing of a current through an energy storage inductor of a power supply system;</claim-text>
<claim-text>using the control signal to control a frequency of a clock signal of a variable frequency oscillator wherein the frequency of the clock signal is greater than zero; and</claim-text>
<claim-text>applying the clock signal to a PWM controller of the power supply system wherein the PWM controller responsively initiates asserting a PWM drive signal of the power supply system responsively to the clock signal.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00010" num="00010">
<claim-text>10. The method of <claim-ref idref="CLM-00009">claim 9</claim-ref> further including forming a variable frequency ramp signal and negating the PWM drive signal responsively to the variable frequency ramp signal.</claim-text>
</claim>
<claim id="CLM-00011" num="00011">
<claim-text>11. The method of <claim-ref idref="CLM-00009">claim 9</claim-ref> wherein forming the control signal that is representative of the substantially zero crossing of the current through the energy storage inductor of the power supply system includes increasing a value of a frequency control signal responsively to asserting the PWM control signal and decreasing the value of the frequency control signal responsively to detecting the substantially zero crossing of the current through the energy storage inductor.</claim-text>
</claim>
<claim id="CLM-00012" num="00012">
<claim-text>12. The method of <claim-ref idref="CLM-00011">claim 11</claim-ref> wherein increasing the value of the frequency control signal responsively to asserting the PWM control signal includes storing charge on a capacitor responsively to asserting the PWM drive signal.</claim-text>
</claim>
<claim id="CLM-00013" num="00013">
<claim-text>13. The method of <claim-ref idref="CLM-00011">claim 11</claim-ref> wherein decreasing the value of the frequency control signal responsively to detecting the substantially zero crossing of the current through the energy storage inductor includes removing charge from a capacitor responsively to detecting a substantially zero value.</claim-text>
</claim>
<claim id="CLM-00014" num="00014">
<claim-text>14. A power supply controller comprising:
<claim-text>a PWM controller coupled to receive a clock signal and responsively generate a PWM drive signal operable to enable a power switch to generate a current through an inductor; and</claim-text>
<claim-text>a variable frequency oscillator of the power supply controller configured to generate the clock signal and change an operating frequency of the clock signal responsively to the current through the inductor becoming substantially zero.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00015" num="00015">
<claim-text>15. The power supply controller of <claim-ref idref="CLM-00014">claim 14</claim-ref> wherein the variable frequency oscillator of the power supply controller configured to generate the clock signal and change the operating frequency of the clock signal includes the variable frequency oscillator coupled to change the operating frequency responsively to asserting the PWM drive signal.</claim-text>
</claim>
<claim id="CLM-00016" num="00016">
<claim-text>16. The power supply controller of <claim-ref idref="CLM-00015">claim 15</claim-ref> wherein the variable frequency oscillator coupled to change the operating frequency responsively to asserting the PWM drive signal includes the variable frequency oscillator coupled to store charge on a capacitor responsively to asserting the PWM drive signal.</claim-text>
</claim>
<claim id="CLM-00017" num="00017">
<claim-text>17. The power supply controller of <claim-ref idref="CLM-00016">claim 16</claim-ref> further including the variable frequency oscillator coupled to remove charge from the capacitor after negating the PWM drive signal.</claim-text>
</claim>
<claim id="CLM-00018" num="00018">
<claim-text>18. The power supply controller of <claim-ref idref="CLM-00014">claim 14</claim-ref> wherein the variable frequency oscillator of the power supply controller configured to generate the clock signal and change the operating frequency of the clock signal includes a zero current detector configured to generate a zero crossing signal representative of the current through the inductor becoming substantially zero wherein the variable frequency oscillator is operably coupled to receive the zero crossing signal and responsively change the operating frequency of the variable frequency oscillator.</claim-text>
</claim>
<claim id="CLM-00019" num="00019">
<claim-text>19. The power supply controller of <claim-ref idref="CLM-00018">claim 18</claim-ref> wherein the variable frequency oscillator is operably coupled to receive the zero crossing signal and responsively change the operating frequency of the variable frequency oscillator includes the variable frequency oscillator operably coupled to decrease the operating frequency responsively to the zero crossing signal.</claim-text>
</claim>
</claims>
</us-patent-grant>
