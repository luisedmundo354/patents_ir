<us-patent-grant lang="EN" dtd-version="v4.2 2006-08-23" file="US07299380-20071120.XML" status="PRODUCTION" id="us-patent-grant" country="US" date-produced="20071106" date-publ="20071120">
<us-bibliographic-data-grant>
<publication-reference>
<document-id>
<country>US</country>
<doc-number>07299380</doc-number>
<kind>B2</kind>
<date>20071120</date>
</document-id>
</publication-reference>
<application-reference appl-type="utility">
<document-id>
<country>US</country>
<doc-number>10766200</doc-number>
<date>20040127</date>
</document-id>
</application-reference>
<us-application-series-code>10</us-application-series-code>
<us-term-of-grant>
<us-term-extension>556</us-term-extension>
</us-term-of-grant>
<classifications-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>G</section>
<class>06</class>
<subclass>F</subclass>
<main-group>11</main-group>
<subgroup>00</subgroup>
<symbol-position>F</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20071120</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
</classifications-ipcr>
<classification-national>
<country>US</country>
<main-classification>714 25</main-classification>
<further-classification>714745</further-classification>
</classification-national>
<invention-title id="d0e53">Testing a receiver connected to a reference voltage signal</invention-title>
<references-cited>
<citation>
<patcit num="00001">
<document-id>
<country>US</country>
<doc-number>5216678</doc-number>
<kind>A</kind>
<name>Nawaki</name>
<date>19930600</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>714820</main-classification></classification-national>
</citation>
<citation>
<patcit num="00002">
<document-id>
<country>US</country>
<doc-number>5870042</doc-number>
<kind>A</kind>
<name>Noda</name>
<date>19990200</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00003">
<document-id>
<country>US</country>
<doc-number>6430717</doc-number>
<kind>B1</kind>
<name>Noji</name>
<date>20020800</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>714718</main-classification></classification-national>
</citation>
<citation>
<patcit num="00004">
<document-id>
<country>US</country>
<doc-number>6653893</doc-number>
<kind>B2</kind>
<name>Casper et al.</name>
<date>20031100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>330  9</main-classification></classification-national>
</citation>
<citation>
<patcit num="00005">
<document-id>
<country>US</country>
<doc-number>2003/0101020</doc-number>
<kind>A1</kind>
<name>Matsushige</name>
<date>20030500</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>702185</main-classification></classification-national>
</citation>
<citation>
<patcit num="00006">
<document-id>
<country>US</country>
<doc-number>2004/0181730</doc-number>
<kind>A1</kind>
<name>Monfared et al.</name>
<date>20040900</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>714745</main-classification></classification-national>
</citation>
<citation>
<patcit num="00007">
<document-id>
<country>US</country>
<doc-number>2004/0267482</doc-number>
<kind>A1</kind>
<name>Robertson et al.</name>
<date>20041200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>702118</main-classification></classification-national>
</citation>
<citation>
<patcit num="00008">
<document-id>
<country>US</country>
<doc-number>2004/0267483</doc-number>
<kind>A1</kind>
<name>Percer et al.</name>
<date>20041200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>702118</main-classification></classification-national>
</citation>
<citation>
<nplcit num="00009">
<othercit>http://en.wikipedia.org/wiki/Potentiometer.</othercit>
</nplcit>
<category>cited by examiner</category>
</citation>
<citation>
<nplcit num="00010">
<othercit>http://en.wikipedia.org/wiki/Voltage<sub>—</sub>divider.</othercit>
</nplcit>
<category>cited by examiner</category>
</citation>
<citation>
<nplcit num="00011">
<othercit>Biodata Ltd 2000, “Technical Notes: Differential and Single-Ended Inputs,” pp. 1-2, printed from w ebsite http://www.microlink.co.uk (Jul. 2000).</othercit>
</nplcit>
<category>cited by other</category>
</citation>
<citation>
<nplcit num="00012">
<othercit>Cadence Design Systems, Inc., “Inside Differential Signals,” 4 pages (2001).</othercit>
</nplcit>
<category>cited by other</category>
</citation>
</references-cited>
<number-of-claims>24</number-of-claims>
<us-exemplary-claim>1</us-exemplary-claim>
<us-field-of-classification-search>
<classification-national>
<country>US</country>
<main-classification>714 25</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>714745</main-classification>
</classification-national>
</us-field-of-classification-search>
<figures>
<number-of-drawing-sheets>3</number-of-drawing-sheets>
<number-of-figures>3</number-of-figures>
</figures>
<us-related-documents>
<related-publication>
<document-id>
<country>US</country>
<doc-number>20050177771</doc-number>
<kind>A1</kind>
<date>20050811</date>
</document-id>
</related-publication>
</us-related-documents>
<parties>
<applicants>
<applicant sequence="001" app-type="applicant-inventor" designation="us-only">
<addressbook>
<last-name>Miller</last-name>
<first-name>Joseph P.</first-name>
<address>
<city>Cypress</city>
<state>TX</state>
<country>US</country>
</address>
</addressbook>
<nationality>
<country>omitted</country>
</nationality>
<residence>
<country>US</country>
</residence>
</applicant>
</applicants>
</parties>
<assignees>
<assignee>
<addressbook>
<orgname>Hewlett-Packard Development Company, L.P.</orgname>
<role>02</role>
<address>
<city>Houston</city>
<state>TX</state>
<country>US</country>
</address>
</addressbook>
</assignee>
</assignees>
<examiners>
<primary-examiner>
<last-name>Wilson</last-name>
<first-name>Yolanda L</first-name>
<department>2113</department>
</primary-examiner>
</examiners>
</us-bibliographic-data-grant>
<abstract id="abstract">
<p id="p-0001" num="0000">A method and apparatus of testing a computer having a controller includes adjusting a reference voltage signal from a first level to a second level in response to an output from the controller. The first level is a level of the reference voltage signal during normal operation of the computer. Operation of a receiver in the computer is tested with the reference voltage signal set at the second level. An input of the receiver is connected to the reference voltage signal. Next, the reference voltage signal is adjusted back from the second level to the first level to enable normal operation of the computer.</p>
</abstract>
<drawings id="DRAWINGS">
<figure id="Fig-EMI-D00000" num="00000">
<img id="EMI-D00000" he="167.47mm" wi="64.09mm" file="US07299380-20071120-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00001" num="00001">
<img id="EMI-D00001" he="216.66mm" wi="156.80mm" orientation="landscape" file="US07299380-20071120-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00002" num="00002">
<img id="EMI-D00002" he="224.11mm" wi="160.53mm" file="US07299380-20071120-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00003" num="00003">
<img id="EMI-D00003" he="182.96mm" wi="65.96mm" file="US07299380-20071120-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
</drawings>
<description id="description">
<?BRFSUM description="Brief Summary" end="lead"?>
<heading id="h-0001" level="1">BACKGROUND</heading>
<p id="p-0002" num="0001">A typical computer system arrangement includes a circuit board on which are mounted various components of the system, such as the central processing unit (CPU), main memory, chipset controllers, and certain peripheral devices. The components are laid out on various parts of the circuit board, with interconnecting electrical wires (that make up buses and other links) enabling communications among the components.</p>
<p id="p-0003" num="0002">Two types of signals can be routed over the interconnecting electrical wires: single-ended signals and differential signals. A differential signal is the difference between two signals routed over two different wires that are connected to a differential receiver. On the other hand, a single-ended signal is routed over one wire.</p>
<p id="p-0004" num="0003">In many computer systems, some single-ended signals are connected to differential receivers. In such an arrangement, one input of each differential receiver is connected to a single-ended signal, while the other input of the differential receiver is connected to a reference voltage signal.</p>
<p id="p-0005" num="0004">Single-ended signal communications are usually more sensitive to noise within the computer system than differential signal communications. With differential signal communications, noise usually affects the two wires that carry the signals making up the differential signal equally. As a result, the noise effect on the two wires is cancelled out. However, because only one electrical wire is used to carry a single-ended signal, the noise cancellation effect is not available for the single-ended signal connected to one input of a differential amplifier.</p>
<p id="p-0006" num="0005">A differential receiver that receives a single-ended signal is able to function properly (accurately detect the state of the single-ended signal) over a range of voltage levels of the reference voltage signal. The range of voltage levels of the reference voltage signal over which receivers connected to single-ended signals continue to work properly defines the margin of the reference voltage signal. It is desired that the margin be as large as possible to reduce likelihood of errors caused by noise or other factors during computer operation. The wider the margin of the reference voltage signal, the better the quality of a single-ended signal communications link.</p>
<p id="p-0007" num="0006">Conventionally, during the design process of a given computer model, a prototype of the computer model (including a prototype circuit board) is built. Typically, a potentiometer is provided on the prototype circuit board to adjust a voltage level of a reference voltage signal for differential receivers connected to single-ended signals. The potentiometer is typically connected to a circuit that generates the reference voltage signal, with the potentiometer used to adjust the reference voltage up and down until operation of a single-ended signal communications link fails.</p>
<p id="p-0008" num="0007">Although the testing of single-ended signal communications links in a prototype computer system provides some indication of the performance of single-ended signal receivers, the behavior of prototype computer systems may differ from actual production computer systems (computer systems manufactured for mass sale). One of the reasons for the different behavior is the possibility of different arrangements of components, such as CPUs, memory, and peripheral devices, in the computer systems. One computer model may have several different configurations with different arrangements and types of components.</p>
<p id="p-0009" num="0008">For example, some peripheral devices are optional devices that may not be present in all configurations of the computer model. Also, CPU speeds and memory sizes and speeds may vary in different configurations. In the different configurations of the computer model, different noise levels may be present. The different noise levels present in the different configurations may affect the reference voltage margin in different ways.</p>
<p id="p-0010" num="0009">Other factors may also cause the reference voltage margin to vary. Such other factors include the drive strengths of signal buffers, data or clock jitter, receiver sensitivity, and transmission line loss. Thus, the determination of the reference voltage margin in the prototype computer system may not provide an accurate indication of the reference voltage margins present in production computer systems.</p>
<heading id="h-0002" level="1">SUMMARY</heading>
<p id="p-0011" num="0010">In general, according to one embodiment, a method of testing a computer includes adjusting a reference voltage signal from a first level to a second level in response to an output from a controller in the computer, the first level being a level of the reference voltage signal during normal operation of the computer. Operation of a receiver in the computer is tested with the reference voltage signal set at the second level. An input of the receiver is connected to the reference voltage signal.</p>
<p id="p-0012" num="0011">Other or alternative features will become apparent from the following description, from the drawings, and from the claims.</p>
<?BRFSUM description="Brief Summary" end="tail"?>
<?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?>
<description-of-drawings>
<heading id="h-0003" level="1">BRIEF DESCRIPTION OF THE DRAWINGS</heading>
<p id="p-0013" num="0012"><figref idref="DRAWINGS">FIG. 1</figref> is a block diagram of an example arrangement of a computer system that incorporates an embodiment of the invention.</p>
<p id="p-0014" num="0013"><figref idref="DRAWINGS">FIG. 2</figref> is a schematic diagram of test circuitry according to an embodiment.</p>
<p id="p-0015" num="0014"><figref idref="DRAWINGS">FIG. 3</figref> is a flow diagram of a test sequence according to one embodiment.</p>
</description-of-drawings>
<?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?>
<?DETDESC description="Detailed Description" end="lead"?>
<heading id="h-0004" level="1">DETAILED DESCRIPTION</heading>
<p id="p-0016" num="0015"><figref idref="DRAWINGS">FIG. 1</figref> shows an example computer system <b>100</b> that incorporates test circuitry according to one embodiment of the invention. The computer system <b>100</b> includes a central processing unit (CPU) <b>102</b>. Various software routines, including a test utility <b>140</b>, an operating system (not shown), and other software routines, are executable on the CPU <b>102</b>. In a different arrangement, the computer system <b>100</b> is a multiprocessing system having multiple CPUs.</p>
<p id="p-0017" num="0016">In accordance with an embodiment of the invention, the test utility <b>140</b> performs a test sequence by causing a voltage level of a reference voltage signal to be adjusted from the “typical” voltage level of the reference voltage signal. The typical voltage level is the voltage level of the reference voltage signal during normal operation of the computer system <b>100</b>. The test utility <b>140</b> causes the voltage level of the reference voltage signal to be adjusted up and/or down from the typical voltage level to perform margin testing of single-ended signal receivers (receivers that receive single-ended signals). Such receivers are differential receivers each having two inputs: a first input to receive a corresponding single-ended signal, and a second input to receive a reference voltage signal.</p>
<p id="p-0018" num="0017">Once the voltage level of the reference voltage signal has been adjusted from the typical voltage level to a different voltage level, the test utility <b>140</b> performs a diagnostic test in the computer system <b>100</b>. If a failure caused by the adjusted reference voltage signal is detected, then the computer system <b>100</b> is indicated as having poor reference voltage margin, and the failure is logged.</p>
<p id="p-0019" num="0018">As further shown in <figref idref="DRAWINGS">FIG. 1</figref>, the CPU <b>102</b> is connected to a bridge <b>104</b> (referred to as a “north bridge”) over a processor bus <b>103</b>. The north bridge <b>104</b> is connected to system memory <b>106</b> and a system bus <b>110</b>. Other components are also connected to the system bus <b>110</b>, including a network interface controller (NIC) <b>108</b> and another bridge (referred to as a “south bridge”) <b>112</b>. The system bus <b>110</b> includes a number of electrical wires (or transmission lines) for routing signals between the components connected to the system bus <b>110</b>.</p>
<p id="p-0020" num="0019">The south bridge <b>112</b> is further connected to an input/output (I/O) bus <b>114</b>, which is connected to a non-volatile memory <b>116</b>. Basic input/output system (BIOS) software <b>118</b> is stored in the non-volatile memory <b>116</b>. The BIOS software <b>118</b> is executed by the CPU <b>102</b> during a system power-on sequence.</p>
<p id="p-0021" num="0020">The arrangement depicted in <figref idref="DRAWINGS">FIG. 1</figref> is provided for purposes of example only. In other embodiments, other arrangements of a computer system can be employed.</p>
<p id="p-0022" num="0021">To communicate over the system bus <b>110</b>, each of the components connected to the system bus <b>110</b> includes transmitters and receivers. A transmitter is basically an output buffer that drives a signal onto an electrical wire of the system bus <b>110</b>. A receiver receives a signal routed over the electrical wire to produce an internal signal that represents the signal routed over the wire. The system bus <b>110</b> has multiple signals, including control signals, data signals, address signals, and so forth. To drive these signals, the components on the system bus <b>110</b> include multiple transmitters and receivers.</p>
<p id="p-0023" num="0022">Components coupled to the other buses in the computer systems <b>100</b>, such as the processor bus <b>103</b> and the I/O bus <b>114</b>, similarly include transmitters and receivers for communicating signals over respective buses.</p>
<p id="p-0024" num="0023">In accordance with some embodiments of the invention, the computer system <b>100</b> includes a reference voltage test circuit <b>120</b> for generating a reference voltage signal (Vref). The reference voltage signal Vref is used as the reference voltage signal by receivers in components connected to single-ended signals, such as the signals making up the system bus <b>110</b>. The system bus <b>110</b> is an example of a multi-drop bus. In other embodiments, the reference voltage test feature described herein can be applied to signals of point-to-point connections.</p>
<p id="p-0025" num="0024">Examples of receivers that receive single-ended signals include receivers <b>124</b> and <b>125</b> in the south bridge <b>112</b> and receivers <b>126</b> and <b>127</b> in the network interface controller <b>108</b>. Transmitters are also coupled to the system bus <b>110</b> to transmit signals over the system bus <b>110</b>. Examples of transmitters include transmitters <b>122</b> and <b>123</b> in the north bridge <b>104</b>. Note that the south bridge <b>112</b> and network interface controller <b>108</b> also include transmitters to transmit signals over the system bus <b>110</b>, and the north bridge <b>104</b> also includes receivers to receive signals from the system bus <b>110</b>.</p>
<p id="p-0026" num="0025">During normal system operation, the reference voltage signal Vref is set at its typical voltage level. However, in accordance with some embodiments of the invention, the test utility <b>140</b> is configured to adjust the level of the reference voltage signal Vref to determine whether an operating margin for the reference voltage signal is acceptable. The test utility <b>140</b> causes a change in the voltage level of the reference voltage signal Vref from the typical voltage level to a different test voltage level, and performs a diagnostic test of the computer system <b>100</b> with the reference voltage signal Vref set at the test voltage level. The test voltage level in Vref is set based on the desired margin for the reference voltage signal Vref. In one example implementation, the change in the voltage level of the reference voltage signal Vref from its typical voltage level can be ±5%. Alternatively, larger or smaller percentage changes from the typical reference voltage level (e.g., ±10%, ±15%, ±3%, etc.) can also be used.</p>
<p id="p-0027" num="0026">According to some embodiments of the invention, performing the diagnostic test with the reference voltage signal Vref set at a voltage higher and/or lower than the typical reference voltage allows the computer system manufacturer to determine if there is sufficient margin for the reference voltage signal Vref. If errors are detected in the diagnostic test with Vref set at the elevated or reduced voltage level, then insufficient margin exists for the computer system <b>100</b>. This testing can be performed at the manufacturing stage or at the assembly stage to identify computer systems that are defective. A system that fails the diagnostic test is marked as defective, and can either be discarded or sent to a repair facility to determine whether the computer system <b>100</b> can be repaired.</p>
<p id="p-0028" num="0027">The voltage level of Vref as generated by the reference voltage test circuit <b>120</b> is controlled by an output of a buffer <b>128</b> in the south bridge <b>112</b>. In one example implementation, the buffer <b>128</b> is a general purpose input/output (GPIO) buffer that is part of a GPIO port of the south bridge <b>112</b>. The GPIO buffer <b>128</b> produces an output GPIO_OUT that is provided to the reference voltage test circuit <b>120</b>.</p>
<p id="p-0029" num="0028">GPIO circuitry in the south bridge <b>112</b> can be assigned to various configurable functions as desired by a system manufacturer. The GPIO buffer <b>128</b> is controlled by a GPIO circuit <b>129</b> in the south bridge <b>112</b>. The GPIO circuit <b>129</b> may include configuration registers (or command registers) that are accessible by the test utility <b>140</b> executing on the CPU <b>102</b>. To vary the voltage level of Vref, the test utility <b>140</b> sends commands to the GPIO circuit <b>129</b> to control the state of GPIO_OUT.</p>
<p id="p-0030" num="0029">The GPIO_OUT can be driven to a high state or a low state in response to input from the GPIO circuit <b>129</b>. A low state of GPIO_OUT causes the reference voltage test circuit <b>120</b> to drive Vref to one voltage level lower than the typical Vref level, while a high state of GPIO_OUT causes the reference voltage test circuit <b>120</b> to drive Vref to another voltage level higher than the typical Vref level. In addition, if GPIO_OUT is tristated, Vref is set at its typical voltage level.</p>
<p id="p-0031" num="0030"><figref idref="DRAWINGS">FIG. 2</figref> is a schematic diagram of the reference voltage test circuit <b>120</b>, transmitters <b>122</b> and <b>123</b>, and receivers <b>124</b>, <b>125</b>, <b>126</b>, and <b>127</b>. The reference voltage test circuit <b>120</b> includes a resistor divider pair that includes a resistor <b>200</b> and a resistor <b>202</b>. The reference voltage signal Vref is produced by a node <b>201</b> between the resistors <b>200</b> and <b>202</b>. The level of the reference voltage signal Vref is based on the ratio of the resistance values of the resistors <b>200</b> and <b>202</b>. The resistor <b>200</b> is connected between a positive (or more positive) voltage (V+) and node <b>201</b>, while the resistor <b>202</b> is connected between a ground (or more negative) voltage and node <b>201</b>.</p>
<p id="p-0032" num="0031">Another resistor <b>204</b> is also provided in the reference voltage test circuit <b>120</b>. The resistor <b>204</b> is connected between the GPIO_OUT output of the buffer <b>128</b> and the node <b>201</b> between the resistor pair (<b>200</b>, <b>202</b>). In response to commands from the test utility <b>140</b>, the GPIO circuit <b>129</b> (<figref idref="DRAWINGS">FIG. 1</figref>) controls the value of the data input (TESTIN) and the enable input (ENB) to the GPIO buffer <b>128</b>. If the enable input (ENB) is inactive, then the output of the GPIO buffer is tristated. If the enable input ENB is active, then the GPIO buffer <b>128</b> drives its output to the level indicated by TESTIN.</p>
<p id="p-0033" num="0032">If the GPIO buffer <b>128</b> is inactive (its output is tristated), then the reference voltage signal Vref is at its typical voltage level (as set by the resistors <b>200</b> and <b>202</b>). However, if the GPIO buffer <b>128</b> is active, then the voltage level of Vref is adjusted based on the output voltage of the GPIO buffer <b>128</b>. If the output of the GPIO buffer <b>128</b> is at a high level, then Vref is adjusted upwardly based on the ratio of the resistance values of the resistors <b>200</b>, <b>202</b>, and <b>204</b>. However, if the GPIO buffer <b>128</b> drives its output low, then Vref is driven downwardly to a reduced voltage (less than the typical reference voltage level). Additional GPIO buffers <b>128</b> (and associated resistors) may be coupled to the Vref node <b>201</b> to further provide other possible voltage levels of Vref.</p>
<p id="p-0034" num="0033">In other embodiments, the GPIO buffer and associated GPIO circuitry of other components (other than the south bridge <b>112</b>) can be used to adjust the level of Vref. Alternatively, instead of using a GPIO buffer, other types of buffers can be employed to adjust the level of Vref.</p>
<p id="p-0035" num="0034">Additionally, in other embodiments, instead of the arrangement of the reference voltage test circuit <b>120</b> depicted in <figref idref="DRAWINGS">FIG. 2</figref>, an electronically adjustable potentiometer can be used instead to vary the voltage level of Vref in response to commands from the test utility <b>140</b>. In yet another embodiment, an adjustable digital-to-analog (D/A) converter can be used to set different voltage levels of Vref in response to commands from the test utility <b>140</b> for purposes of diagnostic testing.</p>
<p id="p-0036" num="0035">The reference voltage test circuit <b>120</b> depicted in <figref idref="DRAWINGS">FIG. 2</figref> also includes a capacitor <b>206</b> that is designed to remove high frequency noise from the reference voltage signal Vref. The reference voltage signal Vref is connected to a minus (−) input of each of receivers <b>124</b>, <b>125</b>, <b>126</b>, and <b>127</b>. In other arrangements, more than one reference voltage test circuit can be provided to provide multiple reference voltage signals.</p>
<p id="p-0037" num="0036">The plus (+) input of receivers <b>124</b> and <b>126</b> are connected to an output signal (OUT<b>1</b>), which is outputted by the transmitter <b>122</b> based on the value of input signal IN<b>1</b> (which is generated within the north bridge <b>104</b> depicted in <figref idref="DRAWINGS">FIG. 1</figref>). The + inputs of receivers <b>125</b> and <b>127</b> are connected to signal OUT<b>2</b>, which is generated by the transmitter <b>123</b> based on the state of input signal IN<b>2</b>. The receivers <b>124</b>, <b>125</b>, <b>126</b>, and <b>127</b> generate respective signals <b>11</b>, <b>12</b>, <b>13</b>, and <b>14</b>, respectively, in the south bridge <b>112</b> and the network interface controller <b>108</b>.</p>
<p id="p-0038" num="0037">Each receiver <b>124</b>, <b>125</b>, <b>126</b>, or <b>127</b> is a differential receiver that compares the input single-ended signal at its + input with the reference voltage signal at the − input to produce the output signal I<b>1</b>, I<b>2</b>, I<b>3</b>, or I<b>4</b>. If Vref is too high or too low, then the receiver <b>124</b>, <b>125</b>, <b>126</b>, or <b>127</b> may not accurately detect the state of the input single-ended signal at its + input.</p>
<p id="p-0039" num="0038">Various factors in a computer system may cause the reference voltage signal Vref to shift upwardly or downwardly. Such factors include noise, changes in temperature, aging of a power supply of the computer system, transmitter drive strengths, data or clock jitter, sensitivity of receivers, loss over a transmission line, and other factors. Once the reference voltage signal Vref shifts due to one or more of such factors, then the upward or downward adjustment of Vref by the reference voltage test circuit may cause failure of one or more single-ended signal receivers. Such failure is detected during the diagnostic test performed by the test utility <b>140</b>.</p>
<p id="p-0040" num="0039">Note that Vref may shift by differing amounts in different systems due to one or more of the factors identified above. Due to such different behaviors of Vref in different computer systems, a reference voltage diagnostic test is performed in each computer system by a respective test utility <b>140</b> to determine whether poor Vref margin exists for such a computer system.</p>
<p id="p-0041" num="0040"><figref idref="DRAWINGS">FIG. 3</figref> shows a test sequence performed by the test utility <b>140</b>, in accordance with one embodiment. The computer system <b>100</b> first launches (at <b>302</b>) the test utility <b>140</b>. The test utility <b>140</b> may present a graphical user interface for interaction with a user. Alternatively, the test utility <b>140</b> may communicate over a network with a remote operator for purposes of performing the test. In yet another embodiment, the test utility <b>140</b> may be part of other diagnostic software launched and run to test the computer system <b>100</b> during the manufacturing or assembly process.</p>
<p id="p-0042" num="0041">The test utility <b>140</b> adjusts the voltage level of Vref up and/or down (at <b>304</b>) by a predetermined amount. For example, Vref may be adjusted upwardly by 5%, 10%, and so forth. Similarly, Vref may be adjusted downwardly by 5%, 10%, and so forth. The adjustment by specified percentage is accomplished by selecting corresponding values of the resistors in the reference voltage test circuit <b>120</b>. The percentage adjustments are also based on voltage rails and margin requirements of the system.</p>
<p id="p-0043" num="0042">After Vref has been adjusted up or down, the test utility <b>140</b> performs a diagnostic test (at <b>306</b>). The diagnostic test involves operations in which signaling is communicated between various components, including the north bridge <b>104</b>, network interface controller <b>108</b>, and south bridge <b>112</b>. For example, the diagnostic test can cause traffic to be generated on the system bus <b>110</b> such that the transmitters <b>122</b> and <b>123</b> output signals over the system bus <b>110</b> for receipt by the receivers <b>124</b>, <b>125</b>, <b>126</b>, and <b>127</b>.</p>
<p id="p-0044" num="0043">Errors detected by the test utility <b>140</b> during the diagnostic testing are logged by the test utility <b>140</b>. The error information can be stored locally in the computer system <b>100</b> for later retrieval by an operator, or the test utility <b>140</b> can communicate the error information to a remote site for analysis by an operator. Also, the test utility <b>140</b> may set (at <b>310</b>) some type of an indicator in a log file or other like data structure to indicate that the computer system <b>100</b> has failed the reference voltage diagnostic test. If further testing with other Vref values is desired, the acts of <b>304</b>-<b>310</b> can be repeated. After testing is completed, Vref is set back to its typical voltage level (at <b>312</b>).</p>
<p id="p-0045" num="0044">Instructions of the various software routines or modules discussed herein (such as the test utility <b>140</b> and other software components) are executed on corresponding control modules. The control modules include microprocessors, microcontrollers, processor modules or subsystems (including one or more microprocessors or microcontrollers), or other control or computing devices. As used here, a “controller” refers to hardware, software, or a combination thereof. A “controller” can refer to a single component or to plural components (whether software or hardware).</p>
<p id="p-0046" num="0045">Data and instructions (of the various software routines or modules) are stored on one or more machine-readable storage media. The storage media may include different forms of memory including semiconductor memory devices such as dynamic or static random access memories (DRAMs or SRAMs), erasable and programmable read-only memories (EPROMs), electrically erasable and programmable read-only memories (EEPROMs) and flash memories; magnetic disks such as fixed, floppy and removable disks; other magnetic media including tape; and optical media such as compact disks (CDs) or digital video disks (DVDs).</p>
<p id="p-0047" num="0046">The instructions of the software routines or modules are loaded or transported to a system in one of many different ways. For example, code segments including instructions stored on floppy disks, CD or DVD media, a hard disk, or transported through a network interface card, modem, or other interface device are loaded into the system and executed as corresponding software modules or layers. In the loading or transport process, data signals that are embodied in carrier waves (transmitted over telephone lines, network lines, wireless links, cables, and the like) communicate the code segments, including instructions, to the system. Such carrier waves are in the form of electrical, optical, acoustical, electromagnetic, or other types of signals.</p>
<p id="p-0048" num="0047">In the foregoing description, numerous details are set forth to provide an understanding of the present invention. However, it will be understood by those skilled in the art that the present invention may be practiced without these details. While the invention has been disclosed with respect to a limited number of embodiments, those skilled in the art will appreciate numerous modifications and variations therefrom. It is intended that the appended claims cover such modifications and variations as fall within the true spirit and scope of the invention.</p>
<?DETDESC description="Detailed Description" end="tail"?>
</description>
<us-claim-statement>What is claimed is:</us-claim-statement>
<claims id="claims">
<claim id="CLM-00001" num="00001">
<claim-text>1. A method of testing a computer, the computer having a controller, the method comprising:
<claim-text>during a test sequence, adjusting a reference voltage signal from a first level to a second level in response to an output from the controller in the computer, the first level being a level of the reference voltage signal during normal operation of the computer;</claim-text>
<claim-text>during the test sequence, testing operation of a receiver in the computer with the reference voltage signal set at the second level, an input of the receiver being connected to the reference voltage signal, and another input of the receiver being connected to a single-ended signal that is processed by the receiver both during the normal operation and the test sequence; and</claim-text>
<claim-text>adjusting the reference voltage signal back from the second level to the first level to enable normal operation of the computer.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00002" num="00002">
<claim-text>2. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein testing the operation of the receiver comprises testing operation of a differential receiver.</claim-text>
</claim>
<claim id="CLM-00003" num="00003">
<claim-text>3. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, further comprising testing operation of a second receiver, the second receiver being connected to the reference voltage signal.</claim-text>
</claim>
<claim id="CLM-00004" num="00004">
<claim-text>4. The method of <claim-ref idref="CLM-00003">claim 3</claim-ref>, wherein the computer comprises a bus having transmission lines for carrying plural signals, the method further comprising transmitting the plural signals over the transmission lines to the receivers.</claim-text>
</claim>
<claim id="CLM-00005" num="00005">
<claim-text>5. The method of <claim-ref idref="CLM-00004">claim 4</claim-ref>, wherein transmitting the plural signals is performed by transmitters in a bus device connected to the bus.</claim-text>
</claim>
<claim id="CLM-00006" num="00006">
<claim-text>6. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, further comprising controlling the output of the controller by a software routine.</claim-text>
</claim>
<claim id="CLM-00007" num="00007">
<claim-text>7. The method of <claim-ref idref="CLM-00006">claim 6</claim-ref>, wherein controlling the output of the controller comprises controlling a general purpose input/output (GPIO) port of the controller.</claim-text>
</claim>
<claim id="CLM-00008" num="00008">
<claim-text>8. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, further comprising indicating a margin of the reference voltage signal as poor in response to the testing producing an error.</claim-text>
</claim>
<claim id="CLM-00009" num="00009">
<claim-text>9. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein adjusting the reference voltage signal comprises a test circuit adjusting the reference voltage signal, the test circuit responsive to the output of the controller.</claim-text>
</claim>
<claim id="CLM-00010" num="00010">
<claim-text>10. A computer system comprising:
<claim-text>a processor;</claim-text>
<claim-text>a computer-readable storage medium to store test software, the test software executable on the processor;</claim-text>
<claim-text>a circuit to generate a reference voltage signal;</claim-text>
<claim-text>a receiver having a first input connected to the reference voltage signal and a second input connected to a single-ended signal that is processed by the receiver during normal operation of the computer system; and</claim-text>
<claim-text>the circuit responsive to the test software to adjust a voltage level of the reference voltage signal from a first voltage level to a second voltage level,</claim-text>
<claim-text>the test software to perform a diagnostic test with the reference voltage signal at the second voltage level to test operation of the receiver to perform margin testing of the receiver with respect to the single-ended signal.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00011" num="00011">
<claim-text>11. The computer system of <claim-ref idref="CLM-00010">claim 10</claim-ref>, further comprising a second receiver having an input connected to the reference voltage signal, the diagnostic test to also test operation of the second receiver.</claim-text>
</claim>
<claim id="CLM-00012" num="00012">
<claim-text>12. The computer system of <claim-ref idref="CLM-00011">claim 11</claim-ref>, wherein the receivers are differential receivers each having a second input connected to a respective single-ended signal.</claim-text>
</claim>
<claim id="CLM-00013" num="00013">
<claim-text>13. The computer system of <claim-ref idref="CLM-00012">claim 12</claim-ref>, further comprising a bus, wherein the bus comprises transmission lines to carry the single-ended signals.</claim-text>
</claim>
<claim id="CLM-00014" num="00014">
<claim-text>14. The computer system of <claim-ref idref="CLM-00010">claim 10</claim-ref>, further comprising:
<claim-text>a transmitter to generate the single-ended signal.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00015" num="00015">
<claim-text>15. The computer system of <claim-ref idref="CLM-00010">claim 10</claim-ref>, further comprising a general purpose input/output (GPIO) buffer responsive to commands from the test software to control the voltage level of the reference voltage signal produced by the circuit.</claim-text>
</claim>
<claim id="CLM-00016" num="00016">
<claim-text>16. The computer system of <claim-ref idref="CLM-00010">claim 10</claim-ref>, wherein the circuit comprises a voltage divider to produce the reference voltage signal, the circuit further comprising a resistor connected to the voltage divider to adjust the voltage level of the reference voltage signal from the first voltage level to the second voltage level.</claim-text>
</claim>
<claim id="CLM-00017" num="00017">
<claim-text>17. The computer system of <claim-ref idref="CLM-00010">claim 10</claim-ref>, wherein the circuit comprises an electronically adjustable potentiometer responsive to the test software.</claim-text>
</claim>
<claim id="CLM-00018" num="00018">
<claim-text>18. The computer system of <claim-ref idref="CLM-00010">claim 10</claim-ref>, wherein the circuit comprises a digital-to-analog converter responsive to the test software.</claim-text>
</claim>
<claim id="CLM-00019" num="00019">
<claim-text>19. A computer system comprising:
<claim-text>a processor;</claim-text>
<claim-text>a computer-readable storage medium to store software, the software executable on the processor;</claim-text>
<claim-text>means for generating a reference voltage signal; and</claim-text>
<claim-text>receiving means having a first input connected to the reference voltage signal and a second input connected to a single-ended signal that is processed during normal operation of the computer system;</claim-text>
<claim-text>wherein the generating means is responsive to the software to adjust a voltage level of the reference voltage signal from a first voltage level to a second voltage level, and</claim-text>
<claim-text>the software to perform a diagnostic test with the reference voltage signal at the second voltage level to rest operation of the receiving means to perform margin testing of the receiving means with respect to the single-ended signal.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00020" num="00020">
<claim-text>20. An apparatus for use in a computer, comprising:
<claim-text>a transmitter to transmit a single-ended signal for use during normal operation of the computer;</claim-text>
<claim-text>a circuit to generate a reference voltage signal;</claim-text>
<claim-text>a receiver having a first input connected to the single-ended signal, and a second input connected to the reference voltage signal; and</claim-text>
<claim-text>a controller to control the circuit to vary a voltage level of the reference voltage signal during a test sequence,</claim-text>
<claim-text>wherein the controller is adapted to perform a diagnostic test during the test sequence after varying the voltage level of the reference voltage signal to test performance of the receiver with respect to the single-ended signal.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00021" num="00021">
<claim-text>21. The apparatus of <claim-ref idref="CLM-00020">claim 20</claim-ref>, wherein the controller is adapted to control the circuit to vary the voltage level of the reference voltage signal from a first voltage level to a second voltage level, the first voltage level corresponding to a voltage level of the reference voltage signal for normal operation,
<claim-text>the controller adapted to perform the diagnostic test with the reference voltage signal set at the second voltage level.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00022" num="00022">
<claim-text>22. The apparatus of <claim-ref idref="CLM-00020">claim 20</claim-ref>, wherein the receiver comprises a differential receiver.</claim-text>
</claim>
<claim id="CLM-00023" num="00023">
<claim-text>23. The apparatus of <claim-ref idref="CLM-00020">claim 20</claim-ref>, wherein the controller comprises software.</claim-text>
</claim>
<claim id="CLM-00024" num="00024">
<claim-text>24. An article comprising at least one computer-readable storage medium containing instructions that when executed cause a computer to:
<claim-text>send commands during a test sequence to a circuit to cause a voltage level of a reference voltage signal to be adjusted from a first level to a second level, the first level corresponding to a voltage level of the reference voltage signal during normal operation; and</claim-text>
<claim-text>perform, during the test sequence, a diagnostic test of a receiver having a first input connected to the reference voltage signal with the reference voltage signal at the second level, and the receiver having a second input connected to a single-ended signal that is processed both during the normal operation and the test sequence.</claim-text>
</claim-text>
</claim>
</claims>
</us-patent-grant>
