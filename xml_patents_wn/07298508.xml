<us-patent-grant lang="EN" dtd-version="v4.2 2006-08-23" file="US07298508-20071120.XML" status="PRODUCTION" id="us-patent-grant" country="US" date-produced="20071106" date-publ="20071120">
<us-bibliographic-data-grant>
<publication-reference>
<document-id>
<country>US</country>
<doc-number>07298508</doc-number>
<kind>B2</kind>
<date>20071120</date>
</document-id>
</publication-reference>
<application-reference appl-type="utility">
<document-id>
<country>US</country>
<doc-number>09818868</doc-number>
<date>20010328</date>
</document-id>
</application-reference>
<us-application-series-code>09</us-application-series-code>
<priority-claims>
<priority-claim sequence="01" kind="national">
<country>JP</country>
<doc-number>2000-093029</doc-number>
<date>20000328</date>
</priority-claim>
<priority-claim sequence="02" kind="national">
<country>JP</country>
<doc-number>2000-095109</doc-number>
<date>20000330</date>
</priority-claim>
</priority-claims>
<us-term-of-grant>
<us-term-extension>1179</us-term-extension>
</us-term-of-grant>
<classifications-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>G</section>
<class>06</class>
<subclass>F</subclass>
<main-group>3</main-group>
<subgroup>12</subgroup>
<symbol-position>F</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20071120</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>G</section>
<class>06</class>
<subclass>K</subclass>
<main-group>15</main-group>
<subgroup>00</subgroup>
<symbol-position>L</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20071120</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
</classifications-ipcr>
<classification-national>
<country>US</country>
<main-classification>358  115</main-classification>
<further-classification>358  114</further-classification>
</classification-national>
<invention-title id="d0e89">Device and method for using multicast to transmit print data to networked printers</invention-title>
<references-cited>
<citation>
<patcit num="00001">
<document-id>
<country>US</country>
<doc-number>6449054</doc-number>
<kind>B1</kind>
<name>Cox et al.</name>
<date>20020900</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>358  115</main-classification></classification-national>
</citation>
<citation>
<patcit num="00002">
<document-id>
<country>US</country>
<doc-number>6584096</doc-number>
<kind>B1</kind>
<name>Allan</name>
<date>20030600</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370352</main-classification></classification-national>
</citation>
<citation>
<patcit num="00003">
<document-id>
<country>JP</country>
<doc-number>A 04-039722</doc-number>
<date>19920200</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00004">
<document-id>
<country>JP</country>
<doc-number>A 08-036474</doc-number>
<date>19960200</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00005">
<document-id>
<country>JP</country>
<doc-number>A 09-311768</doc-number>
<date>19971200</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00006">
<document-id>
<country>JP</country>
<doc-number>A 11-154062</doc-number>
<date>19990600</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
</references-cited>
<number-of-claims>35</number-of-claims>
<us-exemplary-claim>1</us-exemplary-claim>
<us-field-of-classification-search>
<classification-national>
<country>US</country>
<main-classification>358  11-  118</main-classification>
<additional-info>unstructured</additional-info>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>709223</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>709224</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>709228</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>709229</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>710  7</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>710  8</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>710 19</main-classification>
</classification-national>
</us-field-of-classification-search>
<figures>
<number-of-drawing-sheets>13</number-of-drawing-sheets>
<number-of-figures>27</number-of-figures>
</figures>
<us-related-documents>
<related-publication>
<document-id>
<country>US</country>
<doc-number>20010046065</doc-number>
<kind>A1</kind>
<date>20011129</date>
</document-id>
</related-publication>
</us-related-documents>
<parties>
<applicants>
<applicant sequence="001" app-type="applicant-inventor" designation="us-only">
<addressbook>
<last-name>Furukawa</last-name>
<first-name>Akihiro</first-name>
<address>
<city>Nagoya</city>
<country>JP</country>
</address>
</addressbook>
<nationality>
<country>JP</country>
</nationality>
<residence>
<country>JP</country>
</residence>
</applicant>
<applicant sequence="002" app-type="applicant-inventor" designation="us-only">
<addressbook>
<last-name>Fukazawa</last-name>
<first-name>Koshi</first-name>
<address>
<city>Nagoya</city>
<country>JP</country>
</address>
</addressbook>
<nationality>
<country>JP</country>
</nationality>
<residence>
<country>JP</country>
</residence>
</applicant>
<applicant sequence="003" app-type="applicant-inventor" designation="us-only">
<addressbook>
<last-name>Ohara</last-name>
<first-name>Kiyotaka</first-name>
<address>
<city>Nagoya</city>
<country>JP</country>
</address>
</addressbook>
<nationality>
<country>JP</country>
</nationality>
<residence>
<country>JP</country>
</residence>
</applicant>
<applicant sequence="004" app-type="applicant-inventor" designation="us-only">
<addressbook>
<last-name>Hibino</last-name>
<first-name>Masaaki</first-name>
<address>
<city>Yokkaichi</city>
<country>JP</country>
</address>
</addressbook>
<nationality>
<country>JP</country>
</nationality>
<residence>
<country>JP</country>
</residence>
</applicant>
<applicant sequence="005" app-type="applicant-inventor" designation="us-only">
<addressbook>
<last-name>Nogawa</last-name>
<first-name>Hideki</first-name>
<address>
<city>Nagoya</city>
<country>JP</country>
</address>
</addressbook>
<nationality>
<country>JP</country>
</nationality>
<residence>
<country>JP</country>
</residence>
</applicant>
</applicants>
<agents>
<agent sequence="01" rep-type="attorney">
<addressbook>
<orgname>Oliff &amp; Berridge, PLC</orgname>
<address>
<country>unknown</country>
</address>
</addressbook>
</agent>
</agents>
</parties>
<assignees>
<assignee>
<addressbook>
<orgname>Brother Kogyo Kabushiki Kaisha</orgname>
<role>03</role>
<address>
<city>Nagoya</city>
<country>JP</country>
</address>
</addressbook>
</assignee>
</assignees>
<examiners>
<primary-examiner>
<last-name>Tran</last-name>
<first-name>Douglas Q.</first-name>
<department>2625</department>
</primary-examiner>
</examiners>
</us-bibliographic-data-grant>
<abstract id="abstract">
<p id="p-0001" num="0000">A printer control device includes a joining unit, a transmission unit, and a control unit. The joining unit causes at least one network printer to join a predetermined multicast address. The transmission unit converts print data into packets and multicast transmits the packets to the predetermined multicast address. The control unit monitors transmission/reception status of the packets at the at least one network printer that has joined the multicast address. Based on monitoring results the control unit controls transmission of packets to, waiting for packets from, and retransmission of packets to the predetermined multicast address.</p>
</abstract>
<drawings id="DRAWINGS">
<figure id="Fig-EMI-D00000" num="00000">
<img id="EMI-D00000" he="88.73mm" wi="178.90mm" file="US07298508-20071120-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00001" num="00001">
<img id="EMI-D00001" he="243.76mm" wi="186.69mm" file="US07298508-20071120-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00002" num="00002">
<img id="EMI-D00002" he="253.66mm" wi="178.56mm" file="US07298508-20071120-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00003" num="00003">
<img id="EMI-D00003" he="246.46mm" wi="187.71mm" file="US07298508-20071120-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00004" num="00004">
<img id="EMI-D00004" he="265.85mm" wi="190.42mm" file="US07298508-20071120-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00005" num="00005">
<img id="EMI-D00005" he="258.40mm" wi="186.69mm" file="US07298508-20071120-D00005.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00006" num="00006">
<img id="EMI-D00006" he="253.66mm" wi="180.93mm" file="US07298508-20071120-D00006.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00007" num="00007">
<img id="EMI-D00007" he="246.21mm" wi="176.87mm" file="US07298508-20071120-D00007.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00008" num="00008">
<img id="EMI-D00008" he="277.45mm" wi="194.82mm" file="US07298508-20071120-D00008.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00009" num="00009">
<img id="EMI-D00009" he="270.93mm" wi="175.77mm" orientation="landscape" file="US07298508-20071120-D00009.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00010" num="00010">
<img id="EMI-D00010" he="267.21mm" wi="196.17mm" orientation="landscape" file="US07298508-20071120-D00010.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00011" num="00011">
<img id="EMI-D00011" he="197.87mm" wi="151.98mm" file="US07298508-20071120-D00011.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00012" num="00012">
<img id="EMI-D00012" he="256.37mm" wi="154.35mm" file="US07298508-20071120-D00012.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00013" num="00013">
<img id="EMI-D00013" he="270.59mm" wi="161.46mm" file="US07298508-20071120-D00013.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
</drawings>
<description id="description">
<?BRFSUM description="Brief Summary" end="lead"?>
<heading id="h-0001" level="1">BACKGROUND OF THE INVENTION</heading>
<p id="p-0002" num="0001">1. Field of the Invention</p>
<p id="p-0003" num="0002">The present invention relates to a printer control device and printer control method capable of multicast transmission in a network environment, and a network printer that uses the printer control device and the printer control method. The present invention further relates to a device and method for controlling replacement or supplementary printing when a printer becomes unable to print.</p>
<p id="p-0004" num="0003">2. Description of the Related Art</p>
<p id="p-0005" num="0004">Conventionally, the following two methods have been used by a single host computer to print a plurality of copies at printers connected to the host computer by a network.</p>
<p id="p-0006" num="0005">In a first method, the host computer indicates the required number of copies to a single one of the network printers and the sends the print data to only that network printer.</p>
<p id="p-0007" num="0006">In a second method, the host computer transmits the same print data sequentially to a plurality of the network printers and has each network printer print out one or more copies.</p>
<p id="p-0008" num="0007">However, the first method can take a long time to print all the desired copies if the single network printer has a slow printing speed.</p>
<p id="p-0009" num="0008">The second method can take a long time to complete printing all of the copies because the host computer must send out the same print data separately to each of the responsible network printers. Further, redundant sets of the same print data are transmitted across the network, thereby increasing the amount of traffic on the network and impeding other processes performed under the network environment.</p>
<p id="p-0010" num="0009">With either of these methods, there will be times when transmission interference or some other reason renders printing on a network printer impossible. There has been known a method of substitute printing for such situations, wherein a different printer on the network is used as a substitute to print out remaining pages.</p>
<heading id="h-0002" level="1">SUMMARY OF THE INVENTION</heading>
<p id="p-0011" num="0010">However, it is impossible to perform substitute printing using this conventional method when none of the other network printers is available to perform the substitute printing.</p>
<p id="p-0012" num="0011">Also, the remaining pages cannot be printed out using a substitute network printer, if the substitute network printer is not the same model or type. There are various reasons for this, such as the print settings including print font and sheet size being different.</p>
<p id="p-0013" num="0012">It is an objective of the present invention to overcome the above-described problems and provide a print control device and a printing control method capable of performing print processes simultaneously in a parallel manner using a plurality of network printers connected together in a network environment, reducing the printing time, limiting increases in the amount of traffic across the network, and reliably performing replacement or supplementary printing of documents that for some reason have become impossible to continue printing out. It is a further objective to provide a network printer that uses the print control device or the print control method.</p>
<p id="p-0014" num="0013">In order to achieve the above-described objectives, a printer control device according to the present invention includes a joining unit that causes at least one network printer to join a predetermined multicast address; a transmission unit that converts print data into packets and multicast transmits the packets to the predetermined multicast address; and a control unit that monitors transmission/reception status of the packets at the at least one network printer that has joined the multicast address and that, based on monitoring results, controls transmission of packets to, waiting for packets from, and retransmission of packets to the predetermined multicast address.</p>
<p id="p-0015" num="0014">According to another aspect of the present invention a network printer includes a network interface connected to a network; and a multicast joining unit that joins a multicast address.</p>
<p id="p-0016" num="0015">According to still another aspect of the present invention a print control method causes at least one network printer to join a multicast address; transmits a packet of print data to the multicast address; monitors transmission/reception status of packets at the at least one network printer that joined the multicast address; and controls transmission of packets, waiting for packets, and retransmission of packets with respect to the multicast address according to monitoring results.</p>
<?BRFSUM description="Brief Summary" end="tail"?>
<?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?>
<description-of-drawings>
<heading id="h-0003" level="1">BRIEF DESCRIPTION OF THE DRAWINGS</heading>
<p id="p-0017" num="0016">The above and other objects, features and advantages of the invention will become more apparent from reading the following description of the embodiment taken in connection with the accompanying drawings in which;</p>
<p id="p-0018" num="0017"><figref idref="DRAWINGS">FIG. 1</figref> is a block diagram showing a print system according to an embodiment of the present invention;</p>
<p id="p-0019" num="0018"><figref idref="DRAWINGS">FIG. 2</figref> is a schematic view showing communication between a host computer and network printers of the system of <figref idref="DRAWINGS">FIG. 1</figref> when the host computer broadcasts search conditions;</p>
<p id="p-0020" num="0019"><figref idref="DRAWINGS">FIG. 3</figref> is a schematic view showing a select printers screen displayed on the display of the host computer;</p>
<p id="p-0021" num="0020"><figref idref="DRAWINGS">FIG. 4</figref> is a schematic view showing the select printers screen of <figref idref="DRAWINGS">FIG. 3</figref>, with printers that fill the search conditions displayed in a distinguishable manner;</p>
<p id="p-0022" num="0021"><figref idref="DRAWINGS">FIG. 5</figref> is a schematic view showing the host computer commanding the printers that meet the search conditions to join a multicast group and the printers responding affirmatively;</p>
<p id="p-0023" num="0022"><figref idref="DRAWINGS">FIG. 6</figref> (<i>a</i>) is a schematic view showing the host computer transmitting a packet with sequence number <b>1</b> to the multicast address associated with the multicast group, whereupon the printers that are members of the group receive the packet and respond accordingly;</p>
<p id="p-0024" num="0023"><figref idref="DRAWINGS">FIG. 6</figref> (<i>b</i>) is a schematic view showing one of the printers requesting the host computer to resend a packet with sequence number <b>2</b>;</p>
<p id="p-0025" num="0024"><figref idref="DRAWINGS">FIG. 6</figref> (<i>c</i>) is a schematic view showing the printer of <figref idref="DRAWINGS">FIG. 6</figref> (<i>b</i>) properly receiving the resent packet with sequence number <b>2</b>;</p>
<p id="p-0026" num="0025"><figref idref="DRAWINGS">FIG. 6</figref> (<i>d</i>) is a schematic view showing one of the printers not responding in any way after the host computer transmits a packet with sequence number <b>3</b>;</p>
<p id="p-0027" num="0026"><figref idref="DRAWINGS">FIG. 6</figref> (<i>e</i>) is a schematic view showing the host computer resending the packet with sequence number <b>3</b> after a time period elapses and receiving acknowledgement of receipt from the previously non-responding printer;</p>
<p id="p-0028" num="0027"><figref idref="DRAWINGS">FIG. 7</figref> (<i>a</i>) is a schematic view showing one of the printers not responding in any way after the host computer transmits a packet with sequence number <b>4</b>;</p>
<p id="p-0029" num="0028"><figref idref="DRAWINGS">FIG. 7</figref> (<i>b</i>) is a schematic view showing the host computer retransmitting the packet with sequence number <b>4</b> after a time period elapses;</p>
<p id="p-0030" num="0029"><figref idref="DRAWINGS">FIG. 7</figref> (<i>c</i>) is a schematic view showing the host computer, upon still receiving no response from the one printer, sending the packet with sequence number <b>5</b> to the multicast address and receiving acknowledgement of receipt from the other printers;</p>
<p id="p-0031" num="0030"><figref idref="DRAWINGS">FIG. 7</figref> (<i>d</i>) is a schematic view showing the host computer unicasting a leave group command to the printers when printing operations are completed;</p>
<p id="p-0032" num="0031"><figref idref="DRAWINGS">FIG. 8</figref> is a flowchart representing processes performed in the host computer;</p>
<p id="p-0033" num="0032"><figref idref="DRAWINGS">FIG. 9</figref> is a flowchart representing further processes performed in the host computer;</p>
<p id="p-0034" num="0033"><figref idref="DRAWINGS">FIG. 10</figref> is a flowchart representing still further processes performed in the host computer;</p>
<p id="p-0035" num="0034"><figref idref="DRAWINGS">FIG. 11</figref> is a flowchart representing processes performed in each of the network printers;</p>
<p id="p-0036" num="0035"><figref idref="DRAWINGS">FIG. 12</figref> is a flowchart representing further processes performed in each of the network printers;</p>
<p id="p-0037" num="0036"><figref idref="DRAWINGS">FIG. 13</figref> is a schematic view showing a job print information management block screen displayed on the display of the host computer;</p>
<p id="p-0038" num="0037"><figref idref="DRAWINGS">FIG. 14</figref> (<i>a</i>) is a schematic view showing the host computer transmitting a print job to a multicast address, and consequently to a plurality of the network printers, and receiving acknowledgement of receipt from only one of the network printers;</p>
<p id="p-0039" num="0038"><figref idref="DRAWINGS">FIG. 14</figref> (<i>b</i>) is a schematic view showing the host computer retransmitting the print job to the multicast address after a first transmission time and receiving acknowledgement of receipt from all but one of the remaining network printers;</p>
<p id="p-0040" num="0039"><figref idref="DRAWINGS">FIG. 14</figref> (<i>c</i>) is a schematic view showing the host computer retransmitting the print job to the multicast address after a second transmission time and the final printer acknowledging receipt;</p>
<p id="p-0041" num="0040"><figref idref="DRAWINGS">FIG. 15</figref> (<i>a</i>) is a schematic view showing the host computer unicasting a print job to the printers and receiving acknowledgement of receipt from only one printer;</p>
<p id="p-0042" num="0041"><figref idref="DRAWINGS">FIG. 15</figref> (<i>b</i>) is a schematic view showing the host computer again unicasting the print job after a first transmission time to the printers that did not acknowledge receipt of the first transmission and all but one printer responding with acknowledgement of receipt; and</p>
<p id="p-0043" num="0042"><figref idref="DRAWINGS">FIG. 15</figref> (<i>c</i>) is a schematic view showing the host computer again unicasting the print job after a second transmission time and the final printer acknowledging receipt.</p>
</description-of-drawings>
<?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?>
<?DETDESC description="Detailed Description" end="lead"?>
<heading id="h-0004" level="1">DETAILED DESCRIPTION OF THE EMBODIMENT</heading>
<p id="p-0044" num="0043">A print system according to an embodiment of the present invention will be described while referring to the attached drawings.</p>
<p id="p-0045" num="0044">As shown in <figref idref="DRAWINGS">FIG. 1</figref>, the printing system according to the present embodiment includes a host computer <b>1</b>, a multicast router <b>3</b>, and printers A to H, all connected to a network <b>2</b>, such as a bus. The host computer <b>1</b> and the network printers A to E are connected to each other through the network <b>2</b>.</p>
<p id="p-0046" num="0045">According to the present embodiment, Transmission Control Protocol/Internet Protocol (TCP/IP) is used as the transmission protocol. However other protocols that enable multicast can be used instead.</p>
<p id="p-0047" num="0046">The particular TCP/IP used in the present embodiment is Internet Protocol (IP) Multicast using User Datagram Protocol (UDP). Unicast and broadcast transmission are also possible.</p>
<p id="p-0048" num="0047">The host computer <b>1</b> is installed with application programs that enable multicast transmission of print data to the network printers and commanding each network printer to print based on the print data.</p>
<p id="p-0049" num="0048">The host computer <b>1</b> functions to transmit print data over a local area network (LAN) with a broadcast address or a particular multicast address as the target address. The print data could be generated by the host computer <b>1</b> itself or received by the host computer <b>1</b> from another device.</p>
<p id="p-0050" num="0049">The host computer <b>1</b> also functions to detect which network printers on the network are capable of printing the subject print data without any problems. That is, before the host computer <b>1</b> transmits the same print data simultaneously to a plurality of network printers using multicast transmission, the host computer <b>1</b> must determine which network printers are capable of reliably printing out the print data. For example, network printers that only understand PostScript (trademark) cannot reliably print out print data in Printer Control Language (PCL), so the same print data cannot be transmitted to network printers that only understand PostScript (trademark) and also to network computers that only understand PCL. Also, even if all of the network printers have the same capabilities, the host computer <b>1</b> needs to investigate the present situation of the printers, because some may not be immediately usable, for example because they are presently offline.</p>
<p id="p-0051" num="0050">The host computer <b>1</b> searches for capable network printers based on the following search conditions:</p>
<p id="p-0052" num="0051">(a) whether a network printer supports the printing function of the printing system;</p>
<p id="p-0053" num="0052">(b) whether the printer can print on the appropriate sheet size, for example on LETTER size sheets;</p>
<p id="p-0054" num="0053">(c) whether the printer can print out the required number of pages, for example 50 sheets;</p>
<p id="p-0055" num="0054">(d) whether the printer can print in the required orientation portrait, that is, the vertical and horizontal directions;</p>
<p id="p-0056" num="0055">(e) whether the printer can print in the required resolution, for example 600 dpi;</p>
<p id="p-0057" num="0056">(f) whether the printer includes a Page Description Language (PDL) and, if so, what version, for example PCL5;</p>
<p id="p-0058" num="0057">(g) whether the printer can print in monochrome only or also in color, for example, for color printing; and</p>
<p id="p-0059" num="0058">(h) what the present status of the printer is, for example, is the printer able to print immediately.</p>
<p id="p-0060" num="0059">The host computer <b>1</b> can determine which network printers match the search conditions by asking the network printers directly by broadcasting over the network using Simple Network Management Protocol (SNMP) or an independent protocol. Alternatively, the capabilities of each network printer can be registered in a directory service, which the host computer <b>1</b> uses to search for network printers that meet the conditions. Example directory services include CCITT X.500 Series of Recommendations, Service Location Protocol (SLP), and Lightweight Directory Access Protocol (LDAP). The directory service can be generated either spontaneously by the network printers or by input from the manager of the network. The host computer <b>1</b> obtains the IP address of the network printers, the network printer names, information on the set up location of the network printer, and the like as the result of the search.</p>
<p id="p-0061" num="0060">Also, the host computer <b>1</b> functions to select network printers to be actually used for printing from the network printers that are determined to meet the search conditions. That is, the print data is not sent to all network printers on the network that are capable of printing the print data. As shown in <figref idref="DRAWINGS">FIG. 3</figref> (<i>b</i>), the host computer <b>1</b> displays a network printer list showing the physical location, IP address, and network printer name for each network printer determined to meet the search conditions. The user can select network printers from the list to use for the actual printing. The user can make his or her selection based on how many copies are to be printed, which network printers are physically closer to the user, and which network printers have a higher printing speed.</p>
<p id="p-0062" num="0061">The host computer <b>1</b> functions to set the number of copies to be printed independently for each selected network printer. For example, when the selected network printers have printing speeds of either 10 or 20 pages per minute (ppm), this means that the network printers with the print speed of 20 ppm can print twice as fast as the network printers with the print speed of 10 ppm. If all of the network printers are controlled to print a single copy each of print data, then the user will have to wait for the 10-ppm printers to finish printing after the 20-ppm printers have completed printing out their copies. Printing processes can be performed efficiently if the 20-ppm network printers are set to print twice as many copies as the 10-ppm network printers. The host computer <b>1</b> searches the capability of the network printers designated by the user to perform a certain printing task and automatically assigns each of the designated network printers with the optimum number of copies based on the printing speeds in order to reduce the amount of waiting time to a minimum. In the above-described example, if the user designates three of the 10-ppm network printers and one of the 20-ppm network printers to print five copes of the same print data, the host computer <b>1</b> automatically assigns the 20-ppm network printer to print two copies and the three 10-ppm network printers to print a single copy each. As a result, the network printers will all finish their printing tasks at the same time. The settings for the number of copies to be printed by each network printer is sent to the network printers in commands unicast transmitted before the print data is multicast transmitted.</p>
<p id="p-0063" num="0062">The host computer <b>1</b> also functions to set what operations the host computer will perform when a problem that prevents the network printer from receiving print data occurs at a network printer. There are a variety of problems that can prevent a printer from receiving print data. Some examples are a paper jams, running out of paper, and running out of toner.</p>
<p id="p-0064" num="0063">The host computer <b>1</b> divides print data into packets and transmits the packets to a multicast address, so that the same print data is simultaneously transmitted to all network printers that belong to the multicast group associated with the multicast address. The host computer <b>1</b> also multicast transmits a variety of commands to the network printers via the multicast address.</p>
<p id="p-0065" num="0064">Those of the network printers A to E that are members of the multicast group receive the print data packets and advise the host computer <b>1</b> when packets are properly received. The host computer <b>1</b> constantly monitors whether network printers are receiving packets and transmits packets accordingly. The network printers subject the print data packets to predetermined processes and output them as print documents. When a problem occurs at a network printer, then processes appropriate to the problem are performed. A desired print job can be executed using this series of processes.</p>
<p id="p-0066" num="0065">For exemplary purposes, assume that the same print data is to be printed simultaneously at the three network printers A, B, and C and the print data is divided into a total of 20 packets. Assume also that about the time when the tenth packet is transmitted to the network printers A, B, and C, a data-reception impeding problem occurs at the network printer B, for example, the network printer B runs out of paper, so that the network printer B can receive no further data. As a result, although the network printers A and C return an acknowledgement response to the host computer host computer <b>1</b> to acknowledge proper receipt of the tenth packet, the network printer B either returns a negative response to clearly inform the host computer <b>1</b> that it could not receive the tenth packet, or merely does not return a positive response until the data-reception impeding problem is solved. Because the host computer <b>1</b> will not be able to transmit the next data packet, the network printers A and C must wait until the data-reception impeding problem of the network printer B is solved. The host computer <b>1</b> includes a function that enables the user to select what action the host computer <b>1</b> takes in such a situation. The following two modes are available.</p>
<p id="p-0067" num="0066">In the first mode, the host computer <b>1</b> waits indefinitely until all of the network printers are able to receive more print data. The user selects the first mode when it is absolutely necessary to print all copies using a single print command. When this mode is selected, the user must quickly take care of data-reception impeding problems at the network printers.</p>
<p id="p-0068" num="0067">In the second mode, the host computer <b>1</b> waits for a preset fixed duration of time for all the network printers to recover. The user selects the second mode when it is desired to give up on the reception-impeded network printers and continue printing with only the properly operating network printers. When in the second mode, the host computer <b>1</b> waits a time T<b>1</b> to receive an acknowledgement response (ACK) about whether printers have received a transmitted packet. If no acknowledgement response is received by the time T<b>1</b> elapses, for example, because of a data-reception impeding problem at a network printer, then the host computer <b>1</b> gives up on trying to print with that network printer and transmits the next packet for the benefit of the other printers. The time T<b>1</b> can be either set by the user or set to a default value by the host computer <b>1</b>. When a network printer that did not return an acknowledgement response to the host computer <b>1</b> receives the next packet, the printer understands that the host computer <b>1</b> has given up on it, and so discards any further packets and no longer prints. In this case, the host computer <b>1</b> functions to resend print data each waiting time T<b>1</b>.</p>
<p id="p-0069" num="0068">It should be noted that there are certain types of data-reception impeding problems that cannot be corrected immediately. Because of such problems, it is desirable that the host computer <b>1</b> be capable of switching from the first mode to the second mode, so that, with respect to the above-described example, the host computer <b>1</b> is capable of giving up on printing using the network printer B, and just continue printing operations using the network printers A and C, even if the first mode is the presently selected mode.</p>
<p id="p-0070" num="0069">The host computer <b>1</b> functions to induce all selected network printers to join a particular multitask group.</p>
<p id="p-0071" num="0070">It is desirable that the network printers be capable of receiving multicasted data only when necessary. According to the present embodiment, even after a network printer is set to be capable of receiving print data from a particular multicast address, the printer is also capable of judging whether to print out the print data or discard print data based on a command sent in the print data. However, with this configuration, it is possible that the network printers ability to properly perform other printing work from the host computer <b>1</b> will be hindered. That is, when a network printer judges not to print out further print data from the host computer <b>1</b>, the network printer must perform operations to determine that received print data is unnecessary and to discard the print data. These operations become overhead that might hinder other print work.</p>
<p id="p-0072" num="0071">In order to put the selected network printers into a condition capable of receiving all multicast, the host computer <b>1</b> unicast transmits a command to each network printer, ordering the network printers to join the multicast group used for printing.</p>
<p id="p-0073" num="0072">Further, the host computer <b>1</b> functions to automatically resend print data when it does not receive an acknowledgement response from a network printer even after a predetermined waiting time T<b>2</b> elapses.</p>
<p id="p-0074" num="0073">The host computer <b>1</b> divides the print data into packets and transmits the packets to the multicast address. The transmitted packets are received by all of the network printers that are members of the multicast group. Sequence numbers are appended to the packets. Basically, once the host computer <b>1</b> transmits a packet with a particular sequence number, it cannot transmit the packet with the next sequence number until an acknowledgement response is received from all the network printers for the packet with the particular sequence number.</p>
<p id="p-0075" num="0074">There is a possibility that packets will be lost because of some sort of problem generated during transmission using the network. Two cases are conceivable. That is, either all or a portion of the print data transmitted from the host computer <b>1</b> is not properly received by the network printers, or all or a portion of acknowledgement responses transmitted from the network printers are not properly received by the host computer <b>1</b>. Both of these situations can be taken care of by the host computer <b>1</b> resending the print data with the same sequence number. The host computer <b>1</b> can be set with prescribed values for how many times a packet is resent and for duration of a waiting time T<b>2</b> before a packet is resent. However, even if such values are prescribed, a setting function can be provided to enable the user to set values himself or herself.</p>
<p id="p-0076" num="0075">It should be noted that when the host computer <b>1</b> is set in the second mode, the host computer <b>1</b> gives up on printing using network printers that do not return acknowledgement responses, even though the fixed waiting time T<b>1</b> has elapsed. In this case the host computer <b>1</b> proceeds to transmit subsequent packets.</p>
<p id="p-0077" num="0076">The network printers A to E are installed with executable control programs capable of responding to transmission requests from the host computer <b>1</b>. The network printers A to E function in the following manner by execution of these control programs.</p>
<p id="p-0078" num="0077">The network printers A to E function to receive print data transmitted to a broadcast address or to a particular multicast address.</p>
<p id="p-0079" num="0078">The network printers A to E function to refuse any new commands from the host computer <b>1</b> to join a multicast group when already a member of another multicast group.</p>
<p id="p-0080" num="0079">Of the network printers that receive a join group command to join a multicast group, those network printers capable of responding make preparations, such as setting internal settings, that enable reception of data from the multicast address associated with the commanded multicast group. Once the network printers are in a condition capable of receiving data, the network printers transmit a response to the host computer to advise this to the host computer <b>1</b>. It should be noted that when a network printer is already a member of the multicast group, the network printer sends a response to the host computer <b>1</b> that refuses the join group command.</p>
<p id="p-0081" num="0080">Each of the network printers A to E function to advise the host computer <b>1</b> that it properly received a print data packet, to advise that it is incapable of receiving no further data, and to request the host computer <b>1</b> to resend certain print data.</p>
<p id="p-0082" num="0081">Each of the network printers A to E sends an acknowledgement response to the host computer <b>1</b> when it properly receives print data with a sequence number. However, when a network printer is in a condition that prevents it from receiving any further print data, for example when the network printer's reception buffer is full or when the network printer is out of paper, then the network printer does not send an acknowledgement response. In such a situation, the network printer can send a negative acknowledgement response (NACK) to the host computer <b>1</b>, clearly indicating that no further reception is possible. The network printer appends the reason for the negative acknowledgement response to the negative acknowledgement response. The host computer <b>1</b> advises the user about the reason that printing was stopped. Assume that the network printers A, D, and E recognize that for some reason they have received a defective packet. In this case, the corresponding network printers A, D, and E each send a positive resend request to the host computer <b>1</b>, so that the host computer <b>1</b> can quickly perform processes to resend the packet without waiting the waiting time T<b>2</b>.</p>
<p id="p-0083" num="0082">The network printers A to E function to leave the particular multicast group that was designated by the command from the host computer <b>1</b>.</p>
<p id="p-0084" num="0083">The host computer <b>1</b> sends a command to indicate that a network printer should leave the particular multicast group, individually by unicast transmission to the relevant printers in the particular multicast group. The network printers leave the multicast group upon receipt of such a command.</p>
<p id="p-0085" num="0084">Next, while referring to the flowcharts of <figref idref="DRAWINGS">FIGS. 8</figref> to <b>12</b>, an explanation will be provided for processes performed by the host computer <b>1</b> and the network printers A to H to print based on print data. The flowcharts of <figref idref="DRAWINGS">FIGS. 8 to 10</figref> represent processes performed in the host computer <b>1</b> and the flowcharts of <figref idref="DRAWINGS">FIGS. 11 and 12</figref> represent processes performed in the network printers.</p>
<p id="p-0086" num="0085">First, the host computer <b>1</b> searches over the network for network printers that are capable of printing the target print data without problem. To do this, the host computer <b>1</b> broadcasts a search condition packet to all the network printers (S<b>1</b>) and waits for responses (S<b>2</b>). The search condition packet includes a command and a set of search conditions. The command commands any network printer that meets the search conditions to respond positively to the host computer <b>1</b>. The search conditions designates the following characteristics for printers:</p>
<p id="h-0005" num="0000">(a) support for the print function of the printing system of the present embodiment;</p>
<p id="h-0006" num="0000">(b) capability of printing LETTER size sheets;</p>
<p id="h-0007" num="0000">(c) capability of printing 50 pages;</p>
<p id="h-0008" num="0000">(d) orientation portrait of portrait;</p>
<p id="h-0009" num="0000">(e) support for a resolution of 600 dpi;</p>
<p id="h-0010" num="0000">(f) PDL of PCL5;</p>
<p id="h-0011" num="0000">(g) capability of printing in color; and</p>
<p id="h-0012" num="0000">(h) “ready” printer status.</p>
<p id="p-0087" num="0086">At this time, the network printers are waiting for reception of incoming transmissions (S<b>30</b>). When the network printers receive a broadcasted request (S<b>31</b>:YES), then each network printer checks to see if it meets the search conditions indicated in the packet. Those network printers that match the search conditions send a packet with it own information to the host computer <b>1</b> (S<b>32</b>). In the example of <figref idref="DRAWINGS">FIG. 2</figref>, five of the eight network printers, that is, network printers A to E, meet the search conditions in the packet and so send an information packet to the host computer <b>1</b>.</p>
<p id="p-0088" num="0087">When the host computer <b>1</b> receives a valid information packet as a response from a network printer (S<b>3</b>:YES), then the host computer <b>1</b> stores the information in the packet in an information list and displays the information list (S<b>5</b>). <figref idref="DRAWINGS">FIG. 3</figref> (<i>a</i>) shows an example of a list <b>10</b> with information transmitted from the network printers A to E. On the other hand, if the host computer <b>1</b> receives no valid information packet (S<b>3</b>:NO), then the host computer <b>1</b> performs predetermined error processes (S<b>4</b>).</p>
<p id="p-0089" num="0088">The host computer <b>1</b> waits for the user to input the number of copies he or she wishes to print out at each printer (S<b>6</b>). Before inputting the number of copies, the user analyses the various displayed information, such as location and speed of the printers, in the information list <b>10</b> and selects which of the printers A to E that he or she desires to use for actual printing. In the example of <figref idref="DRAWINGS">FIG. 3</figref> (<i>b</i>), the user has selected the three printers A, D, and E. As shown in <figref idref="DRAWINGS">FIG. 3</figref> (<i>b</i>), the listings for selected printers are displayed in a manner that distinguishes them from those of non-selected printers. In the example of <figref idref="DRAWINGS">FIG. 3</figref> (<i>b</i>), the listing for selected printers is displayed superimposed with hashing.</p>
<p id="p-0090" num="0089">The user then inputs the number of copies he or she wishes each printer to print. In this example, the printer E has twice the printing speed of the other two selected printers A and D, so the user inputs that the printer A and D should print one copy each and the printer E should print twice that, or two copies. It should be noted that the host computer can automatically assign the optimum number of copies based on the printing speeds in order to reduce the amount of waiting time to a minimum as described above.</p>
<p id="p-0091" num="0090">Once the settings have been input, then the user presses the ENTER key of the keyboard or uses a mouse (not shown) to click on the “OK” button <b>11</b> of the information list <b>10</b>.</p>
<p id="p-0092" num="0091">When the host computer <b>1</b> detects such input as the OK button being clicked (S<b>7</b>:YES), then a selection screen <b>20</b> shown in <figref idref="DRAWINGS">FIG. 4</figref> is displayed to enable the user to select what action the host computer is to take when printing processes are impeded in some way (S<b>8</b>) and the host computer waits for the user's input (S<b>9</b>).</p>
<p id="p-0093" num="0092">The user uses the selection screen <b>20</b> to designate what action, if any, the host computer <b>1</b> should take when a problem occurs at a printer that is presently printing, so that the printer can no longer receive print data transmitted from the host computer <b>1</b>. The selection screen <b>20</b> includes buttons <b>21</b> and <b>22</b>. When the user selects button <b>21</b>, then the host computer <b>1</b> will wait indefinitely until the problem with the printer is resolved. When the user selects button <b>22</b>, then the host computer <b>1</b> will wait for a set duration of time, and then continue printing operations using the other printers, regardless of whether the problem at the one printer is resolved. The user clicks on one of the buttons and a check mark will appear in the clicked button. When the user selects the button <b>22</b>, then a text box <b>23</b> of the selection screen <b>20</b> becomes active so the user can input a desired waiting time. In the example of <figref idref="DRAWINGS">FIG. 4</figref>, the user input 10 seconds waiting time in the text box <b>23</b>.</p>
<p id="p-0094" num="0093">When the host computer <b>1</b> detects that such input has been made (S<b>10</b>:YES), then the host computer <b>1</b> unicast transmits a command to the selected printers (S<b>11</b>) and waits for responses from the printers for a predetermined duration of time, for example, two seconds (S<b>9</b>). The command commands the printers to join a particular multicast address. In the example of <figref idref="DRAWINGS">FIG. 5</figref>, the host computer <b>1</b> unicast transmits a “joinGroup” command to the printers A, D, and E, requesting the printers to join the multicast address (239.245.22.22).</p>
<p id="p-0095" num="0094">When the printers A, D, and E receive the command (S<b>35</b>:YES), then each determines whether or not they are already a member of the designated multicast address (S<b>36</b>). When not already a member (S<b>36</b>:NO), then the printer joins the multicast group associated with the multicast address (S<b>37</b>) and sends an acknowledgement signal to the host computer <b>1</b> to indicate that the printer has completed processes for joining the multicast address (S<b>39</b>).</p>
<p id="p-0096" num="0095">In order to join the multicast group, the network printer sets its settings so that it is capable of transmitting and receiving messages having a multicast address used by the multicast group that the network printer is to join. Also, the network printer sends a special packet called Internet Group Management protocol (IGMP) over the network <b>2</b> to the multicast router <b>3</b>, indicating to the router <b>3</b> that the network printer, which is under management of the router <b>3</b>, is to transmit packets to and receive packets from the particular multicast address. Then the printer enters the sequence number <b>1</b> into a sequence number register seqP maintained by each of the printers (S<b>40</b>). In the example shown in <figref idref="DRAWINGS">FIG. 5</figref>, all of the selected printers A, D, and E perform processes to enable reception of packets from the multicast address and send an acknowledgement signal to the host computer <b>1</b>.</p>
<p id="p-0097" num="0096">However, when a printer is already a member of the multicast address (S<b>36</b>:YES), then the printer transmits a negative acknowledgement packet to the host computer <b>1</b>, indicating that the printer refuses to participate (S<b>38</b>).</p>
<p id="p-0098" num="0097">When the host computer <b>1</b> receives a response from each printer, it determines whether all of the responses are acknowledgement packets (S<b>13</b>). If not, that is, if any of the responses are a negative acknowledgement packet (S<b>13</b>:NO), then the host computer <b>1</b> displays a dialog indicating that a portion of the printers returned negative acknowledgement packets (S<b>14</b>) and waits for the user to click on or press the OK button of the dialog (S<b>15</b>).</p>
<p id="p-0099" num="0098">However, if the host computer <b>1</b> receives an acknowledgement packet from all of the printers (S<b>13</b>:YES), then the host computer <b>1</b> unicast transmits a command to each of the selected printers (S<b>16</b>). The command indicates the number of copies that each printer is to print out.</p>
<p id="p-0100" num="0099">When a printer receives the command that indicates the number of copies to print out (S<b>33</b>:YES), then the printer performs internal setting operations to indicate the number of copies it is to print out (S<b>34</b>).</p>
<p id="p-0101" num="0100">The host computer <b>1</b> divides the print data into packets and enters the sequence number <b>0</b> into a packet sequence register seqh managed by the host computer <b>1</b> (S<b>17</b>). Then, the host computer <b>1</b> judges whether all packets of the print data have been transmitted (S<b>18</b>). If not (S<b>18</b> NO), then the host computer <b>1</b> increments the value in the sequence number register seqh by one (S<b>20</b>) and multicast transmits the print data packet with the attached with the sequence number indicated by the sequence number register seqh, that is, one in this example (S<b>21</b>). Also, the host computer <b>1</b> starts counting the waiting times T<b>1</b> and T<b>2</b> simultaneously with this transmission. Then the host computer <b>1</b> waits for a response packet from the printers (S<b>22</b>). In the example shown in <figref idref="DRAWINGS">FIG. 6</figref> (<i>a</i>), the host computer <b>1</b> multicast transmits a packet of print data with a sequence number <b>1</b>, that is, the value in the sequence number register seqh, to the multicast address (239.245.22.22).</p>
<p id="p-0102" num="0101">When a printer receives the multicast print packet (S<b>41</b>:YES), it judges whether the packet is normal or not (S<b>42</b>). If normal (S<b>42</b>:YES), then the printer judges whether the value of the sequence nuiber attached to the packet is smaller than the value in the register seqp (S<b>44</b>). If so (S<b>44</b>:YES), then the received packet is not one that needs to be processed right now, so the printer ignores the packet. However, if the sequence number of the packet is larger than the value in the register seqp (S<b>44</b>:NO), then the printer judges whether the value of the sequence number attached to the packet is larger than the value in the register seqp (S<b>45</b>). If not (S<b>45</b>:NO), then the printer processes the received packet (S<b>47</b>). During these processes, the printer stores and develops the print data in a memory of the printer and executes print operations based on the developed print data. After completing the processes on the packet, the printer sends an acknowledgment response (ACK) to the host computer and also increments the value in the register seqp by one (S<b>48</b>). In the example of <figref idref="DRAWINGS">FIG. 6</figref> (<i>a</i>), each of the printers A, D, and E send an acknowledgement response (ACK) to the host computer. In the present example, all of the printers return an ACK signal within five seconds.</p>
<p id="p-0103" num="0102">Once the host computer <b>1</b> receives response packets from all of the printers, the host computer <b>1</b> confirms whether any of the response packets are requests for retransmission (S<b>23</b>). If not (S<b>23</b>:NO), then the host computer <b>1</b> judges whether acknowledgement responses were received from all of the printers. If so (S<b>24</b>:YES) the transmission processes are continued. That is, the host computer <b>1</b> confirms whether all packets have been transmitted (S<b>18</b>) and, if not (S<b>18</b>:NO), increments the value in the register seqh by one (S<b>20</b>) and transmits the packet with the next sequence number (S<b>21</b>).</p>
<p id="p-0104" num="0103">In the example shown in <figref idref="DRAWINGS">FIG. 6</figref> (<i>b</i>), the host computer <b>1</b> transmits the print data packet with the sequence number <b>2</b> to the multicast address and the printers A and D promptly send an ACK signal back to the host computer <b>1</b>. However, although the printer E received the packet with the sequence number two (S<b>41</b>:YES), it detected that the received packet was defective for some reason (S<b>42</b>:NO) and so sent a RESEND request to the host computer <b>1</b>, asking the host computer <b>1</b> to again send the packet (S<b>43</b>).</p>
<p id="p-0105" num="0104">When the host computer <b>1</b> receives a request to resend (S<b>23</b>:YES), then it retransmits the packet with the present sequence number (S<b>21</b>) and receives response packets from the printers (S<b>22</b>). When the printer or printers that requested the retransmission receive the retransmission of the packet (S<b>41</b>:YES), they determine whether or not the packet is normal (S<b>42</b>). If so (S<b>42</b>:YES), then the above-described processes for processing the packet are performed (S<b>44</b> to S<b>48</b>). In the example of <figref idref="DRAWINGS">FIG. 6</figref> (<i>c</i>), the host computer <b>1</b> again multicast transmits the packet with the sequence number of two and the printer E sends an ACK signal to the host computer <b>1</b> upon proper reception of the packet. It should be noted that the printers A and D have already sent ACK signals to the host computer <b>1</b>, acknowledging receipt of the packet with sequence number <b>2</b>, and already incremented their registers seqp to the value <b>3</b> accordingly. Therefore, the printers A and D will judge that the sequence number of the retransmitted packet (<b>2</b>) is higher than the value in the sequence register seqp (<b>3</b>) (S<b>44</b>:YES) and will ignore the retransmitted packets.</p>
<p id="p-0106" num="0105">In this way, when a printer receives a packet that is defective, it sends a request to the host computer <b>1</b>, asking the host computer <b>1</b> to retransmit the packet. With this configuration, transmission between the host computer <b>1</b> and the printers can also be reliably performed.</p>
<p id="p-0107" num="0106">Even if a packet that a printer receives is normal, the printer may take time to process the packet because of some reason, such as there is no empty buffer or there is a paper jam at the printer. In this case, the printer can transmit a WAIT request to the host computer <b>1</b>, indicating a desire for the host computer <b>1</b> to wait before sending the next packet.</p>
<p id="p-0108" num="0107">Further, when some problem occurs on the network, there is the possibility that packets will disappear. If data is damaged, then either all or some of the print data transmitted from the host computer <b>1</b> will not be properly received by the printers, or all or some of the acknowledgement responses transmitted from the printers will not be properly received by the host computer <b>1</b>. For this reason, the host computer <b>1</b> will perform retransmission processes, not only when it receives a resend request from a printer, but also a predetermined number of times when it does not receive an acknowledgement response from all of the printers during the time T<b>1</b>.</p>
<p id="p-0109" num="0108">That is, if the host computer <b>1</b> transmits a packet with a certain sequence number to the multicast address (S<b>21</b>) and receives an acknowledgement response from all but one printer (S<b>24</b>:NO), then host computer <b>1</b> waits for acknowledgement responses (S<b>22</b>, S<b>24</b>) until the fixed time T<b>1</b> elapses (S<b>25</b>, S<b>26</b>:NO). If not all network printers return acknowledgement response (S<b>24</b>:NO) by the time that time T<b>1</b> elapses (S<b>26</b>:YES), then the host computer <b>1</b> retransmits the packet with the present sequence number to the multicast address (S<b>21</b>).</p>
<p id="p-0110" num="0109">In the example represented in <figref idref="DRAWINGS">FIG. 6</figref> (<i>d</i>), the host computer <b>1</b> transmits the packet with the sequence number <b>3</b> and, as a result, the printers D and E response with an ACK signal, but the printer A does not respond at all. Here, the host computer <b>1</b> waits for a fixed waiting time T<b>1</b> of five seconds for a response from the printer A. As shown in <figref idref="DRAWINGS">FIG. 6</figref> (<i>e</i>), after the fixed waiting time T<b>1</b> elapses, then the host computer <b>1</b> retransmits the packet with the sequence number <b>3</b> to the multicast address. In this example, the problem with transmission on the network was resolved during the five second waiting time, so the host computer <b>1</b> received an ACK signal from the printer A. It should be noted that because the printers D and E have already sent ACK signals to the host computer <b>1</b>, and have updated the value in their sequence registers seqp to 4 accordingly, the printer D and E will judge that the sequence number of the retransmitted packet is smaller than the value of the sequence register seqp (S<b>44</b>:YES) and ignore the retransmitted packet with sequence number <b>3</b>.</p>
<p id="p-0111" num="0110">The action taken by the host computer <b>1</b> when the problem with network transmission is not resolved is selected using the selection screen <b>20</b>, even in the case when the host computer <b>1</b> retransmits each time the fixed time T<b>1</b> elapses. When the first mode is selected, the host computer <b>1</b> retransmits each time the fixed time T<b>1</b> elapses and waits for the problem to be resolved, that is, continues retransmission until the host computer <b>1</b> receives an ACK signal from all of the subject network printers. However, the second mode is selected in this example, so the host computer <b>1</b> continues printing processes when it does not receive an ACK response from all of the subject printers by the time the set time T<b>2</b> has elapsed.</p>
<p id="p-0112" num="0111">That is, when a packet is transmitted (S<b>21</b>), a timer for measuring the fixed time T<b>1</b> and a timer for measuring the fixed time T<b>1</b> are both started simultaneously with transmission of the packet. The packet is retransmitted (S<b>21</b>) every time the fixed time T<b>1</b> elapses (S<b>26</b>:YES). If an ACK signal is not received from all the printers by the time the time T<b>2</b> elapses (S<b>25</b>:YES), then the host computer transmits the packet with the next sequence number (S<b>20</b>, S<b>21</b>). In the example shown in <figref idref="DRAWINGS">FIGS. 7</figref> (<i>a</i>), <b>7</b> (<i>b</i>), and <b>7</b> (<i>c</i>), the host computer <b>1</b> first transmits the packet with the sequence number <b>4</b> to the multicast address. The printers D and E return an ACK signal in response, but printer A does not respond at all. The host computer <b>1</b> waits for the fixed time T<b>1</b> of five seconds. After five seconds elapses, the host computer retransmits the packet with the sequence number <b>4</b> to the multicast address and waits for another five seconds. Again, the printer A does not response with an ACK signal. Because the fixed time T<b>2</b> will elapse at the same time as this second run of the fixed time T<b>1</b>, the host computer <b>1</b> stops waiting for a response from the printer A and transits the packet with the sequence number <b>5</b>. Because the host compute <b>1</b> has given up on the printer A, the host computer <b>1</b> will judge that ACK signals have been received from all of the subject printers when it receives ACK signals from the printers D and E, and therefore will continue packet transmission processes.</p>
<p id="p-0113" num="0112">If the problem is resolved so that the printer A can properly receive packets transmitted to the multicast address, the printer A will judge that the sequence number <b>5</b> of the next received packet is larger than the sequence number <b>3</b> of the packet received when the problem first occurred (S<b>45</b>:YES). As a result, the printer A terminates printing operations and leaves the multicast group (S<b>46</b>). When a printer leaves a multicast group, it sets its settings so that it is incapable of transmitting packets to and receiving packets from the multicast address associated with the multicast group.</p>
<p id="p-0114" num="0113">When the host computer <b>1</b> performs packet transmission processes in the above-described manner until all print packets are transmitted (S<b>18</b>:YES), the host computer <b>1</b> sends a leave packet to the multicast address (S<b>19</b>). The leave packet includes a command indicating that the printers should leave the multicast address. When the printers D and E receive the leave packet (S<b>49</b>:YES), then the printers D and E leave the multicast group and send an ACK signal to the host computer, acknowledging receipt of the leave packet from the host computer <b>1</b> (S<b>50</b>).</p>
<p id="p-0115" num="0114">After transmitting the leave packet, the host computer <b>1</b> judges whether it receives an ACK signal from all of the printers (S<b>27</b>). When the host computer <b>1</b> receives an ACK signal from all of the printers (S<b>27</b>:YES), then transmission processes for this set of print data are ended (S<b>28</b>). However, if the host computer <b>1</b> does not receive an ACK signal from all of the printers (S<b>27</b>:NO), then the host computer <b>1</b> resends the leave packet (S<b>19</b>). It should be noted that restrictions could be set for the number of times that the leave packet is resent and for the inter-transmission time between retransmissions. Also, if an ACK signal is not received from one or more of the printers by the time a certain time period has elapsed, then processes can be temporarily stopped. After a fairly long time elapses, then retransmission of the leave packet can be restarted again.</p>
<p id="p-0116" num="0115">In the example of <figref idref="DRAWINGS">FIG. 7</figref> (<i>d</i>), the host computer <b>1</b> unicast transmits a leave request (leaveGroup) to the printers that it previously sent a joining request (joinGroup) to. The printers that receive the leave request perform processes to remove themselves from the multicast group. This prevents potential problems in the functioning of the network that could be caused by a printer continuing on as a member of the multicast group. It also enables the printers to dynamically react to join requests from the host computer <b>1</b>.</p>
<p id="p-0117" num="0116">Because print data is transmitted using multicast, a plurality of copies can be quickly printed without burdening other printers connected to the network.</p>
<p id="p-0118" num="0117">Next, a modification of the embodiment will be described. <figref idref="DRAWINGS">FIG. 13</figref> shows a screen displayed on the cathode ray tube (CRT) or other display device of the host computer <b>1</b> when the host computer according to the modification is executing a print job. The screen is used to set the number of times a print job is to be retransmitted and the timing of the retransmissions. In the example shown in <figref idref="DRAWINGS">FIG. 13</figref>, the user has input that three retransmissions are to be performed, and has input a first retransmission time of 3 hours and 30 minutes, a second retransmission time of 4 hours, and a third retransmission time of 24 hours. The retransmission times indicate how long the host computer <b>1</b> is to wait after a problem occurs before retransmitting data. That is, in this example the host computer <b>1</b> is to wait 3 hours and 30 minutes after a problem occurs before making the first retransmission, four hours before making the second retransmission, and 24 hours before making the third retransmission. In this way, various settings, such as the number of retransmissions, can be designated according to the will of the user. It should be noted that default values can be automatically set.</p>
<p id="p-0119" num="0118">Next, processes performed by the printing system of the embodiment will be explained while referring to <figref idref="DRAWINGS">FIGS. 14</figref> (<i>a</i>) to <b>14</b> (<i>c</i>). As shown in <figref idref="DRAWINGS">FIG. 14</figref> (<i>a</i>), the host computer <b>1</b> multicast transmits a print job to the predetermined multicast address. The printers A, B, C, and D are members of the multicast address and so receive the print job. The network printers that can print out the received print job send an ACK response to the host computer <b>1</b>. Those network printers that cannot print out the received print job send a NACK response to the host computer <b>1</b>. In the example shown in <figref idref="DRAWINGS">FIG. 3</figref>, the network printer A sends an ACK response to the host computer <b>1</b>. However, the other network computers B, C, and D are unable to execute printing processes because of some sort of problem, and so send a NACK response to the host computer <b>1</b>. Once the network printer A completes the print job, it leaves the multicast group of the predetermined multicast address.</p>
<p id="p-0120" num="0119">The host computer <b>1</b> enters a waiting condition until the first retransmission time, that is, three hours and thirty minutes in this example, elapses. As shown in <figref idref="DRAWINGS">FIG. 14</figref> (<i>b</i>), when the first retransmission time elapses, then the host computer <b>1</b> multicast transmits the same print job to the predetermined multicast address in the same manner as indicated in <figref idref="DRAWINGS">FIG. 4</figref> (<i>a</i>). In the example shown in <figref idref="DRAWINGS">FIG. 14</figref> (<i>b</i>), the network printers B and D send ACK responses to the host computer <b>1</b>, but the network printer C again sends a NACK response to the host computer <b>1</b>. When the network printers B and D complete printing processes, they leave the multicast group.</p>
<p id="p-0121" num="0120">The host computer <b>1</b> then enters a waiting condition for the second retransmission time of four hours shown in <figref idref="DRAWINGS">FIG. 13</figref> to elapse. As shown in <figref idref="DRAWINGS">FIG. 14</figref> (<i>c</i>), once the second retransmission time has elapsed, then the host printer again multicast transmits the same print job to the predetermined multicast address in the manner as shown in <figref idref="DRAWINGS">FIG. 14</figref> (<i>a</i>). In the example shown in <figref idref="DRAWINGS">FIG. 14</figref> (<i>c</i>), the network printer C sends an ACK response to the host computer <b>1</b>. Once the network printer C completes the printing processes for the print job, it leaves the predetermined multicast group.</p>
<p id="p-0122" num="0121">In this way, the print job is resent to printers that for whatever reason, such as a paper jam, running out of paper, running out of toner, and the like, have not completed the print job after the one or more waiting times elapse. Therefore, there is a higher probability that the processes for the print job will be completed. Because retransmission is performed using multicast, print jobs can be completed by those network printers of the multicast address that were originally scheduled to perform the printing processes. The desire of the user that operates the host computer <b>1</b> can be satisfied.</p>
<p id="p-0123" num="0122">Although the modification describes retransmitting all of print jobs that were not completely printed, only the portion of the print job that was not completed need be retransmitted. In this way, printed documents that correspond to a portion of the print job can be effectively utilized. In both cases, it is desirable to print a printing guide page that indicates that the documents printed after the guide page are a replacement or supplementary printing of incompletely printed documents. Because the remainder of the print job is printed after a waiting time, there is a danger that another user might through away the remainder of the print job, against the wishes of the user.</p>
<p id="p-0124" num="0123">Although the modification describes the host computer <b>1</b> as transmitting the print job to the multicast address, the host computer <b>1</b> can store distinction information, such as address information of the network printers, printers' names, and other information for distinguishing which network printers have had problems and, as shown in <figref idref="DRAWINGS">FIGS. 16</figref> (<i>a</i>) to <b>16</b> (<i>c</i>), only unicast retransmit print jobs to those network printers that have had problems and so were unable to receive the print job previously, based on the stored distinction information. All portions of a print job not completed before the trouble occurred can be printed with the same font and the like as portion completed before the trouble occurred.</p>
<p id="p-0125" num="0124">While the invention has been described in detail with reference to specific embodiments thereof, it would be apparent to those skilled in the art that various changes and modifications may be made therein without departing from the spirit of the invention, the scope of which is defined by the attached claims.</p>
<p id="p-0126" num="0125">For example, although the embodiment described transmission and reception of packets between devices that is, the host computer <b>1</b> and printers A to H, across the same network <b>2</b>, the multicast router <b>3</b> can be used to transmit packets from devices connected to the network <b>2</b> to devices of another network (not shown) also connected to the multicast router <b>3</b>.</p>
<p id="p-0127" num="0126">Also, although the embodiment describes the printers as joining the multicast group according to the command from the host computer, the printers can join the multicast group on their own accord. For example, the printer can be produced with a particular multicast address predefined as a printing multicast address. That is, the particular multicast address can be stored in the ROM of the printer so that each time during initialization the particular multicast address is set as the print multicast address. In this case, the printer will always be a member of the multicast group associated with the particular multicast address and so will always be capable of performing multicast printing operations. There is no need to transmit the joinGroup and leaveGroup commands from the host computer. As an alternative to the printer joining the multicast group during initialization, the printer can be designed so that when a key or group of keys of its control panel is operated, the printer joins the multicast group.</p>
<p id="p-0128" num="0127">Although the modification describes retransmitting a print job several times at several different inter-transmission waiting times, a print job can be resent once only or several times after a fixed inter-transmission waiting.</p>
<?DETDESC description="Detailed Description" end="tail"?>
</description>
<us-claim-statement>What is claimed is:</us-claim-statement>
<claims id="claims">
<claim id="CLM-00001" num="00001">
<claim-text>1. A printer control device, comprising:
<claim-text>a joining unit that causes at least one network printer to join a predetermined multicast address;</claim-text>
<claim-text>a transmission unit that converts print data into packets and multicast transmits the packets to the predetermined multicast address; and</claim-text>
<claim-text>a control unit that monitors transmission/reception status of the packets at the at least one network printer that has joined the multicast address and that, based on monitoring results, controls transmission of packets to, waiting for packets from, and retransmission of packets to the predetermined multicast address.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00002" num="00002">
<claim-text>2. A printer control device as claimed in <claim-ref idref="CLM-00001">claim 1</claim-ref>, further including a detection unit that detects network printers that are capable of joining a multicast address.</claim-text>
</claim>
<claim id="CLM-00003" num="00003">
<claim-text>3. A printer control device as claimed in <claim-ref idref="CLM-00002">claim 2</claim-ref>, further comprising a network printer selection unit capable of selecting at least one network printer to use in actual printing from the network printers detected by the detection unit.</claim-text>
</claim>
<claim id="CLM-00004" num="00004">
<claim-text>4. A printer control device as claimed in <claim-ref idref="CLM-00003">claim 3</claim-ref>, further comprising a print copy number setting unit that sets a number of copies to be printed by each of the at least one network printer selected by the network printer selection unit.</claim-text>
</claim>
<claim id="CLM-00005" num="00005">
<claim-text>5. A printer control device as claimed in <claim-ref idref="CLM-00001">claim 1</claim-ref>, further comprising an operation procedure unit that presets transmission operations, waiting operations, and retransmission operations of the control unit with regard to the predetermined multicast address to depend on packet reception/transmission status at the at least one network printer that joined the predetermined multicast address.</claim-text>
</claim>
<claim id="CLM-00006" num="00006">
<claim-text>6. A printer control device as claimed in <claim-ref idref="CLM-00001">claim 1</claim-ref>, further comprising a retransmission unit that retransmits the same packet to the predetermined multicast address when the control unit does not receive within a certain duration of time an acknowledgement response, which indicates reception of the packet transmitted from the transmission unit, from all network printers that have joined the multicast address.</claim-text>
</claim>
<claim id="CLM-00007" num="00007">
<claim-text>7. A printer control device as claimed in <claim-ref idref="CLM-00006">claim 6</claim-ref>, wherein the control unit does not receive acknowledgement responses because of transmission problem that occurred on the network.</claim-text>
</claim>
<claim id="CLM-00008" num="00008">
<claim-text>8. A printer control device as claimed in <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the transmission unit transmits a subsequent packet to the multicast address when the control unit does not receive within a certain duration of time an acknowledgement response, which indicates reception of the packet transmitted from the transmission unit, from any one of the network printers that have joined the multicast address.</claim-text>
</claim>
<claim id="CLM-00009" num="00009">
<claim-text>9. A printer control device as claimed in <claim-ref idref="CLM-00001">claim 1</claim-ref>, further comprising:
<claim-text>a printing completion judgment unit that judges whether, after a certain duration of time elapses from when the transmission unit transmits the print data, the network printer has completely printed out the print data transmitted by the transmission unit; and</claim-text>
<claim-text>a retransmission unit that, when the printing completion judgment unit judges that the network printer has not completely printed out the print data, retransmits print data transmitted by the transmission unit.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00010" num="00010">
<claim-text>10. A printing control unit as claimed in <claim-ref idref="CLM-00009">claim 9</claim-ref>, wherein the retransmission unit retransmits all of the print data transmitted by the transmission unit.</claim-text>
</claim>
<claim id="CLM-00011" num="00011">
<claim-text>11. A printing control unit as claimed in <claim-ref idref="CLM-00010">claim 10</claim-ref>, further comprising a print starting unit that controls the network printer to print out a message indicating that following printing is a replacement printing, before controlling the network printer to print the incompletely printed print data from the last incompletely printed page.</claim-text>
</claim>
<claim id="CLM-00012" num="00012">
<claim-text>12. A printing control unit as claimed in <claim-ref idref="CLM-00009">claim 9</claim-ref>, wherein the retransmission unit retransmits only incompletely printed portions of the print data transmitted by the transmission unit.</claim-text>
</claim>
<claim id="CLM-00013" num="00013">
<claim-text>13. A printing control unit as claimed in <claim-ref idref="CLM-00012">claim 12</claim-ref>, further comprising a print starting unit that controls the network printer to print out a message indicating that following printing is a supplementary printing, before controlling the network printer to print the incompletely printed print data from the last incompletely printed page.</claim-text>
</claim>
<claim id="CLM-00014" num="00014">
<claim-text>14. A printing control unit as claimed in <claim-ref idref="CLM-00009">claim 9</claim-ref>, wherein the retransmission unit retransmits the print data to the multicast address in order to multicast transmit the print data to any network printer that did not complete printing of print data transmitted from the transmission unit.</claim-text>
</claim>
<claim id="CLM-00015" num="00015">
<claim-text>15. A printing control unit as claimed in <claim-ref idref="CLM-00009">claim 9</claim-ref>, wherein the retransmission unit retransmits the print data a single time.</claim-text>
</claim>
<claim id="CLM-00016" num="00016">
<claim-text>16. A printing control unit as claimed in <claim-ref idref="CLM-00009">claim 9</claim-ref>, wherein the retransmission unit retransmits the print data a plurality of times.</claim-text>
</claim>
<claim id="CLM-00017" num="00017">
<claim-text>17. A printing control unit as claimed in <claim-ref idref="CLM-00016">claim 16</claim-ref>, wherein the transmission unit retransmits the print data repeatedly each time a fixed period of time elapses.</claim-text>
</claim>
<claim id="CLM-00018" num="00018">
<claim-text>18. A printing control unit as claimed in <claim-ref idref="CLM-00016">claim 16</claim-ref>, wherein the transmission unit retransmits the print data repeatedly at a changeable timing.</claim-text>
</claim>
<claim id="CLM-00019" num="00019">
<claim-text>19. A printing control unit as claimed in <claim-ref idref="CLM-00018">claim 18</claim-ref>, further comprising a selection unit enabling a user to select number of retransmission times and an inter-retransmission time duration of retransmission performed by the retransmission unit.</claim-text>
</claim>
<claim id="CLM-00020" num="00020">
<claim-text>20. A network printer comprising:
<claim-text>a network interface connected to a network;</claim-text>
<claim-text>a multicast joining unit that joins a multicast address, the multicast address associating a plurality of network printers into a multicast group, wherein print data transmitted to the multicast address is transmitted to all network printers that belong to the multicast group associated with the multicast address; and</claim-text>
<claim-text>a refusing unit that, when the network printer is already a member of a multicast address, refuses a command from a printing control device for joining another multicast address,</claim-text>
<claim-text>wherein the network printer receives print data to be printed via the multicast address.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00021" num="00021">
<claim-text>21. A print control method comprising:
<claim-text>causing at least one network printer to join a multicast address;</claim-text>
<claim-text>transmitting a packet of print data to the multicast address;</claim-text>
<claim-text>monitoring transmission/reception status of packets at the at least one network printer that joined the multicast address; and</claim-text>
<claim-text>controlling transmission of packets, waiting for packets, and retransmission of packets with respect to the multicast address according to monitoring results.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00022" num="00022">
<claim-text>22. A printing control method as claim in <claim-ref idref="CLM-00021">claim 21</claim-ref>, further comprising:
<claim-text>retransmitting the print data when the print data is not completely printed after a time period elapses after transmitting the packet of print data.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00023" num="00023">
<claim-text>23. A printing control method as claimed in <claim-ref idref="CLM-00022">claim 22</claim-ref>, wherein all of the print data is retransmitted.</claim-text>
</claim>
<claim id="CLM-00024" num="00024">
<claim-text>24. A printing control method as claimed in <claim-ref idref="CLM-00022">claim 22</claim-ref>, wherein only incompletely printed portions of the print data are retransmitted.</claim-text>
</claim>
<claim id="CLM-00025" num="00025">
<claim-text>25. A printing control method as claimed in <claim-ref idref="CLM-00022">claim 22</claim-ref>, wherein the print data is retransmitted a single time.</claim-text>
</claim>
<claim id="CLM-00026" num="00026">
<claim-text>26. A printing control method as claimed in <claim-ref idref="CLM-00022">claim 22</claim-ref>, wherein the print data is retransmitted a plurality of times.</claim-text>
</claim>
<claim id="CLM-00027" num="00027">
<claim-text>27. A printing control method as claimed in <claim-ref idref="CLM-00026">claim 26</claim-ref>, wherein the print data is retransmitted repeatedly at a fixed timing.</claim-text>
</claim>
<claim id="CLM-00028" num="00028">
<claim-text>28. A printing control method as claimed in <claim-ref idref="CLM-00026">claim 26</claim-ref>, wherein the print data is retransmitted repeatedly at a changeable timing.</claim-text>
</claim>
<claim id="CLM-00029" num="00029">
<claim-text>29. A printing control method as claimed in <claim-ref idref="CLM-00022">claim 22</claim-ref> wherein the step of retransmitting the print data includes retransmitting the print data to the multicast address in order to multicast transmit the print data to any network printer that did not completely print out transmitted print data.</claim-text>
</claim>
<claim id="CLM-00030" num="00030">
<claim-text>30. A printer system, comprising:
<claim-text>a printer control device; and</claim-text>
<claim-text>a network printer,</claim-text>
<claim-text>wherein the printer control device comprises:
<claim-text>a joining unit that causes at least one network printer to join a predetermined multicast address;</claim-text>
<claim-text>a transmission unit that converts print data into packets and multicast transmits the packets to the predetermined address; and</claim-text>
<claim-text>a control unit that monitors transmission/reception status of the packets at the at least one network printer that has joined the multicast address and that, based on monitoring results, controls transmission of packets to, waiting for packets from, and retransmission of packets to the predetermined multicast address,</claim-text>
</claim-text>
<claim-text>wherein the network printer comprises:
<claim-text>a network interface connected to a network; and</claim-text>
<claim-text>a multicast joining unit that joins the predetermined multicast address.</claim-text>
</claim-text>
</claim-text>
</claim>
<claim id="CLM-00031" num="00031">
<claim-text>31. A printer system as claimed in <claim-ref idref="CLM-00030">claim 30</claim-ref>, wherein the network multicast joining unit joins the multicast address on its own accord.</claim-text>
</claim>
<claim id="CLM-00032" num="00032">
<claim-text>32. A printer system as claimed in <claim-ref idref="CLM-00030">claim 30</claim-ref>, wherein the network multicast joining unit joins the multicast address by a command from a printing control device connected to the network.</claim-text>
</claim>
<claim id="CLM-00033" num="00033">
<claim-text>33. A printer system as claimed in <claim-ref idref="CLM-00032">claim 32</claim-ref>, further comprising a refusing unit that refuses the command from the printing control device when already a member of another multicast address.</claim-text>
</claim>
<claim id="CLM-00034" num="00034">
<claim-text>34. A printer system as claimed in <claim-ref idref="CLM-00032">claim 32</claim-ref>, further comprising a response unit that sends the printing control device an acknowledgement response indicating that a packet of print data was received from the printing control device, a negative acknowledgement response indicating that the packet was not received from the printing control device, or a retransmit response requesting the printing control device to retransmit the packet.</claim-text>
</claim>
<claim id="CLM-00035" num="00035">
<claim-text>35. A printer system as claimed in <claim-ref idref="CLM-00030">claim 30</claim-ref>, further comprising a leave unit for leaving the multicast address.</claim-text>
</claim>
</claims>
</us-patent-grant>
